(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var Fle=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ub={exports:{}},d1={};var VC;function tM(){if(VC)return d1;VC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,n,a){var c=null;if(a!==void 0&&(c=""+a),n.key!==void 0&&(c=""+n.key),"key"in n){a={};for(var s in n)s!=="key"&&(a[s]=n[s])}else a=n;return n=a.ref,{$$typeof:e,type:i,key:c,ref:n!==void 0?n:null,props:a}}return d1.Fragment=t,d1.jsx=r,d1.jsxs=r,d1}var GC;function rM(){return GC||(GC=1,ub.exports=tM()),ub.exports}var d=rM(),hb={exports:{}},yn={};var qC;function iM(){if(qC)return yn;qC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),B=Symbol.iterator;function F(Te){return Te===null||typeof Te!="object"?null:(Te=B&&Te[B]||Te["@@iterator"],typeof Te=="function"?Te:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,P={};function D(Te,Ge,Y){this.props=Te,this.context=Ge,this.refs=P,this.updater=Y||C}D.prototype.isReactComponent={},D.prototype.setState=function(Te,Ge){if(typeof Te!="object"&&typeof Te!="function"&&Te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Te,Ge,"setState")},D.prototype.forceUpdate=function(Te){this.updater.enqueueForceUpdate(this,Te,"forceUpdate")};function j(){}j.prototype=D.prototype;function q(Te,Ge,Y){this.props=Te,this.context=Ge,this.refs=P,this.updater=Y||C}var H=q.prototype=new j;H.constructor=q,L(H,D.prototype),H.isPureReactComponent=!0;var ee=Array.isArray,G={H:null,A:null,T:null,S:null,V:null},ne=Object.prototype.hasOwnProperty;function Z(Te,Ge,Y,Ae,fe,be){return Y=be.ref,{$$typeof:e,type:Te,key:Ge,ref:Y!==void 0?Y:null,props:be}}function le(Te,Ge){return Z(Te.type,Ge,void 0,void 0,void 0,Te.props)}function J(Te){return typeof Te=="object"&&Te!==null&&Te.$$typeof===e}function ce(Te){var Ge={"=":"=0",":":"=2"};return"$"+Te.replace(/[=:]/g,function(Y){return Ge[Y]})}var te=/\/+/g;function K(Te,Ge){return typeof Te=="object"&&Te!==null&&Te.key!=null?ce(""+Te.key):Ge.toString(36)}function me(){}function we(Te){switch(Te.status){case"fulfilled":return Te.value;case"rejected":throw Te.reason;default:switch(typeof Te.status=="string"?Te.then(me,me):(Te.status="pending",Te.then(function(Ge){Te.status==="pending"&&(Te.status="fulfilled",Te.value=Ge)},function(Ge){Te.status==="pending"&&(Te.status="rejected",Te.reason=Ge)})),Te.status){case"fulfilled":return Te.value;case"rejected":throw Te.reason}}throw Te}function Fe(Te,Ge,Y,Ae,fe){var be=typeof Te;(be==="undefined"||be==="boolean")&&(Te=null);var Me=!1;if(Te===null)Me=!0;else switch(be){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(Te.$$typeof){case e:case t:Me=!0;break;case v:return Me=Te._init,Fe(Me(Te._payload),Ge,Y,Ae,fe)}}if(Me)return fe=fe(Te),Me=Ae===""?"."+K(Te,0):Ae,ee(fe)?(Y="",Me!=null&&(Y=Me.replace(te,"$&/")+"/"),Fe(fe,Ge,Y,"",function(ut){return ut})):fe!=null&&(J(fe)&&(fe=le(fe,Y+(fe.key==null||Te&&Te.key===fe.key?"":(""+fe.key).replace(te,"$&/")+"/")+Me)),Ge.push(fe)),1;Me=0;var ze=Ae===""?".":Ae+":";if(ee(Te))for(var We=0;We<Te.length;We++)Ae=Te[We],be=ze+K(Ae,We),Me+=Fe(Ae,Ge,Y,be,fe);else if(We=F(Te),typeof We=="function")for(Te=We.call(Te),We=0;!(Ae=Te.next()).done;)Ae=Ae.value,be=ze+K(Ae,We++),Me+=Fe(Ae,Ge,Y,be,fe);else if(be==="object"){if(typeof Te.then=="function")return Fe(we(Te),Ge,Y,Ae,fe);throw Ge=String(Te),Error("Objects are not valid as a React child (found: "+(Ge==="[object Object]"?"object with keys {"+Object.keys(Te).join(", ")+"}":Ge)+"). If you meant to render a collection of children, use an array instead.")}return Me}function he(Te,Ge,Y){if(Te==null)return Te;var Ae=[],fe=0;return Fe(Te,Ae,"","",function(be){return Ge.call(Y,be,fe++)}),Ae}function Le(Te){if(Te._status===-1){var Ge=Te._result;Ge=Ge(),Ge.then(function(Y){(Te._status===0||Te._status===-1)&&(Te._status=1,Te._result=Y)},function(Y){(Te._status===0||Te._status===-1)&&(Te._status=2,Te._result=Y)}),Te._status===-1&&(Te._status=0,Te._result=Ge)}if(Te._status===1)return Te._result.default;throw Te._result}var $e=typeof reportError=="function"?reportError:function(Te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Te=="object"&&Te!==null&&typeof Te.message=="string"?String(Te.message):String(Te),error:Te});if(!window.dispatchEvent(Ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Te);return}console.error(Te)};function Ne(){}return yn.Children={map:he,forEach:function(Te,Ge,Y){he(Te,function(){Ge.apply(this,arguments)},Y)},count:function(Te){var Ge=0;return he(Te,function(){Ge++}),Ge},toArray:function(Te){return he(Te,function(Ge){return Ge})||[]},only:function(Te){if(!J(Te))throw Error("React.Children.only expected to receive a single React element child.");return Te}},yn.Component=D,yn.Fragment=r,yn.Profiler=n,yn.PureComponent=q,yn.StrictMode=i,yn.Suspense=p,yn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,yn.__COMPILER_RUNTIME={__proto__:null,c:function(Te){return G.H.useMemoCache(Te)}},yn.cache=function(Te){return function(){return Te.apply(null,arguments)}},yn.cloneElement=function(Te,Ge,Y){if(Te==null)throw Error("The argument must be a React element, but you passed "+Te+".");var Ae=L({},Te.props),fe=Te.key,be=void 0;if(Ge!=null)for(Me in Ge.ref!==void 0&&(be=void 0),Ge.key!==void 0&&(fe=""+Ge.key),Ge)!ne.call(Ge,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Ge.ref===void 0||(Ae[Me]=Ge[Me]);var Me=arguments.length-2;if(Me===1)Ae.children=Y;else if(1<Me){for(var ze=Array(Me),We=0;We<Me;We++)ze[We]=arguments[We+2];Ae.children=ze}return Z(Te.type,fe,void 0,void 0,be,Ae)},yn.createContext=function(Te){return Te={$$typeof:c,_currentValue:Te,_currentValue2:Te,_threadCount:0,Provider:null,Consumer:null},Te.Provider=Te,Te.Consumer={$$typeof:a,_context:Te},Te},yn.createElement=function(Te,Ge,Y){var Ae,fe={},be=null;if(Ge!=null)for(Ae in Ge.key!==void 0&&(be=""+Ge.key),Ge)ne.call(Ge,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(fe[Ae]=Ge[Ae]);var Me=arguments.length-2;if(Me===1)fe.children=Y;else if(1<Me){for(var ze=Array(Me),We=0;We<Me;We++)ze[We]=arguments[We+2];fe.children=ze}if(Te&&Te.defaultProps)for(Ae in Me=Te.defaultProps,Me)fe[Ae]===void 0&&(fe[Ae]=Me[Ae]);return Z(Te,be,void 0,void 0,null,fe)},yn.createRef=function(){return{current:null}},yn.forwardRef=function(Te){return{$$typeof:s,render:Te}},yn.isValidElement=J,yn.lazy=function(Te){return{$$typeof:v,_payload:{_status:-1,_result:Te},_init:Le}},yn.memo=function(Te,Ge){return{$$typeof:g,type:Te,compare:Ge===void 0?null:Ge}},yn.startTransition=function(Te){var Ge=G.T,Y={};G.T=Y;try{var Ae=Te(),fe=G.S;fe!==null&&fe(Y,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(Ne,$e)}catch(be){$e(be)}finally{G.T=Ge}},yn.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},yn.use=function(Te){return G.H.use(Te)},yn.useActionState=function(Te,Ge,Y){return G.H.useActionState(Te,Ge,Y)},yn.useCallback=function(Te,Ge){return G.H.useCallback(Te,Ge)},yn.useContext=function(Te){return G.H.useContext(Te)},yn.useDebugValue=function(){},yn.useDeferredValue=function(Te,Ge){return G.H.useDeferredValue(Te,Ge)},yn.useEffect=function(Te,Ge,Y){var Ae=G.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ae.useEffect(Te,Ge)},yn.useId=function(){return G.H.useId()},yn.useImperativeHandle=function(Te,Ge,Y){return G.H.useImperativeHandle(Te,Ge,Y)},yn.useInsertionEffect=function(Te,Ge){return G.H.useInsertionEffect(Te,Ge)},yn.useLayoutEffect=function(Te,Ge){return G.H.useLayoutEffect(Te,Ge)},yn.useMemo=function(Te,Ge){return G.H.useMemo(Te,Ge)},yn.useOptimistic=function(Te,Ge){return G.H.useOptimistic(Te,Ge)},yn.useReducer=function(Te,Ge,Y){return G.H.useReducer(Te,Ge,Y)},yn.useRef=function(Te){return G.H.useRef(Te)},yn.useState=function(Te){return G.H.useState(Te)},yn.useSyncExternalStore=function(Te,Ge,Y){return G.H.useSyncExternalStore(Te,Ge,Y)},yn.useTransition=function(){return G.H.useTransition()},yn.version="19.1.1",yn}var KC;function d4(){return KC||(KC=1,hb.exports=iM()),hb.exports}var xe=d4();const zn=A4(xe);var Ab={exports:{}},f1={},db={exports:{}},fb={};var WC;function nM(){return WC||(WC=1,function(e){function t(he,Le){var $e=he.length;he.push(Le);e:for(;0<$e;){var Ne=$e-1>>>1,Te=he[Ne];if(0<n(Te,Le))he[Ne]=Le,he[$e]=Te,$e=Ne;else break e}}function r(he){return he.length===0?null:he[0]}function i(he){if(he.length===0)return null;var Le=he[0],$e=he.pop();if($e!==Le){he[0]=$e;e:for(var Ne=0,Te=he.length,Ge=Te>>>1;Ne<Ge;){var Y=2*(Ne+1)-1,Ae=he[Y],fe=Y+1,be=he[fe];if(0>n(Ae,$e))fe<Te&&0>n(be,Ae)?(he[Ne]=be,he[fe]=$e,Ne=fe):(he[Ne]=Ae,he[Y]=$e,Ne=Y);else if(fe<Te&&0>n(be,$e))he[Ne]=be,he[fe]=$e,Ne=fe;else break e}}return Le}function n(he,Le){var $e=he.sortIndex-Le.sortIndex;return $e!==0?$e:he.id-Le.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,s=c.now();e.unstable_now=function(){return c.now()-s}}var p=[],g=[],v=1,B=null,F=3,C=!1,L=!1,P=!1,D=!1,j=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function ee(he){for(var Le=r(g);Le!==null;){if(Le.callback===null)i(g);else if(Le.startTime<=he)i(g),Le.sortIndex=Le.expirationTime,t(p,Le);else break;Le=r(g)}}function G(he){if(P=!1,ee(he),!L)if(r(p)!==null)L=!0,ne||(ne=!0,K());else{var Le=r(g);Le!==null&&Fe(G,Le.startTime-he)}}var ne=!1,Z=-1,le=5,J=-1;function ce(){return D?!0:!(e.unstable_now()-J<le)}function te(){if(D=!1,ne){var he=e.unstable_now();J=he;var Le=!0;try{e:{L=!1,P&&(P=!1,q(Z),Z=-1),C=!0;var $e=F;try{t:{for(ee(he),B=r(p);B!==null&&!(B.expirationTime>he&&ce());){var Ne=B.callback;if(typeof Ne=="function"){B.callback=null,F=B.priorityLevel;var Te=Ne(B.expirationTime<=he);if(he=e.unstable_now(),typeof Te=="function"){B.callback=Te,ee(he),Le=!0;break t}B===r(p)&&i(p),ee(he)}else i(p);B=r(p)}if(B!==null)Le=!0;else{var Ge=r(g);Ge!==null&&Fe(G,Ge.startTime-he),Le=!1}}break e}finally{B=null,F=$e,C=!1}Le=void 0}}finally{Le?K():ne=!1}}}var K;if(typeof H=="function")K=function(){H(te)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,we=me.port2;me.port1.onmessage=te,K=function(){we.postMessage(null)}}else K=function(){j(te,0)};function Fe(he,Le){Z=j(function(){he(e.unstable_now())},Le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(he){he.callback=null},e.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<he?Math.floor(1e3/he):5},e.unstable_getCurrentPriorityLevel=function(){return F},e.unstable_next=function(he){switch(F){case 1:case 2:case 3:var Le=3;break;default:Le=F}var $e=F;F=Le;try{return he()}finally{F=$e}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(he,Le){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var $e=F;F=he;try{return Le()}finally{F=$e}},e.unstable_scheduleCallback=function(he,Le,$e){var Ne=e.unstable_now();switch(typeof $e=="object"&&$e!==null?($e=$e.delay,$e=typeof $e=="number"&&0<$e?Ne+$e:Ne):$e=Ne,he){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=$e+Te,he={id:v++,callback:Le,priorityLevel:he,startTime:$e,expirationTime:Te,sortIndex:-1},$e>Ne?(he.sortIndex=$e,t(g,he),r(p)===null&&he===r(g)&&(P?(q(Z),Z=-1):P=!0,Fe(G,$e-Ne))):(he.sortIndex=Te,t(p,he),L||C||(L=!0,ne||(ne=!0,K()))),he},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(he){var Le=F;return function(){var $e=F;F=Le;try{return he.apply(this,arguments)}finally{F=$e}}}}(fb)),fb}var $C;function sM(){return $C||($C=1,db.exports=nM()),db.exports}var pb={exports:{}},jc={};var XC;function aM(){if(XC)return jc;XC=1;var e=d4();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function a(p,g,v){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:B==null?null:""+B,children:p,containerInfo:g,implementation:v}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return jc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jc.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return a(p,g,null,v)},jc.flushSync=function(p){var g=c.T,v=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=v,i.d.f()}},jc.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},jc.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},jc.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,B=s(v,g.crossOrigin),F=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:B,integrity:F,fetchPriority:C}):v==="script"&&i.d.X(p,{crossOrigin:B,integrity:F,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},jc.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=s(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},jc.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,B=s(v,g.crossOrigin);i.d.L(p,v,{crossOrigin:B,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},jc.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=s(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},jc.requestFormReset=function(p){i.d.r(p)},jc.unstable_batchedUpdates=function(p,g){return p(g)},jc.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},jc.useFormStatus=function(){return c.H.useHostTransitionStatus()},jc.version="19.1.1",jc}var ZC;function oM(){if(ZC)return pb.exports;ZC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pb.exports=aM(),pb.exports}var YC;function lM(){if(YC)return f1;YC=1;var e=sM(),t=d4(),r=oM();function i(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function a(h){var m=h,_=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(_=m.return),h=m.return;while(h)}return m.tag===3?_:null}function c(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function s(h){if(a(h)!==h)throw Error(i(188))}function p(h){var m=h.alternate;if(!m){if(m=a(h),m===null)throw Error(i(188));return m!==h?null:h}for(var _=h,k=m;;){var U=_.return;if(U===null)break;var X=U.alternate;if(X===null){if(k=U.return,k!==null){_=k;continue}break}if(U.child===X.child){for(X=U.child;X;){if(X===_)return s(U),h;if(X===k)return s(U),m;X=X.sibling}throw Error(i(188))}if(_.return!==k.return)_=U,k=X;else{for(var Be=!1,He=U.child;He;){if(He===_){Be=!0,_=U,k=X;break}if(He===k){Be=!0,k=U,_=X;break}He=He.sibling}if(!Be){for(He=X.child;He;){if(He===_){Be=!0,_=X,k=U;break}if(He===k){Be=!0,k=X,_=U;break}He=He.sibling}if(!Be)throw Error(i(189))}}if(_.alternate!==k)throw Error(i(190))}if(_.tag!==3)throw Error(i(188));return _.stateNode.current===_?h:m}function g(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=g(h),m!==null)return m;h=h.sibling}return null}var v=Object.assign,B=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),H=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function K(h){return h===null||typeof h!="object"?null:(h=te&&h[te]||h["@@iterator"],typeof h=="function"?h:null)}var me=Symbol.for("react.client.reference");function we(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===me?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case L:return"Fragment";case D:return"Profiler";case P:return"StrictMode";case G:return"Suspense";case ne:return"SuspenseList";case J:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case C:return"Portal";case H:return(h.displayName||"Context")+".Provider";case q:return(h._context.displayName||"Context")+".Consumer";case ee:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Z:return m=h.displayName||null,m!==null?m:we(h.type)||"Memo";case le:m=h._payload,h=h._init;try{return we(h(m))}catch{}}return null}var Fe=Array.isArray,he=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$e={pending:!1,data:null,method:null,action:null},Ne=[],Te=-1;function Ge(h){return{current:h}}function Y(h){0>Te||(h.current=Ne[Te],Ne[Te]=null,Te--)}function Ae(h,m){Te++,Ne[Te]=h.current,h.current=m}var fe=Ge(null),be=Ge(null),Me=Ge(null),ze=Ge(null);function We(h,m){switch(Ae(Me,m),Ae(be,h),Ae(fe,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?a1(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=a1(m),h=Kf(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}Y(fe),Ae(fe,h)}function ut(){Y(fe),Y(be),Y(Me)}function dt(h){h.memoizedState!==null&&Ae(ze,h);var m=fe.current,_=Kf(m,h.type);m!==_&&(Ae(be,h),Ae(fe,_))}function zt(h){be.current===h&&(Y(fe),Y(be)),ze.current===h&&(Y(ze),E._currentValue=$e)}var ve=Object.prototype.hasOwnProperty,Ct=e.unstable_scheduleCallback,Pt=e.unstable_cancelCallback,Ve=e.unstable_shouldYield,lr=e.unstable_requestPaint,ir=e.unstable_now,jr=e.unstable_getCurrentPriorityLevel,ar=e.unstable_ImmediatePriority,Wr=e.unstable_UserBlockingPriority,Lr=e.unstable_NormalPriority,Zr=e.unstable_LowPriority,qr=e.unstable_IdlePriority,wi=e.log,Ci=e.unstable_setDisableYieldValue,$t=null,Ar=null;function yr(h){if(typeof wi=="function"&&Ci(h),Ar&&typeof Ar.setStrictMode=="function")try{Ar.setStrictMode($t,h)}catch{}}var it=Math.clz32?Math.clz32:Re,ye=Math.log,Ce=Math.LN2;function Re(h){return h>>>=0,h===0?32:31-(ye(h)/Ce|0)|0}var Ze=256,ot=4194304;function vt(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function Rt(h,m,_){var k=h.pendingLanes;if(k===0)return 0;var U=0,X=h.suspendedLanes,Be=h.pingedLanes;h=h.warmLanes;var He=k&134217727;return He!==0?(k=He&~X,k!==0?U=vt(k):(Be&=He,Be!==0?U=vt(Be):_||(_=He&~h,_!==0&&(U=vt(_))))):(He=k&~X,He!==0?U=vt(He):Be!==0?U=vt(Be):_||(_=k&~h,_!==0&&(U=vt(_)))),U===0?0:m!==0&&m!==U&&(m&X)===0&&(X=U&-U,_=m&-m,X>=_||X===32&&(_&4194048)!==0)?m:U}function xt(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function Gt(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function er(){var h=Ze;return Ze<<=1,(Ze&4194048)===0&&(Ze=256),h}function qt(){var h=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),h}function Mr(h){for(var m=[],_=0;31>_;_++)m.push(h);return m}function Fr(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function wt(h,m,_,k,U,X){var Be=h.pendingLanes;h.pendingLanes=_,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=_,h.entangledLanes&=_,h.errorRecoveryDisabledLanes&=_,h.shellSuspendCounter=0;var He=h.entanglements,_t=h.expirationTimes,Ut=h.hiddenUpdates;for(_=Be&~_;0<_;){var vr=31-it(_),br=1<<vr;He[vr]=0,_t[vr]=-1;var rr=Ut[vr];if(rr!==null)for(Ut[vr]=null,vr=0;vr<rr.length;vr++){var or=rr[vr];or!==null&&(or.lane&=-536870913)}_&=~br}k!==0&&ei(h,k,0),X!==0&&U===0&&h.tag!==0&&(h.suspendedLanes|=X&~(Be&~m))}function ei(h,m,_){h.pendingLanes|=m,h.suspendedLanes&=~m;var k=31-it(m);h.entangledLanes|=m,h.entanglements[k]=h.entanglements[k]|1073741824|_&4194090}function Ji(h,m){var _=h.entangledLanes|=m;for(h=h.entanglements;_;){var k=31-it(_),U=1<<k;U&m|h[k]&m&&(h[k]|=m),_&=~U}}function Hr(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Ri(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function In(){var h=Le.p;return h!==0?h:(h=window.event,h===void 0?32:Bt(h.type))}function Yr(h,m){var _=Le.p;try{return Le.p=h,m()}finally{Le.p=_}}var on=Math.random().toString(36).slice(2),$i="__reactFiber$"+on,mi="__reactProps$"+on,ln="__reactContainer$"+on,gi="__reactEvents$"+on,dr="__reactListeners$"+on,De="__reactHandles$"+on,lt="__reactResources$"+on,Ye="__reactMarker$"+on;function nt(h){delete h[$i],delete h[mi],delete h[gi],delete h[dr],delete h[De]}function Qe(h){var m=h[$i];if(m)return m;for(var _=h.parentNode;_;){if(m=_[ln]||_[$i]){if(_=m.alternate,m.child!==null||_!==null&&_.child!==null)for(h=l1(h);h!==null;){if(_=h[$i])return _;h=l1(h)}return m}h=_,_=h.parentNode}return null}function st(h){if(h=h[$i]||h[ln]){var m=h.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return h}return null}function Tt(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(i(33))}function sr(h){var m=h[lt];return m||(m=h[lt]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function jt(h){h[Ye]=!0}var Kt=new Set,Mt={};function Cr(h,m){Dr(h,m),Dr(h+"Capture",m)}function Dr(h,m){for(Mt[h]=m,h=0;h<m.length;h++)Kt.add(m[h])}var Kr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pr={},Gr={};function yi(h){return ve.call(Gr,h)?!0:ve.call(Pr,h)?!1:Kr.test(h)?Gr[h]=!0:(Pr[h]=!0,!1)}function Fi(h,m,_){if(yi(m))if(_===null)h.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var k=m.toLowerCase().slice(0,5);if(k!=="data-"&&k!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+_)}}function Ni(h,m,_){if(_===null)h.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+_)}}function _i(h,m,_,k){if(k===null)h.removeAttribute(_);else{switch(typeof k){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(_);return}h.setAttributeNS(m,_,""+k)}}var Qa,La;function Ma(h){if(Qa===void 0)try{throw Error()}catch(_){var m=_.stack.trim().match(/\n( *(at )?)/);Qa=m&&m[1]||"",La=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qa+h+La}var ea=!1;function xa(h,m){if(!h||ea)return"";ea=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var k={DetermineComponentFrameRoot:function(){try{if(m){var br=function(){throw Error()};if(Object.defineProperty(br.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(br,[])}catch(or){var rr=or}Reflect.construct(h,[],br)}else{try{br.call()}catch(or){rr=or}h.call(br.prototype)}}else{try{throw Error()}catch(or){rr=or}(br=h())&&typeof br.catch=="function"&&br.catch(function(){})}}catch(or){if(or&&rr&&typeof or.stack=="string")return[or.stack,rr.stack]}return[null,null]}};k.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(k.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(k.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=k.DetermineComponentFrameRoot(),Be=X[0],He=X[1];if(Be&&He){var _t=Be.split(`
`),Ut=He.split(`
`);for(U=k=0;k<_t.length&&!_t[k].includes("DetermineComponentFrameRoot");)k++;for(;U<Ut.length&&!Ut[U].includes("DetermineComponentFrameRoot");)U++;if(k===_t.length||U===Ut.length)for(k=_t.length-1,U=Ut.length-1;1<=k&&0<=U&&_t[k]!==Ut[U];)U--;for(;1<=k&&0<=U;k--,U--)if(_t[k]!==Ut[U]){if(k!==1||U!==1)do if(k--,U--,0>U||_t[k]!==Ut[U]){var vr=`
`+_t[k].replace(" at new "," at ");return h.displayName&&vr.includes("<anonymous>")&&(vr=vr.replace("<anonymous>",h.displayName)),vr}while(1<=k&&0<=U);break}}}finally{ea=!1,Error.prepareStackTrace=_}return(_=h?h.displayName||h.name:"")?Ma(_):""}function Qs(h){switch(h.tag){case 26:case 27:case 5:return Ma(h.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 15:return xa(h.type,!1);case 11:return xa(h.type.render,!1);case 1:return xa(h.type,!0);case 31:return Ma("Activity");default:return""}}function iu(h){try{var m="";do m+=Qs(h),h=h.return;while(h);return m}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function no(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function rs(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function cA(h){var m=rs(h)?"checked":"value",_=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),k=""+h[m];if(!h.hasOwnProperty(m)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var U=_.get,X=_.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return U.call(this)},set:function(Be){k=""+Be,X.call(this,Be)}}),Object.defineProperty(h,m,{enumerable:_.enumerable}),{getValue:function(){return k},setValue:function(Be){k=""+Be},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function $o(h){h._valueTracker||(h._valueTracker=cA(h))}function oh(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var _=m.getValue(),k="";return h&&(k=rs(h)?h.checked?"true":"false":h.value),h=k,h!==_?(m.setValue(h),!0):!1}function lh(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Xo=/[\n"\\]/g;function kn(h){return h.replace(Xo,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function Pa(h,m,_,k,U,X,Be,He){h.name="",Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"?h.type=Be:h.removeAttribute("type"),m!=null?Be==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+no(m)):h.value!==""+no(m)&&(h.value=""+no(m)):Be!=="submit"&&Be!=="reset"||h.removeAttribute("value"),m!=null?Nh(h,Be,no(m)):_!=null?Nh(h,Be,no(_)):k!=null&&h.removeAttribute("value"),U==null&&X!=null&&(h.defaultChecked=!!X),U!=null&&(h.checked=U&&typeof U!="function"&&typeof U!="symbol"),He!=null&&typeof He!="function"&&typeof He!="symbol"&&typeof He!="boolean"?h.name=""+no(He):h.removeAttribute("name")}function ch(h,m,_,k,U,X,Be,He){if(X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(h.type=X),m!=null||_!=null){if(!(X!=="submit"&&X!=="reset"||m!=null))return;_=_!=null?""+no(_):"",m=m!=null?""+no(m):_,He||m===h.value||(h.value=m),h.defaultValue=m}k=k??U,k=typeof k!="function"&&typeof k!="symbol"&&!!k,h.checked=He?h.checked:!!k,h.defaultChecked=!!k,Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"&&(h.name=Be)}function Nh(h,m,_){m==="number"&&lh(h.ownerDocument)===h||h.defaultValue===""+_||(h.defaultValue=""+_)}function To(h,m,_,k){if(h=h.options,m){m={};for(var U=0;U<_.length;U++)m["$"+_[U]]=!0;for(_=0;_<h.length;_++)U=m.hasOwnProperty("$"+h[_].value),h[_].selected!==U&&(h[_].selected=U),U&&k&&(h[_].defaultSelected=!0)}else{for(_=""+no(_),m=null,U=0;U<h.length;U++){if(h[U].value===_){h[U].selected=!0,k&&(h[U].defaultSelected=!0);return}m!==null||h[U].disabled||(m=h[U])}m!==null&&(m.selected=!0)}}function Zo(h,m,_){if(m!=null&&(m=""+no(m),m!==h.value&&(h.value=m),_==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=_!=null?""+no(_):""}function uA(h,m,_,k){if(m==null){if(k!=null){if(_!=null)throw Error(i(92));if(Fe(k)){if(1<k.length)throw Error(i(93));k=k[0]}_=k}_==null&&(_=""),m=_}_=no(m),h.defaultValue=_,k=h.textContent,k===_&&k!==""&&k!==null&&(h.value=k)}function Yo(h,m){if(m){var _=h.firstChild;if(_&&_===h.lastChild&&_.nodeType===3){_.nodeValue=m;return}}h.textContent=m}var vc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xc(h,m,_){var k=m.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?k?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":k?h.setProperty(m,_):typeof _!="number"||_===0||vc.has(m)?m==="float"?h.cssFloat=_:h[m]=(""+_).trim():h[m]=_+"px"}function ya(h,m,_){if(m!=null&&typeof m!="object")throw Error(i(62));if(h=h.style,_!=null){for(var k in _)!_.hasOwnProperty(k)||m!=null&&m.hasOwnProperty(k)||(k.indexOf("--")===0?h.setProperty(k,""):k==="float"?h.cssFloat="":h[k]="");for(var U in m)k=m[U],m.hasOwnProperty(U)&&_[U]!==k&&xc(h,U,k)}else for(var X in m)m.hasOwnProperty(X)&&xc(h,X,m[X])}function Xi(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(h){return Aa.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var Ti=null;function nu(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Ha=null,so=null;function Ra(h){var m=st(h);if(m&&(h=m.stateNode)){var _=h[mi]||null;e:switch(h=m.stateNode,m.type){case"input":if(Pa(h,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),m=_.name,_.type==="radio"&&m!=null){for(_=h;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+kn(""+m)+'"][type="radio"]'),m=0;m<_.length;m++){var k=_[m];if(k!==h&&k.form===h.form){var U=k[mi]||null;if(!U)throw Error(i(90));Pa(k,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(m=0;m<_.length;m++)k=_[m],k.form===h.form&&oh(k)}break e;case"textarea":Zo(h,_.value,_.defaultValue);break e;case"select":m=_.value,m!=null&&To(h,!!_.multiple,m,!1)}}}var oi=!1;function Hs(h,m,_){if(oi)return h(m,_);oi=!0;try{var k=h(m);return k}finally{if(oi=!1,(Ha!==null||so!==null)&&(em(),Ha&&(m=Ha,h=so,so=Ha=null,Ra(m),h)))for(m=0;m<h.length;m++)Ra(h[m])}}function ys(h,m){var _=h.stateNode;if(_===null)return null;var k=_[mi]||null;if(k===null)return null;_=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(_&&typeof _!="function")throw Error(i(231,m,typeof _));return _}var An=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=!1;if(An)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Va=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Va=!1}var Ls=null,_a=null,el=null;function _n(){if(el)return el;var h,m=_a,_=m.length,k,U="value"in Ls?Ls.value:Ls.textContent,X=U.length;for(h=0;h<_&&m[h]===U[h];h++);var Be=_-h;for(k=1;k<=Be&&m[_-k]===U[X-k];k++);return el=U.slice(h,1<k?1-k:void 0)}function Fn(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function Wi(){return!0}function di(){return!1}function Vs(h){function m(_,k,U,X,Be){this._reactName=_,this._targetInst=U,this.type=k,this.nativeEvent=X,this.target=Be,this.currentTarget=null;for(var He in h)h.hasOwnProperty(He)&&(_=h[He],this[He]=_?_(X):X[He]);return this.isDefaultPrevented=(X.defaultPrevented!=null?X.defaultPrevented:X.returnValue===!1)?Wi:di,this.isPropagationStopped=di,this}return v(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),m}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=Vs(bi),_s=v({},bi,{view:0,detail:0}),Wl=Vs(_s),$l,xl,ko,Fo=v({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==ko&&(ko&&h.type==="mousemove"?($l=h.screenX-ko.screenX,xl=h.screenY-ko.screenY):xl=$l=0,ko=h),$l)},movementY:function(h){return"movementY"in h?h.movementY:xl}}),Tu=Vs(Fo),uh=v({},Fo,{dataTransfer:0}),ku=Vs(uh),ba=v({},_s,{relatedTarget:0}),Wn=Vs(ba),yc=v({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xl=Vs(yc),Zl=v({},bi,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),re=Vs(Zl),Ie=v({},bi,{data:0}),At=Vs(Ie),Et={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Br(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=cr[h])?!!m[h]:!1}function $r(){return Br}var ci=v({},_s,{key:function(h){if(h.key){var m=Et[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Fn(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Ht[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(h){return h.type==="keypress"?Fn(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Fn(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),ji=Vs(ci),Qi=v({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=Vs(Qi),Bn=v({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),Gs=Vs(Bn),Qn=v({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),da=Vs(Qn),Ms=v({},Fo,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Da=Vs(Ms),yl=v({},bi,{newState:0,oldState:0}),tl=Vs(yl),_l=[9,13,27,32],bl=An&&"CompositionEvent"in window,wl=null;An&&"documentMode"in document&&(wl=document.documentMode);var wa=An&&"TextEvent"in window&&!wl,su=An&&(!bl||wl&&8<wl&&11>=wl),_c=" ",No=!1;function Ps(h,m){switch(h){case"keyup":return _l.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fu(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var ao=!1;function hA(h,m){switch(h){case"compositionend":return Fu(m);case"keypress":return m.which!==32?null:(No=!0,_c);case"textInput":return h=m.data,h===_c&&No?null:h;default:return null}}function bc(h,m){if(ao)return h==="compositionend"||!bl&&Ps(h,m)?(h=_n(),el=_a=Ls=null,ao=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return su&&m.locale!=="ko"?null:m.data;default:return null}}var Ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cl(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Ga[h.type]:m==="textarea"}function Nu(h,m,_,k){Ha?so?so.push(k):so=[k]:Ha=k,m=Qd(m,"onChange"),0<m.length&&(_=new Kl("onChange","change",null,_,k),h.push({event:_,listeners:m}))}var au=null,Ca=null;function Iu(h){kx(h,0)}function ou(h){var m=Tt(h);if(oh(m))return h}function wc(h,m){if(h==="change")return m}var Cc=!1;if(An){var oo;if(An){var qa="oninput"in document;if(!qa){var lo=document.createElement("div");lo.setAttribute("oninput","return;"),qa=typeof lo.oninput=="function"}oo=qa}else oo=!1;Cc=oo&&(!document.documentMode||9<document.documentMode)}function co(){au&&(au.detachEvent("onpropertychange",Yl),Ca=au=null)}function Yl(h){if(h.propertyName==="value"&&ou(Ca)){var m=[];Nu(m,Ca,h,nu(h)),Hs(Iu,m)}}function Jl(h,m,_){h==="focusin"?(co(),au=m,Ca=_,au.attachEvent("onpropertychange",Yl)):h==="focusout"&&co()}function AA(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ou(Ca)}function hh(h,m){if(h==="click")return ou(m)}function bs(h,m){if(h==="input"||h==="change")return ou(m)}function dA(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var ws=typeof Object.is=="function"?Object.is:dA;function Ka(h,m){if(ws(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var _=Object.keys(h),k=Object.keys(m);if(_.length!==k.length)return!1;for(k=0;k<_.length;k++){var U=_[k];if(!ve.call(m,U)||!ws(h[U],m[U]))return!1}return!0}function Lu(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function lu(h,m){var _=Lu(h);h=0;for(var k;_;){if(_.nodeType===3){if(k=h+_.textContent.length,h<=m&&k>=m)return{node:_,offset:m-h};h=k}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=Lu(_)}}function Io(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?Io(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function Mu(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=lh(h.document);m instanceof h.HTMLIFrameElement;){try{var _=typeof m.contentWindow.location.href=="string"}catch{_=!1}if(_)h=m.contentWindow;else break;m=lh(h.document)}return m}function Bl(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var en=An&&"documentMode"in document&&11>=document.documentMode,Lo=null,ec=null,Ba=null,tc=!1;function rl(h,m,_){var k=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;tc||Lo==null||Lo!==lh(k)||(k=Lo,"selectionStart"in k&&Bl(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Ba&&Ka(Ba,k)||(Ba=k,k=Qd(ec,"onSelect"),0<k.length&&(m=new Kl("onSelect","select",null,m,_),h.push({event:m,listeners:k}),m.target=Lo)))}function Wa(h,m){var _={};return _[h.toLowerCase()]=m.toLowerCase(),_["Webkit"+h]="webkit"+m,_["Moz"+h]="moz"+m,_}var pn={animationend:Wa("Animation","AnimationEnd"),animationiteration:Wa("Animation","AnimationIteration"),animationstart:Wa("Animation","AnimationStart"),transitionrun:Wa("Transition","TransitionRun"),transitionstart:Wa("Transition","TransitionStart"),transitioncancel:Wa("Transition","TransitionCancel"),transitionend:Wa("Transition","TransitionEnd")},Hn={},Cs={};An&&(Cs=document.createElement("div").style,"AnimationEvent"in window||(delete pn.animationend.animation,delete pn.animationiteration.animation,delete pn.animationstart.animation),"TransitionEvent"in window||delete pn.transitionend.transition);function os(h){if(Hn[h])return Hn[h];if(!pn[h])return h;var m=pn[h],_;for(_ in m)if(m.hasOwnProperty(_)&&_ in Cs)return Hn[h]=m[_];return h}var rc=os("animationend"),cu=os("animationiteration"),Bc=os("animationstart"),Ah=os("transitionrun"),ZA=os("transitionstart"),Pu=os("transitioncancel"),dh=os("transitionend"),Ru=new Map,uo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uo.push("scrollEnd");function il(h,m){Ru.set(h,m),Cr(m,[h])}var fh=new WeakMap;function ho(h,m){if(typeof h=="object"&&h!==null){var _=fh.get(h);return _!==void 0?_:(m={value:h,source:m,stack:iu(m)},fh.set(h,m),m)}return{value:h,source:m,stack:iu(m)}}var fa=[],Sc=0,ph=0;function uu(){for(var h=Sc,m=ph=Sc=0;m<h;){var _=fa[m];fa[m++]=null;var k=fa[m];fa[m++]=null;var U=fa[m];fa[m++]=null;var X=fa[m];if(fa[m++]=null,k!==null&&U!==null){var Be=k.pending;Be===null?U.next=U:(U.next=Be.next,Be.next=U),k.pending=U}X!==0&&hu(_,U,X)}}function Du(h,m,_,k){fa[Sc++]=h,fa[Sc++]=m,fa[Sc++]=_,fa[Sc++]=k,ph|=k,h.lanes|=k,h=h.alternate,h!==null&&(h.lanes|=k)}function fA(h,m,_,k){return Du(h,m,_,k),ju(h)}function Sl(h,m){return Du(h,null,null,m),ju(h)}function hu(h,m,_){h.lanes|=_;var k=h.alternate;k!==null&&(k.lanes|=_);for(var U=!1,X=h.return;X!==null;)X.childLanes|=_,k=X.alternate,k!==null&&(k.childLanes|=_),X.tag===22&&(h=X.stateNode,h===null||h._visibility&1||(U=!0)),h=X,X=X.return;return h.tag===3?(X=h.stateNode,U&&m!==null&&(U=31-it(_),h=X.hiddenUpdates,k=h[U],k===null?h[U]=[m]:k.push(m),m.lane=_|536870912),X):null}function ju(h){if(50<zf)throw zf=0,$g=null,Error(i(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var Rs={};function Ii(h,m,_,k){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pa(h,m,_,k){return new Ii(h,m,_,k)}function Ih(h){return h=h.prototype,!(!h||!h.isReactComponent)}function El(h,m){var _=h.alternate;return _===null?(_=pa(h.tag,m,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=m,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&65011712,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,m=h.dependencies,_.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_.refCleanup=h.refCleanup,_}function Au(h,m){h.flags&=65011714;var _=h.alternate;return _===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=_.childLanes,h.lanes=_.lanes,h.child=_.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=_.memoizedProps,h.memoizedState=_.memoizedState,h.updateQueue=_.updateQueue,h.type=_.type,m=_.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function mh(h,m,_,k,U,X){var Be=0;if(k=h,typeof h=="function")Ih(h)&&(Be=1);else if(typeof h=="string")Be=Xp(h,_,fe.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case J:return h=pa(31,_,m,U),h.elementType=J,h.lanes=X,h;case L:return Tl(_.children,U,X,m);case P:Be=8,U|=24;break;case D:return h=pa(12,_,m,U|2),h.elementType=D,h.lanes=X,h;case G:return h=pa(13,_,m,U),h.elementType=G,h.lanes=X,h;case ne:return h=pa(19,_,m,U),h.elementType=ne,h.lanes=X,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case j:case H:Be=10;break e;case q:Be=9;break e;case ee:Be=11;break e;case Z:Be=14;break e;case le:Be=16,k=null;break e}Be=29,_=Error(i(130,h===null?"null":typeof h,"")),k=null}return m=pa(Be,_,m,U),m.elementType=h,m.type=k,m.lanes=X,m}function Tl(h,m,_,k){return h=pa(7,h,k,m),h.lanes=_,h}function Lh(h,m,_){return h=pa(6,h,null,m),h.lanes=_,h}function pA(h,m,_){return m=pa(4,h.children!==null?h.children:[],h.key,m),m.lanes=_,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var Ec=[],kl=0,du=null,gh=0,Ao=[],fo=0,Tc=null,Fl=1,nl="";function sl(h,m){Ec[kl++]=gh,Ec[kl++]=du,du=h,gh=m}function mA(h,m,_){Ao[fo++]=Fl,Ao[fo++]=nl,Ao[fo++]=Tc,Tc=h;var k=Fl;h=nl;var U=32-it(k)-1;k&=~(1<<U),_+=1;var X=32-it(m)+U;if(30<X){var Be=U-U%5;X=(k&(1<<Be)-1).toString(32),k>>=Be,U-=Be,Fl=1<<32-it(m)+U|_<<U|k,nl=X+h}else Fl=1<<X|_<<U|k,nl=h}function gA(h){h.return!==null&&(sl(h,1),mA(h,1,0))}function fu(h){for(;h===du;)du=Ec[--kl],Ec[kl]=null,gh=Ec[--kl],Ec[kl]=null;for(;h===Tc;)Tc=Ao[--fo],Ao[fo]=null,nl=Ao[--fo],Ao[fo]=null,Fl=Ao[--fo],Ao[fo]=null}var ma=null,Bs=null,mn=!1,ic=null,al=!1,Mh=Error(i(519));function Nl(h){var m=Error(i(418,""));throw ja(ho(m,h)),Mh}function Ph(h){var m=h.stateNode,_=h.type,k=h.memoizedProps;switch(m[$i]=h,m[mi]=k,_){case"dialog":vn("cancel",m),vn("close",m);break;case"iframe":case"object":case"embed":vn("load",m);break;case"video":case"audio":for(_=0;_<hd.length;_++)vn(hd[_],m);break;case"source":vn("error",m);break;case"img":case"image":case"link":vn("error",m),vn("load",m);break;case"details":vn("toggle",m);break;case"input":vn("invalid",m),ch(m,k.value,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name,!0),$o(m);break;case"select":vn("invalid",m);break;case"textarea":vn("invalid",m),uA(m,k.value,k.defaultValue,k.children),$o(m)}_=k.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||m.textContent===""+_||k.suppressHydrationWarning===!0||Ix(m.textContent,_)?(k.popover!=null&&(vn("beforetoggle",m),vn("toggle",m)),k.onScroll!=null&&vn("scroll",m),k.onScrollEnd!=null&&vn("scrollend",m),k.onClick!=null&&(m.onclick=Gf),m=!0):m=!1,m||Nl(h)}function Il(h){for(ma=h.return;ma;)switch(ma.tag){case 5:case 13:al=!1;return;case 27:case 3:al=!0;return;default:ma=ma.return}}function $a(h){if(h!==ma)return!1;if(!mn)return Il(h),mn=!0,!1;var m=h.tag,_;if((_=m!==3&&m!==27)&&((_=m===5)&&(_=h.type,_=!(_!=="form"&&_!=="button")||gm(h.type,h.memoizedProps)),_=!_),_&&Bs&&Nl(h),Il(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8)if(_=h.data,_==="/$"){if(m===0){Bs=Yu(h.nextSibling);break e}m--}else _!=="$"&&_!=="$!"&&_!=="$?"||m++;h=h.nextSibling}Bs=null}}else m===27?(m=Bs,kA(h.type)?(h=xm,xm=null,Bs=h):Bs=m):Bs=ma?Yu(h.stateNode.nextSibling):null;return!0}function bn(){Bs=ma=null,mn=!1}function Uu(){var h=ic;return h!==null&&(Pc===null?Pc=h:Pc.push.apply(Pc,h),ic=null),h}function ja(h){ic===null?ic=[h]:ic.push(h)}var Ll=Ge(null),qs=null,nc=null;function Mo(h,m,_){Ae(Ll,m._currentValue),m._currentValue=_}function po(h){h._currentValue=Ll.current,Y(Ll)}function Ou(h,m,_){for(;h!==null;){var k=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),h===_)break;h=h.return}}function vh(h,m,_,k){var U=h.child;for(U!==null&&(U.return=h);U!==null;){var X=U.dependencies;if(X!==null){var Be=U.child;X=X.firstContext;e:for(;X!==null;){var He=X;X=U;for(var _t=0;_t<m.length;_t++)if(He.context===m[_t]){X.lanes|=_,He=X.alternate,He!==null&&(He.lanes|=_),Ou(X.return,_,h),k||(Be=null);break e}X=He.next}}else if(U.tag===18){if(Be=U.return,Be===null)throw Error(i(341));Be.lanes|=_,X=Be.alternate,X!==null&&(X.lanes|=_),Ou(Be,_,h),Be=null}else Be=U.child;if(Be!==null)Be.return=U;else for(Be=U;Be!==null;){if(Be===h){Be=null;break}if(U=Be.sibling,U!==null){U.return=Be.return,Be=U;break}Be=Be.return}U=Be}}function zu(h,m,_,k){h=null;for(var U=m,X=!1;U!==null;){if(!X){if((U.flags&524288)!==0)X=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var Be=U.alternate;if(Be===null)throw Error(i(387));if(Be=Be.memoizedProps,Be!==null){var He=U.type;ws(U.pendingProps.value,Be.value)||(h!==null?h.push(He):h=[He])}}else if(U===ze.current){if(Be=U.alternate,Be===null)throw Error(i(387));Be.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(h!==null?h.push(E):h=[E])}U=U.return}h!==null&&vh(m,h,_,k),m.flags|=262144}function vA(h){for(h=h.firstContext;h!==null;){if(!ws(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Ml(h){qs=h,nc=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Ks(h){return kc(qs,h)}function ol(h,m){return qs===null&&Ml(h),kc(h,m)}function kc(h,m){var _=m._currentValue;if(m={context:m,memoizedValue:_,next:null},nc===null){if(h===null)throw Error(i(308));nc=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else nc=nc.next=m;return _}var Sf=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(_,k){h.push(k)}};this.abort=function(){m.aborted=!0,h.forEach(function(_){return _()})}},Id=e.unstable_scheduleCallback,Ef=e.unstable_NormalPriority,ta={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function YA(){return{controller:new Sf,data:new Map,refCount:0}}function Fc(h){h.refCount--,h.refCount===0&&Id(Ef,function(){h.controller.abort()})}var Nc=null,Xa=0,Po=0,sc=null;function Pl(h,m){if(Nc===null){var _=Nc=[];Xa=0,Po=e1(),sc={status:"pending",value:void 0,then:function(k){_.push(k)}}}return Xa++,m.then(Rl,Rl),m}function Rl(){if(--Xa===0&&Nc!==null){sc!==null&&(sc.status="fulfilled");var h=Nc;Nc=null,Po=0,sc=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function xh(h,m){var _=[],k={status:"pending",value:null,reason:null,then:function(U){_.push(U)}};return h.then(function(){k.status="fulfilled",k.value=m;for(var U=0;U<_.length;U++)(0,_[U])(m)},function(U){for(k.status="rejected",k.reason=U,U=0;U<_.length;U++)(0,_[U])(void 0)}),k}var R=he.S;he.S=function(h,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Pl(h,m),R!==null&&R(h,m)};var Q=Ge(null);function ae(){var h=Q.current;return h!==null?h:Us.pooledCache}function pe(h,m){m===null?Ae(Q,Q.current):Ae(Q,m.pool)}function Pe(){var h=ae();return h===null?null:{parent:ta._currentValue,pool:h}}var Oe=Error(i(460)),Ke=Error(i(474)),Xe=Error(i(542)),rt={then:function(){}};function qe(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Ft(){}function Jt(h,m,_){switch(_=h[_],_===void 0?h.push(m):_!==m&&(m.then(Ft,Ft),m=_),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Qt(h),h;default:if(typeof m.status=="string")m.then(Ft,Ft);else{if(h=Us,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=m,h.status="pending",h.then(function(k){if(m.status==="pending"){var U=m;U.status="fulfilled",U.value=k}},function(k){if(m.status==="pending"){var U=m;U.status="rejected",U.reason=k}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,Qt(h),h}throw ct=m,Oe}}var ct=null;function Dt(){if(ct===null)throw Error(i(459));var h=ct;return ct=null,h}function Qt(h){if(h===Oe||h===Xe)throw Error(i(483))}var ur=!1;function It(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fr(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function mr(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Tr(h,m,_){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(As&2)!==0){var U=k.pending;return U===null?m.next=m:(m.next=U.next,U.next=m),k.pending=m,m=ju(h),hu(h,null,_),m}return Du(h,k,m,_),ju(h)}function wr(h,m,_){if(m=m.updateQueue,m!==null&&(m=m.shared,(_&4194048)!==0)){var k=m.lanes;k&=h.pendingLanes,_|=k,m.lanes=_,Ji(h,_)}}function hi(h,m){var _=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,_===k)){var U=null,X=null;if(_=_.firstBaseUpdate,_!==null){do{var Be={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};X===null?U=X=Be:X=X.next=Be,_=_.next}while(_!==null);X===null?U=X=m:X=X.next=m}else U=X=m;_={baseState:k.baseState,firstBaseUpdate:U,lastBaseUpdate:X,shared:k.shared,callbacks:k.callbacks},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=m:h.next=m,_.lastBaseUpdate=m}var ti=!1;function Ui(){if(ti){var h=sc;if(h!==null)throw h}}function ii(h,m,_,k){ti=!1;var U=h.updateQueue;ur=!1;var X=U.firstBaseUpdate,Be=U.lastBaseUpdate,He=U.shared.pending;if(He!==null){U.shared.pending=null;var _t=He,Ut=_t.next;_t.next=null,Be===null?X=Ut:Be.next=Ut,Be=_t;var vr=h.alternate;vr!==null&&(vr=vr.updateQueue,He=vr.lastBaseUpdate,He!==Be&&(He===null?vr.firstBaseUpdate=Ut:He.next=Ut,vr.lastBaseUpdate=_t))}if(X!==null){var br=U.baseState;Be=0,vr=Ut=_t=null,He=X;do{var rr=He.lane&-536870913,or=rr!==He.lane;if(or?(gn&rr)===rr:(k&rr)===rr){rr!==0&&rr===Po&&(ti=!0),vr!==null&&(vr=vr.next={lane:0,tag:He.tag,payload:He.payload,callback:null,next:null});e:{var Di=h,Ei=He;rr=m;var Vn=_;switch(Ei.tag){case 1:if(Di=Ei.payload,typeof Di=="function"){br=Di.call(Vn,br,rr);break e}br=Di;break e;case 3:Di.flags=Di.flags&-65537|128;case 0:if(Di=Ei.payload,rr=typeof Di=="function"?Di.call(Vn,br,rr):Di,rr==null)break e;br=v({},br,rr);break e;case 2:ur=!0}}rr=He.callback,rr!==null&&(h.flags|=64,or&&(h.flags|=8192),or=U.callbacks,or===null?U.callbacks=[rr]:or.push(rr))}else or={lane:rr,tag:He.tag,payload:He.payload,callback:He.callback,next:null},vr===null?(Ut=vr=or,_t=br):vr=vr.next=or,Be|=rr;if(He=He.next,He===null){if(He=U.shared.pending,He===null)break;or=He,He=or.next,or.next=null,U.lastBaseUpdate=or,U.shared.pending=null}}while(!0);vr===null&&(_t=br),U.baseState=_t,U.firstBaseUpdate=Ut,U.lastBaseUpdate=vr,X===null&&(U.shared.lanes=0),$u|=Be,h.lanes=Be,h.memoizedState=br}}function cn(h,m){if(typeof h!="function")throw Error(i(191,h));h.call(m)}function Ws(h,m){var _=h.callbacks;if(_!==null)for(h.callbacks=null,h=0;h<_.length;h++)cn(_[h],m)}var zi=Ge(null),ai=Ge(0);function Vr(h,m){h=CA,Ae(ai,h),Ae(zi,m),CA=h|m.baseLanes}function Li(){Ae(ai,CA),Ae(zi,zi.current)}function Hi(){CA=ai.current,Y(zi),Y(ai)}var qi=0,ni=null,Vi=null,nn=null,is=!1,Ss=!1,jn=!1,ls=0,kr=0,Or=null,Jn=0;function Mi(){throw Error(i(321))}function Ds(h,m){if(m===null)return!1;for(var _=0;_<m.length&&_<h.length;_++)if(!ws(h[_],m[_]))return!1;return!0}function es(h,m,_,k,U,X){return qi=X,ni=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,he.H=h===null||h.memoizedState===null?yh:Ic,jn=!1,X=_(k,U),jn=!1,Ss&&(X=cs(m,_,k,U)),Es(h),X}function Es(h){he.H=Za;var m=Vi!==null&&Vi.next!==null;if(qi=0,nn=Vi=ni=null,is=!1,kr=0,Or=null,m)throw Error(i(300));h===null||go||(h=h.dependencies,h!==null&&vA(h)&&(go=!0))}function cs(h,m,_,k){ni=h;var U=0;do{if(Ss&&(Or=null),kr=0,Ss=!1,25<=U)throw Error(i(301));if(U+=1,nn=Vi=null,h.updateQueue!=null){var X=h.updateQueue;X.lastEffect=null,X.events=null,X.stores=null,X.memoCache!=null&&(X.memoCache.index=0)}he.H=Dh,X=m(_,k)}while(Ss);return X}function Sn(){var h=he.H,m=h.useState()[0];return m=typeof m.then=="function"?ps(m):m,h=h.useState()[0],(Vi!==null?Vi.memoizedState:null)!==h&&(ni.flags|=1024),m}function $s(){var h=ls!==0;return ls=0,h}function mo(h,m,_){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~_}function Ua(h){if(is){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}is=!1}qi=0,nn=Vi=ni=null,Ss=!1,kr=ls=0,Or=null}function Ln(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?ni.memoizedState=nn=h:nn=nn.next=h,nn}function vi(){if(Vi===null){var h=ni.alternate;h=h!==null?h.memoizedState:null}else h=Vi.next;var m=nn===null?ni.memoizedState:nn.next;if(m!==null)nn=m,Vi=h;else{if(h===null)throw ni.alternate===null?Error(i(467)):Error(i(310));Vi=h,h={memoizedState:Vi.memoizedState,baseState:Vi.baseState,baseQueue:Vi.baseQueue,queue:Vi.queue,next:null},nn===null?ni.memoizedState=nn=h:nn=nn.next=h}return nn}function un(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ps(h){var m=kr;return kr+=1,Or===null&&(Or=[]),h=Jt(Or,h,m),m=ni,(nn===null?m.memoizedState:nn.next)===null&&(m=m.alternate,he.H=m===null||m.memoizedState===null?yh:Ic),h}function wn(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return ps(h);if(h.$$typeof===H)return Ks(h)}throw Error(i(438,String(h)))}function ra(h){var m=null,_=ni.updateQueue;if(_!==null&&(m=_.memoCache),m==null){var k=ni.alternate;k!==null&&(k=k.updateQueue,k!==null&&(k=k.memoCache,k!=null&&(m={data:k.data.map(function(U){return U.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),_===null&&(_=un(),ni.updateQueue=_),_.memoCache=m,_=m.data[m.index],_===void 0)for(_=m.data[m.index]=Array(h),k=0;k<h;k++)_[k]=ce;return m.index++,_}function js(h,m){return typeof m=="function"?m(h):m}function Ro(h){var m=vi();return ll(m,Vi,h)}function ll(h,m,_){var k=h.queue;if(k===null)throw Error(i(311));k.lastRenderedReducer=_;var U=h.baseQueue,X=k.pending;if(X!==null){if(U!==null){var Be=U.next;U.next=X.next,X.next=Be}m.baseQueue=U=X,k.pending=null}if(X=h.baseState,U===null)h.memoizedState=X;else{m=U.next;var He=Be=null,_t=null,Ut=m,vr=!1;do{var br=Ut.lane&-536870913;if(br!==Ut.lane?(gn&br)===br:(qi&br)===br){var rr=Ut.revertLane;if(rr===0)_t!==null&&(_t=_t.next={lane:0,revertLane:0,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),br===Po&&(vr=!0);else if((qi&rr)===rr){Ut=Ut.next,rr===Po&&(vr=!0);continue}else br={lane:0,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},_t===null?(He=_t=br,Be=X):_t=_t.next=br,ni.lanes|=rr,$u|=rr;br=Ut.action,jn&&_(X,br),X=Ut.hasEagerState?Ut.eagerState:_(X,br)}else rr={lane:br,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},_t===null?(He=_t=rr,Be=X):_t=_t.next=rr,ni.lanes|=br,$u|=br;Ut=Ut.next}while(Ut!==null&&Ut!==m);if(_t===null?Be=X:_t.next=He,!ws(X,h.memoizedState)&&(go=!0,vr&&(_=sc,_!==null)))throw _;h.memoizedState=X,h.baseState=Be,h.baseQueue=_t,k.lastRenderedState=X}return U===null&&(k.lanes=0),[h.memoizedState,k.dispatch]}function ns(h){var m=vi(),_=m.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=h;var k=_.dispatch,U=_.pending,X=m.memoizedState;if(U!==null){_.pending=null;var Be=U=U.next;do X=h(X,Be.action),Be=Be.next;while(Be!==U);ws(X,m.memoizedState)||(go=!0),m.memoizedState=X,m.baseQueue===null&&(m.baseState=X),_.lastRenderedState=X}return[X,k]}function ac(h,m,_){var k=ni,U=vi(),X=mn;if(X){if(_===void 0)throw Error(i(407));_=_()}else _=m();var Be=!ws((Vi||U).memoizedState,_);Be&&(U.memoizedState=_,go=!0),U=U.queue;var He=Dl.bind(null,k,U,h);if(tt(2048,8,He,[h]),U.getSnapshot!==m||Be||nn!==null&&nn.memoizedState.tag&1){if(k.flags|=2048,de(9,Ee(),Qu.bind(null,k,U,_,m),null),Us===null)throw Error(i(349));X||(qi&124)!==0||Rh(k,m,_)}return _}function Rh(h,m,_){h.flags|=16384,h={getSnapshot:m,value:_},m=ni.updateQueue,m===null?(m=un(),ni.updateQueue=m,m.stores=[h]):(_=m.stores,_===null?m.stores=[h]:_.push(h))}function Qu(h,m,_,k){m.value=_,m.getSnapshot=k,JA(m)&&ed(h)}function Dl(h,m,_){return _(function(){JA(m)&&ed(h)})}function JA(h){var m=h.getSnapshot;h=h.value;try{var _=m();return!ws(h,_)}catch{return!0}}function ed(h){var m=Sl(h,2);m!==null&&Rc(m,h,2)}function Hu(h){var m=Ln();if(typeof h=="function"){var _=h;if(h=_(),jn){yr(!0);try{_()}finally{yr(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:h},m}function oc(h,m,_,k){return h.baseState=_,ll(h,Vi,typeof k=="function"?k:js)}function S(h,m,_,k,U){if(Sa(h))throw Error(i(485));if(h=m.action,h!==null){var X={payload:U,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Be){X.listeners.push(Be)}};he.T!==null?_(!0):X.isTransition=!1,k(X),_=m.pending,_===null?(X.next=m.pending=X,o(m,X)):(X.next=_.next,m.pending=_.next=X)}}function o(h,m){var _=m.action,k=m.payload,U=h.state;if(m.isTransition){var X=he.T,Be={};he.T=Be;try{var He=_(U,k),_t=he.S;_t!==null&&_t(Be,He),f(h,m,He)}catch(Ut){w(h,m,Ut)}finally{he.T=X}}else try{X=_(U,k),f(h,m,X)}catch(Ut){w(h,m,Ut)}}function f(h,m,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(k){y(h,m,k)},function(k){return w(h,m,k)}):y(h,m,_)}function y(h,m,_){m.status="fulfilled",m.value=_,T(m),h.state=_,m=h.pending,m!==null&&(_=m.next,_===m?h.pending=null:(_=_.next,m.next=_,o(h,_)))}function w(h,m,_){var k=h.pending;if(h.pending=null,k!==null){k=k.next;do m.status="rejected",m.reason=_,T(m),m=m.next;while(m!==k)}h.action=null}function T(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function I(h,m){return m}function O(h,m){if(mn){var _=Us.formState;if(_!==null){e:{var k=ni;if(mn){if(Bs){t:{for(var U=Bs,X=al;U.nodeType!==8;){if(!X){U=null;break t}if(U=Yu(U.nextSibling),U===null){U=null;break t}}X=U.data,U=X==="F!"||X==="F"?U:null}if(U){Bs=Yu(U.nextSibling),k=U.data==="F!";break e}}Nl(k)}k=!1}k&&(m=_[0])}}return _=Ln(),_.memoizedState=_.baseState=m,k={pending:null,lanes:0,dispatch:null,lastRenderedReducer:I,lastRenderedState:m},_.queue=k,_=as.bind(null,ni,k),k.dispatch=_,k=Hu(!1),X=us.bind(null,ni,!1,k.queue),k=Ln(),U={state:m,dispatch:null,action:h,pending:null},k.queue=U,_=S.bind(null,ni,U,X,_),U.dispatch=_,k.memoizedState=h,[m,_,!1]}function V(h){var m=vi();return se(m,Vi,h)}function se(h,m,_){if(m=ll(h,m,I)[0],h=Ro(js)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var k=ps(m)}catch(Be){throw Be===Oe?Xe:Be}else k=m;m=vi();var U=m.queue,X=U.dispatch;return _!==m.memoizedState&&(ni.flags|=2048,de(9,Ee(),oe.bind(null,U,_),null)),[k,X,h]}function oe(h,m){h.action=m}function ge(h){var m=vi(),_=Vi;if(_!==null)return se(m,_,h);vi(),m=m.memoizedState,_=vi();var k=_.queue.dispatch;return _.memoizedState=h,[m,k,!1]}function de(h,m,_,k){return h={tag:h,create:_,deps:k,inst:m,next:null},m=ni.updateQueue,m===null&&(m=un(),ni.updateQueue=m),_=m.lastEffect,_===null?m.lastEffect=h.next=h:(k=_.next,_.next=h,h.next=k,m.lastEffect=h),h}function Ee(){return{destroy:void 0,resource:void 0}}function je(){return vi().memoizedState}function Je(h,m,_,k){var U=Ln();k=k===void 0?null:k,ni.flags|=h,U.memoizedState=de(1|m,Ee(),_,k)}function tt(h,m,_,k){var U=vi();k=k===void 0?null:k;var X=U.memoizedState.inst;Vi!==null&&k!==null&&Ds(k,Vi.memoizedState.deps)?U.memoizedState=de(m,X,_,k):(ni.flags|=h,U.memoizedState=de(1|m,X,_,k))}function at(h,m){Je(8390656,8,h,m)}function ft(h,m){tt(2048,8,h,m)}function mt(h,m){return tt(4,2,h,m)}function pt(h,m){return tt(4,4,h,m)}function bt(h,m){if(typeof m=="function"){h=h();var _=m(h);return function(){typeof _=="function"?_():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function St(h,m,_){_=_!=null?_.concat([h]):null,tt(4,4,bt.bind(null,m,h),_)}function gt(){}function kt(h,m){var _=vi();m=m===void 0?null:m;var k=_.memoizedState;return m!==null&&Ds(m,k[1])?k[0]:(_.memoizedState=[h,m],h)}function tr(h,m){var _=vi();m=m===void 0?null:m;var k=_.memoizedState;if(m!==null&&Ds(m,k[1]))return k[0];if(k=h(),jn){yr(!0);try{h()}finally{yr(!1)}}return _.memoizedState=[k,m],k}function Vt(h,m,_){return _===void 0||(qi&1073741824)!==0?h.memoizedState=m:(h.memoizedState=_,h=fx(),ni.lanes|=h,$u|=h,_)}function Wt(h,m,_,k){return ws(_,m)?_:zi.current!==null?(h=Vt(h,_,k),ws(h,m)||(go=!0),h):(qi&42)===0?(go=!0,h.memoizedState=_):(h=fx(),ni.lanes|=h,$u|=h,m)}function Xt(h,m,_,k,U){var X=Le.p;Le.p=X!==0&&8>X?X:8;var Be=he.T,He={};he.T=He,us(h,!1,m,_);try{var _t=U(),Ut=he.S;if(Ut!==null&&Ut(He,_t),_t!==null&&typeof _t=="object"&&typeof _t.then=="function"){var vr=xh(_t,k);rn(h,m,vr,Ql(h))}else rn(h,m,k,Ql(h))}catch(br){rn(h,m,{then:function(){},status:"rejected",reason:br},Ql())}finally{Le.p=X,he.T=Be}}function Sr(){}function Er(h,m,_,k){if(h.tag!==5)throw Error(i(476));var U=gr(h).queue;Xt(h,U,m,$e,_===null?Sr:function(){return Xr(h),_(k)})}function gr(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:$e,baseState:$e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:$e},next:null};var _={};return m.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:_},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function Xr(h){var m=gr(h).next.queue;rn(h,m,{},Ql())}function Bi(){return Ks(E)}function En(){return vi().memoizedState}function Nn(){return vi().memoizedState}function Mn(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var _=Ql();h=mr(_);var k=Tr(m,h,_);k!==null&&(Rc(k,m,_),wr(k,m,_)),m={cache:YA()},h.payload=m;return}m=m.return}}function ss(h,m,_){var k=Ql();_={lane:k,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},Sa(h)?ia(m,_):(_=fA(h,m,_,k),_!==null&&(Rc(_,h,k),na(_,m,k)))}function as(h,m,_){var k=Ql();rn(h,m,_,k)}function rn(h,m,_,k){var U={lane:k,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(Sa(h))ia(m,U);else{var X=h.alternate;if(h.lanes===0&&(X===null||X.lanes===0)&&(X=m.lastRenderedReducer,X!==null))try{var Be=m.lastRenderedState,He=X(Be,_);if(U.hasEagerState=!0,U.eagerState=He,ws(He,Be))return Du(h,m,U,0),Us===null&&uu(),!1}catch{}finally{}if(_=fA(h,m,U,k),_!==null)return Rc(_,h,k),na(_,m,k),!0}return!1}function us(h,m,_,k){if(k={lane:2,revertLane:e1(),action:k,hasEagerState:!1,eagerState:null,next:null},Sa(h)){if(m)throw Error(i(479))}else m=fA(h,_,k,2),m!==null&&Rc(m,h,2)}function Sa(h){var m=h.alternate;return h===ni||m!==null&&m===ni}function ia(h,m){Ss=is=!0;var _=h.pending;_===null?m.next=m:(m.next=_.next,_.next=m),h.pending=m}function na(h,m,_){if((_&4194048)!==0){var k=m.lanes;k&=h.pendingLanes,_|=k,m.lanes=_,Ji(h,_)}}var Za={readContext:Ks,use:wn,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useLayoutEffect:Mi,useInsertionEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useSyncExternalStore:Mi,useId:Mi,useHostTransitionStatus:Mi,useFormState:Mi,useActionState:Mi,useOptimistic:Mi,useMemoCache:Mi,useCacheRefresh:Mi},yh={readContext:Ks,use:wn,useCallback:function(h,m){return Ln().memoizedState=[h,m===void 0?null:m],h},useContext:Ks,useEffect:at,useImperativeHandle:function(h,m,_){_=_!=null?_.concat([h]):null,Je(4194308,4,bt.bind(null,m,h),_)},useLayoutEffect:function(h,m){return Je(4194308,4,h,m)},useInsertionEffect:function(h,m){Je(4,2,h,m)},useMemo:function(h,m){var _=Ln();m=m===void 0?null:m;var k=h();if(jn){yr(!0);try{h()}finally{yr(!1)}}return _.memoizedState=[k,m],k},useReducer:function(h,m,_){var k=Ln();if(_!==void 0){var U=_(m);if(jn){yr(!0);try{_(m)}finally{yr(!1)}}}else U=m;return k.memoizedState=k.baseState=U,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:U},k.queue=h,h=h.dispatch=ss.bind(null,ni,h),[k.memoizedState,h]},useRef:function(h){var m=Ln();return h={current:h},m.memoizedState=h},useState:function(h){h=Hu(h);var m=h.queue,_=as.bind(null,ni,m);return m.dispatch=_,[h.memoizedState,_]},useDebugValue:gt,useDeferredValue:function(h,m){var _=Ln();return Vt(_,h,m)},useTransition:function(){var h=Hu(!1);return h=Xt.bind(null,ni,h.queue,!0,!1),Ln().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,_){var k=ni,U=Ln();if(mn){if(_===void 0)throw Error(i(407));_=_()}else{if(_=m(),Us===null)throw Error(i(349));(gn&124)!==0||Rh(k,m,_)}U.memoizedState=_;var X={value:_,getSnapshot:m};return U.queue=X,at(Dl.bind(null,k,X,h),[h]),k.flags|=2048,de(9,Ee(),Qu.bind(null,k,X,_,m),null),_},useId:function(){var h=Ln(),m=Us.identifierPrefix;if(mn){var _=nl,k=Fl;_=(k&~(1<<32-it(k)-1)).toString(32)+_,m=""+m+"R"+_,_=ls++,0<_&&(m+="H"+_.toString(32)),m+=""}else _=Jn++,m=""+m+"r"+_.toString(32)+"";return h.memoizedState=m},useHostTransitionStatus:Bi,useFormState:O,useActionState:O,useOptimistic:function(h){var m=Ln();m.memoizedState=m.baseState=h;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=_,m=us.bind(null,ni,!0,_),_.dispatch=m,[h,m]},useMemoCache:ra,useCacheRefresh:function(){return Ln().memoizedState=Mn.bind(null,ni)}},Ic={readContext:Ks,use:wn,useCallback:kt,useContext:Ks,useEffect:ft,useImperativeHandle:St,useInsertionEffect:mt,useLayoutEffect:pt,useMemo:tr,useReducer:Ro,useRef:je,useState:function(){return Ro(js)},useDebugValue:gt,useDeferredValue:function(h,m){var _=vi();return Wt(_,Vi.memoizedState,h,m)},useTransition:function(){var h=Ro(js)[0],m=vi().memoizedState;return[typeof h=="boolean"?h:ps(h),m]},useSyncExternalStore:ac,useId:En,useHostTransitionStatus:Bi,useFormState:V,useActionState:V,useOptimistic:function(h,m){var _=vi();return oc(_,Vi,h,m)},useMemoCache:ra,useCacheRefresh:Nn},Dh={readContext:Ks,use:wn,useCallback:kt,useContext:Ks,useEffect:ft,useImperativeHandle:St,useInsertionEffect:mt,useLayoutEffect:pt,useMemo:tr,useReducer:ns,useRef:je,useState:function(){return ns(js)},useDebugValue:gt,useDeferredValue:function(h,m){var _=vi();return Vi===null?Vt(_,h,m):Wt(_,Vi.memoizedState,h,m)},useTransition:function(){var h=ns(js)[0],m=vi().memoizedState;return[typeof h=="boolean"?h:ps(h),m]},useSyncExternalStore:ac,useId:En,useHostTransitionStatus:Bi,useFormState:ge,useActionState:ge,useOptimistic:function(h,m){var _=vi();return Vi!==null?oc(_,Vi,h,m):(_.baseState=h,[h,_.queue.dispatch])},useMemoCache:ra,useCacheRefresh:Nn},Lc=null,jh=0;function _h(h){var m=jh;return jh+=1,Lc===null&&(Lc=[]),Jt(Lc,h,m)}function lc(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function Do(h,m){throw m.$$typeof===B?Error(i(525)):(h=Object.prototype.toString.call(m),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function pu(h){var m=h._init;return m(h._payload)}function mu(h){function m(Ot,Nt){if(h){var Yt=Ot.deletions;Yt===null?(Ot.deletions=[Nt],Ot.flags|=16):Yt.push(Nt)}}function _(Ot,Nt){if(!h)return null;for(;Nt!==null;)m(Ot,Nt),Nt=Nt.sibling;return null}function k(Ot){for(var Nt=new Map;Ot!==null;)Ot.key!==null?Nt.set(Ot.key,Ot):Nt.set(Ot.index,Ot),Ot=Ot.sibling;return Nt}function U(Ot,Nt){return Ot=El(Ot,Nt),Ot.index=0,Ot.sibling=null,Ot}function X(Ot,Nt,Yt){return Ot.index=Yt,h?(Yt=Ot.alternate,Yt!==null?(Yt=Yt.index,Yt<Nt?(Ot.flags|=67108866,Nt):Yt):(Ot.flags|=67108866,Nt)):(Ot.flags|=1048576,Nt)}function Be(Ot){return h&&Ot.alternate===null&&(Ot.flags|=67108866),Ot}function He(Ot,Nt,Yt,_r){return Nt===null||Nt.tag!==6?(Nt=Lh(Yt,Ot.mode,_r),Nt.return=Ot,Nt):(Nt=U(Nt,Yt),Nt.return=Ot,Nt)}function _t(Ot,Nt,Yt,_r){var Ai=Yt.type;return Ai===L?vr(Ot,Nt,Yt.props.children,_r,Yt.key):Nt!==null&&(Nt.elementType===Ai||typeof Ai=="object"&&Ai!==null&&Ai.$$typeof===le&&pu(Ai)===Nt.type)?(Nt=U(Nt,Yt.props),lc(Nt,Yt),Nt.return=Ot,Nt):(Nt=mh(Yt.type,Yt.key,Yt.props,null,Ot.mode,_r),lc(Nt,Yt),Nt.return=Ot,Nt)}function Ut(Ot,Nt,Yt,_r){return Nt===null||Nt.tag!==4||Nt.stateNode.containerInfo!==Yt.containerInfo||Nt.stateNode.implementation!==Yt.implementation?(Nt=pA(Yt,Ot.mode,_r),Nt.return=Ot,Nt):(Nt=U(Nt,Yt.children||[]),Nt.return=Ot,Nt)}function vr(Ot,Nt,Yt,_r,Ai){return Nt===null||Nt.tag!==7?(Nt=Tl(Yt,Ot.mode,_r,Ai),Nt.return=Ot,Nt):(Nt=U(Nt,Yt),Nt.return=Ot,Nt)}function br(Ot,Nt,Yt){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return Nt=Lh(""+Nt,Ot.mode,Yt),Nt.return=Ot,Nt;if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case F:return Yt=mh(Nt.type,Nt.key,Nt.props,null,Ot.mode,Yt),lc(Yt,Nt),Yt.return=Ot,Yt;case C:return Nt=pA(Nt,Ot.mode,Yt),Nt.return=Ot,Nt;case le:var _r=Nt._init;return Nt=_r(Nt._payload),br(Ot,Nt,Yt)}if(Fe(Nt)||K(Nt))return Nt=Tl(Nt,Ot.mode,Yt,null),Nt.return=Ot,Nt;if(typeof Nt.then=="function")return br(Ot,_h(Nt),Yt);if(Nt.$$typeof===H)return br(Ot,ol(Ot,Nt),Yt);Do(Ot,Nt)}return null}function rr(Ot,Nt,Yt,_r){var Ai=Nt!==null?Nt.key:null;if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint")return Ai!==null?null:He(Ot,Nt,""+Yt,_r);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case F:return Yt.key===Ai?_t(Ot,Nt,Yt,_r):null;case C:return Yt.key===Ai?Ut(Ot,Nt,Yt,_r):null;case le:return Ai=Yt._init,Yt=Ai(Yt._payload),rr(Ot,Nt,Yt,_r)}if(Fe(Yt)||K(Yt))return Ai!==null?null:vr(Ot,Nt,Yt,_r,null);if(typeof Yt.then=="function")return rr(Ot,Nt,_h(Yt),_r);if(Yt.$$typeof===H)return rr(Ot,Nt,ol(Ot,Yt),_r);Do(Ot,Yt)}return null}function or(Ot,Nt,Yt,_r,Ai){if(typeof _r=="string"&&_r!==""||typeof _r=="number"||typeof _r=="bigint")return Ot=Ot.get(Yt)||null,He(Nt,Ot,""+_r,Ai);if(typeof _r=="object"&&_r!==null){switch(_r.$$typeof){case F:return Ot=Ot.get(_r.key===null?Yt:_r.key)||null,_t(Nt,Ot,_r,Ai);case C:return Ot=Ot.get(_r.key===null?Yt:_r.key)||null,Ut(Nt,Ot,_r,Ai);case le:var xn=_r._init;return _r=xn(_r._payload),or(Ot,Nt,Yt,_r,Ai)}if(Fe(_r)||K(_r))return Ot=Ot.get(Yt)||null,vr(Nt,Ot,_r,Ai,null);if(typeof _r.then=="function")return or(Ot,Nt,Yt,_h(_r),Ai);if(_r.$$typeof===H)return or(Ot,Nt,Yt,ol(Nt,_r),Ai);Do(Nt,_r)}return null}function Di(Ot,Nt,Yt,_r){for(var Ai=null,xn=null,xi=Nt,Oi=Nt=0,Os=null;xi!==null&&Oi<Yt.length;Oi++){xi.index>Oi?(Os=xi,xi=null):Os=xi.sibling;var Gn=rr(Ot,xi,Yt[Oi],_r);if(Gn===null){xi===null&&(xi=Os);break}h&&xi&&Gn.alternate===null&&m(Ot,xi),Nt=X(Gn,Nt,Oi),xn===null?Ai=Gn:xn.sibling=Gn,xn=Gn,xi=Os}if(Oi===Yt.length)return _(Ot,xi),mn&&sl(Ot,Oi),Ai;if(xi===null){for(;Oi<Yt.length;Oi++)xi=br(Ot,Yt[Oi],_r),xi!==null&&(Nt=X(xi,Nt,Oi),xn===null?Ai=xi:xn.sibling=xi,xn=xi);return mn&&sl(Ot,Oi),Ai}for(xi=k(xi);Oi<Yt.length;Oi++)Os=or(xi,Ot,Oi,Yt[Oi],_r),Os!==null&&(h&&Os.alternate!==null&&xi.delete(Os.key===null?Oi:Os.key),Nt=X(Os,Nt,Oi),xn===null?Ai=Os:xn.sibling=Os,xn=Os);return h&&xi.forEach(function(NA){return m(Ot,NA)}),mn&&sl(Ot,Oi),Ai}function Ei(Ot,Nt,Yt,_r){if(Yt==null)throw Error(i(151));for(var Ai=null,xn=null,xi=Nt,Oi=Nt=0,Os=null,Gn=Yt.next();xi!==null&&!Gn.done;Oi++,Gn=Yt.next()){xi.index>Oi?(Os=xi,xi=null):Os=xi.sibling;var NA=rr(Ot,xi,Gn.value,_r);if(NA===null){xi===null&&(xi=Os);break}h&&xi&&NA.alternate===null&&m(Ot,xi),Nt=X(NA,Nt,Oi),xn===null?Ai=NA:xn.sibling=NA,xn=NA,xi=Os}if(Gn.done)return _(Ot,xi),mn&&sl(Ot,Oi),Ai;if(xi===null){for(;!Gn.done;Oi++,Gn=Yt.next())Gn=br(Ot,Gn.value,_r),Gn!==null&&(Nt=X(Gn,Nt,Oi),xn===null?Ai=Gn:xn.sibling=Gn,xn=Gn);return mn&&sl(Ot,Oi),Ai}for(xi=k(xi);!Gn.done;Oi++,Gn=Yt.next())Gn=or(xi,Ot,Oi,Gn.value,_r),Gn!==null&&(h&&Gn.alternate!==null&&xi.delete(Gn.key===null?Oi:Gn.key),Nt=X(Gn,Nt,Oi),xn===null?Ai=Gn:xn.sibling=Gn,xn=Gn);return h&&xi.forEach(function(cb){return m(Ot,cb)}),mn&&sl(Ot,Oi),Ai}function Vn(Ot,Nt,Yt,_r){if(typeof Yt=="object"&&Yt!==null&&Yt.type===L&&Yt.key===null&&(Yt=Yt.props.children),typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case F:e:{for(var Ai=Yt.key;Nt!==null;){if(Nt.key===Ai){if(Ai=Yt.type,Ai===L){if(Nt.tag===7){_(Ot,Nt.sibling),_r=U(Nt,Yt.props.children),_r.return=Ot,Ot=_r;break e}}else if(Nt.elementType===Ai||typeof Ai=="object"&&Ai!==null&&Ai.$$typeof===le&&pu(Ai)===Nt.type){_(Ot,Nt.sibling),_r=U(Nt,Yt.props),lc(_r,Yt),_r.return=Ot,Ot=_r;break e}_(Ot,Nt);break}else m(Ot,Nt);Nt=Nt.sibling}Yt.type===L?(_r=Tl(Yt.props.children,Ot.mode,_r,Yt.key),_r.return=Ot,Ot=_r):(_r=mh(Yt.type,Yt.key,Yt.props,null,Ot.mode,_r),lc(_r,Yt),_r.return=Ot,Ot=_r)}return Be(Ot);case C:e:{for(Ai=Yt.key;Nt!==null;){if(Nt.key===Ai)if(Nt.tag===4&&Nt.stateNode.containerInfo===Yt.containerInfo&&Nt.stateNode.implementation===Yt.implementation){_(Ot,Nt.sibling),_r=U(Nt,Yt.children||[]),_r.return=Ot,Ot=_r;break e}else{_(Ot,Nt);break}else m(Ot,Nt);Nt=Nt.sibling}_r=pA(Yt,Ot.mode,_r),_r.return=Ot,Ot=_r}return Be(Ot);case le:return Ai=Yt._init,Yt=Ai(Yt._payload),Vn(Ot,Nt,Yt,_r)}if(Fe(Yt))return Di(Ot,Nt,Yt,_r);if(K(Yt)){if(Ai=K(Yt),typeof Ai!="function")throw Error(i(150));return Yt=Ai.call(Yt),Ei(Ot,Nt,Yt,_r)}if(typeof Yt.then=="function")return Vn(Ot,Nt,_h(Yt),_r);if(Yt.$$typeof===H)return Vn(Ot,Nt,ol(Ot,Yt),_r);Do(Ot,Yt)}return typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint"?(Yt=""+Yt,Nt!==null&&Nt.tag===6?(_(Ot,Nt.sibling),_r=U(Nt,Yt),_r.return=Ot,Ot=_r):(_(Ot,Nt),_r=Lh(Yt,Ot.mode,_r),_r.return=Ot,Ot=_r),Be(Ot)):_(Ot,Nt)}return function(Ot,Nt,Yt,_r){try{jh=0;var Ai=Vn(Ot,Nt,Yt,_r);return Lc=null,Ai}catch(xi){if(xi===Oe||xi===Xe)throw xi;var xn=pa(29,xi,null,Ot.mode);return xn.lanes=_r,xn.return=Ot,xn}finally{}}}var Ya=mu(!0),Xs=mu(!1),$n=Ge(null),sa=null;function Ts(h){var m=h.alternate;Ae(hs,hs.current&1),Ae($n,h),sa===null&&(m===null||zi.current!==null||m.memoizedState!==null)&&(sa=h)}function Tf(h){if(h.tag===22){if(Ae(hs,hs.current),Ae($n,h),sa===null){var m=h.alternate;m!==null&&m.memoizedState!==null&&(sa=h)}}else Mc()}function Mc(){Ae(hs,hs.current),Ae($n,$n.current)}function cl(h){Y($n),sa===h&&(sa=null),Y(hs)}var hs=Ge(0);function jl(h){for(var m=h;m!==null;){if(m.tag===13){var _=m.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||qh(_)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Vu(h,m,_,k){m=h.memoizedState,_=_(k,m),_=_==null?m:v({},m,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var Gu={enqueueSetState:function(h,m,_){h=h._reactInternals;var k=Ql(),U=mr(k);U.payload=m,_!=null&&(U.callback=_),m=Tr(h,U,k),m!==null&&(Rc(m,h,k),wr(m,h,k))},enqueueReplaceState:function(h,m,_){h=h._reactInternals;var k=Ql(),U=mr(k);U.tag=1,U.payload=m,_!=null&&(U.callback=_),m=Tr(h,U,k),m!==null&&(Rc(m,h,k),wr(m,h,k))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var _=Ql(),k=mr(_);k.tag=2,m!=null&&(k.callback=m),m=Tr(h,k,_),m!==null&&(Rc(m,h,_),wr(m,h,_))}};function kf(h,m,_,k,U,X,Be){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,X,Be):m.prototype&&m.prototype.isPureReactComponent?!Ka(_,k)||!Ka(U,X):!0}function Ff(h,m,_,k){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(_,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(_,k),m.state!==h&&Gu.enqueueReplaceState(m,m.state,null)}function Ul(h,m){var _=m;if("ref"in m){_={};for(var k in m)k!=="ref"&&(_[k]=m[k])}if(h=h.defaultProps){_===m&&(_=v({},_));for(var U in h)_[U]===void 0&&(_[U]=h[U])}return _}var td=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function Nf(h){td(h)}function rd(h){console.error(h)}function Sg(h){td(h)}function Uh(h,m){try{var _=h.onUncaughtError;_(m.value,{componentStack:m.stack})}catch(k){setTimeout(function(){throw k})}}function id(h,m,_){try{var k=h.onCaughtError;k(_.value,{componentStack:_.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function z0(h,m,_){return _=mr(_),_.tag=3,_.payload={element:null},_.callback=function(){Uh(h,m)},_}function ix(h){return h=mr(h),h.tag=3,h}function Q0(h,m,_,k){var U=_.type.getDerivedStateFromError;if(typeof U=="function"){var X=k.value;h.payload=function(){return U(X)},h.callback=function(){id(m,_,k)}}var Be=_.stateNode;Be!==null&&typeof Be.componentDidCatch=="function"&&(h.callback=function(){id(m,_,k),typeof U!="function"&&(ld===null?ld=new Set([this]):ld.add(this));var He=k.stack;this.componentDidCatch(k.value,{componentStack:He!==null?He:""})})}function nx(h,m,_,k,U){if(_.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){if(m=_.alternate,m!==null&&zu(m,_,U,!0),_=$n.current,_!==null){switch(_.tag){case 13:return sa===null?rm():_.alternate===null&&la===0&&(la=3),_.flags&=-257,_.flags|=65536,_.lanes=U,k===rt?_.flags|=16384:(m=_.updateQueue,m===null?_.updateQueue=new Set([k]):m.add(k),Vh(h,k,U)),!1;case 22:return _.flags|=65536,k===rt?_.flags|=16384:(m=_.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([k])},_.updateQueue=m):(_=m.retryQueue,_===null?m.retryQueue=new Set([k]):_.add(k)),Vh(h,k,U)),!1}throw Error(i(435,_.tag))}return Vh(h,k,U),rm(),!1}if(mn)return m=$n.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=U,k!==Mh&&(h=Error(i(422),{cause:k}),ja(ho(h,_)))):(k!==Mh&&(m=Error(i(423),{cause:k}),ja(ho(m,_))),h=h.current.alternate,h.flags|=65536,U&=-U,h.lanes|=U,k=ho(k,_),U=z0(h.stateNode,k,U),hi(h,U),la!==4&&(la=2)),!1;var X=Error(i(520),{cause:k});if(X=ho(X,_),Uf===null?Uf=[X]:Uf.push(X),la!==4&&(la=2),m===null)return!0;k=ho(k,_),_=m;do{switch(_.tag){case 3:return _.flags|=65536,h=U&-U,_.lanes|=h,h=z0(_.stateNode,k,h),hi(_,h),!1;case 1:if(m=_.type,X=_.stateNode,(_.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(ld===null||!ld.has(X))))return _.flags|=65536,U&=-U,_.lanes|=U,U=ix(U),Q0(U,h,_,k),hi(_,U),!1}_=_.return}while(_!==null);return!1}var Fp=Error(i(461)),go=!1;function ul(h,m,_,k){m.child=h===null?Xs(m,null,_,k):Ya(m,h.child,_,k)}function H0(h,m,_,k,U){_=_.render;var X=m.ref;if("ref"in k){var Be={};for(var He in k)He!=="ref"&&(Be[He]=k[He])}else Be=k;return Ml(m),k=es(h,m,_,Be,X,U),He=$s(),h!==null&&!go?(mo(h,m,U),Oh(h,m,U)):(mn&&He&&gA(m),m.flags|=1,ul(h,m,k,U),m.child)}function sx(h,m,_,k,U){if(h===null){var X=_.type;return typeof X=="function"&&!Ih(X)&&X.defaultProps===void 0&&_.compare===null?(m.tag=15,m.type=X,V0(h,m,X,k,U)):(h=mh(_.type,null,k,m,m.mode,U),h.ref=m.ref,h.return=m,m.child=h)}if(X=h.child,!K0(h,U)){var Be=X.memoizedProps;if(_=_.compare,_=_!==null?_:Ka,_(Be,k)&&h.ref===m.ref)return Oh(h,m,U)}return m.flags|=1,h=El(X,k),h.ref=m.ref,h.return=m,m.child=h}function V0(h,m,_,k,U){if(h!==null){var X=h.memoizedProps;if(Ka(X,k)&&h.ref===m.ref)if(go=!1,m.pendingProps=k=X,K0(h,U))(h.flags&131072)!==0&&(go=!0);else return m.lanes=h.lanes,Oh(h,m,U)}return kg(h,m,_,k,U)}function Eg(h,m,_){var k=m.pendingProps,U=k.children,X=h!==null?h.memoizedState:null;if(k.mode==="hidden"){if((m.flags&128)!==0){if(k=X!==null?X.baseLanes|_:_,h!==null){for(U=m.child=h.child,X=0;U!==null;)X=X|U.lanes|U.childLanes,U=U.sibling;m.childLanes=X&~k}else m.childLanes=0,m.child=null;return Tg(h,m,k,_)}if((_&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&pe(m,X!==null?X.cachePool:null),X!==null?Vr(m,X):Li(),Tf(m);else return m.lanes=m.childLanes=536870912,Tg(h,m,X!==null?X.baseLanes|_:_,_)}else X!==null?(pe(m,X.cachePool),Vr(m,X),Mc(),m.memoizedState=null):(h!==null&&pe(m,null),Li(),Mc());return ul(h,m,U,_),m.child}function Tg(h,m,_,k){var U=ae();return U=U===null?null:{parent:ta._currentValue,pool:U},m.memoizedState={baseLanes:_,cachePool:U},h!==null&&pe(m,null),Li(),Tf(m),h!==null&&zu(h,m,k,!0),null}function xA(h,m){var _=m.ref;if(_===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(i(284));(h===null||h.ref!==_)&&(m.flags|=4194816)}}function kg(h,m,_,k,U){return Ml(m),_=es(h,m,_,k,void 0,U),k=$s(),h!==null&&!go?(mo(h,m,U),Oh(h,m,U)):(mn&&k&&gA(m),m.flags|=1,ul(h,m,_,U),m.child)}function Ld(h,m,_,k,U,X){return Ml(m),m.updateQueue=null,_=cs(m,k,_,U),Es(h),k=$s(),h!==null&&!go?(mo(h,m,X),Oh(h,m,X)):(mn&&k&&gA(m),m.flags|=1,ul(h,m,_,X),m.child)}function Np(h,m,_,k,U){if(Ml(m),m.stateNode===null){var X=Rs,Be=_.contextType;typeof Be=="object"&&Be!==null&&(X=Ks(Be)),X=new _(k,X),m.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,X.updater=Gu,m.stateNode=X,X._reactInternals=m,X=m.stateNode,X.props=k,X.state=m.memoizedState,X.refs={},It(m),Be=_.contextType,X.context=typeof Be=="object"&&Be!==null?Ks(Be):Rs,X.state=m.memoizedState,Be=_.getDerivedStateFromProps,typeof Be=="function"&&(Vu(m,_,Be,k),X.state=m.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(Be=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),Be!==X.state&&Gu.enqueueReplaceState(X,X.state,null),ii(m,k,X,U),Ui(),X.state=m.memoizedState),typeof X.componentDidMount=="function"&&(m.flags|=4194308),k=!0}else if(h===null){X=m.stateNode;var He=m.memoizedProps,_t=Ul(_,He);X.props=_t;var Ut=X.context,vr=_.contextType;Be=Rs,typeof vr=="object"&&vr!==null&&(Be=Ks(vr));var br=_.getDerivedStateFromProps;vr=typeof br=="function"||typeof X.getSnapshotBeforeUpdate=="function",He=m.pendingProps!==He,vr||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(He||Ut!==Be)&&Ff(m,X,k,Be),ur=!1;var rr=m.memoizedState;X.state=rr,ii(m,k,X,U),Ui(),Ut=m.memoizedState,He||rr!==Ut||ur?(typeof br=="function"&&(Vu(m,_,br,k),Ut=m.memoizedState),(_t=ur||kf(m,_,_t,k,rr,Ut,Be))?(vr||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(m.flags|=4194308)):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=Ut),X.props=k,X.state=Ut,X.context=Be,k=_t):(typeof X.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{X=m.stateNode,fr(h,m),Be=m.memoizedProps,vr=Ul(_,Be),X.props=vr,br=m.pendingProps,rr=X.context,Ut=_.contextType,_t=Rs,typeof Ut=="object"&&Ut!==null&&(_t=Ks(Ut)),He=_.getDerivedStateFromProps,(Ut=typeof He=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(Be!==br||rr!==_t)&&Ff(m,X,k,_t),ur=!1,rr=m.memoizedState,X.state=rr,ii(m,k,X,U),Ui();var or=m.memoizedState;Be!==br||rr!==or||ur||h!==null&&h.dependencies!==null&&vA(h.dependencies)?(typeof He=="function"&&(Vu(m,_,He,k),or=m.memoizedState),(vr=ur||kf(m,_,vr,k,rr,or,_t)||h!==null&&h.dependencies!==null&&vA(h.dependencies))?(Ut||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(k,or,_t),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(k,or,_t)),typeof X.componentDidUpdate=="function"&&(m.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof X.componentDidUpdate!="function"||Be===h.memoizedProps&&rr===h.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||Be===h.memoizedProps&&rr===h.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=or),X.props=k,X.state=or,X.context=_t,k=vr):(typeof X.componentDidUpdate!="function"||Be===h.memoizedProps&&rr===h.memoizedState||(m.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||Be===h.memoizedProps&&rr===h.memoizedState||(m.flags|=1024),k=!1)}return X=k,xA(h,m),k=(m.flags&128)!==0,X||k?(X=m.stateNode,_=k&&typeof _.getDerivedStateFromError!="function"?null:X.render(),m.flags|=1,h!==null&&k?(m.child=Ya(m,h.child,null,U),m.child=Ya(m,null,_,U)):ul(h,m,_,U),m.memoizedState=X.state,h=m.child):h=Oh(h,m,U),h}function Ip(h,m,_,k){return bn(),m.flags|=256,ul(h,m,_,k),m.child}var Fg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ng(h){return{baseLanes:h,cachePool:Pe()}}function Ig(h,m,_){return h=h!==null?h.childLanes&~_:0,m&&(h|=Xu),h}function ax(h,m,_){var k=m.pendingProps,U=!1,X=(m.flags&128)!==0,Be;if((Be=X)||(Be=h!==null&&h.memoizedState===null?!1:(hs.current&2)!==0),Be&&(U=!0,m.flags&=-129),Be=(m.flags&32)!==0,m.flags&=-33,h===null){if(mn){if(U?Ts(m):Mc(),mn){var He=Bs,_t;if(_t=He){e:{for(_t=He,He=al;_t.nodeType!==8;){if(!He){He=null;break e}if(_t=Yu(_t.nextSibling),_t===null){He=null;break e}}He=_t}He!==null?(m.memoizedState={dehydrated:He,treeContext:Tc!==null?{id:Fl,overflow:nl}:null,retryLane:536870912,hydrationErrors:null},_t=pa(18,null,null,0),_t.stateNode=He,_t.return=m,m.child=_t,ma=m,Bs=null,_t=!0):_t=!1}_t||Nl(m)}if(He=m.memoizedState,He!==null&&(He=He.dehydrated,He!==null))return qh(He)?m.lanes=32:m.lanes=536870912,null;cl(m)}return He=k.children,k=k.fallback,U?(Mc(),U=m.mode,He=If({mode:"hidden",children:He},U),k=Tl(k,U,_,null),He.return=m,k.return=m,He.sibling=k,m.child=He,U=m.child,U.memoizedState=Ng(_),U.childLanes=Ig(h,Be,_),m.memoizedState=Fg,k):(Ts(m),G0(m,He))}if(_t=h.memoizedState,_t!==null&&(He=_t.dehydrated,He!==null)){if(X)m.flags&256?(Ts(m),m.flags&=-257,m=q0(h,m,_)):m.memoizedState!==null?(Mc(),m.child=h.child,m.flags|=128,m=null):(Mc(),U=k.fallback,He=m.mode,k=If({mode:"visible",children:k.children},He),U=Tl(U,He,_,null),U.flags|=2,k.return=m,U.return=m,k.sibling=U,m.child=k,Ya(m,h.child,null,_),k=m.child,k.memoizedState=Ng(_),k.childLanes=Ig(h,Be,_),m.memoizedState=Fg,m=U);else if(Ts(m),qh(He)){if(Be=He.nextSibling&&He.nextSibling.dataset,Be)var Ut=Be.dgst;Be=Ut,k=Error(i(419)),k.stack="",k.digest=Be,ja({value:k,source:null,stack:null}),m=q0(h,m,_)}else if(go||zu(h,m,_,!1),Be=(_&h.childLanes)!==0,go||Be){if(Be=Us,Be!==null&&(k=_&-_,k=(k&42)!==0?1:Hr(k),k=(k&(Be.suspendedLanes|_))!==0?0:k,k!==0&&k!==_t.retryLane))throw _t.retryLane=k,Sl(h,k),Rc(Be,h,k),Fp;He.data==="$?"||rm(),m=q0(h,m,_)}else He.data==="$?"?(m.flags|=192,m.child=h.child,m=null):(h=_t.treeContext,Bs=Yu(He.nextSibling),ma=m,mn=!0,ic=null,al=!1,h!==null&&(Ao[fo++]=Fl,Ao[fo++]=nl,Ao[fo++]=Tc,Fl=h.id,nl=h.overflow,Tc=m),m=G0(m,k.children),m.flags|=4096);return m}return U?(Mc(),U=k.fallback,He=m.mode,_t=h.child,Ut=_t.sibling,k=El(_t,{mode:"hidden",children:k.children}),k.subtreeFlags=_t.subtreeFlags&65011712,Ut!==null?U=El(Ut,U):(U=Tl(U,He,_,null),U.flags|=2),U.return=m,k.return=m,k.sibling=U,m.child=k,k=U,U=m.child,He=h.child.memoizedState,He===null?He=Ng(_):(_t=He.cachePool,_t!==null?(Ut=ta._currentValue,_t=_t.parent!==Ut?{parent:Ut,pool:Ut}:_t):_t=Pe(),He={baseLanes:He.baseLanes|_,cachePool:_t}),U.memoizedState=He,U.childLanes=Ig(h,Be,_),m.memoizedState=Fg,k):(Ts(m),_=h.child,h=_.sibling,_=El(_,{mode:"visible",children:k.children}),_.return=m,_.sibling=null,h!==null&&(Be=m.deletions,Be===null?(m.deletions=[h],m.flags|=16):Be.push(h)),m.child=_,m.memoizedState=null,_)}function G0(h,m){return m=If({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function If(h,m){return h=pa(22,h,null,m),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function q0(h,m,_){return Ya(m,h.child,null,_),h=G0(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function Lg(h,m,_){h.lanes|=m;var k=h.alternate;k!==null&&(k.lanes|=m),Ou(h.return,m,_)}function Mg(h,m,_,k,U){var X=h.memoizedState;X===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:_,tailMode:U}:(X.isBackwards=m,X.rendering=null,X.renderingStartTime=0,X.last=k,X.tail=_,X.tailMode=U)}function ox(h,m,_){var k=m.pendingProps,U=k.revealOrder,X=k.tail;if(ul(h,m,k.children,_),k=hs.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Lg(h,_,m);else if(h.tag===19)Lg(h,_,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}switch(Ae(hs,k),U){case"forwards":for(_=m.child,U=null;_!==null;)h=_.alternate,h!==null&&jl(h)===null&&(U=_),_=_.sibling;_=U,_===null?(U=m.child,m.child=null):(U=_.sibling,_.sibling=null),Mg(m,!1,U,_,X);break;case"backwards":for(_=null,U=m.child,m.child=null;U!==null;){if(h=U.alternate,h!==null&&jl(h)===null){m.child=U;break}h=U.sibling,U.sibling=_,_=U,U=h}Mg(m,!0,_,null,X);break;case"together":Mg(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Oh(h,m,_){if(h!==null&&(m.dependencies=h.dependencies),$u|=m.lanes,(_&m.childLanes)===0)if(h!==null){if(zu(h,m,_,!1),(_&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(i(153));if(m.child!==null){for(h=m.child,_=El(h,h.pendingProps),m.child=_,_.return=m;h.sibling!==null;)h=h.sibling,_=_.sibling=El(h,h.pendingProps),_.return=m;_.sibling=null}return m.child}function K0(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&vA(h)))}function V_(h,m,_){switch(m.tag){case 3:We(m,m.stateNode.containerInfo),Mo(m,ta,h.memoizedState.cache),bn();break;case 27:case 5:dt(m);break;case 4:We(m,m.stateNode.containerInfo);break;case 10:Mo(m,m.type,m.memoizedProps.value);break;case 13:var k=m.memoizedState;if(k!==null)return k.dehydrated!==null?(Ts(m),m.flags|=128,null):(_&m.child.childLanes)!==0?ax(h,m,_):(Ts(m),h=Oh(h,m,_),h!==null?h.sibling:null);Ts(m);break;case 19:var U=(h.flags&128)!==0;if(k=(_&m.childLanes)!==0,k||(zu(h,m,_,!1),k=(_&m.childLanes)!==0),U){if(k)return ox(h,m,_);m.flags|=128}if(U=m.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Ae(hs,hs.current),k)break;return null;case 22:case 23:return m.lanes=0,Eg(h,m,_);case 24:Mo(m,ta,h.memoizedState.cache)}return Oh(h,m,_)}function W0(h,m,_){if(h!==null)if(h.memoizedProps!==m.pendingProps)go=!0;else{if(!K0(h,_)&&(m.flags&128)===0)return go=!1,V_(h,m,_);go=(h.flags&131072)!==0}else go=!1,mn&&(m.flags&1048576)!==0&&mA(m,gh,m.index);switch(m.lanes=0,m.tag){case 16:e:{h=m.pendingProps;var k=m.elementType,U=k._init;if(k=U(k._payload),m.type=k,typeof k=="function")Ih(k)?(h=Ul(k,h),m.tag=1,m=Np(null,m,k,h,_)):(m.tag=0,m=kg(null,m,k,h,_));else{if(k!=null){if(U=k.$$typeof,U===ee){m.tag=11,m=H0(null,m,k,h,_);break e}else if(U===Z){m.tag=14,m=sx(null,m,k,h,_);break e}}throw m=we(k)||k,Error(i(306,m,""))}}return m;case 0:return kg(h,m,m.type,m.pendingProps,_);case 1:return k=m.type,U=Ul(k,m.pendingProps),Np(h,m,k,U,_);case 3:e:{if(We(m,m.stateNode.containerInfo),h===null)throw Error(i(387));k=m.pendingProps;var X=m.memoizedState;U=X.element,fr(h,m),ii(m,k,null,_);var Be=m.memoizedState;if(k=Be.cache,Mo(m,ta,k),k!==X.cache&&vh(m,[ta],_,!0),Ui(),k=Be.element,X.isDehydrated)if(X={element:k,isDehydrated:!1,cache:Be.cache},m.updateQueue.baseState=X,m.memoizedState=X,m.flags&256){m=Ip(h,m,k,_);break e}else if(k!==U){U=ho(Error(i(424)),m),ja(U),m=Ip(h,m,k,_);break e}else{switch(h=m.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Bs=Yu(h.firstChild),ma=m,mn=!0,ic=null,al=!0,_=Xs(m,null,k,_),m.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(bn(),k===U){m=Oh(h,m,_);break e}ul(h,m,k,_)}m=m.child}return m;case 26:return xA(h,m),h===null?(_=bm(m.type,null,m.pendingProps,null))?m.memoizedState=_:mn||(_=m.type,h=m.pendingProps,k=qf(Me.current).createElement(_),k[$i]=m,k[mi]=h,Oo(k,_,h),jt(k),m.stateNode=k):m.memoizedState=bm(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return dt(m),h===null&&mn&&(k=m.stateNode=jx(m.type,m.pendingProps,Me.current),ma=m,al=!0,U=Bs,kA(m.type)?(xm=U,Bs=Yu(k.firstChild)):Bs=U),ul(h,m,m.pendingProps.children,_),xA(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&mn&&((U=k=Bs)&&(k=nb(k,m.type,m.pendingProps,al),k!==null?(m.stateNode=k,ma=m,Bs=Yu(k.firstChild),al=!1,U=!0):U=!1),U||Nl(m)),dt(m),U=m.type,X=m.pendingProps,Be=h!==null?h.memoizedProps:null,k=X.children,gm(U,X)?k=null:Be!==null&&gm(U,Be)&&(m.flags|=32),m.memoizedState!==null&&(U=es(h,m,Sn,null,null,_),E._currentValue=U),xA(h,m),ul(h,m,k,_),m.child;case 6:return h===null&&mn&&((h=_=Bs)&&(_=Rx(_,m.pendingProps,al),_!==null?(m.stateNode=_,ma=m,Bs=null,h=!0):h=!1),h||Nl(m)),null;case 13:return ax(h,m,_);case 4:return We(m,m.stateNode.containerInfo),k=m.pendingProps,h===null?m.child=Ya(m,null,k,_):ul(h,m,k,_),m.child;case 11:return H0(h,m,m.type,m.pendingProps,_);case 7:return ul(h,m,m.pendingProps,_),m.child;case 8:return ul(h,m,m.pendingProps.children,_),m.child;case 12:return ul(h,m,m.pendingProps.children,_),m.child;case 10:return k=m.pendingProps,Mo(m,m.type,k.value),ul(h,m,k.children,_),m.child;case 9:return U=m.type._context,k=m.pendingProps.children,Ml(m),U=Ks(U),k=k(U),m.flags|=1,ul(h,m,k,_),m.child;case 14:return sx(h,m,m.type,m.pendingProps,_);case 15:return V0(h,m,m.type,m.pendingProps,_);case 19:return ox(h,m,_);case 31:return k=m.pendingProps,_=m.mode,k={mode:k.mode,children:k.children},h===null?(_=If(k,_),_.ref=m.ref,m.child=_,_.return=m,m=_):(_=El(h.child,k),_.ref=m.ref,m.child=_,_.return=m,m=_),m;case 22:return Eg(h,m,_);case 24:return Ml(m),k=Ks(ta),h===null?(U=ae(),U===null&&(U=Us,X=YA(),U.pooledCache=X,X.refCount++,X!==null&&(U.pooledCacheLanes|=_),U=X),m.memoizedState={parent:k,cache:U},It(m),Mo(m,ta,U)):((h.lanes&_)!==0&&(fr(h,m),ii(m,null,null,_),Ui()),U=h.memoizedState,X=m.memoizedState,U.parent!==k?(U={parent:k,cache:k},m.memoizedState=U,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=U),Mo(m,ta,k)):(k=X.cache,Mo(m,ta,k),k!==U.cache&&vh(m,[ta],_,!0))),ul(h,m,m.pendingProps.children,_),m.child;case 29:throw m.pendingProps}throw Error(i(156,m.tag))}function zh(h){h.flags|=4}function $0(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!Bm(m)){if(m=$n.current,m!==null&&((gn&4194048)===gn?sa!==null:(gn&62914560)!==gn&&(gn&536870912)===0||m!==sa))throw ct=rt,Ke;h.flags|=8192}}function nd(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?qt():536870912,h.lanes|=m,Rd|=m)}function vo(h,m){if(!mn)switch(h.tailMode){case"hidden":m=h.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var k=null;_!==null;)_.alternate!==null&&(k=_),_=_.sibling;k===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function aa(h){var m=h.alternate!==null&&h.alternate.child===h.child,_=0,k=0;if(m)for(var U=h.child;U!==null;)_|=U.lanes|U.childLanes,k|=U.subtreeFlags&65011712,k|=U.flags&65011712,U.return=h,U=U.sibling;else for(U=h.child;U!==null;)_|=U.lanes|U.childLanes,k|=U.subtreeFlags,k|=U.flags,U.return=h,U=U.sibling;return h.subtreeFlags|=k,h.childLanes=_,m}function Pg(h,m,_){var k=m.pendingProps;switch(fu(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aa(m),null;case 1:return aa(m),null;case 3:return _=m.stateNode,k=null,h!==null&&(k=h.memoizedState.cache),m.memoizedState.cache!==k&&(m.flags|=2048),po(ta),ut(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(h===null||h.child===null)&&($a(m)?zh(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Uu())),aa(m),null;case 26:return _=m.memoizedState,h===null?(zh(m),_!==null?(aa(m),$0(m,_)):(aa(m),m.flags&=-16777217)):_?_!==h.memoizedState?(zh(m),aa(m),$0(m,_)):(aa(m),m.flags&=-16777217):(h.memoizedProps!==k&&zh(m),aa(m),m.flags&=-16777217),null;case 27:zt(m),_=Me.current;var U=m.type;if(h!==null&&m.stateNode!=null)h.memoizedProps!==k&&zh(m);else{if(!k){if(m.stateNode===null)throw Error(i(166));return aa(m),null}h=fe.current,$a(m)?Ph(m):(h=jx(U,k,_),m.stateNode=h,zh(m))}return aa(m),null;case 5:if(zt(m),_=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==k&&zh(m);else{if(!k){if(m.stateNode===null)throw Error(i(166));return aa(m),null}if(h=fe.current,$a(m))Ph(m);else{switch(U=qf(Me.current),h){case 1:h=U.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:h=U.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":h=U.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":h=U.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":h=U.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof k.is=="string"?U.createElement("select",{is:k.is}):U.createElement("select"),k.multiple?h.multiple=!0:k.size&&(h.size=k.size);break;default:h=typeof k.is=="string"?U.createElement(_,{is:k.is}):U.createElement(_)}}h[$i]=m,h[mi]=k;e:for(U=m.child;U!==null;){if(U.tag===5||U.tag===6)h.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===m)break e;for(;U.sibling===null;){if(U.return===null||U.return===m)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}m.stateNode=h;e:switch(Oo(h,_,k),_){case"button":case"input":case"select":case"textarea":h=!!k.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&zh(m)}}return aa(m),m.flags&=-16777217,null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==k&&zh(m);else{if(typeof k!="string"&&m.stateNode===null)throw Error(i(166));if(h=Me.current,$a(m)){if(h=m.stateNode,_=m.memoizedProps,k=null,U=ma,U!==null)switch(U.tag){case 27:case 5:k=U.memoizedProps}h[$i]=m,h=!!(h.nodeValue===_||k!==null&&k.suppressHydrationWarning===!0||Ix(h.nodeValue,_)),h||Nl(m)}else h=qf(h).createTextNode(k),h[$i]=m,m.stateNode=h}return aa(m),null;case 13:if(k=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(U=$a(m),k!==null&&k.dehydrated!==null){if(h===null){if(!U)throw Error(i(318));if(U=m.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(i(317));U[$i]=m}else bn(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;aa(m),U=!1}else U=Uu(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=U),U=!0;if(!U)return m.flags&256?(cl(m),m):(cl(m),null)}if(cl(m),(m.flags&128)!==0)return m.lanes=_,m;if(_=k!==null,h=h!==null&&h.memoizedState!==null,_){k=m.child,U=null,k.alternate!==null&&k.alternate.memoizedState!==null&&k.alternate.memoizedState.cachePool!==null&&(U=k.alternate.memoizedState.cachePool.pool);var X=null;k.memoizedState!==null&&k.memoizedState.cachePool!==null&&(X=k.memoizedState.cachePool.pool),X!==U&&(k.flags|=2048)}return _!==h&&_&&(m.child.flags|=8192),nd(m,m.updateQueue),aa(m),null;case 4:return ut(),h===null&&dm(m.stateNode.containerInfo),aa(m),null;case 10:return po(m.type),aa(m),null;case 19:if(Y(hs),U=m.memoizedState,U===null)return aa(m),null;if(k=(m.flags&128)!==0,X=U.rendering,X===null)if(k)vo(U,!1);else{if(la!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(X=jl(h),X!==null){for(m.flags|=128,vo(U,!1),h=X.updateQueue,m.updateQueue=h,nd(m,h),m.subtreeFlags=0,h=_,_=m.child;_!==null;)Au(_,h),_=_.sibling;return Ae(hs,hs.current&1|2),m.child}h=h.sibling}U.tail!==null&&ir()>jp&&(m.flags|=128,k=!0,vo(U,!1),m.lanes=4194304)}else{if(!k)if(h=jl(X),h!==null){if(m.flags|=128,k=!0,h=h.updateQueue,m.updateQueue=h,nd(m,h),vo(U,!0),U.tail===null&&U.tailMode==="hidden"&&!X.alternate&&!mn)return aa(m),null}else 2*ir()-U.renderingStartTime>jp&&_!==536870912&&(m.flags|=128,k=!0,vo(U,!1),m.lanes=4194304);U.isBackwards?(X.sibling=m.child,m.child=X):(h=U.last,h!==null?h.sibling=X:m.child=X,U.last=X)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=ir(),m.sibling=null,h=hs.current,Ae(hs,k?h&1|2:h&1),m):(aa(m),null);case 22:case 23:return cl(m),Hi(),k=m.memoizedState!==null,h!==null?h.memoizedState!==null!==k&&(m.flags|=8192):k&&(m.flags|=8192),k?(_&536870912)!==0&&(m.flags&128)===0&&(aa(m),m.subtreeFlags&6&&(m.flags|=8192)):aa(m),_=m.updateQueue,_!==null&&nd(m,_.retryQueue),_=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),k=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(k=m.memoizedState.cachePool.pool),k!==_&&(m.flags|=2048),h!==null&&Y(Q),null;case 24:return _=null,h!==null&&(_=h.memoizedState.cache),m.memoizedState.cache!==_&&(m.flags|=2048),po(ta),aa(m),null;case 25:return null;case 30:return null}throw Error(i(156,m.tag))}function G_(h,m){switch(fu(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return po(ta),ut(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return zt(m),null;case 13:if(cl(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(i(340));bn()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return Y(hs),null;case 4:return ut(),null;case 10:return po(m.type),null;case 22:case 23:return cl(m),Hi(),h!==null&&Y(Q),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return po(ta),null;case 25:return null;default:return null}}function Rg(h,m){switch(fu(m),m.tag){case 3:po(ta),ut();break;case 26:case 27:case 5:zt(m);break;case 4:ut();break;case 13:cl(m);break;case 19:Y(hs);break;case 10:po(m.type);break;case 22:case 23:cl(m),Hi(),h!==null&&Y(Q);break;case 24:po(ta)}}function Lp(h,m){try{var _=m.updateQueue,k=_!==null?_.lastEffect:null;if(k!==null){var U=k.next;_=U;do{if((_.tag&h)===h){k=void 0;var X=_.create,Be=_.inst;k=X(),Be.destroy=k}_=_.next}while(_!==U)}}catch(He){ms(m,m.return,He)}}function sd(h,m,_){try{var k=m.updateQueue,U=k!==null?k.lastEffect:null;if(U!==null){var X=U.next;k=X;do{if((k.tag&h)===h){var Be=k.inst,He=Be.destroy;if(He!==void 0){Be.destroy=void 0,U=m;var _t=_,Ut=He;try{Ut()}catch(vr){ms(U,_t,vr)}}}k=k.next}while(k!==X)}}catch(vr){ms(m,m.return,vr)}}function Dg(h){var m=h.updateQueue;if(m!==null){var _=h.stateNode;try{Ws(m,_)}catch(k){ms(h,h.return,k)}}}function lx(h,m,_){_.props=Ul(h.type,h.memoizedProps),_.state=h.memoizedState;try{_.componentWillUnmount()}catch(k){ms(h,m,k)}}function Md(h,m){try{var _=h.ref;if(_!==null){switch(h.tag){case 26:case 27:case 5:var k=h.stateNode;break;case 30:k=h.stateNode;break;default:k=h.stateNode}typeof _=="function"?h.refCleanup=_(k):_.current=k}}catch(U){ms(h,m,U)}}function bh(h,m){var _=h.ref,k=h.refCleanup;if(_!==null)if(typeof k=="function")try{k()}catch(U){ms(h,m,U)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(U){ms(h,m,U)}else _.current=null}function jg(h){var m=h.type,_=h.memoizedProps,k=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":_.autoFocus&&k.focus();break e;case"img":_.src?k.src=_.src:_.srcSet&&(k.srcset=_.srcSet)}}catch(U){ms(h,h.return,U)}}function Ug(h,m,_){try{var k=h.stateNode;Lx(k,h.type,_,m),k[mi]=m}catch(U){ms(h,h.return,U)}}function cx(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&kA(h.type)||h.tag===4}function Og(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||cx(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&kA(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Lf(h,m,_){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(h,m):(m=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,m.appendChild(h),_=_._reactRootContainer,_!=null||m.onclick!==null||(m.onclick=Gf));else if(k!==4&&(k===27&&kA(h.type)&&(_=h.stateNode,m=null),h=h.child,h!==null))for(Lf(h,m,_),h=h.sibling;h!==null;)Lf(h,m,_),h=h.sibling}function Mf(h,m,_){var k=h.tag;if(k===5||k===6)h=h.stateNode,m?_.insertBefore(h,m):_.appendChild(h);else if(k!==4&&(k===27&&kA(h.type)&&(_=h.stateNode),h=h.child,h!==null))for(Mf(h,m,_),h=h.sibling;h!==null;)Mf(h,m,_),h=h.sibling}function zg(h){var m=h.stateNode,_=h.memoizedProps;try{for(var k=h.type,U=m.attributes;U.length;)m.removeAttributeNode(U[0]);Oo(m,k,_),m[$i]=h,m[mi]=_}catch(X){ms(h,h.return,X)}}var cc=!1,Zs=!1,Qg=!1,ux=typeof WeakSet=="function"?WeakSet:Set,jo=null;function q_(h,m){if(h=h.containerInfo,pm=Se,h=Mu(h),Bl(h)){if("selectionStart"in h)var _={start:h.selectionStart,end:h.selectionEnd};else e:{_=(_=h.ownerDocument)&&_.defaultView||window;var k=_.getSelection&&_.getSelection();if(k&&k.rangeCount!==0){_=k.anchorNode;var U=k.anchorOffset,X=k.focusNode;k=k.focusOffset;try{_.nodeType,X.nodeType}catch{_=null;break e}var Be=0,He=-1,_t=-1,Ut=0,vr=0,br=h,rr=null;t:for(;;){for(var or;br!==_||U!==0&&br.nodeType!==3||(He=Be+U),br!==X||k!==0&&br.nodeType!==3||(_t=Be+k),br.nodeType===3&&(Be+=br.nodeValue.length),(or=br.firstChild)!==null;)rr=br,br=or;for(;;){if(br===h)break t;if(rr===_&&++Ut===U&&(He=Be),rr===X&&++vr===k&&(_t=Be),(or=br.nextSibling)!==null)break;br=rr,rr=br.parentNode}br=or}_=He===-1||_t===-1?null:{start:He,end:_t}}else _=null}_=_||{start:0,end:0}}else _=null;for(mm={focusedElem:h,selectionRange:_},Se=!1,jo=m;jo!==null;)if(m=jo,h=m.child,(m.subtreeFlags&1024)!==0&&h!==null)h.return=m,jo=h;else for(;jo!==null;){switch(m=jo,X=m.alternate,h=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&X!==null){h=void 0,_=m,U=X.memoizedProps,X=X.memoizedState,k=_.stateNode;try{var Di=Ul(_.type,U,_.elementType===_.type);h=k.getSnapshotBeforeUpdate(Di,X),k.__reactInternalSnapshotBeforeUpdate=h}catch(Ei){ms(_,_.return,Ei)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,_=h.nodeType,_===9)vm(h);else if(_===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":vm(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(i(163))}if(h=m.sibling,h!==null){h.return=m.return,jo=h;break}jo=m.return}}function hx(h,m,_){var k=_.flags;switch(_.tag){case 0:case 11:case 15:_A(h,_),k&4&&Lp(5,_);break;case 1:if(_A(h,_),k&4)if(h=_.stateNode,m===null)try{h.componentDidMount()}catch(Be){ms(_,_.return,Be)}else{var U=Ul(_.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(U,m,h.__reactInternalSnapshotBeforeUpdate)}catch(Be){ms(_,_.return,Be)}}k&64&&Dg(_),k&512&&Md(_,_.return);break;case 3:if(_A(h,_),k&64&&(h=_.updateQueue,h!==null)){if(m=null,_.child!==null)switch(_.child.tag){case 27:case 5:m=_.child.stateNode;break;case 1:m=_.child.stateNode}try{Ws(h,m)}catch(Be){ms(_,_.return,Be)}}break;case 27:m===null&&k&4&&zg(_);case 26:case 5:_A(h,_),m===null&&k&4&&jg(_),k&512&&Md(_,_.return);break;case 12:_A(h,_);break;case 13:_A(h,_),k&4&&Pf(h,_),k&64&&(h=_.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(_=am.bind(null,_),Dx(h,_))));break;case 22:if(k=_.memoizedState!==null||cc,!k){m=m!==null&&m.memoizedState!==null||Zs,U=cc;var X=Zs;cc=k,(Zs=m)&&!X?Ku(h,_,(_.subtreeFlags&8772)!==0):_A(h,_),cc=U,Zs=X}break;case 30:break;default:_A(h,_)}}function Ax(h){var m=h.alternate;m!==null&&(h.alternate=null,Ax(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&nt(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var oa=null,Ol=!1;function yA(h,m,_){for(_=_.child;_!==null;)Hg(h,m,_),_=_.sibling}function Hg(h,m,_){if(Ar&&typeof Ar.onCommitFiberUnmount=="function")try{Ar.onCommitFiberUnmount($t,_)}catch{}switch(_.tag){case 26:Zs||bh(_,m),yA(h,m,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Zs||bh(_,m);var k=oa,U=Ol;kA(_.type)&&(oa=_.stateNode,Ol=!1),yA(h,m,_),Gp(_.stateNode),oa=k,Ol=U;break;case 5:Zs||bh(_,m);case 6:if(k=oa,U=Ol,oa=null,yA(h,m,_),oa=k,Ol=U,oa!==null)if(Ol)try{(oa.nodeType===9?oa.body:oa.nodeName==="HTML"?oa.ownerDocument.body:oa).removeChild(_.stateNode)}catch(X){ms(_,m,X)}else try{oa.removeChild(_.stateNode)}catch(X){ms(_,m,X)}break;case 18:oa!==null&&(Ol?(h=oa,o1(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,_.stateNode),Al(h)):o1(oa,_.stateNode));break;case 4:k=oa,U=Ol,oa=_.stateNode.containerInfo,Ol=!0,yA(h,m,_),oa=k,Ol=U;break;case 0:case 11:case 14:case 15:Zs||sd(2,_,m),Zs||sd(4,_,m),yA(h,m,_);break;case 1:Zs||(bh(_,m),k=_.stateNode,typeof k.componentWillUnmount=="function"&&lx(_,m,k)),yA(h,m,_);break;case 21:yA(h,m,_);break;case 22:Zs=(k=Zs)||_.memoizedState!==null,yA(h,m,_),Zs=k;break;default:yA(h,m,_)}}function Pf(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Al(h)}catch(_){ms(m,m.return,_)}}function K_(h){switch(h.tag){case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new ux),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new ux),m;default:throw Error(i(435,h.tag))}}function Ys(h,m){var _=K_(h);m.forEach(function(k){var U=om.bind(null,h,k);_.has(k)||(_.add(k),k.then(U,U))})}function Uo(h,m){var _=m.deletions;if(_!==null)for(var k=0;k<_.length;k++){var U=_[k],X=h,Be=m,He=Be;e:for(;He!==null;){switch(He.tag){case 27:if(kA(He.type)){oa=He.stateNode,Ol=!1;break e}break;case 5:oa=He.stateNode,Ol=!1;break e;case 3:case 4:oa=He.stateNode.containerInfo,Ol=!0;break e}He=He.return}if(oa===null)throw Error(i(160));Hg(X,Be,U),oa=null,Ol=!1,X=U.alternate,X!==null&&(X.return=null),U.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)Mp(m,h),m=m.sibling}var qu=null;function Mp(h,m){var _=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Uo(m,h),zl(h),k&4&&(sd(3,h,h.return),Lp(3,h),sd(5,h,h.return));break;case 1:Uo(m,h),zl(h),k&512&&(Zs||_===null||bh(_,_.return)),k&64&&cc&&(h=h.updateQueue,h!==null&&(k=h.callbacks,k!==null&&(_=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=_===null?k:_.concat(k))));break;case 26:var U=qu;if(Uo(m,h),zl(h),k&512&&(Zs||_===null||bh(_,_.return)),k&4){var X=_!==null?_.memoizedState:null;if(k=h.memoizedState,_===null)if(k===null)if(h.stateNode===null){e:{k=h.type,_=h.memoizedProps,U=U.ownerDocument||U;t:switch(k){case"title":X=U.getElementsByTagName("title")[0],(!X||X[Ye]||X[$i]||X.namespaceURI==="http://www.w3.org/2000/svg"||X.hasAttribute("itemprop"))&&(X=U.createElement(k),U.head.insertBefore(X,U.querySelector("head > title"))),Oo(X,k,_),X[$i]=h,jt(X),k=X;break e;case"link":var Be=Cm("link","href",U).get(k+(_.href||""));if(Be){for(var He=0;He<Be.length;He++)if(X=Be[He],X.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&X.getAttribute("rel")===(_.rel==null?null:_.rel)&&X.getAttribute("title")===(_.title==null?null:_.title)&&X.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){Be.splice(He,1);break t}}X=U.createElement(k),Oo(X,k,_),U.head.appendChild(X);break;case"meta":if(Be=Cm("meta","content",U).get(k+(_.content||""))){for(He=0;He<Be.length;He++)if(X=Be[He],X.getAttribute("content")===(_.content==null?null:""+_.content)&&X.getAttribute("name")===(_.name==null?null:_.name)&&X.getAttribute("property")===(_.property==null?null:_.property)&&X.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&X.getAttribute("charset")===(_.charSet==null?null:_.charSet)){Be.splice(He,1);break t}}X=U.createElement(k),Oo(X,k,_),U.head.appendChild(X);break;default:throw Error(i(468,k))}X[$i]=h,jt(X),k=X}h.stateNode=k}else $p(U,h.type,h.stateNode);else h.stateNode=wm(U,k,h.memoizedProps);else X!==k?(X===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):X.count--,k===null?$p(U,h.type,h.stateNode):wm(U,k,h.memoizedProps)):k===null&&h.stateNode!==null&&Ug(h,h.memoizedProps,_.memoizedProps)}break;case 27:Uo(m,h),zl(h),k&512&&(Zs||_===null||bh(_,_.return)),_!==null&&k&4&&Ug(h,h.memoizedProps,_.memoizedProps);break;case 5:if(Uo(m,h),zl(h),k&512&&(Zs||_===null||bh(_,_.return)),h.flags&32){U=h.stateNode;try{Yo(U,"")}catch(or){ms(h,h.return,or)}}k&4&&h.stateNode!=null&&(U=h.memoizedProps,Ug(h,U,_!==null?_.memoizedProps:U)),k&1024&&(Qg=!0);break;case 6:if(Uo(m,h),zl(h),k&4){if(h.stateNode===null)throw Error(i(162));k=h.memoizedProps,_=h.stateNode;try{_.nodeValue=k}catch(or){ms(h,h.return,or)}}break;case 3:if(Wp=null,U=qu,qu=Gd(m.containerInfo),Uo(m,h),qu=U,zl(h),k&4&&_!==null&&_.memoizedState.isDehydrated)try{Al(m.containerInfo)}catch(or){ms(h,h.return,or)}Qg&&(Qg=!1,Rf(h));break;case 4:k=qu,qu=Gd(h.stateNode.containerInfo),Uo(m,h),zl(h),qu=k;break;case 12:Uo(m,h),zl(h);break;case 13:Uo(m,h),zl(h),h.child.flags&8192&&h.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Dd=ir()),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,Ys(h,k)));break;case 22:U=h.memoizedState!==null;var _t=_!==null&&_.memoizedState!==null,Ut=cc,vr=Zs;if(cc=Ut||U,Zs=vr||_t,Uo(m,h),Zs=vr,cc=Ut,zl(h),k&8192)e:for(m=h.stateNode,m._visibility=U?m._visibility&-2:m._visibility|1,U&&(_===null||_t||cc||Zs||ad(h)),_=null,m=h;;){if(m.tag===5||m.tag===26){if(_===null){_t=_=m;try{if(X=_t.stateNode,U)Be=X.style,typeof Be.setProperty=="function"?Be.setProperty("display","none","important"):Be.display="none";else{He=_t.stateNode;var br=_t.memoizedProps.style,rr=br!=null&&br.hasOwnProperty("display")?br.display:null;He.style.display=rr==null||typeof rr=="boolean"?"":(""+rr).trim()}}catch(or){ms(_t,_t.return,or)}}}else if(m.tag===6){if(_===null){_t=m;try{_t.stateNode.nodeValue=U?"":_t.memoizedProps}catch(or){ms(_t,_t.return,or)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;_===m&&(_=null),m=m.return}_===m&&(_=null),m.sibling.return=m.return,m=m.sibling}k&4&&(k=h.updateQueue,k!==null&&(_=k.retryQueue,_!==null&&(k.retryQueue=null,Ys(h,_))));break;case 19:Uo(m,h),zl(h),k&4&&(k=h.updateQueue,k!==null&&(h.updateQueue=null,Ys(h,k)));break;case 30:break;case 21:break;default:Uo(m,h),zl(h)}}function zl(h){var m=h.flags;if(m&2){try{for(var _,k=h.return;k!==null;){if(cx(k)){_=k;break}k=k.return}if(_==null)throw Error(i(160));switch(_.tag){case 27:var U=_.stateNode,X=Og(h);Mf(h,X,U);break;case 5:var Be=_.stateNode;_.flags&32&&(Yo(Be,""),_.flags&=-33);var He=Og(h);Mf(h,He,Be);break;case 3:case 4:var _t=_.stateNode.containerInfo,Ut=Og(h);Lf(h,Ut,_t);break;default:throw Error(i(161))}}catch(vr){ms(h,h.return,vr)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function Rf(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;Rf(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function _A(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)hx(h,m.alternate,m),m=m.sibling}function ad(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:sd(4,m,m.return),ad(m);break;case 1:bh(m,m.return);var _=m.stateNode;typeof _.componentWillUnmount=="function"&&lx(m,m.return,_),ad(m);break;case 27:Gp(m.stateNode);case 26:case 5:bh(m,m.return),ad(m);break;case 22:m.memoizedState===null&&ad(m);break;case 30:ad(m);break;default:ad(m)}h=h.sibling}}function Ku(h,m,_){for(_=_&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var k=m.alternate,U=h,X=m,Be=X.flags;switch(X.tag){case 0:case 11:case 15:Ku(U,X,_),Lp(4,X);break;case 1:if(Ku(U,X,_),k=X,U=k.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(Ut){ms(k,k.return,Ut)}if(k=X,U=k.updateQueue,U!==null){var He=k.stateNode;try{var _t=U.shared.hiddenCallbacks;if(_t!==null)for(U.shared.hiddenCallbacks=null,U=0;U<_t.length;U++)cn(_t[U],He)}catch(Ut){ms(k,k.return,Ut)}}_&&Be&64&&Dg(X),Md(X,X.return);break;case 27:zg(X);case 26:case 5:Ku(U,X,_),_&&k===null&&Be&4&&jg(X),Md(X,X.return);break;case 12:Ku(U,X,_);break;case 13:Ku(U,X,_),_&&Be&4&&Pf(U,X);break;case 22:X.memoizedState===null&&Ku(U,X,_),Md(X,X.return);break;case 30:break;default:Ku(U,X,_)}m=m.sibling}}function Pp(h,m){var _=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==_&&(h!=null&&h.refCount++,_!=null&&Fc(_))}function od(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Fc(h))}function gu(h,m,_,k){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)Pd(h,m,_,k),m=m.sibling}function Pd(h,m,_,k){var U=m.flags;switch(m.tag){case 0:case 11:case 15:gu(h,m,_,k),U&2048&&Lp(9,m);break;case 1:gu(h,m,_,k);break;case 3:gu(h,m,_,k),U&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Fc(h)));break;case 12:if(U&2048){gu(h,m,_,k),h=m.stateNode;try{var X=m.memoizedProps,Be=X.id,He=X.onPostCommit;typeof He=="function"&&He(Be,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(_t){ms(m,m.return,_t)}}else gu(h,m,_,k);break;case 13:gu(h,m,_,k);break;case 23:break;case 22:X=m.stateNode,Be=m.alternate,m.memoizedState!==null?X._visibility&2?gu(h,m,_,k):Rp(h,m):X._visibility&2?gu(h,m,_,k):(X._visibility|=2,Qh(h,m,_,k,(m.subtreeFlags&10256)!==0)),U&2048&&Pp(Be,m);break;case 24:gu(h,m,_,k),U&2048&&od(m.alternate,m);break;default:gu(h,m,_,k)}}function Qh(h,m,_,k,U){for(U=U&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var X=h,Be=m,He=_,_t=k,Ut=Be.flags;switch(Be.tag){case 0:case 11:case 15:Qh(X,Be,He,_t,U),Lp(8,Be);break;case 23:break;case 22:var vr=Be.stateNode;Be.memoizedState!==null?vr._visibility&2?Qh(X,Be,He,_t,U):Rp(X,Be):(vr._visibility|=2,Qh(X,Be,He,_t,U)),U&&Ut&2048&&Pp(Be.alternate,Be);break;case 24:Qh(X,Be,He,_t,U),U&&Ut&2048&&od(Be.alternate,Be);break;default:Qh(X,Be,He,_t,U)}m=m.sibling}}function Rp(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var _=h,k=m,U=k.flags;switch(k.tag){case 22:Rp(_,k),U&2048&&Pp(k.alternate,k);break;case 24:Rp(_,k),U&2048&&od(k.alternate,k);break;default:Rp(_,k)}m=m.sibling}}var Df=8192;function Wu(h){if(h.subtreeFlags&Df)for(h=h.child;h!==null;)dx(h),h=h.sibling}function dx(h){switch(h.tag){case 26:Wu(h),h.flags&Df&&h.memoizedState!==null&&lb(qu,h.memoizedState,h.memoizedProps);break;case 5:Wu(h);break;case 3:case 4:var m=qu;qu=Gd(h.stateNode.containerInfo),Wu(h),qu=m;break;case 22:h.memoizedState===null&&(m=h.alternate,m!==null&&m.memoizedState!==null?(m=Df,Df=16777216,Wu(h),Df=m):Wu(h));break;default:Wu(h)}}function Vg(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function bA(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var k=m[_];jo=k,Gg(k,h)}Vg(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)X0(h),h=h.sibling}function X0(h){switch(h.tag){case 0:case 11:case 15:bA(h),h.flags&2048&&sd(9,h,h.return);break;case 3:bA(h);break;case 12:bA(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,Dp(h)):bA(h);break;default:bA(h)}}function Dp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var _=0;_<m.length;_++){var k=m[_];jo=k,Gg(k,h)}Vg(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:sd(8,m,m.return),Dp(m);break;case 22:_=m.stateNode,_._visibility&2&&(_._visibility&=-3,Dp(m));break;default:Dp(m)}h=h.sibling}}function Gg(h,m){for(;jo!==null;){var _=jo;switch(_.tag){case 0:case 11:case 15:sd(8,_,m);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var k=_.memoizedState.cachePool.pool;k!=null&&k.refCount++}break;case 24:Fc(_.memoizedState.cache)}if(k=_.child,k!==null)k.return=_,jo=k;else e:for(_=h;jo!==null;){k=jo;var U=k.sibling,X=k.return;if(Ax(k),k===_){jo=null;break e}if(U!==null){U.return=X,jo=U;break e}jo=X}}}var W_={getCacheForType:function(h){var m=Ks(ta),_=m.data.get(h);return _===void 0&&(_=h(),m.data.set(h,_)),_}},$_=typeof WeakMap=="function"?WeakMap:Map,As=0,Us=null,Tn=null,gn=0,ds=0,vu=null,wA=!1,jf=!1,Z0=!1,CA=0,la=0,$u=0,BA=0,qg=0,Xu=0,Rd=0,Uf=null,Pc=null,Kg=!1,Dd=0,jp=1/0,Y0=null,ld=null,hl=0,cd=null,Of=null,jd=0,Up=0,J0=null,Wg=null,zf=0,$g=null;function Ql(){if((As&2)!==0&&gn!==0)return gn&-gn;if(he.T!==null){var h=Po;return h!==0?h:e1()}return In()}function fx(){Xu===0&&(Xu=(gn&536870912)===0||mn?er():536870912);var h=$n.current;return h!==null&&(h.flags|=32),Xu}function Rc(h,m,_){(h===Us&&(ds===2||ds===9)||h.cancelPendingCommit!==null)&&(Hh(h,0),SA(h,gn,Xu,!1)),Fr(h,_),((As&2)===0||h!==Us)&&(h===Us&&((As&2)===0&&(BA|=_),la===4&&SA(h,gn,Xu,!1)),Zu(h))}function px(h,m,_){if((As&6)!==0)throw Error(i(327));var k=!_&&(m&124)===0&&(m&h.expiredLanes)===0||xt(h,m),U=k?gx(h,m):Op(h,m,!0),X=k;do{if(U===0){jf&&!k&&SA(h,m,0,!1);break}else{if(_=h.current.alternate,X&&!X_(_)){U=Op(h,m,!1),X=!1;continue}if(U===2){if(X=m,h.errorRecoveryDisabledLanes&X)var Be=0;else Be=h.pendingLanes&-536870913,Be=Be!==0?Be:Be&536870912?536870912:0;if(Be!==0){m=Be;e:{var He=h;U=Uf;var _t=He.current.memoizedState.isDehydrated;if(_t&&(Hh(He,Be).flags|=256),Be=Op(He,Be,!1),Be!==2){if(Z0&&!_t){He.errorRecoveryDisabledLanes|=X,BA|=X,U=4;break e}X=Pc,Pc=U,X!==null&&(Pc===null?Pc=X:Pc.push.apply(Pc,X))}U=Be}if(X=!1,U!==2)continue}}if(U===1){Hh(h,0),SA(h,m,0,!0);break}e:{switch(k=h,X=U,X){case 0:case 1:throw Error(i(345));case 4:if((m&4194048)!==m)break;case 6:SA(k,m,Xu,!wA);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((m&62914560)===m&&(U=Dd+300-ir(),10<U)){if(SA(k,m,Xu,!wA),Rt(k,0,!0)!==0)break e;k.timeoutHandle=Dc(mx.bind(null,k,_,Pc,Y0,Kg,m,Xu,BA,Rd,wA,X,2,-0,0),U);break e}mx(k,_,Pc,Y0,Kg,m,Xu,BA,Rd,wA,X,0,-0,0)}}break}while(!0);Zu(h)}function mx(h,m,_,k,U,X,Be,He,_t,Ut,vr,br,rr,or){if(h.timeoutHandle=-1,br=m.subtreeFlags,(br&8192||(br&16785408)===16785408)&&($d={stylesheets:null,count:0,unsuspend:A1},dx(m),br=A(),br!==null)){h.cancelPendingCommit=br(_x.bind(null,h,m,X,_,k,U,Be,He,_t,vr,1,rr,or)),SA(h,X,Be,!Ut);return}_x(h,m,X,_,k,U,Be,He,_t)}function X_(h){for(var m=h;;){var _=m.tag;if((_===0||_===11||_===15)&&m.flags&16384&&(_=m.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var k=0;k<_.length;k++){var U=_[k],X=U.getSnapshot;U=U.value;try{if(!ws(X(),U))return!1}catch{return!1}}if(_=m.child,m.subtreeFlags&16384&&_!==null)_.return=m,m=_;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function SA(h,m,_,k){m&=~qg,m&=~BA,h.suspendedLanes|=m,h.pingedLanes&=~m,k&&(h.warmLanes|=m),k=h.expirationTimes;for(var U=m;0<U;){var X=31-it(U),Be=1<<X;k[X]=-1,U&=~Be}_!==0&&ei(h,_,m)}function em(){return(As&6)===0?(zd(0),!1):!0}function Xg(){if(Tn!==null){if(ds===0)var h=Tn.return;else h=Tn,nc=qs=null,Ua(h),Lc=null,jh=0,h=Tn;for(;h!==null;)Rg(h.alternate,h),h=h.return;Tn=null}}function Hh(h,m){var _=h.timeoutHandle;_!==-1&&(h.timeoutHandle=-1,Wf(_)),_=h.cancelPendingCommit,_!==null&&(h.cancelPendingCommit=null,_()),Xg(),Us=h,Tn=_=El(h.current,null),gn=m,ds=0,vu=null,wA=!1,jf=xt(h,m),Z0=!1,Rd=Xu=qg=BA=$u=la=0,Pc=Uf=null,Kg=!1,(m&8)!==0&&(m|=m&32);var k=h.entangledLanes;if(k!==0)for(h=h.entanglements,k&=m;0<k;){var U=31-it(k),X=1<<U;m|=h[U],k&=~X}return CA=m,uu(),_}function Oa(h,m){ni=null,he.H=Za,m===Oe||m===Xe?(m=Dt(),ds=3):m===Ke?(m=Dt(),ds=4):ds=m===Fp?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,vu=m,Tn===null&&(la=1,Uh(h,ho(m,h.current)))}function tm(){var h=he.H;return he.H=Za,h===null?Za:h}function Zg(){var h=he.A;return he.A=W_,h}function rm(){la=4,wA||(gn&4194048)!==gn&&$n.current!==null||(jf=!0),($u&134217727)===0&&(BA&134217727)===0||Us===null||SA(Us,gn,Xu,!1)}function Op(h,m,_){var k=As;As|=2;var U=tm(),X=Zg();(Us!==h||gn!==m)&&(Y0=null,Hh(h,m)),m=!1;var Be=la;e:do try{if(ds!==0&&Tn!==null){var He=Tn,_t=vu;switch(ds){case 8:Xg(),Be=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(m=!0);var Ut=ds;if(ds=0,vu=null,Hf(h,He,_t,Ut),_&&jf){Be=0;break e}break;default:Ut=ds,ds=0,vu=null,Hf(h,He,_t,Ut)}}Qf(),Be=la;break}catch(vr){Oa(h,vr)}while(!0);return m&&h.shellSuspendCounter++,nc=qs=null,As=k,he.H=U,he.A=X,Tn===null&&(Us=null,gn=0,uu()),Be}function Qf(){for(;Tn!==null;)vx(Tn)}function gx(h,m){var _=As;As|=2;var k=tm(),U=Zg();Us!==h||gn!==m?(Y0=null,jp=ir()+500,Hh(h,m)):jf=xt(h,m);e:do try{if(ds!==0&&Tn!==null){m=Tn;var X=vu;t:switch(ds){case 1:ds=0,vu=null,Hf(h,m,X,1);break;case 2:case 9:if(qe(X)){ds=0,vu=null,xx(m);break}m=function(){ds!==2&&ds!==9||Us!==h||(ds=7),Zu(h)},X.then(m,m);break e;case 3:ds=7;break e;case 4:ds=5;break e;case 7:qe(X)?(ds=0,vu=null,xx(m)):(ds=0,vu=null,Hf(h,m,X,7));break;case 5:var Be=null;switch(Tn.tag){case 26:Be=Tn.memoizedState;case 5:case 27:var He=Tn;if(!Be||Bm(Be)){ds=0,vu=null;var _t=He.sibling;if(_t!==null)Tn=_t;else{var Ut=He.return;Ut!==null?(Tn=Ut,im(Ut)):Tn=null}break t}}ds=0,vu=null,Hf(h,m,X,5);break;case 6:ds=0,vu=null,Hf(h,m,X,6);break;case 8:Xg(),la=6;break e;default:throw Error(i(462))}}Z_();break}catch(vr){Oa(h,vr)}while(!0);return nc=qs=null,he.H=k,he.A=U,As=_,Tn!==null?0:(Us=null,gn=0,uu(),la)}function Z_(){for(;Tn!==null&&!Ve();)vx(Tn)}function vx(h){var m=W0(h.alternate,h,CA);h.memoizedProps=h.pendingProps,m===null?im(h):Tn=m}function xx(h){var m=h,_=m.alternate;switch(m.tag){case 15:case 0:m=Ld(_,m,m.pendingProps,m.type,void 0,gn);break;case 11:m=Ld(_,m,m.pendingProps,m.type.render,m.ref,gn);break;case 5:Ua(m);default:Rg(_,m),m=Tn=Au(m,CA),m=W0(_,m,CA)}h.memoizedProps=h.pendingProps,m===null?im(h):Tn=m}function Hf(h,m,_,k){nc=qs=null,Ua(m),Lc=null,jh=0;var U=m.return;try{if(nx(h,U,m,_,gn)){la=1,Uh(h,ho(_,h.current)),Tn=null;return}}catch(X){if(U!==null)throw Tn=U,X;la=1,Uh(h,ho(_,h.current)),Tn=null;return}m.flags&32768?(mn||k===1?h=!0:jf||(gn&536870912)!==0?h=!1:(wA=h=!0,(k===2||k===9||k===3||k===6)&&(k=$n.current,k!==null&&k.tag===13&&(k.flags|=16384))),yx(m,h)):im(m)}function im(h){var m=h;do{if((m.flags&32768)!==0){yx(m,wA);return}h=m.return;var _=Pg(m.alternate,m,CA);if(_!==null){Tn=_;return}if(m=m.sibling,m!==null){Tn=m;return}Tn=m=h}while(m!==null);la===0&&(la=5)}function yx(h,m){do{var _=G_(h.alternate,h);if(_!==null){_.flags&=32767,Tn=_;return}if(_=h.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!m&&(h=h.sibling,h!==null)){Tn=h;return}Tn=h=_}while(h!==null);la=6,Tn=null}function _x(h,m,_,k,U,X,Be,He,_t){h.cancelPendingCommit=null;do nm();while(hl!==0);if((As&6)!==0)throw Error(i(327));if(m!==null){if(m===h.current)throw Error(i(177));if(X=m.lanes|m.childLanes,X|=ph,wt(h,_,X,Be,He,_t),h===Us&&(Tn=Us=null,gn=0),Of=m,cd=h,jd=_,Up=X,J0=U,Wg=k,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,Y_(Lr,function(){return Yg(),null})):(h.callbackNode=null,h.callbackPriority=0),k=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||k){k=he.T,he.T=null,U=Le.p,Le.p=2,Be=As,As|=4;try{q_(h,m,_)}finally{As=Be,Le.p=U,he.T=k}}hl=1,bx(),wx(),Cx()}}function bx(){if(hl===1){hl=0;var h=cd,m=Of,_=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||_){_=he.T,he.T=null;var k=Le.p;Le.p=2;var U=As;As|=4;try{Mp(m,h);var X=mm,Be=Mu(h.containerInfo),He=X.focusedElem,_t=X.selectionRange;if(Be!==He&&He&&He.ownerDocument&&Io(He.ownerDocument.documentElement,He)){if(_t!==null&&Bl(He)){var Ut=_t.start,vr=_t.end;if(vr===void 0&&(vr=Ut),"selectionStart"in He)He.selectionStart=Ut,He.selectionEnd=Math.min(vr,He.value.length);else{var br=He.ownerDocument||document,rr=br&&br.defaultView||window;if(rr.getSelection){var or=rr.getSelection(),Di=He.textContent.length,Ei=Math.min(_t.start,Di),Vn=_t.end===void 0?Ei:Math.min(_t.end,Di);!or.extend&&Ei>Vn&&(Be=Vn,Vn=Ei,Ei=Be);var Ot=lu(He,Ei),Nt=lu(He,Vn);if(Ot&&Nt&&(or.rangeCount!==1||or.anchorNode!==Ot.node||or.anchorOffset!==Ot.offset||or.focusNode!==Nt.node||or.focusOffset!==Nt.offset)){var Yt=br.createRange();Yt.setStart(Ot.node,Ot.offset),or.removeAllRanges(),Ei>Vn?(or.addRange(Yt),or.extend(Nt.node,Nt.offset)):(Yt.setEnd(Nt.node,Nt.offset),or.addRange(Yt))}}}}for(br=[],or=He;or=or.parentNode;)or.nodeType===1&&br.push({element:or,left:or.scrollLeft,top:or.scrollTop});for(typeof He.focus=="function"&&He.focus(),He=0;He<br.length;He++){var _r=br[He];_r.element.scrollLeft=_r.left,_r.element.scrollTop=_r.top}}Se=!!pm,mm=pm=null}finally{As=U,Le.p=k,he.T=_}}h.current=m,hl=2}}function wx(){if(hl===2){hl=0;var h=cd,m=Of,_=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||_){_=he.T,he.T=null;var k=Le.p;Le.p=2;var U=As;As|=4;try{hx(h,m.alternate,m)}finally{As=U,Le.p=k,he.T=_}}hl=3}}function Cx(){if(hl===4||hl===3){hl=0,lr();var h=cd,m=Of,_=jd,k=Wg;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?hl=5:(hl=0,Of=cd=null,Bx(h,h.pendingLanes));var U=h.pendingLanes;if(U===0&&(ld=null),Ri(_),m=m.stateNode,Ar&&typeof Ar.onCommitFiberRoot=="function")try{Ar.onCommitFiberRoot($t,m,void 0,(m.current.flags&128)===128)}catch{}if(k!==null){m=he.T,U=Le.p,Le.p=2,he.T=null;try{for(var X=h.onRecoverableError,Be=0;Be<k.length;Be++){var He=k[Be];X(He.value,{componentStack:He.stack})}}finally{he.T=m,Le.p=U}}(jd&3)!==0&&nm(),Zu(h),U=h.pendingLanes,(_&4194090)!==0&&(U&42)!==0?h===$g?zf++:(zf=0,$g=h):zf=0,zd(0)}}function Bx(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Fc(m)))}function nm(h){return bx(),wx(),Cx(),Yg()}function Yg(){if(hl!==5)return!1;var h=cd,m=Up;Up=0;var _=Ri(jd),k=he.T,U=Le.p;try{Le.p=32>_?32:_,he.T=null,_=J0,J0=null;var X=cd,Be=jd;if(hl=0,Of=cd=null,jd=0,(As&6)!==0)throw Error(i(331));var He=As;if(As|=4,X0(X.current),Pd(X,X.current,Be,_),As=He,zd(0,!1),Ar&&typeof Ar.onPostCommitFiberRoot=="function")try{Ar.onPostCommitFiberRoot($t,X)}catch{}return!0}finally{Le.p=U,he.T=k,Bx(h,m)}}function sm(h,m,_){m=ho(_,m),m=z0(h.stateNode,m,2),h=Tr(h,m,2),h!==null&&(Fr(h,2),Zu(h))}function ms(h,m,_){if(h.tag===3)sm(h,h,_);else for(;m!==null;){if(m.tag===3){sm(m,h,_);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(ld===null||!ld.has(k))){h=ho(_,h),_=ix(2),k=Tr(m,_,2),k!==null&&(Q0(_,k,m,h),Fr(k,2),Zu(k));break}}m=m.return}}function Vh(h,m,_){var k=h.pingCache;if(k===null){k=h.pingCache=new $_;var U=new Set;k.set(m,U)}else U=k.get(m),U===void 0&&(U=new Set,k.set(m,U));U.has(_)||(Z0=!0,U.add(_),h=zp.bind(null,h,m,_),m.then(h,h))}function zp(h,m,_){var k=h.pingCache;k!==null&&k.delete(m),h.pingedLanes|=h.suspendedLanes&_,h.warmLanes&=~_,Us===h&&(gn&_)===_&&(la===4||la===3&&(gn&62914560)===gn&&300>ir()-Dd?(As&2)===0&&Hh(h,0):qg|=_,Rd===gn&&(Rd=0)),Zu(h)}function Ud(h,m){m===0&&(m=qt()),h=Sl(h,m),h!==null&&(Fr(h,m),Zu(h))}function am(h){var m=h.memoizedState,_=0;m!==null&&(_=m.retryLane),Ud(h,_)}function om(h,m){var _=0;switch(h.tag){case 13:var k=h.stateNode,U=h.memoizedState;U!==null&&(_=U.retryLane);break;case 19:k=h.stateNode;break;case 22:k=h.stateNode._retryCache;break;default:throw Error(i(314))}k!==null&&k.delete(m),Ud(h,_)}function Y_(h,m){return Ct(h,m)}var lm=null,Od=null,cm=!1,um=!1,hm=!1,ud=0;function Zu(h){h!==Od&&h.next===null&&(Od===null?lm=Od=h:Od=Od.next=h),um=!0,cm||(cm=!0,eb())}function zd(h,m){if(!hm&&um){hm=!0;do for(var _=!1,k=lm;k!==null;){if(h!==0){var U=k.pendingLanes;if(U===0)var X=0;else{var Be=k.suspendedLanes,He=k.pingedLanes;X=(1<<31-it(42|h)+1)-1,X&=U&~(Be&~He),X=X&201326741?X&201326741|1:X?X|2:0}X!==0&&(_=!0,Tx(k,X))}else X=gn,X=Rt(k,k===Us?X:0,k.cancelPendingCommit!==null||k.timeoutHandle!==-1),(X&3)===0||xt(k,X)||(_=!0,Tx(k,X));k=k.next}while(_);hm=!1}}function J_(){Jg()}function Jg(){um=cm=!1;var h=0;ud!==0&&(Mx()&&(h=ud),ud=0);for(var m=ir(),_=null,k=lm;k!==null;){var U=k.next,X=Sx(k,m);X===0?(k.next=null,_===null?lm=U:_.next=U,U===null&&(Od=_)):(_=k,(h!==0||(X&3)!==0)&&(um=!0)),k=U}zd(h)}function Sx(h,m){for(var _=h.suspendedLanes,k=h.pingedLanes,U=h.expirationTimes,X=h.pendingLanes&-62914561;0<X;){var Be=31-it(X),He=1<<Be,_t=U[Be];_t===-1?((He&_)===0||(He&k)!==0)&&(U[Be]=Gt(He,m)):_t<=m&&(h.expiredLanes|=He),X&=~He}if(m=Us,_=gn,_=Rt(h,h===m?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k=h.callbackNode,_===0||h===m&&(ds===2||ds===9)||h.cancelPendingCommit!==null)return k!==null&&k!==null&&Pt(k),h.callbackNode=null,h.callbackPriority=0;if((_&3)===0||xt(h,_)){if(m=_&-_,m===h.callbackPriority)return m;switch(k!==null&&Pt(k),Ri(_)){case 2:case 8:_=Wr;break;case 32:_=Lr;break;case 268435456:_=qr;break;default:_=Lr}return k=Ex.bind(null,h),_=Ct(_,k),h.callbackPriority=m,h.callbackNode=_,m}return k!==null&&k!==null&&Pt(k),h.callbackPriority=2,h.callbackNode=null,2}function Ex(h,m){if(hl!==0&&hl!==5)return h.callbackNode=null,h.callbackPriority=0,null;var _=h.callbackNode;if(nm()&&h.callbackNode!==_)return null;var k=gn;return k=Rt(h,h===Us?k:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),k===0?null:(px(h,k,m),Sx(h,ir()),h.callbackNode!=null&&h.callbackNode===_?Ex.bind(null,h):null)}function Tx(h,m){if(nm())return null;px(h,m,!0)}function eb(){Vd(function(){(As&6)!==0?Ct(ar,J_):Jg()})}function e1(){return ud===0&&(ud=er()),ud}function t1(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Jo(""+h)}function r1(h,m){var _=m.ownerDocument.createElement("input");return _.name=m.name,_.value=m.value,h.id&&_.setAttribute("form",h.id),m.parentNode.insertBefore(_,m),h=new FormData(h),_.parentNode.removeChild(_),h}function EA(h,m,_,k,U){if(m==="submit"&&_&&_.stateNode===U){var X=t1((U[mi]||null).action),Be=k.submitter;Be&&(m=(m=Be[mi]||null)?t1(m.formAction):Be.getAttribute("formAction"),m!==null&&(X=m,Be=null));var He=new Kl("action","action",null,k,U);h.push({event:He,listeners:[{instance:null,listener:function(){if(k.defaultPrevented){if(ud!==0){var _t=Be?r1(U,Be):new FormData(U);Er(_,{pending:!0,data:_t,method:U.method,action:X},null,_t)}}else typeof X=="function"&&(He.preventDefault(),_t=Be?r1(U,Be):new FormData(U),Er(_,{pending:!0,data:_t,method:U.method,action:X},X,_t))},currentTarget:U}]})}}for(var Gh=0;Gh<uo.length;Gh++){var Am=uo[Gh],i1=Am.toLowerCase(),tb=Am[0].toUpperCase()+Am.slice(1);il(i1,"on"+tb)}il(rc,"onAnimationEnd"),il(cu,"onAnimationIteration"),il(Bc,"onAnimationStart"),il("dblclick","onDoubleClick"),il("focusin","onFocus"),il("focusout","onBlur"),il(Ah,"onTransitionRun"),il(ZA,"onTransitionStart"),il(Pu,"onTransitionCancel"),il(dh,"onTransitionEnd"),Dr("onMouseEnter",["mouseout","mouseover"]),Dr("onMouseLeave",["mouseout","mouseover"]),Dr("onPointerEnter",["pointerout","pointerover"]),Dr("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hd));function kx(h,m){m=(m&4)!==0;for(var _=0;_<h.length;_++){var k=h[_],U=k.event;k=k.listeners;e:{var X=void 0;if(m)for(var Be=k.length-1;0<=Be;Be--){var He=k[Be],_t=He.instance,Ut=He.currentTarget;if(He=He.listener,_t!==X&&U.isPropagationStopped())break e;X=He,U.currentTarget=Ut;try{X(U)}catch(vr){td(vr)}U.currentTarget=null,X=_t}else for(Be=0;Be<k.length;Be++){if(He=k[Be],_t=He.instance,Ut=He.currentTarget,He=He.listener,_t!==X&&U.isPropagationStopped())break e;X=He,U.currentTarget=Ut;try{X(U)}catch(vr){td(vr)}U.currentTarget=null,X=_t}}}}function vn(h,m){var _=m[gi];_===void 0&&(_=m[gi]=new Set);var k=h+"__bubble";_.has(k)||(s1(m,h,2,!1),_.add(k))}function Qp(h,m,_){var k=0;m&&(k|=4),s1(_,h,k,m)}var TA="_reactListening"+Math.random().toString(36).slice(2);function dm(h){if(!h[TA]){h[TA]=!0,Kt.forEach(function(_){_!=="selectionchange"&&(n1.has(_)||Qp(_,!1,h),Qp(_,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[TA]||(m[TA]=!0,Qp("selectionchange",!1,m))}}function s1(h,m,_,k){switch(Bt(m)){case 2:var U=ke;break;case 8:U=Ue;break;default:U=et}_=U.bind(null,m,_,h),U=void 0,!Va||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(U=!0),k?U!==void 0?h.addEventListener(m,_,{capture:!0,passive:U}):h.addEventListener(m,_,!0):U!==void 0?h.addEventListener(m,_,{passive:U}):h.addEventListener(m,_,!1)}function Hp(h,m,_,k,U){var X=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var Be=k.tag;if(Be===3||Be===4){var He=k.stateNode.containerInfo;if(He===U)break;if(Be===4)for(Be=k.return;Be!==null;){var _t=Be.tag;if((_t===3||_t===4)&&Be.stateNode.containerInfo===U)return;Be=Be.return}for(;He!==null;){if(Be=Qe(He),Be===null)return;if(_t=Be.tag,_t===5||_t===6||_t===26||_t===27){k=X=Be;continue e}He=He.parentNode}}k=k.return}Hs(function(){var Ut=X,vr=nu(_),br=[];e:{var rr=Ru.get(h);if(rr!==void 0){var or=Kl,Di=h;switch(h){case"keypress":if(Fn(_)===0)break e;case"keydown":case"keyup":or=ji;break;case"focusin":Di="focus",or=Wn;break;case"focusout":Di="blur",or=Wn;break;case"beforeblur":case"afterblur":or=Wn;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":or=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":or=ku;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":or=Gs;break;case rc:case cu:case Bc:or=Xl;break;case dh:or=da;break;case"scroll":case"scrollend":or=Wl;break;case"wheel":or=Da;break;case"copy":case"cut":case"paste":or=re;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":or=Zi;break;case"toggle":case"beforetoggle":or=tl}var Ei=(m&4)!==0,Vn=!Ei&&(h==="scroll"||h==="scrollend"),Ot=Ei?rr!==null?rr+"Capture":null:rr;Ei=[];for(var Nt=Ut,Yt;Nt!==null;){var _r=Nt;if(Yt=_r.stateNode,_r=_r.tag,_r!==5&&_r!==26&&_r!==27||Yt===null||Ot===null||(_r=ys(Nt,Ot),_r!=null&&Ei.push(Vf(Nt,_r,Yt))),Vn)break;Nt=Nt.return}0<Ei.length&&(rr=new or(rr,Di,null,_,vr),br.push({event:rr,listeners:Ei}))}}if((m&7)===0){e:{if(rr=h==="mouseover"||h==="pointerover",or=h==="mouseout"||h==="pointerout",rr&&_!==Ti&&(Di=_.relatedTarget||_.fromElement)&&(Qe(Di)||Di[ln]))break e;if((or||rr)&&(rr=vr.window===vr?vr:(rr=vr.ownerDocument)?rr.defaultView||rr.parentWindow:window,or?(Di=_.relatedTarget||_.toElement,or=Ut,Di=Di?Qe(Di):null,Di!==null&&(Vn=a(Di),Ei=Di.tag,Di!==Vn||Ei!==5&&Ei!==27&&Ei!==6)&&(Di=null)):(or=null,Di=Ut),or!==Di)){if(Ei=Tu,_r="onMouseLeave",Ot="onMouseEnter",Nt="mouse",(h==="pointerout"||h==="pointerover")&&(Ei=Zi,_r="onPointerLeave",Ot="onPointerEnter",Nt="pointer"),Vn=or==null?rr:Tt(or),Yt=Di==null?rr:Tt(Di),rr=new Ei(_r,Nt+"leave",or,_,vr),rr.target=Vn,rr.relatedTarget=Yt,_r=null,Qe(vr)===Ut&&(Ei=new Ei(Ot,Nt+"enter",Di,_,vr),Ei.target=Yt,Ei.relatedTarget=Vn,_r=Ei),Vn=_r,or&&Di)t:{for(Ei=or,Ot=Di,Nt=0,Yt=Ei;Yt;Yt=Hd(Yt))Nt++;for(Yt=0,_r=Ot;_r;_r=Hd(_r))Yt++;for(;0<Nt-Yt;)Ei=Hd(Ei),Nt--;for(;0<Yt-Nt;)Ot=Hd(Ot),Yt--;for(;Nt--;){if(Ei===Ot||Ot!==null&&Ei===Ot.alternate)break t;Ei=Hd(Ei),Ot=Hd(Ot)}Ei=null}else Ei=null;or!==null&&Fx(br,rr,or,Ei,!1),Di!==null&&Vn!==null&&Fx(br,Vn,Di,Ei,!0)}}e:{if(rr=Ut?Tt(Ut):window,or=rr.nodeName&&rr.nodeName.toLowerCase(),or==="select"||or==="input"&&rr.type==="file")var Ai=wc;else if(Cl(rr))if(Cc)Ai=bs;else{Ai=AA;var xn=Jl}else or=rr.nodeName,!or||or.toLowerCase()!=="input"||rr.type!=="checkbox"&&rr.type!=="radio"?Ut&&Xi(Ut.elementType)&&(Ai=wc):Ai=hh;if(Ai&&(Ai=Ai(h,Ut))){Nu(br,Ai,_,vr);break e}xn&&xn(h,rr,Ut),h==="focusout"&&Ut&&rr.type==="number"&&Ut.memoizedProps.value!=null&&Nh(rr,"number",rr.value)}switch(xn=Ut?Tt(Ut):window,h){case"focusin":(Cl(xn)||xn.contentEditable==="true")&&(Lo=xn,ec=Ut,Ba=null);break;case"focusout":Ba=ec=Lo=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,rl(br,_,vr);break;case"selectionchange":if(en)break;case"keydown":case"keyup":rl(br,_,vr)}var xi;if(bl)e:{switch(h){case"compositionstart":var Oi="onCompositionStart";break e;case"compositionend":Oi="onCompositionEnd";break e;case"compositionupdate":Oi="onCompositionUpdate";break e}Oi=void 0}else ao?Ps(h,_)&&(Oi="onCompositionEnd"):h==="keydown"&&_.keyCode===229&&(Oi="onCompositionStart");Oi&&(su&&_.locale!=="ko"&&(ao||Oi!=="onCompositionStart"?Oi==="onCompositionEnd"&&ao&&(xi=_n()):(Ls=vr,_a="value"in Ls?Ls.value:Ls.textContent,ao=!0)),xn=Qd(Ut,Oi),0<xn.length&&(Oi=new At(Oi,h,null,_,vr),br.push({event:Oi,listeners:xn}),xi?Oi.data=xi:(xi=Fu(_),xi!==null&&(Oi.data=xi)))),(xi=wa?hA(h,_):bc(h,_))&&(Oi=Qd(Ut,"onBeforeInput"),0<Oi.length&&(xn=new At("onBeforeInput","beforeinput",null,_,vr),br.push({event:xn,listeners:Oi}),xn.data=xi)),EA(br,h,Ut,_,vr)}kx(br,m)})}function Vf(h,m,_){return{instance:h,listener:m,currentTarget:_}}function Qd(h,m){for(var _=m+"Capture",k=[];h!==null;){var U=h,X=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||X===null||(U=ys(h,_),U!=null&&k.unshift(Vf(h,U,X)),U=ys(h,m),U!=null&&k.push(Vf(h,U,X))),h.tag===3)return k;h=h.return}return[]}function Hd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function Fx(h,m,_,k,U){for(var X=m._reactName,Be=[];_!==null&&_!==k;){var He=_,_t=He.alternate,Ut=He.stateNode;if(He=He.tag,_t!==null&&_t===k)break;He!==5&&He!==26&&He!==27||Ut===null||(_t=Ut,U?(Ut=ys(_,X),Ut!=null&&Be.unshift(Vf(_,Ut,_t))):U||(Ut=ys(_,X),Ut!=null&&Be.push(Vf(_,Ut,_t)))),_=_.return}Be.length!==0&&h.push({event:m,listeners:Be})}var rb=/\r\n?/g,ib=/\u0000|\uFFFD/g;function Nx(h){return(typeof h=="string"?h:""+h).replace(rb,`
`).replace(ib,"")}function Ix(h,m){return m=Nx(m),Nx(h)===m}function Gf(){}function Pn(h,m,_,k,U,X){switch(_){case"children":typeof k=="string"?m==="body"||m==="textarea"&&k===""||Yo(h,k):(typeof k=="number"||typeof k=="bigint")&&m!=="body"&&Yo(h,""+k);break;case"className":Ni(h,"class",k);break;case"tabIndex":Ni(h,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Ni(h,_,k);break;case"style":ya(h,k,X);break;case"data":if(m!=="object"){Ni(h,"data",k);break}case"src":case"href":if(k===""&&(m!=="a"||_!=="href")){h.removeAttribute(_);break}if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(_);break}k=Jo(""+k),h.setAttribute(_,k);break;case"action":case"formAction":if(typeof k=="function"){h.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof X=="function"&&(_==="formAction"?(m!=="input"&&Pn(h,m,"name",U.name,U,null),Pn(h,m,"formEncType",U.formEncType,U,null),Pn(h,m,"formMethod",U.formMethod,U,null),Pn(h,m,"formTarget",U.formTarget,U,null)):(Pn(h,m,"encType",U.encType,U,null),Pn(h,m,"method",U.method,U,null),Pn(h,m,"target",U.target,U,null)));if(k==null||typeof k=="symbol"||typeof k=="boolean"){h.removeAttribute(_);break}k=Jo(""+k),h.setAttribute(_,k);break;case"onClick":k!=null&&(h.onclick=Gf);break;case"onScroll":k!=null&&vn("scroll",h);break;case"onScrollEnd":k!=null&&vn("scrollend",h);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(i(61));if(_=k.__html,_!=null){if(U.children!=null)throw Error(i(60));h.innerHTML=_}}break;case"multiple":h.multiple=k&&typeof k!="function"&&typeof k!="symbol";break;case"muted":h.muted=k&&typeof k!="function"&&typeof k!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(k==null||typeof k=="function"||typeof k=="boolean"||typeof k=="symbol"){h.removeAttribute("xlink:href");break}_=Jo(""+k),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(_,""+k):h.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(_,""):h.removeAttribute(_);break;case"capture":case"download":k===!0?h.setAttribute(_,""):k!==!1&&k!=null&&typeof k!="function"&&typeof k!="symbol"?h.setAttribute(_,k):h.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":k!=null&&typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k?h.setAttribute(_,k):h.removeAttribute(_);break;case"rowSpan":case"start":k==null||typeof k=="function"||typeof k=="symbol"||isNaN(k)?h.removeAttribute(_):h.setAttribute(_,k);break;case"popover":vn("beforetoggle",h),vn("toggle",h),Fi(h,"popover",k);break;case"xlinkActuate":_i(h,"http://www.w3.org/1999/xlink","xlink:actuate",k);break;case"xlinkArcrole":_i(h,"http://www.w3.org/1999/xlink","xlink:arcrole",k);break;case"xlinkRole":_i(h,"http://www.w3.org/1999/xlink","xlink:role",k);break;case"xlinkShow":_i(h,"http://www.w3.org/1999/xlink","xlink:show",k);break;case"xlinkTitle":_i(h,"http://www.w3.org/1999/xlink","xlink:title",k);break;case"xlinkType":_i(h,"http://www.w3.org/1999/xlink","xlink:type",k);break;case"xmlBase":_i(h,"http://www.w3.org/XML/1998/namespace","xml:base",k);break;case"xmlLang":_i(h,"http://www.w3.org/XML/1998/namespace","xml:lang",k);break;case"xmlSpace":_i(h,"http://www.w3.org/XML/1998/namespace","xml:space",k);break;case"is":Fi(h,"is",k);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Eu.get(_)||_,Fi(h,_,k))}}function fm(h,m,_,k,U,X){switch(_){case"style":ya(h,k,X);break;case"dangerouslySetInnerHTML":if(k!=null){if(typeof k!="object"||!("__html"in k))throw Error(i(61));if(_=k.__html,_!=null){if(U.children!=null)throw Error(i(60));h.innerHTML=_}}break;case"children":typeof k=="string"?Yo(h,k):(typeof k=="number"||typeof k=="bigint")&&Yo(h,""+k);break;case"onScroll":k!=null&&vn("scroll",h);break;case"onScrollEnd":k!=null&&vn("scrollend",h);break;case"onClick":k!=null&&(h.onclick=Gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mt.hasOwnProperty(_))e:{if(_[0]==="o"&&_[1]==="n"&&(U=_.endsWith("Capture"),m=_.slice(2,U?_.length-7:void 0),X=h[mi]||null,X=X!=null?X[_]:null,typeof X=="function"&&h.removeEventListener(m,X,U),typeof k=="function")){typeof X!="function"&&X!==null&&(_ in h?h[_]=null:h.hasAttribute(_)&&h.removeAttribute(_)),h.addEventListener(m,k,U);break e}_ in h?h[_]=k:k===!0?h.setAttribute(_,""):Fi(h,_,k)}}}function Oo(h,m,_){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vn("error",h),vn("load",h);var k=!1,U=!1,X;for(X in _)if(_.hasOwnProperty(X)){var Be=_[X];if(Be!=null)switch(X){case"src":k=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Pn(h,m,X,Be,_,null)}}U&&Pn(h,m,"srcSet",_.srcSet,_,null),k&&Pn(h,m,"src",_.src,_,null);return;case"input":vn("invalid",h);var He=X=Be=U=null,_t=null,Ut=null;for(k in _)if(_.hasOwnProperty(k)){var vr=_[k];if(vr!=null)switch(k){case"name":U=vr;break;case"type":Be=vr;break;case"checked":_t=vr;break;case"defaultChecked":Ut=vr;break;case"value":X=vr;break;case"defaultValue":He=vr;break;case"children":case"dangerouslySetInnerHTML":if(vr!=null)throw Error(i(137,m));break;default:Pn(h,m,k,vr,_,null)}}ch(h,X,He,_t,Ut,Be,U,!1),$o(h);return;case"select":vn("invalid",h),k=Be=X=null;for(U in _)if(_.hasOwnProperty(U)&&(He=_[U],He!=null))switch(U){case"value":X=He;break;case"defaultValue":Be=He;break;case"multiple":k=He;default:Pn(h,m,U,He,_,null)}m=X,_=Be,h.multiple=!!k,m!=null?To(h,!!k,m,!1):_!=null&&To(h,!!k,_,!0);return;case"textarea":vn("invalid",h),X=U=k=null;for(Be in _)if(_.hasOwnProperty(Be)&&(He=_[Be],He!=null))switch(Be){case"value":k=He;break;case"defaultValue":U=He;break;case"children":X=He;break;case"dangerouslySetInnerHTML":if(He!=null)throw Error(i(91));break;default:Pn(h,m,Be,He,_,null)}uA(h,k,U,X),$o(h);return;case"option":for(_t in _)if(_.hasOwnProperty(_t)&&(k=_[_t],k!=null))switch(_t){case"selected":h.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Pn(h,m,_t,k,_,null)}return;case"dialog":vn("beforetoggle",h),vn("toggle",h),vn("cancel",h),vn("close",h);break;case"iframe":case"object":vn("load",h);break;case"video":case"audio":for(k=0;k<hd.length;k++)vn(hd[k],h);break;case"image":vn("error",h),vn("load",h);break;case"details":vn("toggle",h);break;case"embed":case"source":case"link":vn("error",h),vn("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ut in _)if(_.hasOwnProperty(Ut)&&(k=_[Ut],k!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,m));default:Pn(h,m,Ut,k,_,null)}return;default:if(Xi(m)){for(vr in _)_.hasOwnProperty(vr)&&(k=_[vr],k!==void 0&&fm(h,m,vr,k,_,void 0));return}}for(He in _)_.hasOwnProperty(He)&&(k=_[He],k!=null&&Pn(h,m,He,k,_,null))}function Lx(h,m,_,k){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,X=null,Be=null,He=null,_t=null,Ut=null,vr=null;for(or in _){var br=_[or];if(_.hasOwnProperty(or)&&br!=null)switch(or){case"checked":break;case"value":break;case"defaultValue":_t=br;default:k.hasOwnProperty(or)||Pn(h,m,or,null,k,br)}}for(var rr in k){var or=k[rr];if(br=_[rr],k.hasOwnProperty(rr)&&(or!=null||br!=null))switch(rr){case"type":X=or;break;case"name":U=or;break;case"checked":Ut=or;break;case"defaultChecked":vr=or;break;case"value":Be=or;break;case"defaultValue":He=or;break;case"children":case"dangerouslySetInnerHTML":if(or!=null)throw Error(i(137,m));break;default:or!==br&&Pn(h,m,rr,or,k,br)}}Pa(h,Be,He,_t,Ut,vr,X,U);return;case"select":or=Be=He=rr=null;for(X in _)if(_t=_[X],_.hasOwnProperty(X)&&_t!=null)switch(X){case"value":break;case"multiple":or=_t;default:k.hasOwnProperty(X)||Pn(h,m,X,null,k,_t)}for(U in k)if(X=k[U],_t=_[U],k.hasOwnProperty(U)&&(X!=null||_t!=null))switch(U){case"value":rr=X;break;case"defaultValue":He=X;break;case"multiple":Be=X;default:X!==_t&&Pn(h,m,U,X,k,_t)}m=He,_=Be,k=or,rr!=null?To(h,!!_,rr,!1):!!k!=!!_&&(m!=null?To(h,!!_,m,!0):To(h,!!_,_?[]:"",!1));return;case"textarea":or=rr=null;for(He in _)if(U=_[He],_.hasOwnProperty(He)&&U!=null&&!k.hasOwnProperty(He))switch(He){case"value":break;case"children":break;default:Pn(h,m,He,null,k,U)}for(Be in k)if(U=k[Be],X=_[Be],k.hasOwnProperty(Be)&&(U!=null||X!=null))switch(Be){case"value":rr=U;break;case"defaultValue":or=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:U!==X&&Pn(h,m,Be,U,k,X)}Zo(h,rr,or);return;case"option":for(var Di in _)if(rr=_[Di],_.hasOwnProperty(Di)&&rr!=null&&!k.hasOwnProperty(Di))switch(Di){case"selected":h.selected=!1;break;default:Pn(h,m,Di,null,k,rr)}for(_t in k)if(rr=k[_t],or=_[_t],k.hasOwnProperty(_t)&&rr!==or&&(rr!=null||or!=null))switch(_t){case"selected":h.selected=rr&&typeof rr!="function"&&typeof rr!="symbol";break;default:Pn(h,m,_t,rr,k,or)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ei in _)rr=_[Ei],_.hasOwnProperty(Ei)&&rr!=null&&!k.hasOwnProperty(Ei)&&Pn(h,m,Ei,null,k,rr);for(Ut in k)if(rr=k[Ut],or=_[Ut],k.hasOwnProperty(Ut)&&rr!==or&&(rr!=null||or!=null))switch(Ut){case"children":case"dangerouslySetInnerHTML":if(rr!=null)throw Error(i(137,m));break;default:Pn(h,m,Ut,rr,k,or)}return;default:if(Xi(m)){for(var Vn in _)rr=_[Vn],_.hasOwnProperty(Vn)&&rr!==void 0&&!k.hasOwnProperty(Vn)&&fm(h,m,Vn,void 0,k,rr);for(vr in k)rr=k[vr],or=_[vr],!k.hasOwnProperty(vr)||rr===or||rr===void 0&&or===void 0||fm(h,m,vr,rr,k,or);return}}for(var Ot in _)rr=_[Ot],_.hasOwnProperty(Ot)&&rr!=null&&!k.hasOwnProperty(Ot)&&Pn(h,m,Ot,null,k,rr);for(br in k)rr=k[br],or=_[br],!k.hasOwnProperty(br)||rr===or||rr==null&&or==null||Pn(h,m,br,rr,k,or)}var pm=null,mm=null;function qf(h){return h.nodeType===9?h:h.ownerDocument}function a1(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kf(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function gm(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Vp=null;function Mx(){var h=window.event;return h&&h.type==="popstate"?h===Vp?!1:(Vp=h,!0):(Vp=null,!1)}var Dc=typeof setTimeout=="function"?setTimeout:void 0,Wf=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,Vd=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(h){return $f.resolve(null).then(h).catch(Px)}:Dc;function Px(h){setTimeout(function(){throw h})}function kA(h){return h==="head"}function o1(h,m){var _=m,k=0,U=0;do{var X=_.nextSibling;if(h.removeChild(_),X&&X.nodeType===8)if(_=X.data,_==="/$"){if(0<k&&8>k){_=k;var Be=h.ownerDocument;if(_&1&&Gp(Be.documentElement),_&2&&Gp(Be.body),_&4)for(_=Be.head,Gp(_),Be=_.firstChild;Be;){var He=Be.nextSibling,_t=Be.nodeName;Be[Ye]||_t==="SCRIPT"||_t==="STYLE"||_t==="LINK"&&Be.rel.toLowerCase()==="stylesheet"||_.removeChild(Be),Be=He}}if(U===0){h.removeChild(X),Al(m);return}U--}else _==="$"||_==="$?"||_==="$!"?U++:k=_.charCodeAt(0)-48;else k=0;_=X}while(_);Al(m)}function vm(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var _=m;switch(m=m.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":vm(_),nt(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}h.removeChild(_)}}function nb(h,m,_,k){for(;h.nodeType===1;){var U=_;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!k&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(k){if(!h[Ye])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(X=h.getAttribute("rel"),X==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(X!==U.rel||h.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||h.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||h.getAttribute("title")!==(U.title==null?null:U.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(X=h.getAttribute("src"),(X!==(U.src==null?null:U.src)||h.getAttribute("type")!==(U.type==null?null:U.type)||h.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&X&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var X=U.name==null?null:""+U.name;if(U.type==="hidden"&&h.getAttribute("name")===X)return h}else return h;if(h=Yu(h.nextSibling),h===null)break}return null}function Rx(h,m,_){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!_||(h=Yu(h.nextSibling),h===null))return null;return h}function qh(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function Dx(h,m){var _=h.ownerDocument;if(h.data!=="$?"||_.readyState==="complete")m();else{var k=function(){m(),_.removeEventListener("DOMContentLoaded",k)};_.addEventListener("DOMContentLoaded",k),h._reactRetry=k}}function Yu(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return h}var xm=null;function l1(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var _=h.data;if(_==="$"||_==="$!"||_==="$?"){if(m===0)return h;m--}else _==="/$"&&m++}h=h.previousSibling}return null}function jx(h,m,_){switch(m=qf(_),h){case"html":if(h=m.documentElement,!h)throw Error(i(452));return h;case"head":if(h=m.head,!h)throw Error(i(453));return h;case"body":if(h=m.body,!h)throw Error(i(454));return h;default:throw Error(i(451))}}function Gp(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);nt(h)}var xu=new Map,c1=new Set;function Gd(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var Kh=Le.d;Le.d={f:ym,r:_m,D:sb,C:ab,L:Xf,m:zo,X:Ox,S:u1,M:zx};function ym(){var h=Kh.f(),m=em();return h||m}function _m(h){var m=st(h);m!==null&&m.tag===5&&m.type==="form"?Xr(m):Kh.r(h)}var FA=typeof document>"u"?null:document;function Ux(h,m,_){var k=FA;if(k&&typeof m=="string"&&m){var U=kn(m);U='link[rel="'+h+'"][href="'+U+'"]',typeof _=="string"&&(U+='[crossorigin="'+_+'"]'),c1.has(U)||(c1.add(U),h={rel:h,crossOrigin:_,href:m},k.querySelector(U)===null&&(m=k.createElement("link"),Oo(m,"link",h),jt(m),k.head.appendChild(m)))}}function sb(h){Kh.D(h),Ux("dns-prefetch",h,null)}function ab(h,m){Kh.C(h,m),Ux("preconnect",h,m)}function Xf(h,m,_){Kh.L(h,m,_);var k=FA;if(k&&h&&m){var U='link[rel="preload"][as="'+kn(m)+'"]';m==="image"&&_&&_.imageSrcSet?(U+='[imagesrcset="'+kn(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(U+='[imagesizes="'+kn(_.imageSizes)+'"]')):U+='[href="'+kn(h)+'"]';var X=U;switch(m){case"style":X=Zf(h);break;case"script":X=qd(h)}xu.has(X)||(h=v({rel:"preload",href:m==="image"&&_&&_.imageSrcSet?void 0:h,as:m},_),xu.set(X,h),k.querySelector(U)!==null||m==="style"&&k.querySelector(Yf(X))||m==="script"&&k.querySelector(Kd(X))||(m=k.createElement("link"),Oo(m,"link",h),jt(m),k.head.appendChild(m)))}}function zo(h,m){Kh.m(h,m);var _=FA;if(_&&h){var k=m&&typeof m.as=="string"?m.as:"script",U='link[rel="modulepreload"][as="'+kn(k)+'"][href="'+kn(h)+'"]',X=U;switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":X=qd(h)}if(!xu.has(X)&&(h=v({rel:"modulepreload",href:h},m),xu.set(X,h),_.querySelector(U)===null)){switch(k){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(Kd(X)))return}k=_.createElement("link"),Oo(k,"link",h),jt(k),_.head.appendChild(k)}}}function u1(h,m,_){Kh.S(h,m,_);var k=FA;if(k&&h){var U=sr(k).hoistableStyles,X=Zf(h);m=m||"default";var Be=U.get(X);if(!Be){var He={loading:0,preload:null};if(Be=k.querySelector(Yf(X)))He.loading=5;else{h=v({rel:"stylesheet",href:h,"data-precedence":m},_),(_=xu.get(X))&&Wd(h,_);var _t=Be=k.createElement("link");jt(_t),Oo(_t,"link",h),_t._p=new Promise(function(Ut,vr){_t.onload=Ut,_t.onerror=vr}),_t.addEventListener("load",function(){He.loading|=1}),_t.addEventListener("error",function(){He.loading|=2}),He.loading|=4,qp(Be,m,k)}Be={type:"stylesheet",instance:Be,count:1,state:He},U.set(X,Be)}}}function Ox(h,m){Kh.X(h,m);var _=FA;if(_&&h){var k=sr(_).hoistableScripts,U=qd(h),X=k.get(U);X||(X=_.querySelector(Kd(U)),X||(h=v({src:h,async:!0},m),(m=xu.get(U))&&Kp(h,m),X=_.createElement("script"),jt(X),Oo(X,"link",h),_.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},k.set(U,X))}}function zx(h,m){Kh.M(h,m);var _=FA;if(_&&h){var k=sr(_).hoistableScripts,U=qd(h),X=k.get(U);X||(X=_.querySelector(Kd(U)),X||(h=v({src:h,async:!0,type:"module"},m),(m=xu.get(U))&&Kp(h,m),X=_.createElement("script"),jt(X),Oo(X,"link",h),_.head.appendChild(X)),X={type:"script",instance:X,count:1,state:null},k.set(U,X))}}function bm(h,m,_,k){var U=(U=Me.current)?Gd(U):null;if(!U)throw Error(i(446));switch(h){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(m=Zf(_.href),_=sr(U).hoistableStyles,k=_.get(m),k||(k={type:"style",instance:null,count:0,state:null},_.set(m,k)),k):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){h=Zf(_.href);var X=sr(U).hoistableStyles,Be=X.get(h);if(Be||(U=U.ownerDocument||U,Be={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},X.set(h,Be),(X=U.querySelector(Yf(h)))&&!X._p&&(Be.instance=X,Be.state.loading=5),xu.has(h)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},xu.set(h,_),X||ob(U,h,_,Be.state))),m&&k===null)throw Error(i(528,""));return Be}if(m&&k!==null)throw Error(i(529,""));return null;case"script":return m=_.async,_=_.src,typeof _=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=qd(_),_=sr(U).hoistableScripts,k=_.get(m),k||(k={type:"script",instance:null,count:0,state:null},_.set(m,k)),k):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,h))}}function Zf(h){return'href="'+kn(h)+'"'}function Yf(h){return'link[rel="stylesheet"]['+h+"]"}function h1(h){return v({},h,{"data-precedence":h.precedence,precedence:null})}function ob(h,m,_,k){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?k.loading=1:(m=h.createElement("link"),k.preload=m,m.addEventListener("load",function(){return k.loading|=1}),m.addEventListener("error",function(){return k.loading|=2}),Oo(m,"link",_),jt(m),h.head.appendChild(m))}function qd(h){return'[src="'+kn(h)+'"]'}function Kd(h){return"script[async]"+h}function wm(h,m,_){if(m.count++,m.instance===null)switch(m.type){case"style":var k=h.querySelector('style[data-href~="'+kn(_.href)+'"]');if(k)return m.instance=k,jt(k),k;var U=v({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return k=(h.ownerDocument||h).createElement("style"),jt(k),Oo(k,"style",U),qp(k,_.precedence,h),m.instance=k;case"stylesheet":U=Zf(_.href);var X=h.querySelector(Yf(U));if(X)return m.state.loading|=4,m.instance=X,jt(X),X;k=h1(_),(U=xu.get(U))&&Wd(k,U),X=(h.ownerDocument||h).createElement("link"),jt(X);var Be=X;return Be._p=new Promise(function(He,_t){Be.onload=He,Be.onerror=_t}),Oo(X,"link",k),m.state.loading|=4,qp(X,_.precedence,h),m.instance=X;case"script":return X=qd(_.src),(U=h.querySelector(Kd(X)))?(m.instance=U,jt(U),U):(k=_,(U=xu.get(X))&&(k=v({},_),Kp(k,U)),h=h.ownerDocument||h,U=h.createElement("script"),jt(U),Oo(U,"link",k),h.head.appendChild(U),m.instance=U);case"void":return null;default:throw Error(i(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(k=m.instance,m.state.loading|=4,qp(k,_.precedence,h));return m.instance}function qp(h,m,_){for(var k=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=k.length?k[k.length-1]:null,X=U,Be=0;Be<k.length;Be++){var He=k[Be];if(He.dataset.precedence===m)X=He;else if(X!==U)break}X?X.parentNode.insertBefore(h,X.nextSibling):(m=_.nodeType===9?_.head:_,m.insertBefore(h,m.firstChild))}function Wd(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function Kp(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var Wp=null;function Cm(h,m,_){if(Wp===null){var k=new Map,U=Wp=new Map;U.set(_,k)}else U=Wp,k=U.get(_),k||(k=new Map,U.set(_,k));if(k.has(h))return k;for(k.set(h,null),_=_.getElementsByTagName(h),U=0;U<_.length;U++){var X=_[U];if(!(X[Ye]||X[$i]||h==="link"&&X.getAttribute("rel")==="stylesheet")&&X.namespaceURI!=="http://www.w3.org/2000/svg"){var Be=X.getAttribute(m)||"";Be=h+Be;var He=k.get(Be);He?He.push(X):k.set(Be,[X])}}return k}function $p(h,m,_){h=h.ownerDocument||h,h.head.insertBefore(_,m==="title"?h.querySelector("head > title"):null)}function Xp(h,m,_){if(_===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function Bm(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var $d=null;function A1(){}function lb(h,m,_){if($d===null)throw Error(i(475));var k=$d;if(m.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var U=Zf(_.href),X=h.querySelector(Yf(U));if(X){h=X._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(k.count++,k=l.bind(k),h.then(k,k)),m.state.loading|=4,m.instance=X,jt(X);return}X=h.ownerDocument||h,_=h1(_),(U=xu.get(U))&&Wd(_,U),X=X.createElement("link"),jt(X);var Be=X;Be._p=new Promise(function(He,_t){Be.onload=He,Be.onerror=_t}),Oo(X,"link",_),m.instance=X}k.stylesheets===null&&(k.stylesheets=new Map),k.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(k.count++,m=l.bind(k),h.addEventListener("load",m),h.addEventListener("error",m))}}function A(){if($d===null)throw Error(i(475));var h=$d;return h.stylesheets&&h.count===0&&x(h,h.stylesheets),0<h.count?function(m){var _=setTimeout(function(){if(h.stylesheets&&x(h,h.stylesheets),h.unsuspend){var k=h.unsuspend;h.unsuspend=null,k()}},6e4);return h.unsuspend=m,function(){h.unsuspend=null,clearTimeout(_)}}:null}function l(){if(this.count--,this.count===0){if(this.stylesheets)x(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var u=null;function x(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,u=new Map,m.forEach(b,h),u=null,l.call(h))}function b(h,m){if(!(m.state.loading&4)){var _=u.get(h);if(_)var k=_.get(null);else{_=new Map,u.set(h,_);for(var U=h.querySelectorAll("link[data-precedence],style[data-precedence]"),X=0;X<U.length;X++){var Be=U[X];(Be.nodeName==="LINK"||Be.getAttribute("media")!=="not all")&&(_.set(Be.dataset.precedence,Be),k=Be)}k&&_.set(null,k)}U=m.instance,Be=U.getAttribute("data-precedence"),X=_.get(Be)||k,X===k&&_.set(null,U),_.set(Be,U),this.count++,k=l.bind(this),U.addEventListener("load",k),U.addEventListener("error",k),X?X.parentNode.insertBefore(U,X.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(U,h.firstChild)),m.state.loading|=4}}var E={$$typeof:H,Provider:null,Consumer:null,_currentValue:$e,_currentValue2:$e,_threadCount:0};function N(h,m,_,k,U,X,Be,He){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=k,this.onUncaughtError=U,this.onCaughtError=X,this.onRecoverableError=Be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=He,this.incompleteTransitions=new Map}function M(h,m,_,k,U,X,Be,He,_t,Ut,vr,br){return h=new N(h,m,_,Be,He,_t,Ut,br),m=1,X===!0&&(m|=24),X=pa(3,null,null,m),h.current=X,X.stateNode=h,m=YA(),m.refCount++,h.pooledCache=m,m.refCount++,X.memoizedState={element:k,isDehydrated:_,cache:m},It(X),h}function z(h){return h?(h=Rs,h):Rs}function W(h,m,_,k,U,X){U=z(U),k.context===null?k.context=U:k.pendingContext=U,k=mr(m),k.payload={element:_},X=X===void 0?null:X,X!==null&&(k.callback=X),_=Tr(h,k,m),_!==null&&(Rc(_,h,m),wr(_,h,m))}function ie(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<m?_:m}}function ue(h,m){ie(h,m),(h=h.alternate)&&ie(h,m)}function _e(h){if(h.tag===13){var m=Sl(h,67108864);m!==null&&Rc(m,h,67108864),ue(h,67108864)}}var Se=!0;function ke(h,m,_,k){var U=he.T;he.T=null;var X=Le.p;try{Le.p=2,et(h,m,_,k)}finally{Le.p=X,he.T=U}}function Ue(h,m,_,k){var U=he.T;he.T=null;var X=Le.p;try{Le.p=8,et(h,m,_,k)}finally{Le.p=X,he.T=U}}function et(h,m,_,k){if(Se){var U=ht(k);if(U===null)Hp(h,m,k,Lt,_),Qr(h,k);else if(Si(U,h,m,_,k))k.stopPropagation();else if(Qr(h,k),m&4&&-1<zr.indexOf(h)){for(;U!==null;){var X=st(U);if(X!==null)switch(X.tag){case 3:if(X=X.stateNode,X.current.memoizedState.isDehydrated){var Be=vt(X.pendingLanes);if(Be!==0){var He=X;for(He.pendingLanes|=2,He.entangledLanes|=2;Be;){var _t=1<<31-it(Be);He.entanglements[1]|=_t,Be&=~_t}Zu(X),(As&6)===0&&(jp=ir()+500,zd(0))}}break;case 13:He=Sl(X,2),He!==null&&Rc(He,X,2),em(),ue(X,2)}if(X=ht(k),X===null&&Hp(h,m,k,Lt,_),X===U)break;U=X}U!==null&&k.stopPropagation()}else Hp(h,m,k,null,_)}}function ht(h){return h=nu(h),yt(h)}var Lt=null;function yt(h){if(Lt=null,h=Qe(h),h!==null){var m=a(h);if(m===null)h=null;else{var _=m.tag;if(_===13){if(h=c(m),h!==null)return h;h=null}else if(_===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return Lt=h,null}function Bt(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case ar:return 2;case Wr:return 8;case Lr:case Zr:return 32;case qr:return 268435456;default:return 32}default:return 32}}var Zt=!1,nr=null,xr=null,Rr=null,Ir=new Map,Ur=new Map,Jr=[],zr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qr(h,m){switch(h){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":Ir.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(m.pointerId)}}function pr(h,m,_,k,U,X){return h===null||h.nativeEvent!==X?(h={blockedOn:m,domEventName:_,eventSystemFlags:k,nativeEvent:X,targetContainers:[U]},m!==null&&(m=st(m),m!==null&&_e(m)),h):(h.eventSystemFlags|=k,m=h.targetContainers,U!==null&&m.indexOf(U)===-1&&m.push(U),h)}function Si(h,m,_,k,U){switch(m){case"focusin":return nr=pr(nr,h,m,_,k,U),!0;case"dragenter":return xr=pr(xr,h,m,_,k,U),!0;case"mouseover":return Rr=pr(Rr,h,m,_,k,U),!0;case"pointerover":var X=U.pointerId;return Ir.set(X,pr(Ir.get(X)||null,h,m,_,k,U)),!0;case"gotpointercapture":return X=U.pointerId,Ur.set(X,pr(Ur.get(X)||null,h,m,_,k,U)),!0}return!1}function Pi(h){var m=Qe(h.target);if(m!==null){var _=a(m);if(_!==null){if(m=_.tag,m===13){if(m=c(_),m!==null){h.blockedOn=m,Yr(h.priority,function(){if(_.tag===13){var k=Ql();k=Hr(k);var U=Sl(_,k);U!==null&&Rc(U,_,k),ue(_,k)}});return}}else if(m===3&&_.stateNode.current.memoizedState.isDehydrated){h.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ui(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var _=ht(h.nativeEvent);if(_===null){_=h.nativeEvent;var k=new _.constructor(_.type,_);Ti=k,_.target.dispatchEvent(k),Ti=null}else return m=st(_),m!==null&&_e(m),h.blockedOn=_,!1;m.shift()}return!0}function ri(h,m,_){ui(h)&&_.delete(m)}function hn(){Zt=!1,nr!==null&&ui(nr)&&(nr=null),xr!==null&&ui(xr)&&(xr=null),Rr!==null&&ui(Rr)&&(Rr=null),Ir.forEach(ri),Ur.forEach(ri)}function gs(h,m){h.blockedOn===m&&(h.blockedOn=null,Zt||(Zt=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hn)))}var ca=null;function xo(h){ca!==h&&(ca=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ca===h&&(ca=null);for(var m=0;m<h.length;m+=3){var _=h[m],k=h[m+1],U=h[m+2];if(typeof k!="function"){if(yt(k||_)===null)continue;break}var X=st(_);X!==null&&(h.splice(m,3),m-=3,Er(X,{pending:!0,data:U,method:_.method,action:k},k,U))}}))}function Al(h){function m(_t){return gs(_t,h)}nr!==null&&gs(nr,h),xr!==null&&gs(xr,h),Rr!==null&&gs(Rr,h),Ir.forEach(m),Ur.forEach(m);for(var _=0;_<Jr.length;_++){var k=Jr[_];k.blockedOn===h&&(k.blockedOn=null)}for(;0<Jr.length&&(_=Jr[0],_.blockedOn===null);)Pi(_),_.blockedOn===null&&Jr.shift();if(_=(h.ownerDocument||h).$$reactFormReplay,_!=null)for(k=0;k<_.length;k+=3){var U=_[k],X=_[k+1],Be=U[mi]||null;if(typeof X=="function")Be||xo(_);else if(Be){var He=null;if(X&&X.hasAttribute("formAction")){if(U=X,Be=X[mi]||null)He=Be.formAction;else if(yt(U)!==null)continue}else He=Be.action;typeof He=="function"?_[k+1]=He:(_.splice(k,3),k-=3),xo(_)}}}function dl(h){this._internalRoot=h}Ea.prototype.render=dl.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(i(409));var _=m.current,k=Ql();W(_,k,h,m,null,null)},Ea.prototype.unmount=dl.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;W(h.current,2,null,h,null,null),em(),m[ln]=null}};function Ea(h){this._internalRoot=h}Ea.prototype.unstable_scheduleHydration=function(h){if(h){var m=In();h={blockedOn:null,target:h,priority:m};for(var _=0;_<Jr.length&&m!==0&&m<Jr[_].priority;_++);Jr.splice(_,0,h),_===0&&Pi(h)}};var ks=t.version;if(ks!=="19.1.1")throw Error(i(527,ks,"19.1.1"));Le.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=p(m),h=h!==null?g(h):null,h=h===null?null:h.stateNode,h};var Ja={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:he,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{$t=Ta.inject(Ja),Ar=Ta}catch{}}return f1.createRoot=function(h,m){if(!n(h))throw Error(i(299));var _=!1,k="",U=Nf,X=rd,Be=Sg,He=null;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onUncaughtError!==void 0&&(U=m.onUncaughtError),m.onCaughtError!==void 0&&(X=m.onCaughtError),m.onRecoverableError!==void 0&&(Be=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(He=m.unstable_transitionCallbacks)),m=M(h,1,!1,null,null,_,k,U,X,Be,He,null),h[ln]=m.current,dm(h),new dl(m)},f1.hydrateRoot=function(h,m,_){if(!n(h))throw Error(i(299));var k=!1,U="",X=Nf,Be=rd,He=Sg,_t=null,Ut=null;return _!=null&&(_.unstable_strictMode===!0&&(k=!0),_.identifierPrefix!==void 0&&(U=_.identifierPrefix),_.onUncaughtError!==void 0&&(X=_.onUncaughtError),_.onCaughtError!==void 0&&(Be=_.onCaughtError),_.onRecoverableError!==void 0&&(He=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(_t=_.unstable_transitionCallbacks),_.formState!==void 0&&(Ut=_.formState)),m=M(h,1,!0,m,_??null,k,U,X,Be,He,_t,Ut),m.context=z(null),_=m.current,k=Ql(),k=Hr(k),U=mr(k),U.callback=null,Tr(_,U,k),_=k,m.current.lanes=_,Fr(m,_),Zu(m),h[ln]=m.current,dm(h),new Ea(m)},f1.version="19.1.1",f1}var JC;function cM(){if(JC)return Ab.exports;JC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ab.exports=lM(),Ab.exports}var uM=cM();const hM=A4(uM);var eB="popstate";function AM(e={}){function t(i,n){let{pathname:a,search:c,hash:s}=i.location;return zw("",{pathname:a,search:c,hash:s},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:dv(n)}return fM(t,r,null,e)}function Ia(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function HA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dM(){return Math.random().toString(36).substring(2,10)}function tB(e,t){return{usr:e.state,key:e.key,idx:t}}function zw(e,t,r=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ag(t):t,state:r,key:t&&t.key||i||dM()}}function dv({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ag(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function fM(e,t,r,i={}){let{window:n=document.defaultView,v5Compat:a=!1}=i,c=n.history,s="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function B(){s="POP";let D=v(),j=D==null?null:D-g;g=D,p&&p({action:s,location:P.location,delta:j})}function F(D,j){s="PUSH";let q=zw(P.location,D,j);g=v()+1;let H=tB(q,g),ee=P.createHref(q);try{c.pushState(H,"",ee)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;n.location.assign(ee)}a&&p&&p({action:s,location:P.location,delta:1})}function C(D,j){s="REPLACE";let q=zw(P.location,D,j);g=v();let H=tB(q,g),ee=P.createHref(q);c.replaceState(H,"",ee),a&&p&&p({action:s,location:P.location,delta:0})}function L(D){return pM(D)}let P={get action(){return s},get location(){return e(n,c)},listen(D){if(p)throw new Error("A history only accepts one active listener");return n.addEventListener(eB,B),p=D,()=>{n.removeEventListener(eB,B),p=null}},createHref(D){return t(n,D)},createURL:L,encodeLocation(D){let j=L(D);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:F,replace:C,go(D){return c.go(D)}};return P}function pM(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ia(r,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:dv(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function Lk(e,t,r="/"){return mM(e,t,r,!1)}function mM(e,t,r,i){let n=typeof t=="string"?Ag(t):t,a=vf(n.pathname||"/",r);if(a==null)return null;let c=Mk(e);gM(c);let s=null;for(let p=0;s==null&&p<c.length;++p){let g=TM(a);s=SM(c[p],g,i)}return s}function Mk(e,t=[],r=[],i=""){let n=(a,c,s)=>{let p={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(Ia(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let g=ff([i,p.relativePath]),v=r.concat(p);a.children&&a.children.length>0&&(Ia(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Mk(a.children,t,v,g)),!(a.path==null&&!a.index)&&t.push({path:g,score:CM(g,a.index),routesMeta:v})};return e.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))n(a,c);else for(let s of Pk(a.path))n(a,c,s)}),t}function Pk(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return n?[a,""]:[a];let c=Pk(i.join("/")),s=[];return s.push(...c.map(p=>p===""?a:[a,p].join("/"))),n&&s.push(...c),s.map(p=>e.startsWith("/")&&p===""?"/":p)}function gM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:BM(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var vM=/^:[\w-]+$/,xM=3,yM=2,_M=1,bM=10,wM=-2,rB=e=>e==="*";function CM(e,t){let r=e.split("/"),i=r.length;return r.some(rB)&&(i+=wM),t&&(i+=yM),r.filter(n=>!rB(n)).reduce((n,a)=>n+(vM.test(a)?xM:a===""?_M:bM),i)}function BM(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function SM(e,t,r=!1){let{routesMeta:i}=e,n={},a="/",c=[];for(let s=0;s<i.length;++s){let p=i[s],g=s===i.length-1,v=a==="/"?t:t.slice(a.length)||"/",B=_2({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),F=p.route;if(!B&&g&&r&&!i[i.length-1].route.index&&(B=_2({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!B)return null;Object.assign(n,B.params),c.push({params:n,pathname:ff([a,B.pathname]),pathnameBase:IM(ff([a,B.pathnameBase])),route:F}),B.pathnameBase!=="/"&&(a=ff([a,B.pathnameBase]))}return c}function _2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=EM(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],c=a.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:i.reduce((g,{paramName:v,isOptional:B},F)=>{if(v==="*"){let L=s[F]||"";c=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const C=s[F];return B&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:c,pattern:e}}function EM(e,t=!1,r=!0){HA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,s,p)=>(i.push({paramName:s,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function TM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return HA(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function kM(e,t="/"){let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?Ag(e):e;return{pathname:r?r.startsWith("/")?r:FM(r,t):t,search:LM(i),hash:MM(n)}}function FM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function mb(e,t,r,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function f4(e){let t=NM(e);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function p4(e,t,r,i=!1){let n;typeof e=="string"?n=Ag(e):(n={...e},Ia(!n.pathname||!n.pathname.includes("?"),mb("?","pathname","search",n)),Ia(!n.pathname||!n.pathname.includes("#"),mb("#","pathname","hash",n)),Ia(!n.search||!n.search.includes("#"),mb("#","search","hash",n)));let a=e===""||n.pathname==="",c=a?"/":n.pathname,s;if(c==null)s=r;else{let B=t.length-1;if(!i&&c.startsWith("..")){let F=c.split("/");for(;F[0]==="..";)F.shift(),B-=1;n.pathname=F.join("/")}s=B>=0?t[B]:"/"}let p=kM(n,s),g=c&&c!=="/"&&c.endsWith("/"),v=(a||c===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var ff=e=>e.join("/").replace(/\/\/+/g,"/"),IM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function PM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Rk=["POST","PUT","PATCH","DELETE"];new Set(Rk);var RM=["GET",...Rk];new Set(RM);var dg=xe.createContext(null);dg.displayName="DataRouter";var o_=xe.createContext(null);o_.displayName="DataRouterState";xe.createContext(!1);var Dk=xe.createContext({isTransitioning:!1});Dk.displayName="ViewTransition";var DM=xe.createContext(new Map);DM.displayName="Fetchers";var jM=xe.createContext(null);jM.displayName="Await";var GA=xe.createContext(null);GA.displayName="Navigation";var jv=xe.createContext(null);jv.displayName="Location";var qA=xe.createContext({outlet:null,matches:[],isDataRoute:!1});qA.displayName="Route";var m4=xe.createContext(null);m4.displayName="RouteError";function UM(e,{relative:t}={}){Ia(fg(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=xe.useContext(GA),{hash:n,pathname:a,search:c}=Uv(e,{relative:t}),s=a;return r!=="/"&&(s=a==="/"?r:ff([r,a])),i.createHref({pathname:s,search:c,hash:n})}function fg(){return xe.useContext(jv)!=null}function sh(){return Ia(fg(),"useLocation() may be used only in the context of a <Router> component."),xe.useContext(jv).location}var jk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Uk(e){xe.useContext(GA).static||xe.useLayoutEffect(e)}function Wo(){let{isDataRoute:e}=xe.useContext(qA);return e?eP():OM()}function OM(){Ia(fg(),"useNavigate() may be used only in the context of a <Router> component.");let e=xe.useContext(dg),{basename:t,navigator:r}=xe.useContext(GA),{matches:i}=xe.useContext(qA),{pathname:n}=sh(),a=JSON.stringify(f4(i)),c=xe.useRef(!1);return Uk(()=>{c.current=!0}),xe.useCallback((p,g={})=>{if(HA(c.current,jk),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=p4(p,JSON.parse(a),n,g.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:ff([t,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[t,r,a,n,e])}var zM=xe.createContext(null);function QM(e){let t=xe.useContext(qA).outlet;return t&&xe.createElement(zM.Provider,{value:e},t)}function Uv(e,{relative:t}={}){let{matches:r}=xe.useContext(qA),{pathname:i}=sh(),n=JSON.stringify(f4(r));return xe.useMemo(()=>p4(e,JSON.parse(n),i,t==="path"),[e,n,i,t])}function HM(e,t){return Ok(e,t)}function Ok(e,t,r,i){Ia(fg(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=xe.useContext(GA),{matches:a}=xe.useContext(qA),c=a[a.length-1],s=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",v=c&&c.route;{let j=v&&v.path||"";zk(p,!v||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let B=sh(),F;if(t){let j=typeof t=="string"?Ag(t):t;Ia(g==="/"||j.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${j.pathname}" was given in the \`location\` prop.`),F=j}else F=B;let C=F.pathname||"/",L=C;if(g!=="/"){let j=g.replace(/^\//,"").split("/");L="/"+C.replace(/^\//,"").split("/").slice(j.length).join("/")}let P=Lk(e,{pathname:L});HA(v||P!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),HA(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=WM(P&&P.map(j=>Object.assign({},j,{params:Object.assign({},s,j.params),pathname:ff([g,n.encodeLocation?n.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?g:ff([g,n.encodeLocation?n.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,r,i);return t&&D?xe.createElement(jv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},D):D}function VM(){let e=JM(),t=PM(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=xe.createElement(xe.Fragment,null,xe.createElement("p",null," Hey developer "),xe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",xe.createElement("code",{style:a},"ErrorBoundary")," or"," ",xe.createElement("code",{style:a},"errorElement")," prop on your route.")),xe.createElement(xe.Fragment,null,xe.createElement("h2",null,"Unexpected Application Error!"),xe.createElement("h3",{style:{fontStyle:"italic"}},t),r?xe.createElement("pre",{style:n},r):null,c)}var GM=xe.createElement(VM,null),qM=class extends xe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?xe.createElement(qA.Provider,{value:this.props.routeContext},xe.createElement(m4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function KM({routeContext:e,match:t,children:r}){let i=xe.useContext(dg);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),xe.createElement(qA.Provider,{value:e},r)}function WM(e,t=[],r=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let n=e,a=r?.errors;if(a!=null){let p=n.findIndex(g=>g.route.id&&a?.[g.route.id]!==void 0);Ia(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,p+1))}let c=!1,s=-1;if(r)for(let p=0;p<n.length;p++){let g=n[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(s=p),g.route.id){let{loaderData:v,errors:B}=r,F=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!B||B[g.route.id]===void 0);if(g.route.lazy||F){c=!0,s>=0?n=n.slice(0,s+1):n=[n[0]];break}}}return n.reduceRight((p,g,v)=>{let B,F=!1,C=null,L=null;r&&(B=a&&g.route.id?a[g.route.id]:void 0,C=g.route.errorElement||GM,c&&(s<0&&v===0?(zk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,L=null):s===v&&(F=!0,L=g.route.hydrateFallbackElement||null)));let P=t.concat(n.slice(0,v+1)),D=()=>{let j;return B?j=C:F?j=L:g.route.Component?j=xe.createElement(g.route.Component,null):g.route.element?j=g.route.element:j=p,xe.createElement(KM,{match:g,routeContext:{outlet:p,matches:P,isDataRoute:r!=null},children:j})};return r&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?xe.createElement(qM,{location:r.location,revalidation:r.revalidation,component:C,error:B,children:D(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):D()},null)}function g4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $M(e){let t=xe.useContext(dg);return Ia(t,g4(e)),t}function XM(e){let t=xe.useContext(o_);return Ia(t,g4(e)),t}function ZM(e){let t=xe.useContext(qA);return Ia(t,g4(e)),t}function v4(e){let t=ZM(e),r=t.matches[t.matches.length-1];return Ia(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function YM(){return v4("useRouteId")}function JM(){let e=xe.useContext(m4),t=XM("useRouteError"),r=v4("useRouteError");return e!==void 0?e:t.errors?.[r]}function eP(){let{router:e}=$M("useNavigate"),t=v4("useNavigate"),r=xe.useRef(!1);return Uk(()=>{r.current=!0}),xe.useCallback(async(n,a={})=>{HA(r.current,jk),r.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...a}))},[e,t])}var iB={};function zk(e,t,r){!t&&!iB[e]&&(iB[e]=!0,HA(!1,r))}xe.memo(tP);function tP({routes:e,future:t,state:r}){return Ok(e,void 0,r,t)}function F1({to:e,replace:t,state:r,relative:i}){Ia(fg(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=xe.useContext(GA);HA(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=xe.useContext(qA),{pathname:c}=sh(),s=Wo(),p=p4(e,f4(a),c,i==="path"),g=JSON.stringify(p);return xe.useEffect(()=>{s(JSON.parse(g),{replace:t,state:r,relative:i})},[s,g,i,t,r]),null}function Qk(e){return QM(e.context)}function Rn(e){Ia(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rP({basename:e="/",children:t=null,location:r,navigationType:i="POP",navigator:n,static:a=!1}){Ia(!fg(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),s=xe.useMemo(()=>({basename:c,navigator:n,static:a,future:{}}),[c,n,a]);typeof r=="string"&&(r=Ag(r));let{pathname:p="/",search:g="",hash:v="",state:B=null,key:F="default"}=r,C=xe.useMemo(()=>{let L=vf(p,c);return L==null?null:{location:{pathname:L,search:g,hash:v,state:B,key:F},navigationType:i}},[c,p,g,v,B,F,i]);return HA(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:xe.createElement(GA.Provider,{value:s},xe.createElement(jv.Provider,{children:t,value:C}))}function iP({children:e,location:t}){return HM(Qw(e),t)}function Qw(e,t=[]){let r=[];return xe.Children.forEach(e,(i,n)=>{if(!xe.isValidElement(i))return;let a=[...t,n];if(i.type===xe.Fragment){r.push.apply(r,Qw(i.props.children,a));return}Ia(i.type===Rn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ia(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Qw(i.props.children,a)),r.push(c)}),r}var Yy="get",Jy="application/x-www-form-urlencoded";function l_(e){return e!=null&&typeof e.tagName=="string"}function nP(e){return l_(e)&&e.tagName.toLowerCase()==="button"}function sP(e){return l_(e)&&e.tagName.toLowerCase()==="form"}function aP(e){return l_(e)&&e.tagName.toLowerCase()==="input"}function oP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lP(e,t){return e.button===0&&(!t||t==="_self")&&!oP(e)}var Hx=null;function cP(){if(Hx===null)try{new FormData(document.createElement("form"),0),Hx=!1}catch{Hx=!0}return Hx}var uP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gb(e){return e!=null&&!uP.has(e)?(HA(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jy}"`),null):e}function hP(e,t){let r,i,n,a,c;if(sP(e)){let s=e.getAttribute("action");i=s?vf(s,t):null,r=e.getAttribute("method")||Yy,n=gb(e.getAttribute("enctype"))||Jy,a=new FormData(e)}else if(nP(e)||aP(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||s.getAttribute("action");if(i=p?vf(p,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Yy,n=gb(e.getAttribute("formenctype"))||gb(s.getAttribute("enctype"))||Jy,a=new FormData(s,e),!cP()){let{name:g,type:v,value:B}=e;if(v==="image"){let F=g?`${g}.`:"";a.append(`${F}x`,"0"),a.append(`${F}y`,"0")}else g&&a.append(g,B)}}else{if(l_(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Yy,i=null,n=Jy,c=e}return a&&n==="text/plain"&&(c=a,a=void 0),{action:i,method:r.toLowerCase(),encType:n,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function x4(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function AP(e,t,r){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&vf(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function dP(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fP(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pP(e,t,r){let i=await Promise.all(e.map(async n=>{let a=t.routes[n.route.id];if(a){let c=await dP(a,r);return c.links?c.links():[]}return[]}));return xP(i.flat(1).filter(fP).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function nB(e,t,r,i,n,a){let c=(p,g)=>r[g]?p.route.id!==r[g].route.id:!0,s=(p,g)=>r[g].pathname!==p.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==p.params["*"];return a==="assets"?t.filter((p,g)=>c(p,g)||s(p,g)):a==="data"?t.filter((p,g)=>{let v=i.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||s(p,g))return!0;if(p.route.shouldRevalidate){let B=p.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof B=="boolean")return B}return!0}):[]}function mP(e,t,{includeHydrateFallback:r}={}){return gP(e.map(i=>{let n=t.routes[i.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function gP(e){return[...new Set(e)]}function vP(e){let t={},r=Object.keys(e).sort();for(let i of r)t[i]=e[i];return t}function xP(e,t){let r=new Set;return new Set(t),e.reduce((i,n)=>{let a=JSON.stringify(vP(n));return r.has(a)||(r.add(a),i.push({key:a,link:n})),i},[])}function Hk(){let e=xe.useContext(dg);return x4(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function yP(){let e=xe.useContext(o_);return x4(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var y4=xe.createContext(void 0);y4.displayName="FrameworkContext";function Vk(){let e=xe.useContext(y4);return x4(e,"You must render this element inside a <HydratedRouter> element"),e}function _P(e,t){let r=xe.useContext(y4),[i,n]=xe.useState(!1),[a,c]=xe.useState(!1),{onFocus:s,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:B}=t,F=xe.useRef(null);xe.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let P=j=>{j.forEach(q=>{c(q.isIntersecting)})},D=new IntersectionObserver(P,{threshold:.5});return F.current&&D.observe(F.current),()=>{D.disconnect()}}},[e]),xe.useEffect(()=>{if(i){let P=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(P)}}},[i]);let C=()=>{n(!0)},L=()=>{n(!1),c(!1)};return r?e!=="intent"?[a,F,{}]:[a,F,{onFocus:p1(s,C),onBlur:p1(p,L),onMouseEnter:p1(g,C),onMouseLeave:p1(v,L),onTouchStart:p1(B,C)}]:[!1,F,{}]}function p1(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function bP({page:e,...t}){let{router:r}=Hk(),i=xe.useMemo(()=>Lk(r.routes,e,r.basename),[r.routes,e,r.basename]);return i?xe.createElement(CP,{page:e,matches:i,...t}):null}function wP(e){let{manifest:t,routeModules:r}=Vk(),[i,n]=xe.useState([]);return xe.useEffect(()=>{let a=!1;return pP(e,t,r).then(c=>{a||n(c)}),()=>{a=!0}},[e,t,r]),i}function CP({page:e,matches:t,...r}){let i=sh(),{manifest:n,routeModules:a}=Vk(),{basename:c}=Hk(),{loaderData:s,matches:p}=yP(),g=xe.useMemo(()=>nB(e,t,p,n,i,"data"),[e,t,p,n,i]),v=xe.useMemo(()=>nB(e,t,p,n,i,"assets"),[e,t,p,n,i]),B=xe.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let L=new Set,P=!1;if(t.forEach(j=>{let q=n.routes[j.route.id];!q||!q.hasLoader||(!g.some(H=>H.route.id===j.route.id)&&j.route.id in s&&a[j.route.id]?.shouldRevalidate||q.hasClientLoader?P=!0:L.add(j.route.id))}),L.size===0)return[];let D=AP(e,c,"data");return P&&L.size>0&&D.searchParams.set("_routes",t.filter(j=>L.has(j.route.id)).map(j=>j.route.id).join(",")),[D.pathname+D.search]},[c,s,i,n,g,t,e,a]),F=xe.useMemo(()=>mP(v,n),[v,n]),C=wP(v);return xe.createElement(xe.Fragment,null,B.map(L=>xe.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...r})),F.map(L=>xe.createElement("link",{key:L,rel:"modulepreload",href:L,...r})),C.map(({key:L,link:P})=>xe.createElement("link",{key:L,...P})))}function BP(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Gk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gk&&(window.__reactRouterVersion="7.7.1")}catch{}function SP({basename:e,children:t,window:r}){let i=xe.useRef();i.current==null&&(i.current=AM({window:r,v5Compat:!0}));let n=i.current,[a,c]=xe.useState({action:n.action,location:n.location}),s=xe.useCallback(p=>{xe.startTransition(()=>c(p))},[c]);return xe.useLayoutEffect(()=>n.listen(s),[n,s]),xe.createElement(rP,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:n})}var qk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ac=xe.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:n,reloadDocument:a,replace:c,state:s,target:p,to:g,preventScrollReset:v,viewTransition:B,...F},C){let{basename:L}=xe.useContext(GA),P=typeof g=="string"&&qk.test(g),D,j=!1;if(typeof g=="string"&&P&&(D=g,Gk))try{let J=new URL(window.location.href),ce=g.startsWith("//")?new URL(J.protocol+g):new URL(g),te=vf(ce.pathname,L);ce.origin===J.origin&&te!=null?g=te+ce.search+ce.hash:j=!0}catch{HA(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=UM(g,{relative:n}),[H,ee,G]=_P(i,F),ne=FP(g,{replace:c,state:s,target:p,preventScrollReset:v,relative:n,viewTransition:B});function Z(J){t&&t(J),J.defaultPrevented||ne(J)}let le=xe.createElement("a",{...F,...G,href:D||q,onClick:j||a?t:Z,ref:BP(C,ee),target:p,"data-discover":!P&&r==="render"?"true":void 0});return H&&!P?xe.createElement(xe.Fragment,null,le,xe.createElement(bP,{page:q})):le});Ac.displayName="Link";var EP=xe.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:n=!1,style:a,to:c,viewTransition:s,children:p,...g},v){let B=Uv(c,{relative:g.relative}),F=sh(),C=xe.useContext(o_),{navigator:L,basename:P}=xe.useContext(GA),D=C!=null&&PP(B)&&s===!0,j=L.encodeLocation?L.encodeLocation(B).pathname:B.pathname,q=F.pathname,H=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;r||(q=q.toLowerCase(),H=H?H.toLowerCase():null,j=j.toLowerCase()),H&&P&&(H=vf(H,P)||H);const ee=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let G=q===j||!n&&q.startsWith(j)&&q.charAt(ee)==="/",ne=H!=null&&(H===j||!n&&H.startsWith(j)&&H.charAt(j.length)==="/"),Z={isActive:G,isPending:ne,isTransitioning:D},le=G?t:void 0,J;typeof i=="function"?J=i(Z):J=[i,G?"active":null,ne?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let ce=typeof a=="function"?a(Z):a;return xe.createElement(Ac,{...g,"aria-current":le,className:J,ref:v,style:ce,to:c,viewTransition:s},typeof p=="function"?p(Z):p)});EP.displayName="NavLink";var TP=xe.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:n,state:a,method:c=Yy,action:s,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:B,...F},C)=>{let L=LP(),P=MP(s,{relative:g}),D=c.toLowerCase()==="get"?"get":"post",j=typeof s=="string"&&qk.test(s),q=H=>{if(p&&p(H),H.defaultPrevented)return;H.preventDefault();let ee=H.nativeEvent.submitter,G=ee?.getAttribute("formmethod")||c;L(ee||H.currentTarget,{fetcherKey:t,method:G,navigate:r,replace:n,state:a,relative:g,preventScrollReset:v,viewTransition:B})};return xe.createElement("form",{ref:C,method:D,action:P,onSubmit:i?p:q,...F,"data-discover":!j&&e==="render"?"true":void 0})});TP.displayName="Form";function kP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kk(e){let t=xe.useContext(dg);return Ia(t,kP(e)),t}function FP(e,{target:t,replace:r,state:i,preventScrollReset:n,relative:a,viewTransition:c}={}){let s=Wo(),p=sh(),g=Uv(e,{relative:a});return xe.useCallback(v=>{if(lP(v,t)){v.preventDefault();let B=r!==void 0?r:dv(p)===dv(g);s(e,{replace:B,state:i,preventScrollReset:n,relative:a,viewTransition:c})}},[p,s,g,r,i,t,e,n,a,c])}var NP=0,IP=()=>`__${String(++NP)}__`;function LP(){let{router:e}=Kk("useSubmit"),{basename:t}=xe.useContext(GA),r=YM();return xe.useCallback(async(i,n={})=>{let{action:a,method:c,encType:s,formData:p,body:g}=hP(i,t);if(n.navigate===!1){let v=n.fetcherKey||IP();await e.fetch(v,r,n.action||a,{preventScrollReset:n.preventScrollReset,formData:p,body:g,formMethod:n.method||c,formEncType:n.encType||s,flushSync:n.flushSync})}else await e.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:p,body:g,formMethod:n.method||c,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,r])}function MP(e,{relative:t}={}){let{basename:r}=xe.useContext(GA),i=xe.useContext(qA);Ia(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),a={...Uv(e||".",{relative:t})},c=sh();if(e==null){a.search=c.search;let s=new URLSearchParams(a.search),p=s.getAll("index");if(p.some(v=>v==="")){s.delete("index"),p.filter(B=>B).forEach(B=>s.append("index",B));let v=s.toString();a.search=v?`?${v}`:""}}return(!e||e===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:ff([r,a.pathname])),dv(a)}function PP(e,{relative:t}={}){let r=xe.useContext(Dk);Ia(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Kk("useViewTransitionState"),n=Uv(e,{relative:t});if(!r.isTransitioning)return!1;let a=vf(r.currentLocation.pathname,i)||r.currentLocation.pathname,c=vf(r.nextLocation.pathname,i)||r.nextLocation.pathname;return _2(n.pathname,c)!=null||_2(n.pathname,a)!=null}function Wk(e,t){return function(){return e.apply(t,arguments)}}const{toString:RP}=Object.prototype,{getPrototypeOf:_4}=Object,{iterator:c_,toStringTag:$k}=Symbol,u_=(e=>t=>{const r=RP.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),KA=e=>(e=e.toLowerCase(),t=>u_(t)===e),h_=e=>t=>typeof t===e,{isArray:pg}=Array,ag=h_("undefined");function Ov(e){return e!==null&&!ag(e)&&e.constructor!==null&&!ag(e.constructor)&&ih(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Xk=KA("ArrayBuffer");function DP(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Xk(e.buffer),t}const jP=h_("string"),ih=h_("function"),Zk=h_("number"),zv=e=>e!==null&&typeof e=="object",UP=e=>e===!0||e===!1,e2=e=>{if(u_(e)!=="object")return!1;const t=_4(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!($k in e)&&!(c_ in e)},OP=e=>{if(!zv(e)||Ov(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},zP=KA("Date"),QP=KA("File"),HP=KA("Blob"),VP=KA("FileList"),GP=e=>zv(e)&&ih(e.pipe),qP=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ih(e.append)&&((t=u_(e))==="formdata"||t==="object"&&ih(e.toString)&&e.toString()==="[object FormData]"))},KP=KA("URLSearchParams"),[WP,$P,XP,ZP]=["ReadableStream","Request","Response","Headers"].map(KA),YP=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qv(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,n;if(typeof e!="object"&&(e=[e]),pg(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{if(Ov(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),c=a.length;let s;for(i=0;i<c;i++)s=a[i],t.call(null,e[s],s,e)}}function Yk(e,t){if(Ov(e))return null;t=t.toLowerCase();const r=Object.keys(e);let i=r.length,n;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const c0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jk=e=>!ag(e)&&e!==c0;function Hw(){const{caseless:e,skipUndefined:t}=Jk(this)&&this||{},r={},i=(n,a)=>{const c=e&&Yk(r,a)||a;e2(r[c])&&e2(n)?r[c]=Hw(r[c],n):e2(n)?r[c]=Hw({},n):pg(n)?r[c]=n.slice():(!t||!ag(n))&&(r[c]=n)};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Qv(arguments[n],i);return r}const JP=(e,t,r,{allOwnKeys:i}={})=>(Qv(t,(n,a)=>{r&&ih(n)?e[a]=Wk(n,r):e[a]=n},{allOwnKeys:i}),e),eR=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tR=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},rR=(e,t,r,i)=>{let n,a,c;const s={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)c=n[a],(!i||i(c,e,t))&&!s[c]&&(t[c]=e[c],s[c]=!0);e=r!==!1&&_4(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},iR=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},nR=e=>{if(!e)return null;if(pg(e))return e;let t=e.length;if(!Zk(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},sR=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_4(Uint8Array)),aR=(e,t)=>{const i=(e&&e[c_]).call(e);let n;for(;(n=i.next())&&!n.done;){const a=n.value;t.call(e,a[0],a[1])}},oR=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},lR=KA("HTMLFormElement"),cR=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,n){return i.toUpperCase()+n}),sB=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),uR=KA("RegExp"),e6=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};Qv(r,(n,a)=>{let c;(c=t(n,a,e))!==!1&&(i[a]=c||n)}),Object.defineProperties(e,i)},hR=e=>{e6(e,(t,r)=>{if(ih(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(ih(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},AR=(e,t)=>{const r={},i=n=>{n.forEach(a=>{r[a]=!0})};return pg(e)?i(e):i(String(e).split(t)),r},dR=()=>{},fR=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pR(e){return!!(e&&ih(e.append)&&e[$k]==="FormData"&&e[c_])}const mR=e=>{const t=new Array(10),r=(i,n)=>{if(zv(i)){if(t.indexOf(i)>=0)return;if(Ov(i))return i;if(!("toJSON"in i)){t[n]=i;const a=pg(i)?[]:{};return Qv(i,(c,s)=>{const p=r(c,n+1);!ag(p)&&(a[s]=p)}),t[n]=void 0,a}}return i};return r(e,0)},gR=KA("AsyncFunction"),vR=e=>e&&(zv(e)||ih(e))&&ih(e.then)&&ih(e.catch),t6=((e,t)=>e?setImmediate:t?((r,i)=>(c0.addEventListener("message",({source:n,data:a})=>{n===c0&&a===r&&i.length&&i.shift()()},!1),n=>{i.push(n),c0.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ih(c0.postMessage)),xR=typeof queueMicrotask<"u"?queueMicrotask.bind(c0):typeof process<"u"&&process.nextTick||t6,yR=e=>e!=null&&ih(e[c_]),hr={isArray:pg,isArrayBuffer:Xk,isBuffer:Ov,isFormData:qP,isArrayBufferView:DP,isString:jP,isNumber:Zk,isBoolean:UP,isObject:zv,isPlainObject:e2,isEmptyObject:OP,isReadableStream:WP,isRequest:$P,isResponse:XP,isHeaders:ZP,isUndefined:ag,isDate:zP,isFile:QP,isBlob:HP,isRegExp:uR,isFunction:ih,isStream:GP,isURLSearchParams:KP,isTypedArray:sR,isFileList:VP,forEach:Qv,merge:Hw,extend:JP,trim:YP,stripBOM:eR,inherits:tR,toFlatObject:rR,kindOf:u_,kindOfTest:KA,endsWith:iR,toArray:nR,forEachEntry:aR,matchAll:oR,isHTMLForm:lR,hasOwnProperty:sB,hasOwnProp:sB,reduceDescriptors:e6,freezeMethods:hR,toObjectSet:AR,toCamelCase:cR,noop:dR,toFiniteNumber:fR,findKey:Yk,global:c0,isContextDefined:Jk,isSpecCompliantForm:pR,toJSONObject:mR,isAsyncFn:gR,isThenable:vR,setImmediate:t6,asap:xR,isIterable:yR};function fn(e,t,r,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n,this.status=n.status?n.status:null)}hr.inherits(fn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:hr.toJSONObject(this.config),code:this.code,status:this.status}}});const r6=fn.prototype,i6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{i6[e]={value:e}});Object.defineProperties(fn,i6);Object.defineProperty(r6,"isAxiosError",{value:!0});fn.from=(e,t,r,i,n,a)=>{const c=Object.create(r6);hr.toFlatObject(e,c,function(v){return v!==Error.prototype},g=>g!=="isAxiosError");const s=e&&e.message?e.message:"Error",p=t==null&&e?e.code:t;return fn.call(c,s,p,r,i,n),e&&c.cause==null&&Object.defineProperty(c,"cause",{value:e,configurable:!0}),c.name=e&&e.name||"Error",a&&Object.assign(c,a),c};const _R=null;function Vw(e){return hr.isPlainObject(e)||hr.isArray(e)}function n6(e){return hr.endsWith(e,"[]")?e.slice(0,-2):e}function aB(e,t,r){return e?e.concat(t).map(function(n,a){return n=n6(n),!r&&a?"["+n+"]":n}).join(r?".":""):t}function bR(e){return hr.isArray(e)&&!e.some(Vw)}const wR=hr.toFlatObject(hr,{},null,function(t){return/^is[A-Z]/.test(t)});function A_(e,t,r){if(!hr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=hr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(P,D){return!hr.isUndefined(D[P])});const i=r.metaTokens,n=r.visitor||v,a=r.dots,c=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&hr.isSpecCompliantForm(t);if(!hr.isFunction(n))throw new TypeError("visitor must be a function");function g(L){if(L===null)return"";if(hr.isDate(L))return L.toISOString();if(hr.isBoolean(L))return L.toString();if(!p&&hr.isBlob(L))throw new fn("Blob is not supported. Use a Buffer instead.");return hr.isArrayBuffer(L)||hr.isTypedArray(L)?p&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function v(L,P,D){let j=L;if(L&&!D&&typeof L=="object"){if(hr.endsWith(P,"{}"))P=i?P:P.slice(0,-2),L=JSON.stringify(L);else if(hr.isArray(L)&&bR(L)||(hr.isFileList(L)||hr.endsWith(P,"[]"))&&(j=hr.toArray(L)))return P=n6(P),j.forEach(function(H,ee){!(hr.isUndefined(H)||H===null)&&t.append(c===!0?aB([P],ee,a):c===null?P:P+"[]",g(H))}),!1}return Vw(L)?!0:(t.append(aB(D,P,a),g(L)),!1)}const B=[],F=Object.assign(wR,{defaultVisitor:v,convertValue:g,isVisitable:Vw});function C(L,P){if(!hr.isUndefined(L)){if(B.indexOf(L)!==-1)throw Error("Circular reference detected in "+P.join("."));B.push(L),hr.forEach(L,function(j,q){(!(hr.isUndefined(j)||j===null)&&n.call(t,j,hr.isString(q)?q.trim():q,P,F))===!0&&C(j,P?P.concat(q):[q])}),B.pop()}}if(!hr.isObject(e))throw new TypeError("data must be an object");return C(e),t}function oB(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function b4(e,t){this._pairs=[],e&&A_(e,this,t)}const s6=b4.prototype;s6.append=function(t,r){this._pairs.push([t,r])};s6.toString=function(t){const r=t?function(i){return t.call(this,i,oB)}:oB;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function CR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function a6(e,t,r){if(!t)return e;const i=r&&r.encode||CR;hr.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let a;if(n?a=n(t,r):a=hr.isURLSearchParams(t)?t.toString():new b4(t,r).toString(i),a){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class lB{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){hr.forEach(this.handlers,function(i){i!==null&&t(i)})}}const o6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BR=typeof URLSearchParams<"u"?URLSearchParams:b4,SR=typeof FormData<"u"?FormData:null,ER=typeof Blob<"u"?Blob:null,TR={isBrowser:!0,classes:{URLSearchParams:BR,FormData:SR,Blob:ER},protocols:["http","https","file","blob","url","data"]},w4=typeof window<"u"&&typeof document<"u",Gw=typeof navigator=="object"&&navigator||void 0,kR=w4&&(!Gw||["ReactNative","NativeScript","NS"].indexOf(Gw.product)<0),FR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NR=w4&&window.location.href||"http://localhost",IR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:w4,hasStandardBrowserEnv:kR,hasStandardBrowserWebWorkerEnv:FR,navigator:Gw,origin:NR},Symbol.toStringTag,{value:"Module"})),Wc={...IR,...TR};function LR(e,t){return A_(e,new Wc.classes.URLSearchParams,{visitor:function(r,i,n,a){return Wc.isNode&&hr.isBuffer(r)?(this.append(i,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function MR(e){return hr.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function PR(e){const t={},r=Object.keys(e);let i;const n=r.length;let a;for(i=0;i<n;i++)a=r[i],t[a]=e[a];return t}function l6(e){function t(r,i,n,a){let c=r[a++];if(c==="__proto__")return!0;const s=Number.isFinite(+c),p=a>=r.length;return c=!c&&hr.isArray(n)?n.length:c,p?(hr.hasOwnProp(n,c)?n[c]=[n[c],i]:n[c]=i,!s):((!n[c]||!hr.isObject(n[c]))&&(n[c]=[]),t(r,i,n[c],a)&&hr.isArray(n[c])&&(n[c]=PR(n[c])),!s)}if(hr.isFormData(e)&&hr.isFunction(e.entries)){const r={};return hr.forEachEntry(e,(i,n)=>{t(MR(i),n,r,0)}),r}return null}function RR(e,t,r){if(hr.isString(e))try{return(t||JSON.parse)(e),hr.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const Hv={transitional:o6,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const i=r.getContentType()||"",n=i.indexOf("application/json")>-1,a=hr.isObject(t);if(a&&hr.isHTMLForm(t)&&(t=new FormData(t)),hr.isFormData(t))return n?JSON.stringify(l6(t)):t;if(hr.isArrayBuffer(t)||hr.isBuffer(t)||hr.isStream(t)||hr.isFile(t)||hr.isBlob(t)||hr.isReadableStream(t))return t;if(hr.isArrayBufferView(t))return t.buffer;if(hr.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return LR(t,this.formSerializer).toString();if((s=hr.isFileList(t))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return A_(s?{"files[]":t}:t,p&&new p,this.formSerializer)}}return a||n?(r.setContentType("application/json",!1),RR(t)):t}],transformResponse:[function(t){const r=this.transitional||Hv.transitional,i=r&&r.forcedJSONParsing,n=this.responseType==="json";if(hr.isResponse(t)||hr.isReadableStream(t))return t;if(t&&hr.isString(t)&&(i&&!this.responseType||n)){const c=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(s){if(c)throw s.name==="SyntaxError"?fn.from(s,fn.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wc.classes.FormData,Blob:Wc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};hr.forEach(["delete","get","head","post","put","patch"],e=>{Hv.headers[e]={}});const DR=hr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jR=e=>{const t={};let r,i,n;return e&&e.split(`
`).forEach(function(c){n=c.indexOf(":"),r=c.substring(0,n).trim().toLowerCase(),i=c.substring(n+1).trim(),!(!r||t[r]&&DR[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},cB=Symbol("internals");function m1(e){return e&&String(e).trim().toLowerCase()}function t2(e){return e===!1||e==null?e:hr.isArray(e)?e.map(t2):String(e)}function UR(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const OR=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vb(e,t,r,i,n){if(hr.isFunction(i))return i.call(this,t,r);if(n&&(t=r),!!hr.isString(t)){if(hr.isString(i))return t.indexOf(i)!==-1;if(hr.isRegExp(i))return i.test(t)}}function zR(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function QR(e,t){const r=hr.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(n,a,c){return this[i].call(this,t,n,a,c)},configurable:!0})})}let nh=class{constructor(t){t&&this.set(t)}set(t,r,i){const n=this;function a(s,p,g){const v=m1(p);if(!v)throw new Error("header name must be a non-empty string");const B=hr.findKey(n,v);(!B||n[B]===void 0||g===!0||g===void 0&&n[B]!==!1)&&(n[B||p]=t2(s))}const c=(s,p)=>hr.forEach(s,(g,v)=>a(g,v,p));if(hr.isPlainObject(t)||t instanceof this.constructor)c(t,r);else if(hr.isString(t)&&(t=t.trim())&&!OR(t))c(jR(t),r);else if(hr.isObject(t)&&hr.isIterable(t)){let s={},p,g;for(const v of t){if(!hr.isArray(v))throw TypeError("Object iterator must return a key-value pair");s[g=v[0]]=(p=s[g])?hr.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}c(s,r)}else t!=null&&a(r,t,i);return this}get(t,r){if(t=m1(t),t){const i=hr.findKey(this,t);if(i){const n=this[i];if(!r)return n;if(r===!0)return UR(n);if(hr.isFunction(r))return r.call(this,n,i);if(hr.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=m1(t),t){const i=hr.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||vb(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let n=!1;function a(c){if(c=m1(c),c){const s=hr.findKey(i,c);s&&(!r||vb(i,i[s],s,r))&&(delete i[s],n=!0)}}return hr.isArray(t)?t.forEach(a):a(t),n}clear(t){const r=Object.keys(this);let i=r.length,n=!1;for(;i--;){const a=r[i];(!t||vb(this,this[a],a,t,!0))&&(delete this[a],n=!0)}return n}normalize(t){const r=this,i={};return hr.forEach(this,(n,a)=>{const c=hr.findKey(i,a);if(c){r[c]=t2(n),delete r[a];return}const s=t?zR(a):String(a).trim();s!==a&&delete r[a],r[s]=t2(n),i[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return hr.forEach(this,(i,n)=>{i!=null&&i!==!1&&(r[n]=t&&hr.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(n=>i.set(n)),i}static accessor(t){const i=(this[cB]=this[cB]={accessors:{}}).accessors,n=this.prototype;function a(c){const s=m1(c);i[s]||(QR(n,c),i[s]=!0)}return hr.isArray(t)?t.forEach(a):a(t),this}};nh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);hr.reduceDescriptors(nh.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[r]=i}}});hr.freezeMethods(nh);function xb(e,t){const r=this||Hv,i=t||r,n=nh.from(i.headers);let a=i.data;return hr.forEach(e,function(s){a=s.call(r,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function c6(e){return!!(e&&e.__CANCEL__)}function mg(e,t,r){fn.call(this,e??"canceled",fn.ERR_CANCELED,t,r),this.name="CanceledError"}hr.inherits(mg,fn,{__CANCEL__:!0});function u6(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new fn("Request failed with status code "+r.status,[fn.ERR_BAD_REQUEST,fn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function HR(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function VR(e,t){e=e||10;const r=new Array(e),i=new Array(e);let n=0,a=0,c;return t=t!==void 0?t:1e3,function(p){const g=Date.now(),v=i[a];c||(c=g),r[n]=p,i[n]=g;let B=a,F=0;for(;B!==n;)F+=r[B++],B=B%e;if(n=(n+1)%e,n===a&&(a=(a+1)%e),g-c<t)return;const C=v&&g-v;return C?Math.round(F*1e3/C):void 0}}function GR(e,t){let r=0,i=1e3/t,n,a;const c=(g,v=Date.now())=>{r=v,n=null,a&&(clearTimeout(a),a=null),e(...g)};return[(...g)=>{const v=Date.now(),B=v-r;B>=i?c(g,v):(n=g,a||(a=setTimeout(()=>{a=null,c(n)},i-B)))},()=>n&&c(n)]}const b2=(e,t,r=3)=>{let i=0;const n=VR(50,250);return GR(a=>{const c=a.loaded,s=a.lengthComputable?a.total:void 0,p=c-i,g=n(p),v=c<=s;i=c;const B={loaded:c,total:s,progress:s?c/s:void 0,bytes:p,rate:g||void 0,estimated:g&&s&&v?(s-c)/g:void 0,event:a,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(B)},r)},uB=(e,t)=>{const r=e!=null;return[i=>t[0]({lengthComputable:r,total:e,loaded:i}),t[1]]},hB=e=>(...t)=>hr.asap(()=>e(...t)),qR=Wc.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Wc.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Wc.origin),Wc.navigator&&/(msie|trident)/i.test(Wc.navigator.userAgent)):()=>!0,KR=Wc.hasStandardBrowserEnv?{write(e,t,r,i,n,a){const c=[e+"="+encodeURIComponent(t)];hr.isNumber(r)&&c.push("expires="+new Date(r).toGMTString()),hr.isString(i)&&c.push("path="+i),hr.isString(n)&&c.push("domain="+n),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WR(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $R(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function h6(e,t,r){let i=!WR(t);return e&&(i||r==!1)?$R(e,t):t}const AB=e=>e instanceof nh?{...e}:e;function w0(e,t){t=t||{};const r={};function i(g,v,B,F){return hr.isPlainObject(g)&&hr.isPlainObject(v)?hr.merge.call({caseless:F},g,v):hr.isPlainObject(v)?hr.merge({},v):hr.isArray(v)?v.slice():v}function n(g,v,B,F){if(hr.isUndefined(v)){if(!hr.isUndefined(g))return i(void 0,g,B,F)}else return i(g,v,B,F)}function a(g,v){if(!hr.isUndefined(v))return i(void 0,v)}function c(g,v){if(hr.isUndefined(v)){if(!hr.isUndefined(g))return i(void 0,g)}else return i(void 0,v)}function s(g,v,B){if(B in t)return i(g,v);if(B in e)return i(void 0,g)}const p={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:s,headers:(g,v,B)=>n(AB(g),AB(v),B,!0)};return hr.forEach(Object.keys({...e,...t}),function(v){const B=p[v]||n,F=B(e[v],t[v],v);hr.isUndefined(F)&&B!==s||(r[v]=F)}),r}const A6=e=>{const t=w0({},e);let{data:r,withXSRFToken:i,xsrfHeaderName:n,xsrfCookieName:a,headers:c,auth:s}=t;if(t.headers=c=nh.from(c),t.url=a6(h6(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&c.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),hr.isFormData(r)){if(Wc.hasStandardBrowserEnv||Wc.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(hr.isFunction(r.getHeaders)){const p=r.getHeaders(),g=["content-type","content-length"];Object.entries(p).forEach(([v,B])=>{g.includes(v.toLowerCase())&&c.set(v,B)})}}if(Wc.hasStandardBrowserEnv&&(i&&hr.isFunction(i)&&(i=i(t)),i||i!==!1&&qR(t.url))){const p=n&&a&&KR.read(a);p&&c.set(n,p)}return t},XR=typeof XMLHttpRequest<"u",ZR=XR&&function(e){return new Promise(function(r,i){const n=A6(e);let a=n.data;const c=nh.from(n.headers).normalize();let{responseType:s,onUploadProgress:p,onDownloadProgress:g}=n,v,B,F,C,L;function P(){C&&C(),L&&L(),n.cancelToken&&n.cancelToken.unsubscribe(v),n.signal&&n.signal.removeEventListener("abort",v)}let D=new XMLHttpRequest;D.open(n.method.toUpperCase(),n.url,!0),D.timeout=n.timeout;function j(){if(!D)return;const H=nh.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),G={data:!s||s==="text"||s==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:H,config:e,request:D};u6(function(Z){r(Z),P()},function(Z){i(Z),P()},G),D=null}"onloadend"in D?D.onloadend=j:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(j)},D.onabort=function(){D&&(i(new fn("Request aborted",fn.ECONNABORTED,e,D)),D=null)},D.onerror=function(ee){const G=ee&&ee.message?ee.message:"Network Error",ne=new fn(G,fn.ERR_NETWORK,e,D);ne.event=ee||null,i(ne),D=null},D.ontimeout=function(){let ee=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const G=n.transitional||o6;n.timeoutErrorMessage&&(ee=n.timeoutErrorMessage),i(new fn(ee,G.clarifyTimeoutError?fn.ETIMEDOUT:fn.ECONNABORTED,e,D)),D=null},a===void 0&&c.setContentType(null),"setRequestHeader"in D&&hr.forEach(c.toJSON(),function(ee,G){D.setRequestHeader(G,ee)}),hr.isUndefined(n.withCredentials)||(D.withCredentials=!!n.withCredentials),s&&s!=="json"&&(D.responseType=n.responseType),g&&([F,L]=b2(g,!0),D.addEventListener("progress",F)),p&&D.upload&&([B,C]=b2(p),D.upload.addEventListener("progress",B),D.upload.addEventListener("loadend",C)),(n.cancelToken||n.signal)&&(v=H=>{D&&(i(!H||H.type?new mg(null,e,D):H),D.abort(),D=null)},n.cancelToken&&n.cancelToken.subscribe(v),n.signal&&(n.signal.aborted?v():n.signal.addEventListener("abort",v)));const q=HR(n.url);if(q&&Wc.protocols.indexOf(q)===-1){i(new fn("Unsupported protocol "+q+":",fn.ERR_BAD_REQUEST,e));return}D.send(a||null)})},YR=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let i=new AbortController,n;const a=function(g){if(!n){n=!0,s();const v=g instanceof Error?g:this.reason;i.abort(v instanceof fn?v:new mg(v instanceof Error?v.message:v))}};let c=t&&setTimeout(()=>{c=null,a(new fn(`timeout ${t} of ms exceeded`,fn.ETIMEDOUT))},t);const s=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(a):g.removeEventListener("abort",a)}),e=null)};e.forEach(g=>g.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>hr.asap(s),p}},JR=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let i=0,n;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},eD=async function*(e,t){for await(const r of tD(e))yield*JR(r,t)},tD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:i}=await t.read();if(r)break;yield i}}finally{await t.cancel()}},dB=(e,t,r,i)=>{const n=eD(e,t);let a=0,c,s=p=>{c||(c=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:g,value:v}=await n.next();if(g){s(),p.close();return}let B=v.byteLength;if(r){let F=a+=B;r(F)}p.enqueue(new Uint8Array(v))}catch(g){throw s(g),g}},cancel(p){return s(p),n.return()}},{highWaterMark:2})},fB=64*1024,{isFunction:Vx}=hr,rD=(({Request:e,Response:t})=>({Request:e,Response:t}))(hr.global),{ReadableStream:pB,TextEncoder:mB}=hr.global,gB=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iD=e=>{e=hr.merge.call({skipUndefined:!0},rD,e);const{fetch:t,Request:r,Response:i}=e,n=t?Vx(t):typeof fetch=="function",a=Vx(r),c=Vx(i);if(!n)return!1;const s=n&&Vx(pB),p=n&&(typeof mB=="function"?(L=>P=>L.encode(P))(new mB):async L=>new Uint8Array(await new r(L).arrayBuffer())),g=a&&s&&gB(()=>{let L=!1;const P=new r(Wc.origin,{body:new pB,method:"POST",get duplex(){return L=!0,"half"}}).headers.has("Content-Type");return L&&!P}),v=c&&s&&gB(()=>hr.isReadableStream(new i("").body)),B={stream:v&&(L=>L.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(L=>{!B[L]&&(B[L]=(P,D)=>{let j=P&&P[L];if(j)return j.call(P);throw new fn(`Response type '${L}' is not supported`,fn.ERR_NOT_SUPPORT,D)})});const F=async L=>{if(L==null)return 0;if(hr.isBlob(L))return L.size;if(hr.isSpecCompliantForm(L))return(await new r(Wc.origin,{method:"POST",body:L}).arrayBuffer()).byteLength;if(hr.isArrayBufferView(L)||hr.isArrayBuffer(L))return L.byteLength;if(hr.isURLSearchParams(L)&&(L=L+""),hr.isString(L))return(await p(L)).byteLength},C=async(L,P)=>{const D=hr.toFiniteNumber(L.getContentLength());return D??F(P)};return async L=>{let{url:P,method:D,data:j,signal:q,cancelToken:H,timeout:ee,onDownloadProgress:G,onUploadProgress:ne,responseType:Z,headers:le,withCredentials:J="same-origin",fetchOptions:ce}=A6(L),te=t||fetch;Z=Z?(Z+"").toLowerCase():"text";let K=YR([q,H&&H.toAbortSignal()],ee),me=null;const we=K&&K.unsubscribe&&(()=>{K.unsubscribe()});let Fe;try{if(ne&&g&&D!=="get"&&D!=="head"&&(Fe=await C(le,j))!==0){let Ge=new r(P,{method:"POST",body:j,duplex:"half"}),Y;if(hr.isFormData(j)&&(Y=Ge.headers.get("content-type"))&&le.setContentType(Y),Ge.body){const[Ae,fe]=uB(Fe,b2(hB(ne)));j=dB(Ge.body,fB,Ae,fe)}}hr.isString(J)||(J=J?"include":"omit");const he=a&&"credentials"in r.prototype,Le={...ce,signal:K,method:D.toUpperCase(),headers:le.normalize().toJSON(),body:j,duplex:"half",credentials:he?J:void 0};me=a&&new r(P,Le);let $e=await(a?te(me,ce):te(P,Le));const Ne=v&&(Z==="stream"||Z==="response");if(v&&(G||Ne&&we)){const Ge={};["status","statusText","headers"].forEach(be=>{Ge[be]=$e[be]});const Y=hr.toFiniteNumber($e.headers.get("content-length")),[Ae,fe]=G&&uB(Y,b2(hB(G),!0))||[];$e=new i(dB($e.body,fB,Ae,()=>{fe&&fe(),we&&we()}),Ge)}Z=Z||"text";let Te=await B[hr.findKey(B,Z)||"text"]($e,L);return!Ne&&we&&we(),await new Promise((Ge,Y)=>{u6(Ge,Y,{data:Te,headers:nh.from($e.headers),status:$e.status,statusText:$e.statusText,config:L,request:me})})}catch(he){throw we&&we(),he&&he.name==="TypeError"&&/Load failed|fetch/i.test(he.message)?Object.assign(new fn("Network Error",fn.ERR_NETWORK,L,me),{cause:he.cause||he}):fn.from(he,he&&he.code,L,me)}}},nD=new Map,d6=e=>{let t=e?e.env:{};const{fetch:r,Request:i,Response:n}=t,a=[i,n,r];let c=a.length,s=c,p,g,v=nD;for(;s--;)p=a[s],g=v.get(p),g===void 0&&v.set(p,g=s?new Map:iD(t)),v=g;return g};d6();const qw={http:_R,xhr:ZR,fetch:{get:d6}};hr.forEach(qw,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const vB=e=>`- ${e}`,sD=e=>hr.isFunction(e)||e===null||e===!1,f6={getAdapter:(e,t)=>{e=hr.isArray(e)?e:[e];const{length:r}=e;let i,n;const a={};for(let c=0;c<r;c++){i=e[c];let s;if(n=i,!sD(i)&&(n=qw[(s=String(i)).toLowerCase()],n===void 0))throw new fn(`Unknown adapter '${s}'`);if(n&&(hr.isFunction(n)||(n=n.get(t))))break;a[s||"#"+c]=n}if(!n){const c=Object.entries(a).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let s=r?c.length>1?`since :
`+c.map(vB).join(`
`):" "+vB(c[0]):"as no adapter specified";throw new fn("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:qw};function yb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mg(null,e)}function xB(e){return yb(e),e.headers=nh.from(e.headers),e.data=xb.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),f6.getAdapter(e.adapter||Hv.adapter,e)(e).then(function(i){return yb(e),i.data=xb.call(e,e.transformResponse,i),i.headers=nh.from(i.headers),i},function(i){return c6(i)||(yb(e),i&&i.response&&(i.response.data=xb.call(e,e.transformResponse,i.response),i.response.headers=nh.from(i.response.headers))),Promise.reject(i)})}const p6="1.12.2",d_={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{d_[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const yB={};d_.transitional=function(t,r,i){function n(a,c){return"[Axios v"+p6+"] Transitional option '"+a+"'"+c+(i?". "+i:"")}return(a,c,s)=>{if(t===!1)throw new fn(n(c," has been removed"+(r?" in "+r:"")),fn.ERR_DEPRECATED);return r&&!yB[c]&&(yB[c]=!0,console.warn(n(c," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,c,s):!0}};d_.spelling=function(t){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function aD(e,t,r){if(typeof e!="object")throw new fn("options must be an object",fn.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let n=i.length;for(;n-- >0;){const a=i[n],c=t[a];if(c){const s=e[a],p=s===void 0||c(s,a,e);if(p!==!0)throw new fn("option "+a+" must be "+p,fn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new fn("Unknown option "+a,fn.ERR_BAD_OPTION)}}const r2={assertOptions:aD,validators:d_},dd=r2.validators;let f0=class{constructor(t){this.defaults=t||{},this.interceptors={request:new lB,response:new lB}}async request(t,r){try{return await this._request(t,r)}catch(i){if(i instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=w0(this.defaults,r);const{transitional:i,paramsSerializer:n,headers:a}=r;i!==void 0&&r2.assertOptions(i,{silentJSONParsing:dd.transitional(dd.boolean),forcedJSONParsing:dd.transitional(dd.boolean),clarifyTimeoutError:dd.transitional(dd.boolean)},!1),n!=null&&(hr.isFunction(n)?r.paramsSerializer={serialize:n}:r2.assertOptions(n,{encode:dd.function,serialize:dd.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),r2.assertOptions(r,{baseUrl:dd.spelling("baseURL"),withXsrfToken:dd.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let c=a&&hr.merge(a.common,a[r.method]);a&&hr.forEach(["delete","get","head","post","put","patch","common"],L=>{delete a[L]}),r.headers=nh.concat(c,a);const s=[];let p=!0;this.interceptors.request.forEach(function(P){typeof P.runWhen=="function"&&P.runWhen(r)===!1||(p=p&&P.synchronous,s.unshift(P.fulfilled,P.rejected))});const g=[];this.interceptors.response.forEach(function(P){g.push(P.fulfilled,P.rejected)});let v,B=0,F;if(!p){const L=[xB.bind(this),void 0];for(L.unshift(...s),L.push(...g),F=L.length,v=Promise.resolve(r);B<F;)v=v.then(L[B++],L[B++]);return v}F=s.length;let C=r;for(;B<F;){const L=s[B++],P=s[B++];try{C=L(C)}catch(D){P.call(this,D);break}}try{v=xB.call(this,C)}catch(L){return Promise.reject(L)}for(B=0,F=g.length;B<F;)v=v.then(g[B++],g[B++]);return v}getUri(t){t=w0(this.defaults,t);const r=h6(t.baseURL,t.url,t.allowAbsoluteUrls);return a6(r,t.params,t.paramsSerializer)}};hr.forEach(["delete","get","head","options"],function(t){f0.prototype[t]=function(r,i){return this.request(w0(i||{},{method:t,url:r,data:(i||{}).data}))}});hr.forEach(["post","put","patch"],function(t){function r(i){return function(a,c,s){return this.request(w0(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}f0.prototype[t]=r(),f0.prototype[t+"Form"]=r(!0)});let oD=class m6{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const i=this;this.promise.then(n=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](n);i._listeners=null}),this.promise.then=n=>{let a;const c=new Promise(s=>{i.subscribe(s),a=s}).then(n);return c.cancel=function(){i.unsubscribe(a)},c},t(function(a,c,s){i.reason||(i.reason=new mg(a,c,s),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=i=>{t.abort(i)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new m6(function(n){t=n}),cancel:t}}};function lD(e){return function(r){return e.apply(null,r)}}function cD(e){return hr.isObject(e)&&e.isAxiosError===!0}const Kw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kw).forEach(([e,t])=>{Kw[t]=e});function g6(e){const t=new f0(e),r=Wk(f0.prototype.request,t);return hr.extend(r,f0.prototype,t,{allOwnKeys:!0}),hr.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return g6(w0(e,n))},r}const Eo=g6(Hv);Eo.Axios=f0;Eo.CanceledError=mg;Eo.CancelToken=oD;Eo.isCancel=c6;Eo.VERSION=p6;Eo.toFormData=A_;Eo.AxiosError=fn;Eo.Cancel=Eo.CanceledError;Eo.all=function(t){return Promise.all(t)};Eo.spread=lD;Eo.isAxiosError=cD;Eo.mergeConfig=w0;Eo.AxiosHeaders=nh;Eo.formToJSON=e=>l6(hr.isHTMLForm(e)?new FormData(e):e);Eo.getAdapter=f6.getAdapter;Eo.HttpStatusCode=Kw;Eo.default=Eo;const{Axios:Lle,AxiosError:Mle,CanceledError:Ple,isCancel:Rle,CancelToken:Dle,VERSION:jle,all:Ule,Cancel:Ole,isAxiosError:zle,spread:Qle,toFormData:Hle,AxiosHeaders:Vle,HttpStatusCode:Gle,formToJSON:qle,getAdapter:Kle,mergeConfig:Wle}=Eo,Bd=Object.create(null);Bd.open="0";Bd.close="1";Bd.ping="2";Bd.pong="3";Bd.message="4";Bd.upgrade="5";Bd.noop="6";const i2=Object.create(null);Object.keys(Bd).forEach(e=>{i2[Bd[e]]=e});const Ww={type:"error",data:"parser error"},v6=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",x6=typeof ArrayBuffer=="function",y6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,C4=({type:e,data:t},r,i)=>v6&&t instanceof Blob?r?i(t):_B(t,i):x6&&(t instanceof ArrayBuffer||y6(t))?r?i(t):_B(new Blob([t]),i):i(Bd[e]+(t||"")),_B=(e,t)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];t("b"+(i||""))},r.readAsDataURL(e)};function bB(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let _b;function uD(e,t){if(v6&&e.data instanceof Blob)return e.data.arrayBuffer().then(bB).then(t);if(x6&&(e.data instanceof ArrayBuffer||y6(e.data)))return t(bB(e.data));C4(e,!1,r=>{_b||(_b=new TextEncoder),t(_b.encode(r))})}const wB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<wB.length;e++)N1[wB.charCodeAt(e)]=e;const hD=e=>{let t=e.length*.75,r=e.length,i,n=0,a,c,s,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const g=new ArrayBuffer(t),v=new Uint8Array(g);for(i=0;i<r;i+=4)a=N1[e.charCodeAt(i)],c=N1[e.charCodeAt(i+1)],s=N1[e.charCodeAt(i+2)],p=N1[e.charCodeAt(i+3)],v[n++]=a<<2|c>>4,v[n++]=(c&15)<<4|s>>2,v[n++]=(s&3)<<6|p&63;return g},AD=typeof ArrayBuffer=="function",B4=(e,t)=>{if(typeof e!="string")return{type:"message",data:_6(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:dD(e.substring(1),t)}:i2[r]?e.length>1?{type:i2[r],data:e.substring(1)}:{type:i2[r]}:Ww},dD=(e,t)=>{if(AD){const r=hD(e);return _6(r,t)}else return{base64:!0,data:e}},_6=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},b6="",fD=(e,t)=>{const r=e.length,i=new Array(r);let n=0;e.forEach((a,c)=>{C4(a,!1,s=>{i[c]=s,++n===r&&t(i.join(b6))})})},pD=(e,t)=>{const r=e.split(b6),i=[];for(let n=0;n<r.length;n++){const a=B4(r[n],t);if(i.push(a),a.type==="error")break}return i};function mD(){return new TransformStream({transform(e,t){uD(e,r=>{const i=r.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const a=new DataView(n.buffer);a.setUint8(0,126),a.setUint16(1,i)}else{n=new Uint8Array(9);const a=new DataView(n.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let bb;function Gx(e){return e.reduce((t,r)=>t+r.length,0)}function qx(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function gD(e,t){bb||(bb=new TextDecoder);const r=[];let i=0,n=-1,a=!1;return new TransformStream({transform(c,s){for(r.push(c);;){if(i===0){if(Gx(r)<1)break;const p=qx(r,1);a=(p[0]&128)===128,n=p[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(Gx(r)<2)break;const p=qx(r,2);n=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),i=3}else if(i===2){if(Gx(r)<8)break;const p=qx(r,8),g=new DataView(p.buffer,p.byteOffset,p.length),v=g.getUint32(0);if(v>Math.pow(2,21)-1){s.enqueue(Ww);break}n=v*Math.pow(2,32)+g.getUint32(4),i=3}else{if(Gx(r)<n)break;const p=qx(r,n);s.enqueue(B4(a?p:bb.decode(p),t)),i=0}if(n===0||n>e){s.enqueue(Ww);break}}}})}const w6=4;function Ko(e){if(e)return vD(e)}function vD(e){for(var t in Ko.prototype)e[t]=Ko.prototype[t];return e}Ko.prototype.on=Ko.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ko.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Ko.prototype.off=Ko.prototype.removeListener=Ko.prototype.removeAllListeners=Ko.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===t||i.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Ko.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,t)}return this};Ko.prototype.emitReserved=Ko.prototype.emit;Ko.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ko.prototype.hasListeners=function(e){return!!this.listeners(e).length};const f_=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Jh=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),xD="arraybuffer";function C6(e,...t){return t.reduce((r,i)=>(e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}const yD=Jh.setTimeout,_D=Jh.clearTimeout;function p_(e,t){t.useNativeTimers?(e.setTimeoutFn=yD.bind(Jh),e.clearTimeoutFn=_D.bind(Jh)):(e.setTimeoutFn=Jh.setTimeout.bind(Jh),e.clearTimeoutFn=Jh.clearTimeout.bind(Jh))}const bD=1.33;function wD(e){return typeof e=="string"?CD(e):Math.ceil((e.byteLength||e.size)*bD)}function CD(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function B6(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function BD(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function SD(e){let t={},r=e.split("&");for(let i=0,n=r.length;i<n;i++){let a=r[i].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class ED extends Error{constructor(t,r,i){super(t),this.description=r,this.context=i,this.type="TransportError"}}class S4 extends Ko{constructor(t){super(),this.writable=!1,p_(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,i){return super.emitReserved("error",new ED(t,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=B4(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=BD(t);return r.length?"?"+r:""}}class TD extends S4{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};pD(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,fD(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=B6()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let S6=!1;try{S6=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const kD=S6;function FD(){}class ND extends TD{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,r){const i=this.request({method:"POST",data:t});i.on("success",r),i.on("error",(n,a)=>{this.onError("xhr post error",n,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=t}}let qm=class n2 extends Ko{constructor(t,r,i){super(),this.createRequest=t,p_(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const r=C6(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=n2.requestsCount++,n2.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=FD,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete n2.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};qm.requestsCount=0;qm.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",CB);else if(typeof addEventListener=="function"){const e="onpagehide"in Jh?"pagehide":"unload";addEventListener(e,CB,!1)}}function CB(){for(let e in qm.requests)qm.requests.hasOwnProperty(e)&&qm.requests[e].abort()}const ID=function(){const e=E6({xdomain:!1});return e&&e.responseType!==null}();class LD extends ND{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=ID&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new qm(E6,this.uri(),t)}}function E6(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||kD))return new XMLHttpRequest}catch{}if(!t)try{return new Jh[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const T6=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class MD extends S4{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,i=T6?{}:C6(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;C4(i,this.supportsBinary,a=>{try{this.doWrite(i,a)}catch{}n&&f_(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=B6()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const wb=Jh.WebSocket||Jh.MozWebSocket;class PD extends MD{createSocket(t,r,i){return T6?new wb(t,r,i):r?new wb(t,r):new wb(t)}doWrite(t,r){this.ws.send(r)}}class RD extends S4{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=gD(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),n=mD();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const a=()=>{i.read().then(({done:s,value:p})=>{s||(this.onPacket(p),a())}).catch(s=>{})};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;this._writer.write(i).then(()=>{n&&f_(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const DD={websocket:PD,webtransport:RD,polling:LD},jD=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,UD=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function $w(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");r!=-1&&i!=-1&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let n=jD.exec(e||""),a={},c=14;for(;c--;)a[UD[c]]=n[c]||"";return r!=-1&&i!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=OD(a,a.path),a.queryKey=zD(a,a.query),a}function OD(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function zD(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,a){n&&(r[n]=a)}),r}const Xw=typeof addEventListener=="function"&&typeof removeEventListener=="function",s2=[];Xw&&addEventListener("offline",()=>{s2.forEach(e=>e())},!1);class mp extends Ko{constructor(t,r){if(super(),this.binaryType=xD,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const i=$w(t);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=$w(r.host).host);p_(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=SD(this.opts.query)),Xw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},s2.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=w6,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&mp.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",mp.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(r+=wD(n)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,f_(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,i){return this._sendPacket("message",t,r,i),this}send(t,r,i){return this._sendPacket("message",t,r,i),this}_sendPacket(t,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const a={type:t,data:r,options:i};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(mp.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Xw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=s2.indexOf(this._offlineEventListener);i!==-1&&s2.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}mp.protocol=w6;class QD extends mp{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),i=!1;mp.priorWebsocketSuccess=!1;const n=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",B=>{if(!i)if(B.type==="pong"&&B.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;mp.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const F=new Error("probe error");F.transport=r.name,this.emitReserved("upgradeError",F)}}))};function a(){i||(i=!0,v(),r.close(),r=null)}const c=B=>{const F=new Error("probe error: "+B);F.transport=r.name,a(),this.emitReserved("upgradeError",F)};function s(){c("transport closed")}function p(){c("socket closed")}function g(B){r&&B.name!==r.name&&a()}const v=()=>{r.removeListener("open",n),r.removeListener("error",c),r.removeListener("close",s),this.off("close",p),this.off("upgrading",g)};r.once("open",n),r.once("error",c),r.once("close",s),this.once("close",p),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}}let HD=class extends QD{constructor(t,r={}){const i=typeof t=="object"?t:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>DD[n]).filter(n=>!!n)),super(t,i)}};function VD(e,t="",r){let i=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),i=$w(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const a=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+a+":"+i.port+t,i.href=i.protocol+"://"+a+(r&&r.port===i.port?"":":"+i.port),i}const GD=typeof ArrayBuffer=="function",qD=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,k6=Object.prototype.toString,KD=typeof Blob=="function"||typeof Blob<"u"&&k6.call(Blob)==="[object BlobConstructor]",WD=typeof File=="function"||typeof File<"u"&&k6.call(File)==="[object FileConstructor]";function E4(e){return GD&&(e instanceof ArrayBuffer||qD(e))||KD&&e instanceof Blob||WD&&e instanceof File}function a2(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,i=e.length;r<i;r++)if(a2(e[r]))return!0;return!1}if(E4(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return a2(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&a2(e[r]))return!0;return!1}function $D(e){const t=[],r=e.data,i=e;return i.data=Zw(r,t),i.attachments=t.length,{packet:i,buffers:t}}function Zw(e,t){if(!e)return e;if(E4(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=Zw(e[i],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Zw(e[i],t));return r}return e}function XD(e,t){return e.data=Yw(e.data,t),delete e.attachments,e}function Yw(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Yw(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Yw(e[r],t));return e}const ZD=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],YD=5;var qn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(qn||(qn={}));class JD{constructor(t){this.replacer=t}encode(t){return(t.type===qn.EVENT||t.type===qn.ACK)&&a2(t)?this.encodeAsBinary({type:t.type===qn.EVENT?qn.BINARY_EVENT:qn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===qn.BINARY_EVENT||t.type===qn.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=$D(t),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}}function BB(e){return Object.prototype.toString.call(e)==="[object Object]"}class T4 extends Ko{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const i=r.type===qn.BINARY_EVENT;i||r.type===qn.BINARY_ACK?(r.type=i?qn.EVENT:qn.ACK,this.reconstructor=new ej(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(E4(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const i={type:Number(t.charAt(0))};if(qn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===qn.BINARY_EVENT||i.type===qn.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const c=t.substring(a,r);if(c!=Number(c)||t.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(c)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););i.nsp=t.substring(a,r)}else i.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const a=r+1;for(;++r;){const c=t.charAt(r);if(c==null||Number(c)!=c){--r;break}if(r===t.length)break}i.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(T4.isPayloadValid(i.type,a))i.data=a;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case qn.CONNECT:return BB(r);case qn.DISCONNECT:return r===void 0;case qn.CONNECT_ERROR:return typeof r=="string"||BB(r);case qn.EVENT:case qn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&ZD.indexOf(r[0])===-1);case qn.ACK:case qn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ej{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=XD(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const tj=Object.freeze(Object.defineProperty({__proto__:null,Decoder:T4,Encoder:JD,get PacketType(){return qn},protocol:YD},Symbol.toStringTag,{value:"Module"}));function jA(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const rj=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class F6 extends Ko{constructor(t,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[jA(t,"open",this.onopen.bind(this)),jA(t,"packet",this.onpacket.bind(this)),jA(t,"error",this.onerror.bind(this)),jA(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var i,n,a;if(rj.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const c={type:qn.EVENT,data:r};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,B=r.pop();this._registerAckCallback(v,B),c.id=v}const s=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,p=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!s||(p?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,r){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===t&&this.sendBuffer.splice(s,1);r.call(this,new Error("operation has timed out"))},n),c=(...s)=>{this.io.clearTimeoutFn(a),r.apply(this,s)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...r){return new Promise((i,n)=>{const a=(c,s)=>c?n(c):i(s);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...a)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...a)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:qn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case qn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case qn.EVENT:case qn.BINARY_EVENT:this.onevent(t);break;case qn.ACK:case qn.BINARY_ACK:this.onack(t);break;case qn.DISCONNECT:this.ondisconnect();break;case qn.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let i=!1;return function(...n){i||(i=!0,r.packet({type:qn.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:qn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,t.data)}}}function gg(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}gg.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-r:e+r}return Math.min(e,this.max)|0};gg.prototype.reset=function(){this.attempts=0};gg.prototype.setMin=function(e){this.ms=e};gg.prototype.setMax=function(e){this.max=e};gg.prototype.setJitter=function(e){this.jitter=e};class Jw extends Ko{constructor(t,r){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,p_(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new gg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||tj;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new HD(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=jA(r,"open",function(){i.onopen(),t&&t()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},c=jA(r,"error",a);if(this._timeout!==!1){const s=this._timeout,p=this.setTimeoutFn(()=>{n(),a(new Error("timeout")),r.close()},s);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(n),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(jA(t,"ping",this.onping.bind(this)),jA(t,"data",this.ondata.bind(this)),jA(t,"error",this.onerror.bind(this)),jA(t,"close",this.onclose.bind(this)),jA(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){f_(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new F6(this,t,r),this.nsps[t]=i),i}_destroy(t){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let i=0;i<r.length;i++)this.engine.write(r[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const g1={};function o2(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=VD(e,t.path||"/socket.io"),i=r.source,n=r.id,a=r.path,c=g1[n]&&a in g1[n].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let p;return s?p=new Jw(i,t):(g1[n]||(g1[n]=new Jw(i,t)),p=g1[n]),r.query&&!t.query&&(t.query=r.queryKey),p.socket(r.path,t)}Object.assign(o2,{Manager:Jw,Socket:F6,io:o2,connect:o2});const ij=()=>"http://192.168.1.12:4000/api/v1".replace(/\/api\/v1$|\/api$/,""),nj=ij();let fs=null,Km=[];const Gi={on(e,t){if(fs&&typeof fs.on=="function")return fs.on(e,t);Km.push({event:e,cb:t})},off(e,t){if(fs&&typeof fs.off=="function")return fs.off(e,t);Km=Km.filter(r=>r.event!==e?!0:t?r.cb!==t:!1)},emit(e,...t){if(fs&&typeof fs.emit=="function")return fs.emit(e,...t)},disconnect(){fs&&typeof fs.disconnect=="function"&&(fs.disconnect(),fs=null)},get connected(){return fs?fs.connected:!1},_getRaw(){return fs}},sj=e=>e?(fs=o2(nj,{withCredentials:!0,query:{token:e}}),fs.on("connect_error",t=>{console.warn("Socket connection error:",t.message),(t.message==="Authentication error"||t.message==="Token verification failed"||t.message==="Invalid token"||t.message==="Token expired"||t.message==="No token provided"||t.message==="Not a user token"||t.message==="User not found"||t.message==="Account is banned")&&(fs.disconnect(),fs=null,localStorage.removeItem("token"))}),fs.on("connect",()=>{console.log("Socket connected successfully")}),Km.length>0&&(Km.forEach(({event:t,cb:r})=>{try{fs.on(t,r)}catch(i){console.error("Failed to attach pending listener",t,i)}}),Km=[]),fs):null,p0=e=>{fs&&(fs.disconnect(),fs=null),e?(localStorage.setItem("token",e),fs=sj(e)):(localStorage.removeItem("token"),fs=null)},Kx=()=>{fs&&(fs.disconnect(),fs=null),localStorage.removeItem("token")},aj="http://192.168.1.12:4000/api/v1",oj=5,lj=1e3,cj=2,Nr=Eo.create({baseURL:aj,withCredentials:!0});Nr.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Nr.interceptors.response.use(e=>e,e=>{const t=e.config;t._retryCount||(t._retryCount=0);const r=t.url?.includes("/user/register");if(e.response?.status===429&&t._retryCount<oj&&!r){t._retryCount+=1;const i=lj*Math.pow(cj,t._retryCount-1);return new Promise(n=>{setTimeout(()=>{n(Nr.request(t))},i)})}return Promise.reject(e)});let uj={data:""},hj=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||uj,Aj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dj=/\/\*[^]*?\*\/|  +/g,SB=/\n+/g,sp=(e,t)=>{let r="",i="",n="";for(let a in e){let c=e[a];a[0]=="@"?a[1]=="i"?r=a+" "+c+";":i+=a[1]=="f"?sp(c,a):a+"{"+sp(c,a[1]=="k"?"":t)+"}":typeof c=="object"?i+=sp(c,t?t.replace(/([^,])+/g,s=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,s):s?s+" "+p:p)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=sp.p?sp.p(a,c):a+":"+c+";")}return r+(t&&n?t+"{"+n+"}":n)+i},Xd={},N6=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+N6(e[r]);return t}return e},fj=(e,t,r,i,n)=>{let a=N6(e),c=Xd[a]||(Xd[a]=(p=>{let g=0,v=11;for(;g<p.length;)v=101*v+p.charCodeAt(g++)>>>0;return"go"+v})(a));if(!Xd[c]){let p=a!==e?e:(g=>{let v,B,F=[{}];for(;v=Aj.exec(g.replace(dj,""));)v[4]?F.shift():v[3]?(B=v[3].replace(SB," ").trim(),F.unshift(F[0][B]=F[0][B]||{})):F[0][v[1]]=v[2].replace(SB," ").trim();return F[0]})(e);Xd[c]=sp(n?{["@keyframes "+c]:p}:p,r?"":"."+c)}let s=r&&Xd.g?Xd.g:null;return r&&(Xd.g=Xd[c]),((p,g,v,B)=>{B?g.data=g.data.replace(B,p):g.data.indexOf(p)===-1&&(g.data=v?p+g.data:g.data+p)})(Xd[c],t,i,s),c},pj=(e,t,r)=>e.reduce((i,n,a)=>{let c=t[a];if(c&&c.call){let s=c(r),p=s&&s.props&&s.props.className||/^go/.test(s)&&s;c=p?"."+p:s&&typeof s=="object"?s.props?"":sp(s,""):s===!1?"":s}return i+n+(c??"")},"");function m_(e){let t=this||{},r=e.call?e(t.p):e;return fj(r.unshift?r.raw?pj(r,[].slice.call(arguments,1),t.p):r.reduce((i,n)=>Object.assign(i,n&&n.call?n(t.p):n),{}):r,hj(t.target),t.g,t.o,t.k)}let I6,e5,t5;m_.bind({g:1});let xf=m_.bind({k:1});function mj(e,t,r,i){sp.p=t,I6=e,e5=r,t5=i}function Ep(e,t){let r=this||{};return function(){let i=arguments;function n(a,c){let s=Object.assign({},a),p=s.className||n.className;r.p=Object.assign({theme:e5&&e5()},s),r.o=/ *go\d+/.test(p),s.className=m_.apply(r,i)+(p?" "+p:"");let g=e;return e[0]&&(g=s.as||e,delete s.as),t5&&g[0]&&t5(s),I6(g,s)}return n}}var gj=e=>typeof e=="function",r5=(e,t)=>gj(e)?e(t):e,vj=(()=>{let e=0;return()=>(++e).toString()})(),xj=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),yj=20,L6="default",M6=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(c=>c.id===t.toast.id?{...c,...t.toast}:c)};case 2:let{toast:i}=t;return M6(e,{type:e.toasts.find(c=>c.id===i.id)?1:0,toast:i});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(c=>c.id===n||n===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(c=>c.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+a}))}}},_j=[],bj={toasts:[],pausedAt:void 0,settings:{toastLimit:yj}},Wm={},P6=(e,t=L6)=>{Wm[t]=M6(Wm[t]||bj,e),_j.forEach(([r,i])=>{r===t&&i(Wm[t])})},R6=e=>Object.keys(Wm).forEach(t=>P6(e,t)),wj=e=>Object.keys(Wm).find(t=>Wm[t].toasts.some(r=>r.id===e)),k4=(e=L6)=>t=>{P6(t,e)},Cj=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:r?.id||vj()}),Vv=e=>(t,r)=>{let i=Cj(t,e,r);return k4(i.toasterId||wj(i.id))({type:2,toast:i}),i.id},fc=(e,t)=>Vv("blank")(e,t);fc.error=Vv("error");fc.success=Vv("success");fc.loading=Vv("loading");fc.custom=Vv("custom");fc.dismiss=(e,t)=>{let r={type:3,toastId:e};t?k4(t)(r):R6(r)};fc.dismissAll=e=>fc.dismiss(void 0,e);fc.remove=(e,t)=>{let r={type:4,toastId:e};t?k4(t)(r):R6(r)};fc.removeAll=e=>fc.remove(void 0,e);fc.promise=(e,t,r)=>{let i=fc.loading(t.loading,{...r,...r?.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let a=t.success?r5(t.success,n):void 0;return a?fc.success(a,{id:i,...r,...r?.success}):fc.dismiss(i),n}).catch(n=>{let a=t.error?r5(t.error,n):void 0;a?fc.error(a,{id:i,...r,...r?.error}):fc.dismiss(i)}),e};var Bj=xf`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Sj=xf`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ej=xf`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Tj=Ep("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Sj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ej} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,kj=xf`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Fj=Ep("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${kj} 1s linear infinite;
`,Nj=xf`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ij=xf`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Lj=Ep("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Nj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ij} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Mj=Ep("div")`
  position: absolute;
`,Pj=Ep("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rj=xf`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Dj=Ep("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jj=({toast:e})=>{let{icon:t,type:r,iconTheme:i}=e;return t!==void 0?typeof t=="string"?xe.createElement(Dj,null,t):t:r==="blank"?null:xe.createElement(Pj,null,xe.createElement(Fj,{...i}),r!=="loading"&&xe.createElement(Mj,null,r==="error"?xe.createElement(Tj,{...i}):xe.createElement(Lj,{...i})))},Uj=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Oj=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,zj="0%{opacity:0;} 100%{opacity:1;}",Qj="0%{opacity:1;} 100%{opacity:0;}",Hj=Ep("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Vj=Ep("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Gj=(e,t)=>{let r=e.includes("top")?1:-1,[i,n]=xj()?[zj,Qj]:[Uj(r),Oj(r)];return{animation:t?`${xf(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xf(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};xe.memo(({toast:e,position:t,style:r,children:i})=>{let n=e.height?Gj(e.position||t||"top-center",e.visible):{opacity:0},a=xe.createElement(jj,{toast:e}),c=xe.createElement(Vj,{...e.ariaProps},r5(e.message,e));return xe.createElement(Hj,{className:e.className,style:{...n,...r,...e.style}},typeof i=="function"?i({icon:a,message:c}):xe.createElement(xe.Fragment,null,a,c))});mj(xe.createElement);m_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;var pi=fc;const D6=xe.createContext(),qj=({children:e})=>{const[t,r]=xe.useState(!1),[i,n]=xe.useState(!1),[a,c]=xe.useState(null),[s,p]=xe.useState(null),[g,v]=xe.useState(null),[B,F]=xe.useState(!1),[C,L]=xe.useState(!1),[P,D]=xe.useState(!1),[j,q]=xe.useState(null),H=xe.useRef(!1),ee=xe.useCallback(async(Z=null)=>{if(!C){L(!0);try{const le=localStorage.getItem("tokenType"),J=JSON.parse(localStorage.getItem("admin")||"null"),ce=JSON.parse(localStorage.getItem("user")||"null");let te;if(le==="admin")J&&(te=(await Nr.get("/admin/auth/me")).data);else if(ce)try{te=(await Nr.get("/user/me")).data}catch(K){if(K.response?.data?.code==="ACCOUNT_NOT_VERIFIED"){p(ce),r(!0),c("user"),v(null),F(!1),localStorage.setItem("user",JSON.stringify(ce)),pi.error("Account not verified. Please wait for admin verification.");return}throw K}if(te&&te.success&&te.user){const K=te.user;if(K.type==="admin"||K.role==="Admin")v(K),r(!0),c("admin"),p(null),localStorage.setItem("admin",JSON.stringify(K));else{if(K.banned){localStorage.clear(),Kx(),p(null),v(null),F(!1),r(!1),c(null),pi.error("Your account has been banned");return}p(K),r(!0),c("user"),v(null),F(K.verified||!1),localStorage.setItem("user",JSON.stringify(K))}const me=localStorage.getItem("token");if(me&&p0(me),Z)if(le==="admin"){const we=localStorage.getItem("adminLastPath");we&&we.startsWith("/admin/")?Z(we,{replace:!0}):Z("/admin/analytics",{replace:!0})}else{const we=localStorage.getItem("userLastPath");we&&we.startsWith("/user/")?Z(we,{replace:!0}):K.role==="Service Provider"?(Z("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(Z("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request"))}return}}catch(le){console.warn("Authentication failed:",le.message),localStorage.removeItem("token"),Kx();try{if(localStorage.getItem("tokenType")==="admin"){const ce=JSON.parse(localStorage.getItem("admin")||"null");if(ce){v(ce),r(!0),c("admin"),p(null);return}}else{const ce=JSON.parse(localStorage.getItem("user")||"null");if(ce){p(ce),r(!0),c("user"),v(null),F(ce.verified||!1);return}}}catch{localStorage.clear(),Kx(),p(null),v(null),r(!1),c(null)}}finally{L(!1),n(!0)}}},[C,L,p,r,c,v,F]),G=async()=>{try{await Promise.all([Nr.get("/user/logout",{withCredentials:!0}),Nr.get("/admin/auth/logout",{withCredentials:!0})])}catch{console.warn("Logout request failed, clearing local data anyway.")}localStorage.clear(),Kx(),p(null),v(null),F(!1),r(!1),c(null),pi.success("Logged out successfully")};xe.useEffect(()=>{if(H.current)return;H.current=!0;const Z=JSON.parse(localStorage.getItem("user")||"null"),le=JSON.parse(localStorage.getItem("admin")||"null"),J=localStorage.getItem("isAuthorized")==="true",ce=localStorage.getItem("tokenType"),te=localStorage.getItem("token");if(le&&J&&ce==="admin"&&te){v(le),r(!0),c("admin"),p(null),n(!0),p0(te),ee();return}Z&&J&&ce==="user"&&te&&(p(Z),r(!0),c("user"),v(null),F(Z.verified||!1),n(!0),p0(te)),ee()},[ee]);const ne=Z=>{q(Z)};return d.jsx(D6.Provider,{value:{isAuthorized:t,setIsAuthorized:r,authLoaded:i,tokenType:a,setTokenType:c,user:s,setUser:p,admin:g,setAdmin:v,isUserVerified:B,setIsUserVerified:F,navigationLoading:P,setNavigationLoading:D,fetchProfile:ee,logout:G,openChatAppointmentId:j,setOpenChatAppointmentId:q,openChat:ne},children:e})},io=()=>xe.useContext(D6),Kj=()=>{const e=Wo(),{setNavigationLoading:t}=io();return(i,n={})=>{t(!0),setTimeout(()=>{e(i,n),t(!1)},100)}};function j6(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=j6(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function m0(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=j6(e))&&(i&&(i+=" "),i+=t);return i}function Wj(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Wj(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Gv=e=>typeof e=="number"&&!isNaN(e),C0=e=>typeof e=="string",yf=e=>typeof e=="function",$j=e=>C0(e)||Gv(e),i5=e=>C0(e)||yf(e)?e:null,Xj=(e,t)=>e===!1||Gv(e)&&e>0?e:t,n5=e=>xe.isValidElement(e)||C0(e)||yf(e)||Gv(e);function Zj(e,t,r=300){let{scrollHeight:i,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=i+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(t,r)})})}function Yj({enter:e,exit:t,appendPosition:r=!1,collapse:i=!0,collapseDuration:n=300}){return function({children:a,position:c,preventExitTransition:s,done:p,nodeRef:g,isIn:v,playToast:B}){let F=r?`${e}--${c}`:e,C=r?`${t}--${c}`:t,L=xe.useRef(0);return xe.useLayoutEffect(()=>{let P=g.current,D=F.split(" "),j=q=>{q.target===g.current&&(B(),P.removeEventListener("animationend",j),P.removeEventListener("animationcancel",j),L.current===0&&q.type!=="animationcancel"&&P.classList.remove(...D))};P.classList.add(...D),P.addEventListener("animationend",j),P.addEventListener("animationcancel",j)},[]),xe.useEffect(()=>{let P=g.current,D=()=>{P.removeEventListener("animationend",D),i?Zj(P,p,n):p()};v||(s?D():(L.current=1,P.className+=` ${C}`,P.addEventListener("animationend",D)))},[v]),zn.createElement(zn.Fragment,null,a)}}function EB(e,t){return{content:U6(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function U6(e,t,r=!1){return xe.isValidElement(e)&&!C0(e.type)?xe.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):yf(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function Jj({closeToast:e,theme:t,ariaLabel:r="close"}){return zn.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(!0)},"aria-label":r},zn.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},zn.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function eU({delay:e,isRunning:t,closeToast:r,type:i="default",hide:n,className:a,controlledProgress:c,progress:s,rtl:p,isIn:g,theme:v}){let B=n||c&&s===0,F={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};c&&(F.transform=`scaleX(${s})`);let C=m0("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${v}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":p}),L=yf(a)?a({rtl:p,type:i,defaultClassName:C}):m0(C,a),P={[c&&s>=1?"onTransitionEnd":"onAnimationEnd"]:c&&s<1?null:()=>{g&&r()}};return zn.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":B},zn.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${v} Toastify__progress-bar--${i}`}),zn.createElement("div",{role:"progressbar","aria-hidden":B?"true":"false","aria-label":"notification timer",className:L,style:F,...P}))}var tU=1,O6=()=>`${tU++}`;function rU(e,t,r){let i=1,n=0,a=[],c=[],s=t,p=new Map,g=new Set,v=q=>(g.add(q),()=>g.delete(q)),B=()=>{c=Array.from(p.values()),g.forEach(q=>q())},F=({containerId:q,toastId:H,updateId:ee})=>{let G=q?q!==e:e!==1,ne=p.has(H)&&ee==null;return G||ne},C=(q,H)=>{p.forEach(ee=>{var G;(H==null||H===ee.props.toastId)&&((G=ee.toggle)==null||G.call(ee,q))})},L=q=>{var H,ee;(ee=(H=q.props)==null?void 0:H.onClose)==null||ee.call(H,q.removalReason),q.isActive=!1},P=q=>{if(q==null)p.forEach(L);else{let H=p.get(q);H&&L(H)}B()},D=()=>{n-=a.length,a=[]},j=q=>{var H,ee;let{toastId:G,updateId:ne}=q.props,Z=ne==null;q.staleId&&p.delete(q.staleId),q.isActive=!0,p.set(G,q),B(),r(EB(q,Z?"added":"updated")),Z&&((ee=(H=q.props).onOpen)==null||ee.call(H))};return{id:e,props:s,observe:v,toggle:C,removeToast:P,toasts:p,clearQueue:D,buildToast:(q,H)=>{if(F(H))return;let{toastId:ee,updateId:G,data:ne,staleId:Z,delay:le}=H,J=G==null;J&&n++;let ce={...s,style:s.toastStyle,key:i++,...Object.fromEntries(Object.entries(H).filter(([K,me])=>me!=null)),toastId:ee,updateId:G,data:ne,isIn:!1,className:i5(H.className||s.toastClassName),progressClassName:i5(H.progressClassName||s.progressClassName),autoClose:H.isLoading?!1:Xj(H.autoClose,s.autoClose),closeToast(K){p.get(ee).removalReason=K,P(ee)},deleteToast(){let K=p.get(ee);if(K!=null){if(r(EB(K,"removed")),p.delete(ee),n--,n<0&&(n=0),a.length>0){j(a.shift());return}B()}}};ce.closeButton=s.closeButton,H.closeButton===!1||n5(H.closeButton)?ce.closeButton=H.closeButton:H.closeButton===!0&&(ce.closeButton=n5(s.closeButton)?s.closeButton:!0);let te={content:q,props:ce,staleId:Z};s.limit&&s.limit>0&&n>s.limit&&J?a.push(te):Gv(le)?setTimeout(()=>{j(te)},le):j(te)},setProps(q){s=q},setToggle:(q,H)=>{let ee=p.get(q);ee&&(ee.toggle=H)},isToastActive:q=>{var H;return(H=p.get(q))==null?void 0:H.isActive},getSnapshot:()=>c}}var wu=new Map,fv=[],s5=new Set,iU=e=>s5.forEach(t=>t(e)),z6=()=>wu.size>0;function nU(){fv.forEach(e=>H6(e.content,e.options)),fv=[]}var sU=(e,{containerId:t})=>{var r;return(r=wu.get(t||1))==null?void 0:r.toasts.get(e)};function Q6(e,t){var r;if(t)return!!((r=wu.get(t))!=null&&r.isToastActive(e));let i=!1;return wu.forEach(n=>{n.isToastActive(e)&&(i=!0)}),i}function aU(e){if(!z6()){fv=fv.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||$j(e))wu.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=wu.get(e.containerId);t?t.removeToast(e.id):wu.forEach(r=>{r.removeToast(e.id)})}}var oU=(e={})=>{wu.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function H6(e,t){n5(e)&&(z6()||fv.push({content:e,options:t}),wu.forEach(r=>{r.buildToast(e,t)}))}function lU(e){var t;(t=wu.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function V6(e,t){wu.forEach(r=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===r.id)&&r.toggle(e,t?.id)})}function cU(e){let t=e.containerId||1;return{subscribe(r){let i=rU(t,e,iU);wu.set(t,i);let n=i.observe(r);return nU(),()=>{n(),wu.delete(t)}},setProps(r){var i;(i=wu.get(t))==null||i.setProps(r)},getSnapshot(){var r;return(r=wu.get(t))==null?void 0:r.getSnapshot()}}}function uU(e){return s5.add(e),()=>{s5.delete(e)}}function hU(e){return e&&(C0(e.toastId)||Gv(e.toastId))?e.toastId:O6()}function qv(e,t){return H6(e,t),t.toastId}function g_(e,t){return{...t,type:t&&t.type||e,toastId:hU(t)}}function v_(e){return(t,r)=>qv(t,g_(e,r))}function Dn(e,t){return qv(e,g_("default",t))}Dn.loading=(e,t)=>qv(e,g_("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function AU(e,{pending:t,error:r,success:i},n){let a;t&&(a=C0(t)?Dn.loading(t,n):Dn.loading(t.render,{...n,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(g,v,B)=>{if(v==null){Dn.dismiss(a);return}let F={type:g,...c,...n,data:B},C=C0(v)?{render:v}:v;return a?Dn.update(a,{...F,...C}):Dn(C.render,{...F,...C}),B},p=yf(e)?e():e;return p.then(g=>s("success",i,g)).catch(g=>s("error",r,g)),p}Dn.promise=AU;Dn.success=v_("success");Dn.info=v_("info");Dn.error=v_("error");Dn.warning=v_("warning");Dn.warn=Dn.warning;Dn.dark=(e,t)=>qv(e,g_("default",{theme:"dark",...t}));function dU(e){aU(e)}Dn.dismiss=dU;Dn.clearWaitingQueue=oU;Dn.isActive=Q6;Dn.update=(e,t={})=>{let r=sU(e,t);if(r){let{props:i,content:n}=r,a={delay:100,...i,...t,toastId:t.toastId||e,updateId:O6()};a.toastId!==e&&(a.staleId=e);let c=a.render||n;delete a.render,qv(c,a)}};Dn.done=e=>{Dn.update(e,{progress:1})};Dn.onChange=uU;Dn.play=e=>V6(!0,e);Dn.pause=e=>V6(!1,e);function fU(e){var t;let{subscribe:r,getSnapshot:i,setProps:n}=xe.useRef(cU(e)).current;n(e);let a=(t=xe.useSyncExternalStore(r,i,i))==null?void 0:t.slice();function c(s){if(!a)return[];let p=new Map;return e.newestOnTop&&a.reverse(),a.forEach(g=>{let{position:v}=g.props;p.has(v)||p.set(v,[]),p.get(v).push(g)}),Array.from(p,g=>s(g[0],g[1]))}return{getToastToRender:c,isToastActive:Q6,count:a?.length}}function pU(e){let[t,r]=xe.useState(!1),[i,n]=xe.useState(!1),a=xe.useRef(null),c=xe.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:s,pauseOnHover:p,closeToast:g,onClick:v,closeOnClick:B}=e;lU({id:e.toastId,containerId:e.containerId,fn:r}),xe.useEffect(()=>{if(e.pauseOnFocusLoss)return F(),()=>{C()}},[e.pauseOnFocusLoss]);function F(){document.hasFocus()||j(),window.addEventListener("focus",D),window.addEventListener("blur",j)}function C(){window.removeEventListener("focus",D),window.removeEventListener("blur",j)}function L(Z){if(e.draggable===!0||e.draggable===Z.pointerType){q();let le=a.current;c.canCloseOnClick=!0,c.canDrag=!0,le.style.transition="none",e.draggableDirection==="x"?(c.start=Z.clientX,c.removalDistance=le.offsetWidth*(e.draggablePercent/100)):(c.start=Z.clientY,c.removalDistance=le.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function P(Z){let{top:le,bottom:J,left:ce,right:te}=a.current.getBoundingClientRect();Z.nativeEvent.type!=="touchend"&&e.pauseOnHover&&Z.clientX>=ce&&Z.clientX<=te&&Z.clientY>=le&&Z.clientY<=J?j():D()}function D(){r(!0)}function j(){r(!1)}function q(){c.didMove=!1,document.addEventListener("pointermove",ee),document.addEventListener("pointerup",G)}function H(){document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",G)}function ee(Z){let le=a.current;if(c.canDrag&&le){c.didMove=!0,t&&j(),e.draggableDirection==="x"?c.delta=Z.clientX-c.start:c.delta=Z.clientY-c.start,c.start!==Z.clientX&&(c.canCloseOnClick=!1);let J=e.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;le.style.transform=`translate3d(${J},0)`,le.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function G(){H();let Z=a.current;if(c.canDrag&&c.didMove&&Z){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){n(!0),e.closeToast(!0),e.collapseAll();return}Z.style.transition="transform 0.2s, opacity 0.2s",Z.style.removeProperty("transform"),Z.style.removeProperty("opacity")}}let ne={onPointerDown:L,onPointerUp:P};return s&&p&&(ne.onMouseEnter=j,e.stacked||(ne.onMouseLeave=D)),B&&(ne.onClick=Z=>{v&&v(Z),c.canCloseOnClick&&g(!0)}),{playToast:D,pauseToast:j,isRunning:t,preventExitTransition:i,toastRef:a,eventHandlers:ne}}var mU=typeof window<"u"?xe.useLayoutEffect:xe.useEffect,x_=({theme:e,type:t,isLoading:r,...i})=>zn.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...i});function gU(e){return zn.createElement(x_,{...e},zn.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function vU(e){return zn.createElement(x_,{...e},zn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function xU(e){return zn.createElement(x_,{...e},zn.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function yU(e){return zn.createElement(x_,{...e},zn.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function _U(){return zn.createElement("div",{className:"Toastify__spinner"})}var a5={info:vU,warning:gU,success:xU,error:yU,spinner:_U},bU=e=>e in a5;function wU({theme:e,type:t,isLoading:r,icon:i}){let n=null,a={theme:e,type:t};return i===!1||(yf(i)?n=i({...a,isLoading:r}):xe.isValidElement(i)?n=xe.cloneElement(i,a):r?n=a5.spinner():bU(t)&&(n=a5[t](a))),n}var CU=e=>{let{isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:n,playToast:a}=pU(e),{closeButton:c,children:s,autoClose:p,onClick:g,type:v,hideProgressBar:B,closeToast:F,transition:C,position:L,className:P,style:D,progressClassName:j,updateId:q,role:H,progress:ee,rtl:G,toastId:ne,deleteToast:Z,isIn:le,isLoading:J,closeOnClick:ce,theme:te,ariaLabel:K}=e,me=m0("Toastify__toast",`Toastify__toast-theme--${te}`,`Toastify__toast--${v}`,{"Toastify__toast--rtl":G},{"Toastify__toast--close-on-click":ce}),we=yf(P)?P({rtl:G,position:L,type:v,defaultClassName:me}):m0(me,P),Fe=wU(e),he=!!ee||!p,Le={closeToast:F,type:v,theme:te},$e=null;return c===!1||(yf(c)?$e=c(Le):xe.isValidElement(c)?$e=xe.cloneElement(c,Le):$e=Jj(Le)),zn.createElement(C,{isIn:le,done:Z,position:L,preventExitTransition:r,nodeRef:i,playToast:a},zn.createElement("div",{id:ne,tabIndex:0,onClick:g,"data-in":le,className:we,...n,style:D,ref:i,...le&&{role:H,"aria-label":K}},Fe!=null&&zn.createElement("div",{className:m0("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!J})},Fe),U6(s,e,!t),$e,!e.customProgressBar&&zn.createElement(eU,{...q&&!he?{key:`p-${q}`}:{},rtl:G,theme:te,delay:p,isRunning:t,isIn:le,closeToast:F,hide:B,type:v,className:j,controlledProgress:he,progress:ee||0})))},BU=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),SU=Yj(BU("bounce",!0)),EU={position:"top-right",transition:SU,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function TU(e){let t={...EU,...e},r=e.stacked,[i,n]=xe.useState(!0),a=xe.useRef(null),{getToastToRender:c,isToastActive:s,count:p}=fU(t),{className:g,style:v,rtl:B,containerId:F,hotKeys:C}=t;function L(D){let j=m0("Toastify__toast-container",`Toastify__toast-container--${D}`,{"Toastify__toast-container--rtl":B});return yf(g)?g({position:D,rtl:B,defaultClassName:j}):m0(j,i5(g))}function P(){r&&(n(!0),Dn.play())}return mU(()=>{var D;if(r){let j=a.current.querySelectorAll('[data-in="true"]'),q=12,H=(D=t.position)==null?void 0:D.includes("top"),ee=0,G=0;Array.from(j).reverse().forEach((ne,Z)=>{let le=ne;le.classList.add("Toastify__toast--stacked"),Z>0&&(le.dataset.collapsed=`${i}`),le.dataset.pos||(le.dataset.pos=H?"top":"bot");let J=ee*(i?.2:1)+(i?0:q*Z);le.style.setProperty("--y",`${H?J:J*-1}px`),le.style.setProperty("--g",`${q}`),le.style.setProperty("--s",`${1-(i?G:0)}`),ee+=le.offsetHeight,G+=.025})}},[i,p,r]),xe.useEffect(()=>{function D(j){var q;let H=a.current;C(j)&&((q=H.querySelector('[tabIndex="0"]'))==null||q.focus(),n(!1),Dn.pause()),j.key==="Escape"&&(document.activeElement===H||H!=null&&H.contains(document.activeElement))&&(n(!0),Dn.play())}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[C]),zn.createElement("section",{ref:a,className:"Toastify",id:F,onMouseEnter:()=>{r&&(n(!1),Dn.pause())},onMouseLeave:P,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((D,j)=>{let q=j.length?{...v}:{...v,pointerEvents:"none"};return zn.createElement("div",{tabIndex:-1,className:L(D),"data-stacked":r,style:q,key:`c-${D}`},j.map(({content:H,props:ee})=>zn.createElement(CU,{...ee,stacked:r,collapseAll:P,isIn:s(ee.toastId,ee.containerId),key:`t-${ee.key}`},H)))}))}function kU({user:e}){const t=Wo();return xe.useEffect(()=>{if(e?._id)return Gi.emit("register",e._id),Notification.permission==="default"&&Notification.requestPermission(),Gi.on("new-notification",r=>{const i=r.type==="service_request"||r.title?.toLowerCase().includes("service request"),n={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0};if(i&&e?.role==="Service Provider"&&(n.onClick=()=>t("/user/clients")),Dn.info(`${r.title}: ${r.message}`,n),Notification.permission==="granted"){const a=new Notification(r.title,{body:r.message,icon:"/skillconnect.png"});i&&e?.role==="Service Provider"&&(a.onclick=()=>{window.focus(),t("/user/clients")})}}),Gi.on("appointment-notification",r=>{Dn.info(`${r.title}: ${new Date(r.appointment.appointmentDate).toLocaleString()}`,{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),Gi.on("verification-status",r=>{Dn.info(`Verification status updated: ${r.status}`,{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),Gi.on("request-cancelled",r=>{Dn.warn(r.message||"A service request was been cancelled.",{position:"top-right",autoClose:8e3,hideProgressBar:!1})}),Gi.on("service-request-updated",r=>{r.action==="cancelled"&&Dn.info("A service request has been cancelled.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),Gi.on("request-accepted",()=>{Dn.success("A service request has been accepted.",{position:"top-right",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}),()=>{Gi.off("new-notification"),Gi.off("appointment-notification"),Gi.off("verification-status"),Gi.off("request-cancelled"),Gi.off("service-request-updated"),Gi.off("request-accepted")}},[e,t]),null}const FU=()=>d.jsx("span",{className:"loader"});var G6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TB=zn.createContext&&zn.createContext(G6),NU=["attr","size","title"];function IU(e,t){if(e==null)return{};var r=LU(e,t),i,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function LU(e,t){if(e==null)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},w2.apply(this,arguments)}function kB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kB(Object(r),!0).forEach(function(i){MU(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kB(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function MU(e,t,r){return t=PU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PU(e){var t=RU(e,"string");return typeof t=="symbol"?t:t+""}function RU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q6(e){return e&&e.map((t,r)=>zn.createElement(t.tag,C2({key:r},t.attr),q6(t.child)))}function Ki(e){return t=>zn.createElement(DU,w2({attr:C2({},e.attr)},t),q6(e.child))}function DU(e){var t=r=>{var{attr:i,size:n,title:a}=e,c=IU(e,NU),s=n||r.size||"1em",p;return r.className&&(p=r.className),e.className&&(p=(p?p+" ":"")+e.className),zn.createElement("svg",w2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,c,{className:p,style:C2(C2({color:e.color||r.color},r.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&zn.createElement("title",null,a),e.children)};return TB!==void 0?zn.createElement(TB.Consumer,null,r=>t(r)):t(G6)}function jU(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"},child:[]}]})(e)}function UU(e){return Ki({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"},child:[]}]})(e)}function OU(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.55 8C116.52 8 8 110.34 8 248.57c0 72.3 29.71 134.78 78.07 177.94 8.35 7.51 6.63 11.86 8.05 58.23A19.92 19.92 0 0 0 122 502.31c52.91-23.3 53.59-25.14 62.56-22.7C337.85 521.8 504 423.7 504 248.57 504 110.34 396.59 8 256.55 8zm149.24 185.13l-73 115.57a37.37 37.37 0 0 1-53.91 9.93l-58.08-43.47a15 15 0 0 0-18 0l-78.37 59.44c-10.46 7.93-24.16-4.6-17.11-15.67l73-115.57a37.36 37.36 0 0 1 53.91-9.93l58.06 43.46a15 15 0 0 0 18 0l78.41-59.38c10.44-7.98 24.14 4.54 17.09 15.62z"},child:[]}]})(e)}function zU(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function QU(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function HU(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(e)}function K6(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function o5(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(e)}function VU(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(e)}function GU(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"},child:[]}]})(e)}function W6(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function FB(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"},child:[]}]})(e)}function qU(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function Wx(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function $6(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function KU(e){return Ki({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function NB(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function F4(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function op(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function WU(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function B2(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function S2(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function $U(e){return Ki({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function XU(e){return Ki({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm192.81 248H304c8.84 0 16 7.16 16 16s-7.16 16-16 16h-47.19c-16.45 0-31.27-9.14-38.64-23.86-2.95-5.92-8.09-6.52-10.17-6.52s-7.22.59-10.02 6.19l-7.67 15.34a15.986 15.986 0 0 1-14.31 8.84c-.38 0-.75-.02-1.14-.05-6.45-.45-12-4.75-14.03-10.89L144 354.59l-10.61 31.88c-5.89 17.66-22.38 29.53-41 29.53H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h12.39c4.83 0 9.11-3.08 10.64-7.66l18.19-54.64c3.3-9.81 12.44-16.41 22.78-16.41s19.48 6.59 22.77 16.41l13.88 41.64c19.77-16.19 54.05-9.7 66 14.16 2.02 4.06 5.96 6.5 10.16 6.5zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function IB(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(e)}function ZU(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(e)}function X6(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function Z6(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(e)}function Y6(e){return Ki({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(e)}function YU(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function JU(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(e)}function eO(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(e)}function J6(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function tO(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(e)}function eF(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function l5(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(e)}function pv(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"},child:[]}]})(e)}function LB(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"},child:[]}]})(e)}function lf(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(e)}function rO(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function iO(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function MB(e){return Ki({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function cf(e){return Ki({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function nO(e){return Ki({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z"},child:[]}]})(e)}function sO(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M427.68 351.43C402 320 383.87 304 383.87 217.35 383.87 138 343.35 109.73 310 96c-4.43-1.82-8.6-6-9.95-10.55C294.2 65.54 277.8 48 256 48s-38.21 17.55-44 37.47c-1.35 4.6-5.52 8.71-9.95 10.53-33.39 13.75-73.87 41.92-73.87 121.35C128.13 304 110 320 84.32 351.43 73.68 364.45 83 384 101.61 384h308.88c18.51 0 27.77-19.61 17.19-32.57zM320 384v16a64 64 0 0 1-128 0v-16"},child:[]}]})(e)}function aO(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1 0 57.4 57.4 64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22 155.3 155.3 0 0 1-21.46-12.57 16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22 155.3 155.3 0 0 1 21.46 12.57 16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z"},child:[]}]})(e)}function oO(e){return Ki({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]}]})(e)}function lO(e){return Ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 19.59V8l-6-6H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c.45 0 .85-.15 1.19-.4l-4.43-4.43c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L20 19.59zM9 13c0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3-3 1.34-3 3z"},child:[]}]})(e)}function cO(e){return Ki({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}const uO="http://192.168.1.12:4000/api/v1",PB=e=>e.sort((t,r)=>{const i=t.lastMessage?new Date(t.lastMessage.timestamp):new Date(0);return(r.lastMessage?new Date(r.lastMessage.timestamp):new Date(0))-i}),hO=()=>{const e=Wo(),{isAuthorized:t,tokenType:r,user:i,admin:n,openChatAppointmentId:a,setOpenChatAppointmentId:c}=io(),[s,p]=xe.useState(!1),[g,v]=xe.useState("list"),[B,F]=xe.useState([]),[C,L]=xe.useState(null),[P,D]=xe.useState([]),[j,q]=xe.useState(""),[H,ee]=xe.useState(!1),[G,ne]=xe.useState(null),[Z,le]=xe.useState(new Set),[J,ce]=xe.useState({}),[te,K]=xe.useState([]),[me,we]=xe.useState(""),[Fe,he]=xe.useState(!1),[Le,$e]=xe.useState([]),[Ne,Te]=xe.useState([]),[Ge,Y]=xe.useState(!1),Ae=xe.useRef(null),fe=xe.useRef(null),be=xe.useCallback(()=>{Ae.current?.scrollIntoView({behavior:"smooth"})},[]),Me=xe.useCallback(async()=>{ee(!0),ne(null);try{const{data:$t}=await Nr.get("/user/chat-list"),Ar=$t.chatList||[],yr={};Ar.forEach(Re=>{const Ze=Re.otherUser?._id?.toString();Ze&&(yr[Ze]?(yr[Ze].appointments.push(Re.appointmentId),yr[Ze].totalUnreadCount+=Re.unreadCount||0,Re.lastMessage&&(!yr[Ze].lastMessage||new Date(Re.lastMessage.timestamp)>new Date(yr[Ze].lastMessage.timestamp))&&(yr[Ze].lastMessage=Re.lastMessage,yr[Ze].serviceRequest=Re.serviceRequest,yr[Ze].status=Re.status),Re.canComplete&&(yr[Ze].canComplete=!0)):yr[Ze]={...Re,appointments:[Re.appointmentId],totalUnreadCount:Re.unreadCount||0})});const it=Object.values(yr),ye=PB(it);F(ye);const Ce={};ye.forEach(Re=>{Ce[Re.appointments[0]]=Re.totalUnreadCount}),ce(Ce)}catch($t){console.error("Error fetching chat list:",$t),ne("Failed to load chats")}finally{ee(!1)}},[]),ze=xe.useCallback(async $t=>{try{await Nr.put(`/user/chat/${$t}/mark-seen`),ce(Ar=>({...Ar,[$t]:0}))}catch(Ar){console.error("Error marking messages as seen:",Ar)}},[]);xe.useEffect(()=>{if(!t||r!=="user"||!i)return;Me();const $t=Re=>{C&&Re.appointment.toString()===C.appointmentId.toString()?(D(Ze=>[...Ze,Re]),ze(C.appointmentId)):(ce(Ze=>({...Ze,[Re.appointment]:(Ze[Re.appointment]||0)+1})),F(Ze=>{const ot=Ze.map(vt=>vt.appointments.includes(Re.appointment)?{...vt,lastMessage:Re,totalUnreadCount:vt.totalUnreadCount+1}:vt);return PB(ot)})),be()},Ar=Re=>{D(Re||[]),C&&ze(C.appointmentId),be()},yr=Re=>{i&&C&&Re.userId!==i._id&&le(Ze=>new Set([...Ze,Re.userId]))},it=Re=>{i&&Re.userId!==i._id&&le(Ze=>{const ot=new Set(Ze);return ot.delete(Re.userId),ot})},ye=Re=>{(!s||C&&C.appointmentId!==Re.appointmentId)&&Notification.permission==="granted"&&new Notification(`New message from ${Re.from}`,{body:Re.message.message,icon:"/skillconnect.png"})},Ce=Re=>{console.error("Socket error:",Re),ne(Re)};return Gi.on("new-message",$t),Gi.on("chat-history",Ar),Gi.on("user-typing",yr),Gi.on("user-stopped-typing",it),Gi.on("message-notification",ye),Gi.on("error",Ce),Notification.permission==="default"&&Notification.requestPermission(),()=>{Gi.off("new-message",$t),Gi.off("chat-history",Ar),Gi.off("user-typing",yr),Gi.off("user-stopped-typing",it),Gi.off("message-notification",ye),Gi.off("error",Ce)}},[C,i,s,t,r,Me,ze,be]),xe.useEffect(()=>{!t||r!=="user"||!i||be()},[P,t,r,i,be]);const We=()=>{$e([{id:1,category:"Account",title:"Password Reset",description:"Forgot your password or need to change it",content:"Go to Settings > Account > Change Password. If you forgot your password, use 'Forgot Password' on the login screen."},{id:2,category:"Account",title:"Profile Updates",description:"Update your personal information and profile",content:"Navigate to Profile section to edit your name, email, phone, and profile picture."},{id:3,category:"Booking",title:"How to Book Services",description:"Learn how to find and book skilled workers",content:"Browse skilled users by service type, check their ratings and reviews, then send a service request with your requirements."},{id:4,category:"Booking",title:"Track Service Requests",description:"Monitor the status of your service requests",content:"Check your dashboard for active requests. You'll receive notifications when workers respond or accept your requests."},{id:5,category:"Payments",title:"Payment Methods",description:"Information about payments and billing",content:"Payments are processed securely through our platform. Contact support for billing questions."},{id:6,category:"Technical",title:"App Issues",description:"Report bugs or technical problems",content:"Please describe the issue you're experiencing. Include your device type and app version for faster resolution."},{id:7,category:"Technical",title:"Connection Problems",description:"Issues with internet connectivity",content:"Ensure you have a stable internet connection. Try restarting the app or checking your network settings."},{id:8,category:"General",title:"Contact Support",description:"Get in touch with our support team",content:`Email: skillconnect4b410@gmail.com
Phone: Available during business hours
We'll respond within 24 hours.`}])},ut=async $t=>{try{return(await Nr.get(`/user/booking/${$t}`)).data.booking}catch(Ar){return console.error("Error fetching booking details:",Ar),null}},dt=xe.useCallback(async $t=>{try{const it=(await Nr.get("/user/chat-history")).data.chatHistory?.find(ye=>ye.appointmentId.toString()===$t.toString())?.messages||[];D(it),it.length>0&&await Nr.put(`/user/chat/${$t}/mark-seen`),be(),Gi.emit("join-chat",$t)}catch(Ar){console.error("Error fetching chat history:",Ar),ne("Failed to load chat history")}},[be]),zt=xe.useCallback(async($t,Ar=null)=>{const yr=Ar||$t.appointmentId;let it={...$t,appointmentId:yr};if(yr)try{const ye=await ut(yr);ye&&(it.status=ye.status,it.serviceRequest=ye.serviceRequest,it.canComplete=ye.provider.toString()===i._id.toString()&&ye.status==="Working")}catch(ye){console.error("Error fetching booking details:",ye)}L(it),v("chat"),ne(null),dt(yr)},[i,dt]);if(xe.useEffect(()=>{if(a&&B.length>0){const $t=B.find(Ar=>Ar.appointments.includes(a));$t?(p(!0),zt($t,a),c(null)):ut(a).then(Ar=>{if(Ar){const ye={otherUser:i?.role==="Service Provider"?Ar.requester:Ar.provider,serviceRequest:Ar.serviceRequest,status:Ar.status,canComplete:Ar.provider.toString()===i._id.toString()&&Ar.status==="Working",appointments:[a],appointmentId:a,totalUnreadCount:0,lastMessage:null};p(!0),zt(ye,a)}else console.warn("Appointment not found:",a);c(null)}).catch(Ar=>{console.error("Error fetching booking:",Ar),c(null)})}},[a,B,i,zt,c]),xe.useEffect(()=>{if(Le.length>0){const $t={};Le.forEach(Ar=>{const yr=Ar.category||"General";$t[yr]||($t[yr]=[]),$t[yr].push(Ar)}),Te(Object.entries($t))}},[Le]),xe.useEffect(()=>{g==="help"&&Le.length===0&&We()},[g,Le.length]),!t||!i&&!n)return null;const ve=async()=>{if(!j.trim()||!C)return;const $t={id:Date.now(),message:j.trim(),sender:{_id:i._id,firstName:i.firstName,lastName:i.lastName,profilePic:i.profilePic},timestamp:new Date,status:"sent"};D(Ar=>[...Ar,$t]);try{await Nr.post("/user/send-message",{appointmentId:C.appointmentId,message:j.trim()}),q(""),Gi.emit("stop-typing",C.appointmentId),fe.current&&clearTimeout(fe.current)}catch(Ar){console.error("Error sending message:",Ar),ne("Failed to send message"),D(yr=>yr.filter(it=>it.id!==$t.id))}},Ct=()=>{C&&(Gi.emit("typing",C.appointmentId),fe.current&&clearTimeout(fe.current),fe.current=setTimeout(()=>{Gi.emit("stop-typing",C.appointmentId)},1e3))},Pt=$t=>{if(!$t)return"";const Ar=new Date($t);return isNaN(Ar.getTime())?"":Ar.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Ve=$t=>$t?$t.startsWith("http")?$t:`${uO}${$t}`:"/default-profile.png",lr=$t=>{switch($t){case"sent":return"";case"delivered":return"";case"seen":return"";default:return""}},ir=()=>{p(!s),s||(v("list"),L(null),D([]),ne(null))},jr=()=>{v("list"),L(null),D([]),le(new Set),K([])},ar=()=>{if(!me.trim())return;const $t={sender:"user",message:me.trim(),timestamp:new Date};K(Ar=>[...Ar,$t]),we(""),he(!0),setTimeout(()=>{const yr={sender:"support",message:Wr($t.message),timestamp:new Date};K(it=>[...it,yr]),he(!1)},1e3)},Wr=$t=>{const Ar=$t.toLowerCase();return Ar.includes("password")?"For password issues, please visit the Account Settings page or contact us at skillconnect4b410@gmail.com.":Ar.includes("booking")?"To book a service, navigate to the skilled users list and select a service. If you need help, check our help center.":Ar.includes("account")?"For account-related issues, please check your profile settings or contact us at skillconnect4b410@gmail.com.":Ar.includes("technical")||Ar.includes("bug")||Ar.includes("report")?"For technical issues or bugs, please provide details about what happened and your device/browser info. We'll investigate and get back to you.":Ar.includes("help")||Ar.includes("support")||Ar.includes("other")||Ar.includes("contact")?"I'm here to help! Please describe your issue in detail.":"Thank you for contacting support. Our team will respond shortly. For urgent issues, email skillconnect4b410@gmail.com."},Lr=$t=>{const yr={sender:"user",message:{password:"I need help with password reset",booking:"I need help with booking a service",account:"I have account issues",technical:"I have a technical issue or found a bug",other:"I have another support request"}[$t],timestamp:new Date};K([yr]),he(!0),setTimeout(()=>{const it={sender:"support",message:Wr(yr.message),timestamp:new Date};K([yr,it]),he(!1)},1e3)},Zr=async()=>{if(!C)return;const $t=prompt("Please provide a reason for reporting this user:");if($t&&$t.trim())try{(await Nr.post("/user/report-user",{reportedUserId:C.otherUser._id,reason:$t.trim(),appointmentId:C.appointmentId})).data.success&&alert("User reported successfully. Our team will review your report.")}catch(Ar){console.error("Error reporting user:",Ar);const yr=Ar.response?.data?.message||"Failed to report user. Please try again.";alert(yr)}},qr=async()=>{if(!C)return;if(window.confirm(`Are you sure you want to block ${C.otherUser.firstName} ${C.otherUser.lastName}? You won't be able to send or receive messages from this user.`))try{(await Nr.post("/user/block-user",{targetUserId:C.otherUser._id})).data.success&&(alert(`User ${C.otherUser.firstName} ${C.otherUser.lastName} has been blocked.`),jr())}catch(Ar){console.error("Error blocking user:",Ar);const yr=Ar.response?.data?.message||"Failed to block user. Please try again.";alert(yr)}},wi=async()=>{if(!C)return;const $t=prompt("Rate this user (1-5 stars):","5"),Ar=parseInt($t);if(Ar>=1&&Ar<=5){const yr=prompt("Add a comment (optional):");try{(await Nr.post("/review",{bookingId:C.appointmentId,rating:Ar,comments:yr||""})).data.success&&alert(`Thank you for rating ${C.otherUser.firstName} ${C.otherUser.lastName} with ${Ar} stars!`)}catch(it){console.error("Error rating user:",it);const ye=it.response?.data?.message||"Failed to submit rating. Please try again.";alert(ye)}}else $t!==null&&alert("Please enter a rating between 1 and 5.")},Ci=Object.values(J).reduce(($t,Ar)=>$t+Ar,0);return d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"navbar-icon-btn",onClick:ir,children:[d.jsx(OU,{size:24}),Ci>0&&d.jsx("span",{className:"chat-badge",children:Ci})]}),s&&d.jsxs("div",{className:"chat-panel",children:[d.jsx("div",{className:"chat-header",children:g==="chat"?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"back-button",onClick:jr,children:d.jsx("i",{className:"fas fa-chevron-left"})}),d.jsx("div",{className:"header-title-section",children:d.jsxs("h2",{className:"chat-header-title",children:[C?.otherUser?.firstName," ",C?.otherUser?.lastName]})}),d.jsxs("div",{className:"chat-header-actions",children:[d.jsx("button",{className:`status-badge ${C?.status?.toLowerCase()}`,onClick:()=>{C?.serviceRequest&&(C.serviceRequest.provider._id===i._id?e("/user/client-accepted",{state:{requestId:C.appointmentId}}):e("/user/waiting-for-worker"))},title:"View Request Details",children:C?.status}),d.jsx("button",{className:"user-menu-btn",onClick:()=>Y(!Ge),title:"User options",children:d.jsx(oO,{size:20})})]})]}):g==="help"?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"back-button",onClick:()=>v("list"),children:d.jsx("i",{className:"fas fa-chevron-left"})}),d.jsx("h2",{children:"Help Center"})]}):g==="help-topics"?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"back-button",onClick:()=>v("help"),children:d.jsx("i",{className:"fas fa-chevron-left"})}),d.jsx("h2",{children:"Help Topics"})]}):d.jsxs(d.Fragment,{children:[d.jsx("h2",{children:"Messages"}),d.jsxs("div",{className:"header-actions",children:[d.jsx("button",{className:"help-header-btn",onClick:()=>v("help"),title:"Help",children:"?"}),d.jsx("button",{className:"close-header-btn",onClick:ir,children:d.jsx(cO,{size:20})})]})]})}),Ge&&C&&d.jsxs("div",{className:"user-menu-dropdown",children:[d.jsx("button",{className:"user-menu-item",onClick:()=>{Y(!1),Zr()},children:" Report User"}),d.jsx("button",{className:"user-menu-item",onClick:()=>{Y(!1),qr()},children:" Block User"}),i?.role!=="Service Provider"&&d.jsx("button",{className:"user-menu-item",onClick:()=>{Y(!1),wi()},children:" Rate User"})]}),d.jsx("div",{className:"messages-container",children:g==="list"?H?d.jsxs("div",{className:"loading-text",children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[d.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid #c20884",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Loading conversations..."]}),d.jsx("style",{children:`
                    @keyframes spin {
                      0% { transform: rotate(0deg); }
                      100% { transform: rotate(360deg); }
                    }
                  `})]}):G?d.jsx("div",{className:"error-text",children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[d.jsx("span",{style:{fontSize:"24px"},children:""}),G]})}):d.jsxs("div",{className:"chat-list",children:[d.jsxs("div",{className:"chat-item",onClick:()=>v("help"),children:[d.jsxs("div",{className:"chat-item-header",children:[d.jsx("h4",{children:"Help Center"}),d.jsx("small",{children:"Support"})]}),d.jsx("p",{className:"last-message",children:"Get help with your questions"})]}),r==="user"&&B.map($t=>d.jsxs("div",{className:"chat-item",onClick:()=>zt($t),children:[d.jsxs("div",{className:"chat-item-header",children:[d.jsxs("h4",{children:[$t.otherUser?.firstName," ",$t.otherUser?.lastName]}),$t.lastMessage&&d.jsx("small",{children:Pt($t.lastMessage.timestamp)})]}),d.jsxs("div",{className:"chat-item-content",children:[d.jsx("p",{className:"service-name",children:$t.serviceRequest?.name}),$t.lastMessage?d.jsxs("p",{className:"last-message",children:[d.jsxs("strong",{children:[$t.lastMessage.sender?.firstName,":"]})," ",$t.lastMessage.message]}):d.jsx("p",{className:"no-messages",children:"No messages yet"})]}),J[$t.appointmentId]>0&&d.jsx("span",{className:"unread-badge",children:J[$t.appointmentId]})]},$t.appointmentId))]}):g==="chat"?d.jsxs("div",{className:"chat-messages",children:[G&&d.jsx("p",{className:"error",children:G}),d.jsxs("div",{className:"messages-container",children:[P.map($t=>d.jsxs("div",{className:`message-wrapper ${$t.sender._id===i._id?"own":"other"}`,children:[d.jsx("div",{className:"message-timestamp",children:d.jsx("small",{children:Pt($t.timestamp)})}),d.jsxs("div",{className:`message ${$t.sender._id===i._id?"own":"other"}`,children:[$t.sender._id!==i._id&&d.jsx("img",{src:Ve($t.sender.profilePic),alt:`${$t.sender.firstName} ${$t.sender.lastName}`,className:"message-avatar",onError:Ar=>{Ar.target.src="/default-profile.png"}}),d.jsx("div",{className:"message-content",children:d.jsx("span",{children:$t.message})}),$t.sender._id===i._id&&d.jsx("span",{className:`message-status ${$t.status}`,children:lr($t.status)})]})]},$t.id||$t._id)),Z.size>0&&d.jsx("div",{className:"typing-indicator",children:d.jsx("span",{children:"Someone is typing..."})}),d.jsx("div",{ref:Ae})]}),d.jsxs("div",{className:"message-input-section",children:[d.jsx("input",{type:"text",value:j,onChange:$t=>{q($t.target.value),Ct()},onKeyPress:$t=>$t.key==="Enter"&&ve(),placeholder:"Type a message...",disabled:H,className:"message-input"}),d.jsx("button",{className:"send-button",onClick:ve,disabled:!j.trim()||H,title:"Send message",children:d.jsx("i",{className:"fas fa-paper-plane"})})]})]}):g==="help-topics"?d.jsx("div",{className:"help-topics-view",children:Ne.map(([$t,Ar])=>d.jsxs("div",{className:"category-section",children:[d.jsx("h4",{className:"category-title",children:$t}),Ar.map(yr=>d.jsxs("div",{className:"help-topic-item",onClick:()=>{v("help");const it={sender:"user",message:`I need help with: ${yr.title}`,timestamp:new Date};K([it]),he(!0),setTimeout(()=>{const ye={sender:"support",message:yr.content,timestamp:new Date};K([it,ye]),he(!1)},1e3)},children:[d.jsxs("div",{className:"help-topic-content",children:[d.jsx("h5",{className:"help-topic-title",children:yr.title}),d.jsx("p",{className:"help-topic-desc",children:yr.description})]}),d.jsx("span",{className:"help-topic-arrow",children:""})]},yr.id))]},$t))}):d.jsxs("div",{className:"chat-messages",children:[d.jsxs("div",{className:"messages-container",children:[te.map(($t,Ar)=>d.jsx("div",{className:`message-wrapper ${$t.sender==="user"?"own":"other"}`,children:d.jsx("div",{className:`message ${$t.sender==="user"?"own":"other"}`,children:d.jsx("div",{className:"message-content",children:d.jsx("span",{children:$t.message})})})},Ar)),Fe&&d.jsx("div",{className:"typing-indicator",children:d.jsx("span",{children:"Support is typing..."})}),te.length===0&&!Fe&&d.jsx("div",{className:"message-wrapper other",children:d.jsx("div",{className:"message other",children:d.jsxs("div",{className:"message-content",children:[d.jsx("span",{children:"Welcome to Help Center! How can we assist you today?"}),d.jsxs("div",{className:"quick-actions",children:[d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("password"),children:"Password Reset"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("booking"),children:"Booking Help"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("account"),children:"Account Issues"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("technical"),children:"Technical Issues"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("other"),children:"Other"})]}),d.jsxs("div",{className:"browse-topics-button",children:[d.jsx("span",{children:""}),d.jsx("span",{className:"browse-topics-text",children:"Browse Help Topics"})]})]})})}),te.length>0&&te[te.length-1].sender==="support"&&!Fe&&d.jsx("div",{className:"message-wrapper other",children:d.jsx("div",{className:"message other",children:d.jsxs("div",{className:"message-content",children:[d.jsx("span",{children:"Is there anything else I can help you with?"}),d.jsxs("div",{className:"quick-actions",children:[d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("password"),children:"Password Reset"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("booking"),children:"Booking Help"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("account"),children:"Account Issues"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("technical"),children:"Technical Issues"}),d.jsx("button",{className:"quick-action-button",onClick:()=>Lr("other"),children:"Other"})]})]})})}),d.jsx("div",{ref:Ae})]}),d.jsxs("div",{className:"message-input",children:[d.jsx("input",{type:"text",value:me,onChange:$t=>we($t.target.value),onKeyPress:$t=>$t.key==="Enter"&&ar(),placeholder:"Type your message to support...",disabled:Fe}),d.jsx("button",{className:"send-btn",onClick:ar,disabled:!me.trim()||Fe,children:""})]})]})})]})]})},AO=()=>"http://192.168.1.12:4000/api/v1",dO=()=>AO().replace(/\/api\/v1$/,""),gp=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t=dO(),r=e.startsWith("/")?e.substring(1):e;return`${t}/${r}`},fO=()=>{const{user:e,admin:t,isAuthorized:r,tokenType:i,logout:n}=io(),[a,c]=xe.useState(!1),[s,p]=xe.useState(!1),[g,v]=xe.useState(!1),[B,F]=xe.useState(!1),[C,L]=xe.useState([]),[P,D]=xe.useState(!1),[j,q]=xe.useState(0),H=Wo(),ee=xe.useCallback(he=>{he.key==="Escape"&&(c(!1),p(!1))},[]),G=xe.useCallback(he=>{he.target.closest(".dropdown")||p(!1)},[]),ne=xe.useCallback(async()=>{if(!r||!localStorage.getItem("token")){q(0);return}try{const{data:he}=await Nr.get("/user/notifications/unread-count");q(he.unreadCount||0)}catch(he){console.error("Error fetching unread count:",he),he.response?.status===401&&q(0)}},[r]);xe.useEffect(()=>(a||s?(document.addEventListener("keydown",ee),document.addEventListener("click",G)):(document.removeEventListener("keydown",ee),document.removeEventListener("click",G)),()=>{document.removeEventListener("keydown",ee),document.removeEventListener("click",G)}),[a,s,ee,G]),xe.useEffect(()=>{r?ne():q(0)},[r,ne]);const Z=async()=>{if(!g){v(!0);try{await n(),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("isAuthorized"),localStorage.removeItem("tokenType"),localStorage.removeItem("rememberedEmail"),H(i==="admin"?"/admin/login":"/login")}catch(he){console.error("Logout failed:",he.message),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("isAuthorized"),localStorage.removeItem("tokenType"),localStorage.removeItem("rememberedEmail"),H(i==="admin"?"/admin/login":"/user/my-service")}finally{v(!1)}}},le=async()=>{if(!r||!localStorage.getItem("token")){L([]),D(!1);return}D(!0);try{const{data:he}=await Nr.get("/user/notifications");L(he.notifications||[])}catch(he){console.error("Error fetching notifications:",he),he.response?.status===401&&L([])}finally{D(!1)}},J=async()=>{F(!B),B||le(),await te()},ce=async he=>{try{await Nr.put(`/user/notifications/${he._id}/read`),L($e=>$e.map(Ne=>Ne._id===he._id?{...Ne,read:!0}:Ne)),q($e=>Math.max(0,$e-1));const{meta:Le}=he;Le&&(Le.type==="apply-provider"?H("/user/manage-profile"):(Le.type==="service-request"||Le.type==="service-request-posted")&&Le.requestId?H("/user/my-service"):Le.bookingId?H("/user/chat"):Le.apptId?t&&H("/admin/verification"):Le.type==="verification_appointment"&&H("/user/manage-profile")),F(!1)}catch(Le){console.error("Error handling notification click:",Le)}},te=async()=>{try{await Nr.put("/user/notifications/mark-all-read"),L(he=>he.map(Le=>({...Le,read:!0}))),q(0)}catch(he){console.error("Error marking all notifications as read:",he)}},K=he=>{if(!he)return"";const Le=new Date(he);return isNaN(Le.getTime())?"":Le.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};xe.useEffect(()=>{if(typeof window>"u")return;const he=()=>{window.innerWidth>1024&&c(!1)};return window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]),xe.useEffect(()=>{if(typeof document>"u")return;const he=document.body.style.overflow;return a?document.body.style.overflow="hidden":document.body.style.overflow=he,()=>{document.body.style.overflow=he}},[a]);const me=xe.useMemo(()=>e?`${e.firstName||""} ${e.lastName||""}`.trim():"",[e]),we=xe.useMemo(()=>e?.profilePic?gp(e.profilePic):me?`https://ui-avatars.com/api/?background=FC60AE&color=fff&name=${encodeURIComponent(me)}`:"https://ui-avatars.com/api/?background=FC60AE&color=fff&name=User",[e?.profilePic,me]),Fe=xe.useMemo(()=>[{to:"/user/manage-profile",icon:d.jsx(MB,{}),label:"Profile",helper:"Profile, identity & verification"},{to:"/user/service-request",icon:d.jsx(FB,{}),label:"Request Service",helper:"Create or track service requests"},{to:"/user/records",icon:d.jsx($U,{}),label:"My Records",helper:"Invoices, receipts & history"},{to:"/user/general-settings",icon:d.jsx(aO,{}),label:"General Settings",helper:"Preferences & notifications"}],[]);return d.jsxs("nav",{className:"navbar",role:"navigation","aria-label":"Main navigation",children:[d.jsxs("div",{className:"navbar-container",children:[d.jsxs(Ac,{to:"/home",className:"navbar-logo",children:[d.jsx("img",{src:"/skillconnect.png",alt:"SkillConnect4B410 logo",className:"navbar-logo-image"}),d.jsx("span",{className:"navbar-logo-text",children:"SkillConnect4B410"})]}),a&&d.jsx("div",{className:"navbar-backdrop",onClick:()=>{c(!1)}}),d.jsxs("div",{className:`navbar-menu ${a?"mobile-menu show":""}`,id:"navigation-menu",children:[a&&d.jsxs("div",{className:"mobile-menu-header",children:[d.jsxs(Ac,{to:"/home",className:"navbar-logo",onClick:()=>c(!1),children:[d.jsx("img",{src:"/skillconnect.png",alt:"SkillConnect4B410 logo",className:"navbar-logo-image"}),d.jsx("span",{className:"navbar-logo-text",children:"SkillConnect4B410"})]}),d.jsx("button",{type:"button",className:"mobile-menu-close",onClick:()=>c(!1),"aria-label":"Close menu",children:""})]}),d.jsxs("ul",{className:"navbar-menu-list",children:[!r&&d.jsx(d.Fragment,{children:d.jsx("li",{role:"none",children:d.jsx(Ac,{to:"/home",className:"navbar-link",role:"menuitem","aria-label":"Go to home page",children:"HOME"})})}),!r&&d.jsxs(d.Fragment,{children:[d.jsx("li",{role:"none",children:d.jsx(Ac,{to:"/login",className:"navbar-link",role:"menuitem","aria-label":"Login to your account",children:"LOGIN"})}),d.jsx("li",{role:"none",children:d.jsx(Ac,{to:"/register",className:"navbar-link",role:"menuitem","aria-label":"Create a new account",children:"REGISTER"})})]}),r&&i!=="admin"&&d.jsx("li",{role:"none",children:d.jsxs("button",{type:"button",onClick:J,className:"navbar-icon-btn","aria-label":"View notifications",children:[d.jsx(sO,{size:24}),j>0&&d.jsx("span",{className:"notification-badge",children:j>99?"99+":j})]})}),r&&i!=="admin"&&d.jsx("li",{role:"none",children:d.jsx(hO,{})}),e?.role==="Service Provider"&&i!=="admin"&&d.jsx("li",{role:"none",children:d.jsx(Ac,{to:"/user/my-service",className:"navbar-icon-btn","aria-label":"My Service",children:d.jsx(FB,{size:24})})}),e&&i!=="admin"&&d.jsxs("li",{role:"none",className:"dropdown",children:[d.jsx("button",{type:"button",className:"dashboard-toggle",onClick:()=>p(!s),"aria-label":"User dashboard menu","aria-expanded":s,children:d.jsx(MB,{size:24})}),s&&d.jsxs("ul",{className:"dropdown-menu",role:"menu",children:[d.jsx("li",{className:"dropdown-profile",children:d.jsxs(Ac,{to:"/user/manage-profile",className:"dropdown-profile-link",children:[d.jsx("img",{src:we,alt:"User avatar"}),d.jsxs("div",{className:"dropdown-profile-info",children:[d.jsx("strong",{children:me||"SkillConnect User"}),d.jsx("small",{children:e?.role||"Member"})]})]})}),d.jsx("li",{className:"dropdown-grid",role:"presentation",children:Fe.map(({to:he,icon:Le,label:$e,helper:Ne})=>d.jsxs(Ac,{to:he,className:"dropdown-action",onClick:()=>p(!1),children:[d.jsx("span",{className:"dropdown-action-icon",children:Le}),d.jsxs("div",{children:[d.jsx("p",{children:$e}),d.jsx("small",{children:Ne})]})]},$e))}),d.jsx("li",{className:"logout-item",children:d.jsxs("button",{type:"button",onClick:Z,children:[d.jsx(eF,{}),"Log Out"]})})]})]})]})]}),d.jsx("button",{type:"button",className:"hamburger",onClick:()=>c(!a),"aria-label":a?"Close navigation menu":"Open navigation menu","aria-expanded":a,"aria-controls":"navigation-menu",children:d.jsx(jU,{})})]}),B&&d.jsx("div",{className:"notification-popup-overlay",onClick:()=>F(!1),children:d.jsxs("div",{className:"notification-popup",onClick:he=>he.stopPropagation(),children:[d.jsxs("div",{className:"notification-popup-header",children:[d.jsx("h3",{children:"Notifications"}),d.jsx("button",{className:"notification-popup-close",onClick:()=>F(!1),children:""})]}),d.jsx("div",{className:"notification-popup-content",children:P?d.jsx("p",{children:"Loading..."}):C.length===0?d.jsx("div",{className:"notification-empty",children:d.jsx("p",{children:"No notifications yet"})}):d.jsx(d.Fragment,{children:C.map(he=>d.jsx("div",{className:`notification-item ${he.read?"":"notification-item-unread"}`,onClick:()=>ce(he),children:d.jsxs("div",{className:"notification-item-content",children:[d.jsx("div",{className:"notification-item-title",children:he.title}),d.jsx("div",{className:"notification-item-message",children:he.message}),d.jsx("div",{className:"notification-item-time",children:K(he.createdAt)})]})},he._id))})})]})})]})};function pO(e){return Ki({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.0281 2.00073C14.1535 2.00259 14.7238 2.00855 15.2166 2.02322L15.4107 2.02956C15.6349 2.03753 15.8561 2.04753 16.1228 2.06003C17.1869 2.1092 17.9128 2.27753 18.5503 2.52503C19.2094 2.7792 19.7661 3.12253 20.3219 3.67837C20.8769 4.2342 21.2203 4.79253 21.4753 5.45003C21.7219 6.0867 21.8903 6.81337 21.9403 7.87753C21.9522 8.1442 21.9618 8.3654 21.9697 8.58964L21.976 8.78373C21.9906 9.27647 21.9973 9.84686 21.9994 10.9723L22.0002 11.7179C22.0003 11.809 22.0003 11.903 22.0003 12L22.0002 12.2821L21.9996 13.0278C21.9977 14.1532 21.9918 14.7236 21.9771 15.2163L21.9707 15.4104C21.9628 15.6347 21.9528 15.8559 21.9403 16.1225C21.8911 17.1867 21.7219 17.9125 21.4753 18.55C21.2211 19.2092 20.8769 19.7659 20.3219 20.3217C19.7661 20.8767 19.2069 21.22 18.5503 21.475C17.9128 21.7217 17.1869 21.89 16.1228 21.94C15.8561 21.9519 15.6349 21.9616 15.4107 21.9694L15.2166 21.9757C14.7238 21.9904 14.1535 21.997 13.0281 21.9992L12.2824 22C12.1913 22 12.0973 22 12.0003 22L11.7182 22L10.9725 21.9993C9.8471 21.9975 9.27672 21.9915 8.78397 21.9768L8.58989 21.9705C8.36564 21.9625 8.14444 21.9525 7.87778 21.94C6.81361 21.8909 6.08861 21.7217 5.45028 21.475C4.79194 21.2209 4.23444 20.8767 3.67861 20.3217C3.12278 19.7659 2.78028 19.2067 2.52528 18.55C2.27778 17.9125 2.11028 17.1867 2.06028 16.1225C2.0484 15.8559 2.03871 15.6347 2.03086 15.4104L2.02457 15.2163C2.00994 14.7236 2.00327 14.1532 2.00111 13.0278L2.00098 10.9723C2.00284 9.84686 2.00879 9.27647 2.02346 8.78373L2.02981 8.58964C2.03778 8.3654 2.04778 8.1442 2.06028 7.87753C2.10944 6.81253 2.27778 6.08753 2.52528 5.45003C2.77944 4.7917 3.12278 4.2342 3.67861 3.67837C4.23444 3.12253 4.79278 2.78003 5.45028 2.52503C6.08778 2.27753 6.81278 2.11003 7.87778 2.06003C8.14444 2.04816 8.36564 2.03847 8.58989 2.03062L8.78397 2.02433C9.27672 2.00969 9.8471 2.00302 10.9725 2.00086L13.0281 2.00073ZM12.0003 7.00003C9.23738 7.00003 7.00028 9.23956 7.00028 12C7.00028 14.7629 9.23981 17 12.0003 17C14.7632 17 17.0003 14.7605 17.0003 12C17.0003 9.23713 14.7607 7.00003 12.0003 7.00003ZM12.0003 9.00003C13.6572 9.00003 15.0003 10.3427 15.0003 12C15.0003 13.6569 13.6576 15 12.0003 15C10.3434 15 9.00028 13.6574 9.00028 12C9.00028 10.3431 10.3429 9.00003 12.0003 9.00003ZM17.2503 5.50003C16.561 5.50003 16.0003 6.05994 16.0003 6.74918C16.0003 7.43843 16.5602 7.9992 17.2503 7.9992C17.9395 7.9992 18.5003 7.4393 18.5003 6.74918C18.5003 6.05994 17.9386 5.49917 17.2503 5.50003Z"},child:[]}]})(e)}const mO=()=>d.jsxs("footer",{className:"footer",children:[d.jsxs("div",{className:"footer-content",children:[d.jsxs("div",{className:"footer-section",children:[d.jsx("h2",{className:"footer-brand",children:"SkillConnect4b410"}),d.jsx("p",{className:"footer-desc",children:"Building modern solutions with simplicity and elegance."})]}),d.jsxs("div",{className:"footer-section",children:[d.jsx("h3",{children:"Quick Links"}),d.jsxs("ul",{className:"footer-links",children:[d.jsx("li",{children:d.jsx(Ac,{to:"/",children:"Home"})}),d.jsx("li",{children:d.jsx("a",{href:"/services",children:"Services"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",children:"Contact"})})]})]}),d.jsxs("div",{className:"footer-section",children:[d.jsx("h3",{children:"Follow Us"}),d.jsxs("div",{className:"footer-socials",children:[d.jsx("a",{href:"#",className:"footer-social-link",children:d.jsx(UU,{})}),d.jsx("a",{href:"#",className:"footer-social-link",children:d.jsx(pO,{})}),d.jsx("a",{href:"#",className:"footer-social-link",children:d.jsx(QU,{})}),d.jsx("a",{href:"#",className:"footer-social-link",children:d.jsx(zU,{})}),d.jsx("a",{href:"#",className:"footer-social-link",children:d.jsx(HU,{})})]})]})]}),d.jsxs("div",{className:"footer-bottom",children:[d.jsxs("p",{children:[" ",new Date().getFullYear()," SkillConnect4b410. All rights reserved."]}),d.jsxs("div",{className:"footer-legal",children:[d.jsx("a",{href:"/terms",children:"Terms & Conditions"}),d.jsx("span",{className:"footer-separator",children:" | "}),d.jsx("a",{href:"/privacy",children:"Privacy Policy"})]})]})]}),gO=()=>d.jsxs("div",{className:"hero",children:[d.jsxs("div",{className:"hero-background",children:[d.jsx("div",{className:"hero-pattern"}),d.jsx("div",{className:"hero-gradient"})]}),d.jsxs("div",{className:"hero-content",children:[d.jsxs("div",{className:"hero-text",children:[d.jsx("h6",{className:"hero-welcome",children:"Welcome to"}),d.jsxs("div",{className:"hero-title-container",children:[d.jsx("h1",{className:"hero-title",children:"SkillConnect 4B410"}),d.jsx("div",{className:"hero-title-underline"})]}),d.jsx("div",{className:"hero-subtitle",children:d.jsx("h4",{children:"BARANGAY 410 ZONE 42"})}),d.jsx("p",{className:"hero-description",children:"Connecting skilled workers with opportunities in Barangay 410 Zone 42. Find local services, post your skills, and build a stronger community together. Join our network of local professionals and discover new possibilities."})]}),d.jsxs("div",{className:"hero-buttons",children:[d.jsxs(Ac,{to:"/register",className:"cta-button primary hero-cta",children:[d.jsx(lf,{className:"btn-icon"}),"Find Services",d.jsx(o5,{className:"btn-arrow"})]}),d.jsxs(Ac,{to:"/register",className:"cta-button secondary hero-cta",children:[d.jsx(cf,{className:"btn-icon"}),"Provide a Service",d.jsx(o5,{className:"btn-arrow"})]})]}),d.jsxs("div",{className:"hero-trust",children:[d.jsxs("div",{className:"trust-item",children:[d.jsx(l5,{className:"trust-icon"}),d.jsx("span",{children:"Verified Professionals"})]}),d.jsxs("div",{className:"trust-item",children:[d.jsx(cf,{className:"trust-icon"}),d.jsx("span",{children:"Local Community"})]}),d.jsxs("div",{className:"trust-item",children:[d.jsx(J6,{className:"trust-icon"}),d.jsx("span",{children:"Easy to Find Services"})]})]})]}),d.jsxs("div",{className:"hero-floating-elements",children:[d.jsx("div",{className:"floating-element element-1",children:d.jsx(lf,{})}),d.jsx("div",{className:"floating-element element-2",children:d.jsx(cf,{})}),d.jsx("div",{className:"floating-element element-3",children:d.jsx(l5,{})})]})]});function vO(e){return Ki({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 448l416-192L48 64v149.333L346 256 48 298.667z"},child:[]}]})(e)}const xO=()=>{const e=[{icon:iO,title:"Create Account",description:"Sign up in seconds and set up your profile. Choose your role as a Service Provider or Community Member and start connecting with others.",color:"#e11d48",bgGradient:"from-rose-50 to-pink-50"},{icon:lO,title:"Find or Post Services",description:"Browse available services in your area or post your own offerings. Filter by category, location, and ratings to find the perfect match.",color:"#6366f1",bgGradient:"from-indigo-50 to-blue-50"},{icon:vO,title:"Connect & Collaborate",description:"Apply for services, send messages, and finalize arrangements. Work together seamlessly with built-in communication tools.",color:"#10b981",bgGradient:"from-emerald-50 to-teal-50"}];return d.jsxs("section",{className:"how-it-works-section",children:[d.jsx("div",{className:"how-it-works-bg-blur-1"}),d.jsx("div",{className:"how-it-works-bg-blur-2"}),d.jsxs("div",{className:"how-it-works-container",children:[d.jsxs("div",{className:"how-it-works-header",children:[d.jsx("h2",{className:"how-it-works-title",children:"How SkillConnect Works"}),d.jsx("p",{className:"how-it-works-subtitle",children:"Three simple steps to connect with skilled professionals or find your next opportunity in your local community"})]}),d.jsx("div",{className:"how-it-works-grid",children:e.map((t,r)=>{const i=t.icon;return d.jsxs("div",{className:"how-it-works-card-wrapper",children:[r<e.length-1&&d.jsx("div",{className:"how-it-works-connector",children:d.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[d.jsx("stop",{offset:"0%",stopColor:"#e11d48"}),d.jsx("stop",{offset:"50%",stopColor:"#6366f1"}),d.jsx("stop",{offset:"100%",stopColor:"#10b981"})]})}),d.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"url(#gradient)",strokeWidth:"3"}),d.jsx("circle",{cx:"100",cy:"50",r:"5",fill:"url(#gradient)"})]})}),d.jsxs("div",{className:`how-it-works-card bg-gradient-to-br ${t.bgGradient}`,children:[d.jsx("div",{className:"how-it-works-step-number",children:r+1}),d.jsx("div",{className:"how-it-works-icon-wrapper",style:{background:`linear-gradient(135deg, ${t.color} 0%, ${t.color}dd 100%)`},children:d.jsx(i,{className:"how-it-works-icon"})}),d.jsx("h3",{className:"how-it-works-card-title",children:t.title}),d.jsx("p",{className:"how-it-works-card-description",children:t.description}),d.jsx("div",{className:"how-it-works-card-accent",style:{backgroundColor:t.color}})]})]},r)})}),d.jsxs("div",{className:"how-it-works-cta",children:[d.jsx("h3",{children:"Ready to Get Started?"}),d.jsx("p",{children:"Join thousands of community members and skilled professionals already connected on SkillConnect"}),d.jsx("div",{className:"how-it-works-cta-buttons",children:d.jsx("button",{className:"how-it-works-btn how-it-works-btn-primary",children:d.jsx("a",{href:"/register",children:"Create an Account"})})})]})]}),d.jsx("style",{children:`
        .how-it-works-section {
          position: relative;
          padding: 5rem 1.5rem;
          background: linear-gradient(to bottom, #ffffff 0%, #f9fafb 100%);
          overflow: hidden;
        }

        @media (max-width: 768px) {
          .how-it-works-section {
            padding: 3rem 1rem;
          }
        }

        /* Background Blur Elements */
        .how-it-works-bg-blur-1 {
          position: absolute;
          top: -200px;
          right: -200px;
          width: 600px;
          height: 600px;
          background: radial-gradient(circle, rgba(225, 29, 72, 0.08) 0%, transparent 70%);
          border-radius: 50%;
          pointer-events: none;
        }

        .how-it-works-bg-blur-2 {
          position: absolute;
          bottom: -200px;
          left: -200px;
          width: 600px;
          height: 600px;
          background: radial-gradient(circle, rgba(99, 102, 241, 0.08) 0%, transparent 70%);
          border-radius: 50%;
          pointer-events: none;
        }

        /* Container */
        .how-it-works-container {
          position: relative;
          z-index: 2;
          max-width: 1200px;
          margin: 0 auto;
        }

        /* ========================================
           HEADER
           ======================================== */

        .how-it-works-header {
          text-align: center;
          margin-bottom: 4rem;
        }

        .how-it-works-badge {
          display: inline-block;
          padding: 0.75rem 1.5rem;
          background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
          border-radius: 50px;
          font-size: 0.85rem;
          font-weight: 600;
          color: #be123c;
          margin-bottom: 1rem;
          text-transform: uppercase;
          letter-spacing: 1px;
        }

        .how-it-works-title {
          font-size: 2.75rem;
          font-weight: 800;
          color: #111827;
          margin: 0 0 1rem 0;
          background: linear-gradient(135deg, #e11d48 0%, #6366f1 50%, #10b981 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          line-height: 1.2;
        }

        @media (max-width: 768px) {
          .how-it-works-title {
            font-size: 2rem;
          }
        }

        .how-it-works-subtitle {
          font-size: 1.1rem;
          color: #6b7280;
          max-width: 600px;
          margin: 0 auto;
          line-height: 1.6;
        }

        @media (max-width: 768px) {
          .how-it-works-subtitle {
            font-size: 1rem;
          }
        }

        /* ========================================
           GRID & CARDS
           ======================================== */

        .how-it-works-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 2.5rem;
          margin-bottom: 4rem;
        }

        @media (max-width: 768px) {
          .how-it-works-grid {
            gap: 2rem;
          }
        }

        .how-it-works-card-wrapper {
          position: relative;
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        /* Connector Lines */
        .how-it-works-connector {
          position: absolute;
          top: 120px;
          left: 100%;
          width: 100%;
          height: 4px;
          display: none;
        }

        @media (min-width: 769px) {
          .how-it-works-connector {
            display: block;
          }
        }

        .how-it-works-connector svg {
          width: 100%;
          height: 100%;
        }

        /* Card */
        .how-it-works-card {
          position: relative;
          background: white;
          border-radius: 1.5rem;
          padding: 2.5rem 2rem;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
          transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
          border: 1px solid rgba(255, 255, 255, 0.8);
          overflow: hidden;
          height: 100%;
          display: flex;
          flex-direction: column;
        }

        .how-it-works-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #e11d48, #6366f1, #10b981);
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .how-it-works-card:hover {
          transform: translateY(-12px);
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
          border-color: rgba(225, 29, 72, 0.1);
        }

        .how-it-works-card:hover::before {
          opacity: 1;
        }

        /* Step Number */
        .how-it-works-step-number {
          position: absolute;
          top: -15px;
          right: 20px;
          width: 60px;
          height: 60px;
          background: linear-gradient(135deg, #e11d48 0%, #ec4899 100%);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.75rem;
          font-weight: 800;
          color: white;
          box-shadow: 0 8px 20px rgba(225, 29, 72, 0.3);
        }

        .how-it-works-card:nth-child(2) .how-it-works-step-number {
          background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
          box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }

        .how-it-works-card:nth-child(3) .how-it-works-step-number {
          background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%);
          box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        /* Icon Wrapper */
        .how-it-works-icon-wrapper {
          width: 80px;
          height: 80px;
          border-radius: 1.25rem;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 1.5rem;
          box-shadow: 0 8px 20px rgba(225, 29, 72, 0.2);
          transition: transform 0.3s ease;
        }

        .how-it-works-card:hover .how-it-works-icon-wrapper {
          transform: scale(1.1) rotateZ(5deg);
        }

        .how-it-works-icon {
          font-size: 2.5rem;
          color: white;
        }

        /* Card Title */
        .how-it-works-card-title {
          font-size: 1.3rem;
          font-weight: 700;
          color: #111827;
          margin: 0 0 1rem 0;
          text-align: center;
        }

        /* Card Description */
        .how-it-works-card-description {
          font-size: 0.95rem;
          color: #6b7280;
          line-height: 1.6;
          margin: 0;
          text-align: center;
          flex: 1;
        }

        /* Card Accent */
        .how-it-works-card-accent {
          height: 3px;
          width: 40px;
          margin: 1.5rem auto 0;
          border-radius: 2px;
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .how-it-works-card:hover .how-it-works-card-accent {
          opacity: 1;
        }

        /* ========================================
           CTA SECTION
           ======================================== */

        .how-it-works-cta {
          background: linear-gradient(135deg, #4f46e5 0%, #6366f1 50%, #a78bfa 100%);
          border-radius: 2rem;
          padding: 3rem 2rem;
          text-align: center;
          color: white;
          position: relative;
          overflow: hidden;
        }

        .how-it-works-cta::before {
          content: '';
          position: absolute;
          top: -50%;
          right: -50%;
          width: 500px;
          height: 500px;
          background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
          border-radius: 50%;
          pointer-events: none;
        }

        .how-it-works-cta::after {
          content: '';
          position: absolute;
          bottom: -50%;
          left: -50%;
          width: 500px;
          height: 500px;
          background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
          border-radius: 50%;
          pointer-events: none;
        }

        .how-it-works-cta h3 {
          position: relative;
          z-index: 2;
          font-size: 2rem;
          font-weight: 800;
          margin: 0 0 0.5rem 0;
        }

        @media (max-width: 768px) {
          .how-it-works-cta h3 {
            font-size: 1.5rem;
          }
        }

        .how-it-works-cta p {
          position: relative;
          z-index: 2;
          font-size: 1.1rem;
          opacity: 0.95;
          margin: 0 0 2rem 0;
          max-width: 500px;
          margin-left: auto;
          margin-right: auto;
        }

        @media (max-width: 768px) {
          .how-it-works-cta p {
            font-size: 1rem;
          }
        }

        /* CTA Buttons */
        .how-it-works-cta-buttons {
          position: relative;
          z-index: 2;
          display: flex;
          gap: 1rem;
          justify-content: center;
          flex-wrap: wrap;
        }

        .how-it-works-btn {
          padding: 1rem 2rem;
          border-radius: 0.75rem;
          font-size: 1rem;
          font-weight: 600;
          border: none;
          cursor: pointer;
          transition: all 0.3s ease;
          text-decoration: none;
        }

        .how-it-works-btn-primary {
          background: white;
          color: #6366f1;
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .how-it-works-btn-primary:hover {
          transform: translateY(-2px);
          box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
        }

        .how-it-works-btn-secondary {
          background: transparent;
          color: white;
          border: 2px solid white;
        }

        .how-it-works-btn-secondary:hover {
          background: white;
          color: #6366f1;
          transform: translateY(-2px);
        }

        @media (max-width: 480px) {
          .how-it-works-cta {
            padding: 2rem 1rem;
          }

          .how-it-works-btn {
            padding: 0.875rem 1.5rem;
            font-size: 0.9rem;
            flex: 1;
            min-width: 150px;
          }

          .how-it-works-cta-buttons {
            flex-direction: column;
          }
        }
      `})]})},yO=()=>d.jsx("div",{children:d.jsxs("div",{className:"mcontainer",children:[d.jsxs("div",{className:"mission",children:[d.jsx("h3",{children:"MISSION"}),d.jsx("p",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Molestias minima, inventore, architecto voluptatum excepturi porro odit ducimus velit ipsam laudantium labore dicta, totam eveniet ad alias consequuntur voluptate voluptatem impedit!"})]}),d.jsxs("div",{className:"vision",children:[d.jsx("h3",{children:"VISION"}),d.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores at expedita aut adipisci itaque architecto modi aliquam! Ad tempora, incidunt quae a quia repellendus dolore fugiat recusandae vel quibusdam ea."})]})]})}),_O=()=>{const[e,t]=xe.useState(null),[r,i]=xe.useState(!0),[n,a]=xe.useState("");return xe.useEffect(()=>{(async()=>{try{const{data:s}=await Nr.get("/settings/jobfair");s.success&&t(s.jobfair)}catch(s){a("Error: "+(s.response?.data?.message||s.message))}finally{i(!1)}})()},[]),r?d.jsx("div",{children:"Loading..."}):n?d.jsx("div",{}):!e||new Date(e.date)<new Date?d.jsx("div",{}):d.jsx(d.Fragment,{children:d.jsxs("div",{className:"sectionann",children:[d.jsx("div",{className:"section-main-title",children:d.jsx("h1",{children:"CAREER FAIR"})}),d.jsx("div",{className:"section-title",children:d.jsxs("div",{className:"announcement-section",children:[d.jsx("div",{className:"announcement-background"}),d.jsxs("div",{className:"announcement-content",children:[d.jsxs("div",{className:"announcement-left",children:[d.jsx("div",{className:"career-fair-title",children:e.title}),e.description&&d.jsx("div",{className:"announcement-description",children:d.jsx("p",{children:e.description})}),d.jsxs("div",{className:"announcement-info",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("div",{className:"info-icon date-icon",children:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),d.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),d.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),d.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),d.jsxs("div",{className:"info-text",children:[d.jsx("div",{className:"info-label",children:"DATE"}),d.jsx("div",{className:"info-value",children:e.date?new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Jun 24, 2025"})]})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("div",{className:"info-icon time-icon",children:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("polyline",{points:"12,6 12,12 16,14"})]})}),d.jsxs("div",{className:"info-text",children:[d.jsx("div",{className:"info-label",children:"TIME"}),d.jsxs("div",{className:"info-value",children:[e.startTime," - ",e.endTime]})]})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("div",{className:"info-icon location-icon",children:d.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),d.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),d.jsxs("div",{className:"info-text",children:[d.jsx("div",{className:"info-label",children:"LOCATION"}),d.jsx("div",{className:"info-value",children:e.location})]})]})]})]}),d.jsxs("div",{className:"announcement-right",children:[d.jsx("div",{className:"image-container top-image",children:d.jsx("img",{src:"https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1469&q=80",alt:"People waiting for interviews"})}),d.jsx("div",{className:"image-container bottom-image",children:d.jsx("img",{src:"https://images.unsplash.com/photo-1556761175-b413da4baf72?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1574&q=80",alt:"People in meeting"})})]})]})]})})]})})},bO="/assets/Chairwoman-COP8Qa72.png",wO="/assets/skChiarwoman-71m2L_Xn.png",CO="/assets/Kagwadomar-C2bLs97h.png",BO="/assets/treasurer-CZrTAB1E.png",SO="/assets/Fired-vADPnVLY.png",EO="/assets/DSC_0028-removebg-preview-C2tEEStj.png",TO="/assets/DSC_9666-removebg-preview-CpieSWW3.png",kO="/assets/DSC_9677-removebg-preview-DQ29Eokd.png",FO="/assets/DSC_9822-removebg-preview-CIn8uEMA.png",NO="/assets/DSC_9860-removebg-preview%20(1)-StdT9aXj.png",IO="/assets/DSC_9875-removebg-preview-Dt8ryJEo.png",LO=`
  .team-section {
    min-height: 100vh;
    background: linear-gradient(135deg,hsl(308, 100.00%, 91.40%) 0%,rgb(252, 206, 232) 30%,rgba(250, 225, 234, 0.88) 70%,rgb(255, 255, 255) 100%);
    padding: 4rem 1rem;
  }

  .team-container {
    max-width: 1152px;
    margin: 0 auto;
  }

  .team-header {
    text-align: center;
    margin-bottom: 5rem;
  }

  .team-label {
    color: #3b82f6;
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 1rem;
  }

  .team-title {
    font-size: 3.75rem;
    font-weight: 700;
    color: #111827;
    margin-bottom: 0.5rem;
  }

  .team-subtitle {
    font-size: 3rem;
    font-weight: 400;
    color: #9ca3af;
    margin-bottom: 2rem;
  }

  .team-description {
    color: #374151;
    max-width: 36rem;
    margin: 0 auto;
    font-size: 1rem;
    line-height: 1.75;
  }

  .team-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 4rem 2rem;
  }

  .team-member {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 80%;
    height: 310px;
    background-color: #ffffff;
    border-radius: 0.5rem;
    padding: 5px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 
      0 2px 4px -2px rgba(0, 0, 0, 0.06);
  }


  .team-member-container {
    width: 10rem;
    height: 16rem;
    margin-bottom: 1rem;
  }

  .team-member-image-container {
   width: 100%;
   height: 100%;

  }
  .team-member-image-container img {
    width: 90%;
    height: 90%;
    margin: 0 auto;
    object-fit: cover;
  }

  .team-member:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  }

  .team-member-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .team-member:hover .team-member-image {
    transform: scale(1.05);
  }

  .team-member-role {
    font-size: 1rem;
    color: #000000ff;
    transition: color 0.3s ease;
    font-weight: 600;
    text-shadow: 1px 2px 3px #00000066;
  }



  @media (max-width: 1024px) {
    .team-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 3rem 2rem;
    }

    .team-title {
      font-size: 3rem;
    }

    .team-subtitle {
      font-size: 2.5rem;
    }
  }

  @media (max-width: 640px) {
    .team-section {
      padding: 2rem 1rem;
    }

    .team-grid {
      grid-template-columns: 1fr;
      gap: 3rem;
    }

    .team-title {
      font-size: 2.5rem;
    }

    .team-subtitle {
      font-size: 2rem;
    }

    .team-header {
      margin-bottom: 3rem;
    }
  }
`,MO=({role:e,imageUrl:t})=>d.jsxs("div",{className:"team-member",children:[d.jsx("div",{className:"team-member-container",children:d.jsx("div",{className:"team-member-image-container",children:d.jsx("img",{src:t,className:"team-member-image"})})}),d.jsx("p",{className:"team-member-role",children:e})]});function PO(){const e=[{role:"Barangay Chairman",imageUrl:bO},{role:"Sk Chairman",imageUrl:wO},{role:"Kagawad",imageUrl:CO},{role:"Treasurer",imageUrl:BO},{role:"Barangay Official",imageUrl:SO},{role:"Barangay Official",imageUrl:EO},{role:"Barangay Official",imageUrl:TO},{role:"Barangay Official",imageUrl:kO},{role:"Barangay Official",imageUrl:FO},{role:"Barangay Official",imageUrl:NO},{role:"Barangay Official",imageUrl:IO}];return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:LO}),d.jsx("div",{className:"team-section",children:d.jsxs("div",{className:"team-container",children:[d.jsxs("div",{className:"team-header",children:[d.jsx("p",{className:"team-label"}),d.jsx("h1",{className:"team-title",children:"About The Organization"}),d.jsx("h2",{className:"team-subtitle",children:"Committed. Skilled. Community-Focused."}),d.jsx("p",{className:"team-description",children:"We serve with care and commitment, connecting skilled workers to opportunities that uplift our community."})]}),d.jsx("div",{className:"team-grid",children:e.map((t,r)=>d.jsx(MO,{role:t.role,imageUrl:t.imageUrl},r))})]})})]})}const RO=()=>d.jsxs("div",{style:{background:"linear-gradient(135deg, #f8d8ea98 0%, #eca7cd83 50%, #fac0fa88 100%)",padding:"2rem 0"},children:[d.jsx("h1",{className:"hero-title",style:{textAlign:"center",fontSize:"2.5rem"},children:"The People Behind the Work"}),d.jsxs("div",{className:"development-cards",children:[d.jsxs("div",{className:"dev-card",children:[d.jsx("img",{src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=300&h=200&fit=crop",alt:"Encourage Skill Development"}),d.jsx("h4",{children:"Encourage Skill Development"}),d.jsx("p",{children:"Providing continuous training and education programs to equip individuals with necessary skills."})]}),d.jsxs("div",{className:"dev-card",children:[d.jsx("img",{src:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=300&h=200&fit=crop",alt:"Expand Career Opportunities"}),d.jsx("h4",{children:"Expand Career Opportunities"}),d.jsx("p",{children:"Offering pathways for employment and advancement across various fields."})]}),d.jsxs("div",{className:"dev-card",children:[d.jsx("img",{src:"https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?w=300&h=200&fit=crop",alt:"Promote Sustainable Livelihood"}),d.jsx("h4",{children:"Promote Sustainable Livelihood"}),d.jsx("p",{children:"Supporting sustainable projects that help maintain long-term economic growth for residents."})]})]})]}),DO="/assets/skillconnect-BB416nYN.png",jO=()=>{const[e,t]=xe.useState({name:"",email:"",subject:"",message:""}),[r,i]=xe.useState(!1),n=c=>{t({...e,[c.target.name]:c.target.value})},a=async c=>{if(c.preventDefault(),!e.name||!e.email||!e.subject||!e.message){pi.error("Please fill in all fields");return}i(!0);try{const s=await Nr.post("/contact/send",e);s.data.success&&(pi.success(s.data.message||"Email Sent Successfully!!"),t({name:"",email:"",subject:"",message:""}))}catch(s){const p=s.response?.data?.message||"Failed to send your email!";pi.error(p)}finally{i(!1)}};return d.jsxs("div",{className:"contact-section",children:[d.jsxs("div",{className:"contact-form",children:[d.jsx("h3",{children:"Let's Get In Touch"}),d.jsxs("form",{onSubmit:a,children:[d.jsx("label",{htmlFor:"name",children:"Name"}),d.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Your name",value:e.name,onChange:n,required:!0}),d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Your email",value:e.email,onChange:n,required:!0}),d.jsx("label",{htmlFor:"subject",children:"Subject"}),d.jsx("input",{type:"text",id:"subject",name:"subject",placeholder:"Subject",value:e.subject,onChange:n,required:!0}),d.jsx("label",{htmlFor:"message",children:"How Can We Help?"}),d.jsx("textarea",{id:"message",name:"message",rows:"4",placeholder:"Type your message here...",value:e.message,onChange:n,required:!0}),d.jsx("button",{type:"submit",disabled:r,className:"send-btn",children:r?"Sending...":"Send Message"})]})]}),d.jsx("div",{className:"contact-image",children:d.jsx("img",{src:DO,alt:"Contact Person"})})]})},RB=()=>d.jsx(d.Fragment,{children:d.jsxs("section",{className:"homePage page",children:[d.jsx(gO,{}),d.jsx(_O,{}),d.jsx(yO,{}),d.jsx(xO,{}),d.jsx(PO,{id:"#about"}),d.jsx(RO,{}),d.jsx(jO,{})]})}),N4="/assets/1000205778-removebg-preview-DPvNyX5E.png",UO=()=>{const[e,t]=xe.useState({email:"",password:""}),[r,i]=xe.useState({}),[n,a]=xe.useState(!1),[c,s]=xe.useState(!1),[p,g]=xe.useState(!1),{setIsAuthorized:v,setUser:B,setTokenType:F,setIsUserVerified:C}=io(),L=Wo(),P=(G,ne)=>{let Z="";return G==="email"?ne?!/\S+@\S+\.\S+/.test(ne)&&!/^[a-zA-Z0-9_]{3,20}$/.test(ne)&&(Z="Please enter a valid email address or username (3-20 characters, letters/numbers/underscore only)"):Z="Email or username is required":G==="password"&&(ne?ne.length<6&&(Z="Password must be at least 6 characters"):Z="Password is required"),Z},D=()=>{const G={},ne=P("email",e.email);ne&&(G.email=ne);const Z=P("password",e.password);return Z&&(G.password=Z),i(G),Object.keys(G).length===0},j=G=>r[G]?"error":e[G]&&!r[G]?"success":"",q=G=>{const{name:ne,value:Z}=G.target,le=P(ne,Z);i(J=>({...J,[ne]:le}))};xe.useEffect(()=>{const G=JSON.parse(localStorage.getItem("user")||"null"),ne=localStorage.getItem("token"),Z=localStorage.getItem("isAuthorized")==="true",le=localStorage.getItem("tokenType");G&&Z&&ne&&le==="user"&&(B(G),v(!0),F(le),C(G.role==="Service Provider"||!1),p0(ne),G.role==="Service Provider"?(L("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(L("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request")))},[L,B,v,F,C]);const H=G=>{const{name:ne,value:Z}=G.target;t(J=>({...J,[ne]:Z}));const le=P(ne,Z);i(J=>({...J,[ne]:le}))},ee=async G=>{if(G.preventDefault(),!!D()){a(!0);try{const{data:ne}=await Nr.post("/user/login",{email:e.email,password:e.password});B(ne.user),v(!0),F("user"),C(ne.user.isVerified||!1),localStorage.setItem("user",JSON.stringify(ne.user)),localStorage.setItem("token",ne.token),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","user"),c&&localStorage.setItem("rememberedEmail",e.email);const Z=localStorage.getItem("token");Z&&p0(Z),Dn.success(ne.message||"Login successful!"),t({email:"",password:""}),i({}),ne.user.role==="Service Provider"?(L("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(L("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request"))}catch(ne){const Z=ne.response?.data?.message||"Login failed. Please try again.";Dn.error(Z),(Z.toLowerCase().includes("email")||Z.toLowerCase().includes("password"))&&i({general:Z})}finally{a(!1)}}};return d.jsxs("div",{className:"login-container",children:[d.jsx("div",{className:"login-background-pattern"}),d.jsxs("div",{className:"login-wrapper",children:[d.jsxs("div",{className:"login-left-side",children:[d.jsx("img",{src:N4,alt:"SkillConnect Logo",className:"login-left-logo"}),d.jsx("h1",{className:"login-left-title",children:"Welcome Back to Skillconnect 4b410"}),d.jsx("p",{className:"login-left-subtitle",children:"Continue to connect with skilled workers and community members"}),d.jsx(Ac,{to:"/home#About",className:"login-left-button",children:"About Us"})]}),d.jsxs("div",{className:"login-right-side",children:[d.jsx("div",{className:"login-card",children:d.jsxs("div",{className:"login-form-container",children:[r.general&&d.jsxs("div",{className:"general-error",children:[d.jsx(op,{className:"general-error-icon"}),d.jsx("p",{className:"general-error-text",children:r.general})]}),d.jsxs("form",{className:"login-form",onSubmit:ee,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",className:"form-label",children:"Email or Username"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("input",{type:"text",id:"email",name:"email",placeholder:"your.email@example.com or username",value:e.email,onChange:H,onBlur:q,className:`form-input ${j("email")}`,disabled:n,autoComplete:"username","aria-invalid":!!r.email,"aria-describedby":r.email?"email-error":"email-help"}),j("email")==="success"&&d.jsx("div",{className:"input-icon-right",children:d.jsx($6,{className:"icon-success"})}),j("email")==="error"&&d.jsx("div",{className:"input-icon-right",children:d.jsx(op,{className:"icon-error"})})]}),r.email?d.jsxs("p",{id:"email-error",className:"field-error-message",children:[d.jsx(op,{className:"error-icon-inline"}),r.email]}):d.jsx("p",{id:"email-help",className:"field-help-text",children:"Enter your email address or username"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("input",{type:p?"text":"password",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:H,onBlur:q,className:`form-input ${j("password")}`,disabled:n,autoComplete:"current-password","aria-invalid":!!r.password,"aria-describedby":r.password?"password-error":"password-help"}),d.jsx("button",{type:"button",onClick:()=>g(!p),className:"password-toggle-btn","aria-label":p?"Hide password":"Show password",tabIndex:-1,children:p?d.jsx(B2,{className:"toggle-icon"}):d.jsx(S2,{className:"toggle-icon"})})]}),r.password?d.jsxs("p",{id:"password-error",className:"field-error-message",children:[d.jsx(op,{className:"error-icon-inline"}),r.password]}):d.jsx("p",{id:"password-help",className:"field-help-text",children:"Must be at least 6 characters long"})]}),d.jsxs("div",{className:"form-options",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:c,onChange:G=>s(G.target.checked),className:"checkbox-input",disabled:n}),d.jsx("span",{className:"checkbox-text",children:"Remember me"})]}),d.jsx("a",{href:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),d.jsx("button",{type:"submit",disabled:n,className:"submit-btn",children:n?d.jsxs("span",{className:"btn-loading",children:[d.jsxs("svg",{className:"spinner",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),d.jsx("path",{className:"spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})]}),d.jsxs("div",{className:"login-footer",children:[d.jsxs("p",{className:"footer-text",children:["Don't have an account?"," ",d.jsx("a",{href:"/register",className:"footer-link",children:"Create one here"})]}),d.jsxs("p",{className:"footer-subtext",children:["Admin?"," ",d.jsx("a",{href:"/admin/login",className:"footer-sublink",children:"Login as Administrator"})]})]})]})}),d.jsx("p",{className:"login-terms",children:"By signing in, you agree to our Terms of Service and Privacy Policy"})]})]})]})},OO=()=>{const[e,t]=xe.useState(1),[r,i]=xe.useState({role:"",skills:[],profilePic:null,username:"",password:"",confirmPassword:"",firstName:"",lastName:"",email:"",phone:"",address:"",occupation:"",birthdate:"",employed:"",isApplyingProvider:!1,certificates:[],validId:null}),[n,a]=xe.useState(!1),[c,s]=xe.useState(!1),[p,g]=xe.useState(!1),[v,B]=xe.useState({}),[F,C]=xe.useState(!1),{setIsAuthorized:L,setUser:P,setTokenType:D}=io(),j=Wo(),q=r.role==="Service Provider"?4:3,H=()=>{const ce={};(!r.username||r.username.length<3)&&(ce.username="Username must be at least 3 characters long"),(!r.password||r.password.length<8)&&(ce.password="Password must be at least 8 characters long"),r.password!==r.confirmPassword&&(ce.confirmPassword="Passwords do not match");const te=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!r.email||!te.test(r.email))&&(ce.email="Please enter a valid email address");const K=/^(\+63|0)[0-9]{10}$/;return(!r.phone||!K.test(r.phone))&&(ce.phone="Invalid phone number format. Use +63XXXXXXXXXX or 0XXXXXXXXXX"),r.firstName.trim()||(ce.firstName="First name is required"),r.lastName.trim()||(ce.lastName="Last name is required"),r.address.trim()||(ce.address="Address is required"),r.birthdate||(ce.birthdate="Birthdate is required"),(!r.employed||!["employed","unemployed"].includes(r.employed))&&(ce.employed="Employment status must be Employed or Unemployed"),(!r.role||!["Community Member","Service Provider"].includes(r.role))&&(ce.role="Please select a valid role"),r.validId?r.validId&&!r.validId.type.startsWith("image/")&&(ce.validId="Valid ID must be an image file (JPG, PNG, etc.)"):ce.validId="Valid ID is required",r.role==="Service Provider"&&(!r.skills||r.skills.length===0?ce.skills="At least one skill is required for Service Providers":r.skills.length>3&&(ce.skills="You can select a maximum of 3 skills"),r.certificates.length===0&&(ce.certificates="Certificates are required for Service Providers")),B(ce),Object.keys(ce).length===0},ee=ce=>{const te={};switch(ce){case 1:{(!r.username||r.username.length<3)&&(te.username="Username must be at least 3 characters long");const K=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;(!r.email||!K.test(r.email))&&(te.email="Please enter a valid email address"),(!r.password||r.password.length<8)&&(te.password="Password must be at least 8 characters long"),r.password!==r.confirmPassword&&(te.confirmPassword="Passwords do not match");break}case 2:{r.firstName.trim()||(te.firstName="First name is required"),r.lastName.trim()||(te.lastName="Last name is required");const K=/^(\+63|0)[0-9]{10}$/;(!r.phone||!K.test(r.phone))&&(te.phone="Invalid phone number format"),r.address.trim()||(te.address="Address is required"),r.birthdate||(te.birthdate="Birthdate is required"),(!r.employed||!["employed","unemployed"].includes(r.employed))&&(te.employed="Employment status is required"),(!r.role||!["Community Member","Service Provider"].includes(r.role))&&(te.role="Please select a valid role");break}case 3:r.validId||(te.validId="Valid ID is required"),r.role==="Service Provider"&&(!r.skills||r.skills.length===0)&&(te.skills="At least one skill is required");break;case 4:r.role==="Service Provider"&&r.certificates.length===0&&(te.certificates="Certificates are required for Service Providers");break}return B(te),Object.keys(te).length===0},G=ce=>{const{name:te,value:K,type:me,files:we}=ce.target;if(me==="file")i(te==="certificates"?{...r,certificates:Array.from(we)}:{...r,[te]:we[0]});else{const Fe={...r,[te]:K};te==="role"&&(Fe.isApplyingProvider=K==="Service Provider"),i(Fe)}},ne=()=>{ee(e)?t(ce=>Math.min(ce+1,q)):pi.error("Please fix the errors before continuing")},Z=()=>{t(ce=>Math.max(ce-1,1))},le=async ce=>{if(ce.preventDefault(),!H()){pi.error("Please fix the errors in the form before submitting");return}C(!0);try{const te=new FormData;te.append("username",r.username),te.append("password",r.password),te.append("confirmPassword",r.confirmPassword),te.append("firstName",r.firstName),te.append("lastName",r.lastName),te.append("email",r.email),te.append("phone",r.phone),te.append("address",r.address),te.append("birthdate",r.birthdate),te.append("employed",r.employed),te.append("role",r.role),r.occupation&&te.append("occupation",r.occupation),r.profilePic&&te.append("profilePic",r.profilePic),r.validId&&te.append("validId",r.validId),r.role==="Service Provider"&&(r.skills&&r.skills.length>0&&r.skills.forEach(me=>te.append("skills",me)),r.certificates&&r.certificates.length>0&&r.certificates.forEach(me=>te.append("certificates",me)));const{data:K}=await Nr.post("/user/register",te,{headers:{"Content-Type":"multipart/form-data"}});pi.success(K.message),a(!0),P(K.user),L(!0),D("user"),K.user.role==="Service Provider"?(j("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(j("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request")),localStorage.setItem("user",JSON.stringify(K.user)),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","user"),setTimeout(()=>a(!1),5e3)}catch(te){console.error("Registration error:",te);const K=te.response?.data?.message||te.message||"Registration failed";pi.error(K),te.response?.data?.errors&&console.error("Validation errors:",te.response.data.errors)}finally{C(!1)}},J=()=>{switch(e){case 1:return d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"step-title",children:"Account Information"}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"text",id:"username",name:"username",placeholder:"Username",value:r.username,onChange:G,required:!0,className:`curved-input ${v.username?"error":""}`}),v.username&&d.jsx("span",{className:"field-error",children:v.username})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Email",value:r.email,onChange:G,required:!0,className:`curved-input ${v.email?"error":""}`}),v.email&&d.jsx("span",{className:"field-error",children:v.email})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsxs("div",{className:"password-wrapper",children:[d.jsx("input",{type:c?"text":"password",id:"password",name:"password",placeholder:"Password",value:r.password,onChange:G,required:!0,className:`curved-input ${v.password?"error":""}`}),d.jsx("button",{type:"button",className:"curved-password-toggle",onClick:()=>s(!c),children:c?d.jsx(B2,{}):d.jsx(S2,{})})]}),v.password&&d.jsx("span",{className:"field-error",children:v.password})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsxs("div",{className:"password-wrapper",children:[d.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",value:r.confirmPassword,onChange:G,required:!0,className:`curved-input ${v.confirmPassword?"error":""}`}),d.jsx("button",{type:"button",className:"curved-password-toggle",onClick:()=>g(!p),children:p?d.jsx(B2,{}):d.jsx(S2,{})})]}),v.confirmPassword&&d.jsx("span",{className:"field-error",children:v.confirmPassword})]})]});case 2:return d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"step-title",children:"Personal Information"}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"text",id:"firstName",name:"firstName",placeholder:"First Name",value:r.firstName,onChange:G,required:!0,className:`curved-input ${v.firstName?"error":""}`}),v.firstName&&d.jsx("span",{className:"field-error",children:v.firstName})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"text",id:"lastName",name:"lastName",placeholder:"Last Name",value:r.lastName,onChange:G,required:!0,className:`curved-input ${v.lastName?"error":""}`}),v.lastName&&d.jsx("span",{className:"field-error",children:v.lastName})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"tel",id:"phone",name:"phone",placeholder:"Phone Number",value:r.phone,onChange:G,required:!0,className:`curved-input ${v.phone?"error":""}`}),v.phone&&d.jsx("span",{className:"field-error",children:v.phone})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"text",id:"address",name:"address",placeholder:"Address",value:r.address,onChange:G,required:!0,className:`curved-input ${v.address?"error":""}`}),v.address&&d.jsx("span",{className:"field-error",children:v.address})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsx("input",{type:"date",id:"birthdate",name:"birthdate",value:r.birthdate,onChange:G,required:!0,className:`curved-input ${v.birthdate?"error":""}`,max:new Date().toISOString().split("T")[0]}),v.birthdate&&d.jsx("span",{className:"field-error",children:v.birthdate})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsxs("select",{id:"employed",name:"employed",value:r.employed,onChange:G,required:!0,className:`curved-input ${v.employed?"error":""}`,children:[d.jsx("option",{value:"",children:"Employment Status"}),d.jsx("option",{value:"employed",children:"Employed"}),d.jsx("option",{value:"unemployed",children:"Unemployed"})]}),v.employed&&d.jsx("span",{className:"field-error",children:v.employed})]}),d.jsxs("div",{className:"curved-input-group",children:[d.jsxs("select",{id:"role",name:"role",value:r.role,onChange:G,required:!0,className:`curved-input ${v.role?"error":""}`,children:[d.jsx("option",{value:"",children:"Select your role"}),d.jsx("option",{value:"Community Member",children:"Community Member"}),d.jsx("option",{value:"Service Provider",children:"Service Provider"})]}),v.role&&d.jsx("span",{className:"field-error",children:v.role})]}),d.jsx("div",{className:"curved-input-group",children:d.jsx("input",{type:"text",id:"occupation",name:"occupation",placeholder:"Occupation (Optional)",value:r.occupation,onChange:G,className:"curved-input"})})]});case 3:return d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"step-title",children:"Documents & Skills"}),d.jsxs("div",{className:"curved-file-group",children:[d.jsx("label",{className:"curved-file-label",children:"Profile Picture (Optional)"}),d.jsx("input",{type:"file",id:"profilePic",name:"profilePic",accept:"image/*",onChange:G,className:"curved-file-input"}),r.profilePic&&d.jsx("div",{className:"file-preview",children:d.jsx("img",{src:URL.createObjectURL(r.profilePic),alt:"Profile preview"})})]}),d.jsxs("div",{className:"curved-file-group",children:[d.jsx("label",{className:"curved-file-label",children:"Valid ID *"}),d.jsx("input",{type:"file",id:"validId",name:"validId",accept:"image/*",onChange:G,className:`curved-file-input ${v.validId?"error":""}`}),v.validId&&d.jsx("span",{className:"field-error",children:v.validId}),r.validId&&d.jsx("div",{className:"file-preview",children:d.jsx("img",{src:URL.createObjectURL(r.validId),alt:"ID preview"})})]}),r.role==="Service Provider"&&d.jsxs("div",{className:"curved-skills-group",children:[d.jsx("label",{className:"curved-file-label",children:"Select Your Skills (1-3) *"}),d.jsx("div",{className:"curved-skills-grid",children:["Pipe Installation","Leak Repair","Toilet Installation","Drain Cleaning","Water Heater Setup","Wiring Installation","Lighting Repair","Appliance Troubleshooting","Outlet Installation","Circuit Breaker Maintenance","General House Cleaning","Deep Cleaning","Carpet Cleaning","Sofa Shampooing","Post-Construction Cleaning","Furniture Repair","Wood Polishing","Door and Window Fixing","Custom Woodwork","Cabinet Installation","Interior Painting","Exterior Painting","Repainting","Wallpaper Installation","Color Consultation","Air Conditioner Repair","Refrigerator Repair","Washing Machine Repair","Microwave Oven Fixing","Electric Fan Maintenance","Tiling","Roofing","Masonry","Floor Installation","Room Remodeling","Termite Treatment","Cockroach Control","Rodent Control","Disinfection","Mosquito Control","Lawn Mowing","Plant Care","Landscape Design","Tree Trimming","Garden Cleanup","Aircon Installation","Aircon Cleaning","HVAC Maintenance","Filter Replacement","Ventilation Setup","Washing Clothes","Drying & Ironing","Folding & Packaging","Delicate Fabric Care","Stain Removal"].map(ce=>d.jsxs("label",{className:`curved-skill-item ${r.skills.includes(ce)?"selected":""}`,children:[d.jsx("input",{type:"checkbox",checked:r.skills.includes(ce),onChange:te=>{const K=[...r.skills];if(te.target.checked)K.length<3&&K.push(ce);else{const me=K.indexOf(ce);me>-1&&K.splice(me,1)}i({...r,skills:K})},disabled:!r.skills.includes(ce)&&r.skills.length>=3}),d.jsx("span",{children:ce})]},ce))}),d.jsxs("div",{className:"skills-counter",children:["Selected: ",r.skills.length,"/3 skills"]}),v.skills&&d.jsx("span",{className:"field-error",children:v.skills})]})]});case 4:return d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"step-title",children:"Certificates"}),d.jsxs("div",{className:"curved-file-group",children:[d.jsx("label",{className:"curved-file-label",children:"Upload Certificates *"}),d.jsx("input",{type:"file",id:"certificates",name:"certificates",accept:"image/*,application/pdf",multiple:!0,onChange:G,className:`curved-file-input ${v.certificates?"error":""}`}),v.certificates&&d.jsx("span",{className:"field-error",children:v.certificates}),r.certificates.length>0&&d.jsx("div",{className:"file-preview-grid",children:r.certificates.map((ce,te)=>d.jsx("div",{className:"file-preview-item",children:ce.type.startsWith("image/")?d.jsx("img",{src:URL.createObjectURL(ce),alt:`Certificate ${te+1}`}):d.jsx("div",{className:"file-name",children:ce.name})},te))})]})]});default:return null}};return d.jsxs("div",{className:"register-page",children:[d.jsxs("div",{className:"register-wrapper",children:[d.jsxs("div",{className:"register-left",children:[d.jsx("img",{src:N4,alt:"SkillConnect Logo",className:"logo"}),d.jsx("h1",{className:"join-title",children:"Join SkillConnect"}),d.jsx("p",{className:"join-subtitle",children:"Connect with skilled workers, request services, or offer your expertise in your local community."}),d.jsx(Ac,{to:"/home#about",className:"about-btn",children:"About Us"})]}),d.jsxs("div",{className:"register-right",children:[d.jsx("h2",{className:"form-title",children:"Create Your Account"}),e>1&&d.jsxs("p",{className:"step-info",children:["Step ",e," of ",q]}),d.jsx("div",{className:"step-progress",children:[...Array(q)].map((ce,te)=>d.jsx("div",{className:`step-bar ${te<e?"active":""}`},te))}),d.jsxs("form",{onSubmit:e===q?le:ce=>{ce.preventDefault(),ne()},className:"register-form",children:[d.jsx("div",{className:"step-content",children:J()}),d.jsxs("div",{className:"form-navigation",children:[e>1&&d.jsxs("button",{type:"button",onClick:Z,className:"nav-btn prev-btn",children:[d.jsx(K6,{})," Previous"]}),e<q?d.jsxs("button",{type:"button",onClick:ne,className:"nav-btn next-btn",children:["Next ",d.jsx(o5,{})]}):d.jsx("button",{type:"submit",className:"submit-btn",disabled:F,children:F?"Creating Account...":"Register"})]})]}),d.jsxs("p",{className:"login-link",children:["Already have an account? ",d.jsx(Ac,{to:"/login",children:"Login"})]})]})]}),n&&d.jsx("div",{className:"popup-overlay",children:d.jsxs("div",{className:"popup-box",children:[d.jsx("h3",{children:"Registration Successful "}),d.jsx("p",{children:"Welcome to SkillConnect! Redirecting..."})]})})]})};const zO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QO=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,i)=>i?i.toUpperCase():r.toLowerCase()),DB=e=>{const t=QO(e);return t.charAt(0).toUpperCase()+t.slice(1)},tF=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim(),HO=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var VO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GO=xe.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:n="",children:a,iconNode:c,...s},p)=>xe.createElement("svg",{ref:p,...VO,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:tF("lucide",n),...!a&&!HO(s)&&{"aria-hidden":"true"},...s},[...c.map(([g,v])=>xe.createElement(g,v)),...Array.isArray(a)?a:[a]]));const Tp=(e,t)=>{const r=xe.forwardRef(({className:i,...n},a)=>xe.createElement(GO,{ref:a,iconNode:t,className:tF(`lucide-${zO(DB(e))}`,`lucide-${e}`,i),...n}));return r.displayName=DB(e),r};const qO=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],I4=Tp("arrow-left",qO);const KO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],c5=Tp("circle-alert",KO);const WO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_d=Tp("circle-check-big",WO);const $O=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],jB=Tp("eye-off",$O);const XO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UB=Tp("eye",XO);const ZO=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],rF=Tp("loader",ZO);const YO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],$x=Tp("lock",YO);const JO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],u0=Tp("mail",JO),e7=()=>{const[e,t]=xe.useState(""),[r,i]=xe.useState(!1),[n,a]=xe.useState({}),[c,s]=xe.useState(!1),p=B=>{const F=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return B?F.test(B)?"":"Please enter a valid email address":"Email address is required"},g=B=>{const F=B.target.value;t(F),a({...n,email:p(F)})},v=async B=>{B.preventDefault();const F=p(e);if(F){a({email:F});return}i(!0);try{await new Promise(C=>setTimeout(C,2e3)),localStorage.setItem("resetEmail",e),s(!0),setTimeout(()=>{window.location.href="/verify-email"},2e3)}catch(C){console.error("Error:",C)}finally{i(!1)}};return c?d.jsxs("div",{className:"forgot-password-wrapper",children:[d.jsx("div",{className:"background-pattern"}),d.jsx("div",{className:"card-container",children:d.jsxs("div",{className:"success-container",children:[d.jsx("div",{className:"success-icon",children:d.jsx(_d,{size:48})}),d.jsx("h2",{className:"success-title",children:"Email Sent Successfully"}),d.jsxs("p",{className:"success-message",children:["We've sent a password reset link to ",d.jsx("strong",{children:e})]}),d.jsx("p",{className:"success-subtext",children:"Check your inbox and follow the instructions to reset your password. This page will redirect shortly."}),d.jsx("div",{className:"loading-bar"})]})})]}):d.jsxs("div",{className:"forgot-password-wrapper",children:[d.jsx("div",{className:"background-pattern"}),d.jsxs("div",{className:"card-container",children:[d.jsx("div",{className:"card-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("div",{className:"header-icon",children:d.jsx(u0,{size:32})}),d.jsx("h1",{className:"header-title",children:"Reset Your Password"}),d.jsx("p",{className:"header-subtitle",children:"Enter your email address and we'll send you a link to reset your password"})]})}),d.jsxs("div",{onSubmit:v,className:"form-container",children:[d.jsxs("div",{className:"input-group",children:[d.jsx("label",{htmlFor:"email",className:"input-label",children:"Email Address"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("div",{className:"input-icon",children:d.jsx(u0,{size:20})}),d.jsx("input",{type:"email",id:"email",name:"email",placeholder:"your.email@example.com",value:e,onChange:g,className:`input-field ${n.email?"input-error":e&&!n.email?"input-success":""}`,disabled:r,autoComplete:"email"}),e&&!n.email&&d.jsx("div",{className:"input-success-icon",children:d.jsx(_d,{size:20})})]}),n.email?d.jsxs("div",{className:"error-message",children:[d.jsx(c5,{size:16}),d.jsx("span",{children:n.email})]}):d.jsx("p",{className:"help-text",children:"Enter the email address associated with your account"})]}),d.jsx("button",{onClick:v,className:"submit-btn",disabled:r||!!n.email||!e,children:r?d.jsxs(d.Fragment,{children:[d.jsx(rF,{size:20,className:"spinner-icon"}),"Sending Reset Email..."]}):d.jsxs(d.Fragment,{children:[d.jsx(u0,{size:20}),"Send Reset Email"]})}),d.jsx("div",{className:"info-box",children:d.jsx("p",{className:"info-text",children:" Check your spam folder if you don't receive the email within a few minutes."})}),d.jsx("div",{className:"back-link-container",children:d.jsxs("a",{href:"/login",className:"back-link",children:[d.jsx(I4,{size:18}),d.jsx("span",{children:"Back to Login"})]})})]})]})]})},t7=()=>{const[e,t]=xe.useState(""),[r,i]=xe.useState(["","","","","",""]),[n,a]=xe.useState(!1),[c,s]=xe.useState(!1),[p,g]=xe.useState(60),[v,B]=xe.useState({}),[F,C]=xe.useState(!1);xe.useEffect(()=>{const q=localStorage.getItem("resetEmail");q?t(q):window.location.href="/forgot-password"},[]),xe.useEffect(()=>{let q;return p>0&&(q=setTimeout(()=>g(p-1),1e3)),()=>clearTimeout(q)},[p]);const L=(q,H)=>{if(!/^\d*$/.test(q)||q.length>1)return;const ee=[...r];if(ee[H]=q,i(ee),B({}),q&&H<r.length-1){const G=document.getElementById(`otp-${H+1}`);G&&G.focus()}},P=(q,H)=>{if(q.key==="Backspace"&&!r[H]&&H>0){const ee=document.getElementById(`otp-${H-1}`);ee&&ee.focus()}},D=async q=>{q.preventDefault();const H=r.join("");if(H.length!==6){B({otp:"Please enter the complete 6-digit code"});return}a(!0);try{await new Promise(ee=>setTimeout(ee,2e3)),localStorage.setItem("resetToken","mock-token-"+H),C(!0),setTimeout(()=>{window.location.href=`/reset-password?email=${encodeURIComponent(e)}&token=mock-token-${H}`},2e3)}catch{B({otp:"Failed to verify code. Please try again."})}finally{a(!1)}},j=async()=>{if(!(p>0)){s(!0);try{await new Promise(q=>setTimeout(q,1500)),g(60),i(["","","","","",""])}catch(q){console.error("Error:",q)}finally{s(!1)}}};return F?d.jsx("div",{className:"verify-email-wrapper",children:d.jsx("div",{className:"card-container",children:d.jsxs("div",{className:"success-container",children:[d.jsx("div",{className:"success-icon",children:d.jsx(u0,{size:48})}),d.jsx("h2",{className:"success-title",children:"Email Verified"}),d.jsx("p",{className:"success-message",children:"Your email has been verified successfully"}),d.jsx("p",{className:"success-subtext",children:"Redirecting you to reset your password..."}),d.jsx("div",{className:"loading-bar"})]})})}):d.jsxs("div",{className:"verify-email-wrapper",children:[d.jsx("div",{className:"background-pattern"}),d.jsxs("div",{className:"card-container",children:[d.jsx("div",{className:"card-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("div",{className:"header-icon",children:d.jsx(u0,{size:32})}),d.jsx("h1",{className:"header-title",children:"Verify Your Email"}),d.jsx("p",{className:"header-subtitle",children:"Enter the 6-digit code we sent to your email"})]})}),d.jsxs("div",{className:"form-container",children:[d.jsxs("div",{className:"email-display",children:[d.jsx(u0,{size:18}),d.jsx("span",{className:"email-text",children:e})]}),d.jsxs("div",{className:"otp-section",children:[d.jsx("div",{className:"otp-container",children:r.map((q,H)=>d.jsx("input",{id:`otp-${H}`,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"1",value:q,onChange:ee=>L(ee.target.value,H),onKeyDown:ee=>P(ee,H),className:`otp-input ${v.otp?"input-error":q?"filled":""}`,disabled:n,autoComplete:"one-time-code"},H))}),v.otp&&d.jsx("div",{className:"error-message",children:d.jsx("span",{children:v.otp})}),d.jsx("p",{className:"help-text",children:"Check your email (including spam folder) for the 6-digit code"})]}),d.jsx("button",{onClick:D,className:"submit-btn",disabled:n||r.join("").length!==6,children:n?d.jsxs(d.Fragment,{children:[d.jsx(rF,{size:20,className:"spinner-icon"}),"Verifying..."]}):d.jsxs(d.Fragment,{children:[d.jsx(u0,{size:20}),"Verify Email"]})}),d.jsxs("div",{className:"resend-section",children:[d.jsx("p",{className:"resend-label",children:"Didn't receive the code?"}),d.jsx("button",{type:"button",className:"resend-btn",onClick:j,disabled:p>0||c,children:c?"Sending...":p>0?`Resend in ${p}s`:"Resend Code"})]}),d.jsx("div",{className:"back-link-container",children:d.jsxs("a",{href:"/forgot-password",className:"back-link",children:[d.jsx(I4,{size:18}),d.jsx("span",{children:"Back to Forgot Password"})]})})]})]})]})},r7=()=>{const[e,t]=xe.useState({email:"",token:"",newPassword:"",confirmPassword:""}),[r,i]=xe.useState(!1),[n,a]=xe.useState({}),[c,s]=xe.useState(!1),[p,g]=xe.useState(!1),[v,B]=xe.useState(0),[F,C]=xe.useState(!1);xe.useEffect(()=>{const G=new URLSearchParams(window.location.search),ne=G.get("email")||"user@example.com",Z=G.get("token")||"valid-token";t(le=>({...le,email:ne,token:Z}))},[]);const L=G=>{let ne=0;return G.length>=8&&ne++,G.length>=12&&ne++,/[a-z]/.test(G)&&/[A-Z]/.test(G)&&ne++,/[0-9]/.test(G)&&ne++,/[^a-zA-Z0-9]/.test(G)&&ne++,ne},P=G=>["","Weak","Fair","Good","Strong","Very Strong"][G],D=G=>["","bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"][G],j=G=>G?G.length<8?"Password must be at least 8 characters long":"":"Password is required",q=(G,ne)=>G?G!==ne?"Passwords do not match":"":"Please confirm your password",H=(G,ne)=>{t(Z=>({...Z,[G]:ne})),G==="newPassword"?(B(L(ne)),a(Z=>({...Z,newPassword:j(ne),confirmPassword:e.confirmPassword?q(e.confirmPassword,ne):Z.confirmPassword}))):G==="confirmPassword"&&a(Z=>({...Z,confirmPassword:q(ne,e.newPassword)}))},ee=async G=>{G.preventDefault();const ne=j(e.newPassword),Z=q(e.confirmPassword,e.newPassword);if(ne||Z){a({newPassword:ne,confirmPassword:Z});return}i(!0);try{await new Promise(le=>setTimeout(le,2e3)),C(!0),setTimeout(()=>{window.location.href="/login"},2500)}catch(le){console.error("Error:",le)}finally{i(!1)}};return F?d.jsxs("div",{className:"reset-password-wrapper",children:[d.jsx("div",{className:"background-pattern"}),d.jsx("div",{className:"card-container",children:d.jsxs("div",{className:"success-container",children:[d.jsx("div",{className:"success-icon",children:d.jsx(_d,{size:48})}),d.jsx("h2",{className:"success-title",children:"Password Reset Successfully"}),d.jsx("p",{className:"success-message",children:"Your password has been updated successfully"}),d.jsx("p",{className:"success-subtext",children:"Redirecting to login page... You can now log in with your new password."}),d.jsx("div",{className:"loading-bar"})]})})]}):d.jsxs("div",{className:"reset-password-wrapper",children:[d.jsx("div",{className:"background-pattern"}),d.jsxs("div",{className:"card-container",children:[d.jsx("div",{className:"card-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("div",{className:"header-icon",children:d.jsx($x,{size:32})}),d.jsx("h1",{className:"header-title",children:"Reset Your Password"}),d.jsx("p",{className:"header-subtitle",children:"Create a new, secure password for your account"})]})}),d.jsxs("div",{onSubmit:ee,className:"form-container",children:[d.jsxs("div",{className:"input-group",children:[d.jsx("label",{htmlFor:"newPassword",className:"input-label",children:"New Password"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("div",{className:"input-icon",children:d.jsx($x,{size:20})}),d.jsx("input",{type:c?"text":"password",id:"newPassword",name:"newPassword",placeholder:"Enter your new password",value:e.newPassword,onChange:G=>H("newPassword",G.target.value),className:`input-field ${n.newPassword?"input-error":e.newPassword&&!n.newPassword?"input-success":""}`,disabled:r,autoComplete:"new-password"}),d.jsx("button",{type:"button",className:"password-toggle",onClick:()=>s(!c),disabled:r,children:c?d.jsx(jB,{size:20}):d.jsx(UB,{size:20})}),e.newPassword&&!n.newPassword&&d.jsx("div",{className:"input-success-icon",children:d.jsx(_d,{size:20})})]}),e.newPassword&&d.jsxs("div",{className:"password-strength",children:[d.jsx("div",{className:"strength-bars",children:[...Array(5)].map((G,ne)=>d.jsx("div",{className:`strength-bar ${ne<v?D(v):"bg-gray-200"}`},ne))}),d.jsx("span",{className:`strength-label ${D(v).replace("bg-","text-")}`,children:P(v)})]}),n.newPassword?d.jsxs("div",{className:"error-message",children:[d.jsx(c5,{size:16}),d.jsx("span",{children:n.newPassword})]}):d.jsx("p",{className:"help-text",children:"At least 8 characters with a mix of uppercase, lowercase, numbers, and symbols"})]}),d.jsxs("div",{className:"input-group",children:[d.jsx("label",{htmlFor:"confirmPassword",className:"input-label",children:"Confirm Password"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("div",{className:"input-icon",children:d.jsx($x,{size:20})}),d.jsx("input",{type:p?"text":"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm your new password",value:e.confirmPassword,onChange:G=>H("confirmPassword",G.target.value),className:`input-field ${n.confirmPassword?"input-error":e.confirmPassword&&!n.confirmPassword?"input-success":""}`,disabled:r,autoComplete:"new-password"}),d.jsx("button",{type:"button",className:"password-toggle",onClick:()=>g(!p),disabled:r,children:p?d.jsx(jB,{size:20}):d.jsx(UB,{size:20})}),e.confirmPassword&&!n.confirmPassword&&d.jsx("div",{className:"input-success-icon",children:d.jsx(_d,{size:20})})]}),n.confirmPassword?d.jsxs("div",{className:"error-message",children:[d.jsx(c5,{size:16}),d.jsx("span",{children:n.confirmPassword})]}):d.jsx("p",{className:"help-text",children:"Passwords must match exactly"})]}),d.jsxs("div",{className:"requirements-box",children:[d.jsx("h4",{className:"requirements-title",children:"Password Requirements:"}),d.jsxs("ul",{className:"requirements-list",children:[d.jsxs("li",{className:e.newPassword?.length>=8?"met":"",children:[d.jsx(_d,{size:16}),"At least 8 characters"]}),d.jsxs("li",{className:/[a-z]/.test(e.newPassword)?"met":"",children:[d.jsx(_d,{size:16}),"One lowercase letter"]}),d.jsxs("li",{className:/[A-Z]/.test(e.newPassword)?"met":"",children:[d.jsx(_d,{size:16}),"One uppercase letter"]}),d.jsxs("li",{className:/[0-9]/.test(e.newPassword)?"met":"",children:[d.jsx(_d,{size:16}),"One number"]}),d.jsxs("li",{className:/[^a-zA-Z0-9]/.test(e.newPassword)?"met":"",children:[d.jsx(_d,{size:16}),"One special character (!@#$%^&*)"]})]})]}),d.jsx("button",{onClick:ee,className:"submit-btn",disabled:r||!!n.newPassword||!!n.confirmPassword||!e.newPassword||!e.confirmPassword,children:r?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"spinner-icon"}),"Resetting Password..."]}):d.jsxs(d.Fragment,{children:[d.jsx($x,{size:20}),"Reset Password"]})}),d.jsx("div",{className:"back-link-container",children:d.jsxs("a",{href:"/login",className:"back-link",children:[d.jsx(I4,{size:18}),d.jsx("span",{children:"Back to Login"})]})})]})]})]})},i7=()=>{const[e,t]=xe.useState({email:"",password:""}),[r,i]=xe.useState({}),[n,a]=xe.useState(!1),[c]=xe.useState(!1),[s,p]=xe.useState(!1),{setIsAuthorized:g,setAdmin:v,setTokenType:B,setIsUserVerified:F}=io(),C=Wo(),L=(ee,G)=>{let ne="";return ee==="email"?G?/\S+@\S+\.\S+/.test(G)||(ne="Please enter a valid email address"):ne="Email is required":ee==="password"&&(G?G.length<6&&(ne="Password must be at least 6 characters"):ne="Password is required"),ne},P=()=>{const ee={},G=L("email",e.email);G&&(ee.email=G);const ne=L("password",e.password);return ne&&(ee.password=ne),i(ee),Object.keys(ee).length===0},D=ee=>r[ee]?"error":e[ee]&&!r[ee]?"success":"",j=ee=>{const{name:G,value:ne}=ee.target,Z=L(G,ne);i(le=>({...le,[G]:Z}))};xe.useEffect(()=>{const ee=JSON.parse(localStorage.getItem("admin")||"null"),G=localStorage.getItem("token"),ne=localStorage.getItem("isAuthorized")==="true",Z=localStorage.getItem("tokenType");ee&&ne&&G&&Z==="admin"&&(v(ee),g(!0),B(Z),F(!1),p0(G),C("/admin/analytics",{replace:!0}))},[C,v,g,B,F]);const q=ee=>{const{name:G,value:ne}=ee.target;t(le=>({...le,[G]:ne}));const Z=L(G,ne);i(le=>({...le,[G]:Z}))},H=async ee=>{if(ee.preventDefault(),!!P()){a(!0);try{const{data:G}=await Nr.post("/admin/auth/login",{email:e.email,password:e.password});v(G.user),g(!0),B("admin"),F(G.user.isVerified||!1),localStorage.setItem("admin",JSON.stringify(G.user)),localStorage.setItem("token",G.token),localStorage.setItem("isAuthorized","true"),localStorage.setItem("tokenType","admin"),c&&localStorage.setItem("rememberedEmail",e.email),p0(G.token),Dn.success(G.message||"Login successful!"),t({email:"",password:""}),i({}),C("/admin/analytics")}catch(G){const ne=G.response?.data?.message||"Login failed. Please try again.";i({general:ne}),Dn.error(ne)}finally{a(!1)}}};return d.jsxs("div",{className:"login-container",children:[d.jsx("div",{className:"login-background-pattern"}),d.jsxs("div",{className:"login-wrapper",children:[d.jsxs("div",{className:"login-left-side",children:[d.jsx("img",{src:N4,alt:"SkillConnect Logo",className:"login-left-logo"}),d.jsx("h1",{className:"login-left-title",children:"Administrator Portal"}),d.jsx("p",{className:"login-left-subtitle",children:"Secure access for authorized administrators"})]}),d.jsx("div",{className:"login-right-side",children:d.jsx("div",{className:"login-card",children:d.jsxs("div",{className:"login-form-container",children:[r.general&&d.jsxs("div",{className:"general-error",children:[d.jsx(op,{className:"general-error-icon"}),d.jsx("p",{className:"general-error-text",children:r.general})]}),d.jsxs("form",{className:"login-form",onSubmit:H,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("input",{type:"email",id:"email",name:"email",placeholder:"admin@skillconnect.com",value:e.email,onChange:q,onBlur:j,className:`form-input ${D("email")}`,disabled:n,autoComplete:"email","aria-invalid":!!r.email,"aria-describedby":r.email?"email-error":"email-help"}),D("email")==="success"&&d.jsx("div",{className:"input-icon-right",children:d.jsx($6,{className:"icon-success"})}),D("email")==="error"&&d.jsx("div",{className:"input-icon-right",children:d.jsx(op,{className:"icon-error"})})]}),r.email?d.jsxs("p",{id:"email-error",className:"field-error-message",children:[d.jsx(op,{className:"error-icon-inline"}),r.email]}):d.jsx("p",{id:"email-help",className:"field-help-text",children:"Enter the email address you used to register as admin"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),d.jsxs("div",{className:"input-wrapper",children:[d.jsx("input",{type:s?"text":"password",id:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:q,onBlur:j,className:`form-input ${D("password")}`,disabled:n,autoComplete:"current-password","aria-invalid":!!r.password,"aria-describedby":r.password?"password-error":"password-help"}),d.jsx("button",{type:"button",onClick:()=>p(!s),className:"password-toggle-btn","aria-label":s?"Hide password":"Show password",tabIndex:-1,children:s?d.jsx(B2,{className:"toggle-icon"}):d.jsx(S2,{className:"toggle-icon"})})]}),r.password?d.jsxs("p",{id:"password-error",className:"field-error-message",children:[d.jsx(op,{className:"error-icon-inline"}),r.password]}):d.jsx("p",{id:"password-help",className:"field-help-text",children:"Must be at least 8 characters long"})]}),d.jsx("button",{type:"submit",disabled:n,className:"submit-btn",children:n?d.jsxs("span",{className:"btn-loading",children:[d.jsxs("svg",{className:"spinner",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),d.jsx("path",{className:"spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In as Admin"})]}),d.jsx("div",{className:"login-footer",children:d.jsxs("p",{className:"footer-subtext",children:["Not an admin? ",d.jsx("a",{href:"/login",className:"footer-sublink",children:"Login as User"})]})})]})})})]})]})},n7=()=>{const e=Wo(),t=sh(),r=t.pathname==="/admin/analytics",i=t.pathname==="/admin/recommendations",n=t.pathname==="/admin/jobfairs",a=t.pathname==="/admin/service-requests",c=t.pathname==="/admin/users",s=t.pathname==="/admin/residents",p=t.pathname==="/admin/admin-settings",g=t.pathname==="/admin/admin-register",{logout:v,admin:B}=io();xe.useEffect(()=>{t.pathname.startsWith("/admin/")&&localStorage.setItem("adminLastPath",t.pathname)},[t.pathname]);const F=async()=>{try{await v(),e("/admin/login")}catch(D){console.error("Logout failed:",D),e("/admin/analytics")}},C=B?.name||"Admin",L=B?.profilePic&&B.profilePic.startsWith("http")?B.profilePic:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",P=[{to:"/admin/analytics",label:"Dashboard",icon:X6,active:r},{to:"/admin/recommendations",label:"Recommendations",icon:Y6,active:i},{to:"/admin/jobfairs",label:"Job Fairs",icon:W6,active:n},{to:"/admin/service-requests",label:"Requests",icon:KU,active:a},{to:"/admin/users",label:"Users",icon:cf,active:c},{to:"/admin/residents",label:"Barangay Residents List",icon:rO,active:s},{to:"/admin/admin-register",label:"Admin Register",icon:lf,active:g}];return d.jsxs("div",{className:`admin-shell ${p?"admin-shell--no-sidebar":""}`,children:[!p&&d.jsxs("aside",{className:"admin-shell__sidebar",children:[d.jsxs("div",{className:"admin-shell__sidebar-brand",children:[d.jsx("img",{src:L,alt:"Admin avatar",className:"admin-shell__avatar"}),d.jsx("h2",{className:"admin-shell__name",children:C}),d.jsx("p",{className:"admin-shell__role",children:"System Administrator"})]}),d.jsx("nav",{className:"admin-shell__nav","aria-label":"Admin navigation",children:d.jsx("ul",{children:P.map(D=>d.jsx("li",{children:d.jsxs(Ac,{to:D.to,className:`admin-link ${D.active?"active":""}`,children:[d.jsx(D.icon,{}),D.label]})},D.to))})}),d.jsx("div",{className:"admin-shell__footer",children:d.jsxs("button",{className:"admin-shell__logout",onClick:F,children:[d.jsx(eF,{})," Logout"]})})]}),d.jsx("main",{className:`admin-shell__content ${p?"admin-shell__content--full-width":""}`,children:d.jsx(Qk,{})})]})},s7=()=>{const[e,t]=xe.useState([]),[r,i]=xe.useState(!0),[n,a]=xe.useState("");return xe.useEffect(()=>{(async()=>{try{const s=await Nr.get("/admin/service-providers");t(s.data.workers||s.data||[])}catch{a("Failed to fetch service providers")}finally{i(!1)}})()},[]),r?d.jsx("div",{className:"loading-skeleton"}):n?d.jsxs("div",{className:"analytics-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsx("h1",{children:"Error"})}),d.jsx("div",{className:"analytics-card",children:d.jsx("p",{className:"metric-change negative",children:n})})]}):e.length===0?d.jsxs("div",{className:"analytics-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsx("h1",{children:"No Service Providers"})}),d.jsx("div",{className:"analytics-card",children:d.jsx("p",{children:"No service providers found."})})]}):d.jsxs("div",{className:"analytics-container",children:[d.jsxs("div",{className:"analytics-header",children:[d.jsx("h1",{children:"Service Providers"}),d.jsx("p",{children:"List of all service providers"})]}),d.jsx("div",{className:"analytics-card",children:e.map(c=>d.jsxs("div",{className:"analytics-card",children:[d.jsx("img",{src:c.profilePic||"/default-avatar.png",alt:`${c.firstName} ${c.lastName}`,className:"profile-pic"}),d.jsxs("h2",{children:[c.firstName," ",c.lastName]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Skills:"})," ",Array.isArray(c.skills)&&c.skills.length>0?c.skills.join(", "):"N/A"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Availability:"})," ",c.availability||"Not set"]})]},c._id))})]})},a7=()=>{const[e,t]=xe.useState({title:"",description:"",date:"",startTime:"",endTime:"",location:""}),[r,i]=xe.useState(!1),n=c=>{t({...e,[c.target.name]:c.target.value})},a=async c=>{c.preventDefault(),i(!0);try{const s=new FormData;s.append("title",e.title),s.append("description",e.description),s.append("date",e.date),s.append("startTime",e.startTime),s.append("endTime",e.endTime),s.append("location",e.location);const p=await Nr.post("/admin/jobfairs",s);p.data.success?(pi.success("Job fair created successfully!"),t({title:"",description:"",date:"",startTime:"",endTime:"",location:""})):pi.error(p.data.message||"Failed to create job fair")}catch(s){pi.error("Error: "+s.message)}finally{i(!1)}};return d.jsxs("div",{className:"container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"Create Job Fair"}),d.jsx("p",{className:"header-description",children:"Set up a new job fair event"})]})}),d.jsx("div",{className:"form-container",children:d.jsxs("form",{onSubmit:a,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Title"}),d.jsx("input",{type:"text",name:"title",value:e.title,onChange:n,autoComplete:"off",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Description"}),d.jsx("textarea",{name:"description",value:e.description,onChange:n,rows:"3",autoComplete:"off",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Date"}),d.jsx("input",{type:"date",name:"date",value:e.date,onChange:n,autoComplete:"off",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Start Time"}),d.jsx("input",{type:"time",name:"startTime",value:e.startTime,onChange:n,autoComplete:"off",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"End Time"}),d.jsx("input",{type:"time",name:"endTime",value:e.endTime,onChange:n,autoComplete:"off",required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Location"}),d.jsx("input",{type:"text",name:"location",value:e.location,onChange:n,autoComplete:"address-level2",required:!0})]}),d.jsx("div",{className:"actions-section",children:d.jsx("button",{type:"submit",disabled:r,className:"export-btn",children:r?"Creating...":"Create Job Fair"})})]})})]})},o7=()=>{const[e,t]=xe.useState([]),[r,i]=xe.useState(1),[n,a]=xe.useState(10),[c,s]=xe.useState(1),[p,g]=xe.useState(0),[v,B]=xe.useState(!1),[F,C]=xe.useState(""),[L,P]=xe.useState(""),[D,j]=xe.useState(""),[q]=xe.useState("createdAt"),[H]=xe.useState("desc"),ee=async(G=1,ne=n)=>{B(!0),C("");try{const Z=new URLSearchParams;Z.set("page",G),Z.set("limit",ne),L&&Z.set("skill",L),D&&Z.set("status",D),Z.set("sort",`${q}:${H}`);const le=await Nr.get(`/admin/service-requests?${Z.toString()}`);if(!le.data)throw new Error("Invalid response format");const J=le.data;t(Array.isArray(J.requests)?J.requests:[]),i(G),s(J.totalPages||1),g(J.count||0)}catch(Z){console.error("Failed to fetch requests",Z),C(Z.response?.data?.message||Z.message||"Failed to fetch service requests"),t([]),g(0),s(1)}finally{B(!1)}};return xe.useEffect(()=>{ee(1)},[]),d.jsxs("div",{className:"user-management-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"Service Requests Review"}),d.jsx("p",{className:"header-description",children:"Review and manage all service requests from the platform"})]})}),d.jsx("div",{className:"filters-section",children:d.jsxs("div",{className:"filters-grid",children:[d.jsxs("div",{className:"filter-group",children:[d.jsxs("label",{className:"filter-label",children:[d.jsx("i",{className:"fas fa-tools"}),"Filter by Skill"]}),d.jsx("input",{type:"text",placeholder:"Enter skill name...",value:L,onChange:G=>P(G.target.value),className:"filter-input"})]}),d.jsxs("div",{className:"filter-group",children:[d.jsxs("label",{className:"filter-label",children:[d.jsx("i",{className:"fas fa-filter"}),"Status Filter"]}),d.jsxs("select",{value:D,onChange:G=>j(G.target.value),className:"filter-select",children:[d.jsx("option",{value:"",children:"All Status"}),d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"accepted",children:"Accepted"}),d.jsx("option",{value:"complete",children:"Complete"}),d.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),d.jsxs("div",{className:"filter-group",children:[d.jsxs("label",{className:"filter-label",children:[d.jsx("i",{className:"fas fa-list"}),"Items per Page"]}),d.jsxs("select",{value:n,onChange:G=>{a(parseInt(G.target.value)),ee(1,parseInt(G.target.value))},className:"filter-select",children:[d.jsx("option",{value:5,children:"5 per page"}),d.jsx("option",{value:10,children:"10 per page"}),d.jsx("option",{value:25,children:"25 per page"}),d.jsx("option",{value:50,children:"50 per page"})]})]}),d.jsx("div",{className:"filter-actions",children:d.jsxs("button",{onClick:()=>ee(1),className:"apply-filters-btn",disabled:v,children:[d.jsx("i",{className:"fas fa-search"}),"Apply Filters"]})})]})}),F?d.jsx("div",{className:"error-container",children:d.jsxs("div",{className:"error-content",children:[d.jsx("i",{className:"fas fa-exclamation-triangle error-icon"}),d.jsx("h3",{children:"Failed to Load Service Requests"}),d.jsx("p",{children:F}),d.jsxs("button",{onClick:()=>ee(1),className:"retry-btn",disabled:v,children:[d.jsx("i",{className:"fas fa-redo"}),"Try Again"]})]})}):v?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Loading service requests..."})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"content-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsxs("h2",{children:[d.jsx("i",{className:"fas fa-clipboard-list"}),"Service Requests (",p,")"]}),d.jsxs("div",{className:"card-stats",children:[d.jsxs("span",{className:"stat-item",children:[d.jsx("i",{className:"fas fa-clock"}),e.filter(G=>G.status?.toLowerCase()==="pending"||G.status?.toLowerCase()==="available").length," Pending"]}),d.jsxs("span",{className:"stat-item",children:[d.jsx("i",{className:"fas fa-check-circle"}),e.filter(G=>G.status?.toLowerCase()==="accepted"||G.status?.toLowerCase()==="working").length," Accepted"]}),d.jsxs("span",{className:"stat-item",children:[d.jsx("i",{className:"fas fa-check-double"}),e.filter(G=>G.status?.toLowerCase()==="complete").length," Complete"]})]})]}),d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsxs("th",{children:[d.jsx("i",{className:"fas fa-user"}),"Customer"]}),d.jsxs("th",{children:[d.jsx("i",{className:"fas fa-wrench"}),"Service Type"]}),d.jsxs("th",{children:[d.jsx("i",{className:"fas fa-file-alt"}),"Description"]}),d.jsxs("th",{children:[d.jsx("i",{className:"fas fa-info-circle"}),"Status"]}),d.jsxs("th",{children:[d.jsx("i",{className:"fas fa-calendar"}),"Created"]})]})}),d.jsx("tbody",{children:e.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"5",className:"no-data",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("i",{className:"fas fa-inbox"}),d.jsx("h3",{children:"No service requests found"}),d.jsx("p",{children:"Try adjusting your filters or check back later for new requests."})]})})}):e.map(G=>d.jsxs("tr",{className:"request-row",children:[d.jsx("td",{children:d.jsxs("div",{className:"user-info",children:[d.jsx("div",{className:"user-name",children:G.requester?.firstName&&G.requester?.lastName?`${G.requester.firstName} ${G.requester.lastName}`:G.requester?.username||G.requester?.email||"Anonymous User"}),d.jsxs("div",{className:"user-id",children:["ID: ",G._id.slice(-6)]})]})}),d.jsx("td",{children:d.jsx("div",{className:"service-type",children:d.jsx("span",{className:"service-badge",children:G.typeOfWork||G.name||"Service"})})}),d.jsx("td",{children:d.jsxs("div",{className:"description-cell",children:[d.jsx("p",{className:"description-text",children:G.notes&&G.notes.length>100?`${G.notes.substring(0,100)}...`:G.notes||"No description provided"}),G.status?.toLowerCase()==="cancelled"&&G.cancellationReason&&d.jsxs("p",{className:"cancellation-reason",children:[d.jsx("strong",{children:"Cancellation Reason:"})," ",G.cancellationReason]})]})}),d.jsx("td",{children:d.jsxs("span",{className:`status-badge ${(G.status||"").toLowerCase()}`,children:[d.jsx("i",{className:`fas ${G.status?.toLowerCase()==="available"||G.status?.toLowerCase()==="pending"?"fa-clock":G.status?.toLowerCase()==="working"||G.status?.toLowerCase()==="accepted"?"fa-play-circle":G.status?.toLowerCase()==="complete"?"fa-check-double":G.status?.toLowerCase()==="cancelled"?"fa-times-circle":"fa-question-circle"}`}),G.status||"Unknown"]})}),d.jsx("td",{children:d.jsxs("div",{className:"date-info",children:[d.jsx("div",{className:"date-main",children:new Date(G.createdAt).toLocaleDateString()}),d.jsx("div",{className:"date-time",children:new Date(G.createdAt).toLocaleTimeString()})]})})]},G._id))})]})})]}),d.jsxs("div",{className:"pagination-section",children:[d.jsxs("div",{className:"pagination-info",children:[d.jsxs("div",{className:"total-info",children:[d.jsx("i",{className:"fas fa-database"}),d.jsxs("span",{children:["Showing ",e.length," of ",p," service requests"]})]}),d.jsx("div",{className:"page-info",children:d.jsxs("span",{children:["Page ",r," of ",c]})})]}),d.jsxs("div",{className:"pagination-controls",children:[d.jsxs("button",{className:"pagination-btn prev-btn",disabled:r<=1||v,onClick:()=>ee(r-1),children:[d.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),d.jsxs("div",{className:"page-jumper",children:[d.jsx("label",{className:"jump-label",children:"Go to page:"}),d.jsx("input",{type:"number",min:1,max:c,placeholder:r,onKeyDown:G=>{if(G.key==="Enter"){const ne=parseInt(G.target.value);ne>=1&&ne<=c&&ee(ne),G.target.value=""}},className:"page-input",disabled:v}),d.jsxs("span",{className:"page-total",children:["of ",c]})]}),d.jsxs("button",{className:"pagination-btn next-btn",disabled:r>=c||v,onClick:()=>ee(r+1),children:["Next",d.jsx("i",{className:"fas fa-chevron-right"})]})]})]})]})]})},l7="http://192.168.1.12:4000/api/v1",c7=l7.replace("/api/v1",""),u7=()=>{const[e,t]=xe.useState([]),[r,i]=xe.useState(!0),[n,a]=xe.useState(""),[c,s]=xe.useState("users"),[p,g]=xe.useState(null),[v,B]=xe.useState(null),[F,C]=xe.useState(!1),[L,P]=xe.useState(""),[D,j]=xe.useState([]),[q,H]=xe.useState("all"),[ee,G]=xe.useState(1),[ne,Z]=xe.useState(1),[le,J]=xe.useState(!1),[ce,te]=xe.useState({name:"",rate:"",description:""}),[K,me]=xe.useState([]),we=10;xe.useEffect(()=>{Fe()},[]);const Fe=async()=>{try{i(!0),a("");const ve=await Nr.get("/admin/users"),Ct=Array.isArray(ve.data.users)?ve.data.users:[],Pt=new Date;Pt.setDate(Pt.getDate()-30);const Ve=Ct.filter(lr=>new Date(lr.createdAt)>=Pt&&!lr.verified);t(Ct),j(Ve)}catch(ve){console.error("Failed to fetch data:",ve),a(`Failed to fetch data: ${ve.response?.data?.message||ve.message}`)}finally{i(!1)}},he=async ve=>{try{if((await Nr.put(`/admin/user/verify/${ve}`)).data.success)return alert("User verified successfully"),Fe(),!0}catch(Ct){console.error("Error verifying user:",Ct),alert(`Error verifying user: ${Ct.response?.data?.message||Ct.message}`)}return!1},Le=async ve=>{if(window.confirm("Are you sure you want to ban this user?")){try{if((await Nr.delete(`/admin/user/${ve}`)).data.success)return alert("User banned successfully"),Fe(),!0}catch(Ct){console.error("Error banning user:",Ct),alert(`Error banning user: ${Ct.response?.data?.message||Ct.message}`)}return!1}},$e=async(ve,Ct)=>{try{if((await Nr.put(`/admin/user/service-profile/${ve}`,{services:Ct})).data.success)return alert("Services updated successfully"),Fe(),!0}catch(Pt){console.error("Error updating services:",Pt),alert(`Error updating services: ${Pt.response?.data?.message||Pt.message}`)}return!1},Ne=ve=>{J(!0),me(ve.services||[]),te({name:"",rate:"",description:""})},Te=()=>{J(!1),me([]),te({name:"",rate:"",description:""})},Ge=()=>{if(!ce.name.trim()){alert("Service name is required");return}if(!ce.rate||isNaN(ce.rate)||ce.rate<0){alert("Valid rate is required");return}const ve={name:ce.name.trim(),rate:parseFloat(ce.rate),description:ce.description.trim()||""};me([...K,ve]),te({name:"",rate:"",description:""})},Y=ve=>{const Ct=K.filter((Pt,Ve)=>Ve!==ve);me(Ct)},Ae=async()=>{if(!v)return;g("save-services");const ve=await $e(v._id,K);g(null),ve&&(J(!1),me([]))},fe=ve=>ve?ve.startsWith("http")?ve:`${c7}${ve}`:"/default-avatar.png";if(r)return d.jsx("div",{className:"user-management-loading",children:d.jsxs("div",{className:"loading-spinner-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{className:"loading-text",children:"Loading user data..."})]})});if(n)return d.jsx("div",{className:"user-management-error",children:d.jsxs("div",{className:"error-container",children:[d.jsx("div",{className:"error-icon",children:""}),d.jsx("h2",{children:"Error"}),d.jsx("p",{children:n})]})});const be=e.filter(ve=>ve.verified&&(q==="all"||ve.role===q)),Me=Math.ceil(be.length/we),ze=(ee-1)*we,We=be.slice(ze,ze+we),ut=Math.ceil(D.length/we),dt=(ne-1)*we,zt=D.slice(dt,dt+we);return d.jsxs("div",{className:"user-management-wrapper",children:[d.jsx("style",{children:`
        .user-management-wrapper {
          min-height: 100vh;
          background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .user-management-loading,
        .user-management-error {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .loading-spinner-container {
          text-align: center;
        }

        .loading-spinner {
          width: 64px;
          height: 64px;
          border: 4px solid #e2e8f0;
          border-top-color: #2563eb;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 1rem;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .loading-text {
          color: #64748b;
          font-weight: 500;
        }

        .error-container {
          text-align: center;
          background: white;
          padding: 3rem;
          border-radius: 1rem;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .error-icon {
          font-size: 4rem;
          margin-bottom: 1rem;
        }

        .error-container h2 {
          color: #1e293b;
          font-size: 1.5rem;
          margin-bottom: 0.5rem;
        }

        .error-container p {
          color: #64748b;
        }

        .um-header {
          background: white;
          border-bottom: 1px solid #e2e8f0;
          position: sticky;
          top: 0;
          z-index: 10;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .um-header-content {
          max-width: 1280px;
          margin: 0 auto;
          padding: 1.5rem 2rem;
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .um-header-title h1 {
          font-size: 1.875rem;
          font-weight: 700;
          color: #1e293b;
          margin: 0 0 0.25rem 0;
        }

        .um-header-subtitle {
          color: #64748b;
          margin: 0;
        }

        .um-stats-card {
          background: #eff6ff;
          padding: 1rem 1.5rem;
          border-radius: 0.75rem;
        }

        .um-stats-label {
          font-size: 0.875rem;
          color: #64748b;
          display: block;
          margin-bottom: 0.25rem;
        }

        .um-stats-value {
          font-size: 2rem;
          font-weight: 700;
          color: #2563eb;
          display: block;
        }

        .um-container {
          max-width: 1280px;
          margin: 0 auto;
          padding: 2rem;
        }

        .um-tabs {
          display: flex;
          gap: 0.5rem;
          margin-bottom: 1.5rem;
          background: white;
          padding: 0.5rem;
          border-radius: 1rem;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
          border: 1px solid #e2e8f0;
        }

        .um-tab-btn {
          flex: 1;
          padding: 0.875rem 1.5rem;
          border-radius: 0.75rem;
          font-weight: 500;
          border: none;
          background: transparent;
          color: #64748b;
          cursor: pointer;
          transition: all 0.2s;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
        }

        .um-tab-btn:hover {
          background: #f8fafc;
        }

        .um-tab-btn.active {
          background: #2563eb;
          color: white;
          box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }

        .um-tab-badge {
          padding: 0.25rem 0.5rem;
          border-radius: 9999px;
          font-size: 0.75rem;
        }

        .um-tab-btn.active .um-tab-badge {
          background: #1e40af;
        }

        .um-tab-btn:not(.active) .um-tab-badge {
          background: #e2e8f0;
          color: #475569;
        }

        .um-card {
          background: white;
          border-radius: 1rem;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
          border: 1px solid #e2e8f0;
          overflow: hidden;
        }

        .um-card-header {
          padding: 1.5rem;
          border-bottom: 1px solid #e2e8f0;
          background: #f8fafc;
        }

        .um-card-header-content {
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .um-card-title {
          font-size: 1.25rem;
          font-weight: 600;
          color: #1e293b;
          margin: 0;
        }

        .um-filter-section {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .um-filter-label {
          font-size: 0.875rem;
          color: #64748b;
          font-weight: 500;
        }

        .um-filter-select {
          padding: 0.5rem 1rem;
          background: white;
          border: 1px solid #cbd5e1;
          border-radius: 0.5rem;
          font-size: 0.875rem;
          color: #1e293b;
          cursor: pointer;
        }

        .um-filter-select:focus {
          outline: none;
          border-color: #2563eb;
          box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .um-card-body {
          padding: 1.5rem;
        }

        .um-users-grid {
          display: grid;
          gap: 1rem;
        }

        .um-user-card {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1.25rem;
          background: #f8fafc;
          border-radius: 1rem;
          border: 1px solid #e2e8f0;
          transition: all 0.2s;
        }

        .um-user-card:hover {
          background: #f1f5f9;
          transform: translateY(-2px);
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .um-user-card.pending {
          background: #fffbeb;
          border-color: #fcd34d;
        }

        .um-user-card.pending:hover {
          background: #fef3c7;
        }

        .um-user-info {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .um-avatar-wrapper {
          position: relative;
        }

        .um-avatar {
          width: 64px;
          height: 64px;
          border-radius: 50%;
          object-fit: cover;
          border: 2px solid white;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .um-online-indicator {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 16px;
          height: 16px;
          background: #22c55e;
          border: 2px solid white;
          border-radius: 50%;
        }

        .um-user-details h3 {
          font-size: 1.125rem;
          font-weight: 600;
          color: #1e293b;
          margin: 0 0 0.25rem 0;
        }

        .um-user-email {
          color: #64748b;
          font-size: 0.875rem;
          margin: 0 0 0.5rem 0;
        }

        .um-user-badges {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          flex-wrap: wrap;
        }

        .um-badge {
          padding: 0.25rem 0.75rem;
          border-radius: 9999px;
          font-size: 0.75rem;
          font-weight: 500;
        }

        .um-badge.provider {
          background: #f3e8ff;
          color: #7c3aed;
        }

        .um-badge.resident {
          background: #dbeafe;
          color: #2563eb;
        }

        .um-badge.verified {
          background: #dcfce7;
          color: #16a34a;
        }

        .um-badge.pending {
          background: #fef3c7;
          color: #d97706;
        }

        .um-view-btn {
          padding: 0.625rem 1.5rem;
          background: #2563eb;
          color: white;
          border: none;
          border-radius: 0.5rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          box-shadow: 0 2px 4px rgba(37, 99, 235, 0.2);
        }

        .um-view-btn:hover {
          background: #1d4ed8;
          transform: translateY(-1px);
          box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);
        }

        .um-view-btn.review {
          background: #d97706;
        }

        .um-view-btn.review:hover {
          background: #b45309;
        }

        .um-empty-state {
          text-align: center;
          padding: 4rem 2rem;
        }

        .um-empty-icon {
          font-size: 4rem;
          margin-bottom: 1rem;
        }

        .um-empty-text {
          color: #64748b;
          font-size: 1.125rem;
        }

        .um-pagination {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-top: 1.5rem;
          padding-top: 1.5rem;
          border-top: 1px solid #e2e8f0;
        }

        .um-pagination-btn {
          padding: 0.5rem 1rem;
          background: white;
          border: 1px solid #cbd5e1;
          border-radius: 0.5rem;
          font-weight: 500;
          color: #475569;
          cursor: pointer;
          transition: all 0.2s;
        }

        .um-pagination-btn:hover:not(:disabled) {
          background: #f8fafc;
        }

        .um-pagination-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .um-pagination-info {
          color: #64748b;
        }

        .um-modal-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.5);
          backdrop-filter: blur(4px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 50;
          padding: 1rem;
        }

        .um-modal {
          background: white;
          border-radius: 1.5rem;
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
          max-width: 64rem;
          width: 100%;
          max-height: 90vh;
          overflow-y: auto;
        }

        .um-modal-header {
          position: sticky;
          top: 0;
          background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
          color: white;
          padding: 1.5rem;
          border-radius: 1.5rem 1.5rem 0 0;
          z-index: 10;
        }

        .um-modal-header-content {
          display: flex;
          align-items: flex-start;
          justify-content: space-between;
        }

        .um-modal-profile {
          display: flex;
          align-items: center;
          gap: 1rem;
        }

        .um-modal-avatar {
          width: 80px;
          height: 80px;
          border-radius: 50%;
          object-fit: cover;
          border: 4px solid white;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .um-modal-name {
          font-size: 1.5rem;
          font-weight: 700;
          margin: 0 0 0.25rem 0;
        }

        .um-modal-email {
          color: #bfdbfe;
          margin: 0 0 0.5rem 0;
        }

        .um-modal-close {
          background: rgba(255, 255, 255, 0.2);
          border: none;
          color: white;
          width: 40px;
          height: 40px;
          border-radius: 0.5rem;
          font-size: 1.5rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .um-modal-close:hover {
          background: rgba(255, 255, 255, 0.3);
        }

        .um-modal-body {
          padding: 1.5rem;
        }

        .um-detail-section {
          background: #f8fafc;
          border-radius: 1rem;
          padding: 1.25rem;
          border: 1px solid #e2e8f0;
          margin-bottom: 1.5rem;
        }

        .um-detail-section:last-child {
          margin-bottom: 0;
        }

        .um-detail-section h3 {
          font-size: 1.125rem;
          font-weight: 600;
          color: #1e293b;
          margin: 0 0 1rem 0;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .um-detail-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
        }

        .um-detail-item label {
          display: block;
          font-size: 0.875rem;
          color: #64748b;
          font-weight: 500;
          margin-bottom: 0.25rem;
        }

        .um-detail-item p {
          color: #1e293b;
          margin: 0;
          word-break: break-word;
        }

        .um-detail-item.full-width {
          grid-column: 1 / -1;
        }

        .um-skills-grid {
          display: flex;
          flex-wrap: wrap;
          gap: 0.5rem;
        }

        .um-skill-tag {
          padding: 0.5rem 1rem;
          background: #dbeafe;
          color: #1e40af;
          border-radius: 9999px;
          font-size: 0.875rem;
          font-weight: 500;
        }

        .um-services-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 1rem;
        }

        .um-service-item {
          background: white;
          padding: 1rem;
          border-radius: 0.75rem;
          border: 1px solid #e2e8f0;
        }

        .um-service-item h4 {
          color: #1e293b;
          font-size: 1rem;
          font-weight: 600;
          margin: 0 0 0.5rem 0;
        }

        .um-service-rate {
          color: #2563eb;
          font-size: 1.25rem;
          font-weight: 700;
          margin-bottom: 0.5rem;
        }

        .um-service-description {
          color: #64748b;
          font-size: 0.875rem;
          margin: 0;
        }

        .um-documents-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
          gap: 1rem;
        }

        .um-document-item {
          background: white;
          padding: 1rem;
          border-radius: 0.75rem;
          border: 1px solid #e2e8f0;
        }

        .um-document-info {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-bottom: 0.75rem;
          color: #64748b;
          font-size: 0.875rem;
        }

        .um-document-preview img {
          width: 100%;
          height: 150px;
          object-fit: cover;
          border-radius: 0.5rem;
          cursor: pointer;
          transition: all 0.2s;
        }

        .um-document-preview img:hover {
          transform: scale(1.05);
        }

        .um-modal-actions {
          padding: 1.5rem;
          border-top: 1px solid #e2e8f0;
          background: #f8fafc;
        }

        .um-actions-section {
          margin-bottom: 1.5rem;
        }

        .um-actions-section:last-child {
          margin-bottom: 0;
        }

        .um-actions-header h4 {
          font-size: 1rem;
          font-weight: 600;
          color: #1e293b;
          margin: 0 0 0.25rem 0;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .um-actions-subtitle {
          color: #64748b;
          font-size: 0.875rem;
          margin: 0 0 1rem 0;
        }

        .um-action-buttons {
          display: flex;
          gap: 0.75rem;
          flex-wrap: wrap;
        }

        .um-action-btn {
          padding: 0.75rem 1.5rem;
          border: none;
          border-radius: 0.5rem;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        }

        .um-action-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .um-action-btn.verify {
          background: #22c55e;
          color: white;
        }

        .um-action-btn.verify:hover:not(:disabled) {
          background: #16a34a;
        }

        .um-action-btn.edit {
          background: #3b82f6;
          color: white;
        }

        .um-action-btn.edit:hover:not(:disabled) {
          background: #2563eb;
        }

        .um-action-btn.ban {
          background: #ef4444;
          color: white;
        }

        .um-action-btn.ban:hover:not(:disabled) {
          background: #dc2626;
        }

        .um-action-btn.close {
          background: #64748b;
          color: white;
        }

        .um-action-btn.close:hover:not(:disabled) {
          background: #475569;
        }

        @media (max-width: 768px) {
          .um-header-content {
            flex-direction: column;
            gap: 1rem;
          }

          .um-detail-grid {
            grid-template-columns: 1fr;
          }

          .um-action-buttons {
            flex-direction: column;
          }

          .um-action-btn {
            width: 100%;
            justify-content: center;
          }
        }
      `}),d.jsx("div",{className:"um-header",children:d.jsxs("div",{className:"um-header-content",children:[d.jsxs("div",{className:"um-header-title",children:[d.jsx("h1",{children:"User Management"}),d.jsx("p",{className:"um-header-subtitle",children:"Manage and oversee all platform users"})]}),d.jsxs("div",{className:"um-stats-card",children:[d.jsx("span",{className:"um-stats-label",children:"Total Users"}),d.jsx("span",{className:"um-stats-value",children:e.length})]})]})}),d.jsxs("div",{className:"um-container",children:[d.jsxs("div",{className:"um-tabs",children:[d.jsxs("button",{onClick:()=>s("users"),className:`um-tab-btn ${c==="users"?"active":""}`,children:[" Verified Users",d.jsx("span",{className:"um-tab-badge",children:e.filter(ve=>ve.verified).length})]}),d.jsxs("button",{onClick:()=>s("new-users"),className:`um-tab-btn ${c==="new-users"?"active":""}`,children:[" New Registrations",d.jsx("span",{className:"um-tab-badge",children:D.length})]})]}),c==="users"&&d.jsxs("div",{className:"um-card",children:[d.jsx("div",{className:"um-card-header",children:d.jsxs("div",{className:"um-card-header-content",children:[d.jsx("h2",{className:"um-card-title",children:"All Verified Users"}),d.jsxs("div",{className:"um-filter-section",children:[d.jsx("label",{className:"um-filter-label",children:"Filter by Role:"}),d.jsxs("select",{value:q,onChange:ve=>{H(ve.target.value),G(1)},className:"um-filter-select",children:[d.jsx("option",{value:"all",children:"All Roles"}),d.jsx("option",{value:"Service Provider",children:"Service Provider"}),d.jsx("option",{value:"Community Member",children:"Community Member"})]})]})]})}),d.jsxs("div",{className:"um-card-body",children:[We.length===0?d.jsxs("div",{className:"um-empty-state",children:[d.jsx("div",{className:"um-empty-icon",children:""}),d.jsx("p",{className:"um-empty-text",children:"No verified users found"})]}):d.jsx("div",{className:"um-users-grid",children:We.map(ve=>d.jsxs("div",{className:"um-user-card",children:[d.jsxs("div",{className:"um-user-info",children:[d.jsxs("div",{className:"um-avatar-wrapper",children:[d.jsx("img",{src:fe(ve.profilePic),alt:ve.firstName,className:"um-avatar"}),ve.isOnline&&d.jsx("div",{className:"um-online-indicator"})]}),d.jsxs("div",{className:"um-user-details",children:[d.jsxs("h3",{children:[ve.firstName," ",ve.lastName]}),d.jsx("p",{className:"um-user-email",children:ve.email}),d.jsxs("div",{className:"um-user-badges",children:[d.jsx("span",{className:`um-badge ${ve.role==="Service Provider"?"provider":"resident"}`,children:ve.role==="Community Member"?"Resident":ve.role}),d.jsx("span",{className:"um-badge verified",children:" Verified"})]})]})]}),d.jsx("button",{onClick:()=>{B(ve),P("users"),C(!0)},className:"um-view-btn",children:"View Details"})]},ve._id))}),Me>1&&d.jsxs("div",{className:"um-pagination",children:[d.jsx("button",{disabled:ee===1,onClick:()=>G(ve=>ve-1),className:"um-pagination-btn",children:" Previous"}),d.jsxs("span",{className:"um-pagination-info",children:["Page ",ee," of ",Me]}),d.jsx("button",{disabled:ee===Me,onClick:()=>G(ve=>ve+1),className:"um-pagination-btn",children:"Next "})]})]})]}),c==="new-users"&&d.jsxs("div",{className:"um-card",children:[d.jsx("div",{className:"um-card-header",children:d.jsx("h2",{className:"um-card-title",children:"Pending Verifications"})}),d.jsxs("div",{className:"um-card-body",children:[zt.length===0?d.jsxs("div",{className:"um-empty-state",children:[d.jsx("div",{className:"um-empty-icon",children:""}),d.jsx("p",{className:"um-empty-text",children:"No pending registrations"})]}):d.jsx("div",{className:"um-users-grid",children:zt.map(ve=>d.jsxs("div",{className:"um-user-card pending",children:[d.jsxs("div",{className:"um-user-info",children:[d.jsx("div",{className:"um-avatar-wrapper",children:d.jsx("img",{src:fe(ve.profilePic),alt:ve.firstName,className:"um-avatar"})}),d.jsxs("div",{className:"um-user-details",children:[d.jsxs("h3",{children:[ve.firstName," ",ve.lastName]}),d.jsx("p",{className:"um-user-email",children:ve.email}),d.jsxs("div",{className:"um-user-badges",children:[d.jsx("span",{className:`um-badge ${ve.role==="Service Provider"?"provider":"resident"}`,children:ve.role}),d.jsxs("span",{className:"um-badge pending",children:[" ",Math.floor((new Date-new Date(ve.createdAt))/(1e3*60*60*24))," days ago"]})]})]})]}),d.jsx("button",{onClick:()=>{B(ve),P("new-users"),C(!0)},className:"um-view-btn review",children:"Review"})]},ve._id))}),ut>1&&d.jsxs("div",{className:"um-pagination",children:[d.jsx("button",{disabled:ne===1,onClick:()=>Z(ve=>ve-1),className:"um-pagination-btn",children:" Previous"}),d.jsxs("span",{className:"um-pagination-info",children:["Page ",ne," of ",ut]}),d.jsx("button",{disabled:ne===ut,onClick:()=>Z(ve=>ve+1),className:"um-pagination-btn",children:"Next "})]})]})]})]}),F&&v&&d.jsx("div",{className:"um-modal-overlay",onClick:()=>C(!1),children:d.jsxs("div",{className:"um-modal",onClick:ve=>ve.stopPropagation(),children:[d.jsx("div",{className:"um-modal-header",children:d.jsxs("div",{className:"um-modal-header-content",children:[d.jsxs("div",{className:"um-modal-profile",children:[d.jsx("img",{src:fe(v.profilePic),alt:v.firstName,className:"um-modal-avatar"}),d.jsxs("div",{children:[d.jsxs("h2",{className:"um-modal-name",children:[v.firstName," ",v.lastName]}),d.jsx("p",{className:"um-modal-email",children:v.email}),d.jsxs("div",{className:"um-user-badges",children:[d.jsx("span",{className:"um-badge verified",children:v.verified?" Verified":" Pending"}),v.isOnline&&d.jsx("span",{className:"um-badge verified",children:" Online"})]})]})]}),d.jsx("button",{onClick:()=>C(!1),className:"um-modal-close",children:""})]})}),d.jsxs("div",{className:"um-modal-body",children:[d.jsxs("div",{className:"um-detail-section",children:[d.jsx("h3",{children:" Account Information"}),d.jsxs("div",{className:"um-detail-grid",children:[d.jsxs("div",{className:"um-detail-item",children:[d.jsx("label",{children:"Username"}),d.jsx("p",{children:v.username})]}),d.jsxs("div",{className:"um-detail-item",children:[d.jsx("label",{children:"Phone"}),d.jsx("p",{children:v.phone||"Not provided"})]}),d.jsxs("div",{className:"um-detail-item",children:[d.jsx("label",{children:"Role"}),d.jsx("p",{children:v.role==="Community Member"?"Community Resident":v.role})]}),d.jsxs("div",{className:"um-detail-item",children:[d.jsx("label",{children:"Member Since"}),d.jsx("p",{children:new Date(v.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),v.address&&d.jsxs("div",{className:"um-detail-item full-width",children:[d.jsx("label",{children:"Address"}),d.jsx("p",{children:v.address})]})]})]}),v.skills&&v.skills.length>0&&d.jsxs("div",{className:"um-detail-section",children:[d.jsxs("h3",{children:[" Skills & Expertise (",v.skills.length,")"]}),d.jsx("div",{className:"um-skills-grid",children:v.skills.map((ve,Ct)=>d.jsx("span",{className:"um-skill-tag",children:ve},Ct))})]}),v.role==="Service Provider"&&d.jsxs("div",{className:"um-detail-section",children:[d.jsxs("h3",{children:[" Services Offered ",v.services&&v.services.length>0&&`(${v.services.length})`]}),le?d.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",border:"1px solid #e2e8f0"},children:[d.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#1e293b",fontSize:"1rem",fontWeight:"600"},children:"Edit Services"}),d.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",background:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[d.jsx("h5",{style:{margin:"0 0 1rem 0",color:"#374151",fontSize:"0.875rem",fontWeight:"600"},children:"Add New Service"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:"0.75rem",alignItems:"end"},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Service Name *"}),d.jsxs("select",{value:ce.name,onChange:ve=>te({...ce,name:ve.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"},children:[d.jsx("option",{value:"",children:"Select a service"}),d.jsx("option",{value:"Plumbing",children:"Plumbing"}),d.jsx("option",{value:"Electrical",children:"Electrical"}),d.jsx("option",{value:"Cleaning",children:"Cleaning"}),d.jsx("option",{value:"Carpentry",children:"Carpentry"}),d.jsx("option",{value:"Painting",children:"Painting"}),d.jsx("option",{value:"Appliance Repair",children:"Appliance Repair"}),d.jsx("option",{value:"Home Renovation",children:"Home Renovation"}),d.jsx("option",{value:"Pest Control",children:"Pest Control"}),d.jsx("option",{value:"Gardening & Landscaping",children:"Gardening & Landscaping"}),d.jsx("option",{value:"Air Conditioning & Ventilation",children:"Air Conditioning & Ventilation"}),d.jsx("option",{value:"Laundry / Labandera",children:"Laundry / Labandera"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Rate () *"}),d.jsx("input",{type:"number",value:ce.rate,onChange:ve=>te({...ce,rate:ve.target.value}),placeholder:"0",min:"0",step:"0.01",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem"}})]}),d.jsx("button",{onClick:Ge,style:{padding:"0.5rem 1rem",background:"#22c55e",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:"+ Add"})]}),d.jsxs("div",{style:{marginTop:"0.75rem"},children:[d.jsx("label",{style:{display:"block",fontSize:"0.75rem",color:"#6b7280",marginBottom:"0.25rem"},children:"Description"}),d.jsx("textarea",{value:ce.description,onChange:ve=>te({...ce,description:ve.target.value}),placeholder:"Brief description of the service",rows:"2",style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",resize:"vertical"}})]})]}),K.length>0&&d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("h5",{style:{margin:"0 0 1rem 0",color:"#374151",fontSize:"0.875rem",fontWeight:"600"},children:["Current Services (",K.length,")"]}),d.jsx("div",{className:"um-services-grid",children:K.map((ve,Ct)=>d.jsxs("div",{className:"um-service-item",style:{position:"relative"},children:[d.jsx("button",{onClick:()=>Y(Ct),style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",fontSize:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Remove service",children:""}),d.jsx("h4",{children:ve.name}),d.jsxs("div",{className:"um-service-rate",children:["",ve.rate.toLocaleString()]}),d.jsx("p",{className:"um-service-description",children:ve.description||"No description available"})]},Ct))})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[d.jsx("button",{onClick:Te,style:{padding:"0.5rem 1rem",background:"#6b7280",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),d.jsx("button",{onClick:Ae,disabled:p==="save-services",style:{padding:"0.5rem 1rem",background:"#2563eb",color:"white",border:"none",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",cursor:p==="save-services"?"not-allowed":"pointer",opacity:p==="save-services"?.5:1},children:p==="save-services"?"Saving...":"Save Services"})]})]}):d.jsx(d.Fragment,{children:v.services&&v.services.length>0?d.jsx("div",{className:"um-services-grid",children:v.services.map((ve,Ct)=>d.jsxs("div",{className:"um-service-item",children:[d.jsx("h4",{children:ve.name}),d.jsxs("div",{className:"um-service-rate",children:["",ve.rate.toLocaleString()]}),d.jsx("p",{className:"um-service-description",children:ve.description||"No description available"})]},Ct))}):d.jsx("p",{className:"um-service-description",style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:"No services configured yet"})}),!le&&d.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:d.jsx("button",{onClick:()=>Ne(v),className:"um-action-btn edit",style:{padding:"0.5rem 1rem",fontSize:"0.875rem"},children:" Edit Services"})})]}),v.certificates&&v.certificates.length>0&&d.jsxs("div",{className:"um-detail-section",children:[d.jsxs("h3",{children:[" Certificates (",v.certificates.length,")"]}),d.jsx("div",{className:"um-documents-grid",children:v.certificates.map((ve,Ct)=>d.jsxs("div",{className:"um-document-item",children:[d.jsxs("div",{className:"um-document-info",children:[" Certificate ",Ct+1]}),d.jsx("div",{className:"um-document-preview",children:ve.match(/\.(jpg|jpeg|png|gif)$/i)&&d.jsx("img",{src:ve,alt:`Certificate ${Ct+1}`})})]},Ct))})]}),v.validId&&d.jsxs("div",{className:"um-detail-section",children:[d.jsx("h3",{children:" Government ID"}),d.jsx("div",{className:"um-documents-grid",children:d.jsxs("div",{className:"um-document-item",children:[d.jsx("div",{className:"um-document-info",children:" Valid ID Document"}),d.jsx("div",{className:"um-document-preview",children:v.validId.match(/\.(jpg|jpeg|png|gif)$/i)&&d.jsx("img",{src:v.validId,alt:"Valid ID"})})]})})]})]}),d.jsxs("div",{className:"um-modal-actions",children:[L==="new-users"&&!v.verified&&d.jsxs("div",{className:"um-actions-section",children:[d.jsxs("div",{className:"um-actions-header",children:[d.jsx("h4",{children:" User Verification"}),d.jsx("p",{className:"um-actions-subtitle",children:"Verify this new user's account to grant full access"})]}),d.jsx("div",{className:"um-action-buttons",children:d.jsx("button",{className:"um-action-btn verify",onClick:async()=>{g("verify"),await he(v._id),g(null),C(!1)},disabled:p==="verify",children:p==="verify"?" Verifying...":" Verify User"})})]}),d.jsxs("div",{className:"um-actions-section",children:[d.jsxs("div",{className:"um-actions-header",children:[d.jsx("h4",{children:" Account Management"}),d.jsx("p",{className:"um-actions-subtitle",children:"Manage this user's account status and permissions"})]}),d.jsxs("div",{className:"um-action-buttons",children:[!v.banned&&d.jsx("button",{className:"um-action-btn ban",onClick:async()=>{g("ban"),await Le(v._id),g(null),C(!1)},disabled:p==="ban",children:p==="ban"?" Banning...":" Ban Account"}),d.jsx("button",{className:"um-action-btn close",onClick:()=>C(!1),disabled:p!==null,children:" Close"})]})]})]})]})})]})};function Kv(e){return e+.5|0}const lp=(e,t,r)=>Math.max(Math.min(e,r),t);function I1(e){return lp(Kv(e*2.55),0,255)}function vp(e){return lp(Kv(e*255),0,255)}function af(e){return lp(Kv(e/2.55)/100,0,1)}function OB(e){return lp(Kv(e*100),0,100)}const Wh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},u5=[..."0123456789ABCDEF"],h7=e=>u5[e&15],A7=e=>u5[(e&240)>>4]+u5[e&15],Xx=e=>(e&240)>>4===(e&15),d7=e=>Xx(e.r)&&Xx(e.g)&&Xx(e.b)&&Xx(e.a);function f7(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&Wh[e[1]]*17,g:255&Wh[e[2]]*17,b:255&Wh[e[3]]*17,a:t===5?Wh[e[4]]*17:255}:(t===7||t===9)&&(r={r:Wh[e[1]]<<4|Wh[e[2]],g:Wh[e[3]]<<4|Wh[e[4]],b:Wh[e[5]]<<4|Wh[e[6]],a:t===9?Wh[e[7]]<<4|Wh[e[8]]:255})),r}const p7=(e,t)=>e<255?t(e):"";function m7(e){var t=d7(e)?h7:A7;return e?"#"+t(e.r)+t(e.g)+t(e.b)+p7(e.a,t):void 0}const g7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function iF(e,t,r){const i=t*Math.min(r,1-r),n=(a,c=(a+e/30)%12)=>r-i*Math.max(Math.min(c-3,9-c,1),-1);return[n(0),n(8),n(4)]}function v7(e,t,r){const i=(n,a=(n+e/60)%6)=>r-r*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function x7(e,t,r){const i=iF(e,1,.5);let n;for(t+r>1&&(n=1/(t+r),t*=n,r*=n),n=0;n<3;n++)i[n]*=1-t-r,i[n]+=t;return i}function y7(e,t,r,i,n){return e===n?(t-r)/i+(t<r?6:0):t===n?(r-e)/i+2:(e-t)/i+4}function L4(e){const r=e.r/255,i=e.g/255,n=e.b/255,a=Math.max(r,i,n),c=Math.min(r,i,n),s=(a+c)/2;let p,g,v;return a!==c&&(v=a-c,g=s>.5?v/(2-a-c):v/(a+c),p=y7(r,i,n,v,a),p=p*60+.5),[p|0,g||0,s]}function M4(e,t,r,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,i)).map(vp)}function P4(e,t,r){return M4(iF,e,t,r)}function _7(e,t,r){return M4(x7,e,t,r)}function b7(e,t,r){return M4(v7,e,t,r)}function nF(e){return(e%360+360)%360}function w7(e){const t=g7.exec(e);let r=255,i;if(!t)return;t[5]!==i&&(r=t[6]?I1(+t[5]):vp(+t[5]));const n=nF(+t[2]),a=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=_7(n,a,c):t[1]==="hsv"?i=b7(n,a,c):i=P4(n,a,c),{r:i[0],g:i[1],b:i[2],a:r}}function C7(e,t){var r=L4(e);r[0]=nF(r[0]+t),r=P4(r),e.r=r[0],e.g=r[1],e.b=r[2]}function B7(e){if(!e)return;const t=L4(e),r=t[0],i=OB(t[1]),n=OB(t[2]);return e.a<255?`hsla(${r}, ${i}%, ${n}%, ${af(e.a)})`:`hsl(${r}, ${i}%, ${n}%)`}const zB={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},QB={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function S7(){const e={},t=Object.keys(QB),r=Object.keys(zB);let i,n,a,c,s;for(i=0;i<t.length;i++){for(c=s=t[i],n=0;n<r.length;n++)a=r[n],s=s.replace(a,zB[a]);a=parseInt(QB[c],16),e[s]=[a>>16&255,a>>8&255,a&255]}return e}let Zx;function E7(e){Zx||(Zx=S7(),Zx.transparent=[0,0,0,0]);const t=Zx[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const T7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function k7(e){const t=T7.exec(e);let r=255,i,n,a;if(t){if(t[7]!==i){const c=+t[7];r=t[8]?I1(c):lp(c*255,0,255)}return i=+t[1],n=+t[3],a=+t[5],i=255&(t[2]?I1(i):lp(i,0,255)),n=255&(t[4]?I1(n):lp(n,0,255)),a=255&(t[6]?I1(a):lp(a,0,255)),{r:i,g:n,b:a,a:r}}}function F7(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${af(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Cb=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Sm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function N7(e,t,r){const i=Sm(af(e.r)),n=Sm(af(e.g)),a=Sm(af(e.b));return{r:vp(Cb(i+r*(Sm(af(t.r))-i))),g:vp(Cb(n+r*(Sm(af(t.g))-n))),b:vp(Cb(a+r*(Sm(af(t.b))-a))),a:e.a+r*(t.a-e.a)}}function Yx(e,t,r){if(e){let i=L4(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*r,t===0?360:1)),i=P4(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function sF(e,t){return e&&Object.assign(t||{},e)}function HB(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=vp(e[3]))):(t=sF(e,{r:0,g:0,b:0,a:1}),t.a=vp(t.a)),t}function I7(e){return e.charAt(0)==="r"?k7(e):w7(e)}class mv{constructor(t){if(t instanceof mv)return t;const r=typeof t;let i;r==="object"?i=HB(t):r==="string"&&(i=f7(t)||E7(t)||I7(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=sF(this._rgb);return t&&(t.a=af(t.a)),t}set rgb(t){this._rgb=HB(t)}rgbString(){return this._valid?F7(this._rgb):void 0}hexString(){return this._valid?m7(this._rgb):void 0}hslString(){return this._valid?B7(this._rgb):void 0}mix(t,r){if(t){const i=this.rgb,n=t.rgb;let a;const c=r===a?.5:r,s=2*c-1,p=i.a-n.a,g=((s*p===-1?s:(s+p)/(1+s*p))+1)/2;a=1-g,i.r=255&g*i.r+a*n.r+.5,i.g=255&g*i.g+a*n.g+.5,i.b=255&g*i.b+a*n.b+.5,i.a=c*i.a+(1-c)*n.a,this.rgb=i}return this}interpolate(t,r){return t&&(this._rgb=N7(this._rgb,t._rgb,r)),this}clone(){return new mv(this.rgb)}alpha(t){return this._rgb.a=vp(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Kv(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Yx(this._rgb,2,t),this}darken(t){return Yx(this._rgb,2,-t),this}saturate(t){return Yx(this._rgb,1,t),this}desaturate(t){return Yx(this._rgb,1,-t),this}rotate(t){return C7(this._rgb,t),this}}function Zd(){}const L7=(()=>{let e=0;return()=>e++})();function xs(e){return e==null}function qo(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function On(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function eu(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function fd(e,t){return eu(e)?e:t}function Cn(e,t){return typeof e>"u"?t:e}const M7=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,aF=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ga(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function Fs(e,t,r,i){let n,a,c;if(qo(e))for(a=e.length,n=0;n<a;n++)t.call(r,e[n],n);else if(On(e))for(c=Object.keys(e),a=c.length,n=0;n<a;n++)t.call(r,e[c[n]],c[n])}function E2(e,t){let r,i,n,a;if(!e||!t||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;++r)if(n=e[r],a=t[r],n.datasetIndex!==a.datasetIndex||n.index!==a.index)return!1;return!0}function T2(e){if(qo(e))return e.map(T2);if(On(e)){const t=Object.create(null),r=Object.keys(e),i=r.length;let n=0;for(;n<i;++n)t[r[n]]=T2(e[r[n]]);return t}return e}function oF(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function P7(e,t,r,i){if(!oF(e))return;const n=t[e],a=r[e];On(n)&&On(a)?gv(n,a,i):t[e]=T2(a)}function gv(e,t,r){const i=qo(t)?t:[t],n=i.length;if(!On(e))return e;r=r||{};const a=r.merger||P7;let c;for(let s=0;s<n;++s){if(c=i[s],!On(c))continue;const p=Object.keys(c);for(let g=0,v=p.length;g<v;++g)a(p[g],e,c,r)}return e}function q1(e,t){return gv(e,t,{merger:R7})}function R7(e,t,r){if(!oF(e))return;const i=t[e],n=r[e];On(i)&&On(n)?q1(i,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=T2(n))}const VB={"":e=>e,x:e=>e.x,y:e=>e.y};function D7(e){const t=e.split("."),r=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(r.push(i),i="");return r}function j7(e){const t=D7(e);return r=>{for(const i of t){if(i==="")break;r=r&&r[i]}return r}}function B0(e,t){return(VB[t]||(VB[t]=j7(t)))(e)}function R4(e){return e.charAt(0).toUpperCase()+e.slice(1)}const vv=e=>typeof e<"u",bp=e=>typeof e=="function",GB=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function U7(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Is=Math.PI,za=2*Is,O7=za+Is,k2=Number.POSITIVE_INFINITY,z7=Is/180,ml=Is/2,Jp=Is/4,qB=Is*2/3,lF=Math.log10,Cd=Math.sign;function K1(e,t,r){return Math.abs(e-t)<r}function KB(e){const t=Math.round(e);e=K1(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(lF(e))),i=e/r;return(i<=1?1:i<=2?2:i<=5?5:10)*r}function Q7(e){const t=[],r=Math.sqrt(e);let i;for(i=1;i<r;i++)e%i===0&&(t.push(i),t.push(e/i));return r===(r|0)&&t.push(r),t.sort((n,a)=>n-a).pop(),t}function H7(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function xv(e){return!H7(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function V7(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function G7(e,t,r){let i,n,a;for(i=0,n=e.length;i<n;i++)a=e[i][r],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function uf(e){return e*(Is/180)}function q7(e){return e*(180/Is)}function WB(e){if(!eu(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function cF(e,t){const r=t.x-e.x,i=t.y-e.y,n=Math.sqrt(r*r+i*i);let a=Math.atan2(i,r);return a<-.5*Is&&(a+=za),{angle:a,distance:n}}function h5(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function K7(e,t){return(e-t+O7)%za-Is}function Sh(e){return(e%za+za)%za}function yv(e,t,r,i){const n=Sh(e),a=Sh(t),c=Sh(r),s=Sh(a-n),p=Sh(c-n),g=Sh(n-a),v=Sh(n-c);return n===a||n===c||i&&a===c||s>p&&g<v}function Xc(e,t,r){return Math.max(t,Math.min(r,e))}function W7(e){return Xc(e,-32768,32767)}function hf(e,t,r,i=1e-6){return e>=Math.min(t,r)-i&&e<=Math.max(t,r)+i}function D4(e,t,r){r=r||(c=>e[c]<t);let i=e.length-1,n=0,a;for(;i-n>1;)a=n+i>>1,r(a)?n=a:i=a;return{lo:n,hi:i}}const h0=(e,t,r,i)=>D4(e,r,i?n=>{const a=e[n][t];return a<r||a===r&&e[n+1][t]===r}:n=>e[n][t]<r),$7=(e,t,r)=>D4(e,r,i=>e[i][t]>=r);function X7(e,t,r){let i=0,n=e.length;for(;i<n&&e[i]<t;)i++;for(;n>i&&e[n-1]>r;)n--;return i>0||n<e.length?e.slice(i,n):e}const uF=["push","pop","shift","splice","unshift"];function Z7(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),uF.forEach(r=>{const i="_onData"+R4(r),n=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...a){const c=n.apply(this,a);return e._chartjs.listeners.forEach(s=>{typeof s[i]=="function"&&s[i](...a)}),c}})})}function $B(e,t){const r=e._chartjs;if(!r)return;const i=r.listeners,n=i.indexOf(t);n!==-1&&i.splice(n,1),!(i.length>0)&&(uF.forEach(a=>{delete e[a]}),delete e._chartjs)}function hF(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const AF=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function dF(e,t){let r=[],i=!1;return function(...n){r=n,i||(i=!0,AF.call(window,()=>{i=!1,e.apply(t,r)}))}}function Y7(e,t){let r;return function(...i){return t?(clearTimeout(r),r=setTimeout(e,t,i)):e.apply(this,i),t}}const j4=e=>e==="start"?"left":e==="end"?"right":"center",Gc=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,J7=(e,t,r,i)=>e===(i?"left":"right")?r:e==="center"?(t+r)/2:t;function e9(e,t,r){const i=t.length;let n=0,a=i;if(e._sorted){const{iScale:c,vScale:s,_parsed:p}=e,g=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,v=c.axis,{min:B,max:F,minDefined:C,maxDefined:L}=c.getUserBounds();if(C){if(n=Math.min(h0(p,v,B).lo,r?i:h0(t,v,c.getPixelForValue(B)).lo),g){const P=p.slice(0,n+1).reverse().findIndex(D=>!xs(D[s.axis]));n-=Math.max(0,P)}n=Xc(n,0,i-1)}if(L){let P=Math.max(h0(p,c.axis,F,!0).hi+1,r?0:h0(t,v,c.getPixelForValue(F),!0).hi+1);if(g){const D=p.slice(P-1).findIndex(j=>!xs(j[s.axis]));P+=Math.max(0,D)}a=Xc(P,n,i)-n}else a=i-n}return{start:n,count:a}}function t9(e){const{xScale:t,yScale:r,_scaleRanges:i}=e,n={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!i)return e._scaleRanges=n,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==r.min||i.ymax!==r.max;return Object.assign(i,n),a}const Jx=e=>e===0||e===1,XB=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*za/r)),ZB=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*za/r)+1,W1={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*ml)+1,easeOutSine:e=>Math.sin(e*ml),easeInOutSine:e=>-.5*(Math.cos(Is*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Jx(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Jx(e)?e:XB(e,.075,.3),easeOutElastic:e=>Jx(e)?e:ZB(e,.075,.3),easeInOutElastic(e){return Jx(e)?e:e<.5?.5*XB(e*2,.1125,.45):.5+.5*ZB(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-W1.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?W1.easeInBounce(e*2)*.5:W1.easeOutBounce(e*2-1)*.5+.5};function U4(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function YB(e){return U4(e)?e:new mv(e)}function Bb(e){return U4(e)?e:new mv(e).saturate(.5).darken(.1).hexString()}const r9=["x","y","borderWidth","radius","tension"],i9=["color","borderColor","backgroundColor"];function n9(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:i9},numbers:{type:"number",properties:r9}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function s9(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const JB=new Map;function a9(e,t){t=t||{};const r=e+JSON.stringify(t);let i=JB.get(r);return i||(i=new Intl.NumberFormat(e,t),JB.set(r,i)),i}function O4(e,t,r){return a9(t,r).format(e)}const o9={values(e){return qo(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const i=this.chart.options.locale;let n,a=e;if(r.length>1){const g=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(g<1e-4||g>1e15)&&(n="scientific"),a=l9(e,r)}const c=lF(Math.abs(a)),s=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),p={notation:n,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(p,this.options.ticks.format),O4(e,i,p)}};function l9(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var fF={formatters:o9};function c9(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fF.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const S0=Object.create(null),A5=Object.create(null);function $1(e,t){if(!t)return e;const r=t.split(".");for(let i=0,n=r.length;i<n;++i){const a=r[i];e=e[a]||(e[a]=Object.create(null))}return e}function Sb(e,t,r){return typeof t=="string"?gv($1(e,t),r):gv($1(e,""),t)}class u9{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Bb(n.backgroundColor),this.hoverBorderColor=(i,n)=>Bb(n.borderColor),this.hoverColor=(i,n)=>Bb(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Sb(this,t,r)}get(t){return $1(this,t)}describe(t,r){return Sb(A5,t,r)}override(t,r){return Sb(S0,t,r)}route(t,r,i,n){const a=$1(this,t),c=$1(this,i),s="_"+r;Object.defineProperties(a,{[s]:{value:a[r],writable:!0},[r]:{enumerable:!0,get(){const p=this[s],g=c[n];return On(p)?Object.assign({},g,p):Cn(p,g)},set(p){this[s]=p}}})}apply(t){t.forEach(r=>r(this))}}var So=new u9({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[n9,s9,c9]);function h9(e){return!e||xs(e.size)||xs(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function eS(e,t,r,i,n){let a=t[n];return a||(a=t[n]=e.measureText(n).width,r.push(n)),a>i&&(i=a),i}function e0(e,t,r){const i=e.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((t-n)*i)/i+n}function tS(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function d5(e,t,r,i){pF(e,t,r,i,null)}function pF(e,t,r,i,n){let a,c,s,p,g,v,B,F;const C=t.pointStyle,L=t.rotation,P=t.radius;let D=(L||0)*z7;if(C&&typeof C=="object"&&(a=C.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){e.save(),e.translate(r,i),e.rotate(D),e.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),e.restore();return}if(!(isNaN(P)||P<=0)){switch(e.beginPath(),C){default:n?e.ellipse(r,i,n/2,P,0,0,za):e.arc(r,i,P,0,za),e.closePath();break;case"triangle":v=n?n/2:P,e.moveTo(r+Math.sin(D)*v,i-Math.cos(D)*P),D+=qB,e.lineTo(r+Math.sin(D)*v,i-Math.cos(D)*P),D+=qB,e.lineTo(r+Math.sin(D)*v,i-Math.cos(D)*P),e.closePath();break;case"rectRounded":g=P*.516,p=P-g,c=Math.cos(D+Jp)*p,B=Math.cos(D+Jp)*(n?n/2-g:p),s=Math.sin(D+Jp)*p,F=Math.sin(D+Jp)*(n?n/2-g:p),e.arc(r-B,i-s,g,D-Is,D-ml),e.arc(r+F,i-c,g,D-ml,D),e.arc(r+B,i+s,g,D,D+ml),e.arc(r-F,i+c,g,D+ml,D+Is),e.closePath();break;case"rect":if(!L){p=Math.SQRT1_2*P,v=n?n/2:p,e.rect(r-v,i-p,2*v,2*p);break}D+=Jp;case"rectRot":B=Math.cos(D)*(n?n/2:P),c=Math.cos(D)*P,s=Math.sin(D)*P,F=Math.sin(D)*(n?n/2:P),e.moveTo(r-B,i-s),e.lineTo(r+F,i-c),e.lineTo(r+B,i+s),e.lineTo(r-F,i+c),e.closePath();break;case"crossRot":D+=Jp;case"cross":B=Math.cos(D)*(n?n/2:P),c=Math.cos(D)*P,s=Math.sin(D)*P,F=Math.sin(D)*(n?n/2:P),e.moveTo(r-B,i-s),e.lineTo(r+B,i+s),e.moveTo(r+F,i-c),e.lineTo(r-F,i+c);break;case"star":B=Math.cos(D)*(n?n/2:P),c=Math.cos(D)*P,s=Math.sin(D)*P,F=Math.sin(D)*(n?n/2:P),e.moveTo(r-B,i-s),e.lineTo(r+B,i+s),e.moveTo(r+F,i-c),e.lineTo(r-F,i+c),D+=Jp,B=Math.cos(D)*(n?n/2:P),c=Math.cos(D)*P,s=Math.sin(D)*P,F=Math.sin(D)*(n?n/2:P),e.moveTo(r-B,i-s),e.lineTo(r+B,i+s),e.moveTo(r+F,i-c),e.lineTo(r-F,i+c);break;case"line":c=n?n/2:Math.cos(D)*P,s=Math.sin(D)*P,e.moveTo(r-c,i-s),e.lineTo(r+c,i+s);break;case"dash":e.moveTo(r,i),e.lineTo(r+Math.cos(D)*(n?n/2:P),i+Math.sin(D)*P);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function _v(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function y_(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function __(e){e.restore()}function A9(e,t,r,i,n){if(!t)return e.lineTo(r.x,r.y);if(n==="middle"){const a=(t.x+r.x)/2;e.lineTo(a,t.y),e.lineTo(a,r.y)}else n==="after"!=!!i?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function d9(e,t,r,i){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?r.cp2x:r.cp1x,i?r.cp2y:r.cp1y,r.x,r.y)}function f9(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),xs(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function p9(e,t,r,i,n){if(n.strikethrough||n.underline){const a=e.measureText(i),c=t-a.actualBoundingBoxLeft,s=t+a.actualBoundingBoxRight,p=r-a.actualBoundingBoxAscent,g=r+a.actualBoundingBoxDescent,v=n.strikethrough?(p+g)/2:g;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(c,v),e.lineTo(s,v),e.stroke()}}function m9(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function bv(e,t,r,i,n,a={}){const c=qo(t)?t:[t],s=a.strokeWidth>0&&a.strokeColor!=="";let p,g;for(e.save(),e.font=n.string,f9(e,a),p=0;p<c.length;++p)g=c[p],a.backdrop&&m9(e,a.backdrop),s&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),xs(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(g,r,i,a.maxWidth)),e.fillText(g,r,i,a.maxWidth),p9(e,r,i,g,a),i+=Number(n.lineHeight);e.restore()}function F2(e,t){const{x:r,y:i,w:n,h:a,radius:c}=t;e.arc(r+c.topLeft,i+c.topLeft,c.topLeft,1.5*Is,Is,!0),e.lineTo(r,i+a-c.bottomLeft),e.arc(r+c.bottomLeft,i+a-c.bottomLeft,c.bottomLeft,Is,ml,!0),e.lineTo(r+n-c.bottomRight,i+a),e.arc(r+n-c.bottomRight,i+a-c.bottomRight,c.bottomRight,ml,0,!0),e.lineTo(r+n,i+c.topRight),e.arc(r+n-c.topRight,i+c.topRight,c.topRight,0,-ml,!0),e.lineTo(r+c.topLeft,i)}const g9=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,v9=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function x9(e,t){const r=(""+e).match(g9);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const y9=e=>+e||0;function z4(e,t){const r={},i=On(t),n=i?Object.keys(t):t,a=On(e)?i?c=>Cn(e[c],e[t[c]]):c=>e[c]:()=>e;for(const c of n)r[c]=y9(a(c));return r}function mF(e){return z4(e,{top:"y",right:"x",bottom:"y",left:"x"})}function $m(e){return z4(e,["topLeft","topRight","bottomLeft","bottomRight"])}function sA(e){const t=mF(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Zc(e,t){e=e||{},t=t||So.font;let r=Cn(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let i=Cn(e.style,t.style);i&&!(""+i).match(v9)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:Cn(e.family,t.family),lineHeight:x9(Cn(e.lineHeight,t.lineHeight),r),size:r,style:i,weight:Cn(e.weight,t.weight),string:""};return n.string=h9(n),n}function ey(e,t,r,i){let n,a,c;for(n=0,a=e.length;n<a;++n)if(c=e[n],c!==void 0&&c!==void 0)return c}function _9(e,t,r){const{min:i,max:n}=e,a=aF(t,(n-i)/2),c=(s,p)=>r&&s===0?0:s+p;return{min:c(i,-Math.abs(a)),max:c(n,a)}}function I0(e,t){return Object.assign(Object.create(e),t)}function Q4(e,t=[""],r,i,n=()=>e[0]){const a=r||e;typeof i>"u"&&(i=yF("_fallback",e));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:i,_getTarget:n,override:s=>Q4([s,...e],t,a,i)};return new Proxy(c,{deleteProperty(s,p){return delete s[p],delete s._keys,delete e[0][p],!0},get(s,p){return vF(s,p,()=>k9(p,t,e,s))},getOwnPropertyDescriptor(s,p){return Reflect.getOwnPropertyDescriptor(s._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(s,p){return iS(s).includes(p)},ownKeys(s){return iS(s)},set(s,p,g){const v=s._storage||(s._storage=n());return s[p]=v[p]=g,delete s._keys,!0}})}function og(e,t,r,i){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:gF(e,i),setContext:a=>og(e,a,r,i),override:a=>og(e.override(a),t,r,i)};return new Proxy(n,{deleteProperty(a,c){return delete a[c],delete e[c],!0},get(a,c,s){return vF(a,c,()=>w9(a,c,s))},getOwnPropertyDescriptor(a,c){return a._descriptors.allKeys?Reflect.has(e,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,c)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(a,c){return Reflect.has(e,c)},ownKeys(){return Reflect.ownKeys(e)},set(a,c,s){return e[c]=s,delete a[c],!0}})}function gF(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:r,indexable:i,isScriptable:bp(r)?r:()=>r,isIndexable:bp(i)?i:()=>i}}const b9=(e,t)=>e?e+R4(t):t,H4=(e,t)=>On(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function vF(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const i=r();return e[t]=i,i}function w9(e,t,r){const{_proxy:i,_context:n,_subProxy:a,_descriptors:c}=e;let s=i[t];return bp(s)&&c.isScriptable(t)&&(s=C9(t,s,e,r)),qo(s)&&s.length&&(s=B9(t,s,e,c.isIndexable)),H4(t,s)&&(s=og(s,n,a&&a[t],c)),s}function C9(e,t,r,i){const{_proxy:n,_context:a,_subProxy:c,_stack:s}=r;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);let p=t(a,c||i);return s.delete(e),H4(e,p)&&(p=V4(n._scopes,n,e,p)),p}function B9(e,t,r,i){const{_proxy:n,_context:a,_subProxy:c,_descriptors:s}=r;if(typeof a.index<"u"&&i(e))return t[a.index%t.length];if(On(t[0])){const p=t,g=n._scopes.filter(v=>v!==p);t=[];for(const v of p){const B=V4(g,n,e,v);t.push(og(B,a,c&&c[e],s))}}return t}function xF(e,t,r){return bp(e)?e(t,r):e}const S9=(e,t)=>e===!0?t:typeof e=="string"?B0(t,e):void 0;function E9(e,t,r,i,n){for(const a of t){const c=S9(r,a);if(c){e.add(c);const s=xF(c._fallback,r,n);if(typeof s<"u"&&s!==r&&s!==i)return s}else if(c===!1&&typeof i<"u"&&r!==i)return null}return!1}function V4(e,t,r,i){const n=t._rootScopes,a=xF(t._fallback,r,i),c=[...e,...n],s=new Set;s.add(i);let p=rS(s,c,r,a||r,i);return p===null||typeof a<"u"&&a!==r&&(p=rS(s,c,a,p,i),p===null)?!1:Q4(Array.from(s),[""],n,a,()=>T9(t,r,i))}function rS(e,t,r,i,n){for(;r;)r=E9(e,t,r,i,n);return r}function T9(e,t,r){const i=e._getTarget();t in i||(i[t]={});const n=i[t];return qo(n)&&On(r)?r:n||{}}function k9(e,t,r,i){let n;for(const a of t)if(n=yF(b9(a,e),r),typeof n<"u")return H4(e,n)?V4(r,i,e,n):n}function yF(e,t){for(const r of t){if(!r)continue;const i=r[e];if(typeof i<"u")return i}}function iS(e){let t=e._keys;return t||(t=e._keys=F9(e._scopes)),t}function F9(e){const t=new Set;for(const r of e)for(const i of Object.keys(r).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}const N9=Number.EPSILON||1e-14,lg=(e,t)=>t<e.length&&!e[t].skip&&e[t],_F=e=>e==="x"?"y":"x";function I9(e,t,r,i){const n=e.skip?t:e,a=t,c=r.skip?t:r,s=h5(a,n),p=h5(c,a);let g=s/(s+p),v=p/(s+p);g=isNaN(g)?0:g,v=isNaN(v)?0:v;const B=i*g,F=i*v;return{previous:{x:a.x-B*(c.x-n.x),y:a.y-B*(c.y-n.y)},next:{x:a.x+F*(c.x-n.x),y:a.y+F*(c.y-n.y)}}}function L9(e,t,r){const i=e.length;let n,a,c,s,p,g=lg(e,0);for(let v=0;v<i-1;++v)if(p=g,g=lg(e,v+1),!(!p||!g)){if(K1(t[v],0,N9)){r[v]=r[v+1]=0;continue}n=r[v]/t[v],a=r[v+1]/t[v],s=Math.pow(n,2)+Math.pow(a,2),!(s<=9)&&(c=3/Math.sqrt(s),r[v]=n*c*t[v],r[v+1]=a*c*t[v])}}function M9(e,t,r="x"){const i=_F(r),n=e.length;let a,c,s,p=lg(e,0);for(let g=0;g<n;++g){if(c=s,s=p,p=lg(e,g+1),!s)continue;const v=s[r],B=s[i];c&&(a=(v-c[r])/3,s[`cp1${r}`]=v-a,s[`cp1${i}`]=B-a*t[g]),p&&(a=(p[r]-v)/3,s[`cp2${r}`]=v+a,s[`cp2${i}`]=B+a*t[g])}}function P9(e,t="x"){const r=_F(t),i=e.length,n=Array(i).fill(0),a=Array(i);let c,s,p,g=lg(e,0);for(c=0;c<i;++c)if(s=p,p=g,g=lg(e,c+1),!!p){if(g){const v=g[t]-p[t];n[c]=v!==0?(g[r]-p[r])/v:0}a[c]=s?g?Cd(n[c-1])!==Cd(n[c])?0:(n[c-1]+n[c])/2:n[c-1]:n[c]}L9(e,n,a),M9(e,a,t)}function ty(e,t,r){return Math.max(Math.min(e,r),t)}function R9(e,t){let r,i,n,a,c,s=_v(e[0],t);for(r=0,i=e.length;r<i;++r)c=a,a=s,s=r<i-1&&_v(e[r+1],t),a&&(n=e[r],c&&(n.cp1x=ty(n.cp1x,t.left,t.right),n.cp1y=ty(n.cp1y,t.top,t.bottom)),s&&(n.cp2x=ty(n.cp2x,t.left,t.right),n.cp2y=ty(n.cp2y,t.top,t.bottom)))}function D9(e,t,r,i,n){let a,c,s,p;if(t.spanGaps&&(e=e.filter(g=>!g.skip)),t.cubicInterpolationMode==="monotone")P9(e,n);else{let g=i?e[e.length-1]:e[0];for(a=0,c=e.length;a<c;++a)s=e[a],p=I9(g,s,e[Math.min(a+1,c-(i?0:1))%c],t.tension),s.cp1x=p.previous.x,s.cp1y=p.previous.y,s.cp2x=p.next.x,s.cp2y=p.next.y,g=s}t.capBezierPoints&&R9(e,r)}function G4(){return typeof window<"u"&&typeof document<"u"}function q4(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function N2(e,t,r){let i;return typeof e=="string"?(i=parseInt(e,10),e.indexOf("%")!==-1&&(i=i/100*t.parentNode[r])):i=e,i}const b_=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function j9(e,t){return b_(e).getPropertyValue(t)}const U9=["top","right","bottom","left"];function g0(e,t,r){const i={};r=r?"-"+r:"";for(let n=0;n<4;n++){const a=U9[n];i[a]=parseFloat(e[t+"-"+a+r])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const O9=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function z9(e,t){const r=e.touches,i=r&&r.length?r[0]:e,{offsetX:n,offsetY:a}=i;let c=!1,s,p;if(O9(n,a,e.target))s=n,p=a;else{const g=t.getBoundingClientRect();s=i.clientX-g.left,p=i.clientY-g.top,c=!0}return{x:s,y:p,box:c}}function i0(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:i}=t,n=b_(r),a=n.boxSizing==="border-box",c=g0(n,"padding"),s=g0(n,"border","width"),{x:p,y:g,box:v}=z9(e,r),B=c.left+(v&&s.left),F=c.top+(v&&s.top);let{width:C,height:L}=t;return a&&(C-=c.width+s.width,L-=c.height+s.height),{x:Math.round((p-B)/C*r.width/i),y:Math.round((g-F)/L*r.height/i)}}function Q9(e,t,r){let i,n;if(t===void 0||r===void 0){const a=e&&q4(e);if(!a)t=e.clientWidth,r=e.clientHeight;else{const c=a.getBoundingClientRect(),s=b_(a),p=g0(s,"border","width"),g=g0(s,"padding");t=c.width-g.width-p.width,r=c.height-g.height-p.height,i=N2(s.maxWidth,a,"clientWidth"),n=N2(s.maxHeight,a,"clientHeight")}}return{width:t,height:r,maxWidth:i||k2,maxHeight:n||k2}}const ry=e=>Math.round(e*10)/10;function H9(e,t,r,i){const n=b_(e),a=g0(n,"margin"),c=N2(n.maxWidth,e,"clientWidth")||k2,s=N2(n.maxHeight,e,"clientHeight")||k2,p=Q9(e,t,r);let{width:g,height:v}=p;if(n.boxSizing==="content-box"){const F=g0(n,"border","width"),C=g0(n,"padding");g-=C.width+F.width,v-=C.height+F.height}return g=Math.max(0,g-a.width),v=Math.max(0,i?g/i:v-a.height),g=ry(Math.min(g,c,p.maxWidth)),v=ry(Math.min(v,s,p.maxHeight)),g&&!v&&(v=ry(g/2)),(t!==void 0||r!==void 0)&&i&&p.height&&v>p.height&&(v=p.height,g=ry(Math.floor(v*i))),{width:g,height:v}}function nS(e,t,r){const i=t||1,n=Math.floor(e.height*i),a=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const c=e.canvas;return c.style&&(r||!c.style.height&&!c.style.width)&&(c.style.height=`${e.height}px`,c.style.width=`${e.width}px`),e.currentDevicePixelRatio!==i||c.height!==n||c.width!==a?(e.currentDevicePixelRatio=i,c.height=n,c.width=a,e.ctx.setTransform(i,0,0,i,0,0),!0):!1}const V9=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};G4()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function sS(e,t){const r=j9(e,t),i=r&&r.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function n0(e,t,r,i){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function G9(e,t,r,i){return{x:e.x+r*(t.x-e.x),y:i==="middle"?r<.5?e.y:t.y:i==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function q9(e,t,r,i){const n={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},c=n0(e,n,r),s=n0(n,a,r),p=n0(a,t,r),g=n0(c,s,r),v=n0(s,p,r);return n0(g,v,r)}const K9=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,i){return r-i},leftForLtr(r,i){return r-i}}},W9=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Xm(e,t,r){return e?K9(t,r):W9()}function bF(e,t){let r,i;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,i=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=i)}function wF(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function CF(e){return e==="angle"?{between:yv,compare:K7,normalize:Sh}:{between:hf,compare:(t,r)=>t-r,normalize:t=>t}}function aS({start:e,end:t,count:r,loop:i,style:n}){return{start:e%r,end:t%r,loop:i&&(t-e+1)%r===0,style:n}}function $9(e,t,r){const{property:i,start:n,end:a}=r,{between:c,normalize:s}=CF(i),p=t.length;let{start:g,end:v,loop:B}=e,F,C;if(B){for(g+=p,v+=p,F=0,C=p;F<C&&c(s(t[g%p][i]),n,a);++F)g--,v--;g%=p,v%=p}return v<g&&(v+=p),{start:g,end:v,loop:B,style:e.style}}function BF(e,t,r){if(!r)return[e];const{property:i,start:n,end:a}=r,c=t.length,{compare:s,between:p,normalize:g}=CF(i),{start:v,end:B,loop:F,style:C}=$9(e,t,r),L=[];let P=!1,D=null,j,q,H;const ee=()=>p(n,H,j)&&s(n,H)!==0,G=()=>s(a,j)===0||p(a,H,j),ne=()=>P||ee(),Z=()=>!P||G();for(let le=v,J=v;le<=B;++le)q=t[le%c],!q.skip&&(j=g(q[i]),j!==H&&(P=p(j,n,a),D===null&&ne()&&(D=s(j,n)===0?le:J),D!==null&&Z()&&(L.push(aS({start:D,end:le,loop:F,count:c,style:C})),D=null),J=le,H=j));return D!==null&&L.push(aS({start:D,end:B,loop:F,count:c,style:C})),L}function SF(e,t){const r=[],i=e.segments;for(let n=0;n<i.length;n++){const a=BF(i[n],e.points,t);a.length&&r.push(...a)}return r}function X9(e,t,r,i){let n=0,a=t-1;if(r&&!i)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,r&&(a+=n);a>n&&e[a%t].skip;)a--;return a%=t,{start:n,end:a}}function Z9(e,t,r,i){const n=e.length,a=[];let c=t,s=e[t],p;for(p=t+1;p<=r;++p){const g=e[p%n];g.skip||g.stop?s.skip||(i=!1,a.push({start:t%n,end:(p-1)%n,loop:i}),t=c=g.stop?p:null):(c=p,s.skip&&(t=p)),s=g}return c!==null&&a.push({start:t%n,end:c%n,loop:i}),a}function Y9(e,t){const r=e.points,i=e.options.spanGaps,n=r.length;if(!n)return[];const a=!!e._loop,{start:c,end:s}=X9(r,n,a,i);if(i===!0)return oS(e,[{start:c,end:s,loop:a}],r,t);const p=s<c?s+n:s,g=!!e._fullLoop&&c===0&&s===n-1;return oS(e,Z9(r,c,p,g),r,t)}function oS(e,t,r,i){return!i||!i.setContext||!r?t:J9(e,t,r,i)}function J9(e,t,r,i){const n=e._chart.getContext(),a=lS(e.options),{_datasetIndex:c,options:{spanGaps:s}}=e,p=r.length,g=[];let v=a,B=t[0].start,F=B;function C(L,P,D,j){const q=s?-1:1;if(L!==P){for(L+=p;r[L%p].skip;)L-=q;for(;r[P%p].skip;)P+=q;L%p!==P%p&&(g.push({start:L%p,end:P%p,loop:D,style:j}),v=j,B=P%p)}}for(const L of t){B=s?B:L.start;let P=r[B%p],D;for(F=B+1;F<=L.end;F++){const j=r[F%p];D=lS(i.setContext(I0(n,{type:"segment",p0:P,p1:j,p0DataIndex:(F-1)%p,p1DataIndex:F%p,datasetIndex:c}))),ez(D,v)&&C(B,F-1,L.loop,v),P=j,v=D}B<F-1&&C(B,F-1,L.loop,v)}return g}function lS(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ez(e,t){if(!t)return!1;const r=[],i=function(n,a){return U4(a)?(r.includes(a)||r.push(a),r.indexOf(a)):a};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function iy(e,t,r){return e.options.clip?e[r]:t[r]}function tz(e,t){const{xScale:r,yScale:i}=e;return r&&i?{left:iy(r,t,"left"),right:iy(r,t,"right"),top:iy(i,t,"top"),bottom:iy(i,t,"bottom")}:t}function EF(e,t){const r=t._clip;if(r.disabled)return!1;const i=tz(t,e.chartArea);return{left:r.left===!1?0:i.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:i.right+(r.right===!0?0:r.right),top:r.top===!1?0:i.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:i.bottom+(r.bottom===!0?0:r.bottom)}}class rz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,i,n){const a=r.listeners[n],c=r.duration;a.forEach(s=>s({chart:t,initial:r.initial,numSteps:c,currentStep:Math.min(i-r.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=AF.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const a=i.items;let c=a.length-1,s=!1,p;for(;c>=0;--c)p=a[c],p._active?(p._total>i.duration&&(i.duration=p._total),p.tick(t),s=!0):(a[c]=a[a.length-1],a.pop());s&&(n.draw(),this._notify(n,i,t,"progress")),a.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),r+=a.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let i=r.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,i)),i}listen(t,r,i){this._getAnims(t).listeners[r].push(i)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const i=r.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var nf=new rz;const cS="transparent",iz={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const i=YB(e||cS),n=i.valid&&YB(t||cS);return n&&n.valid?n.mix(i,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class nz{constructor(t,r,i,n){const a=r[i];n=ey([t.to,n,a,t.from]);const c=ey([t.from,a,n]);this._active=!0,this._fn=t.fn||iz[t.type||typeof c],this._easing=W1[t.easing]||W1.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=i,this._from=c,this._to=n,this._promises=void 0}active(){return this._active}update(t,r,i){if(this._active){this._notify(!1);const n=this._target[this._prop],a=i-this._start,c=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=ey([t.to,r,n,t.from]),this._from=ey([t.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,i=this._duration,n=this._prop,a=this._from,c=this._loop,s=this._to;let p;if(this._active=a!==s&&(c||r<i),!this._active){this._target[n]=s,this._notify(!0);return}if(r<0){this._target[n]=a;return}p=r/i%2,p=c&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[n]=this._fn(a,s,p)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,i)=>{t.push({res:r,rej:i})})}_notify(t){const r=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][r]()}}class TF{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!On(t))return;const r=Object.keys(So.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const a=t[n];if(!On(a))return;const c={};for(const s of r)c[s]=a[s];(qo(a.properties)&&a.properties||[n]).forEach(s=>{(s===n||!i.has(s))&&i.set(s,c)})})}_animateOptions(t,r){const i=r.options,n=az(t,i);if(!n)return[];const a=this._createAnimations(n,i);return i.$shared&&sz(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,r){const i=this._properties,n=[],a=t.$animations||(t.$animations={}),c=Object.keys(r),s=Date.now();let p;for(p=c.length-1;p>=0;--p){const g=c[p];if(g.charAt(0)==="$")continue;if(g==="options"){n.push(...this._animateOptions(t,r));continue}const v=r[g];let B=a[g];const F=i.get(g);if(B)if(F&&B.active()){B.update(F,v,s);continue}else B.cancel();if(!F||!F.duration){t[g]=v;continue}a[g]=B=new nz(F,t,g,v),n.push(B)}return n}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const i=this._createAnimations(t,r);if(i.length)return nf.add(this._chart,i),!0}}function sz(e,t){const r=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const a=e[i[n]];a&&a.active()&&r.push(a.wait())}return Promise.all(r)}function az(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function uS(e,t){const r=e&&e.options||{},i=r.reverse,n=r.min===void 0?t:0,a=r.max===void 0?t:0;return{start:i?a:n,end:i?n:a}}function oz(e,t,r){if(r===!1)return!1;const i=uS(e,r),n=uS(t,r);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function lz(e){let t,r,i,n;return On(e)?(t=e.top,r=e.right,i=e.bottom,n=e.left):t=r=i=n=e,{top:t,right:r,bottom:i,left:n,disabled:e===!1}}function kF(e,t){const r=[],i=e._getSortedDatasetMetas(t);let n,a;for(n=0,a=i.length;n<a;++n)r.push(i[n].index);return r}function hS(e,t,r,i={}){const n=e.keys,a=i.mode==="single";let c,s,p,g;if(t===null)return;let v=!1;for(c=0,s=n.length;c<s;++c){if(p=+n[c],p===r){if(v=!0,i.all)continue;break}g=e.values[p],eu(g)&&(a||t===0||Cd(t)===Cd(g))&&(t+=g)}return!v&&!i.all?0:t}function cz(e,t){const{iScale:r,vScale:i}=t,n=r.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",c=Object.keys(e),s=new Array(c.length);let p,g,v;for(p=0,g=c.length;p<g;++p)v=c[p],s[p]={[n]:v,[a]:e[v]};return s}function Eb(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function uz(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function hz(e){const{min:t,max:r,minDefined:i,maxDefined:n}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function Az(e,t,r){const i=e[t]||(e[t]={});return i[r]||(i[r]={})}function AS(e,t,r,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const a=e[n.index];if(r&&a>0||!r&&a<0)return n.index}return null}function dS(e,t){const{chart:r,_cachedMeta:i}=e,n=r._stacks||(r._stacks={}),{iScale:a,vScale:c,index:s}=i,p=a.axis,g=c.axis,v=uz(a,c,i),B=t.length;let F;for(let C=0;C<B;++C){const L=t[C],{[p]:P,[g]:D}=L,j=L._stacks||(L._stacks={});F=j[g]=Az(n,v,P),F[s]=D,F._top=AS(F,c,!0,i.type),F._bottom=AS(F,c,!1,i.type);const q=F._visualValues||(F._visualValues={});q[s]=D}}function Tb(e,t){const r=e.scales;return Object.keys(r).filter(i=>r[i].axis===t).shift()}function dz(e,t){return I0(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function fz(e,t,r){return I0(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function v1(e,t){const r=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const n of t){const a=n._stacks;if(!a||a[i]===void 0||a[i][r]===void 0)return;delete a[i][r],a[i]._visualValues!==void 0&&a[i]._visualValues[r]!==void 0&&delete a[i]._visualValues[r]}}}const kb=e=>e==="reset"||e==="none",fS=(e,t)=>t?e:Object.assign({},e),pz=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:kF(r,!0),values:null};class w_{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Eb(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&v1(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),n=(B,F,C,L)=>B==="x"?F:B==="r"?L:C,a=r.xAxisID=Cn(i.xAxisID,Tb(t,"x")),c=r.yAxisID=Cn(i.yAxisID,Tb(t,"y")),s=r.rAxisID=Cn(i.rAxisID,Tb(t,"r")),p=r.indexAxis,g=r.iAxisID=n(p,a,c,s),v=r.vAxisID=n(p,c,a,s);r.xScale=this.getScaleForId(a),r.yScale=this.getScaleForId(c),r.rScale=this.getScaleForId(s),r.iScale=this.getScaleForId(g),r.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&$B(this._data,this),t._stacked&&v1(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(On(r)){const n=this._cachedMeta;this._data=cz(r,n)}else if(i!==r){if(i){$B(i,this);const n=this._cachedMeta;v1(n),n._parsed=[]}r&&Object.isExtensible(r)&&Z7(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const a=r._stacked;r._stacked=Eb(r.vScale,r),r.stack!==i.stack&&(n=!0,v1(r),r.stack=i.stack),this._resyncElements(t),(n||a!==r._stacked)&&(dS(this,r._parsed),r._stacked=Eb(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:n}=this,{iScale:a,_stacked:c}=i,s=a.axis;let p=t===0&&r===n.length?!0:i._sorted,g=t>0&&i._parsed[t-1],v,B,F;if(this._parsing===!1)i._parsed=n,i._sorted=!0,F=n;else{qo(n[t])?F=this.parseArrayData(i,n,t,r):On(n[t])?F=this.parseObjectData(i,n,t,r):F=this.parsePrimitiveData(i,n,t,r);const C=()=>B[s]===null||g&&B[s]<g[s];for(v=0;v<r;++v)i._parsed[v+t]=B=F[v],p&&(C()&&(p=!1),g=B);i._sorted=p}c&&dS(this,F)}parsePrimitiveData(t,r,i,n){const{iScale:a,vScale:c}=t,s=a.axis,p=c.axis,g=a.getLabels(),v=a===c,B=new Array(n);let F,C,L;for(F=0,C=n;F<C;++F)L=F+i,B[F]={[s]:v||a.parse(g[L],L),[p]:c.parse(r[L],L)};return B}parseArrayData(t,r,i,n){const{xScale:a,yScale:c}=t,s=new Array(n);let p,g,v,B;for(p=0,g=n;p<g;++p)v=p+i,B=r[v],s[p]={x:a.parse(B[0],v),y:c.parse(B[1],v)};return s}parseObjectData(t,r,i,n){const{xScale:a,yScale:c}=t,{xAxisKey:s="x",yAxisKey:p="y"}=this._parsing,g=new Array(n);let v,B,F,C;for(v=0,B=n;v<B;++v)F=v+i,C=r[F],g[v]={x:a.parse(B0(C,s),F),y:c.parse(B0(C,p),F)};return g}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const n=this.chart,a=this._cachedMeta,c=r[t.axis],s={keys:kF(n,!0),values:r._stacks[t.axis]._visualValues};return hS(s,c,a.index,{mode:i})}updateRangeFromParsed(t,r,i,n){const a=i[r.axis];let c=a===null?NaN:a;const s=n&&i._stacks[r.axis];n&&s&&(n.values=s,c=hS(n,a,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,r){const i=this._cachedMeta,n=i._parsed,a=i._sorted&&t===i.iScale,c=n.length,s=this._getOtherScale(t),p=pz(r,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:B}=hz(s);let F,C;function L(){C=n[F];const P=C[s.axis];return!eu(C[t.axis])||v>P||B<P}for(F=0;F<c&&!(!L()&&(this.updateRangeFromParsed(g,t,C,p),a));++F);if(a){for(F=c-1;F>=0;--F)if(!L()){this.updateRangeFromParsed(g,t,C,p);break}}return g}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let n,a,c;for(n=0,a=r.length;n<a;++n)c=r[n][t.axis],eu(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,n=r.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=lz(Cn(this.options.clip,oz(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,i=this._cachedMeta,n=i.data||[],a=r.chartArea,c=[],s=this._drawStart||0,p=this._drawCount||n.length-s,g=this.options.drawActiveElementsOnTop;let v;for(i.dataset&&i.dataset.draw(t,a,s,p),v=s;v<s+p;++v){const B=n[v];B.hidden||(B.active&&g?c.push(B):B.draw(t,a))}for(v=0;v<c.length;++v)c[v].draw(t,a)}getStyle(t,r){const i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const n=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];a=c.$context||(c.$context=fz(this.getContext(),t,c)),a.parsed=this.getParsed(t),a.raw=n.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=dz(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!r,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const n=r==="active",a=this._cachedDataOpts,c=t+"-"+r,s=a[c],p=this.enableOptionSharing&&vv(i);if(s)return fS(s,p);const g=this.chart.config,v=g.datasetElementScopeKeys(this._type,t),B=n?[`${t}Hover`,"hover",t,""]:[t,""],F=g.getOptionScopes(this.getDataset(),v),C=Object.keys(So.elements[t]),L=()=>this.getContext(i,n,r),P=g.resolveNamedOptions(F,C,L,B);return P.$shared&&(P.$shared=p,a[c]=Object.freeze(fS(P,p))),P}_resolveAnimations(t,r,i){const n=this.chart,a=this._cachedDataOpts,c=`animation-${r}`,s=a[c];if(s)return s;let p;if(n.options.animation!==!1){const v=this.chart.config,B=v.datasetAnimationScopeKeys(this._type,r),F=v.getOptionScopes(this.getDataset(),B);p=v.createResolver(F,this.getContext(t,i,r))}const g=new TF(n,p&&p.animations);return p&&p._cacheable&&(a[c]=Object.freeze(g)),g}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||kb(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),n=this._sharedOptions,a=this.getSharedOptions(i),c=this.includeOptions(r,a)||a!==n;return this.updateSharedOptions(a,r,i),{sharedOptions:a,includeOptions:c}}updateElement(t,r,i,n){kb(n)?Object.assign(t,i):this._resolveAnimations(r,n).update(t,i)}updateSharedOptions(t,r,i){t&&!kb(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,n){t.active=n;const a=this.getStyle(r,n);this._resolveAnimations(r,i,n).update(t,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[s,p,g]of this._syncList)this[s](p,g);this._syncList=[];const n=i.length,a=r.length,c=Math.min(a,n);c&&this.parse(0,c),a>n?this._insertElements(n,a-n,t):a<n&&this._removeElements(a,n-a)}_insertElements(t,r,i=!0){const n=this._cachedMeta,a=n.data,c=t+r;let s;const p=g=>{for(g.length+=r,s=g.length-1;s>=c;s--)g[s]=g[s-r]};for(p(a),s=t;s<c;++s)a[s]=new this.dataElementType;this._parsing&&p(n._parsed),this.parse(t,r),i&&this.updateElements(a,t,r,"reset")}updateElements(t,r,i,n){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,r);i._stacked&&v1(i,n)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,n]=t;this[r](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function mz(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let i=[];for(let n=0,a=r.length;n<a;n++)i=i.concat(r[n].controller.getAllParsedValues(e));e._cache.$bar=hF(i.sort((n,a)=>n-a))}return e._cache.$bar}function gz(e){const t=e.iScale,r=mz(t,e.type);let i=t._length,n,a,c,s;const p=()=>{c===32767||c===-32768||(vv(s)&&(i=Math.min(i,Math.abs(c-s)||i)),s=c)};for(n=0,a=r.length;n<a;++n)c=t.getPixelForValue(r[n]),p();for(s=void 0,n=0,a=t.ticks.length;n<a;++n)c=t.getPixelForTick(n),p();return i}function vz(e,t,r,i){const n=r.barThickness;let a,c;return xs(n)?(a=t.min*r.categoryPercentage,c=r.barPercentage):(a=n*i,c=1),{chunk:a/i,ratio:c,start:t.pixels[e]-a/2}}function xz(e,t,r,i){const n=t.pixels,a=n[e];let c=e>0?n[e-1]:null,s=e<n.length-1?n[e+1]:null;const p=r.categoryPercentage;c===null&&(c=a-(s===null?t.end-t.start:s-a)),s===null&&(s=a+a-c);const g=a-(a-Math.min(c,s))/2*p;return{chunk:Math.abs(s-c)/2*p/i,ratio:r.barPercentage,start:g}}function yz(e,t,r,i){const n=r.parse(e[0],i),a=r.parse(e[1],i),c=Math.min(n,a),s=Math.max(n,a);let p=c,g=s;Math.abs(c)>Math.abs(s)&&(p=s,g=c),t[r.axis]=g,t._custom={barStart:p,barEnd:g,start:n,end:a,min:c,max:s}}function FF(e,t,r,i){return qo(e)?yz(e,t,r,i):t[r.axis]=r.parse(e,i),t}function pS(e,t,r,i){const n=e.iScale,a=e.vScale,c=n.getLabels(),s=n===a,p=[];let g,v,B,F;for(g=r,v=r+i;g<v;++g)F=t[g],B={},B[n.axis]=s||n.parse(c[g],g),p.push(FF(F,B,a,g));return p}function Fb(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function _z(e,t,r){return e!==0?Cd(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function bz(e){let t,r,i,n,a;return e.horizontal?(t=e.base>e.x,r="left",i="right"):(t=e.base<e.y,r="bottom",i="top"),t?(n="end",a="start"):(n="start",a="end"),{start:r,end:i,reverse:t,top:n,bottom:a}}function wz(e,t,r,i){let n=t.borderSkipped;const a={};if(!n){e.borderSkipped=a;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:s,reverse:p,top:g,bottom:v}=bz(e);n==="middle"&&r&&(e.enableBorderRadius=!0,(r._top||0)===i?n=g:(r._bottom||0)===i?n=v:(a[mS(v,c,s,p)]=!0,n=g)),a[mS(n,c,s,p)]=!0,e.borderSkipped=a}function mS(e,t,r,i){return i?(e=Cz(e,t,r),e=gS(e,r,t)):e=gS(e,t,r),e}function Cz(e,t,r){return e===t?r:e===r?t:e}function gS(e,t,r){return e==="start"?t:e==="end"?r:e}function Bz(e,{inflateAmount:t},r){e.inflateAmount=t==="auto"?r===1?.33:0:t}class Sz extends w_{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,n){return pS(t,r,i,n)}parseArrayData(t,r,i,n){return pS(t,r,i,n)}parseObjectData(t,r,i,n){const{iScale:a,vScale:c}=t,{xAxisKey:s="x",yAxisKey:p="y"}=this._parsing,g=a.axis==="x"?s:p,v=c.axis==="x"?s:p,B=[];let F,C,L,P;for(F=i,C=i+n;F<C;++F)P=r[F],L={},L[a.axis]=a.parse(B0(P,g),F),B.push(FF(B0(P,v),L,c,F));return B}updateRangeFromParsed(t,r,i,n){super.updateRangeFromParsed(t,r,i,n);const a=i._custom;a&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:n}=r,a=this.getParsed(t),c=a._custom,s=Fb(c)?"["+c.start+", "+c.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,n){const a=n==="reset",{index:c,_cachedMeta:{vScale:s}}=this,p=s.getBasePixel(),g=s.isHorizontal(),v=this._getRuler(),{sharedOptions:B,includeOptions:F}=this._getSharedOptions(r,n);for(let C=r;C<r+i;C++){const L=this.getParsed(C),P=a||xs(L[s.axis])?{base:p,head:p}:this._calculateBarValuePixels(C),D=this._calculateBarIndexPixels(C,v),j=(L._stacks||{})[s.axis],q={horizontal:g,base:P.base,enableBorderRadius:!j||Fb(L._custom)||c===j._top||c===j._bottom,x:g?P.head:D.center,y:g?D.center:P.head,height:g?D.size:Math.abs(P.size),width:g?Math.abs(P.size):D.size};F&&(q.options=B||this.resolveDataElementOptions(C,t[C].active?"active":n));const H=q.options||t[C].options;wz(q,H,j,c),Bz(q,H,v.ratio),this.updateElement(t[C],C,q,n)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(v=>v.controller.options.grouped),a=i.options.stacked,c=[],s=this._cachedMeta.controller.getParsed(r),p=s&&s[i.axis],g=v=>{const B=v._parsed.find(C=>C[i.axis]===p),F=B&&B[v.vScale.axis];if(xs(F)||isNaN(F))return!0};for(const v of n)if(!(r!==void 0&&g(v))&&((a===!1||c.indexOf(v.stack)===-1||a===void 0&&v.stack===void 0)&&c.push(v.stack),v.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Cn(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,i){const n=this._getStacks(t,i),a=r!==void 0?n.indexOf(r):-1;return a===-1?n.length-1:a}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,n=[];let a,c;for(a=0,c=r.data.length;a<c;++a)n.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const s=t.barThickness;return{min:s||gz(r),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i,index:n},options:{base:a,minBarLength:c}}=this,s=a||0,p=this.getParsed(t),g=p._custom,v=Fb(g);let B=p[r.axis],F=0,C=i?this.applyStack(r,p,i):B,L,P;C!==B&&(F=C-B,C=B),v&&(B=g.barStart,C=g.barEnd-g.barStart,B!==0&&Cd(B)!==Cd(g.barEnd)&&(F=0),F+=B);const D=!xs(a)&&!v?a:F;let j=r.getPixelForValue(D);if(this.chart.getDataVisibility(t)?L=r.getPixelForValue(F+C):L=j,P=L-j,Math.abs(P)<c){P=_z(P,r,s)*c,B===s&&(j-=P/2);const q=r.getPixelForDecimal(0),H=r.getPixelForDecimal(1),ee=Math.min(q,H),G=Math.max(q,H);j=Math.max(Math.min(j,G),ee),L=j+P,i&&!v&&(p._stacks[r.axis]._visualValues[n]=r.getValueForPixel(L)-r.getValueForPixel(j))}if(j===r.getPixelForValue(s)){const q=Cd(P)*r.getLineWidthForValue(s)/2;j+=q,P-=q}return{size:P,base:j,head:L,center:L+P/2}}_calculateBarIndexPixels(t,r){const i=r.scale,n=this.options,a=n.skipNull,c=Cn(n.maxBarThickness,1/0);let s,p;const g=this._getAxisCount();if(r.grouped){const v=a?this._getStackCount(t):r.stackCount,B=n.barThickness==="flex"?xz(t,r,n,v*g):vz(t,r,n,v*g),F=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,C=this._getAxis().indexOf(Cn(F,this.getFirstScaleIdForIndexAxis())),L=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0)+C;s=B.start+B.chunk*L+B.chunk/2,p=Math.min(c,B.chunk*B.ratio)}else s=i.getPixelForValue(this.getParsed(t)[i.axis],t),p=Math.min(c,r.min*r.ratio);return{base:s-p/2,head:s+p/2,center:s,size:p}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,n=i.length;let a=0;for(;a<n;++a)this.getParsed(a)[r.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}function Ez(e,t,r){let i=1,n=1,a=0,c=0;if(t<za){const s=e,p=s+t,g=Math.cos(s),v=Math.sin(s),B=Math.cos(p),F=Math.sin(p),C=(H,ee,G)=>yv(H,s,p,!0)?1:Math.max(ee,ee*r,G,G*r),L=(H,ee,G)=>yv(H,s,p,!0)?-1:Math.min(ee,ee*r,G,G*r),P=C(0,g,B),D=C(ml,v,F),j=L(Is,g,B),q=L(Is+ml,v,F);i=(P-j)/2,n=(D-q)/2,a=-(P+j)/2,c=-(D+q)/2}return{ratioX:i,ratioY:n,offsetX:a,offsetY:c}}class Tz extends w_{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const r=t.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options;return r.labels.map((a,c)=>{const p=t.getDatasetMeta(0).controller.getStyle(c);return{text:a,fillStyle:p.backgroundColor,strokeStyle:p.borderColor,fontColor:n,lineWidth:p.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let a=p=>+i[p];if(On(i[t])){const{key:p="value"}=this._parsing;a=g=>+B0(i[g],p)}let c,s;for(c=t,s=t+r;c<s;++c)n._parsed[c]=a(c)}}_getRotation(){return uf(this.options.rotation-90)}_getCircumference(){return uf(this.options.circumference)}_getRotationExtents(){let t=za,r=-za;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,a=n._getRotation(),c=n._getCircumference();t=Math.min(t,a),r=Math.max(r,a+c)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,n=this._cachedMeta,a=n.data,c=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-c)/2,0),p=Math.min(M7(this.options.cutout,s),1),g=this._getRingWeight(this.index),{circumference:v,rotation:B}=this._getRotationExtents(),{ratioX:F,ratioY:C,offsetX:L,offsetY:P}=Ez(B,v,p),D=(i.width-c)/F,j=(i.height-c)/C,q=Math.max(Math.min(D,j)/2,0),H=aF(this.options.radius,q),ee=Math.max(H*p,0),G=(H-ee)/this._getVisibleDatasetWeightTotal();this.offsetX=L*H,this.offsetY=P*H,n.total=this.calculateTotal(),this.outerRadius=H-G*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-G*g,0),this.updateElements(a,0,a.length,t)}_circumference(t,r){const i=this.options,n=this._cachedMeta,a=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*a/za)}updateElements(t,r,i,n){const a=n==="reset",c=this.chart,s=c.chartArea,g=c.options.animation,v=(s.left+s.right)/2,B=(s.top+s.bottom)/2,F=a&&g.animateScale,C=F?0:this.innerRadius,L=F?0:this.outerRadius,{sharedOptions:P,includeOptions:D}=this._getSharedOptions(r,n);let j=this._getRotation(),q;for(q=0;q<r;++q)j+=this._circumference(q,a);for(q=r;q<r+i;++q){const H=this._circumference(q,a),ee=t[q],G={x:v+this.offsetX,y:B+this.offsetY,startAngle:j,endAngle:j+H,circumference:H,outerRadius:L,innerRadius:C};D&&(G.options=P||this.resolveDataElementOptions(q,ee.active?"active":n)),j+=H,this.updateElement(ee,q,G,n)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let i=0,n;for(n=0;n<r.length;n++){const a=t._parsed[n];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?za*(Math.abs(t)/r):0}getLabelAndValue(t){const r=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=O4(r._parsed[t],i.options.locale);return{label:n[t]||"",value:a}}getMaxBorderWidth(t){let r=0;const i=this.chart;let n,a,c,s,p;if(!t){for(n=0,a=i.data.datasets.length;n<a;++n)if(i.isDatasetVisible(n)){c=i.getDatasetMeta(n),t=c.data,s=c.controller;break}}if(!t)return 0;for(n=0,a=t.length;n<a;++n)p=s.resolveDataElementOptions(n),p.borderAlign!=="inner"&&(r=Math.max(r,p.borderWidth||0,p.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,n=t.length;i<n;++i){const a=this.resolveDataElementOptions(i);r=Math.max(r,a.offset||0,a.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Cn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class kz extends w_{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:n=[],_dataset:a}=r,c=this.chart._animationsDisabled;let{start:s,count:p}=e9(r,n,c);this._drawStart=s,this._drawCount=p,t9(r)&&(s=0,p=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const g=this.resolveDatasetElementOptions(t);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:g},t),this.updateElements(n,s,p,t)}updateElements(t,r,i,n){const a=n==="reset",{iScale:c,vScale:s,_stacked:p,_dataset:g}=this._cachedMeta,{sharedOptions:v,includeOptions:B}=this._getSharedOptions(r,n),F=c.axis,C=s.axis,{spanGaps:L,segment:P}=this.options,D=xv(L)?L:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||a||n==="none",q=r+i,H=t.length;let ee=r>0&&this.getParsed(r-1);for(let G=0;G<H;++G){const ne=t[G],Z=j?ne:{};if(G<r||G>=q){Z.skip=!0;continue}const le=this.getParsed(G),J=xs(le[C]),ce=Z[F]=c.getPixelForValue(le[F],G),te=Z[C]=a||J?s.getBasePixel():s.getPixelForValue(p?this.applyStack(s,le,p):le[C],G);Z.skip=isNaN(ce)||isNaN(te)||J,Z.stop=G>0&&Math.abs(le[F]-ee[F])>D,P&&(Z.parsed=le,Z.raw=g.data[G]),B&&(Z.options=v||this.resolveDataElementOptions(G,ne.active?"active":n)),j||this.updateElement(ne,G,Z,n),ee=le}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const a=n[0].size(this.resolveDataElementOptions(0)),c=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,a,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function t0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class K4{static override(t){Object.assign(K4.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return t0()}parse(){return t0()}format(){return t0()}add(){return t0()}diff(){return t0()}startOf(){return t0()}endOf(){return t0()}}var Fz={_date:K4};function Nz(e,t,r,i){const{controller:n,data:a,_sorted:c}=e,s=n._cachedMeta.iScale,p=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(s&&t===s.axis&&t!=="r"&&c&&a.length){const g=s._reversePixels?$7:h0;if(i){if(n._sharedOptions){const v=a[0],B=typeof v.getRange=="function"&&v.getRange(t);if(B){const F=g(a,t,r-B),C=g(a,t,r+B);return{lo:F.lo,hi:C.hi}}}}else{const v=g(a,t,r);if(p){const{vScale:B}=n._cachedMeta,{_parsed:F}=e,C=F.slice(0,v.lo+1).reverse().findIndex(P=>!xs(P[B.axis]));v.lo-=Math.max(0,C);const L=F.slice(v.hi).findIndex(P=>!xs(P[B.axis]));v.hi+=Math.max(0,L)}return v}}return{lo:0,hi:a.length-1}}function C_(e,t,r,i,n){const a=e.getSortedVisibleDatasetMetas(),c=r[t];for(let s=0,p=a.length;s<p;++s){const{index:g,data:v}=a[s],{lo:B,hi:F}=Nz(a[s],t,c,n);for(let C=B;C<=F;++C){const L=v[C];L.skip||i(L,g,C)}}}function Iz(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(i,n){const a=t?Math.abs(i.x-n.x):0,c=r?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(c,2))}}function Nb(e,t,r,i,n){const a=[];return!n&&!e.isPointInArea(t)||C_(e,r,t,function(s,p,g){!n&&!_v(s,e.chartArea,0)||s.inRange(t.x,t.y,i)&&a.push({element:s,datasetIndex:p,index:g})},!0),a}function Lz(e,t,r,i){let n=[];function a(c,s,p){const{startAngle:g,endAngle:v}=c.getProps(["startAngle","endAngle"],i),{angle:B}=cF(c,{x:t.x,y:t.y});yv(B,g,v)&&n.push({element:c,datasetIndex:s,index:p})}return C_(e,r,t,a),n}function Mz(e,t,r,i,n,a){let c=[];const s=Iz(r);let p=Number.POSITIVE_INFINITY;function g(v,B,F){const C=v.inRange(t.x,t.y,n);if(i&&!C)return;const L=v.getCenterPoint(n);if(!(!!a||e.isPointInArea(L))&&!C)return;const D=s(t,L);D<p?(c=[{element:v,datasetIndex:B,index:F}],p=D):D===p&&c.push({element:v,datasetIndex:B,index:F})}return C_(e,r,t,g),c}function Ib(e,t,r,i,n,a){return!a&&!e.isPointInArea(t)?[]:r==="r"&&!i?Lz(e,t,r,n):Mz(e,t,r,i,n,a)}function vS(e,t,r,i,n){const a=[],c=r==="x"?"inXRange":"inYRange";let s=!1;return C_(e,r,t,(p,g,v)=>{p[c]&&p[c](t[r],n)&&(a.push({element:p,datasetIndex:g,index:v}),s=s||p.inRange(t.x,t.y,n))}),i&&!s?[]:a}var Pz={modes:{index(e,t,r,i){const n=i0(t,e),a=r.axis||"x",c=r.includeInvisible||!1,s=r.intersect?Nb(e,n,a,i,c):Ib(e,n,a,!1,i,c),p=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach(g=>{const v=s[0].index,B=g.data[v];B&&!B.skip&&p.push({element:B,datasetIndex:g.index,index:v})}),p):[]},dataset(e,t,r,i){const n=i0(t,e),a=r.axis||"xy",c=r.includeInvisible||!1;let s=r.intersect?Nb(e,n,a,i,c):Ib(e,n,a,!1,i,c);if(s.length>0){const p=s[0].datasetIndex,g=e.getDatasetMeta(p).data;s=[];for(let v=0;v<g.length;++v)s.push({element:g[v],datasetIndex:p,index:v})}return s},point(e,t,r,i){const n=i0(t,e),a=r.axis||"xy",c=r.includeInvisible||!1;return Nb(e,n,a,i,c)},nearest(e,t,r,i){const n=i0(t,e),a=r.axis||"xy",c=r.includeInvisible||!1;return Ib(e,n,a,r.intersect,i,c)},x(e,t,r,i){const n=i0(t,e);return vS(e,n,"x",r.intersect,i)},y(e,t,r,i){const n=i0(t,e);return vS(e,n,"y",r.intersect,i)}}};const NF=["left","top","right","bottom"];function x1(e,t){return e.filter(r=>r.pos===t)}function xS(e,t){return e.filter(r=>NF.indexOf(r.pos)===-1&&r.box.axis===t)}function y1(e,t){return e.sort((r,i)=>{const n=t?i:r,a=t?r:i;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function Rz(e){const t=[];let r,i,n,a,c,s;for(r=0,i=(e||[]).length;r<i;++r)n=e[r],{position:a,options:{stack:c,stackWeight:s=1}}=n,t.push({index:r,box:n,pos:a,horizontal:n.isHorizontal(),weight:n.weight,stack:c&&a+c,stackWeight:s});return t}function Dz(e){const t={};for(const r of e){const{stack:i,pos:n,stackWeight:a}=r;if(!i||!NF.includes(n))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=a}return t}function jz(e,t){const r=Dz(e),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let a,c,s;for(a=0,c=e.length;a<c;++a){s=e[a];const{fullSize:p}=s.box,g=r[s.stack],v=g&&s.stackWeight/g.weight;s.horizontal?(s.width=v?v*i:p&&t.availableWidth,s.height=n):(s.width=i,s.height=v?v*n:p&&t.availableHeight)}return r}function Uz(e){const t=Rz(e),r=y1(t.filter(g=>g.box.fullSize),!0),i=y1(x1(t,"left"),!0),n=y1(x1(t,"right")),a=y1(x1(t,"top"),!0),c=y1(x1(t,"bottom")),s=xS(t,"x"),p=xS(t,"y");return{fullSize:r,leftAndTop:i.concat(a),rightAndBottom:n.concat(p).concat(c).concat(s),chartArea:x1(t,"chartArea"),vertical:i.concat(n).concat(p),horizontal:a.concat(c).concat(s)}}function yS(e,t,r,i){return Math.max(e[r],t[r])+Math.max(e[i],t[i])}function IF(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Oz(e,t,r,i){const{pos:n,box:a}=r,c=e.maxPadding;if(!On(n)){r.size&&(e[n]-=r.size);const B=i[r.stack]||{size:0,count:1};B.size=Math.max(B.size,r.horizontal?a.height:a.width),r.size=B.size/B.count,e[n]+=r.size}a.getPadding&&IF(c,a.getPadding());const s=Math.max(0,t.outerWidth-yS(c,e,"left","right")),p=Math.max(0,t.outerHeight-yS(c,e,"top","bottom")),g=s!==e.w,v=p!==e.h;return e.w=s,e.h=p,r.horizontal?{same:g,other:v}:{same:v,other:g}}function zz(e){const t=e.maxPadding;function r(i){const n=Math.max(t[i]-e[i],0);return e[i]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function Qz(e,t){const r=t.maxPadding;function i(n){const a={left:0,top:0,right:0,bottom:0};return n.forEach(c=>{a[c]=Math.max(t[c],r[c])}),a}return i(e?["left","right"]:["top","bottom"])}function L1(e,t,r,i){const n=[];let a,c,s,p,g,v;for(a=0,c=e.length,g=0;a<c;++a){s=e[a],p=s.box,p.update(s.width||t.w,s.height||t.h,Qz(s.horizontal,t));const{same:B,other:F}=Oz(t,r,s,i);g|=B&&n.length,v=v||F,p.fullSize||n.push(s)}return g&&L1(n,t,r,i)||v}function ny(e,t,r,i,n){e.top=r,e.left=t,e.right=t+i,e.bottom=r+n,e.width=i,e.height=n}function _S(e,t,r,i){const n=r.padding;let{x:a,y:c}=t;for(const s of e){const p=s.box,g=i[s.stack]||{placed:0,weight:1},v=s.stackWeight/g.weight||1;if(s.horizontal){const B=t.w*v,F=g.size||p.height;vv(g.start)&&(c=g.start),p.fullSize?ny(p,n.left,c,r.outerWidth-n.right-n.left,F):ny(p,t.left+g.placed,c,B,F),g.start=c,g.placed+=B,c=p.bottom}else{const B=t.h*v,F=g.size||p.width;vv(g.start)&&(a=g.start),p.fullSize?ny(p,a,n.top,F,r.outerHeight-n.bottom-n.top):ny(p,a,t.top+g.placed,F,B),g.start=a,g.placed+=B,a=p.right}}t.x=a,t.y=c}var rA={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,i){if(!e)return;const n=sA(e.options.layout.padding),a=Math.max(t-n.width,0),c=Math.max(r-n.height,0),s=Uz(e.boxes),p=s.vertical,g=s.horizontal;Fs(e.boxes,P=>{typeof P.beforeLayout=="function"&&P.beforeLayout()});const v=p.reduce((P,D)=>D.box.options&&D.box.options.display===!1?P:P+1,0)||1,B=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:a,availableHeight:c,vBoxMaxWidth:a/2/v,hBoxMaxHeight:c/2}),F=Object.assign({},n);IF(F,sA(i));const C=Object.assign({maxPadding:F,w:a,h:c,x:n.left,y:n.top},n),L=jz(p.concat(g),B);L1(s.fullSize,C,B,L),L1(p,C,B,L),L1(g,C,B,L)&&L1(p,C,B,L),zz(C),_S(s.leftAndTop,C,B,L),C.x+=C.w,C.y+=C.h,_S(s.rightAndBottom,C,B,L),e.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Fs(s.chartArea,P=>{const D=P.box;Object.assign(D,e.chartArea),D.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class LF{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,i){}removeEventListener(t,r,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,i,n){return r=Math.max(0,r||t.width),i=i||t.height,{width:r,height:Math.max(0,n?Math.floor(r/n):i)}}isAttached(t){return!0}updateConfig(t){}}class Hz extends LF{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const l2="$chartjs",Vz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bS=e=>e===null||e==="";function Gz(e,t){const r=e.style,i=e.getAttribute("height"),n=e.getAttribute("width");if(e[l2]={initial:{height:i,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",bS(n)){const a=sS(e,"width");a!==void 0&&(e.width=a)}if(bS(i))if(e.style.height==="")e.height=e.width/(t||2);else{const a=sS(e,"height");a!==void 0&&(e.height=a)}return e}const MF=V9?{passive:!0}:!1;function qz(e,t,r){e&&e.addEventListener(t,r,MF)}function Kz(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,MF)}function Wz(e,t){const r=Vz[e.type]||e.type,{x:i,y:n}=i0(e,t);return{type:r,chart:t,native:e,x:i!==void 0?i:null,y:n!==void 0?n:null}}function I2(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function $z(e,t,r){const i=e.canvas,n=new MutationObserver(a=>{let c=!1;for(const s of a)c=c||I2(s.addedNodes,i),c=c&&!I2(s.removedNodes,i);c&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function Xz(e,t,r){const i=e.canvas,n=new MutationObserver(a=>{let c=!1;for(const s of a)c=c||I2(s.removedNodes,i),c=c&&!I2(s.addedNodes,i);c&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const wv=new Map;let wS=0;function PF(){const e=window.devicePixelRatio;e!==wS&&(wS=e,wv.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function Zz(e,t){wv.size||window.addEventListener("resize",PF),wv.set(e,t)}function Yz(e){wv.delete(e),wv.size||window.removeEventListener("resize",PF)}function Jz(e,t,r){const i=e.canvas,n=i&&q4(i);if(!n)return;const a=dF((s,p)=>{const g=n.clientWidth;r(s,p),g<n.clientWidth&&r()},window),c=new ResizeObserver(s=>{const p=s[0],g=p.contentRect.width,v=p.contentRect.height;g===0&&v===0||a(g,v)});return c.observe(n),Zz(e,a),c}function Lb(e,t,r){r&&r.disconnect(),t==="resize"&&Yz(e)}function eQ(e,t,r){const i=e.canvas,n=dF(a=>{e.ctx!==null&&r(Wz(a,e))},e);return qz(i,t,n),n}class tQ extends LF{acquireContext(t,r){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Gz(t,r),i):null}releaseContext(t){const r=t.canvas;if(!r[l2])return!1;const i=r[l2].initial;["height","width"].forEach(a=>{const c=i[a];xs(c)?r.removeAttribute(a):r.setAttribute(a,c)});const n=i.style||{};return Object.keys(n).forEach(a=>{r.style[a]=n[a]}),r.width=r.width,delete r[l2],!0}addEventListener(t,r,i){this.removeEventListener(t,r);const n=t.$proxies||(t.$proxies={}),c={attach:$z,detach:Xz,resize:Jz}[r]||eQ;n[r]=c(t,r,i)}removeEventListener(t,r){const i=t.$proxies||(t.$proxies={}),n=i[r];if(!n)return;({attach:Lb,detach:Lb,resize:Lb}[r]||Kz)(t,r,n),i[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,i,n){return H9(t,r,i,n)}isAttached(t){const r=t&&q4(t);return!!(r&&r.isConnected)}}function rQ(e){return!G4()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Hz:tQ}class Cf{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}hasValue(){return xv(this.x)&&xv(this.y)}getProps(t,r){const i=this.$animations;if(!r||!i)return this;const n={};return t.forEach(a=>{n[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),n}}function iQ(e,t){const r=e.options.ticks,i=nQ(e),n=Math.min(r.maxTicksLimit||i,i),a=r.major.enabled?aQ(t):[],c=a.length,s=a[0],p=a[c-1],g=[];if(c>n)return oQ(t,g,a,c/n),g;const v=sQ(a,t,n);if(c>0){let B,F;const C=c>1?Math.round((p-s)/(c-1)):null;for(sy(t,g,v,xs(C)?0:s-C,s),B=0,F=c-1;B<F;B++)sy(t,g,v,a[B],a[B+1]);return sy(t,g,v,p,xs(C)?t.length:p+C),g}return sy(t,g,v),g}function nQ(e){const t=e.options.offset,r=e._tickSize(),i=e._length/r+(t?0:1),n=e._maxLength/r;return Math.floor(Math.min(i,n))}function sQ(e,t,r){const i=lQ(e),n=t.length/r;if(!i)return Math.max(n,1);const a=Q7(i);for(let c=0,s=a.length-1;c<s;c++){const p=a[c];if(p>n)return p}return Math.max(n,1)}function aQ(e){const t=[];let r,i;for(r=0,i=e.length;r<i;r++)e[r].major&&t.push(r);return t}function oQ(e,t,r,i){let n=0,a=r[0],c;for(i=Math.ceil(i),c=0;c<e.length;c++)c===a&&(t.push(e[c]),n++,a=r[n*i])}function sy(e,t,r,i,n){const a=Cn(i,0),c=Math.min(Cn(n,e.length),e.length);let s=0,p,g,v;for(r=Math.ceil(r),n&&(p=n-i,r=p/Math.floor(p/r)),v=a;v<0;)s++,v=Math.round(a+s*r);for(g=Math.max(a,0);g<c;g++)g===v&&(t.push(e[g]),s++,v=Math.round(a+s*r))}function lQ(e){const t=e.length;let r,i;if(t<2)return!1;for(i=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==i)return!1;return i}const cQ=e=>e==="left"?"right":e==="right"?"left":e,CS=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,BS=(e,t)=>Math.min(t||e,e);function SS(e,t){const r=[],i=e.length/t,n=e.length;let a=0;for(;a<n;a+=i)r.push(e[Math.floor(a)]);return r}function uQ(e,t,r){const i=e.ticks.length,n=Math.min(t,i-1),a=e._startPixel,c=e._endPixel,s=1e-6;let p=e.getPixelForTick(n),g;if(!(r&&(i===1?g=Math.max(p-a,c-p):t===0?g=(e.getPixelForTick(1)-p)/2:g=(p-e.getPixelForTick(n-1))/2,p+=n<t?g:-g,p<a-s||p>c+s)))return p}function hQ(e,t){Fs(e,r=>{const i=r.gc,n=i.length/2;let a;if(n>t){for(a=0;a<n;++a)delete r.data[i[a]];i.splice(0,n)}})}function _1(e){return e.drawTicks?e.tickLength:0}function ES(e,t){if(!e.display)return 0;const r=Zc(e.font,t),i=sA(e.padding);return(qo(e.text)?e.text.length:1)*r.lineHeight+i.height}function AQ(e,t){return I0(e,{scale:t,type:"scale"})}function dQ(e,t,r){return I0(e,{tick:r,index:t,type:"tick"})}function fQ(e,t,r){let i=j4(e);return(r&&t!=="right"||!r&&t==="right")&&(i=cQ(i)),i}function pQ(e,t,r,i){const{top:n,left:a,bottom:c,right:s,chart:p}=e,{chartArea:g,scales:v}=p;let B=0,F,C,L;const P=c-n,D=s-a;if(e.isHorizontal()){if(C=Gc(i,a,s),On(r)){const j=Object.keys(r)[0],q=r[j];L=v[j].getPixelForValue(q)+P-t}else r==="center"?L=(g.bottom+g.top)/2+P-t:L=CS(e,r,t);F=s-a}else{if(On(r)){const j=Object.keys(r)[0],q=r[j];C=v[j].getPixelForValue(q)-D+t}else r==="center"?C=(g.left+g.right)/2-D+t:C=CS(e,r,t);L=Gc(i,c,n),B=r==="left"?-ml:ml}return{titleX:C,titleY:L,maxWidth:F,rotation:B}}class vg extends Cf{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:i,_suggestedMax:n}=this;return t=fd(t,Number.POSITIVE_INFINITY),r=fd(r,Number.NEGATIVE_INFINITY),i=fd(i,Number.POSITIVE_INFINITY),n=fd(n,Number.NEGATIVE_INFINITY),{min:fd(t,i),max:fd(r,n),minDefined:eu(t),maxDefined:eu(r)}}getMinMax(t){let{min:r,max:i,minDefined:n,maxDefined:a}=this.getUserBounds(),c;if(n&&a)return{min:r,max:i};const s=this.getMatchingVisibleMetas();for(let p=0,g=s.length;p<g;++p)c=s[p].controller.getMinMax(this,t),n||(r=Math.min(r,c.min)),a||(i=Math.max(i,c.max));return r=a&&r>i?i:r,i=n&&r>i?r:i,{min:fd(r,fd(i,r)),max:fd(i,fd(r,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ga(this.options.beforeUpdate,[this])}update(t,r,i){const{beginAtZero:n,grace:a,ticks:c}=this.options,s=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_9(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=s<this.ticks.length;this._convertTicksToLabels(p?SS(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=iQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,i;this.isHorizontal()?(r=this.left,i=this.right):(r=this.top,i=this.bottom,t=!t),this._startPixel=r,this._endPixel=i,this._reversePixels=t,this._length=i-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ga(this.options.afterUpdate,[this])}beforeSetDimensions(){ga(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ga(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ga(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ga(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let i,n,a;for(i=0,n=t.length;i<n;i++)a=t[i],a.label=ga(r.callback,[a.value,i,t],this)}afterTickToLabelConversion(){ga(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ga(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,i=BS(this.ticks.length,t.ticks.maxTicksLimit),n=r.minRotation||0,a=r.maxRotation;let c=n,s,p,g;if(!this._isVisible()||!r.display||n>=a||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const v=this._getLabelSizes(),B=v.widest.width,F=v.highest.height,C=Xc(this.chart.width-B,0,this.maxWidth);s=t.offset?this.maxWidth/i:C/(i-1),B+6>s&&(s=C/(i-(t.offset?.5:1)),p=this.maxHeight-_1(t.grid)-r.padding-ES(t.title,this.chart.options.font),g=Math.sqrt(B*B+F*F),c=q7(Math.min(Math.asin(Xc((v.highest.height+6)/s,-1,1)),Math.asin(Xc(p/g,-1,1))-Math.asin(Xc(F/g,-1,1)))),c=Math.max(n,Math.min(a,c))),this.labelRotation=c}afterCalculateLabelRotation(){ga(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ga(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:i,title:n,grid:a}}=this,c=this._isVisible(),s=this.isHorizontal();if(c){const p=ES(n,r.options.font);if(s?(t.width=this.maxWidth,t.height=_1(a)+p):(t.height=this.maxHeight,t.width=_1(a)+p),i.display&&this.ticks.length){const{first:g,last:v,widest:B,highest:F}=this._getLabelSizes(),C=i.padding*2,L=uf(this.labelRotation),P=Math.cos(L),D=Math.sin(L);if(s){const j=i.mirror?0:D*B.width+P*F.height;t.height=Math.min(this.maxHeight,t.height+j+C)}else{const j=i.mirror?0:P*B.width+D*F.height;t.width=Math.min(this.maxWidth,t.width+j+C)}this._calculatePadding(g,v,D,P)}}this._handleMargins(),s?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,i,n){const{ticks:{align:a,padding:c},position:s}=this.options,p=this.labelRotation!==0,g=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,B=this.right-this.getPixelForTick(this.ticks.length-1);let F=0,C=0;p?g?(F=n*t.width,C=i*r.height):(F=i*t.height,C=n*r.width):a==="start"?C=r.width:a==="end"?F=t.width:a!=="inner"&&(F=t.width/2,C=r.width/2),this.paddingLeft=Math.max((F-v+c)*this.width/(this.width-v),0),this.paddingRight=Math.max((C-B+c)*this.width/(this.width-B),0)}else{let v=r.height/2,B=t.height/2;a==="start"?(v=0,B=t.height):a==="end"&&(v=r.height,B=0),this.paddingTop=v+c,this.paddingBottom=B+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ga(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,i;for(r=0,i=t.length;r<i;r++)xs(t[r].label)&&(t.splice(r,1),i--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let i=this.ticks;r<i.length&&(i=SS(i,r)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,i){const{ctx:n,_longestTextCache:a}=this,c=[],s=[],p=Math.floor(r/BS(r,i));let g=0,v=0,B,F,C,L,P,D,j,q,H,ee,G;for(B=0;B<r;B+=p){if(L=t[B].label,P=this._resolveTickFontOptions(B),n.font=D=P.string,j=a[D]=a[D]||{data:{},gc:[]},q=P.lineHeight,H=ee=0,!xs(L)&&!qo(L))H=eS(n,j.data,j.gc,H,L),ee=q;else if(qo(L))for(F=0,C=L.length;F<C;++F)G=L[F],!xs(G)&&!qo(G)&&(H=eS(n,j.data,j.gc,H,G),ee+=q);c.push(H),s.push(ee),g=Math.max(H,g),v=Math.max(ee,v)}hQ(a,r);const ne=c.indexOf(g),Z=s.indexOf(v),le=J=>({width:c[J]||0,height:s[J]||0});return{first:le(0),last:le(r-1),widest:le(ne),highest:le(Z),widths:c,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return W7(this._alignToPixels?e0(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const i=r[t];return i.$context||(i.$context=dQ(this.getContext(),t,i))}return this.$context||(this.$context=AQ(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=uf(this.labelRotation),i=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),a=this._getLabelSizes(),c=t.autoSkipPadding||0,s=a?a.widest.width+c:0,p=a?a.highest.height+c:0;return this.isHorizontal()?p*i>s*n?s/i:p/n:p*n<s*i?p/i:s/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,i=this.chart,n=this.options,{grid:a,position:c,border:s}=n,p=a.offset,g=this.isHorizontal(),B=this.ticks.length+(p?1:0),F=_1(a),C=[],L=s.setContext(this.getContext()),P=L.display?L.width:0,D=P/2,j=function(he){return e0(i,he,P)};let q,H,ee,G,ne,Z,le,J,ce,te,K,me;if(c==="top")q=j(this.bottom),Z=this.bottom-F,J=q-D,te=j(t.top)+D,me=t.bottom;else if(c==="bottom")q=j(this.top),te=t.top,me=j(t.bottom)-D,Z=q+D,J=this.top+F;else if(c==="left")q=j(this.right),ne=this.right-F,le=q-D,ce=j(t.left)+D,K=t.right;else if(c==="right")q=j(this.left),ce=t.left,K=j(t.right)-D,ne=q+D,le=this.left+F;else if(r==="x"){if(c==="center")q=j((t.top+t.bottom)/2+.5);else if(On(c)){const he=Object.keys(c)[0],Le=c[he];q=j(this.chart.scales[he].getPixelForValue(Le))}te=t.top,me=t.bottom,Z=q+D,J=Z+F}else if(r==="y"){if(c==="center")q=j((t.left+t.right)/2);else if(On(c)){const he=Object.keys(c)[0],Le=c[he];q=j(this.chart.scales[he].getPixelForValue(Le))}ne=q-D,le=ne-F,ce=t.left,K=t.right}const we=Cn(n.ticks.maxTicksLimit,B),Fe=Math.max(1,Math.ceil(B/we));for(H=0;H<B;H+=Fe){const he=this.getContext(H),Le=a.setContext(he),$e=s.setContext(he),Ne=Le.lineWidth,Te=Le.color,Ge=$e.dash||[],Y=$e.dashOffset,Ae=Le.tickWidth,fe=Le.tickColor,be=Le.tickBorderDash||[],Me=Le.tickBorderDashOffset;ee=uQ(this,H,p),ee!==void 0&&(G=e0(i,ee,Ne),g?ne=le=ce=K=G:Z=J=te=me=G,C.push({tx1:ne,ty1:Z,tx2:le,ty2:J,x1:ce,y1:te,x2:K,y2:me,width:Ne,color:Te,borderDash:Ge,borderDashOffset:Y,tickWidth:Ae,tickColor:fe,tickBorderDash:be,tickBorderDashOffset:Me}))}return this._ticksLength=B,this._borderValue=q,C}_computeLabelItems(t){const r=this.axis,i=this.options,{position:n,ticks:a}=i,c=this.isHorizontal(),s=this.ticks,{align:p,crossAlign:g,padding:v,mirror:B}=a,F=_1(i.grid),C=F+v,L=B?-v:C,P=-uf(this.labelRotation),D=[];let j,q,H,ee,G,ne,Z,le,J,ce,te,K,me="middle";if(n==="top")ne=this.bottom-L,Z=this._getXAxisLabelAlignment();else if(n==="bottom")ne=this.top+L,Z=this._getXAxisLabelAlignment();else if(n==="left"){const Fe=this._getYAxisLabelAlignment(F);Z=Fe.textAlign,G=Fe.x}else if(n==="right"){const Fe=this._getYAxisLabelAlignment(F);Z=Fe.textAlign,G=Fe.x}else if(r==="x"){if(n==="center")ne=(t.top+t.bottom)/2+C;else if(On(n)){const Fe=Object.keys(n)[0],he=n[Fe];ne=this.chart.scales[Fe].getPixelForValue(he)+C}Z=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")G=(t.left+t.right)/2-C;else if(On(n)){const Fe=Object.keys(n)[0],he=n[Fe];G=this.chart.scales[Fe].getPixelForValue(he)}Z=this._getYAxisLabelAlignment(F).textAlign}r==="y"&&(p==="start"?me="top":p==="end"&&(me="bottom"));const we=this._getLabelSizes();for(j=0,q=s.length;j<q;++j){H=s[j],ee=H.label;const Fe=a.setContext(this.getContext(j));le=this.getPixelForTick(j)+a.labelOffset,J=this._resolveTickFontOptions(j),ce=J.lineHeight,te=qo(ee)?ee.length:1;const he=te/2,Le=Fe.color,$e=Fe.textStrokeColor,Ne=Fe.textStrokeWidth;let Te=Z;c?(G=le,Z==="inner"&&(j===q-1?Te=this.options.reverse?"left":"right":j===0?Te=this.options.reverse?"right":"left":Te="center"),n==="top"?g==="near"||P!==0?K=-te*ce+ce/2:g==="center"?K=-we.highest.height/2-he*ce+ce:K=-we.highest.height+ce/2:g==="near"||P!==0?K=ce/2:g==="center"?K=we.highest.height/2-he*ce:K=we.highest.height-te*ce,B&&(K*=-1),P!==0&&!Fe.showLabelBackdrop&&(G+=ce/2*Math.sin(P))):(ne=le,K=(1-te)*ce/2);let Ge;if(Fe.showLabelBackdrop){const Y=sA(Fe.backdropPadding),Ae=we.heights[j],fe=we.widths[j];let be=K-Y.top,Me=0-Y.left;switch(me){case"middle":be-=Ae/2;break;case"bottom":be-=Ae;break}switch(Z){case"center":Me-=fe/2;break;case"right":Me-=fe;break;case"inner":j===q-1?Me-=fe:j>0&&(Me-=fe/2);break}Ge={left:Me,top:be,width:fe+Y.width,height:Ae+Y.height,color:Fe.backdropColor}}D.push({label:ee,font:J,textOffset:K,options:{rotation:P,color:Le,strokeColor:$e,strokeWidth:Ne,textAlign:Te,textBaseline:me,translation:[G,ne],backdrop:Ge}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-uf(this.labelRotation))return t==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:i,mirror:n,padding:a}}=this.options,c=this._getLabelSizes(),s=t+a,p=c.widest.width;let g,v;return r==="left"?n?(v=this.right+a,i==="near"?g="left":i==="center"?(g="center",v+=p/2):(g="right",v+=p)):(v=this.right-s,i==="near"?g="right":i==="center"?(g="center",v-=p/2):(g="left",v=this.left)):r==="right"?n?(v=this.left+a,i==="near"?g="right":i==="center"?(g="center",v-=p/2):(g="left",v-=p)):(v=this.left+s,i==="near"?g="left":i==="center"?(g="center",v+=p/2):(g="right",v=this.right)):g="right",{textAlign:g,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:i,top:n,width:a,height:c}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(i,n,a,c),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(a=>a.value===t);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const r=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,c;const s=(p,g,v)=>{!v.width||!v.color||(i.save(),i.lineWidth=v.width,i.strokeStyle=v.color,i.setLineDash(v.borderDash||[]),i.lineDashOffset=v.borderDashOffset,i.beginPath(),i.moveTo(p.x,p.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(r.display)for(a=0,c=n.length;a<c;++a){const p=n[a];r.drawOnChartArea&&s({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),r.drawTicks&&s({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:i,grid:n}}=this,a=i.setContext(this.getContext()),c=i.display?a.width:0;if(!c)return;const s=n.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let g,v,B,F;this.isHorizontal()?(g=e0(t,this.left,c)-c/2,v=e0(t,this.right,s)+s/2,B=F=p):(B=e0(t,this.top,c)-c/2,F=e0(t,this.bottom,s)+s/2,g=v=p),r.save(),r.lineWidth=a.width,r.strokeStyle=a.color,r.beginPath(),r.moveTo(g,B),r.lineTo(v,F),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&y_(i,n);const a=this.getLabelItems(t);for(const c of a){const s=c.options,p=c.font,g=c.label,v=c.textOffset;bv(i,g,0,v,p,s)}n&&__(i)}drawTitle(){const{ctx:t,options:{position:r,title:i,reverse:n}}=this;if(!i.display)return;const a=Zc(i.font),c=sA(i.padding),s=i.align;let p=a.lineHeight/2;r==="bottom"||r==="center"||On(r)?(p+=c.bottom,qo(i.text)&&(p+=a.lineHeight*(i.text.length-1))):p+=c.top;const{titleX:g,titleY:v,maxWidth:B,rotation:F}=pQ(this,p,r,s);bv(t,i.text,0,0,a,{color:i.color,maxWidth:B,rotation:F,textAlign:fQ(s,r,n),textBaseline:"middle",translation:[g,v]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,i=Cn(t.grid&&t.grid.z,-1),n=Cn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==vg.prototype.draw?[{z:r,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let a,c;for(a=0,c=r.length;a<c;++a){const s=r[a];s[i]===this.id&&(!t||s.type===t)&&n.push(s)}return n}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return Zc(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ay{constructor(t,r,i){this.type=t,this.scope=r,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let i;vQ(r)&&(i=this.register(r));const n=this.items,a=t.id,c=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in n||(n[a]=t,mQ(t,c,i),this.override&&So.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const r=this.items,i=t.id,n=this.scope;i in r&&delete r[i],n&&i in So[n]&&(delete So[n][i],this.override&&delete S0[i])}}function mQ(e,t,r){const i=gv(Object.create(null),[r?So.get(r):{},So.get(t),e.defaults]);So.set(t,i),e.defaultRoutes&&gQ(t,e.defaultRoutes),e.descriptors&&So.describe(t,e.descriptors)}function gQ(e,t){Object.keys(t).forEach(r=>{const i=r.split("."),n=i.pop(),a=[e].concat(i).join("."),c=t[r].split("."),s=c.pop(),p=c.join(".");So.route(a,n,p,s)})}function vQ(e){return"id"in e&&"defaults"in e}class xQ{constructor(){this.controllers=new ay(w_,"datasets",!0),this.elements=new ay(Cf,"elements"),this.plugins=new ay(Object,"plugins"),this.scales=new ay(vg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,i){[...r].forEach(n=>{const a=i||this._getRegistryForType(n);i||a.isForType(n)||a===this.plugins&&n.id?this._exec(t,a,n):Fs(n,c=>{const s=i||this._getRegistryForType(c);this._exec(t,s,c)})})}_exec(t,r,i){const n=R4(t);ga(i["before"+n],[],i),r[t](i),ga(i["after"+n],[],i)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const i=this._typedRegistries[r];if(i.isForType(t))return i}return this.plugins}_get(t,r,i){const n=r.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var bd=new xQ;class yQ{constructor(){this._init=[]}notify(t,r,i,n){r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=n?this._descriptors(t).filter(n):this._descriptors(t),c=this._notify(a,t,r,i);return r==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,r,i,n){n=n||{};for(const a of t){const c=a.plugin,s=c[i],p=[r,n,a.options];if(ga(s,p,c)===!1&&n.cancelable)return!1}return!0}invalidate(){xs(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const i=t&&t.config,n=Cn(i.options&&i.options.plugins,{}),a=_Q(i);return n===!1&&!r?[]:wQ(t,a,n,r)}_notifyStateChanges(t){const r=this._oldCache||[],i=this._cache,n=(a,c)=>a.filter(s=>!c.some(p=>s.plugin.id===p.plugin.id));this._notify(n(r,i),t,"stop"),this._notify(n(i,r),t,"start")}}function _Q(e){const t={},r=[],i=Object.keys(bd.plugins.items);for(let a=0;a<i.length;a++)r.push(bd.getPlugin(i[a]));const n=e.plugins||[];for(let a=0;a<n.length;a++){const c=n[a];r.indexOf(c)===-1&&(r.push(c),t[c.id]=!0)}return{plugins:r,localIds:t}}function bQ(e,t){return!t&&e===!1?null:e===!0?{}:e}function wQ(e,{plugins:t,localIds:r},i,n){const a=[],c=e.getContext();for(const s of t){const p=s.id,g=bQ(i[p],n);g!==null&&a.push({plugin:s,options:CQ(e.config,{plugin:s,local:r[p]},g,c)})}return a}function CQ(e,{plugin:t,local:r},i,n){const a=e.pluginScopeKeys(t),c=e.getOptionScopes(i,a);return r&&t.defaults&&c.push(t.defaults),e.createResolver(c,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function f5(e,t){const r=So.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function BQ(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function SQ(e,t){return e===t?"_index_":"_value_"}function TS(e){if(e==="x"||e==="y"||e==="r")return e}function EQ(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function p5(e,...t){if(TS(e))return e;for(const r of t){const i=r.axis||EQ(r.position)||e.length>1&&TS(e[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function kS(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function TQ(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(i=>i.xAxisID===e||i.yAxisID===e);if(r.length)return kS(e,"x",r[0])||kS(e,"y",r[0])}return{}}function kQ(e,t){const r=S0[e.type]||{scales:{}},i=t.scales||{},n=f5(e.type,t),a=Object.create(null);return Object.keys(i).forEach(c=>{const s=i[c];if(!On(s))return console.error(`Invalid scale configuration for scale: ${c}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const p=p5(c,s,TQ(c,e),So.scales[s.type]),g=SQ(p,n),v=r.scales||{};a[c]=q1(Object.create(null),[{axis:p},s,v[p],v[g]])}),e.data.datasets.forEach(c=>{const s=c.type||e.type,p=c.indexAxis||f5(s,t),v=(S0[s]||{}).scales||{};Object.keys(v).forEach(B=>{const F=BQ(B,p),C=c[F+"AxisID"]||F;a[C]=a[C]||Object.create(null),q1(a[C],[{axis:F},i[C],v[B]])})}),Object.keys(a).forEach(c=>{const s=a[c];q1(s,[So.scales[s.type],So.scale])}),a}function RF(e){const t=e.options||(e.options={});t.plugins=Cn(t.plugins,{}),t.scales=kQ(e,t)}function DF(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function FQ(e){return e=e||{},e.data=DF(e.data),RF(e),e}const FS=new Map,jF=new Set;function oy(e,t){let r=FS.get(e);return r||(r=t(),FS.set(e,r),jF.add(r)),r}const b1=(e,t,r)=>{const i=B0(t,r);i!==void 0&&e.add(i)};class NQ{constructor(t){this._config=FQ(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=DF(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),RF(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return oy(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return oy(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return oy(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,i=this.type;return oy(`${i}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const i=this._scopeCache;let n=i.get(t);return(!n||r)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,r,i){const{options:n,type:a}=this,c=this._cachedScopes(t,i),s=c.get(r);if(s)return s;const p=new Set;r.forEach(v=>{t&&(p.add(t),v.forEach(B=>b1(p,t,B))),v.forEach(B=>b1(p,n,B)),v.forEach(B=>b1(p,S0[a]||{},B)),v.forEach(B=>b1(p,So,B)),v.forEach(B=>b1(p,A5,B))});const g=Array.from(p);return g.length===0&&g.push(Object.create(null)),jF.has(r)&&c.set(r,g),g}chartOptionScopes(){const{options:t,type:r}=this;return[t,S0[r]||{},So.datasets[r]||{},{type:r},So,A5]}resolveNamedOptions(t,r,i,n=[""]){const a={$shared:!0},{resolver:c,subPrefixes:s}=NS(this._resolverCache,t,n);let p=c;if(LQ(c,r)){a.$shared=!1,i=bp(i)?i():i;const g=this.createResolver(t,i,s);p=og(c,i,g)}for(const g of r)a[g]=p[g];return a}createResolver(t,r,i=[""],n){const{resolver:a}=NS(this._resolverCache,t,i);return On(r)?og(a,r,void 0,n):a}}function NS(e,t,r){let i=e.get(t);i||(i=new Map,e.set(t,i));const n=r.join();let a=i.get(n);return a||(a={resolver:Q4(t,r),subPrefixes:r.filter(s=>!s.toLowerCase().includes("hover"))},i.set(n,a)),a}const IQ=e=>On(e)&&Object.getOwnPropertyNames(e).some(t=>bp(e[t]));function LQ(e,t){const{isScriptable:r,isIndexable:i}=gF(e);for(const n of t){const a=r(n),c=i(n),s=(c||a)&&e[n];if(a&&(bp(s)||IQ(s))||c&&qo(s))return!0}return!1}var MQ="4.5.0";const PQ=["top","bottom","left","right","chartArea"];function IS(e,t){return e==="top"||e==="bottom"||PQ.indexOf(e)===-1&&t==="x"}function LS(e,t){return function(r,i){return r[e]===i[e]?r[t]-i[t]:r[e]-i[e]}}function MS(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),ga(r&&r.onComplete,[e],t)}function RQ(e){const t=e.chart,r=t.options.animation;ga(r&&r.onProgress,[e],t)}function UF(e){return G4()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const c2={},PS=e=>{const t=UF(e);return Object.values(c2).filter(r=>r.canvas===t).pop()};function DQ(e,t,r){const i=Object.keys(e);for(const n of i){const a=+n;if(a>=t){const c=e[n];delete e[n],(r>0||a>t)&&(e[a+r]=c)}}}function jQ(e,t,r,i){return!r||e.type==="mouseout"?null:i?t:e}let xg=class{static defaults=So;static instances=c2;static overrides=S0;static registry=bd;static version=MQ;static getChart=PS;static register(...t){bd.add(...t),RS()}static unregister(...t){bd.remove(...t),RS()}constructor(t,r){const i=this.config=new NQ(r),n=UF(t),a=PS(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||rQ(n)),this.platform.updateConfig(i);const s=this.platform.acquireContext(n,c.aspectRatio),p=s&&s.canvas,g=p&&p.height,v=p&&p.width;if(this.id=L7(),this.ctx=s,this.canvas=p,this.width=v,this.height=g,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yQ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Y7(B=>this.update(B),c.resizeDelay||0),this._dataChanges=[],c2[this.id]=this,!s||!p){console.error("Failed to create chart: can't acquire context from the given item");return}nf.listen(this,"complete",MS),nf.listen(this,"progress",RQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:n,_aspectRatio:a}=this;return xs(t)?r&&a?a:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return bd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tS(this.canvas,this.ctx),this}stop(){return nf.stop(this),this}resize(t,r){nf.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const i=this.options,n=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(n,t,r,a),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,nS(this,s,!0)&&(this.notifyPlugins("resize",{size:c}),ga(i.onResize,[this,c],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Fs(r,(i,n)=>{i.id=n})}buildOrUpdateScales(){const t=this.options,r=t.scales,i=this.scales,n=Object.keys(i).reduce((c,s)=>(c[s]=!1,c),{});let a=[];r&&(a=a.concat(Object.keys(r).map(c=>{const s=r[c],p=p5(c,s),g=p==="r",v=p==="x";return{options:s,dposition:g?"chartArea":v?"bottom":"left",dtype:g?"radialLinear":v?"category":"linear"}}))),Fs(a,c=>{const s=c.options,p=s.id,g=p5(p,s),v=Cn(s.type,c.dtype);(s.position===void 0||IS(s.position,g)!==IS(c.dposition))&&(s.position=c.dposition),n[p]=!0;let B=null;if(p in i&&i[p].type===v)B=i[p];else{const F=bd.getScale(v);B=new F({id:p,type:v,ctx:this.ctx,chart:this}),i[B.id]=B}B.init(s,t)}),Fs(n,(c,s)=>{c||delete i[s]}),Fs(i,c=>{rA.configure(this,c,c.options),rA.addBox(this,c)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((n,a)=>n.index-a.index),i>r){for(let n=r;n<i;++n)this._destroyDatasetMeta(n);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(LS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,n)=>{r.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=r.length;i<n;i++){const a=r[i];let c=this.getDatasetMeta(i);const s=a.type||this.config.type;if(c.type&&c.type!==s&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=s,c.indexAxis=a.indexAxis||f5(s,this.options),c.order=a.order||0,c.index=i,c.label=""+a.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const p=bd.getController(s),{datasetElementType:g,dataElementType:v}=So.datasets[s];Object.assign(p,{dataElementType:bd.getElement(v),datasetElementType:g&&bd.getElement(g)}),c.controller=new p(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){Fs(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let g=0,v=this.data.datasets.length;g<v;g++){const{controller:B}=this.getDatasetMeta(g),F=!n&&a.indexOf(B)===-1;B.buildOrUpdateElements(F),c=Math.max(+B.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),n||Fs(a,g=>{g.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(LS("z","_idx"));const{_active:s,_lastEvent:p}=this;p?this._eventHandler(p,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){Fs(this.scales,t=>{rA.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!GB(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:a}of r){const c=i==="_removeElements"?-a:a;DQ(t,n,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=a=>new Set(t.filter(c=>c[0]===a).map((c,s)=>s+","+c.splice(1).join(","))),n=i(0);for(let a=1;a<r;a++)if(!GB(n,i(a)))return;return Array.from(n).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;rA.update(this,this.width,this.height,t);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],Fs(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,a)=>{n._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,bp(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(nf.has(this)?this.attached&&!nf.running(this)&&nf.start(this):(this.draw(),MS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,i=[];let n,a;for(n=0,a=r.length;n<a;++n){const c=r[n];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,i={meta:t,index:t.index,cancelable:!0},n=EF(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&y_(r,n),t.controller.draw(),n&&__(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return _v(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,n){const a=Pz.modes[r];return typeof a=="function"?a(this,t,i,n):[]}getDatasetMeta(t){const r=this.data.datasets[t],i=this._metasets;let n=i.filter(a=>a&&a._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=I0(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){const i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){const n=i?"show":"hide",a=this.getDatasetMeta(t),c=a.controller._resolveAnimations(void 0,n);vv(r)?(a.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(a,{visible:i}),this.update(s=>s.datasetIndex===t?n:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),nf.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),tS(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete c2[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,i=(a,c)=>{r.addEventListener(this,a,c),t[a]=c},n=(a,c,s)=>{a.offsetX=c,a.offsetY=s,this._eventHandler(a)};Fs(this.options.events,a=>i(a,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,i=(p,g)=>{r.addEventListener(this,p,g),t[p]=g},n=(p,g)=>{t[p]&&(r.removeEventListener(this,p,g),delete t[p])},a=(p,g)=>{this.canvas&&this.resize(p,g)};let c;const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",a),i("detach",c)};c=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),i("attach",s)},r.isAttached(this.canvas)?s():c()}unbindEvents(){Fs(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Fs(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){const n=i?"set":"remove";let a,c,s,p;for(r==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),s=0,p=t.length;s<p;++s){c=t[s];const g=c&&this.getDatasetMeta(c.datasetIndex).controller;g&&g[n+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],i=t.map(({datasetIndex:a,index:c})=>{const s=this.getDatasetMeta(a);if(!s)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:s.data[c],index:c}});!E2(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){const n=this.options.hover,a=(p,g)=>p.filter(v=>!g.some(B=>v.datasetIndex===B.datasetIndex&&v.index===B.index)),c=a(r,t),s=i?t:a(t,r);c.length&&this.updateHoverStyle(c,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(t,r){const i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},n=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const a=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(a||i.changed)&&this.render(),this}_handleEvent(t,r,i){const{_active:n=[],options:a}=this,c=r,s=this._getActiveElements(t,n,i,c),p=U7(t),g=jQ(t,this._lastEvent,i,p);i&&(this._lastEvent=null,ga(a.onHover,[t,s,this],this),p&&ga(a.onClick,[t,s,this],this));const v=!E2(s,n);return(v||r)&&(this._active=s,this._updateHoverStyles(s,n,r)),this._lastEvent=g,v}_getActiveElements(t,r,i,n){if(t.type==="mouseout")return[];if(!i)return r;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,n)}};function RS(){return Fs(xg.instances,e=>e._plugins.invalidate())}function UQ(e,t,r){const{startAngle:i,x:n,y:a,outerRadius:c,innerRadius:s,options:p}=t,{borderWidth:g,borderJoinStyle:v}=p,B=Math.min(g/c,Sh(i-r));if(e.beginPath(),e.arc(n,a,c-g/2,i+B/2,r-B/2),s>0){const F=Math.min(g/s,Sh(i-r));e.arc(n,a,s+g/2,r-F/2,i+F/2,!0)}else{const F=Math.min(g/2,c*Sh(i-r));if(v==="round")e.arc(n,a,F,r-Is/2,i+Is/2,!0);else if(v==="bevel"){const C=2*F*F,L=-C*Math.cos(r+Is/2)+n,P=-C*Math.sin(r+Is/2)+a,D=C*Math.cos(i+Is/2)+n,j=C*Math.sin(i+Is/2)+a;e.lineTo(L,P),e.lineTo(D,j)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function OQ(e,t,r){const{startAngle:i,pixelMargin:n,x:a,y:c,outerRadius:s,innerRadius:p}=t;let g=n/s;e.beginPath(),e.arc(a,c,s,i-g,r+g),p>n?(g=n/p,e.arc(a,c,p,r+g,i-g,!0)):e.arc(a,c,n,r+ml,i-ml),e.closePath(),e.clip()}function zQ(e){return z4(e,["outerStart","outerEnd","innerStart","innerEnd"])}function QQ(e,t,r,i){const n=zQ(e.options.borderRadius),a=(r-t)/2,c=Math.min(a,i*t/2),s=p=>{const g=(r-Math.min(a,p))*i/2;return Xc(p,0,Math.min(a,g))};return{outerStart:s(n.outerStart),outerEnd:s(n.outerEnd),innerStart:Xc(n.innerStart,0,c),innerEnd:Xc(n.innerEnd,0,c)}}function Em(e,t,r,i){return{x:r+e*Math.cos(t),y:i+e*Math.sin(t)}}function L2(e,t,r,i,n,a){const{x:c,y:s,startAngle:p,pixelMargin:g,innerRadius:v}=t,B=Math.max(t.outerRadius+i+r-g,0),F=v>0?v+i+r+g:0;let C=0;const L=n-p;if(i){const Fe=v>0?v-i:0,he=B>0?B-i:0,Le=(Fe+he)/2,$e=Le!==0?L*Le/(Le+i):L;C=(L-$e)/2}const P=Math.max(.001,L*B-r/Is)/B,D=(L-P)/2,j=p+D+C,q=n-D-C,{outerStart:H,outerEnd:ee,innerStart:G,innerEnd:ne}=QQ(t,F,B,q-j),Z=B-H,le=B-ee,J=j+H/Z,ce=q-ee/le,te=F+G,K=F+ne,me=j+G/te,we=q-ne/K;if(e.beginPath(),a){const Fe=(J+ce)/2;if(e.arc(c,s,B,J,Fe),e.arc(c,s,B,Fe,ce),ee>0){const Ne=Em(le,ce,c,s);e.arc(Ne.x,Ne.y,ee,ce,q+ml)}const he=Em(K,q,c,s);if(e.lineTo(he.x,he.y),ne>0){const Ne=Em(K,we,c,s);e.arc(Ne.x,Ne.y,ne,q+ml,we+Math.PI)}const Le=(q-ne/F+(j+G/F))/2;if(e.arc(c,s,F,q-ne/F,Le,!0),e.arc(c,s,F,Le,j+G/F,!0),G>0){const Ne=Em(te,me,c,s);e.arc(Ne.x,Ne.y,G,me+Math.PI,j-ml)}const $e=Em(Z,j,c,s);if(e.lineTo($e.x,$e.y),H>0){const Ne=Em(Z,J,c,s);e.arc(Ne.x,Ne.y,H,j-ml,J)}}else{e.moveTo(c,s);const Fe=Math.cos(J)*B+c,he=Math.sin(J)*B+s;e.lineTo(Fe,he);const Le=Math.cos(ce)*B+c,$e=Math.sin(ce)*B+s;e.lineTo(Le,$e)}e.closePath()}function HQ(e,t,r,i,n){const{fullCircles:a,startAngle:c,circumference:s}=t;let p=t.endAngle;if(a){L2(e,t,r,i,p,n);for(let g=0;g<a;++g)e.fill();isNaN(s)||(p=c+(s%za||za))}return L2(e,t,r,i,p,n),e.fill(),p}function VQ(e,t,r,i,n){const{fullCircles:a,startAngle:c,circumference:s,options:p}=t,{borderWidth:g,borderJoinStyle:v,borderDash:B,borderDashOffset:F,borderRadius:C}=p,L=p.borderAlign==="inner";if(!g)return;e.setLineDash(B||[]),e.lineDashOffset=F,L?(e.lineWidth=g*2,e.lineJoin=v||"round"):(e.lineWidth=g,e.lineJoin=v||"bevel");let P=t.endAngle;if(a){L2(e,t,r,i,P,n);for(let D=0;D<a;++D)e.stroke();isNaN(s)||(P=c+(s%za||za))}L&&OQ(e,t,P),p.selfJoin&&P-c>=Is&&C===0&&v!=="miter"&&UQ(e,t,P),a||(L2(e,t,r,i,P,n),e.stroke())}class W4 extends Cf{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const n=this.getProps(["x","y"],i),{angle:a,distance:c}=cF(n,{x:t,y:r}),{startAngle:s,endAngle:p,innerRadius:g,outerRadius:v,circumference:B}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),F=(this.options.spacing+this.options.borderWidth)/2,C=Cn(B,p-s),L=yv(a,s,p)&&s!==p,P=C>=za||L,D=hf(c,g+F,v+F);return P&&D}getCenterPoint(t){const{x:r,y:i,startAngle:n,endAngle:a,innerRadius:c,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:p,spacing:g}=this.options,v=(n+a)/2,B=(c+s+g+p)/2;return{x:r+Math.cos(v)*B,y:i+Math.sin(v)*B}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,n=(r.offset||0)/4,a=(r.spacing||0)/2,c=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>za?Math.floor(i/za):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*n,Math.sin(s)*n);const p=1-Math.sin(Math.min(Is,i||0)),g=n*p;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,HQ(t,this,g,a,c),VQ(t,this,g,a,c),t.restore()}}function OF(e,t,r=t){e.lineCap=Cn(r.borderCapStyle,t.borderCapStyle),e.setLineDash(Cn(r.borderDash,t.borderDash)),e.lineDashOffset=Cn(r.borderDashOffset,t.borderDashOffset),e.lineJoin=Cn(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Cn(r.borderWidth,t.borderWidth),e.strokeStyle=Cn(r.borderColor,t.borderColor)}function GQ(e,t,r){e.lineTo(r.x,r.y)}function qQ(e){return e.stepped?A9:e.tension||e.cubicInterpolationMode==="monotone"?d9:GQ}function zF(e,t,r={}){const i=e.length,{start:n=0,end:a=i-1}=r,{start:c,end:s}=t,p=Math.max(n,c),g=Math.min(a,s),v=n<c&&a<c||n>s&&a>s;return{count:i,start:p,loop:t.loop,ilen:g<p&&!v?i+g-p:g-p}}function KQ(e,t,r,i){const{points:n,options:a}=t,{count:c,start:s,loop:p,ilen:g}=zF(n,r,i),v=qQ(a);let{move:B=!0,reverse:F}=i||{},C,L,P;for(C=0;C<=g;++C)L=n[(s+(F?g-C:C))%c],!L.skip&&(B?(e.moveTo(L.x,L.y),B=!1):v(e,P,L,F,a.stepped),P=L);return p&&(L=n[(s+(F?g:0))%c],v(e,P,L,F,a.stepped)),!!p}function WQ(e,t,r,i){const n=t.points,{count:a,start:c,ilen:s}=zF(n,r,i),{move:p=!0,reverse:g}=i||{};let v=0,B=0,F,C,L,P,D,j;const q=ee=>(c+(g?s-ee:ee))%a,H=()=>{P!==D&&(e.lineTo(v,D),e.lineTo(v,P),e.lineTo(v,j))};for(p&&(C=n[q(0)],e.moveTo(C.x,C.y)),F=0;F<=s;++F){if(C=n[q(F)],C.skip)continue;const ee=C.x,G=C.y,ne=ee|0;ne===L?(G<P?P=G:G>D&&(D=G),v=(B*v+ee)/++B):(H(),e.lineTo(ee,G),L=ne,B=0,P=D=G),j=G}H()}function m5(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?WQ:KQ}function $Q(e){return e.stepped?G9:e.tension||e.cubicInterpolationMode==="monotone"?q9:n0}function XQ(e,t,r,i){let n=t._path;n||(n=t._path=new Path2D,t.path(n,r,i)&&n.closePath()),OF(e,t.options),e.stroke(n)}function ZQ(e,t,r,i){const{segments:n,options:a}=t,c=m5(t);for(const s of n)OF(e,a,s.style),e.beginPath(),c(e,t,s,{start:r,end:r+i-1})&&e.closePath(),e.stroke()}const YQ=typeof Path2D=="function";function JQ(e,t,r,i){YQ&&!t.options.segment?XQ(e,t,r,i):ZQ(e,t,r,i)}class yg extends Cf{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;D9(this._points,i,t,n,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Y9(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){const i=this.options,n=t[r],a=this.points,c=SF(this,{property:r,start:n,end:n});if(!c.length)return;const s=[],p=$Q(i);let g,v;for(g=0,v=c.length;g<v;++g){const{start:B,end:F}=c[g],C=a[B],L=a[F];if(C===L){s.push(C);continue}const P=Math.abs((n-C[r])/(L[r]-C[r])),D=p(C,L,P,i.stepped);D[r]=t[r],s.push(D)}return s.length===1?s[0]:s}pathSegment(t,r,i){return m5(this)(t,this,r,i)}path(t,r,i){const n=this.segments,a=m5(this);let c=this._loop;r=r||0,i=i||this.points.length-r;for(const s of n)c&=a(t,this,s,{start:r,end:r+i-1});return!!c}draw(t,r,i,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),JQ(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function DS(e,t,r,i){const n=e.options,{[r]:a}=e.getProps([r],i);return Math.abs(t-a)<n.radius+n.hitRadius}class $4 extends Cf{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const n=this.options,{x:a,y:c}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(r-c,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,r){return DS(this,t,"x",r)}inYRange(t,r){return DS(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!_v(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,d5(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function QF(e,t){const{x:r,y:i,base:n,width:a,height:c}=e.getProps(["x","y","base","width","height"],t);let s,p,g,v,B;return e.horizontal?(B=c/2,s=Math.min(r,n),p=Math.max(r,n),g=i-B,v=i+B):(B=a/2,s=r-B,p=r+B,g=Math.min(i,n),v=Math.max(i,n)),{left:s,top:g,right:p,bottom:v}}function cp(e,t,r,i){return e?0:Xc(t,r,i)}function eH(e,t,r){const i=e.options.borderWidth,n=e.borderSkipped,a=mF(i);return{t:cp(n.top,a.top,0,r),r:cp(n.right,a.right,0,t),b:cp(n.bottom,a.bottom,0,r),l:cp(n.left,a.left,0,t)}}function tH(e,t,r){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,a=$m(n),c=Math.min(t,r),s=e.borderSkipped,p=i||On(n);return{topLeft:cp(!p||s.top||s.left,a.topLeft,0,c),topRight:cp(!p||s.top||s.right,a.topRight,0,c),bottomLeft:cp(!p||s.bottom||s.left,a.bottomLeft,0,c),bottomRight:cp(!p||s.bottom||s.right,a.bottomRight,0,c)}}function rH(e){const t=QF(e),r=t.right-t.left,i=t.bottom-t.top,n=eH(e,r/2,i/2),a=tH(e,r/2,i/2);return{outer:{x:t.left,y:t.top,w:r,h:i,radius:a},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,a.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(n.b,n.r))}}}}function Mb(e,t,r,i){const n=t===null,a=r===null,s=e&&!(n&&a)&&QF(e,i);return s&&(n||hf(t,s.left,s.right))&&(a||hf(r,s.top,s.bottom))}function iH(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function nH(e,t){e.rect(t.x,t.y,t.w,t.h)}function Pb(e,t,r={}){const i=e.x!==r.x?-t:0,n=e.y!==r.y?-t:0,a=(e.x+e.w!==r.x+r.w?t:0)-i,c=(e.y+e.h!==r.y+r.h?t:0)-n;return{x:e.x+i,y:e.y+n,w:e.w+a,h:e.h+c,radius:e.radius}}class X4 extends Cf{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:i,backgroundColor:n}}=this,{inner:a,outer:c}=rH(this),s=iH(c.radius)?F2:nH;t.save(),(c.w!==a.w||c.h!==a.h)&&(t.beginPath(),s(t,Pb(c,r,a)),t.clip(),s(t,Pb(a,-r,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),s(t,Pb(a,r)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,r,i){return Mb(this,t,r,i)}inXRange(t,r){return Mb(this,t,null,r)}inYRange(t,r){return Mb(this,null,t,r)}getCenterPoint(t){const{x:r,y:i,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(r+n)/2:r,y:a?i:(i+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}function sH(e,t,r){const i=e.segments,n=e.points,a=t.points,c=[];for(const s of i){let{start:p,end:g}=s;g=B_(p,g,n);const v=g5(r,n[p],n[g],s.loop);if(!t.segments){c.push({source:s,target:v,start:n[p],end:n[g]});continue}const B=SF(t,v);for(const F of B){const C=g5(r,a[F.start],a[F.end],F.loop),L=BF(s,n,C);for(const P of L)c.push({source:P,target:F,start:{[r]:jS(v,C,"start",Math.max)},end:{[r]:jS(v,C,"end",Math.min)}})}}return c}function g5(e,t,r,i){if(i)return;let n=t[e],a=r[e];return e==="angle"&&(n=Sh(n),a=Sh(a)),{property:e,start:n,end:a}}function aH(e,t){const{x:r=null,y:i=null}=e||{},n=t.points,a=[];return t.segments.forEach(({start:c,end:s})=>{s=B_(c,s,n);const p=n[c],g=n[s];i!==null?(a.push({x:p.x,y:i}),a.push({x:g.x,y:i})):r!==null&&(a.push({x:r,y:p.y}),a.push({x:r,y:g.y}))}),a}function B_(e,t,r){for(;t>e;t--){const i=r[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function jS(e,t,r,i){return e&&t?i(e[r],t[r]):e?e[r]:t?t[r]:0}function HF(e,t){let r=[],i=!1;return qo(e)?(i=!0,r=e):r=aH(e,t),r.length?new yg({points:r,options:{tension:0},_loop:i,_fullLoop:i}):null}function US(e){return e&&e.fill!==!1}function oH(e,t,r){let n=e[t].fill;const a=[t];let c;if(!r)return n;for(;n!==!1&&a.indexOf(n)===-1;){if(!eu(n))return n;if(c=e[n],!c)return!1;if(c.visible)return n;a.push(n),n=c.fill}return!1}function lH(e,t,r){const i=AH(e);if(On(i))return isNaN(i.value)?!1:i;let n=parseFloat(i);return eu(n)&&Math.floor(n)===n?cH(i[0],t,n,r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function cH(e,t,r,i){return(e==="-"||e==="+")&&(r=t+r),r===t||r<0||r>=i?!1:r}function uH(e,t){let r=null;return e==="start"?r=t.bottom:e==="end"?r=t.top:On(e)?r=t.getPixelForValue(e.value):t.getBasePixel&&(r=t.getBasePixel()),r}function hH(e,t,r){let i;return e==="start"?i=r:e==="end"?i=t.options.reverse?t.min:t.max:On(e)?i=e.value:i=t.getBaseValue(),i}function AH(e){const t=e.options,r=t.fill;let i=Cn(r&&r.target,r);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function dH(e){const{scale:t,index:r,line:i}=e,n=[],a=i.segments,c=i.points,s=fH(t,r);s.push(HF({x:null,y:t.bottom},i));for(let p=0;p<a.length;p++){const g=a[p];for(let v=g.start;v<=g.end;v++)pH(n,c[v],s)}return new yg({points:n,options:{}})}function fH(e,t){const r=[],i=e.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const a=i[n];if(a.index===t)break;a.hidden||r.unshift(a.dataset)}return r}function pH(e,t,r){const i=[];for(let n=0;n<r.length;n++){const a=r[n],{first:c,last:s,point:p}=mH(a,t,"x");if(!(!p||c&&s)){if(c)i.unshift(p);else if(e.push(p),!s)break}}e.push(...i)}function mH(e,t,r){const i=e.interpolate(t,r);if(!i)return{};const n=i[r],a=e.segments,c=e.points;let s=!1,p=!1;for(let g=0;g<a.length;g++){const v=a[g],B=c[v.start][r],F=c[v.end][r];if(hf(n,B,F)){s=n===B,p=n===F;break}}return{first:s,last:p,point:i}}class VF{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,r,i){const{x:n,y:a,radius:c}=this;return r=r||{start:0,end:za},t.arc(n,a,c,r.end,r.start,!0),!i.bounds}interpolate(t){const{x:r,y:i,radius:n}=this,a=t.angle;return{x:r+Math.cos(a)*n,y:i+Math.sin(a)*n,angle:a}}}function gH(e){const{chart:t,fill:r,line:i}=e;if(eu(r))return vH(t,r);if(r==="stack")return dH(e);if(r==="shape")return!0;const n=xH(e);return n instanceof VF?n:HF(n,i)}function vH(e,t){const r=e.getDatasetMeta(t);return r&&e.isDatasetVisible(t)?r.dataset:null}function xH(e){return(e.scale||{}).getPointPositionForValue?_H(e):yH(e)}function yH(e){const{scale:t={},fill:r}=e,i=uH(r,t);if(eu(i)){const n=t.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}function _H(e){const{scale:t,fill:r}=e,i=t.options,n=t.getLabels().length,a=i.reverse?t.max:t.min,c=hH(r,t,a),s=[];if(i.grid.circular){const p=t.getPointPositionForValue(0,a);return new VF({x:p.x,y:p.y,radius:t.getDistanceFromCenterForValue(c)})}for(let p=0;p<n;++p)s.push(t.getPointPositionForValue(p,c));return s}function Rb(e,t,r){const i=gH(t),{chart:n,index:a,line:c,scale:s,axis:p}=t,g=c.options,v=g.fill,B=g.backgroundColor,{above:F=B,below:C=B}=v||{},L=n.getDatasetMeta(a),P=EF(n,L);i&&c.points.length&&(y_(e,r),bH(e,{line:c,target:i,above:F,below:C,area:r,scale:s,axis:p,clip:P}),__(e))}function bH(e,t){const{line:r,target:i,above:n,below:a,area:c,scale:s,clip:p}=t,g=r._loop?"angle":t.axis;e.save();let v=a;a!==n&&(g==="x"?(OS(e,i,c.top),Db(e,{line:r,target:i,color:n,scale:s,property:g,clip:p}),e.restore(),e.save(),OS(e,i,c.bottom)):g==="y"&&(zS(e,i,c.left),Db(e,{line:r,target:i,color:a,scale:s,property:g,clip:p}),e.restore(),e.save(),zS(e,i,c.right),v=n)),Db(e,{line:r,target:i,color:v,scale:s,property:g,clip:p}),e.restore()}function OS(e,t,r){const{segments:i,points:n}=t;let a=!0,c=!1;e.beginPath();for(const s of i){const{start:p,end:g}=s,v=n[p],B=n[B_(p,g,n)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(v.x,r),e.lineTo(v.x,v.y)),c=!!t.pathSegment(e,s,{move:c}),c?e.closePath():e.lineTo(B.x,r)}e.lineTo(t.first().x,r),e.closePath(),e.clip()}function zS(e,t,r){const{segments:i,points:n}=t;let a=!0,c=!1;e.beginPath();for(const s of i){const{start:p,end:g}=s,v=n[p],B=n[B_(p,g,n)];a?(e.moveTo(v.x,v.y),a=!1):(e.lineTo(r,v.y),e.lineTo(v.x,v.y)),c=!!t.pathSegment(e,s,{move:c}),c?e.closePath():e.lineTo(r,B.y)}e.lineTo(r,t.first().y),e.closePath(),e.clip()}function Db(e,t){const{line:r,target:i,property:n,color:a,scale:c,clip:s}=t,p=sH(r,i,n);for(const{source:g,target:v,start:B,end:F}of p){const{style:{backgroundColor:C=a}={}}=g,L=i!==!0;e.save(),e.fillStyle=C,wH(e,c,s,L&&g5(n,B,F)),e.beginPath();const P=!!r.pathSegment(e,g);let D;if(L){P?e.closePath():QS(e,i,F,n);const j=!!i.pathSegment(e,v,{move:P,reverse:!0});D=P&&j,D||QS(e,i,B,n)}e.closePath(),e.fill(D?"evenodd":"nonzero"),e.restore()}}function wH(e,t,r,i){const n=t.chart.chartArea,{property:a,start:c,end:s}=i||{};if(a==="x"||a==="y"){let p,g,v,B;a==="x"?(p=c,g=n.top,v=s,B=n.bottom):(p=n.left,g=c,v=n.right,B=s),e.beginPath(),r&&(p=Math.max(p,r.left),v=Math.min(v,r.right),g=Math.max(g,r.top),B=Math.min(B,r.bottom)),e.rect(p,g,v-p,B-g),e.clip()}}function QS(e,t,r,i){const n=t.interpolate(r,i);n&&e.lineTo(n.x,n.y)}var GF={id:"filler",afterDatasetsUpdate(e,t,r){const i=(e.data.datasets||[]).length,n=[];let a,c,s,p;for(c=0;c<i;++c)a=e.getDatasetMeta(c),s=a.dataset,p=null,s&&s.options&&s instanceof yg&&(p={visible:e.isDatasetVisible(c),index:c,fill:lH(s,c,i),chart:e,axis:a.controller.options.indexAxis,scale:a.vScale,line:s}),a.$filler=p,n.push(p);for(c=0;c<i;++c)p=n[c],!(!p||p.fill===!1)&&(p.fill=oH(n,c,r.propagate))},beforeDraw(e,t,r){const i=r.drawTime==="beforeDraw",n=e.getSortedVisibleDatasetMetas(),a=e.chartArea;for(let c=n.length-1;c>=0;--c){const s=n[c].$filler;s&&(s.line.updateControlPoints(a,s.axis),i&&s.fill&&Rb(e.ctx,s,a))}},beforeDatasetsDraw(e,t,r){if(r.drawTime!=="beforeDatasetsDraw")return;const i=e.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const a=i[n].$filler;US(a)&&Rb(e.ctx,a,e.chartArea)}},beforeDatasetDraw(e,t,r){const i=t.meta.$filler;!US(i)||r.drawTime!=="beforeDatasetDraw"||Rb(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const HS=(e,t)=>{let{boxHeight:r=t,boxWidth:i=t}=e;return e.usePointStyle&&(r=Math.min(r,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(t,r)}},CH=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class VS extends Cf{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,i){this.maxWidth=t,this.maxHeight=r,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=ga(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(i=>t.filter(i,this.chart.data))),t.sort&&(r=r.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,n=Zc(i.font),a=n.size,c=this._computeTitleHeight(),{boxWidth:s,itemHeight:p}=HS(i,a);let g,v;r.font=n.string,this.isHorizontal()?(g=this.maxWidth,v=this._fitRows(c,a,s,p)+10):(v=this.maxHeight,g=this._fitCols(c,n,s,p)+10),this.width=Math.min(g,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,r,i,n){const{ctx:a,maxWidth:c,options:{labels:{padding:s}}}=this,p=this.legendHitBoxes=[],g=this.lineWidths=[0],v=n+s;let B=t;a.textAlign="left",a.textBaseline="middle";let F=-1,C=-v;return this.legendItems.forEach((L,P)=>{const D=i+r/2+a.measureText(L.text).width;(P===0||g[g.length-1]+D+2*s>c)&&(B+=v,g[g.length-(P>0?0:1)]=0,C+=v,F++),p[P]={left:0,top:C,row:F,width:D,height:n},g[g.length-1]+=D+s}),B}_fitCols(t,r,i,n){const{ctx:a,maxHeight:c,options:{labels:{padding:s}}}=this,p=this.legendHitBoxes=[],g=this.columnSizes=[],v=c-t;let B=s,F=0,C=0,L=0,P=0;return this.legendItems.forEach((D,j)=>{const{itemWidth:q,itemHeight:H}=BH(i,r,a,D,n);j>0&&C+H+2*s>v&&(B+=F+s,g.push({width:F,height:C}),L+=F+s,P++,F=C=0),p[j]={left:L,top:C,col:P,width:q,height:H},F=Math.max(F,q),C+=H+s}),B+=F,g.push({width:F,height:C}),B}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:i,labels:{padding:n},rtl:a}}=this,c=Xm(a,this.left,this.width);if(this.isHorizontal()){let s=0,p=Gc(i,this.left+n,this.right-this.lineWidths[s]);for(const g of r)s!==g.row&&(s=g.row,p=Gc(i,this.left+n,this.right-this.lineWidths[s])),g.top+=this.top+t+n,g.left=c.leftForLtr(c.x(p),g.width),p+=g.width+n}else{let s=0,p=Gc(i,this.top+t+n,this.bottom-this.columnSizes[s].height);for(const g of r)g.col!==s&&(s=g.col,p=Gc(i,this.top+t+n,this.bottom-this.columnSizes[s].height)),g.top=p,g.left+=this.left+n,g.left=c.leftForLtr(c.x(g.left),g.width),p+=g.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;y_(t,this),this._draw(),__(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:i,ctx:n}=this,{align:a,labels:c}=t,s=So.color,p=Xm(t.rtl,this.left,this.width),g=Zc(c.font),{padding:v}=c,B=g.size,F=B/2;let C;this.drawTitle(),n.textAlign=p.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=g.string;const{boxWidth:L,boxHeight:P,itemHeight:D}=HS(c,B),j=function(ne,Z,le){if(isNaN(L)||L<=0||isNaN(P)||P<0)return;n.save();const J=Cn(le.lineWidth,1);if(n.fillStyle=Cn(le.fillStyle,s),n.lineCap=Cn(le.lineCap,"butt"),n.lineDashOffset=Cn(le.lineDashOffset,0),n.lineJoin=Cn(le.lineJoin,"miter"),n.lineWidth=J,n.strokeStyle=Cn(le.strokeStyle,s),n.setLineDash(Cn(le.lineDash,[])),c.usePointStyle){const ce={radius:P*Math.SQRT2/2,pointStyle:le.pointStyle,rotation:le.rotation,borderWidth:J},te=p.xPlus(ne,L/2),K=Z+F;pF(n,ce,te,K,c.pointStyleWidth&&L)}else{const ce=Z+Math.max((B-P)/2,0),te=p.leftForLtr(ne,L),K=$m(le.borderRadius);n.beginPath(),Object.values(K).some(me=>me!==0)?F2(n,{x:te,y:ce,w:L,h:P,radius:K}):n.rect(te,ce,L,P),n.fill(),J!==0&&n.stroke()}n.restore()},q=function(ne,Z,le){bv(n,le.text,ne,Z+D/2,g,{strikethrough:le.hidden,textAlign:p.textAlign(le.textAlign)})},H=this.isHorizontal(),ee=this._computeTitleHeight();H?C={x:Gc(a,this.left+v,this.right-i[0]),y:this.top+v+ee,line:0}:C={x:this.left+v,y:Gc(a,this.top+ee+v,this.bottom-r[0].height),line:0},bF(this.ctx,t.textDirection);const G=D+v;this.legendItems.forEach((ne,Z)=>{n.strokeStyle=ne.fontColor,n.fillStyle=ne.fontColor;const le=n.measureText(ne.text).width,J=p.textAlign(ne.textAlign||(ne.textAlign=c.textAlign)),ce=L+F+le;let te=C.x,K=C.y;p.setWidth(this.width),H?Z>0&&te+ce+v>this.right&&(K=C.y+=G,C.line++,te=C.x=Gc(a,this.left+v,this.right-i[C.line])):Z>0&&K+G>this.bottom&&(te=C.x=te+r[C.line].width+v,C.line++,K=C.y=Gc(a,this.top+ee+v,this.bottom-r[C.line].height));const me=p.x(te);if(j(me,K,ne),te=J7(J,te+L+F,H?te+ce:this.right,t.rtl),q(p.x(te),K,ne),H)C.x+=ce+v;else if(typeof ne.text!="string"){const we=g.lineHeight;C.y+=qF(ne,we)+v}else C.y+=G}),wF(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,i=Zc(r.font),n=sA(r.padding);if(!r.display)return;const a=Xm(t.rtl,this.left,this.width),c=this.ctx,s=r.position,p=i.size/2,g=n.top+p;let v,B=this.left,F=this.width;if(this.isHorizontal())F=Math.max(...this.lineWidths),v=this.top+g,B=Gc(t.align,B,this.right-F);else{const L=this.columnSizes.reduce((P,D)=>Math.max(P,D.height),0);v=g+Gc(t.align,this.top,this.bottom-L-t.labels.padding-this._computeTitleHeight())}const C=Gc(s,B,B+F);c.textAlign=a.textAlign(j4(s)),c.textBaseline="middle",c.strokeStyle=r.color,c.fillStyle=r.color,c.font=i.string,bv(c,r.text,C,v,i)}_computeTitleHeight(){const t=this.options.title,r=Zc(t.font),i=sA(t.padding);return t.display?r.lineHeight+i.height:0}_getLegendItemAt(t,r){let i,n,a;if(hf(t,this.left,this.right)&&hf(r,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(n=a[i],hf(t,n.left,n.left+n.width)&&hf(r,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(t){const r=this.options;if(!TH(t.type,r))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,a=CH(n,i);n&&!a&&ga(r.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!a&&ga(r.onHover,[t,i,this],this)}else i&&ga(r.onClick,[t,i,this],this)}}function BH(e,t,r,i,n){const a=SH(i,e,t,r),c=EH(n,i,t.lineHeight);return{itemWidth:a,itemHeight:c}}function SH(e,t,r,i){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((a,c)=>a.length>c.length?a:c)),t+r.size/2+i.measureText(n).width}function EH(e,t,r){let i=e;return typeof t.text!="string"&&(i=qF(t,r)),i}function qF(e,t){const r=e.text?e.text.length:0;return t*r}function TH(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Z4={id:"legend",_element:VS,start(e,t,r){const i=e.legend=new VS({ctx:e.ctx,options:r,chart:e});rA.configure(e,i,r),rA.addBox(e,i)},stop(e){rA.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const i=e.legend;rA.configure(e,i,r),i.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const i=t.datasetIndex,n=r.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:i,textAlign:n,color:a,useBorderRadius:c,borderRadius:s}}=e.legend.options;return e._getSortedDatasetMetas().map(p=>{const g=p.controller.getStyle(r?0:void 0),v=sA(g.borderWidth);return{text:t[p.index].label,fillStyle:g.backgroundColor,fontColor:a,hidden:!p.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(v.width+v.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:n||g.textAlign,borderRadius:c&&(s||g.borderRadius),datasetIndex:p.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class KF extends Cf{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const n=qo(i.text)?i.text.length:1;this._padding=sA(i.padding);const a=n*Zc(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:i,bottom:n,right:a,options:c}=this,s=c.align;let p=0,g,v,B;return this.isHorizontal()?(v=Gc(s,i,a),B=r+t,g=a-i):(c.position==="left"?(v=i+t,B=Gc(s,n,r),p=Is*-.5):(v=a-t,B=Gc(s,r,n),p=Is*.5),g=n-r),{titleX:v,titleY:B,maxWidth:g,rotation:p}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const i=Zc(r.font),a=i.lineHeight/2+this._padding.top,{titleX:c,titleY:s,maxWidth:p,rotation:g}=this._drawArgs(a);bv(t,r.text,0,0,i,{color:r.color,maxWidth:p,rotation:g,textAlign:j4(r.align),textBaseline:"middle",translation:[c,s]})}}function kH(e,t){const r=new KF({ctx:e.ctx,options:t,chart:e});rA.configure(e,r,t),rA.addBox(e,r),e.titleBlock=r}var Y4={id:"title",_element:KF,start(e,t,r){kH(e,r)},stop(e){const t=e.titleBlock;rA.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const i=e.titleBlock;rA.configure(e,i,r),i.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const M1={average(e){if(!e.length)return!1;let t,r,i=new Set,n=0,a=0;for(t=0,r=e.length;t<r;++t){const s=e[t].element;if(s&&s.hasValue()){const p=s.tooltipPosition();i.add(p.x),n+=p.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((s,p)=>s+p)/i.size,y:n/a}},nearest(e,t){if(!e.length)return!1;let r=t.x,i=t.y,n=Number.POSITIVE_INFINITY,a,c,s;for(a=0,c=e.length;a<c;++a){const p=e[a].element;if(p&&p.hasValue()){const g=p.getCenterPoint(),v=h5(t,g);v<n&&(n=v,s=p)}}if(s){const p=s.tooltipPosition();r=p.x,i=p.y}return{x:r,y:i}}};function vd(e,t){return t&&(qo(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function sf(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function FH(e,t){const{element:r,datasetIndex:i,index:n}=t,a=e.getDatasetMeta(i).controller,{label:c,value:s}=a.getLabelAndValue(n);return{chart:e,label:c,parsed:a.getParsed(n),raw:e.data.datasets[i].data[n],formattedValue:s,dataset:a.getDataset(),dataIndex:n,datasetIndex:i,element:r}}function GS(e,t){const r=e.chart.ctx,{body:i,footer:n,title:a}=e,{boxWidth:c,boxHeight:s}=t,p=Zc(t.bodyFont),g=Zc(t.titleFont),v=Zc(t.footerFont),B=a.length,F=n.length,C=i.length,L=sA(t.padding);let P=L.height,D=0,j=i.reduce((ee,G)=>ee+G.before.length+G.lines.length+G.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,B&&(P+=B*g.lineHeight+(B-1)*t.titleSpacing+t.titleMarginBottom),j){const ee=t.displayColors?Math.max(s,p.lineHeight):p.lineHeight;P+=C*ee+(j-C)*p.lineHeight+(j-1)*t.bodySpacing}F&&(P+=t.footerMarginTop+F*v.lineHeight+(F-1)*t.footerSpacing);let q=0;const H=function(ee){D=Math.max(D,r.measureText(ee).width+q)};return r.save(),r.font=g.string,Fs(e.title,H),r.font=p.string,Fs(e.beforeBody.concat(e.afterBody),H),q=t.displayColors?c+2+t.boxPadding:0,Fs(i,ee=>{Fs(ee.before,H),Fs(ee.lines,H),Fs(ee.after,H)}),q=0,r.font=v.string,Fs(e.footer,H),r.restore(),D+=L.width,{width:D,height:P}}function NH(e,t){const{y:r,height:i}=t;return r<i/2?"top":r>e.height-i/2?"bottom":"center"}function IH(e,t,r,i){const{x:n,width:a}=i,c=r.caretSize+r.caretPadding;if(e==="left"&&n+a+c>t.width||e==="right"&&n-a-c<0)return!0}function LH(e,t,r,i){const{x:n,width:a}=r,{width:c,chartArea:{left:s,right:p}}=e;let g="center";return i==="center"?g=n<=(s+p)/2?"left":"right":n<=a/2?g="left":n>=c-a/2&&(g="right"),IH(g,e,t,r)&&(g="center"),g}function qS(e,t,r){const i=r.yAlign||t.yAlign||NH(e,r);return{xAlign:r.xAlign||t.xAlign||LH(e,t,r,i),yAlign:i}}function MH(e,t){let{x:r,width:i}=e;return t==="right"?r-=i:t==="center"&&(r-=i/2),r}function PH(e,t,r){let{y:i,height:n}=e;return t==="top"?i+=r:t==="bottom"?i-=n+r:i-=n/2,i}function KS(e,t,r,i){const{caretSize:n,caretPadding:a,cornerRadius:c}=e,{xAlign:s,yAlign:p}=r,g=n+a,{topLeft:v,topRight:B,bottomLeft:F,bottomRight:C}=$m(c);let L=MH(t,s);const P=PH(t,p,g);return p==="center"?s==="left"?L+=g:s==="right"&&(L-=g):s==="left"?L-=Math.max(v,F)+n:s==="right"&&(L+=Math.max(B,C)+n),{x:Xc(L,0,i.width-t.width),y:Xc(P,0,i.height-t.height)}}function ly(e,t,r){const i=sA(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-i.right:e.x+i.left}function WS(e){return vd([],sf(e))}function RH(e,t,r){return I0(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function $S(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const WF={beforeTitle:Zd,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,i=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return r[t.dataIndex]}return""},afterTitle:Zd,beforeBody:Zd,beforeLabel:Zd,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return xs(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Zd,afterBody:Zd,beforeFooter:Zd,footer:Zd,afterFooter:Zd};function Ju(e,t,r,i){const n=e[t].call(r,i);return typeof n>"u"?WF[t].call(r,i):n}class XS extends Cf{static positioners=M1;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&r.options.animation&&i.animations,a=new TF(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=RH(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,n=Ju(i,"beforeTitle",this,t),a=Ju(i,"title",this,t),c=Ju(i,"afterTitle",this,t);let s=[];return s=vd(s,sf(n)),s=vd(s,sf(a)),s=vd(s,sf(c)),s}getBeforeBody(t,r){return WS(Ju(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:i}=r,n=[];return Fs(t,a=>{const c={before:[],lines:[],after:[]},s=$S(i,a);vd(c.before,sf(Ju(s,"beforeLabel",this,a))),vd(c.lines,Ju(s,"label",this,a)),vd(c.after,sf(Ju(s,"afterLabel",this,a))),n.push(c)}),n}getAfterBody(t,r){return WS(Ju(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:i}=r,n=Ju(i,"beforeFooter",this,t),a=Ju(i,"footer",this,t),c=Ju(i,"afterFooter",this,t);let s=[];return s=vd(s,sf(n)),s=vd(s,sf(a)),s=vd(s,sf(c)),s}_createItems(t){const r=this._active,i=this.chart.data,n=[],a=[],c=[];let s=[],p,g;for(p=0,g=r.length;p<g;++p)s.push(FH(this.chart,r[p]));return t.filter&&(s=s.filter((v,B,F)=>t.filter(v,B,F,i))),t.itemSort&&(s=s.sort((v,B)=>t.itemSort(v,B,i))),Fs(s,v=>{const B=$S(t.callbacks,v);n.push(Ju(B,"labelColor",this,v)),a.push(Ju(B,"labelPointStyle",this,v)),c.push(Ju(B,"labelTextColor",this,v))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=c,this.dataPoints=s,s}update(t,r){const i=this.options.setContext(this.getContext()),n=this._active;let a,c=[];if(!n.length)this.opacity!==0&&(a={opacity:0});else{const s=M1[i.position].call(this,n,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const p=this._size=GS(this,i),g=Object.assign({},s,p),v=qS(this.chart,i,g),B=KS(i,g,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,a={opacity:1,x:B.x,y:B.y,width:p.width,height:p.height,caretX:s.x,caretY:s.y}}this._tooltipItems=c,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,n){const a=this.getCaretPosition(t,i,n);r.lineTo(a.x1,a.y1),r.lineTo(a.x2,a.y2),r.lineTo(a.x3,a.y3)}getCaretPosition(t,r,i){const{xAlign:n,yAlign:a}=this,{caretSize:c,cornerRadius:s}=i,{topLeft:p,topRight:g,bottomLeft:v,bottomRight:B}=$m(s),{x:F,y:C}=t,{width:L,height:P}=r;let D,j,q,H,ee,G;return a==="center"?(ee=C+P/2,n==="left"?(D=F,j=D-c,H=ee+c,G=ee-c):(D=F+L,j=D+c,H=ee-c,G=ee+c),q=D):(n==="left"?j=F+Math.max(p,v)+c:n==="right"?j=F+L-Math.max(g,B)-c:j=this.caretX,a==="top"?(H=C,ee=H-c,D=j-c,q=j+c):(H=C+P,ee=H+c,D=j+c,q=j-c),G=H),{x1:D,x2:j,x3:q,y1:H,y2:ee,y3:G}}drawTitle(t,r,i){const n=this.title,a=n.length;let c,s,p;if(a){const g=Xm(i.rtl,this.x,this.width);for(t.x=ly(this,i.titleAlign,i),r.textAlign=g.textAlign(i.titleAlign),r.textBaseline="middle",c=Zc(i.titleFont),s=i.titleSpacing,r.fillStyle=i.titleColor,r.font=c.string,p=0;p<a;++p)r.fillText(n[p],g.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+s,p+1===a&&(t.y+=i.titleMarginBottom-s)}}_drawColorBox(t,r,i,n,a){const c=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:p,boxWidth:g}=a,v=Zc(a.bodyFont),B=ly(this,"left",a),F=n.x(B),C=p<v.lineHeight?(v.lineHeight-p)/2:0,L=r.y+C;if(a.usePointStyle){const P={radius:Math.min(g,p)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},D=n.leftForLtr(F,g)+g/2,j=L+p/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,d5(t,P,D,j),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,d5(t,P,D,j)}else{t.lineWidth=On(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const P=n.leftForLtr(F,g),D=n.leftForLtr(n.xPlus(F,1),g-2),j=$m(c.borderRadius);Object.values(j).some(q=>q!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,F2(t,{x:P,y:L,w:g,h:p,radius:j}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),F2(t,{x:D,y:L+1,w:g-2,h:p-2,radius:j}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(P,L,g,p),t.strokeRect(P,L,g,p),t.fillStyle=c.backgroundColor,t.fillRect(D,L+1,g-2,p-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:n}=this,{bodySpacing:a,bodyAlign:c,displayColors:s,boxHeight:p,boxWidth:g,boxPadding:v}=i,B=Zc(i.bodyFont);let F=B.lineHeight,C=0;const L=Xm(i.rtl,this.x,this.width),P=function(le){r.fillText(le,L.x(t.x+C),t.y+F/2),t.y+=F+a},D=L.textAlign(c);let j,q,H,ee,G,ne,Z;for(r.textAlign=c,r.textBaseline="middle",r.font=B.string,t.x=ly(this,D,i),r.fillStyle=i.bodyColor,Fs(this.beforeBody,P),C=s&&D!=="right"?c==="center"?g/2+v:g+2+v:0,ee=0,ne=n.length;ee<ne;++ee){for(j=n[ee],q=this.labelTextColors[ee],r.fillStyle=q,Fs(j.before,P),H=j.lines,s&&H.length&&(this._drawColorBox(r,t,ee,L,i),F=Math.max(B.lineHeight,p)),G=0,Z=H.length;G<Z;++G)P(H[G]),F=B.lineHeight;Fs(j.after,P)}C=0,F=B.lineHeight,Fs(this.afterBody,P),t.y-=a}drawFooter(t,r,i){const n=this.footer,a=n.length;let c,s;if(a){const p=Xm(i.rtl,this.x,this.width);for(t.x=ly(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=p.textAlign(i.footerAlign),r.textBaseline="middle",c=Zc(i.footerFont),r.fillStyle=i.footerColor,r.font=c.string,s=0;s<a;++s)r.fillText(n[s],p.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,r,i,n){const{xAlign:a,yAlign:c}=this,{x:s,y:p}=t,{width:g,height:v}=i,{topLeft:B,topRight:F,bottomLeft:C,bottomRight:L}=$m(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(s+B,p),c==="top"&&this.drawCaret(t,r,i,n),r.lineTo(s+g-F,p),r.quadraticCurveTo(s+g,p,s+g,p+F),c==="center"&&a==="right"&&this.drawCaret(t,r,i,n),r.lineTo(s+g,p+v-L),r.quadraticCurveTo(s+g,p+v,s+g-L,p+v),c==="bottom"&&this.drawCaret(t,r,i,n),r.lineTo(s+C,p+v),r.quadraticCurveTo(s,p+v,s,p+v-C),c==="center"&&a==="left"&&this.drawCaret(t,r,i,n),r.lineTo(s,p+B),r.quadraticCurveTo(s,p,s+B,p),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,n=i&&i.x,a=i&&i.y;if(n||a){const c=M1[t.position].call(this,this._active,this._eventPosition);if(!c)return;const s=this._size=GS(this,t),p=Object.assign({},c,this._size),g=qS(r,t,p),v=KS(t,p,g,r);(n._to!==v.x||a._to!==v.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=s.width,this.height=s.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,v))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=sA(r.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&s&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,n,r),bF(t,r.textDirection),a.y+=c.top,this.drawTitle(a,t,r),this.drawBody(a,t,r),this.drawFooter(a,t,r),wF(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,n=t.map(({datasetIndex:s,index:p})=>{const g=this.chart.getDatasetMeta(s);if(!g)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:g.data[p],index:p}}),a=!E2(i,n),c=this._positionChanged(n,r);(a||c)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],c=this._getActiveElements(t,a,r,i),s=this._positionChanged(c,t),p=r||!E2(c,a)||s;return p&&(this._active=c,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),p}_getActiveElements(t,r,i,n){const a=this.options;if(t.type==="mouseout")return[];if(!n)return r.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&c.reverse(),c}_positionChanged(t,r){const{caretX:i,caretY:n,options:a}=this,c=M1[a.position].call(this,t,r);return c!==!1&&(i!==c.x||n!==c.y)}}var J4={id:"tooltip",_element:XS,positioners:M1,afterInit(e,t,r){r&&(e.tooltip=new XS({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:WF},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const DH=(e,t,r,i)=>(typeof t=="string"?(r=e.push(t)-1,i.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function jH(e,t,r,i){const n=e.indexOf(t);if(n===-1)return DH(e,t,r,i);const a=e.lastIndexOf(t);return n!==a?r:n}const UH=(e,t)=>e===null?null:Xc(Math.round(e),0,t);function ZS(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class eC extends vg{static id="category";static defaults={ticks:{callback:ZS}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:n,label:a}of r)i[n]===a&&i.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(xs(t))return null;const i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:jH(i,t,Cn(r,t),this._addedLabels),UH(r,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,r=this.max,i=this.options.offset,n=[];let a=this.getLabels();a=t===0&&r===a.length-1?a:a.slice(t,r+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=r;c++)n.push({value:c});return n}getLabelForValue(t){return ZS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function OH(e,t){const r=[],{bounds:n,step:a,min:c,max:s,precision:p,count:g,maxTicks:v,maxDigits:B,includeBounds:F}=e,C=a||1,L=v-1,{min:P,max:D}=t,j=!xs(c),q=!xs(s),H=!xs(g),ee=(D-P)/(B+1);let G=KB((D-P)/L/C)*C,ne,Z,le,J;if(G<1e-14&&!j&&!q)return[{value:P},{value:D}];J=Math.ceil(D/G)-Math.floor(P/G),J>L&&(G=KB(J*G/L/C)*C),xs(p)||(ne=Math.pow(10,p),G=Math.ceil(G*ne)/ne),n==="ticks"?(Z=Math.floor(P/G)*G,le=Math.ceil(D/G)*G):(Z=P,le=D),j&&q&&a&&V7((s-c)/a,G/1e3)?(J=Math.round(Math.min((s-c)/G,v)),G=(s-c)/J,Z=c,le=s):H?(Z=j?c:Z,le=q?s:le,J=g-1,G=(le-Z)/J):(J=(le-Z)/G,K1(J,Math.round(J),G/1e3)?J=Math.round(J):J=Math.ceil(J));const ce=Math.max(WB(G),WB(Z));ne=Math.pow(10,xs(p)?ce:p),Z=Math.round(Z*ne)/ne,le=Math.round(le*ne)/ne;let te=0;for(j&&(F&&Z!==c?(r.push({value:c}),Z<c&&te++,K1(Math.round((Z+te*G)*ne)/ne,c,YS(c,ee,e))&&te++):Z<c&&te++);te<J;++te){const K=Math.round((Z+te*G)*ne)/ne;if(q&&K>s)break;r.push({value:K})}return q&&F&&le!==s?r.length&&K1(r[r.length-1].value,s,YS(s,ee,e))?r[r.length-1].value=s:r.push({value:s}):(!q||le===s)&&r.push({value:le}),r}function YS(e,t,{horizontal:r,minRotation:i}){const n=uf(i),a=(r?Math.sin(n):Math.cos(n))||.001,c=.75*t*(""+e).length;return Math.min(t/a,c)}class zH extends vg{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return xs(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:i}=this.getUserBounds();let{min:n,max:a}=this;const c=p=>n=r?n:p,s=p=>a=i?a:p;if(t){const p=Cd(n),g=Cd(a);p<0&&g<0?s(0):p>0&&g>0&&c(0)}if(n===a){let p=a===0?1:Math.abs(a*.05);s(a+p),t||c(n-p)}this.min=n,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:i}=t,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},a=this._range||this,c=OH(n,a);return t.bounds==="ticks"&&G7(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let r=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-r)/Math.max(t.length-1,1)/2;r-=n,i+=n}this._startValue=r,this._endValue=i,this._valueRange=i-r}getLabelForValue(t){return O4(t,this.chart.options.locale,this.options.ticks.format)}}class tC extends zH{static id="linear";static defaults={ticks:{callback:fF.formatters.numeric}};determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=eu(t)?t:0,this.max=eu(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,i=uf(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,a.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const S_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rh=Object.keys(S_);function JS(e,t){return e-t}function e3(e,t){if(xs(t))return null;const r=e._adapter,{parser:i,round:n,isoWeekday:a}=e._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),eu(c)||(c=typeof i=="string"?r.parse(c,i):r.parse(c)),c===null?null:(n&&(c=n==="week"&&(xv(a)||a===!0)?r.startOf(c,"isoWeek",a):r.startOf(c,n)),+c)}function t3(e,t,r,i){const n=rh.length;for(let a=rh.indexOf(e);a<n-1;++a){const c=S_[rh[a]],s=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((r-t)/(s*c.size))<=i)return rh[a]}return rh[n-1]}function QH(e,t,r,i,n){for(let a=rh.length-1;a>=rh.indexOf(r);a--){const c=rh[a];if(S_[c].common&&e._adapter.diff(n,i,c)>=t-1)return c}return rh[r?rh.indexOf(r):0]}function HH(e){for(let t=rh.indexOf(e)+1,r=rh.length;t<r;++t)if(S_[rh[t]].common)return rh[t]}function r3(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:i,hi:n}=D4(r,t),a=r[i]>=t?r[i]:r[n];e[a]=!0}}function VH(e,t,r,i){const n=e._adapter,a=+n.startOf(t[0].value,i),c=t[t.length-1].value;let s,p;for(s=a;s<=c;s=+n.add(s,1,i))p=r[s],p>=0&&(t[p].major=!0);return t}function i3(e,t,r){const i=[],n={},a=t.length;let c,s;for(c=0;c<a;++c)s=t[c],n[s]=c,i.push({value:s,major:!1});return a===0||!r?i:VH(e,i,n,r)}class n3 extends vg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const i=t.time||(t.time={}),n=this._adapter=new Fz._date(t.adapters.date);n.init(r),q1(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:e3(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:n,max:a,minDefined:c,maxDefined:s}=this.getUserBounds();function p(g){!c&&!isNaN(g.min)&&(n=Math.min(n,g.min)),!s&&!isNaN(g.max)&&(a=Math.max(a,g.max))}(!c||!s)&&(p(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&p(this.getMinMax(!1))),n=eu(n)&&!isNaN(n)?n:+r.startOf(Date.now(),i),a=eu(a)&&!isNaN(a)?a:+r.endOf(Date.now(),i)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,c=this.max,s=X7(n,a,c);return this._unit=r.unit||(i.autoSkip?t3(r.minUnit,this.min,this.max,this._getLabelCapacity(a)):QH(this,s.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:HH(this._unit),this.initOffsets(n),t.reverse&&s.reverse(),i3(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,n,a;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?r=1-n:r=(this.getDecimalForValue(t[1])-n)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;r=Xc(r,0,c),i=Xc(i,0,c),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,n=this.options,a=n.time,c=a.unit||t3(a.minUnit,r,i,this._getLabelCapacity(r)),s=Cn(n.ticks.stepSize,1),p=c==="week"?a.isoWeekday:!1,g=xv(p)||p===!0,v={};let B=r,F,C;if(g&&(B=+t.startOf(B,"isoWeek",p)),B=+t.startOf(B,g?"day":c),t.diff(i,r,c)>1e5*s)throw new Error(r+" and "+i+" are too far apart with stepSize of "+s+" "+c);const L=n.ticks.source==="data"&&this.getDataTimestamps();for(F=B,C=0;F<i;F=+t.add(F,s,c),C++)r3(v,F,L);return(F===i||n.bounds==="ticks"||C===1)&&r3(v,F,L),Object.keys(v).sort(JS).map(P=>+P)}getLabelForValue(t){const r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){const n=this.options.time.displayFormats,a=this._unit,c=r||n[a];return this._adapter.format(t,c)}_tickFormatFunction(t,r,i,n){const a=this.options,c=a.ticks.callback;if(c)return ga(c,[t,r,i],this);const s=a.time.displayFormats,p=this._unit,g=this._majorUnit,v=p&&s[p],B=g&&s[g],F=i[r],C=g&&B&&F&&F.major;return this._adapter.format(t,n||(C?B:v))}generateTickLabels(t){let r,i,n;for(r=0,i=t.length;r<i;++r)n=t[r],n.label=this._tickFormatFunction(n.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,n=uf(this.isHorizontal()?r.maxRotation:r.minRotation),a=Math.cos(n),c=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:i*a+s*c,h:i*c+s*a}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,n=i[r.unit]||i.millisecond,a=this._tickFormatFunction(t,0,i3(this,[t],this._majorUnit),n),c=this._getLabelSize(a),s=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return s>0?s:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,i=n.length;r<i;++r)t=t.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const n=this.getLabels();for(r=0,i=n.length;r<i;++r)t.push(e3(this,n[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return hF(t.sort(JS))}}function cy(e,t,r){let i=0,n=e.length-1,a,c,s,p;r?(t>=e[i].pos&&t<=e[n].pos&&({lo:i,hi:n}=h0(e,"pos",t)),{pos:a,time:s}=e[i],{pos:c,time:p}=e[n]):(t>=e[i].time&&t<=e[n].time&&({lo:i,hi:n}=h0(e,"time",t)),{time:a,pos:s}=e[i],{time:c,pos:p}=e[n]);const g=c-a;return g?s+(p-s)*(t-a)/g:s}class Zle extends n3{static id="timeseries";static defaults=n3.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=cy(r,this.min),this._tableRange=cy(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:i}=this,n=[],a=[];let c,s,p,g,v;for(c=0,s=t.length;c<s;++c)g=t[c],g>=r&&g<=i&&n.push(g);if(n.length<2)return[{time:r,pos:0},{time:i,pos:1}];for(c=0,s=n.length;c<s;++c)v=n[c+1],p=n[c-1],g=n[c],Math.round((v+p)/2)!==g&&a.push({time:g,pos:c/(s-1)});return a}_generate(){const t=this.min,r=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(r)||i.length===1)&&i.push(r),i.sort((n,a)=>n-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),i=this.getLabelTimestamps();return r.length&&i.length?t=this.normalize(r.concat(i)):t=r.length?r:i,t=this._cache.all=t,t}getDecimalForValue(t){return(cy(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return cy(this._table,i*this._tableRange+this._minPos,!0)}}const $F="label";function s3(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function GH(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function XF(e,t){e.labels=t}function ZF(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$F;const i=[];e.datasets=t.map(n=>{const a=e.datasets.find(c=>c[r]===n[r]);return!a||!n.data||i.includes(a)?{...n}:(i.push(a),Object.assign(a,n),a)})}function qH(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$F;const r={labels:[],datasets:[]};return XF(r,e.labels),ZF(r,e.datasets,t),r}function KH(e,t){const{height:r=150,width:i=300,redraw:n=!1,datasetIdKey:a,type:c,data:s,options:p,plugins:g=[],fallbackContent:v,updateMode:B,...F}=e,C=xe.useRef(null),L=xe.useRef(null),P=()=>{C.current&&(L.current=new xg(C.current,{type:c,data:qH(s,a),options:p&&{...p},plugins:g}),s3(t,L.current))},D=()=>{s3(t,null),L.current&&(L.current.destroy(),L.current=null)};return xe.useEffect(()=>{!n&&L.current&&p&&GH(L.current,p)},[n,p]),xe.useEffect(()=>{!n&&L.current&&XF(L.current.config.data,s.labels)},[n,s.labels]),xe.useEffect(()=>{!n&&L.current&&s.datasets&&ZF(L.current.config.data,s.datasets,a)},[n,s.datasets]),xe.useEffect(()=>{L.current&&(n?(D(),setTimeout(P)):L.current.update(B))},[n,p,s.labels,s.datasets,B]),xe.useEffect(()=>{L.current&&(D(),setTimeout(P))},[c]),xe.useEffect(()=>(P(),()=>D()),[]),zn.createElement("canvas",{ref:C,role:"img",height:r,width:i,...F},v)}const WH=xe.forwardRef(KH);function rC(e,t){return xg.register(t),xe.forwardRef((r,i)=>zn.createElement(WH,{...r,ref:i,type:e}))}const $H=rC("line",kz),a3=rC("bar",Sz),o3=rC("doughnut",Tz),XH="modulepreload",ZH=function(e){return"/"+e},l3={},jb=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(B=>({status:"fulfilled",value:B}),B=>({status:"rejected",reason:B}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),s=c?.nonce||c?.getAttribute("nonce");n=p(r.map(g=>{if(g=ZH(g),g in l3)return;l3[g]=!0;const v=g.endsWith(".css"),B=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${B}`))return;const F=document.createElement("link");if(F.rel=v?"stylesheet":XH,v||(F.as="script"),F.crossOrigin="",F.href=g,s&&F.setAttribute("nonce",s),document.head.appendChild(F),v)return new Promise((C,L)=>{F.addEventListener("load",C),F.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(c){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=c,window.dispatchEvent(s),!s.defaultPrevented)throw c}return n.then(c=>{for(const s of c||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}var VA=Uint8Array,kh=Uint16Array,iC=Int32Array,nC=new VA([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sC=new VA([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c3=new VA([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YF=function(e,t){for(var r=new kh(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var n=new iC(r[30]),i=1;i<30;++i)for(var a=r[i];a<r[i+1];++a)n[a]=a-r[i]<<5|i;return{b:r,r:n}},JF=YF(nC,2),YH=JF.b,v5=JF.r;YH[28]=258,v5[258]=28;var JH=YF(sC,0),u3=JH.r,x5=new kh(32768);for(var va=0;va<32768;++va){var Jf=(va&43690)>>1|(va&21845)<<1;Jf=(Jf&52428)>>2|(Jf&13107)<<2,Jf=(Jf&61680)>>4|(Jf&3855)<<4,x5[va]=((Jf&65280)>>8|(Jf&255)<<8)>>1}var X1=function(e,t,r){for(var i=e.length,n=0,a=new kh(t);n<i;++n)e[n]&&++a[e[n]-1];var c=new kh(t);for(n=1;n<t;++n)c[n]=c[n-1]+a[n-1]<<1;var s;if(r){s=new kh(1<<t);var p=15-t;for(n=0;n<i;++n)if(e[n])for(var g=n<<4|e[n],v=t-e[n],B=c[e[n]-1]++<<v,F=B|(1<<v)-1;B<=F;++B)s[x5[B]>>p]=g}else for(s=new kh(i),n=0;n<i;++n)e[n]&&(s[n]=x5[c[e[n]-1]++]>>15-e[n]);return s},E0=new VA(288);for(var va=0;va<144;++va)E0[va]=8;for(var va=144;va<256;++va)E0[va]=9;for(var va=256;va<280;++va)E0[va]=7;for(var va=280;va<288;++va)E0[va]=8;var M2=new VA(32);for(var va=0;va<32;++va)M2[va]=5;var eV=X1(E0,9,0),tV=X1(M2,5,0),eN=function(e){return(e+7)/8|0},rV=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new VA(e.subarray(t,r))},Yd=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},w1=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},Ub=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var n=r.length,a=r.slice();if(!n)return{t:rN,l:0};if(n==1){var c=new VA(r[0].s+1);return c[r[0].s]=1,{t:c,l:1}}r.sort(function(G,ne){return G.f-ne.f}),r.push({s:-1,f:25001});var s=r[0],p=r[1],g=0,v=1,B=2;for(r[0]={s:-1,f:s.f+p.f,l:s,r:p};v!=n-1;)s=r[r[g].f<r[B].f?g++:B++],p=r[g!=v&&r[g].f<r[B].f?g++:B++],r[v++]={s:-1,f:s.f+p.f,l:s,r:p};for(var F=a[0].s,i=1;i<n;++i)a[i].s>F&&(F=a[i].s);var C=new kh(F+1),L=y5(r[v-1],C,0);if(L>t){var i=0,P=0,D=L-t,j=1<<D;for(a.sort(function(ne,Z){return C[Z.s]-C[ne.s]||ne.f-Z.f});i<n;++i){var q=a[i].s;if(C[q]>t)P+=j-(1<<L-C[q]),C[q]=t;else break}for(P>>=D;P>0;){var H=a[i].s;C[H]<t?P-=1<<t-C[H]++-1:++i}for(;i>=0&&P;--i){var ee=a[i].s;C[ee]==t&&(--C[ee],++P)}L=t}return{t:new VA(C),l:L}},y5=function(e,t,r){return e.s==-1?Math.max(y5(e.l,t,r+1),y5(e.r,t,r+1)):t[e.s]=r},h3=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new kh(++t),i=0,n=e[0],a=1,c=function(p){r[i++]=p},s=1;s<=t;++s)if(e[s]==n&&s!=t)++a;else{if(!n&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(n),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(n);a=1,n=e[s]}return{c:r.subarray(0,i),n:t}},C1=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},tN=function(e,t,r){var i=r.length,n=eN(t+2);e[n]=i&255,e[n+1]=i>>8,e[n+2]=e[n]^255,e[n+3]=e[n+1]^255;for(var a=0;a<i;++a)e[n+a+4]=r[a];return(n+4+i)*8},A3=function(e,t,r,i,n,a,c,s,p,g,v){Yd(t,v++,r),++n[256];for(var B=Ub(n,15),F=B.t,C=B.l,L=Ub(a,15),P=L.t,D=L.l,j=h3(F),q=j.c,H=j.n,ee=h3(P),G=ee.c,ne=ee.n,Z=new kh(19),le=0;le<q.length;++le)++Z[q[le]&31];for(var le=0;le<G.length;++le)++Z[G[le]&31];for(var J=Ub(Z,7),ce=J.t,te=J.l,K=19;K>4&&!ce[c3[K-1]];--K);var me=g+5<<3,we=C1(n,E0)+C1(a,M2)+c,Fe=C1(n,F)+C1(a,P)+c+14+3*K+C1(Z,ce)+2*Z[16]+3*Z[17]+7*Z[18];if(p>=0&&me<=we&&me<=Fe)return tN(t,v,e.subarray(p,p+g));var he,Le,$e,Ne;if(Yd(t,v,1+(Fe<we)),v+=2,Fe<we){he=X1(F,C,0),Le=F,$e=X1(P,D,0),Ne=P;var Te=X1(ce,te,0);Yd(t,v,H-257),Yd(t,v+5,ne-1),Yd(t,v+10,K-4),v+=14;for(var le=0;le<K;++le)Yd(t,v+3*le,ce[c3[le]]);v+=3*K;for(var Ge=[q,G],Y=0;Y<2;++Y)for(var Ae=Ge[Y],le=0;le<Ae.length;++le){var fe=Ae[le]&31;Yd(t,v,Te[fe]),v+=ce[fe],fe>15&&(Yd(t,v,Ae[le]>>5&127),v+=Ae[le]>>12)}}else he=eV,Le=E0,$e=tV,Ne=M2;for(var le=0;le<s;++le){var be=i[le];if(be>255){var fe=be>>18&31;w1(t,v,he[fe+257]),v+=Le[fe+257],fe>7&&(Yd(t,v,be>>23&31),v+=nC[fe]);var Me=be&31;w1(t,v,$e[Me]),v+=Ne[Me],Me>3&&(w1(t,v,be>>5&8191),v+=sC[Me])}else w1(t,v,he[be]),v+=Le[be]}return w1(t,v,he[256]),v+Le[256]},iV=new iC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rN=new VA(0),nV=function(e,t,r,i,n,a){var c=a.z||e.length,s=new VA(i+c+5*(1+Math.ceil(c/7e3))+n),p=s.subarray(i,s.length-n),g=a.l,v=(a.r||0)&7;if(t){v&&(p[0]=a.r>>3);for(var B=iV[t-1],F=B>>13,C=B&8191,L=(1<<r)-1,P=a.p||new kh(32768),D=a.h||new kh(L+1),j=Math.ceil(r/3),q=2*j,H=function(Pt){return(e[Pt]^e[Pt+1]<<j^e[Pt+2]<<q)&L},ee=new iC(25e3),G=new kh(288),ne=new kh(32),Z=0,le=0,J=a.i||0,ce=0,te=a.w||0,K=0;J+2<c;++J){var me=H(J),we=J&32767,Fe=D[me];if(P[we]=Fe,D[me]=we,te<=J){var he=c-J;if((Z>7e3||ce>24576)&&(he>423||!g)){v=A3(e,p,0,ee,G,ne,le,ce,K,J-K,v),ce=Z=le=0,K=J;for(var Le=0;Le<286;++Le)G[Le]=0;for(var Le=0;Le<30;++Le)ne[Le]=0}var $e=2,Ne=0,Te=C,Ge=we-Fe&32767;if(he>2&&me==H(J-Ge))for(var Y=Math.min(F,he)-1,Ae=Math.min(32767,J),fe=Math.min(258,he);Ge<=Ae&&--Te&&we!=Fe;){if(e[J+$e]==e[J+$e-Ge]){for(var be=0;be<fe&&e[J+be]==e[J+be-Ge];++be);if(be>$e){if($e=be,Ne=Ge,be>Y)break;for(var Me=Math.min(Ge,be-2),ze=0,Le=0;Le<Me;++Le){var We=J-Ge+Le&32767,ut=P[We],dt=We-ut&32767;dt>ze&&(ze=dt,Fe=We)}}}we=Fe,Fe=P[we],Ge+=we-Fe&32767}if(Ne){ee[ce++]=268435456|v5[$e]<<18|u3[Ne];var zt=v5[$e]&31,ve=u3[Ne]&31;le+=nC[zt]+sC[ve],++G[257+zt],++ne[ve],te=J+$e,++Z}else ee[ce++]=e[J],++G[e[J]]}}for(J=Math.max(J,te);J<c;++J)ee[ce++]=e[J],++G[e[J]];v=A3(e,p,g,ee,G,ne,le,ce,K,J-K,v),g||(a.r=v&7|p[v/8|0]<<3,v-=7,a.h=D,a.p=P,a.i=J,a.w=te)}else{for(var J=a.w||0;J<c+g;J+=65535){var Ct=J+65535;Ct>=c&&(p[v/8|0]=g,Ct=c),v=tN(p,v+1,e.subarray(J,Ct))}a.i=c}return rV(s,0,i+eN(v)+n)},iN=function(){var e=1,t=0;return{p:function(r){for(var i=e,n=t,a=r.length|0,c=0;c!=a;){for(var s=Math.min(c+2655,a);c<s;++c)n+=i+=r[c];i=(i&65535)+15*(i>>16),n=(n&65535)+15*(n>>16)}e=i,t=n},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},sV=function(e,t,r,i,n){if(!n&&(n={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),c=new VA(a.length+e.length);c.set(a),c.set(e,a.length),e=c,n.w=a.length}return nV(e,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,n)},nN=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},aV=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=iN();n.p(t.dictionary),nN(e,2,n.d())}};function _5(e,t){t||(t={});var r=iN();r.p(e);var i=sV(e,t,t.dictionary?6:2,4);return aV(i,t),nN(i,i.length-4,r.d()),i}var oV=typeof TextDecoder<"u"&&new TextDecoder,lV=0;try{oV.decode(rN,{stream:!0}),lV=1}catch{}function cV(e){if(Array.isArray(e))return e}function uV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,c,s=[],p=!0,g=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(p=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);p=!0);}catch(v){g=!0,n=v}finally{try{if(!p&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(g)throw n}}return s}}function d3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function hV(e,t){if(e){if(typeof e=="string")return d3(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d3(e,t):void 0}}function AV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f3(e,t){return cV(e)||uV(e,t)||hV(e,t)||AV()}function p3(e,t="utf8"){return new TextDecoder(t).decode(e)}const dV=new TextEncoder;function fV(e){return dV.encode(e)}const pV=1024*8,mV=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Ob={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class aC{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=pV,r={}){let i=!1;typeof t=="number"?t=new ArrayBuffer(t):(i=!0,this.lastWrittenByte=t.byteLength);const n=r.offset?r.offset>>>0:0,a=t.byteLength-n;let c=n;(ArrayBuffer.isView(t)||t instanceof aC)&&(t.byteLength!==t.buffer.byteLength&&(c=t.byteOffset+n),t=t.buffer),i?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const i=(this.offset+t)*2,n=new Uint8Array(i);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const i=Ob[r].BYTES_PER_ELEMENT*t,n=this.byteOffset+this.offset,a=this.buffer.slice(n,n+i);if(this.littleEndian===mV&&r!=="uint8"&&r!=="int8"){const s=new Uint8Array(this.buffer.slice(n,n+i));s.reverse();const p=new Ob[r](s.buffer);return this.offset+=i,p.reverse(),p}const c=new Ob[r](a);return this.offset+=i,c}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let i=0;i<t;i++)r+=this.readChar();return r}readUtf8(t=1){return p3(this.readBytes(t))}decodeText(t=1,r="utf8"){return p3(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(fV(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function _g(e){let t=e.length;for(;--t>=0;)e[t]=0}const gV=3,vV=258,sN=29,xV=256,yV=xV+1+sN,aN=30,_V=512,bV=new Array((yV+2)*2);_g(bV);const wV=new Array(aN*2);_g(wV);const CV=new Array(_V);_g(CV);const BV=new Array(vV-gV+1);_g(BV);const SV=new Array(sN);_g(SV);const EV=new Array(aN);_g(EV);const TV=(e,t,r,i)=>{let n=e&65535|0,a=e>>>16&65535|0,c=0;for(;r!==0;){c=r>2e3?2e3:r,r-=c;do n=n+t[i++]|0,a=a+n|0;while(--c);n%=65521,a%=65521}return n|a<<16|0};var b5=TV;const kV=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},FV=new Uint32Array(kV()),NV=(e,t,r,i)=>{const n=FV,a=i+r;e^=-1;for(let c=i;c<a;c++)e=e>>>8^n[(e^t[c])&255];return e^-1};var pd=NV,w5={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},oN={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const IV=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var LV=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const i in r)IV(r,i)&&(e[i]=r[i])}}return e},MV=e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const r=new Uint8Array(t);for(let i=0,n=0,a=e.length;i<a;i++){let c=e[i];r.set(c,n),n+=c.length}return r},lN={assign:LV,flattenChunks:MV};let cN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cN=!1}const Cv=new Uint8Array(256);for(let e=0;e<256;e++)Cv[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Cv[254]=Cv[254]=1;var PV=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,i,n,a,c=e.length,s=0;for(n=0;n<c;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<c&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,n=0;a<s;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<c&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const RV=(e,t)=>{if(t<65534&&e.subarray&&cN)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r};var DV=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,n;const a=new Array(r*2);for(n=0,i=0;i<r;){let c=e[i++];if(c<128){a[n++]=c;continue}let s=Cv[c];if(s>4){a[n++]=65533,i+=s-1;continue}for(c&=s===2?31:s===3?15:7;s>1&&i<r;)c=c<<6|e[i++]&63,s--;if(s>1){a[n++]=65533;continue}c<65536?a[n++]=c:(c-=65536,a[n++]=55296|c>>10&1023,a[n++]=56320|c&1023)}return RV(a,n)},jV=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Cv[e[r]]>t?r:t},C5={string2buf:PV,buf2string:DV,utf8border:jV};function UV(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var OV=UV;const uy=16209,zV=16191;var QV=function(t,r){let i,n,a,c,s,p,g,v,B,F,C,L,P,D,j,q,H,ee,G,ne,Z,le,J,ce;const te=t.state;i=t.next_in,J=t.input,n=i+(t.avail_in-5),a=t.next_out,ce=t.output,c=a-(r-t.avail_out),s=a+(t.avail_out-257),p=te.dmax,g=te.wsize,v=te.whave,B=te.wnext,F=te.window,C=te.hold,L=te.bits,P=te.lencode,D=te.distcode,j=(1<<te.lenbits)-1,q=(1<<te.distbits)-1;e:do{L<15&&(C+=J[i++]<<L,L+=8,C+=J[i++]<<L,L+=8),H=P[C&j];t:for(;;){if(ee=H>>>24,C>>>=ee,L-=ee,ee=H>>>16&255,ee===0)ce[a++]=H&65535;else if(ee&16){G=H&65535,ee&=15,ee&&(L<ee&&(C+=J[i++]<<L,L+=8),G+=C&(1<<ee)-1,C>>>=ee,L-=ee),L<15&&(C+=J[i++]<<L,L+=8,C+=J[i++]<<L,L+=8),H=D[C&q];r:for(;;){if(ee=H>>>24,C>>>=ee,L-=ee,ee=H>>>16&255,ee&16){if(ne=H&65535,ee&=15,L<ee&&(C+=J[i++]<<L,L+=8,L<ee&&(C+=J[i++]<<L,L+=8)),ne+=C&(1<<ee)-1,ne>p){t.msg="invalid distance too far back",te.mode=uy;break e}if(C>>>=ee,L-=ee,ee=a-c,ne>ee){if(ee=ne-ee,ee>v&&te.sane){t.msg="invalid distance too far back",te.mode=uy;break e}if(Z=0,le=F,B===0){if(Z+=g-ee,ee<G){G-=ee;do ce[a++]=F[Z++];while(--ee);Z=a-ne,le=ce}}else if(B<ee){if(Z+=g+B-ee,ee-=B,ee<G){G-=ee;do ce[a++]=F[Z++];while(--ee);if(Z=0,B<G){ee=B,G-=ee;do ce[a++]=F[Z++];while(--ee);Z=a-ne,le=ce}}}else if(Z+=B-ee,ee<G){G-=ee;do ce[a++]=F[Z++];while(--ee);Z=a-ne,le=ce}for(;G>2;)ce[a++]=le[Z++],ce[a++]=le[Z++],ce[a++]=le[Z++],G-=3;G&&(ce[a++]=le[Z++],G>1&&(ce[a++]=le[Z++]))}else{Z=a-ne;do ce[a++]=ce[Z++],ce[a++]=ce[Z++],ce[a++]=ce[Z++],G-=3;while(G>2);G&&(ce[a++]=ce[Z++],G>1&&(ce[a++]=ce[Z++]))}}else if((ee&64)===0){H=D[(H&65535)+(C&(1<<ee)-1)];continue r}else{t.msg="invalid distance code",te.mode=uy;break e}break}}else if((ee&64)===0){H=P[(H&65535)+(C&(1<<ee)-1)];continue t}else if(ee&32){te.mode=zV;break e}else{t.msg="invalid literal/length code",te.mode=uy;break e}break}}while(i<n&&a<s);G=L>>3,i-=G,L-=G<<3,C&=(1<<L)-1,t.next_in=i,t.next_out=a,t.avail_in=i<n?5+(n-i):5-(i-n),t.avail_out=a<s?257+(s-a):257-(a-s),te.hold=C,te.bits=L};const Tm=15,m3=852,g3=592,v3=0,zb=1,x3=2,HV=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),VV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),GV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),qV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),KV=(e,t,r,i,n,a,c,s)=>{const p=s.bits;let g=0,v=0,B=0,F=0,C=0,L=0,P=0,D=0,j=0,q=0,H,ee,G,ne,Z,le=null,J;const ce=new Uint16Array(Tm+1),te=new Uint16Array(Tm+1);let K=null,me,we,Fe;for(g=0;g<=Tm;g++)ce[g]=0;for(v=0;v<i;v++)ce[t[r+v]]++;for(C=p,F=Tm;F>=1&&ce[F]===0;F--);if(C>F&&(C=F),F===0)return n[a++]=1<<24|64<<16|0,n[a++]=1<<24|64<<16|0,s.bits=1,0;for(B=1;B<F&&ce[B]===0;B++);for(C<B&&(C=B),D=1,g=1;g<=Tm;g++)if(D<<=1,D-=ce[g],D<0)return-1;if(D>0&&(e===v3||F!==1))return-1;for(te[1]=0,g=1;g<Tm;g++)te[g+1]=te[g]+ce[g];for(v=0;v<i;v++)t[r+v]!==0&&(c[te[t[r+v]]++]=v);if(e===v3?(le=K=c,J=20):e===zb?(le=HV,K=VV,J=257):(le=GV,K=qV,J=0),q=0,v=0,g=B,Z=a,L=C,P=0,G=-1,j=1<<C,ne=j-1,e===zb&&j>m3||e===x3&&j>g3)return 1;for(;;){me=g-P,c[v]+1<J?(we=0,Fe=c[v]):c[v]>=J?(we=K[c[v]-J],Fe=le[c[v]-J]):(we=96,Fe=0),H=1<<g-P,ee=1<<L,B=ee;do ee-=H,n[Z+(q>>P)+ee]=me<<24|we<<16|Fe|0;while(ee!==0);for(H=1<<g-1;q&H;)H>>=1;if(H!==0?(q&=H-1,q+=H):q=0,v++,--ce[g]===0){if(g===F)break;g=t[r+c[v]]}if(g>C&&(q&ne)!==G){for(P===0&&(P=C),Z+=B,L=g-P,D=1<<L;L+P<F&&(D-=ce[L+P],!(D<=0));)L++,D<<=1;if(j+=1<<L,e===zb&&j>m3||e===x3&&j>g3)return 1;G=q&ne,n[G]=C<<24|L<<16|Z-a|0}}return q!==0&&(n[Z+q]=g-P<<24|64<<16|0),s.bits=C,0};var Z1=KV;const WV=0,uN=1,hN=2,{Z_FINISH:y3,Z_BLOCK:$V,Z_TREES:hy,Z_OK:T0,Z_STREAM_END:XV,Z_NEED_DICT:ZV,Z_STREAM_ERROR:aA,Z_DATA_ERROR:AN,Z_MEM_ERROR:dN,Z_BUF_ERROR:YV,Z_DEFLATED:_3}=oN,E_=16180,b3=16181,w3=16182,C3=16183,B3=16184,S3=16185,E3=16186,T3=16187,k3=16188,F3=16189,P2=16190,Jd=16191,Qb=16192,N3=16193,Hb=16194,I3=16195,L3=16196,M3=16197,P3=16198,Ay=16199,dy=16200,R3=16201,D3=16202,j3=16203,U3=16204,O3=16205,Vb=16206,z3=16207,Q3=16208,ka=16209,fN=16210,pN=16211,JV=852,eG=592,tG=15,rG=tG,H3=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function iG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const L0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<E_||t.mode>pN?1:0},mN=e=>{if(L0(e))return aA;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=E_,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(JV),t.distcode=t.distdyn=new Int32Array(eG),t.sane=1,t.back=-1,T0},gN=e=>{if(L0(e))return aA;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,mN(e)},vN=(e,t)=>{let r;if(L0(e))return aA;const i=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?aA:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,gN(e))},xN=(e,t)=>{if(!e)return aA;const r=new iG;e.state=r,r.strm=e,r.window=null,r.mode=E_;const i=vN(e,t);return i!==T0&&(e.state=null),i},nG=e=>xN(e,rG);let V3=!0,Gb,qb;const sG=e=>{if(V3){Gb=new Int32Array(512),qb=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Z1(uN,e.lens,0,288,Gb,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Z1(hN,e.lens,0,32,qb,0,e.work,{bits:5}),V3=!1}e.lencode=Gb,e.lenbits=9,e.distcode=qb,e.distbits=5},yN=(e,t,r,i)=>{let n;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),a.window.set(t.subarray(r-i,r-i+n),a.wnext),i-=n,i?(a.window.set(t.subarray(r-i,r),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0},aG=(e,t)=>{let r,i,n,a,c,s,p,g,v,B,F,C,L,P,D=0,j,q,H,ee,G,ne,Z,le;const J=new Uint8Array(4);let ce,te;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(L0(e)||!e.output||!e.input&&e.avail_in!==0)return aA;r=e.state,r.mode===Jd&&(r.mode=Qb),c=e.next_out,n=e.output,p=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,g=r.hold,v=r.bits,B=s,F=p,le=T0;e:for(;;)switch(r.mode){case E_:if(r.wrap===0){r.mode=Qb;break}for(;v<16;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(r.wrap&2&&g===35615){r.wbits===0&&(r.wbits=15),r.check=0,J[0]=g&255,J[1]=g>>>8&255,r.check=pd(r.check,J,2,0),g=0,v=0,r.mode=b3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((g&255)<<8)+(g>>8))%31){e.msg="incorrect header check",r.mode=ka;break}if((g&15)!==_3){e.msg="unknown compression method",r.mode=ka;break}if(g>>>=4,v-=4,Z=(g&15)+8,r.wbits===0&&(r.wbits=Z),Z>15||Z>r.wbits){e.msg="invalid window size",r.mode=ka;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=g&512?F3:Jd,g=0,v=0;break;case b3:for(;v<16;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(r.flags=g,(r.flags&255)!==_3){e.msg="unknown compression method",r.mode=ka;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=ka;break}r.head&&(r.head.text=g>>8&1),r.flags&512&&r.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,r.check=pd(r.check,J,2,0)),g=0,v=0,r.mode=w3;case w3:for(;v<32;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}r.head&&(r.head.time=g),r.flags&512&&r.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,J[2]=g>>>16&255,J[3]=g>>>24&255,r.check=pd(r.check,J,4,0)),g=0,v=0,r.mode=C3;case C3:for(;v<16;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}r.head&&(r.head.xflags=g&255,r.head.os=g>>8),r.flags&512&&r.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,r.check=pd(r.check,J,2,0)),g=0,v=0,r.mode=B3;case B3:if(r.flags&1024){for(;v<16;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}r.length=g,r.head&&(r.head.extra_len=g),r.flags&512&&r.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,r.check=pd(r.check,J,2,0)),g=0,v=0}else r.head&&(r.head.extra=null);r.mode=S3;case S3:if(r.flags&1024&&(C=r.length,C>s&&(C=s),C&&(r.head&&(Z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(a,a+C),Z)),r.flags&512&&r.wrap&4&&(r.check=pd(r.check,i,C,a)),s-=C,a+=C,r.length-=C),r.length))break e;r.length=0,r.mode=E3;case E3:if(r.flags&2048){if(s===0)break e;C=0;do Z=i[a+C++],r.head&&Z&&r.length<65536&&(r.head.name+=String.fromCharCode(Z));while(Z&&C<s);if(r.flags&512&&r.wrap&4&&(r.check=pd(r.check,i,C,a)),s-=C,a+=C,Z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=T3;case T3:if(r.flags&4096){if(s===0)break e;C=0;do Z=i[a+C++],r.head&&Z&&r.length<65536&&(r.head.comment+=String.fromCharCode(Z));while(Z&&C<s);if(r.flags&512&&r.wrap&4&&(r.check=pd(r.check,i,C,a)),s-=C,a+=C,Z)break e}else r.head&&(r.head.comment=null);r.mode=k3;case k3:if(r.flags&512){for(;v<16;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(r.wrap&4&&g!==(r.check&65535)){e.msg="header crc mismatch",r.mode=ka;break}g=0,v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Jd;break;case F3:for(;v<32;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}e.adler=r.check=H3(g),g=0,v=0,r.mode=P2;case P2:if(r.havedict===0)return e.next_out=c,e.avail_out=p,e.next_in=a,e.avail_in=s,r.hold=g,r.bits=v,ZV;e.adler=r.check=1,r.mode=Jd;case Jd:if(t===$V||t===hy)break e;case Qb:if(r.last){g>>>=v&7,v-=v&7,r.mode=Vb;break}for(;v<3;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}switch(r.last=g&1,g>>>=1,v-=1,g&3){case 0:r.mode=N3;break;case 1:if(sG(r),r.mode=Ay,t===hy){g>>>=2,v-=2;break e}break;case 2:r.mode=L3;break;case 3:e.msg="invalid block type",r.mode=ka}g>>>=2,v-=2;break;case N3:for(g>>>=v&7,v-=v&7;v<32;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if((g&65535)!==(g>>>16^65535)){e.msg="invalid stored block lengths",r.mode=ka;break}if(r.length=g&65535,g=0,v=0,r.mode=Hb,t===hy)break e;case Hb:r.mode=I3;case I3:if(C=r.length,C){if(C>s&&(C=s),C>p&&(C=p),C===0)break e;n.set(i.subarray(a,a+C),c),s-=C,a+=C,p-=C,c+=C,r.length-=C;break}r.mode=Jd;break;case L3:for(;v<14;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(r.nlen=(g&31)+257,g>>>=5,v-=5,r.ndist=(g&31)+1,g>>>=5,v-=5,r.ncode=(g&15)+4,g>>>=4,v-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=ka;break}r.have=0,r.mode=M3;case M3:for(;r.have<r.ncode;){for(;v<3;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}r.lens[K[r.have++]]=g&7,g>>>=3,v-=3}for(;r.have<19;)r.lens[K[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ce={bits:r.lenbits},le=Z1(WV,r.lens,0,19,r.lencode,0,r.work,ce),r.lenbits=ce.bits,le){e.msg="invalid code lengths set",r.mode=ka;break}r.have=0,r.mode=P3;case P3:for(;r.have<r.nlen+r.ndist;){for(;D=r.lencode[g&(1<<r.lenbits)-1],j=D>>>24,q=D>>>16&255,H=D&65535,!(j<=v);){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(H<16)g>>>=j,v-=j,r.lens[r.have++]=H;else{if(H===16){for(te=j+2;v<te;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(g>>>=j,v-=j,r.have===0){e.msg="invalid bit length repeat",r.mode=ka;break}Z=r.lens[r.have-1],C=3+(g&3),g>>>=2,v-=2}else if(H===17){for(te=j+3;v<te;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}g>>>=j,v-=j,Z=0,C=3+(g&7),g>>>=3,v-=3}else{for(te=j+7;v<te;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}g>>>=j,v-=j,Z=0,C=11+(g&127),g>>>=7,v-=7}if(r.have+C>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=ka;break}for(;C--;)r.lens[r.have++]=Z}}if(r.mode===ka)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=ka;break}if(r.lenbits=9,ce={bits:r.lenbits},le=Z1(uN,r.lens,0,r.nlen,r.lencode,0,r.work,ce),r.lenbits=ce.bits,le){e.msg="invalid literal/lengths set",r.mode=ka;break}if(r.distbits=6,r.distcode=r.distdyn,ce={bits:r.distbits},le=Z1(hN,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ce),r.distbits=ce.bits,le){e.msg="invalid distances set",r.mode=ka;break}if(r.mode=Ay,t===hy)break e;case Ay:r.mode=dy;case dy:if(s>=6&&p>=258){e.next_out=c,e.avail_out=p,e.next_in=a,e.avail_in=s,r.hold=g,r.bits=v,QV(e,F),c=e.next_out,n=e.output,p=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,g=r.hold,v=r.bits,r.mode===Jd&&(r.back=-1);break}for(r.back=0;D=r.lencode[g&(1<<r.lenbits)-1],j=D>>>24,q=D>>>16&255,H=D&65535,!(j<=v);){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(q&&(q&240)===0){for(ee=j,G=q,ne=H;D=r.lencode[ne+((g&(1<<ee+G)-1)>>ee)],j=D>>>24,q=D>>>16&255,H=D&65535,!(ee+j<=v);){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}g>>>=ee,v-=ee,r.back+=ee}if(g>>>=j,v-=j,r.back+=j,r.length=H,q===0){r.mode=O3;break}if(q&32){r.back=-1,r.mode=Jd;break}if(q&64){e.msg="invalid literal/length code",r.mode=ka;break}r.extra=q&15,r.mode=R3;case R3:if(r.extra){for(te=r.extra;v<te;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,v-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=D3;case D3:for(;D=r.distcode[g&(1<<r.distbits)-1],j=D>>>24,q=D>>>16&255,H=D&65535,!(j<=v);){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if((q&240)===0){for(ee=j,G=q,ne=H;D=r.distcode[ne+((g&(1<<ee+G)-1)>>ee)],j=D>>>24,q=D>>>16&255,H=D&65535,!(ee+j<=v);){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}g>>>=ee,v-=ee,r.back+=ee}if(g>>>=j,v-=j,r.back+=j,q&64){e.msg="invalid distance code",r.mode=ka;break}r.offset=H,r.extra=q&15,r.mode=j3;case j3:if(r.extra){for(te=r.extra;v<te;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,v-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=ka;break}r.mode=U3;case U3:if(p===0)break e;if(C=F-p,r.offset>C){if(C=r.offset-C,C>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=ka;break}C>r.wnext?(C-=r.wnext,L=r.wsize-C):L=r.wnext-C,C>r.length&&(C=r.length),P=r.window}else P=n,L=c-r.offset,C=r.length;C>p&&(C=p),p-=C,r.length-=C;do n[c++]=P[L++];while(--C);r.length===0&&(r.mode=dy);break;case O3:if(p===0)break e;n[c++]=r.length,p--,r.mode=dy;break;case Vb:if(r.wrap){for(;v<32;){if(s===0)break e;s--,g|=i[a++]<<v,v+=8}if(F-=p,e.total_out+=F,r.total+=F,r.wrap&4&&F&&(e.adler=r.check=r.flags?pd(r.check,n,F,c-F):b5(r.check,n,F,c-F)),F=p,r.wrap&4&&(r.flags?g:H3(g))!==r.check){e.msg="incorrect data check",r.mode=ka;break}g=0,v=0}r.mode=z3;case z3:if(r.wrap&&r.flags){for(;v<32;){if(s===0)break e;s--,g+=i[a++]<<v,v+=8}if(r.wrap&4&&g!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=ka;break}g=0,v=0}r.mode=Q3;case Q3:le=XV;break e;case ka:le=AN;break e;case fN:return dN;case pN:default:return aA}return e.next_out=c,e.avail_out=p,e.next_in=a,e.avail_in=s,r.hold=g,r.bits=v,(r.wsize||F!==e.avail_out&&r.mode<ka&&(r.mode<Vb||t!==y3))&&yN(e,e.output,e.next_out,F-e.avail_out),B-=e.avail_in,F-=e.avail_out,e.total_in+=B,e.total_out+=F,r.total+=F,r.wrap&4&&F&&(e.adler=r.check=r.flags?pd(r.check,n,F,e.next_out-F):b5(r.check,n,F,e.next_out-F)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Jd?128:0)+(r.mode===Ay||r.mode===Hb?256:0),(B===0&&F===0||t===y3)&&le===T0&&(le=YV),le},oG=e=>{if(L0(e))return aA;let t=e.state;return t.window&&(t.window=null),e.state=null,T0},lG=(e,t)=>{if(L0(e))return aA;const r=e.state;return(r.wrap&2)===0?aA:(r.head=t,t.done=!1,T0)},cG=(e,t)=>{const r=t.length;let i,n,a;return L0(e)||(i=e.state,i.wrap!==0&&i.mode!==P2)?aA:i.mode===P2&&(n=1,n=b5(n,t,r,0),n!==i.check)?AN:(a=yN(e,t,r,r),a?(i.mode=fN,dN):(i.havedict=1,T0))};var uG=gN,hG=vN,AG=mN,dG=nG,fG=xN,pG=aG,mG=oG,gG=lG,vG=cG,xG="pako inflate (from Nodeca project)",of={inflateReset:uG,inflateReset2:hG,inflateResetKeep:AG,inflateInit:dG,inflateInit2:fG,inflate:pG,inflateEnd:mG,inflateGetHeader:gG,inflateSetDictionary:vG,inflateInfo:xG};function yG(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var _G=yG;const _N=Object.prototype.toString,{Z_NO_FLUSH:bG,Z_FINISH:wG,Z_OK:Bv,Z_STREAM_END:Kb,Z_NEED_DICT:Wb,Z_STREAM_ERROR:CG,Z_DATA_ERROR:G3,Z_MEM_ERROR:BG}=oN;function Wv(e){this.options=lN.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new OV,this.strm.avail_out=0;let r=of.inflateInit2(this.strm,t.windowBits);if(r!==Bv)throw new Error(w5[r]);if(this.header=new _G,of.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=C5.string2buf(t.dictionary):_N.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=of.inflateSetDictionary(this.strm,t.dictionary),r!==Bv)))throw new Error(w5[r])}Wv.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let a,c,s;if(this.ended)return!1;for(t===~~t?c=t:c=t===!0?wG:bG,_N.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),a=of.inflate(r,c),a===Wb&&n&&(a=of.inflateSetDictionary(r,n),a===Bv?a=of.inflate(r,c):a===G3&&(a=Wb));r.avail_in>0&&a===Kb&&r.state.wrap>0&&e[r.next_in]!==0;)of.inflateReset(r),a=of.inflate(r,c);switch(a){case CG:case G3:case Wb:case BG:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||a===Kb))if(this.options.to==="string"){let p=C5.utf8border(r.output,r.next_out),g=r.next_out-p,v=C5.buf2string(r.output,p);r.next_out=g,r.avail_out=i-g,g&&r.output.set(r.output.subarray(p,p+g),0),this.onData(v)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===Bv&&s===0)){if(a===Kb)return a=of.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Wv.prototype.onData=function(e){this.chunks.push(e)};Wv.prototype.onEnd=function(e){e===Bv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=lN.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function SG(e,t){const r=new Wv(t);if(r.push(e),r.err)throw r.msg||w5[r.err];return r.result}var EG=Wv,TG=SG,kG={Inflate:EG,inflate:TG};const{Inflate:FG,inflate:NG}=kG;var q3=FG,IG=NG;const bN=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;bN[e]=t}const K3=4294967295;function LG(e,t,r){let i=e;for(let n=0;n<r;n++)i=bN[(i^t[n])&255]^i>>>8;return i}function MG(e,t){return(LG(K3,e,t)^K3)>>>0}function W3(e,t,r){const i=e.readUint32(),n=MG(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(n!==i)throw new Error(`CRC mismatch for chunk ${r}. Expected ${i}, found ${n}`)}function wN(e,t,r){for(let i=0;i<r;i++)t[i]=e[i]}function CN(e,t,r,i){let n=0;for(;n<i;n++)t[n]=e[n];for(;n<r;n++)t[n]=e[n]+t[n-i]&255}function BN(e,t,r,i){let n=0;if(r.length===0)for(;n<i;n++)t[n]=e[n];else for(;n<i;n++)t[n]=e[n]+r[n]&255}function SN(e,t,r,i,n){let a=0;if(r.length===0){for(;a<n;a++)t[a]=e[a];for(;a<i;a++)t[a]=e[a]+(t[a-n]>>1)&255}else{for(;a<n;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<i;a++)t[a]=e[a]+(t[a-n]+r[a]>>1)&255}}function EN(e,t,r,i,n){let a=0;if(r.length===0){for(;a<n;a++)t[a]=e[a];for(;a<i;a++)t[a]=e[a]+t[a-n]&255}else{for(;a<n;a++)t[a]=e[a]+r[a]&255;for(;a<i;a++)t[a]=e[a]+PG(t[a-n],r[a],r[a-n])&255}}function PG(e,t,r){const i=e+t-r,n=Math.abs(i-e),a=Math.abs(i-t),c=Math.abs(i-r);return n<=a&&n<=c?e:a<=c?t:r}function RG(e,t,r,i,n,a){switch(e){case 0:wN(t,r,n);break;case 1:CN(t,r,n,a);break;case 2:BN(t,r,i,n);break;case 3:SN(t,r,i,n,a);break;case 4:EN(t,r,i,n,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const DG=new Uint16Array([255]),jG=new Uint8Array(DG.buffer),UG=jG[0]===255;function OG(e){const{data:t,width:r,height:i,channels:n,depth:a}=e,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],s=Math.ceil(a/8)*n,p=new Uint8Array(i*r*s);let g=0;for(let v=0;v<7;v++){const B=c[v],F=Math.ceil((r-B.x)/B.xStep),C=Math.ceil((i-B.y)/B.yStep);if(F<=0||C<=0)continue;const L=F*s,P=new Uint8Array(L);for(let D=0;D<C;D++){const j=t[g++],q=t.subarray(g,g+L);g+=L;const H=new Uint8Array(L);RG(j,q,H,P,L,s),P.set(H);for(let ee=0;ee<F;ee++){const G=B.x+ee*B.xStep,ne=B.y+D*B.yStep;if(!(G>=r||ne>=i))for(let Z=0;Z<s;Z++)p[(ne*r+G)*s+Z]=H[ee*s+Z]}}}if(a===16){const v=new Uint16Array(p.buffer);if(UG)for(let B=0;B<v.length;B++)v[B]=zG(v[B]);return v}else return p}function zG(e){return(e&255)<<8|e>>8&255}const QG=new Uint16Array([255]),HG=new Uint8Array(QG.buffer),VG=HG[0]===255,GG=new Uint8Array(0);function $3(e){const{data:t,width:r,height:i,channels:n,depth:a}=e,c=Math.ceil(a/8)*n,s=Math.ceil(a/8*n*r),p=new Uint8Array(i*s);let g=GG,v=0,B,F;for(let C=0;C<i;C++){switch(B=t.subarray(v+1,v+1+s),F=p.subarray(C*s,(C+1)*s),t[v]){case 0:wN(B,F,s);break;case 1:CN(B,F,s,c);break;case 2:BN(B,F,g,s);break;case 3:SN(B,F,g,s,c);break;case 4:EN(B,F,g,s,c);break;default:throw new Error(`Unsupported filter: ${t[v]}`)}g=F,v+=s+1}if(a===16){const C=new Uint16Array(p.buffer);if(VG)for(let L=0;L<C.length;L++)C[L]=qG(C[L]);return C}else return p}function qG(e){return(e&255)<<8|e>>8&255}const u2=Uint8Array.of(137,80,78,71,13,10,26,10);function X3(e){if(!KG(e.readBytes(u2.length)))throw new Error("wrong PNG signature")}function KG(e){if(e.length<u2.length)return!1;for(let t=0;t<u2.length;t++)if(e[t]!==u2[t])return!1;return!0}const WG="tEXt",$G=0,TN=new TextDecoder("latin1");function XG(e){if(YG(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const ZG=/^[\u0000-\u00FF]*$/;function YG(e){if(!ZG.test(e))throw new Error("invalid latin1 text")}function JG(e,t,r){const i=kN(t);e[i]=eq(t,r-i.length-1)}function kN(e){for(e.mark();e.readByte()!==$G;);const t=e.offset;e.reset();const r=TN.decode(e.readBytes(t-e.offset-1));return e.skip(1),XG(r),r}function eq(e,t){return TN.decode(e.readBytes(t))}const Ch={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},$b={UNKNOWN:-1,DEFLATE:0},Z3={UNKNOWN:-1,ADAPTIVE:0},Xb={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},fy={NONE:0,BACKGROUND:1,PREVIOUS:2},Zb={SOURCE:0,OVER:1};class tq extends aC{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new q3,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=$b.UNKNOWN,this._filterMethod=Z3.UNKNOWN,this._interlaceMethod=Xb.UNKNOWN,this._colorType=Ch.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(X3(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(X3(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case WG:JG(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?W3(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=i+t;break}if(this.offset-i!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?W3(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=rq(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ch.GREYSCALE:i=1;break;case Ch.TRUECOLOUR:i=3;break;case Ch.INDEXED_COLOUR:i=1;break;case Ch.GREYSCALE_ALPHA:i=2;break;case Ch.TRUECOLOUR_ALPHA:i=4;break;case Ch.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==$b.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const i=[];this._palette=i;for(let n=0;n<r;n++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Ch.GREYSCALE:case Ch.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case Ch.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ch.UNKNOWN:case Ch.GREYSCALE_ALPHA:case Ch.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=kN(this),i=this.readUint8();if(i!==$b.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const n=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:IG(n)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:t,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(t);if(i){if(i.data=$3({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const n=this._apng.frames.at(t-1);this.disposeFrame(i,n,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,i){switch(t.disposeOp){case fy.NONE:break;case fy.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let a=0;a<this._png.width;a++){const c=(n*t.width+a)*this._png.channels;for(let s=0;s<this._png.channels;s++)i.data[c+s]=0}break;case fy.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const i=1<<this._png.depth,n=(a,c)=>{const s=((a+r.yOffset)*this._png.width+r.xOffset+c)*this._png.channels,p=(a*r.width+c)*this._png.channels;return{index:s,frameIndex:p}};switch(r.blendOp){case Zb.SOURCE:for(let a=0;a<r.height;a++)for(let c=0;c<r.width;c++){const{index:s,frameIndex:p}=n(a,c);for(let g=0;g<this._png.channels;g++)t.data[s+g]=r.data[p+g]}break;case Zb.OVER:for(let a=0;a<r.height;a++)for(let c=0;c<r.width;c++){const{index:s,frameIndex:p}=n(a,c);for(let g=0;g<this._png.channels;g++){const v=r.data[p+this._png.channels-1]/i,B=g%(this._png.channels-1)===0?1:r.data[p+g],F=Math.floor(v*B+(1-v)*t.data[s+g]);t.data[s+g]+=F}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Z3.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Xb.NO_INTERLACE)this._png.data=$3({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Xb.ADAM7)this._png.data=OG({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:fy.NONE,blendOp:Zb.SOURCE,data:t}),this._inflator=new q3,this._writingDataChunks=!1}}function rq(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var Y3;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(Y3||(Y3={}));function iq(e,t){return new tq(e,t).decode()}var tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Yb(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var Js={log:Yb,warn:function(e){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):Yb.call(null,arguments))},error:function(e){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):Yb(e))}};function Jb(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){s0(i.response,t,r)},i.onerror=function(){Js.error("could not download file")},i.send()}function J3(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function py(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s0=tn.saveAs||((typeof window>"u"?"undefined":Ns(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=tn.URL||tn.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?J3(n.href)?Jb(e,t,r):py(n,n.target="_blank"):py(n)):(n.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(n.href)},4e4),setTimeout(function(){py(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(J3(e))Jb(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){py(i)})}else navigator.msSaveOrOpenBlob(function(n,a){return a===void 0?a={autoBom:!1}:Ns(a)!=="object"&&(Js.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return Jb(e,t,r);var n=e.type==="application/octet-stream",a=/constructor/i.test(tn.HTMLElement)||tn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||n&&a)&&(typeof FileReader>"u"?"undefined":Ns(FileReader))==="object"){var s=new FileReader;s.onloadend=function(){var v=s.result;v=c?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=v:location=v,i=null},s.readAsDataURL(e)}else{var p=tn.URL||tn.webkitURL,g=p.createObjectURL(e);i?i.location=g:location.href=g,i=null,setTimeout(function(){p.revokeObjectURL(g)},4e4)}});function FN(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(s){return[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}}],i=0;i<r.length;i++){var n=r[i].re,a=r[i].process,c=n.exec(e);c&&(t=a(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var s=this.r.toString(16),p=this.g.toString(16),g=this.b.toString(16);return s.length==1&&(s="0"+s),p.length==1&&(p="0"+p),g.length==1&&(g="0"+g),"#"+s+p+g}}var h2=tn.atob.bind(tn),eE=tn.btoa.bind(tn);function ew(e,t){var r=e[0],i=e[1],n=e[2],a=e[3];r=Uc(r,i,n,a,t[0],7,-680876936),a=Uc(a,r,i,n,t[1],12,-389564586),n=Uc(n,a,r,i,t[2],17,606105819),i=Uc(i,n,a,r,t[3],22,-1044525330),r=Uc(r,i,n,a,t[4],7,-176418897),a=Uc(a,r,i,n,t[5],12,1200080426),n=Uc(n,a,r,i,t[6],17,-1473231341),i=Uc(i,n,a,r,t[7],22,-45705983),r=Uc(r,i,n,a,t[8],7,1770035416),a=Uc(a,r,i,n,t[9],12,-1958414417),n=Uc(n,a,r,i,t[10],17,-42063),i=Uc(i,n,a,r,t[11],22,-1990404162),r=Uc(r,i,n,a,t[12],7,1804603682),a=Uc(a,r,i,n,t[13],12,-40341101),n=Uc(n,a,r,i,t[14],17,-1502002290),r=Oc(r,i=Uc(i,n,a,r,t[15],22,1236535329),n,a,t[1],5,-165796510),a=Oc(a,r,i,n,t[6],9,-1069501632),n=Oc(n,a,r,i,t[11],14,643717713),i=Oc(i,n,a,r,t[0],20,-373897302),r=Oc(r,i,n,a,t[5],5,-701558691),a=Oc(a,r,i,n,t[10],9,38016083),n=Oc(n,a,r,i,t[15],14,-660478335),i=Oc(i,n,a,r,t[4],20,-405537848),r=Oc(r,i,n,a,t[9],5,568446438),a=Oc(a,r,i,n,t[14],9,-1019803690),n=Oc(n,a,r,i,t[3],14,-187363961),i=Oc(i,n,a,r,t[8],20,1163531501),r=Oc(r,i,n,a,t[13],5,-1444681467),a=Oc(a,r,i,n,t[2],9,-51403784),n=Oc(n,a,r,i,t[7],14,1735328473),r=zc(r,i=Oc(i,n,a,r,t[12],20,-1926607734),n,a,t[5],4,-378558),a=zc(a,r,i,n,t[8],11,-2022574463),n=zc(n,a,r,i,t[11],16,1839030562),i=zc(i,n,a,r,t[14],23,-35309556),r=zc(r,i,n,a,t[1],4,-1530992060),a=zc(a,r,i,n,t[4],11,1272893353),n=zc(n,a,r,i,t[7],16,-155497632),i=zc(i,n,a,r,t[10],23,-1094730640),r=zc(r,i,n,a,t[13],4,681279174),a=zc(a,r,i,n,t[0],11,-358537222),n=zc(n,a,r,i,t[3],16,-722521979),i=zc(i,n,a,r,t[6],23,76029189),r=zc(r,i,n,a,t[9],4,-640364487),a=zc(a,r,i,n,t[12],11,-421815835),n=zc(n,a,r,i,t[15],16,530742520),r=Qc(r,i=zc(i,n,a,r,t[2],23,-995338651),n,a,t[0],6,-198630844),a=Qc(a,r,i,n,t[7],10,1126891415),n=Qc(n,a,r,i,t[14],15,-1416354905),i=Qc(i,n,a,r,t[5],21,-57434055),r=Qc(r,i,n,a,t[12],6,1700485571),a=Qc(a,r,i,n,t[3],10,-1894986606),n=Qc(n,a,r,i,t[10],15,-1051523),i=Qc(i,n,a,r,t[1],21,-2054922799),r=Qc(r,i,n,a,t[8],6,1873313359),a=Qc(a,r,i,n,t[15],10,-30611744),n=Qc(n,a,r,i,t[6],15,-1560198380),i=Qc(i,n,a,r,t[13],21,1309151649),r=Qc(r,i,n,a,t[4],6,-145523070),a=Qc(a,r,i,n,t[11],10,-1120210379),n=Qc(n,a,r,i,t[2],15,718787259),i=Qc(i,n,a,r,t[9],21,-343485551),e[0]=up(r,e[0]),e[1]=up(i,e[1]),e[2]=up(n,e[2]),e[3]=up(a,e[3])}function T_(e,t,r,i,n,a){return t=up(up(t,e),up(i,a)),up(t<<n|t>>>32-n,r)}function Uc(e,t,r,i,n,a,c){return T_(t&r|~t&i,e,t,n,a,c)}function Oc(e,t,r,i,n,a,c){return T_(t&i|r&~i,e,t,n,a,c)}function zc(e,t,r,i,n,a,c){return T_(t^r^i,e,t,n,a,c)}function Qc(e,t,r,i,n,a,c){return T_(r^(t|~i),e,t,n,a,c)}function NN(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)ew(i,nq(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(ew(i,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,ew(i,n),i}function nq(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var tE="0123456789abcdef".split("");function sq(e){for(var t="",r=0;r<4;r++)t+=tE[e>>8*r+4&15]+tE[e>>8*r&15];return t}function aq(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function B5(e){return NN(e).map(aq).join("")}var oq=function(e){for(var t=0;t<e.length;t++)e[t]=sq(e[t]);return e.join("")}(NN("hello"))!="5d41402abc4b2a76b9719d911017c592";function up(e,t){if(oq){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function S5(e,t){var r,i,n,a;if(e!==r){for(var c=(n=e,a=1+(256/e.length|0),new Array(a+1).join(n)),s=[],p=0;p<256;p++)s[p]=p;var g=0;for(p=0;p<256;p++){var v=s[p];g=(g+v+c.charCodeAt(p))%256,s[p]=s[g],s[g]=v}r=e,i=s}else s=i;var B=t.length,F=0,C=0,L="";for(p=0;p<B;p++)C=(C+(v=s[F=(F+1)%256]))%256,s[F]=s[C],s[C]=v,c=s[(s[F]+s[C])%256],L+=String.fromCharCode(t.charCodeAt(p)^c);return L}var rE={print:4,modify:8,copy:16,"annot-forms":32};function jm(e,t,r,i){this.v=1,this.r=2;var n=192;e.forEach(function(s){if(rE.perm!==void 0)throw new Error("Invalid permission: "+s);n+=rE[s]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),c=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^n)),this.encryptionKey=B5(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=S5(this.encryptionKey,this.padding)}function Um(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var n=e.charCodeAt(i);t+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):e[i]}return t}function iE(e){if(Ns(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,n){if(n=n||!1,typeof r!="string"||typeof i!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[i,!!n],a},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),n=[];for(var a in t[r]){var c=t[r][a];try{c[0].apply(e,i)}catch(s){tn.console&&Js.error("jsPDF PubSub Error",s.message,s)}c[1]&&n.push(a)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function R2(e){if(!(this instanceof R2))return new R2(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function IN(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function a0(e,t,r,i,n){if(!(this instanceof a0))return new a0(e,t,r,i,n);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,IN.call(this,i,n)}function Hm(e,t,r,i,n){if(!(this instanceof Hm))return new Hm(e,t,r,i,n);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,IN.call(this,i,n)}function ki(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],n=arguments[2],a=arguments[3],c=[],s=1,p=16,g="S",v=null;Ns(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,n=e.format||n,a=e.compress||e.compressPdf||a,(v=e.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),s=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(p=e.floatPrecision),g=e.defaultPathOperation||"S"),c=e.filters||(a===!0?["FlateEncode"]:c),i=i||"mm",r=(""+(r||"P")).toLowerCase();var B=e.putOnlyUsedFonts||!1,F={},C={internal:{},__private__:{}};C.__private__.PubSub=iE;var L="1.3",P=C.__private__.getPdfVersion=function(){return L};C.__private__.setPdfVersion=function(re){L=re};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return D};var j=C.__private__.getPageFormat=function(re){return D[re]};n=n||"a4";var q="compat",H="advanced",ee=q;function G(){this.saveGraphicsState(),Ve(new Yr(ye,0,0,-ye,0,Xl()*ye).toString()+" cm"),this.setFontSize(this.getFontSize()/ye),g="n",ee=H}function ne(){this.restoreGraphicsState(),g="S",ee=q}var Z=C.__private__.combineFontStyleAndFontWeight=function(re,Ie){if(re=="bold"&&Ie=="normal"||re=="bold"&&Ie==400||re=="normal"&&Ie=="italic"||re=="bold"&&Ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ie&&(re=Ie==400||Ie==="normal"?re==="italic"?"italic":"normal":Ie!=700&&Ie!=="bold"||re!=="normal"?(Ie==700?"bold":Ie)+""+re:"bold"),re};C.advancedAPI=function(re){var Ie=ee===q;return Ie&&G.call(this),typeof re!="function"||(re(this),Ie&&ne.call(this)),this},C.compatAPI=function(re){var Ie=ee===H;return Ie&&ne.call(this),typeof re!="function"||(re(this),Ie&&G.call(this)),this},C.isAdvancedAPI=function(){return ee===H};var le,J=function(re){if(ee!==H)throw new Error(re+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ce=C.roundToPrecision=C.__private__.roundToPrecision=function(re,Ie){var At=t||Ie;if(isNaN(re)||isNaN(At))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return re.toFixed(At).replace(/0+$/,"")};le=C.hpf=C.__private__.hpf=typeof p=="number"?function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(re,p)}:p==="smart"?function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(re,re>-1&&re<1?16:5)}:function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(re,16)};var te=C.f2=C.__private__.f2=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.f2");return ce(re,2)},K=C.__private__.f3=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.f3");return ce(re,3)},me=C.scale=C.__private__.scale=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.scale");return ee===q?re*ye:ee===H?re:void 0},we=function(re){return me(function(Ie){return ee===q?Xl()-Ie:ee===H?Ie:void 0}(re))};C.__private__.setPrecision=C.setPrecision=function(re){typeof parseInt(re,10)=="number"&&(t=parseInt(re,10))};var Fe,he="00000000000000000000000000000000",Le=C.__private__.getFileId=function(){return he},$e=C.__private__.setFileId=function(re){return he=re!==void 0&&/^[a-fA-F0-9]{32}$/.test(re)?re.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(kn=new jm(v.userPermissions,v.userPassword,v.ownerPassword,he)),he};C.setFileId=function(re){return $e(re),this},C.getFileId=function(){return Le()};var Ne=C.__private__.convertDateToPDFDate=function(re){var Ie=re.getTimezoneOffset(),At=Ie<0?"+":"-",Et=Math.floor(Math.abs(Ie/60)),Ht=Math.abs(Ie%60),cr=[At,fe(Et),"'",fe(Ht),"'"].join("");return["D:",re.getFullYear(),fe(re.getMonth()+1),fe(re.getDate()),fe(re.getHours()),fe(re.getMinutes()),fe(re.getSeconds()),cr].join("")},Te=C.__private__.convertPDFDateToDate=function(re){var Ie=parseInt(re.substr(2,4),10),At=parseInt(re.substr(6,2),10)-1,Et=parseInt(re.substr(8,2),10),Ht=parseInt(re.substr(10,2),10),cr=parseInt(re.substr(12,2),10),Br=parseInt(re.substr(14,2),10);return new Date(Ie,At,Et,Ht,cr,Br,0)},Ge=C.__private__.setCreationDate=function(re){var Ie;if(re===void 0&&(re=new Date),re instanceof Date)Ie=Ne(re);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(re))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ie=re}return Fe=Ie},Y=C.__private__.getCreationDate=function(re){var Ie=Fe;return re==="jsDate"&&(Ie=Te(Fe)),Ie};C.setCreationDate=function(re){return Ge(re),this},C.getCreationDate=function(re){return Y(re)};var Ae,fe=C.__private__.padd2=function(re){return("0"+parseInt(re)).slice(-2)},be=C.__private__.padd2Hex=function(re){return("00"+(re=re.toString())).substr(re.length)},Me=0,ze=[],We=[],ut=0,dt=[],zt=[],ve=!1,Ct=We;C.__private__.setCustomOutputDestination=function(re){ve=!0,Ct=re};var Pt=function(re){ve||(Ct=re)};C.__private__.resetCustomOutputDestination=function(){ve=!1,Ct=We};var Ve=C.__private__.out=function(re){return re=re.toString(),ut+=re.length+1,Ct.push(re),Ct},lr=C.__private__.write=function(re){return Ve(arguments.length===1?re.toString():Array.prototype.join.call(arguments," "))},ir=C.__private__.getArrayBuffer=function(re){for(var Ie=re.length,At=new ArrayBuffer(Ie),Et=new Uint8Array(At);Ie--;)Et[Ie]=re.charCodeAt(Ie);return At},jr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return jr};var ar=e.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(re){return ar=ee===H?re/ye:re,this};var Wr,Lr=C.__private__.getFontSize=C.getFontSize=function(){return ee===q?ar:ar*ye},Zr=e.R2L||!1;C.__private__.setR2L=C.setR2L=function(re){return Zr=re,this},C.__private__.getR2L=C.getR2L=function(){return Zr};var qr,wi=C.__private__.setZoomMode=function(re){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(re))Wr=re;else if(isNaN(re)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(re)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+re+'" is not recognized.');Wr=re}else Wr=parseInt(re,10)};C.__private__.getZoomMode=function(){return Wr};var Ci,$t=C.__private__.setPageMode=function(re){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(re)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+re+'" is not recognized.');qr=re};C.__private__.getPageMode=function(){return qr};var Ar=C.__private__.setLayoutMode=function(re){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(re)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+re+'" is not recognized.');Ci=re};C.__private__.getLayoutMode=function(){return Ci},C.__private__.setDisplayMode=C.setDisplayMode=function(re,Ie,At){return wi(re),Ar(Ie),$t(At),this};var yr={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(re){if(Object.keys(yr).indexOf(re)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yr[re]},C.__private__.getDocumentProperties=function(){return yr},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(re){for(var Ie in yr)yr.hasOwnProperty(Ie)&&re[Ie]&&(yr[Ie]=re[Ie]);return this},C.__private__.setDocumentProperty=function(re,Ie){if(Object.keys(yr).indexOf(re)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yr[re]=Ie};var it,ye,Ce,Re,Ze,ot={},vt={},Rt=[],xt={},Gt={},er={},qt={},Mr=null,Fr=0,wt=[],ei=new iE(C),Ji=e.hotfixes||[],Hr={},Ri={},In=[],Yr=function re(Ie,At,Et,Ht,cr,Br){if(!(this instanceof re))return new re(Ie,At,Et,Ht,cr,Br);isNaN(Ie)&&(Ie=1),isNaN(At)&&(At=0),isNaN(Et)&&(Et=0),isNaN(Ht)&&(Ht=1),isNaN(cr)&&(cr=0),isNaN(Br)&&(Br=0),this._matrix=[Ie,At,Et,Ht,cr,Br]};Object.defineProperty(Yr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(re){this._matrix[0]=re}}),Object.defineProperty(Yr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(re){this._matrix[1]=re}}),Object.defineProperty(Yr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(re){this._matrix[2]=re}}),Object.defineProperty(Yr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(re){this._matrix[3]=re}}),Object.defineProperty(Yr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(re){this._matrix[4]=re}}),Object.defineProperty(Yr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(re){this._matrix[5]=re}}),Object.defineProperty(Yr.prototype,"a",{get:function(){return this._matrix[0]},set:function(re){this._matrix[0]=re}}),Object.defineProperty(Yr.prototype,"b",{get:function(){return this._matrix[1]},set:function(re){this._matrix[1]=re}}),Object.defineProperty(Yr.prototype,"c",{get:function(){return this._matrix[2]},set:function(re){this._matrix[2]=re}}),Object.defineProperty(Yr.prototype,"d",{get:function(){return this._matrix[3]},set:function(re){this._matrix[3]=re}}),Object.defineProperty(Yr.prototype,"e",{get:function(){return this._matrix[4]},set:function(re){this._matrix[4]=re}}),Object.defineProperty(Yr.prototype,"f",{get:function(){return this._matrix[5]},set:function(re){this._matrix[5]=re}}),Object.defineProperty(Yr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Yr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Yr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Yr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Yr.prototype.join=function(re){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(le).join(re)},Yr.prototype.multiply=function(re){var Ie=re.sx*this.sx+re.shy*this.shx,At=re.sx*this.shy+re.shy*this.sy,Et=re.shx*this.sx+re.sy*this.shx,Ht=re.shx*this.shy+re.sy*this.sy,cr=re.tx*this.sx+re.ty*this.shx+this.tx,Br=re.tx*this.shy+re.ty*this.sy+this.ty;return new Yr(Ie,At,Et,Ht,cr,Br)},Yr.prototype.decompose=function(){var re=this.sx,Ie=this.shy,At=this.shx,Et=this.sy,Ht=this.tx,cr=this.ty,Br=Math.sqrt(re*re+Ie*Ie),$r=(re/=Br)*At+(Ie/=Br)*Et;At-=re*$r,Et-=Ie*$r;var ci=Math.sqrt(At*At+Et*Et);return $r/=ci,re*(Et/=ci)<Ie*(At/=ci)&&(re=-re,Ie=-Ie,$r=-$r,Br=-Br),{scale:new Yr(Br,0,0,ci,0,0),translate:new Yr(1,0,0,1,Ht,cr),rotate:new Yr(re,Ie,-Ie,re,0,0),skew:new Yr(1,0,$r,1,0,0)}},Yr.prototype.toString=function(re){return this.join(" ")},Yr.prototype.inversed=function(){var re=this.sx,Ie=this.shy,At=this.shx,Et=this.sy,Ht=this.tx,cr=this.ty,Br=1/(re*Et-Ie*At),$r=Et*Br,ci=-Ie*Br,ji=-At*Br,Qi=re*Br;return new Yr($r,ci,ji,Qi,-$r*Ht-ji*cr,-ci*Ht-Qi*cr)},Yr.prototype.applyToPoint=function(re){var Ie=re.x*this.sx+re.y*this.shx+this.tx,At=re.x*this.shy+re.y*this.sy+this.ty;return new Wl(Ie,At)},Yr.prototype.applyToRectangle=function(re){var Ie=this.applyToPoint(re),At=this.applyToPoint(new Wl(re.x+re.w,re.y+re.h));return new $l(Ie.x,Ie.y,At.x-Ie.x,At.y-Ie.y)},Yr.prototype.clone=function(){var re=this.sx,Ie=this.shy,At=this.shx,Et=this.sy,Ht=this.tx,cr=this.ty;return new Yr(re,Ie,At,Et,Ht,cr)},C.Matrix=Yr;var on=C.matrixMult=function(re,Ie){return Ie.multiply(re)},$i=new Yr(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=$i;var mi=function(re,Ie){if(!Gt[re]){var At=(Ie instanceof a0?"Sh":"P")+(Object.keys(xt).length+1).toString(10);Ie.id=At,Gt[re]=At,xt[At]=Ie,ei.publish("addPattern",Ie)}};C.ShadingPattern=a0,C.TilingPattern=Hm,C.addShadingPattern=function(re,Ie){return J("addShadingPattern()"),mi(re,Ie),this},C.beginTilingPattern=function(re){J("beginTilingPattern()"),ko(re.boundingBox[0],re.boundingBox[1],re.boundingBox[2]-re.boundingBox[0],re.boundingBox[3]-re.boundingBox[1],re.matrix)},C.endTilingPattern=function(re,Ie){J("endTilingPattern()"),Ie.stream=zt[Ae].join(`
`),mi(re,Ie),ei.publish("endTilingPattern",Ie),In.pop().restore()};var ln,gi=C.__private__.newObject=function(){var re=dr();return De(re,!0),re},dr=C.__private__.newObjectDeferred=function(){return Me++,ze[Me]=function(){return ut},Me},De=function(re,Ie){return Ie=typeof Ie=="boolean"&&Ie,ze[re]=ut,Ie&&Ve(re+" 0 obj"),re},lt=C.__private__.newAdditionalObject=function(){var re={objId:dr(),content:""};return dt.push(re),re},Ye=dr(),nt=dr(),Qe=C.__private__.decodeColorString=function(re){var Ie=re.split(" ");if(Ie.length!==2||Ie[1]!=="g"&&Ie[1]!=="G")Ie.length!==5||Ie[4]!=="k"&&Ie[4]!=="K"||(Ie=[(1-Ie[0])*(1-Ie[3]),(1-Ie[1])*(1-Ie[3]),(1-Ie[2])*(1-Ie[3]),"r"]);else{var At=parseFloat(Ie[0]);Ie=[At,At,At,"r"]}for(var Et="#",Ht=0;Ht<3;Ht++)Et+=("0"+Math.floor(255*parseFloat(Ie[Ht])).toString(16)).slice(-2);return Et},st=C.__private__.encodeColorString=function(re){var Ie;typeof re=="string"&&(re={ch1:re});var At=re.ch1,Et=re.ch2,Ht=re.ch3,cr=re.ch4,Br=re.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof At=="string"&&At.charAt(0)!=="#"){var $r=new FN(At);if($r.ok)At=$r.toHex();else if(!/^\d*\.?\d*$/.test(At))throw new Error('Invalid color "'+At+'" passed to jsPDF.encodeColorString.')}if(typeof At=="string"&&/^#[0-9A-Fa-f]{3}$/.test(At)&&(At="#"+At[1]+At[1]+At[2]+At[2]+At[3]+At[3]),typeof At=="string"&&/^#[0-9A-Fa-f]{6}$/.test(At)){var ci=parseInt(At.substr(1),16);At=ci>>16&255,Et=ci>>8&255,Ht=255&ci}if(Et===void 0||cr===void 0&&At===Et&&Et===Ht)Ie=typeof At=="string"?At+" "+Br[0]:re.precision===2?te(At/255)+" "+Br[0]:K(At/255)+" "+Br[0];else if(cr===void 0||Ns(cr)==="object"){if(cr&&!isNaN(cr.a)&&cr.a===0)return["1.","1.","1.",Br[1]].join(" ");Ie=typeof At=="string"?[At,Et,Ht,Br[1]].join(" "):re.precision===2?[te(At/255),te(Et/255),te(Ht/255),Br[1]].join(" "):[K(At/255),K(Et/255),K(Ht/255),Br[1]].join(" ")}else Ie=typeof At=="string"?[At,Et,Ht,cr,Br[2]].join(" "):re.precision===2?[te(At),te(Et),te(Ht),te(cr),Br[2]].join(" "):[K(At),K(Et),K(Ht),K(cr),Br[2]].join(" ");return Ie},Tt=C.__private__.getFilters=function(){return c},sr=C.__private__.putStream=function(re){var Ie=(re=re||{}).data||"",At=re.filters||Tt(),Et=re.alreadyAppliedFilters||[],Ht=re.addLength1||!1,cr=Ie.length,Br=re.objectId,$r=function(da){return da};if(v!==null&&Br===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&($r=kn.encryptor(Br,0));var ci={};At===!0&&(At=["FlateEncode"]);var ji=re.additionalKeyValues||[],Qi=(ci=ki.API.processDataByFilters!==void 0?ki.API.processDataByFilters(Ie,At):{data:Ie,reverseChain:[]}).reverseChain+(Array.isArray(Et)?Et.join(" "):Et.toString());if(ci.data.length!==0&&(ji.push({key:"Length",value:ci.data.length}),Ht===!0&&ji.push({key:"Length1",value:cr})),Qi.length!=0)if(Qi.split("/").length-1==1)ji.push({key:"Filter",value:Qi});else{ji.push({key:"Filter",value:"["+Qi+"]"});for(var Zi=0;Zi<ji.length;Zi+=1)if(ji[Zi].key==="DecodeParms"){for(var Bn=[],Gs=0;Gs<ci.reverseChain.split("/").length-1;Gs+=1)Bn.push("null");Bn.push(ji[Zi].value),ji[Zi].value="["+Bn.join(" ")+"]"}}Ve("<<");for(var Qn=0;Qn<ji.length;Qn++)Ve("/"+ji[Qn].key+" "+ji[Qn].value);Ve(">>"),ci.data.length!==0&&(Ve("stream"),Ve($r(ci.data)),Ve("endstream"))},jt=C.__private__.putPage=function(re){var Ie=re.number,At=re.data,Et=re.objId,Ht=re.contentsObjId;De(Et,!0),Ve("<</Type /Page"),Ve("/Parent "+re.rootDictionaryObjId+" 0 R"),Ve("/Resources "+re.resourceDictionaryObjId+" 0 R"),Ve("/MediaBox ["+parseFloat(le(re.mediaBox.bottomLeftX))+" "+parseFloat(le(re.mediaBox.bottomLeftY))+" "+le(re.mediaBox.topRightX)+" "+le(re.mediaBox.topRightY)+"]"),re.cropBox!==null&&Ve("/CropBox ["+le(re.cropBox.bottomLeftX)+" "+le(re.cropBox.bottomLeftY)+" "+le(re.cropBox.topRightX)+" "+le(re.cropBox.topRightY)+"]"),re.bleedBox!==null&&Ve("/BleedBox ["+le(re.bleedBox.bottomLeftX)+" "+le(re.bleedBox.bottomLeftY)+" "+le(re.bleedBox.topRightX)+" "+le(re.bleedBox.topRightY)+"]"),re.trimBox!==null&&Ve("/TrimBox ["+le(re.trimBox.bottomLeftX)+" "+le(re.trimBox.bottomLeftY)+" "+le(re.trimBox.topRightX)+" "+le(re.trimBox.topRightY)+"]"),re.artBox!==null&&Ve("/ArtBox ["+le(re.artBox.bottomLeftX)+" "+le(re.artBox.bottomLeftY)+" "+le(re.artBox.topRightX)+" "+le(re.artBox.topRightY)+"]"),typeof re.userUnit=="number"&&re.userUnit!==1&&Ve("/UserUnit "+re.userUnit),ei.publish("putPage",{objId:Et,pageContext:wt[Ie],pageNumber:Ie,page:At}),Ve("/Contents "+Ht+" 0 R"),Ve(">>"),Ve("endobj");var cr=At.join(`
`);return ee===H&&(cr+=`
Q`),De(Ht,!0),sr({data:cr,filters:Tt(),objectId:Ht}),Ve("endobj"),Et},Kt=C.__private__.putPages=function(){var re,Ie,At=[];for(re=1;re<=Fr;re++)wt[re].objId=dr(),wt[re].contentsObjId=dr();for(re=1;re<=Fr;re++)At.push(jt({number:re,data:zt[re],objId:wt[re].objId,contentsObjId:wt[re].contentsObjId,mediaBox:wt[re].mediaBox,cropBox:wt[re].cropBox,bleedBox:wt[re].bleedBox,trimBox:wt[re].trimBox,artBox:wt[re].artBox,userUnit:wt[re].userUnit,rootDictionaryObjId:Ye,resourceDictionaryObjId:nt}));De(Ye,!0),Ve("<</Type /Pages");var Et="/Kids [";for(Ie=0;Ie<Fr;Ie++)Et+=At[Ie]+" 0 R ";Ve(Et+"]"),Ve("/Count "+Fr),Ve(">>"),Ve("endobj"),ei.publish("postPutPages")},Mt=function(re){ei.publish("putFont",{font:re,out:Ve,newObject:gi,putStream:sr}),re.isAlreadyPutted!==!0&&(re.objectNumber=gi(),Ve("<<"),Ve("/Type /Font"),Ve("/BaseFont /"+Um(re.postScriptName)),Ve("/Subtype /Type1"),typeof re.encoding=="string"&&Ve("/Encoding /"+re.encoding),Ve("/FirstChar 32"),Ve("/LastChar 255"),Ve(">>"),Ve("endobj"))},Cr=function(re){re.objectNumber=gi();var Ie=[];Ie.push({key:"Type",value:"/XObject"}),Ie.push({key:"Subtype",value:"/Form"}),Ie.push({key:"BBox",value:"["+[le(re.x),le(re.y),le(re.x+re.width),le(re.y+re.height)].join(" ")+"]"}),Ie.push({key:"Matrix",value:"["+re.matrix.toString()+"]"});var At=re.pages[1].join(`
`);sr({data:At,additionalKeyValues:Ie,objectId:re.objectNumber}),Ve("endobj")},Dr=function(re,Ie){Ie||(Ie=21);var At=gi(),Et=function(Br,$r){var ci,ji=[],Qi=1/($r-1);for(ci=0;ci<1;ci+=Qi)ji.push(ci);if(ji.push(1),Br[0].offset!=0){var Zi={offset:0,color:Br[0].color};Br.unshift(Zi)}if(Br[Br.length-1].offset!=1){var Bn={offset:1,color:Br[Br.length-1].color};Br.push(Bn)}for(var Gs="",Qn=0,da=0;da<ji.length;da++){for(ci=ji[da];ci>Br[Qn+1].offset;)Qn++;var Ms=Br[Qn].offset,Da=(ci-Ms)/(Br[Qn+1].offset-Ms),yl=Br[Qn].color,tl=Br[Qn+1].color;Gs+=be(Math.round((1-Da)*yl[0]+Da*tl[0]).toString(16))+be(Math.round((1-Da)*yl[1]+Da*tl[1]).toString(16))+be(Math.round((1-Da)*yl[2]+Da*tl[2]).toString(16))}return Gs.trim()}(re.colors,Ie),Ht=[];Ht.push({key:"FunctionType",value:"0"}),Ht.push({key:"Domain",value:"[0.0 1.0]"}),Ht.push({key:"Size",value:"["+Ie+"]"}),Ht.push({key:"BitsPerSample",value:"8"}),Ht.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ht.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:Et,additionalKeyValues:Ht,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:At}),Ve("endobj"),re.objectNumber=gi(),Ve("<< /ShadingType "+re.type),Ve("/ColorSpace /DeviceRGB");var cr="/Coords ["+le(parseFloat(re.coords[0]))+" "+le(parseFloat(re.coords[1]))+" ";re.type===2?cr+=le(parseFloat(re.coords[2]))+" "+le(parseFloat(re.coords[3])):cr+=le(parseFloat(re.coords[2]))+" "+le(parseFloat(re.coords[3]))+" "+le(parseFloat(re.coords[4]))+" "+le(parseFloat(re.coords[5])),Ve(cr+="]"),re.matrix&&Ve("/Matrix ["+re.matrix.toString()+"]"),Ve("/Function "+At+" 0 R"),Ve("/Extend [true true]"),Ve(">>"),Ve("endobj")},Kr=function(re,Ie){var At=dr(),Et=gi();Ie.push({resourcesOid:At,objectOid:Et}),re.objectNumber=Et;var Ht=[];Ht.push({key:"Type",value:"/Pattern"}),Ht.push({key:"PatternType",value:"1"}),Ht.push({key:"PaintType",value:"1"}),Ht.push({key:"TilingType",value:"1"}),Ht.push({key:"BBox",value:"["+re.boundingBox.map(le).join(" ")+"]"}),Ht.push({key:"XStep",value:le(re.xStep)}),Ht.push({key:"YStep",value:le(re.yStep)}),Ht.push({key:"Resources",value:At+" 0 R"}),re.matrix&&Ht.push({key:"Matrix",value:"["+re.matrix.toString()+"]"}),sr({data:re.stream,additionalKeyValues:Ht,objectId:re.objectNumber}),Ve("endobj")},Pr=function(re){for(var Ie in re.objectNumber=gi(),Ve("<<"),re)switch(Ie){case"opacity":Ve("/ca "+te(re[Ie]));break;case"stroke-opacity":Ve("/CA "+te(re[Ie]))}Ve(">>"),Ve("endobj")},Gr=function(re){De(re.resourcesOid,!0),Ve("<<"),Ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ie in Ve("/Font <<"),ot)ot.hasOwnProperty(Ie)&&(B===!1||B===!0&&F.hasOwnProperty(Ie))&&Ve("/"+Ie+" "+ot[Ie].objectNumber+" 0 R");Ve(">>")}(),function(){if(Object.keys(xt).length>0){for(var Ie in Ve("/Shading <<"),xt)xt.hasOwnProperty(Ie)&&xt[Ie]instanceof a0&&xt[Ie].objectNumber>=0&&Ve("/"+Ie+" "+xt[Ie].objectNumber+" 0 R");ei.publish("putShadingPatternDict"),Ve(">>")}}(),function(Ie){if(Object.keys(xt).length>0){for(var At in Ve("/Pattern <<"),xt)xt.hasOwnProperty(At)&&xt[At]instanceof C.TilingPattern&&xt[At].objectNumber>=0&&xt[At].objectNumber<Ie&&Ve("/"+At+" "+xt[At].objectNumber+" 0 R");ei.publish("putTilingPatternDict"),Ve(">>")}}(re.objectOid),function(){if(Object.keys(er).length>0){var Ie;for(Ie in Ve("/ExtGState <<"),er)er.hasOwnProperty(Ie)&&er[Ie].objectNumber>=0&&Ve("/"+Ie+" "+er[Ie].objectNumber+" 0 R");ei.publish("putGStateDict"),Ve(">>")}}(),function(){for(var Ie in Ve("/XObject <<"),Hr)Hr.hasOwnProperty(Ie)&&Hr[Ie].objectNumber>=0&&Ve("/"+Ie+" "+Hr[Ie].objectNumber+" 0 R");ei.publish("putXobjectDict"),Ve(">>")}(),Ve(">>"),Ve("endobj")},yi=function(re){vt[re.fontName]=vt[re.fontName]||{},vt[re.fontName][re.fontStyle]=re.id},Fi=function(re,Ie,At,Et,Ht){var cr={id:"F"+(Object.keys(ot).length+1).toString(10),postScriptName:re,fontName:Ie,fontStyle:At,encoding:Et,isStandardFont:Ht||!1,metadata:{}};return ei.publish("addFont",{font:cr,instance:this}),ot[cr.id]=cr,yi(cr),cr.id},Ni=C.__private__.pdfEscape=C.pdfEscape=function(re,Ie){return function(At,Et){var Ht,cr,Br,$r,ci,ji,Qi,Zi,Bn;if(Br=(Et=Et||{}).sourceEncoding||"Unicode",ci=Et.outputEncoding,(Et.autoencode||ci)&&ot[it].metadata&&ot[it].metadata[Br]&&ot[it].metadata[Br].encoding&&($r=ot[it].metadata[Br].encoding,!ci&&ot[it].encoding&&(ci=ot[it].encoding),!ci&&$r.codePages&&(ci=$r.codePages[0]),typeof ci=="string"&&(ci=$r[ci]),ci)){for(Qi=!1,ji=[],Ht=0,cr=At.length;Ht<cr;Ht++)(Zi=ci[At.charCodeAt(Ht)])?ji.push(String.fromCharCode(Zi)):ji.push(At[Ht]),ji[Ht].charCodeAt(0)>>8&&(Qi=!0);At=ji.join("")}for(Ht=At.length;Qi===void 0&&Ht!==0;)At.charCodeAt(Ht-1)>>8&&(Qi=!0),Ht--;if(!Qi)return At;for(ji=Et.noBOM?[]:[254,255],Ht=0,cr=At.length;Ht<cr;Ht++){if((Bn=(Zi=At.charCodeAt(Ht))>>8)>>8)throw new Error("Character at position "+Ht+" of string '"+At+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ji.push(Bn),ji.push(Zi-(Bn<<8))}return String.fromCharCode.apply(void 0,ji)}(re,Ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_i=C.__private__.beginPage=function(re){zt[++Fr]=[],wt[Fr]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(re[0]),topRightY:Number(re[1])}},Ma(Fr),Pt(zt[Ae])},Qa=function(re,Ie){var At,Et,Ht;switch(r=Ie||r,typeof re=="string"&&(At=j(re.toLowerCase()),Array.isArray(At)&&(Et=At[0],Ht=At[1])),Array.isArray(re)&&(Et=re[0]*ye,Ht=re[1]*ye),isNaN(Et)&&(Et=n[0],Ht=n[1]),(Et>14400||Ht>14400)&&(Js.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Et=Math.min(14400,Et),Ht=Math.min(14400,Ht)),n=[Et,Ht],r.substr(0,1)){case"l":Ht>Et&&(n=[Ht,Et]);break;case"p":Et>Ht&&(n=[Ht,Et])}_i(n),oi(so),Ve(el),bi!==0&&Ve(bi+" J"),Kl!==0&&Ve(Kl+" j"),ei.publish("addPage",{pageNumber:Fr})},La=function(re){re>0&&re<=Fr&&(zt.splice(re,1),wt.splice(re,1),Fr--,Ae>Fr&&(Ae=Fr),this.setPage(Ae))},Ma=function(re){re>0&&re<=Fr&&(Ae=re)},ea=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return zt.length-1},xa=function(re,Ie,At){var Et,Ht=void 0;return At=At||{},re=re!==void 0?re:ot[it].fontName,Ie=Ie!==void 0?Ie:ot[it].fontStyle,Et=re.toLowerCase(),vt[Et]!==void 0&&vt[Et][Ie]!==void 0?Ht=vt[Et][Ie]:vt[re]!==void 0&&vt[re][Ie]!==void 0?Ht=vt[re][Ie]:At.disableWarning===!1&&Js.warn("Unable to look up font label for font '"+re+"', '"+Ie+"'. Refer to getFontList() for available fonts."),Ht||At.noFallback||(Ht=vt.times[Ie])==null&&(Ht=vt.times.normal),Ht},Qs=C.__private__.putInfo=function(){var re=gi(),Ie=function(Et){return Et};for(var At in v!==null&&(Ie=kn.encryptor(re,0)),Ve("<<"),Ve("/Producer ("+Ni(Ie("jsPDF "+ki.version))+")"),yr)yr.hasOwnProperty(At)&&yr[At]&&Ve("/"+At.substr(0,1).toUpperCase()+At.substr(1)+" ("+Ni(Ie(yr[At]))+")");Ve("/CreationDate ("+Ni(Ie(Fe))+")"),Ve(">>"),Ve("endobj")},iu=C.__private__.putCatalog=function(re){var Ie=(re=re||{}).rootDictionaryObjId||Ye;switch(gi(),Ve("<<"),Ve("/Type /Catalog"),Ve("/Pages "+Ie+" 0 R"),Wr||(Wr="fullwidth"),Wr){case"fullwidth":Ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ve("/OpenAction [3 0 R /Fit]");break;case"original":Ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var At=""+Wr;At.substr(At.length-1)==="%"&&(Wr=parseInt(Wr)/100),typeof Wr=="number"&&Ve("/OpenAction [3 0 R /XYZ null null "+te(Wr)+"]")}switch(Ci||(Ci="continuous"),Ci){case"continuous":Ve("/PageLayout /OneColumn");break;case"single":Ve("/PageLayout /SinglePage");break;case"two":case"twoleft":Ve("/PageLayout /TwoColumnLeft");break;case"tworight":Ve("/PageLayout /TwoColumnRight")}qr&&Ve("/PageMode /"+qr),ei.publish("putCatalog"),Ve(">>"),Ve("endobj")},no=C.__private__.putTrailer=function(){Ve("trailer"),Ve("<<"),Ve("/Size "+(Me+1)),Ve("/Root "+Me+" 0 R"),Ve("/Info "+(Me-1)+" 0 R"),v!==null&&Ve("/Encrypt "+kn.oid+" 0 R"),Ve("/ID [ <"+he+"> <"+he+"> ]"),Ve(">>")},rs=C.__private__.putHeader=function(){Ve("%PDF-"+L),Ve("%")},cA=C.__private__.putXRef=function(){var re="0000000000";Ve("xref"),Ve("0 "+(Me+1)),Ve("0000000000 65535 f ");for(var Ie=1;Ie<=Me;Ie++)typeof ze[Ie]=="function"?Ve((re+ze[Ie]()).slice(-10)+" 00000 n "):ze[Ie]!==void 0?Ve((re+ze[Ie]).slice(-10)+" 00000 n "):Ve("0000000000 00000 n ")},$o=C.__private__.buildDocument=function(){var re;Me=0,ut=0,We=[],ze=[],dt=[],Ye=dr(),nt=dr(),Pt(We),ei.publish("buildDocument"),rs(),Kt(),function(){ei.publish("putAdditionalObjects");for(var At=0;At<dt.length;At++){var Et=dt[At];De(Et.objId,!0),Ve(Et.content),Ve("endobj")}ei.publish("postPutAdditionalObjects")}(),re=[],function(){for(var At in ot)ot.hasOwnProperty(At)&&(B===!1||B===!0&&F.hasOwnProperty(At))&&Mt(ot[At])}(),function(){var At;for(At in er)er.hasOwnProperty(At)&&Pr(er[At])}(),function(){for(var At in Hr)Hr.hasOwnProperty(At)&&Cr(Hr[At])}(),function(At){var Et;for(Et in xt)xt.hasOwnProperty(Et)&&(xt[Et]instanceof a0?Dr(xt[Et]):xt[Et]instanceof Hm&&Kr(xt[Et],At))}(re),ei.publish("putResources"),re.forEach(Gr),Gr({resourcesOid:nt,objectOid:Number.MAX_SAFE_INTEGER}),ei.publish("postPutResources"),v!==null&&(kn.oid=gi(),Ve("<<"),Ve("/Filter /Standard"),Ve("/V "+kn.v),Ve("/R "+kn.r),Ve("/U <"+kn.toHexString(kn.U)+">"),Ve("/O <"+kn.toHexString(kn.O)+">"),Ve("/P "+kn.P),Ve(">>"),Ve("endobj")),Qs(),iu();var Ie=ut;return cA(),no(),Ve("startxref"),Ve(""+Ie),Ve("%%EOF"),Pt(zt[Ae]),We.join(`
`)},oh=C.__private__.getBlob=function(re){return new Blob([ir(re)],{type:"application/pdf"})},lh=C.output=C.__private__.output=(ln=function(re,Ie){switch(typeof(Ie=Ie||{})=="string"?Ie={filename:Ie}:Ie.filename=Ie.filename||"generated.pdf",re){case void 0:return $o();case"save":C.save(Ie.filename);break;case"arraybuffer":return ir($o());case"blob":return oh($o());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(oh($o()))||void 0;Js.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var At="",Et=$o();try{At=eE(Et)}catch{At=eE(unescape(encodeURIComponent(Et)))}return"data:application/pdf;filename="+Ie.filename+";base64,"+At;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Ht="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",cr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ie.pdfObjectUrl&&(Ht=Ie.pdfObjectUrl,cr="");var Br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ht+'"'+cr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ie)+");<\/script></body></html>",$r=tn.open();return $r!==null&&$r.document.write(Br),$r}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var ci='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ie.filename+'" width="500px" height="400px" /></body></html>',ji=tn.open();if(ji!==null){ji.document.write(ci);var Qi=this;ji.document.documentElement.querySelector("#pdfViewer").onload=function(){ji.document.title=Ie.filename,ji.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qi.output("bloburl"))}}return ji}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Zi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ie)+'"></iframe></body></html>',Bn=tn.open();if(Bn!==null&&(Bn.document.write(Zi),Bn.document.title=Ie.filename),Bn||typeof safari>"u")return Bn;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",Ie);default:return null}},ln.foo=function(){try{return ln.apply(this,arguments)}catch(At){var re=At.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var Ie="Error in function "+re.split(`
`)[0].split("<")[0]+": "+At.message;if(!tn.console)throw new Error(Ie);tn.console.error(Ie,At),tn.alert&&alert(Ie)}},ln.foo.bar=ln,ln.foo),Xo=function(re){return Array.isArray(Ji)===!0&&Ji.indexOf(re)>-1};switch(i){case"pt":ye=1;break;case"mm":ye=72/25.4;break;case"cm":ye=72/2.54;break;case"in":ye=72;break;case"px":ye=Xo("px_scaling")==1?.75:96/72;break;case"pc":case"em":ye=12;break;case"ex":ye=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);ye=i}var kn=null;Ge(),$e();var Pa=C.__private__.getPageInfo=C.getPageInfo=function(re){if(isNaN(re)||re%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wt[re].objId,pageNumber:re,pageContext:wt[re]}},ch=C.__private__.getPageInfoByObjId=function(re){if(isNaN(re)||re%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ie in wt)if(wt[Ie].objId===re)break;return Pa(Ie)},Nh=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:wt[Ae].objId,pageNumber:Ae,pageContext:wt[Ae]}};C.addPage=function(){return Qa.apply(this,arguments),this},C.setPage=function(){return Ma.apply(this,arguments),Pt.call(this,zt[Ae]),this},C.insertPage=function(re){return this.addPage(),this.movePage(Ae,re),this},C.movePage=function(re,Ie){var At,Et;if(re>Ie){At=zt[re],Et=wt[re];for(var Ht=re;Ht>Ie;Ht--)zt[Ht]=zt[Ht-1],wt[Ht]=wt[Ht-1];zt[Ie]=At,wt[Ie]=Et,this.setPage(Ie)}else if(re<Ie){At=zt[re],Et=wt[re];for(var cr=re;cr<Ie;cr++)zt[cr]=zt[cr+1],wt[cr]=wt[cr+1];zt[Ie]=At,wt[Ie]=Et,this.setPage(Ie)}return this},C.deletePage=function(){return La.apply(this,arguments),this},C.__private__.text=C.text=function(re,Ie,At,Et,Ht){var cr,Br,$r,ci,ji,Qi,Zi,Bn,Gs,Qn=(Et=Et||{}).scope||this;if(typeof re=="number"&&typeof Ie=="number"&&(typeof At=="string"||Array.isArray(At))){var da=At;At=Ie,Ie=re,re=da}if(arguments[3]instanceof Yr==0?($r=arguments[4],ci=arguments[5],Ns(Zi=arguments[3])==="object"&&Zi!==null||(typeof $r=="string"&&(ci=$r,$r=null),typeof Zi=="string"&&(ci=Zi,Zi=null),typeof Zi=="number"&&($r=Zi,Zi=null),Et={flags:Zi,angle:$r,align:ci})):(J("The transform parameter of text() with a Matrix value"),Gs=Ht),isNaN(Ie)||isNaN(At)||re==null)throw new Error("Invalid arguments passed to jsPDF.text");if(re.length===0)return Qn;var Ms,Da="",yl=typeof Et.lineHeightFactor=="number"?Et.lineHeightFactor:Ha,tl=Qn.internal.scaleFactor;function _l(pn){return pn=pn.split("	").join(Array(Et.TabLen||9).join(" ")),Ni(pn,Zi)}function bl(pn){for(var Hn,Cs=pn.concat(),os=[],rc=Cs.length;rc--;)typeof(Hn=Cs.shift())=="string"?os.push(Hn):Array.isArray(pn)&&(Hn.length===1||Hn[1]===void 0&&Hn[2]===void 0)?os.push(Hn[0]):os.push([Hn[0],Hn[1],Hn[2]]);return os}function wl(pn,Hn){var Cs;if(typeof pn=="string")Cs=Hn(pn)[0];else if(Array.isArray(pn)){for(var os,rc,cu=pn.concat(),Bc=[],Ah=cu.length;Ah--;)typeof(os=cu.shift())=="string"?Bc.push(Hn(os)[0]):Array.isArray(os)&&typeof os[0]=="string"&&(rc=Hn(os[0],os[1],os[2]),Bc.push([rc[0],rc[1],rc[2]]));Cs=Bc}return Cs}var wa=!1,su=!0;if(typeof re=="string")wa=!0;else if(Array.isArray(re)){var _c=re.concat();Br=[];for(var No,Ps=_c.length;Ps--;)(typeof(No=_c.shift())!="string"||Array.isArray(No)&&typeof No[0]!="string")&&(su=!1);wa=su}if(wa===!1)throw new Error('Type of text must be string or Array. "'+re+'" is not recognized.');typeof re=="string"&&(re=re.match(/[\r?\n]/)?re.split(/\r\n|\r|\n/g):[re]);var Fu=ar/Qn.internal.scaleFactor,ao=Fu*(yl-1);switch(Et.baseline){case"bottom":At-=ao;break;case"top":At+=Fu-ao;break;case"hanging":At+=Fu-2*ao;break;case"middle":At+=Fu/2-ao}if((Qi=Et.maxWidth||0)>0&&(typeof re=="string"?re=Qn.splitTextToSize(re,Qi):Object.prototype.toString.call(re)==="[object Array]"&&(re=re.reduce(function(pn,Hn){return pn.concat(Qn.splitTextToSize(Hn,Qi))},[]))),cr={text:re,x:Ie,y:At,options:Et,mutex:{pdfEscape:Ni,activeFontKey:it,fonts:ot,activeFontSize:ar}},ei.publish("preProcessText",cr),re=cr.text,$r=(Et=cr.options).angle,Gs instanceof Yr==0&&$r&&typeof $r=="number"){$r*=Math.PI/180,Et.rotationDirection===0&&($r=-$r),ee===H&&($r=-$r);var hA=Math.cos($r),bc=Math.sin($r);Gs=new Yr(hA,bc,-bc,hA,0,0)}else $r&&$r instanceof Yr&&(Gs=$r);ee!==H||Gs||(Gs=$i),(ji=Et.charSpace||di)!==void 0&&(Da+=le(me(ji))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Bn=Et.horizontalScale)!==void 0&&(Da+=le(100*Bn)+` Tz
`),Et.lang;var Ga=-1,Cl=Et.renderingMode!==void 0?Et.renderingMode:Et.stroke,Nu=Qn.internal.getCurrentPageInfo().pageContext;switch(Cl){case 0:case!1:case"fill":Ga=0;break;case 1:case!0:case"stroke":Ga=1;break;case 2:case"fillThenStroke":Ga=2;break;case 3:case"invisible":Ga=3;break;case 4:case"fillAndAddForClipping":Ga=4;break;case 5:case"strokeAndAddPathForClipping":Ga=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ga=6;break;case 7:case"addToPathForClipping":Ga=7}var au=Nu.usedRenderingMode!==void 0?Nu.usedRenderingMode:-1;Ga!==-1?Da+=Ga+` Tr
`:au!==-1&&(Da+=`0 Tr
`),Ga!==-1&&(Nu.usedRenderingMode=Ga),ci=Et.align||"left";var Ca,Iu=ar*yl,ou=Qn.internal.pageSize.getWidth(),wc=ot[it];ji=Et.charSpace||di,Qi=Et.maxWidth||0,Zi=Object.assign({autoencode:!0,noBOM:!0},Et.flags);var Cc=[],oo=function(pn){return Qn.getStringUnitWidth(pn,{font:wc,charSpace:ji,fontSize:ar,doKerning:!1})*ar/tl};if(Object.prototype.toString.call(re)==="[object Array]"){var qa;Br=bl(re),ci!=="left"&&(Ca=Br.map(oo));var lo,co=0;if(ci==="right"){Ie-=Ca[0],re=[],Ps=Br.length;for(var Yl=0;Yl<Ps;Yl++)Yl===0?(lo=Va(Ie),qa=Yn(At)):(lo=me(co-Ca[Yl]),qa=-Iu),re.push([Br[Yl],lo,qa]),co=Ca[Yl]}else if(ci==="center"){Ie-=Ca[0]/2,re=[],Ps=Br.length;for(var Jl=0;Jl<Ps;Jl++)Jl===0?(lo=Va(Ie),qa=Yn(At)):(lo=me((co-Ca[Jl])/2),qa=-Iu),re.push([Br[Jl],lo,qa]),co=Ca[Jl]}else if(ci==="left"){re=[],Ps=Br.length;for(var AA=0;AA<Ps;AA++)re.push(Br[AA])}else if(ci==="justify"&&wc.encoding==="Identity-H"){re=[],Ps=Br.length,Qi=Qi!==0?Qi:ou;for(var hh=0,bs=0;bs<Ps;bs++)if(qa=bs===0?Yn(At):-Iu,lo=bs===0?Va(Ie):hh,bs<Ps-1){var dA=me((Qi-Ca[bs])/(Br[bs].split(" ").length-1)),ws=Br[bs].split(" ");re.push([ws[0]+" ",lo,qa]),hh=0;for(var Ka=1;Ka<ws.length;Ka++){var Lu=(oo(ws[Ka-1]+" "+ws[Ka])-oo(ws[Ka]))*tl+dA;Ka==ws.length-1?re.push([ws[Ka],Lu,0]):re.push([ws[Ka]+" ",Lu,0]),hh-=Lu}}else re.push([Br[bs],lo,qa]);re.push(["",hh,0])}else{if(ci!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(re=[],Ps=Br.length,Qi=Qi!==0?Qi:ou,bs=0;bs<Ps;bs++){qa=bs===0?Yn(At):-Iu,lo=bs===0?Va(Ie):0;var lu=Br[bs].split(" ").length-1,Io=lu>0?(Qi-Ca[bs])/lu:0;bs<Ps-1?Cc.push(le(me(Io))):Cc.push(0),re.push([Br[bs],lo,qa])}}}(typeof Et.R2L=="boolean"?Et.R2L:Zr)===!0&&(re=wl(re,function(pn,Hn,Cs){return[pn.split("").reverse().join(""),Hn,Cs]})),cr={text:re,x:Ie,y:At,options:Et,mutex:{pdfEscape:Ni,activeFontKey:it,fonts:ot,activeFontSize:ar}},ei.publish("postProcessText",cr),re=cr.text,Ms=cr.mutex.isHex||!1;var Mu=ot[it].encoding;Mu!=="WinAnsiEncoding"&&Mu!=="StandardEncoding"||(re=wl(re,function(pn,Hn,Cs){return[_l(pn),Hn,Cs]})),Br=bl(re),re=[];for(var Bl,en,Lo,ec=Array.isArray(Br[0])?1:0,Ba="",tc=function(pn,Hn,Cs){var os="";return Cs instanceof Yr?(Cs=typeof Et.angle=="number"?on(Cs,new Yr(1,0,0,1,pn,Hn)):on(new Yr(1,0,0,1,pn,Hn),Cs),ee===H&&(Cs=on(new Yr(1,0,0,-1,0,0),Cs)),os=Cs.join(" ")+` Tm
`):os=le(pn)+" "+le(Hn)+` Td
`,os},rl=0;rl<Br.length;rl++){switch(Ba="",ec){case 1:Lo=(Ms?"<":"(")+Br[rl][0]+(Ms?">":")"),Bl=parseFloat(Br[rl][1]),en=parseFloat(Br[rl][2]);break;case 0:Lo=(Ms?"<":"(")+Br[rl]+(Ms?">":")"),Bl=Va(Ie),en=Yn(At)}Cc!==void 0&&Cc[rl]!==void 0&&(Ba=Cc[rl]+` Tw
`),rl===0?re.push(Ba+tc(Bl,en,Gs)+Lo):ec===0?re.push(Ba+Lo):ec===1&&re.push(Ba+tc(Bl,en,Gs)+Lo)}re=ec===0?re.join(` Tj
T* `):re.join(` Tj
`),re+=` Tj
`;var Wa=`BT
/`;return Wa+=it+" "+ar+` Tf
`,Wa+=le(ar*yl)+` TL
`,Wa+=Fn+`
`,Wa+=Da,Wa+=re,Ve(Wa+="ET"),F[it]=!0,Qn};var To=C.__private__.clip=C.clip=function(re){return Ve(re==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return To("evenodd")},C.__private__.discardPath=C.discardPath=function(){return Ve("n"),this};var Zo=C.__private__.isValidStyle=function(re){var Ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(re)!==-1&&(Ie=!0),Ie};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(re){return Zo(re)&&(g=re),this};var uA=C.__private__.getStyle=C.getStyle=function(re){var Ie=g;switch(re){case"D":case"S":Ie="S";break;case"F":Ie="f";break;case"FD":case"DF":Ie="B";break;case"f":case"f*":case"B":case"B*":Ie=re}return Ie},Yo=C.close=function(){return Ve("h"),this};C.stroke=function(){return Ve("S"),this},C.fill=function(re){return vc("f",re),this},C.fillEvenOdd=function(re){return vc("f*",re),this},C.fillStroke=function(re){return vc("B",re),this},C.fillStrokeEvenOdd=function(re){return vc("B*",re),this};var vc=function(re,Ie){Ns(Ie)==="object"?Xi(Ie,re):Ve(re)},xc=function(re){re===null||ee===H&&re===void 0||(re=uA(re),Ve(re))};function ya(re,Ie,At,Et,Ht){var cr=new Hm(Ie||this.boundingBox,At||this.xStep,Et||this.yStep,this.gState,Ht||this.matrix);cr.stream=this.stream;var Br=re+"$$"+this.cloneIndex+++"$$";return mi(Br,cr),cr}var Xi=function(re,Ie){var At=Gt[re.key],Et=xt[At];if(Et instanceof a0)Ve("q"),Ve(Eu(Ie)),Et.gState&&C.setGState(Et.gState),Ve(re.matrix.toString()+" cm"),Ve("/"+At+" sh"),Ve("Q");else if(Et instanceof Hm){var Ht=new Yr(1,0,0,-1,0,Xl());re.matrix&&(Ht=Ht.multiply(re.matrix||$i),At=ya.call(Et,re.key,re.boundingBox,re.xStep,re.yStep,Ht).id),Ve("q"),Ve("/Pattern cs"),Ve("/"+At+" scn"),Et.gState&&C.setGState(Et.gState),Ve(Ie),Ve("Q")}},Eu=function(re){switch(re){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Aa=C.moveTo=function(re,Ie){return Ve(le(me(re))+" "+le(we(Ie))+" m"),this},Jo=C.lineTo=function(re,Ie){return Ve(le(me(re))+" "+le(we(Ie))+" l"),this},Ti=C.curveTo=function(re,Ie,At,Et,Ht,cr){return Ve([le(me(re)),le(we(Ie)),le(me(At)),le(we(Et)),le(me(Ht)),le(we(cr)),"c"].join(" ")),this};C.__private__.line=C.line=function(re,Ie,At,Et,Ht){if(isNaN(re)||isNaN(Ie)||isNaN(At)||isNaN(Et)||!Zo(Ht))throw new Error("Invalid arguments passed to jsPDF.line");return ee===q?this.lines([[At-re,Et-Ie]],re,Ie,[1,1],Ht||"S"):this.lines([[At-re,Et-Ie]],re,Ie,[1,1]).stroke()},C.__private__.lines=C.lines=function(re,Ie,At,Et,Ht,cr){var Br,$r,ci,ji,Qi,Zi,Bn,Gs,Qn,da,Ms,Da;if(typeof re=="number"&&(Da=At,At=Ie,Ie=re,re=Da),Et=Et||[1,1],cr=cr||!1,isNaN(Ie)||isNaN(At)||!Array.isArray(re)||!Array.isArray(Et)||!Zo(Ht)||typeof cr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Aa(Ie,At),Br=Et[0],$r=Et[1],ji=re.length,da=Ie,Ms=At,ci=0;ci<ji;ci++)(Qi=re[ci]).length===2?(da=Qi[0]*Br+da,Ms=Qi[1]*$r+Ms,Jo(da,Ms)):(Zi=Qi[0]*Br+da,Bn=Qi[1]*$r+Ms,Gs=Qi[2]*Br+da,Qn=Qi[3]*$r+Ms,da=Qi[4]*Br+da,Ms=Qi[5]*$r+Ms,Ti(Zi,Bn,Gs,Qn,da,Ms));return cr&&Yo(),xc(Ht),this},C.path=function(re){for(var Ie=0;Ie<re.length;Ie++){var At=re[Ie],Et=At.c;switch(At.op){case"m":Aa(Et[0],Et[1]);break;case"l":Jo(Et[0],Et[1]);break;case"c":Ti.apply(this,Et);break;case"h":Yo()}}return this},C.__private__.rect=C.rect=function(re,Ie,At,Et,Ht){if(isNaN(re)||isNaN(Ie)||isNaN(At)||isNaN(Et)||!Zo(Ht))throw new Error("Invalid arguments passed to jsPDF.rect");return ee===q&&(Et=-Et),Ve([le(me(re)),le(we(Ie)),le(me(At)),le(me(Et)),"re"].join(" ")),xc(Ht),this},C.__private__.triangle=C.triangle=function(re,Ie,At,Et,Ht,cr,Br){if(isNaN(re)||isNaN(Ie)||isNaN(At)||isNaN(Et)||isNaN(Ht)||isNaN(cr)||!Zo(Br))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[At-re,Et-Ie],[Ht-At,cr-Et],[re-Ht,Ie-cr]],re,Ie,[1,1],Br,!0),this},C.__private__.roundedRect=C.roundedRect=function(re,Ie,At,Et,Ht,cr,Br){if(isNaN(re)||isNaN(Ie)||isNaN(At)||isNaN(Et)||isNaN(Ht)||isNaN(cr)||!Zo(Br))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $r=4/3*(Math.SQRT2-1);return Ht=Math.min(Ht,.5*At),cr=Math.min(cr,.5*Et),this.lines([[At-2*Ht,0],[Ht*$r,0,Ht,cr-cr*$r,Ht,cr],[0,Et-2*cr],[0,cr*$r,-Ht*$r,cr,-Ht,cr],[2*Ht-At,0],[-Ht*$r,0,-Ht,-cr*$r,-Ht,-cr],[0,2*cr-Et],[0,-cr*$r,Ht*$r,-cr,Ht,-cr]],re+Ht,Ie,[1,1],Br,!0),this},C.__private__.ellipse=C.ellipse=function(re,Ie,At,Et,Ht){if(isNaN(re)||isNaN(Ie)||isNaN(At)||isNaN(Et)||!Zo(Ht))throw new Error("Invalid arguments passed to jsPDF.ellipse");var cr=4/3*(Math.SQRT2-1)*At,Br=4/3*(Math.SQRT2-1)*Et;return Aa(re+At,Ie),Ti(re+At,Ie-Br,re+cr,Ie-Et,re,Ie-Et),Ti(re-cr,Ie-Et,re-At,Ie-Br,re-At,Ie),Ti(re-At,Ie+Br,re-cr,Ie+Et,re,Ie+Et),Ti(re+cr,Ie+Et,re+At,Ie+Br,re+At,Ie),xc(Ht),this},C.__private__.circle=C.circle=function(re,Ie,At,Et){if(isNaN(re)||isNaN(Ie)||isNaN(At)||!Zo(Et))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(re,Ie,At,At,Et)},C.setFont=function(re,Ie,At){return At&&(Ie=Z(Ie,At)),it=xa(re,Ie,{disableWarning:!1}),this};var nu=C.__private__.getFont=C.getFont=function(){return ot[xa.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var re,Ie,At={};for(re in vt)if(vt.hasOwnProperty(re))for(Ie in At[re]=[],vt[re])vt[re].hasOwnProperty(Ie)&&At[re].push(Ie);return At},C.addFont=function(re,Ie,At,Et,Ht){var cr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&cr.indexOf(arguments[3])!==-1?Ht=arguments[3]:arguments[3]&&cr.indexOf(arguments[3])==-1&&(At=Z(At,Et)),Fi.call(this,re,Ie,At,Ht=Ht||"Identity-H")};var Ha,so=e.lineWidth||.200025,Ra=C.__private__.getLineWidth=C.getLineWidth=function(){return so},oi=C.__private__.setLineWidth=C.setLineWidth=function(re){return so=re,Ve(le(me(re))+" w"),this};C.__private__.setLineDash=ki.API.setLineDash=ki.API.setLineDashPattern=function(re,Ie){if(re=re||[],Ie=Ie||0,isNaN(Ie)||!Array.isArray(re))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return re=re.map(function(At){return le(me(At))}).join(" "),Ie=le(me(Ie)),Ve("["+re+"] "+Ie+" d"),this};var Hs=C.__private__.getLineHeight=C.getLineHeight=function(){return ar*Ha};C.__private__.getLineHeight=C.getLineHeight=function(){return ar*Ha};var ys=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(re){return typeof(re=re||1.15)=="number"&&(Ha=re),this},An=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Ha};ys(e.lineHeight);var Va=C.__private__.getHorizontalCoordinate=function(re){return me(re)},Yn=C.__private__.getVerticalCoordinate=function(re){return ee===H?re:wt[Ae].mediaBox.topRightY-wt[Ae].mediaBox.bottomLeftY-me(re)},Ls=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(re){return le(Va(re))},_a=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(re){return le(Yn(re))},el=e.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return Qe(el)},C.__private__.setStrokeColor=C.setDrawColor=function(re,Ie,At,Et){return el=st({ch1:re,ch2:Ie,ch3:At,ch4:Et,pdfColorType:"draw",precision:2}),Ve(el),this};var _n=e.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return Qe(_n)},C.__private__.setFillColor=C.setFillColor=function(re,Ie,At,Et){return _n=st({ch1:re,ch2:Ie,ch3:At,ch4:Et,pdfColorType:"fill",precision:2}),Ve(_n),this};var Fn=e.textColor||"0 g",Wi=C.__private__.getTextColor=C.getTextColor=function(){return Qe(Fn)};C.__private__.setTextColor=C.setTextColor=function(re,Ie,At,Et){return Fn=st({ch1:re,ch2:Ie,ch3:At,ch4:Et,pdfColorType:"text",precision:3}),this};var di=e.charSpace,Vs=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(di||0)};C.__private__.setCharSpace=C.setCharSpace=function(re){if(isNaN(re))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return di=re,this};var bi=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(re){var Ie=C.CapJoinStyles[re];if(Ie===void 0)throw new Error("Line cap style of '"+re+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=Ie,Ve(Ie+" J"),this};var Kl=0;C.__private__.setLineJoin=C.setLineJoin=function(re){var Ie=C.CapJoinStyles[re];if(Ie===void 0)throw new Error("Line join style of '"+re+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kl=Ie,Ve(Ie+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(re){if(re=re||0,isNaN(re))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ve(le(me(re))+" M"),this},C.GState=R2,C.setGState=function(re){(re=typeof re=="string"?er[qt[re]]:_s(null,re)).equals(Mr)||(Ve("/"+re.id+" gs"),Mr=re)};var _s=function(re,Ie){if(!re||!qt[re]){var At=!1;for(var Et in er)if(er.hasOwnProperty(Et)&&er[Et].equals(Ie)){At=!0;break}if(At)Ie=er[Et];else{var Ht="GS"+(Object.keys(er).length+1).toString(10);er[Ht]=Ie,Ie.id=Ht}return re&&(qt[re]=Ie.id),ei.publish("addGState",Ie),Ie}};C.addGState=function(re,Ie){return _s(re,Ie),this},C.saveGraphicsState=function(){return Ve("q"),Rt.push({key:it,size:ar,color:Fn}),this},C.restoreGraphicsState=function(){Ve("Q");var re=Rt.pop();return it=re.key,ar=re.size,Fn=re.color,Mr=null,this},C.setCurrentTransformationMatrix=function(re){return Ve(re.toString()+" cm"),this},C.comment=function(re){return Ve("#"+re),this};var Wl=function(re,Ie){var At=re||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return At},set:function(cr){isNaN(cr)||(At=parseFloat(cr))}});var Et=Ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Et},set:function(cr){isNaN(cr)||(Et=parseFloat(cr))}});var Ht="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ht},set:function(cr){Ht=cr.toString()}}),this},$l=function(re,Ie,At,Et){Wl.call(this,re,Ie),this.type="rect";var Ht=At||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ht},set:function(Br){isNaN(Br)||(Ht=parseFloat(Br))}});var cr=Et||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return cr},set:function(Br){isNaN(Br)||(cr=parseFloat(Br))}}),this},xl=function(){this.page=Fr,this.currentPage=Ae,this.pages=zt.slice(0),this.pagesContext=wt.slice(0),this.x=Ce,this.y=Re,this.matrix=Ze,this.width=Tu(Ae),this.height=ku(Ae),this.outputDestination=Ct,this.id="",this.objectNumber=-1};xl.prototype.restore=function(){Fr=this.page,Ae=this.currentPage,wt=this.pagesContext,zt=this.pages,Ce=this.x,Re=this.y,Ze=this.matrix,uh(Ae,this.width),ba(Ae,this.height),Ct=this.outputDestination};var ko=function(re,Ie,At,Et,Ht){In.push(new xl),Fr=Ae=0,zt=[],Ce=re,Re=Ie,Ze=Ht,_i([At,Et])};for(var Fo in C.beginFormObject=function(re,Ie,At,Et,Ht){return ko(re,Ie,At,Et,Ht),this},C.endFormObject=function(re){return function(Ie){if(Ri[Ie])In.pop().restore();else{var At=new xl,Et="Xo"+(Object.keys(Hr).length+1).toString(10);At.id=Et,Ri[Ie]=Et,Hr[Et]=At,ei.publish("addFormObject",At),In.pop().restore()}}(re),this},C.doFormObject=function(re,Ie){var At=Hr[Ri[re]];return Ve("q"),Ve(Ie.toString()+" cm"),Ve("/"+At.id+" Do"),Ve("Q"),this},C.getFormObject=function(re){var Ie=Hr[Ri[re]];return{x:Ie.x,y:Ie.y,width:Ie.width,height:Ie.height,matrix:Ie.matrix}},C.save=function(re,Ie){return re=re||"generated.pdf",(Ie=Ie||{}).returnPromise=Ie.returnPromise||!1,Ie.returnPromise===!1?(s0(oh($o()),re),typeof s0.unload=="function"&&tn.setTimeout&&setTimeout(s0.unload,911),this):new Promise(function(At,Et){try{var Ht=s0(oh($o()),re);typeof s0.unload=="function"&&tn.setTimeout&&setTimeout(s0.unload,911),At(Ht)}catch(cr){Et(cr.message)}})},ki.API)ki.API.hasOwnProperty(Fo)&&(Fo==="events"&&ki.API.events.length?function(re,Ie){var At,Et,Ht;for(Ht=Ie.length-1;Ht!==-1;Ht--)At=Ie[Ht][0],Et=Ie[Ht][1],re.subscribe.apply(re,[At].concat(typeof Et=="function"?[Et]:Et))}(ei,ki.API.events):C[Fo]=ki.API[Fo]);function Tu(re){return wt[re].mediaBox.topRightX-wt[re].mediaBox.bottomLeftX}function uh(re,Ie){wt[re].mediaBox.topRightX=Ie+wt[re].mediaBox.bottomLeftX}function ku(re){return wt[re].mediaBox.topRightY-wt[re].mediaBox.bottomLeftY}function ba(re,Ie){wt[re].mediaBox.topRightY=Ie+wt[re].mediaBox.bottomLeftY}var Wn=C.getPageWidth=function(re){return Tu(re=re||Ae)/ye},yc=C.setPageWidth=function(re,Ie){uh(re,Ie*ye)},Xl=C.getPageHeight=function(re){return ku(re=re||Ae)/ye},Zl=C.setPageHeight=function(re,Ie){ba(re,Ie*ye)};return C.internal={pdfEscape:Ni,getStyle:uA,getFont:nu,getFontSize:Lr,getCharSpace:Vs,getTextColor:Wi,getLineHeight:Hs,getLineHeightFactor:An,getLineWidth:Ra,write:lr,getHorizontalCoordinate:Va,getVerticalCoordinate:Yn,getCoordinateString:Ls,getVerticalCoordinateString:_a,collections:{},newObject:gi,newAdditionalObject:lt,newObjectDeferred:dr,newObjectDeferredBegin:De,getFilters:Tt,putStream:sr,events:ei,scaleFactor:ye,pageSize:{getWidth:function(){return Wn(Ae)},setWidth:function(re){yc(Ae,re)},getHeight:function(){return Xl(Ae)},setHeight:function(re){Zl(Ae,re)}},encryptionOptions:v,encryption:kn,getEncryptor:function(re){return v!==null?kn.encryptor(re,0):function(Ie){return Ie}},output:lh,getNumberOfPages:ea,get pages(){return zt},out:Ve,f2:te,f3:K,getPageInfo:Pa,getPageInfoByObjId:ch,getCurrentPageInfo:Nh,getPDFVersion:P,Point:Wl,Rectangle:$l,Matrix:Yr,hasHotfix:Xo},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return Wn(Ae)},set:function(re){yc(Ae,re)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return Xl(Ae)},set:function(re){Zl(Ae,re)},enumerable:!0,configurable:!0}),(function(re){for(var Ie=0,At=jr.length;Ie<At;Ie++){var Et=Fi.call(this,re[Ie][0],re[Ie][1],re[Ie][2],jr[Ie][3],!0);B===!1&&(F[Et]=!0);var Ht=re[Ie][0].split("-");yi({id:Et,fontName:Ht[0],fontStyle:Ht[1]||""})}ei.publish("addFonts",{fonts:ot,dictionary:vt})}).call(C,jr),it="F1",Qa(n,r),ei.publish("initialized"),C}jm.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},jm.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},jm.prototype.processOwnerPassword=function(e,t){return S5(B5(t).substr(0,5),e)},jm.prototype.encryptor=function(e,t){var r=B5(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return S5(r,i)}},R2.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ns(e)!==Ns(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},ki.API={events:[]},ki.version="3.0.4";var eo=ki.API,oC=1,M0=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},km=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sn=function(e){return e.toFixed(2)},ep=function(e){return e.toFixed(5)};eo.__acroform__={};var ah=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},nE=function(e){return e*oC},xd=function(e){var t=new MN,r=fi.internal.getHeight(e)||0,i=fi.internal.getWidth(e)||0;return t.BBox=[0,0,Number(sn(i)),Number(sn(r))],t},lq=eo.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},cq=eo.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},uq=eo.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},wo=eo.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uq(e,t-1)},Co=eo.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return lq(e,t-1)},Bo=eo.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cq(e,t-1)},hq=eo.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,n=e[0],a=e[1],c=e[2],s=e[3],p={};return p.lowerLeft_X=r(n)||0,p.lowerLeft_Y=i(a+s)||0,p.upperRight_X=r(n+c)||0,p.upperRight_Y=i(a)||0,[Number(sn(p.lowerLeft_X)),Number(sn(p.lowerLeft_Y)),Number(sn(p.upperRight_X)),Number(sn(p.upperRight_Y))]},Aq=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=E5(e,r),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+sn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=xd(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},E5=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(te){return te.split(`
`)}):n.map(function(te){return[te]});var a=r,c=fi.internal.getHeight(e)||0;c=c<0?-c:c;var s=fi.internal.getWidth(e)||0;s=s<0?-s:s;var p=function(te,K,me){if(te+1<n.length){var we=K+" "+n[te+1][0];return my(we,e,me).width<=s-4}return!1};a++;e:for(;a>0;){t="",a--;var g,v,B=my("3",e,a).height,F=e.multiline?c-a:(c-B)/2,C=F+=2,L=0,P=0,D=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+my(t,e,a=12).width+", FieldWidth:"+s+`
`;break}for(var j="",q=0,H=0;H<n.length;H++)if(n.hasOwnProperty(H)){var ee=!1;if(n[H].length!==1&&D!==n[H].length-1){if((B+2)*(q+2)+2>c)continue e;j+=n[H][D],ee=!0,P=H,H--}else{j=(j+=n[H][D]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var G=parseInt(H),ne=p(G,j,a),Z=H>=n.length-1;if(ne&&!Z){j+=" ",D=0;continue}if(ne||Z){if(Z)P=G;else if(e.multiline&&(B+2)*(q+2)+2>c)continue e}else{if(!e.multiline||(B+2)*(q+2)+2>c)continue e;P=G}}for(var le="",J=L;J<=P;J++){var ce=n[J];if(e.multiline){if(J===P){le+=ce[D]+" ",D=(D+1)%ce.length;continue}if(J===L){le+=ce[ce.length-1]+" ";continue}}le+=ce[0]+" "}switch(le=le.substr(le.length-1)==" "?le.substr(0,le.length-1):le,v=my(le,e,a).width,e.textAlign){case"right":g=s-v-2;break;case"center":g=(s-v)/2;break;default:g=2}t+=sn(g)+" "+sn(C)+` Td
`,t+="("+M0(le)+`) Tj
`,t+=-sn(g)+` 0 Td
`,C=-(a+2),v=0,L=ee?P:P+1,q++,j=""}break}return i.text=t,i.fontSize=a,i},my=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},dq={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fq=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},pq=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(WA.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(dq)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");oC=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new PN,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in i)if(i.hasOwnProperty(n)){var a=i[n];a.objId=void 0,a.hasAnnotation&&fq(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,n){var a=!i;for(var c in i||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(c)){var s=i[c],p=[],g=s.Rect;if(s.Rect&&(s.Rect=hq(s.Rect,n)),n.internal.newObjectDeferredBegin(s.objId,!0),s.DA=fi.createDefaultAppearanceStream(s),Ns(s)==="object"&&typeof s.getKeyValueListForStream=="function"&&(p=s.getKeyValueListForStream()),s.Rect=g,s.hasAppearanceStream&&!s.appearanceStreamContent){var v=Aq(s);p.push({key:"AP",value:"<</N "+v+">>"}),n.internal.acroformPlugin.xForms.push(v)}if(s.appearanceStreamContent){var B="";for(var F in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(F)){var C=s.appearanceStreamContent[F];if(B+="/"+F+" ",B+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var c in C)if(C.hasOwnProperty(c)){var L=C[c];typeof L=="function"&&(L=L.call(n,s)),B+="/"+c+" "+L+" ",n.internal.acroformPlugin.xForms.indexOf(L)>=0||n.internal.acroformPlugin.xForms.push(L)}}else typeof(L=C)=="function"&&(L=L.call(n,s)),B+="/"+c+" "+L,n.internal.acroformPlugin.xForms.indexOf(L)>=0||n.internal.acroformPlugin.xForms.push(L);B+=">>"}p.push({key:"AP",value:`<<
`+B+">>"})}n.internal.putStream({additionalKeyValues:p,objectId:s.objId}),n.internal.out("endobj")}a&&function(P,D){for(var j in P)if(P.hasOwnProperty(j)){var q=j,H=P[j];D.internal.newObjectDeferredBegin(H.objId,!0),Ns(H)==="object"&&typeof H.putStream=="function"&&H.putStream(),delete P[q]}}(n.internal.acroformPlugin.xForms,n)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},LN=eo.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(c){return c};if(Array.isArray(e)){for(var n="[",a=0;a<e.length;a++)switch(a!==0&&(n+=" "),Ns(e[a])){case"boolean":case"number":case"object":n+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),n+="("+M0(i(e[a].toString()))+")"):n+=e[a].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},tw=function(e,t,r){var i=function(n){return n};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+M0(i(e))+")"},wd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wd.prototype.toString=function(){return this.objId+" 0 R"},wd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},wd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],n=this[i];n&&(Array.isArray(n)?e.push({key:i,value:LN(n,this.objId,this.scope)}):n instanceof wd?(n.scope=this.scope,e.push({key:i,value:n.objId+" 0 R"})):typeof n!="function"&&e.push({key:i,value:n}))}return e};var MN=function(){wd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ah(MN,wd);var PN=function(){wd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+M0(r(e))+")"}},set:function(r){e=r}})};ah(PN,wd);var WA=function e(){wd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wo(t,3)},set:function(j){j?this.F=Co(t,3):this.F=Bo(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');r=j}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(j){i=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(j){i[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(j){i[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(j){i[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(j){i[3]=j}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof D2)return;a="FieldObject"+e.FieldNum++}var j=function(q){return q};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+M0(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(j){s=j}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(j){p=j}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/oC:g},set:function(j){g=j}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(j){v=j}});var B="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!B||this instanceof D2||this instanceof v0))return tw(B,this.objId,this.scope)},set:function(j){j=j.toString(),B=j}});var F=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(F)return this instanceof Gl==0?tw(F,this.objId,this.scope):F},set:function(j){j=j.toString(),F=this instanceof Gl==0?j.substr(0,1)==="("?km(j.substr(1,j.length-2)):km(j):j}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gl==1?km(F.substr(1,F.length-1)):F},set:function(j){j=j.toString(),F=this instanceof Gl==1?"/"+j:j}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof Gl==0?tw(C,this.objId,this.scope):C},set:function(j){j=j.toString(),C=this instanceof Gl==0?j.substr(0,1)==="("?km(j.substr(1,j.length-2)):km(j):j}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gl==1?km(C.substr(1,C.length-1)):C},set:function(j){j=j.toString(),C=this instanceof Gl==1?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(j){j=!!j,P=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(j){L=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,1)},set:function(j){j?this.Ff=Co(this.Ff,1):this.Ff=Bo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,2)},set:function(j){j?this.Ff=Co(this.Ff,2):this.Ff=Bo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,3)},set:function(j){j?this.Ff=Co(this.Ff,3):this.Ff=Bo(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');D=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(D){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:D=2;break;case"center":case 1:D=1;break;default:D=0}}})};ah(WA,wd);var Zm=function(){WA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return LN(t,this.objId,this.scope)},set:function(r){var i,n;n=[],typeof(i=r)=="string"&&(n=function(a,c,s){s||(s=1);for(var p,g=[];p=c.exec(a);)g.push(p[s]);return g}(i,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,18)},set:function(r){r?this.Ff=Co(this.Ff,18):this.Ff=Bo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Co(this.Ff,19):this.Ff=Bo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,20)},set:function(r){r?(this.Ff=Co(this.Ff,20),t.sort()):this.Ff=Bo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,22)},set:function(r){r?this.Ff=Co(this.Ff,22):this.Ff=Bo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,23)},set:function(r){r?this.Ff=Co(this.Ff,23):this.Ff=Bo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,27)},set:function(r){r?this.Ff=Co(this.Ff,27):this.Ff=Bo(this.Ff,27)}}),this.hasAppearanceStream=!1};ah(Zm,WA);var Ym=function(){Zm.call(this),this.fontName="helvetica",this.combo=!1};ah(Ym,Zm);var Jm=function(){Ym.call(this),this.combo=!0};ah(Jm,Ym);var A2=function(){Jm.call(this),this.edit=!0};ah(A2,Jm);var Gl=function(){WA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,15)},set:function(r){r?this.Ff=Co(this.Ff,15):this.Ff=Bo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,16)},set:function(r){r?this.Ff=Co(this.Ff,16):this.Ff=Bo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,17)},set:function(r){r?this.Ff=Co(this.Ff,17):this.Ff=Bo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,26)},set:function(r){r?this.Ff=Co(this.Ff,26):this.Ff=Bo(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,n=[];for(i in n.push("<<"),t)n.push("/"+i+" ("+M0(r(t[i]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){Ns(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ah(Gl,WA);var d2=function(){Gl.call(this),this.pushButton=!0};ah(d2,Gl);var eg=function(){Gl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ah(eg,Gl);var D2=function(){var e,t;WA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),i)c.push("/"+a+" ("+M0(n(i[a]))+")");return c.push(">>"),c.join(`
`)},set:function(n){Ns(n)==="object"&&(i=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(n){typeof n=="string"&&(i.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ah(D2,WA),eg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},eg.prototype.createOption=function(e){var t=new D2;return t.Parent=this,t.optionName=e,this.Kids.push(t),mq.call(this.scope,t),t};var f2=function(){Gl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fi.CheckBox.createAppearanceStream()};ah(f2,Gl);var v0=function(){WA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,13)},set:function(t){t?this.Ff=Co(this.Ff,13):this.Ff=Bo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,21)},set:function(t){t?this.Ff=Co(this.Ff,21):this.Ff=Bo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,23)},set:function(t){t?this.Ff=Co(this.Ff,23):this.Ff=Bo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,24)},set:function(t){t?this.Ff=Co(this.Ff,24):this.Ff=Bo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,25)},set:function(t){t?this.Ff=Co(this.Ff,25):this.Ff=Bo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,26)},set:function(t){t?this.Ff=Co(this.Ff,26):this.Ff=Bo(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ah(v0,WA);var p2=function(){v0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wo(this.Ff,14)},set:function(e){e?this.Ff=Co(this.Ff,14):this.Ff=Bo(this.Ff,14)}}),this.password=!0};ah(p2,v0);var fi={CheckBox:{createAppearanceStream:function(){return{N:{On:fi.CheckBox.YesNormal},D:{On:fi.CheckBox.YesPushDown,Off:fi.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=xd(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=E5(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+sn(fi.internal.getWidth(e))+" "+sn(fi.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+sn(a.fontSize)+" Tf "+n),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=xd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),n=[],a=fi.internal.getHeight(e),c=fi.internal.getWidth(e),s=E5(e,e.caption);return n.push("1 g"),n.push("0 0 "+sn(c)+" "+sn(a)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+sn(c-1)+" "+sn(a-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+sn(s.fontSize)+" Tf "+i),n.push(s.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=xd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(fi.internal.getWidth(e))+" "+sn(fi.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:fi.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=fi.RadioButton.Circle.YesNormal,t.D[e]=fi.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=xd(e);t.scope=e.scope;var r=[],i=fi.internal.getWidth(e)<=fi.internal.getHeight(e)?fi.internal.getWidth(e)/4:fi.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var n=fi.internal.Bezier_C,a=Number((i*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ep(fi.internal.getWidth(e)/2)+" "+ep(fi.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=xd(e);t.scope=e.scope;var r=[],i=fi.internal.getWidth(e)<=fi.internal.getHeight(e)?fi.internal.getWidth(e)/4:fi.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),a=Number((n*fi.internal.Bezier_C).toFixed(5)),c=Number((i*fi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ep(fi.internal.getWidth(e)/2)+" "+ep(fi.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ep(fi.internal.getWidth(e)/2)+" "+ep(fi.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),r.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),r.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),r.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=xd(e);t.scope=e.scope;var r=[],i=fi.internal.getWidth(e)<=fi.internal.getHeight(e)?fi.internal.getWidth(e)/4:fi.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),a=Number((n*fi.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ep(fi.internal.getWidth(e)/2)+" "+ep(fi.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:fi.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=fi.RadioButton.Cross.YesNormal,t.D[e]=fi.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=xd(e);t.scope=e.scope;var r=[],i=fi.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+sn(fi.internal.getWidth(e)-2)+" "+sn(fi.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(sn(i.x1.x)+" "+sn(i.x1.y)+" m"),r.push(sn(i.x2.x)+" "+sn(i.x2.y)+" l"),r.push(sn(i.x4.x)+" "+sn(i.x4.y)+" m"),r.push(sn(i.x3.x)+" "+sn(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=xd(e);t.scope=e.scope;var r=fi.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+sn(fi.internal.getWidth(e))+" "+sn(fi.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+sn(fi.internal.getWidth(e)-2)+" "+sn(fi.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(sn(r.x1.x)+" "+sn(r.x1.y)+" m"),i.push(sn(r.x2.x)+" "+sn(r.x2.y)+" l"),i.push(sn(r.x4.x)+" "+sn(r.x4.y)+" m"),i.push(sn(r.x3.x)+" "+sn(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=xd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(fi.internal.getWidth(e))+" "+sn(fi.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};fi.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=fi.internal.getWidth(e),r=fi.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},fi.internal.getWidth=function(e){var t=0;return Ns(e)==="object"&&(t=nE(e.Rect[2])),t},fi.internal.getHeight=function(e){var t=0;return Ns(e)==="object"&&(t=nE(e.Rect[3])),t};var mq=eo.addField=function(e){if(pq(this,e),!(e instanceof WA))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};eo.AcroFormChoiceField=Zm,eo.AcroFormListBox=Ym,eo.AcroFormComboBox=Jm,eo.AcroFormEditBox=A2,eo.AcroFormButton=Gl,eo.AcroFormPushButton=d2,eo.AcroFormRadioButton=eg,eo.AcroFormCheckBox=f2,eo.AcroFormTextField=v0,eo.AcroFormPasswordField=p2,eo.AcroFormAppearance=fi,eo.AcroForm={ChoiceField:Zm,ListBox:Ym,ComboBox:Jm,EditBox:A2,Button:Gl,PushButton:d2,RadioButton:eg,CheckBox:f2,TextField:v0,PasswordField:p2,Appearance:fi},ki.AcroForm={ChoiceField:Zm,ListBox:Ym,ComboBox:Jm,EditBox:A2,Button:Gl,PushButton:d2,RadioButton:eg,CheckBox:f2,TextField:v0,PasswordField:p2,Appearance:fi};ki.AcroForm;function RN(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(te,K){var me,we,Fe,he,Le,$e=r;if((K=K||r)==="RGBA"||te.data!==void 0&&te.data instanceof Uint8ClampedArray&&"height"in te&&"width"in te)return"RGBA";if(ne(te))for(Le in i)for(Fe=i[Le],me=0;me<Fe.length;me+=1){for(he=!0,we=0;we<Fe[me].length;we+=1)if(Fe[me][we]!==void 0&&Fe[me][we]!==te[we]){he=!1;break}if(he===!0){$e=Le;break}}else for(Le in i)for(Fe=i[Le],me=0;me<Fe.length;me+=1){for(he=!0,we=0;we<Fe[me].length;we+=1)if(Fe[me][we]!==void 0&&Fe[me][we]!==te.charCodeAt(we)){he=!1;break}if(he===!0){$e=Le;break}}return $e===r&&K!==r&&($e=K),$e},a=function te(K){for(var me=this.internal.write,we=this.internal.putStream,Fe=(0,this.internal.getFilters)();Fe.indexOf("FlateEncode")!==-1;)Fe.splice(Fe.indexOf("FlateEncode"),1);K.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:K.width}),he.push({key:"Height",value:K.height}),K.colorSpace===j.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(K.palette.length/3-1)+" "+("sMask"in K&&K.sMask!==void 0?K.objectId+2:K.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+K.colorSpace}),K.colorSpace===j.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:K.bitsPerComponent}),"decodeParameters"in K&&K.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+K.decodeParameters+">>"}),"transparency"in K&&Array.isArray(K.transparency)&&K.transparency.length>0){for(var Le="",$e=0,Ne=K.transparency.length;$e<Ne;$e++)Le+=K.transparency[$e]+" "+K.transparency[$e]+" ";he.push({key:"Mask",value:"["+Le+"]"})}K.sMask!==void 0&&he.push({key:"SMask",value:K.objectId+1+" 0 R"});var Te=K.filter!==void 0?["/"+K.filter]:void 0;if(we({data:K.data,additionalKeyValues:he,alreadyAppliedFilters:Te,objectId:K.objectId}),me("endobj"),"sMask"in K&&K.sMask!==void 0){var Ge,Y=(Ge=K.sMaskBitsPerComponent)!==null&&Ge!==void 0?Ge:K.bitsPerComponent,Ae={width:K.width,height:K.height,colorSpace:"DeviceGray",bitsPerComponent:Y,data:K.sMask};"filter"in K&&(Ae.decodeParameters="/Predictor ".concat(K.predictor," /Colors 1 /BitsPerComponent ").concat(Y," /Columns ").concat(K.width),Ae.filter=K.filter),te.call(this,Ae)}if(K.colorSpace===j.INDEXED){var fe=this.internal.newObject();we({data:le(new Uint8Array(K.palette)),objectId:fe}),me("endobj")}},c=function(){var te=this.internal.collections[t+"images"];for(var K in te)a.call(this,te[K])},s=function(){var te,K=this.internal.collections[t+"images"],me=this.internal.write;for(var we in K)me("/I"+(te=K[we]).index,te.objectId,"0","R")},p=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",s))},g=function(){var te=this.internal.collections[t+"images"];return p.call(this),te},v=function(){return Object.keys(this.internal.collections[t+"images"]).length},B=function(te){return typeof e["process"+te.toUpperCase()]=="function"},F=function(te){return Ns(te)==="object"&&te.nodeType===1},C=function(te,K){if(te.nodeName==="IMG"&&te.hasAttribute("src")){var me=""+te.getAttribute("src");if(me.indexOf("data:image/")===0)return h2(unescape(me).split("base64,").pop());var we=e.loadFile(me,!0);if(we!==void 0)return we}if(te.nodeName==="CANVAS"){if(te.width===0||te.height===0)throw new Error("Given canvas must have data. Canvas width: "+te.width+", height: "+te.height);var Fe;switch(K){case"PNG":Fe="image/png";break;case"WEBP":Fe="image/webp";break;default:Fe="image/jpeg"}return h2(te.toDataURL(Fe,1).split("base64,").pop())}},L=function(te){var K=this.internal.collections[t+"images"];if(K){for(var me in K)if(te===K[me].alias)return K[me]}},P=function(te,K,me){return te||K||(te=-96,K=-96),te<0&&(te=-1*me.width*72/te/this.internal.scaleFactor),K<0&&(K=-1*me.height*72/K/this.internal.scaleFactor),te===0&&(te=K*me.width/me.height),K===0&&(K=te*me.height/me.width),[te,K]},D=function(te,K,me,we,Fe,he){var Le=P.call(this,me,we,Fe),$e=this.internal.getCoordinateString,Ne=this.internal.getVerticalCoordinateString,Te=g.call(this);if(me=Le[0],we=Le[1],Te[Fe.index]=Fe,he){he*=Math.PI/180;var Ge=Math.cos(he),Y=Math.sin(he),Ae=function(be){return be.toFixed(4)},fe=[Ae(Ge),Ae(Y),Ae(-1*Y),Ae(Ge),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,$e(te),Ne(K+we),"cm"].join(" ")),this.internal.write(fe.join(" ")),this.internal.write([$e(me),"0","0",$e(we),"0","0","cm"].join(" "))):this.internal.write([$e(me),"0","0",$e(we),$e(te),Ne(K+we),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Fe.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var q=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},H=e.__addimage__.sHashCode=function(te){var K,me,we=0;if(typeof te=="string")for(me=te.length,K=0;K<me;K++)we=(we<<5)-we+te.charCodeAt(K),we|=0;else if(ne(te))for(me=te.byteLength/2,K=0;K<me;K++)we=(we<<5)-we+te[K],we|=0;return we},ee=e.__addimage__.validateStringAsBase64=function(te){(te=te||"").toString().trim();var K=!0;return te.length===0&&(K=!1),te.length%4!=0&&(K=!1),/^[A-Za-z0-9+/]+$/.test(te.substr(0,te.length-2))===!1&&(K=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(te.substr(-2))===!1&&(K=!1),K},G=e.__addimage__.extractImageFromDataUrl=function(te){if(te==null||!(te=te.trim()).startsWith("data:"))return null;var K=te.indexOf(",");return K<0?null:te.substring(0,K).trim().endsWith("base64")?te.substring(K+1):null};e.__addimage__.isArrayBuffer=function(te){return te instanceof ArrayBuffer};var ne=e.__addimage__.isArrayBufferView=function(te){return te instanceof Int8Array||te instanceof Uint8Array||te instanceof Uint8ClampedArray||te instanceof Int16Array||te instanceof Uint16Array||te instanceof Int32Array||te instanceof Uint32Array||te instanceof Float32Array||te instanceof Float64Array},Z=e.__addimage__.binaryStringToUint8Array=function(te){for(var K=te.length,me=new Uint8Array(K),we=0;we<K;we++)me[we]=te.charCodeAt(we);return me},le=e.__addimage__.arrayBufferToBinaryString=function(te){for(var K="",me=ne(te)?te:new Uint8Array(te),we=0;we<me.length;we+=8192)K+=String.fromCharCode.apply(null,me.subarray(we,we+8192));return K};e.addImage=function(){var te,K,me,we,Fe,he,Le,$e,Ne;if(typeof arguments[1]=="number"?(K=r,me=arguments[1],we=arguments[2],Fe=arguments[3],he=arguments[4],Le=arguments[5],$e=arguments[6],Ne=arguments[7]):(K=arguments[1],me=arguments[2],we=arguments[3],Fe=arguments[4],he=arguments[5],Le=arguments[6],$e=arguments[7],Ne=arguments[8]),Ns(te=arguments[0])==="object"&&!F(te)&&"imageData"in te){var Te=te;te=Te.imageData,K=Te.format||K||r,me=Te.x||me||0,we=Te.y||we||0,Fe=Te.w||Te.width||Fe,he=Te.h||Te.height||he,Le=Te.alias||Le,$e=Te.compression||$e,Ne=Te.rotation||Te.angle||Ne}var Ge=this.internal.getFilters();if($e===void 0&&Ge.indexOf("FlateEncode")!==-1&&($e="SLOW"),isNaN(me)||isNaN(we))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var Y=J.call(this,te,K,Le,$e);return D.call(this,me,we,Fe,he,Y,Ne),this};var J=function(te,K,me,we){var Fe,he,Le;if(typeof te=="string"&&n(te)===r){te=unescape(te);var $e=ce(te,!1);($e!==""||($e=e.loadFile(te,!0))!==void 0)&&(te=$e)}if(F(te)&&(te=C(te,K)),K=n(te,K),!B(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(((Le=me)==null||Le.length===0)&&(me=function(Ne){return typeof Ne=="string"||ne(Ne)?H(Ne):ne(Ne.data)?H(Ne.data):null}(te)),(Fe=L.call(this,me))||(te instanceof Uint8Array||K==="RGBA"||(he=te,te=Z(te)),Fe=this["process"+K.toUpperCase()](te,v.call(this),me,function(Ne){return Ne&&typeof Ne=="string"&&(Ne=Ne.toUpperCase()),Ne in e.image_compression?Ne:q.NONE}(we),he)),!Fe)throw new Error("An unknown error occurred whilst processing the image.");return Fe},ce=e.__addimage__.convertBase64ToBinaryString=function(te,K){K=typeof K!="boolean"||K;var me,we="";if(typeof te=="string"){var Fe;me=(Fe=G(te))!==null&&Fe!==void 0?Fe:te;try{we=h2(me)}catch(he){if(K)throw ee(me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return we};e.getImageProperties=function(te){var K,me,we="";if(F(te)&&(te=C(te)),typeof te=="string"&&n(te)===r&&((we=ce(te,!1))===""&&(we=e.loadFile(te)||""),te=we),me=n(te),!B(me))throw new Error("addImage does not support files of type '"+me+"', please ensure that a plugin for '"+me+"' support is added.");if(te instanceof Uint8Array||(te=Z(te)),!(K=this["process"+me.toUpperCase()](te)))throw new Error("An unknown error occurred whilst processing the image");return K.fileType=me,K}})(ki.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ki.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,n,a,c=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(r.objId),g=r.pageContext.annotations,v=!1,B=0;B<g.length&&!v;B++)switch((i=g[B]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var F=0;F<g.length;F++){i=g[F];var C=this.internal.pdfEscape,L=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(P.objId),q=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(n="/Rect ["+c(i.bounds.x)+" "+s(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y)+"] ")+"/Contents ("+C(j(i.contents))+")",a+=" /Popup "+D.objId+" 0 R",a+=" /P "+p.objId+" 0 R",a+=" /T ("+C(j(q))+") >>",P.content=a;var H=P.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+c(i.bounds.x+30)+" "+s(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w+30)+" "+s(i.bounds.y)+"] ")+" /Parent "+H,i.open&&(a+=" /Open true"),a+=" >>",D.content=a,this.internal.write(P.objId,"0 R",D.objId,"0 R");break;case"freetext":n="/Rect ["+c(i.bounds.x)+" "+s(i.bounds.y)+" "+c(i.bounds.x+i.bounds.w)+" "+s(i.bounds.y+i.bounds.h)+"] ";var ee=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+C(L(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ee+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var G=this.annotations._nameMap[i.options.name];i.options.pageNumber=G.page,i.options.top=G.y}else i.options.top||(i.options.top=0);if(n="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+C(L(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;default:var ne=s(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+ne+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,n,a,c){var s=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:p(r),y:g(i),w:p(r+n),h:g(i+a)},options:c,type:"link"})},e.textWithLink=function(r,i,n,a){var c,s,p=this.getTextWidth(r),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){s=a.maxWidth;var v=this.splitTextToSize(r,s).length;c=Math.ceil(g*v)}else s=p,c=g;return this.text(r,i,n,a),n+=.2*g,a.align==="center"&&(i-=p/2),a.align==="right"&&(i-=p),this.link(i,n-g,s,c,a),p},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(ki.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(P){return t[P.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(P){return typeof P=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},s=e.__arabicParser__.isArabicEndLetter=function(P){return c(P)&&a(P)&&t[P.charCodeAt(0)].length<=2},p=e.__arabicParser__.isArabicAlfLetter=function(P){return c(P)&&n.indexOf(P.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return c(P)&&a(P)&&t[P.charCodeAt(0)].length>=1};var g=e.__arabicParser__.arabicLetterHasFinalForm=function(P){return c(P)&&a(P)&&t[P.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(P){return c(P)&&a(P)&&t[P.charCodeAt(0)].length>=3};var v=e.__arabicParser__.arabicLetterHasMedialForm=function(P){return c(P)&&a(P)&&t[P.charCodeAt(0)].length==4},B=e.__arabicParser__.resolveLigatures=function(P){var D=0,j=r,q="",H=0;for(D=0;D<P.length;D+=1)j[P.charCodeAt(D)]!==void 0?(H++,typeof(j=j[P.charCodeAt(D)])=="number"&&(q+=String.fromCharCode(j),j=r,H=0),D===P.length-1&&(j=r,q+=P.charAt(D-(H-1)),D-=H-1,H=0)):(j=r,q+=P.charAt(D-H),D-=H,H=0);return q};e.__arabicParser__.isArabicDiacritic=function(P){return P!==void 0&&i[P.charCodeAt(0)]!==void 0};var F=e.__arabicParser__.getCorrectForm=function(P,D,j){return c(P)?a(P)===!1?-1:!g(P)||!c(D)&&!c(j)||!c(j)&&s(D)||s(P)&&!c(D)||s(P)&&p(D)||s(P)&&s(D)?0:v(P)&&c(D)&&!s(D)&&c(j)&&g(j)?3:s(P)||!c(j)?1:2:-1},C=function(P){var D=0,j=0,q=0,H="",ee="",G="",ne=(P=P||"").split("\\s+"),Z=[];for(D=0;D<ne.length;D+=1){for(Z.push(""),j=0;j<ne[D].length;j+=1)H=ne[D][j],ee=ne[D][j-1],G=ne[D][j+1],c(H)?(q=F(H,ee,G),Z[D]+=q!==-1?String.fromCharCode(t[H.charCodeAt(0)][q]):H):Z[D]+=H;Z[D]=B(Z[D])}return Z.join(" ")},L=e.__arabicParser__.processArabic=e.processArabic=function(){var P,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(D)){var q=0;for(j=[],q=0;q<D.length;q+=1)Array.isArray(D[q])?j.push([C(D[q][0]),D[q][1],D[q][2]]):j.push([C(D[q])]);P=j}else P=C(D);return typeof arguments[0]=="string"?P:(arguments[0].text=P,arguments[0])};e.events.push(["preProcessText",L])}(ki.API),ki.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(s){r=s}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(s){i=isNaN(s)||Number.isInteger(s)===!1||s<0?150:s,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(s){n=isNaN(s)||Number.isInteger(s)===!1||s<0?300:s,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(s){a=s}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(s){c=s}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var n;if((r=r||"2d")!=="2d")return null;for(n in i)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=i[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ki.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(P){p=P}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(P){g=P}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(P){v=P}});var B=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return B},set:function(P){B=P}});var F=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return F},set:function(P){F=P}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(P){C=P}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(P){L=P}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(p){return i.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},e.getTextDimensions=function(p,g){i.call(this);var v=(g=g||{}).fontSize||this.getFontSize(),B=g.font||this.getFont(),F=g.scaleFactor||this.internal.scaleFactor,C=0,L=0,P=0,D=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var j=g.maxWidth;j>0?typeof p=="string"?p=this.splitTextToSize(p,j):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(H,ee){return H.concat(D.splitTextToSize(ee,j))},[])):p=Array.isArray(p)?p:[p];for(var q=0;q<p.length;q++)C<(P=this.getStringUnitWidth(p[q],{font:B})*v)&&(C=P);return C!==0&&(L=p.length),{w:C/=F,h:Math.max((L*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/F,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var p=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var p;p=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var g=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,B=this.internal.__cell__.margins||t,F=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===p.lineNumber?(p.x=(g.x||0)+(g.width||0),p.y=g.y||0):g.y+g.height+p.height+B.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=B.top,C&&F&&(this.printHeaderRow(p.lineNumber,!0),p.y+=F[0].height)):p.y=g.y+g.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,r===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-v,p.y+v,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+v,{align:"center",baseline:"top",maxWidth:p.width-v-v}):this.text(p.text,p.x+v,p.y+v,{align:"left",baseline:"top",maxWidth:p.width-v-v})),this.internal.__cell__.lastCell=p,this};e.table=function(p,g,v,B,F){if(i.call(this),!v)throw new Error("No data for PDF table.");var C,L,P,D,j=[],q=[],H=[],ee={},G={},ne=[],Z=[],le=(F=F||{}).autoSize||!1,J=F.printHeaders!==!1,ce=F.css&&F.css["font-size"]!==void 0?16*F.css["font-size"]:F.fontSize||12,te=F.margins||Object.assign({width:this.getPageWidth()},t),K=typeof F.padding=="number"?F.padding:3,me=F.headerBackgroundColor||"#c8c8c8",we=F.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=te,this.internal.__cell__.table_font_size=ce,this.internal.__cell__.padding=K,this.internal.__cell__.headerBackgroundColor=me,this.internal.__cell__.headerTextColor=we,this.setFontSize(ce),B==null)q=j=Object.keys(v[0]),H=j.map(function(){return"left"});else if(Array.isArray(B)&&Ns(B[0])==="object")for(j=B.map(function(Te){return Te.name}),q=B.map(function(Te){return Te.prompt||Te.name||""}),H=B.map(function(Te){return Te.align||"left"}),C=0;C<B.length;C+=1)G[B[C].name]=.7499990551181103*B[C].width;else Array.isArray(B)&&typeof B[0]=="string"&&(q=j=B,H=j.map(function(){return"left"}));if(le||Array.isArray(B)&&typeof B[0]=="string")for(C=0;C<j.length;C+=1){for(ee[D=j[C]]=v.map(function(Te){return Te[D]}),this.setFont(void 0,"bold"),ne.push(this.getTextDimensions(q[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=ee[D],this.setFont(void 0,"normal"),P=0;P<L.length;P+=1)ne.push(this.getTextDimensions(L[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[D]=Math.max.apply(null,ne)+K+K,ne=[]}if(J){var Fe={};for(C=0;C<j.length;C+=1)Fe[j[C]]={},Fe[j[C]].text=q[C],Fe[j[C]].align=H[C];var he=s.call(this,Fe,G);Z=j.map(function(Te){return new a(p,g,G[Te],he,Fe[Te].text,void 0,Fe[Te].align)}),this.setTableHeaderRow(Z),this.printHeaderRow(1,!1)}var Le=B.reduce(function(Te,Ge){return Te[Ge.name]=Ge.align,Te},{});for(C=0;C<v.length;C+=1){"rowStart"in F&&F.rowStart instanceof Function&&F.rowStart({row:C,data:v[C]},this);var $e=s.call(this,v[C],G);for(P=0;P<j.length;P+=1){var Ne=v[C][j[P]];"cellStart"in F&&F.cellStart instanceof Function&&F.cellStart({row:C,col:P,data:Ne},this),c.call(this,new a(p,g,G[j[P]],$e,Ne,C+2,Le[j[P]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=g,this};var s=function(p,g){var v=this.internal.__cell__.padding,B=this.internal.__cell__.table_font_size,F=this.internal.scaleFactor;return Object.keys(p).map(function(C){var L=p[C];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,g[C]-v-v)},this).map(function(C){return this.getLineHeightFactor()*C.length*B/F+v+v},this).reduce(function(C,L){return Math.max(C,L)},0)};e.setTableHeaderRow=function(p){i.call(this),this.internal.__cell__.tableHeaderRow=p},e.printHeaderRow=function(p,g){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var B=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(B[0],B[1],B[2],B[3],void 0,-1)}this.setFont(void 0,"bold");for(var F=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){v=this.internal.__cell__.tableHeaderRow[C].clone(),g&&(v.y=this.internal.__cell__.margins.top||0,F.push(v)),v.lineNumber=p;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,v),this.setTextColor(L)}F.length>0&&this.setTableHeaderRow(F),this.setFont(void 0,"normal"),r=!1}}(ki.API);var DN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],T5=RN(jN),UN=[100,200,300,400,500,600,700,800,900],gq=RN(UN);function rw(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return DN[a=a||"normal"]?a:"normal"}(e.style),i=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),n=function(a){return typeof T5[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,r,i].join(" ")}}}function sE(e,t,r,i){var n;for(n=r;n>=0&&n<t.length;n+=i)if(e[t[n]])return e[t[n]];for(n=r;n>=0&&n<t.length;n-=i)if(e[t[n]])return e[t[n]]}var vq={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},aE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function oE(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lE(e){return e.trimLeft()}function xq(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function yq(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gy,cE,uE,Fm,vy,hE,AE,dE,iw=["times"];function fE(e,t,r,i,n){var a=4,c=mE;switch(n){case ki.API.image_compression.FAST:a=1,c=pE;break;case ki.API.image_compression.MEDIUM:a=6,c=gE;break;case ki.API.image_compression.SLOW:a=9,c=vE}e=function(p,g,v,B){for(var F,C=p.length/g,L=new Uint8Array(p.length+C),P=[_q,pE,mE,gE,vE],D=0;D<C;D+=1){var j=D*g,q=p.subarray(j,j+g);if(B)L.set(B(q,v,F),j+D);else{for(var H=P.length,ee=[],G=0;G<H;G+=1)ee[G]=P[G](q,v,F);var ne=wq(ee.concat());L.set(ee[ne],j+D)}F=q}return L}(e,t,Math.ceil(r*i/8),c);var s=_5(e,{level:a});return ki.API.__addimage__.arrayBufferToBinaryString(s)}function _q(e){var t=Array.apply([],e);return t.unshift(0),t}function pE(e,t){var r=e.length,i=[];i[0]=1;for(var n=0;n<r;n+=1){var a=e[n-t]||0;i[n+1]=e[n]-a+256&255}return i}function mE(e,t,r){var i=e.length,n=[];n[0]=2;for(var a=0;a<i;a+=1){var c=r&&r[a]||0;n[a+1]=e[a]-c+256&255}return n}function gE(e,t,r){var i=e.length,n=[];n[0]=3;for(var a=0;a<i;a+=1){var c=e[a-t]||0,s=r&&r[a]||0;n[a+1]=e[a]+256-(c+s>>>1)&255}return n}function vE(e,t,r){var i=e.length,n=[];n[0]=4;for(var a=0;a<i;a+=1){var c=bq(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);n[a+1]=e[a]-c+256&255}return n}function bq(e,t,r){if(e===t&&t===r)return e;var i=Math.abs(t-r),n=Math.abs(e-r),a=Math.abs(e+t-r-r);return i<=n&&i<=a?e:n<=a?t:r}function wq(e){var t=e.map(function(r){return r.reduce(function(i,n){return i+Math.abs(n)},0)});return t.indexOf(Math.min.apply(null,t))}function nw(e,t,r){var i=t*r,n=Math.floor(i/8),a=16-(i-8*n+r),c=(1<<r)-1;return ON(e,n)>>a&c}function xE(e,t,r,i){var n=r*i,a=Math.floor(n/8),c=16-(n-8*a+i),s=(1<<i)-1,p=(t&s)<<c;(function(g,v,B){if(v+1<g.byteLength)g.setUint16(v,B,!1);else{var F=B>>8&255;g.setUint8(v,F)}})(e,a,ON(e,a)&~(s<<c)&65535|p)}function ON(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Cq(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,n=e[t++],a=n>>7,c=1<<1+(7&n);e[t++],e[t++];var s=null,p=null;a&&(s=t,p=c,t+=3*c);var g=!0,v=[],B=0,F=null,C=0,L=null;for(this.width=r,this.height=i;g&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,L=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var P=e[t++];B=e[t++]|e[t++]<<8,F=e[t++],1&P||(F=null),C=P>>2&7,t++;break;case 254:for(;;){if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var D=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,q=e[t++]|e[t++]<<8,H=e[t++]|e[t++]<<8,ee=e[t++],G=ee>>6&1,ne=1<<1+(7&ee),Z=s,le=p,J=!1;ee>>7&&(J=!0,Z=t,le=ne,t+=3*ne);var ce=t;for(t++;;){var te;if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}v.push({x:D,y:j,width:q,height:H,has_local_palette:J,palette_offset:Z,palette_size:le,data_offset:ce,data_length:t-ce,transparent_index:F,interlaced:!!G,delay:B,disposal:C});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return L},this.frameInfo=function(K){if(K<0||K>=v.length)throw new Error("Frame index out of range.");return v[K]},this.decodeAndBlitFrameBGRA=function(K,me){var we=this.frameInfo(K),Fe=we.width*we.height,he=new Uint8Array(Fe);yE(e,we.data_offset,he,Fe);var Le=we.palette_offset,$e=we.transparent_index;$e===null&&($e=256);var Ne=we.width,Te=r-Ne,Ge=Ne,Y=4*(we.y*r+we.x),Ae=4*((we.y+we.height)*r+we.x),fe=Y,be=4*Te;we.interlaced===!0&&(be+=4*r*7);for(var Me=8,ze=0,We=he.length;ze<We;++ze){var ut=he[ze];if(Ge===0&&(Ge=Ne,(fe+=be)>=Ae&&(be=4*Te+4*r*(Me-1),fe=Y+(Ne+Te)*(Me<<1),Me>>=1)),ut===$e)fe+=4;else{var dt=e[Le+3*ut],zt=e[Le+3*ut+1],ve=e[Le+3*ut+2];me[fe++]=ve,me[fe++]=zt,me[fe++]=dt,me[fe++]=255}--Ge}},this.decodeAndBlitFrameRGBA=function(K,me){var we=this.frameInfo(K),Fe=we.width*we.height,he=new Uint8Array(Fe);yE(e,we.data_offset,he,Fe);var Le=we.palette_offset,$e=we.transparent_index;$e===null&&($e=256);var Ne=we.width,Te=r-Ne,Ge=Ne,Y=4*(we.y*r+we.x),Ae=4*((we.y+we.height)*r+we.x),fe=Y,be=4*Te;we.interlaced===!0&&(be+=4*r*7);for(var Me=8,ze=0,We=he.length;ze<We;++ze){var ut=he[ze];if(Ge===0&&(Ge=Ne,(fe+=be)>=Ae&&(be=4*Te+4*r*(Me-1),fe=Y+(Ne+Te)*(Me<<1),Me>>=1)),ut===$e)fe+=4;else{var dt=e[Le+3*ut],zt=e[Le+3*ut+1],ve=e[Le+3*ut+2];me[fe++]=dt,me[fe++]=zt,me[fe++]=ve,me[fe++]=255}--Ge}}}function yE(e,t,r,i){for(var n=e[t++],a=1<<n,c=a+1,s=c+1,p=n+1,g=(1<<p)-1,v=0,B=0,F=0,C=e[t++],L=new Int32Array(4096),P=null;;){for(;v<16&&C!==0;)B|=e[t++]<<v,v+=8,C===1?C=e[t++]:--C;if(v<p)break;var D=B&g;if(B>>=p,v-=p,D!==a){if(D===c)break;for(var j=D<s?D:P,q=0,H=j;H>a;)H=L[H]>>8,++q;var ee=H;if(F+q+(j!==D?1:0)>i)return void Js.log("Warning, gif stream longer than expected.");r[F++]=ee;var G=F+=q;for(j!==D&&(r[F++]=ee),H=j;q--;)H=L[H],r[--G]=255&H,H>>=8;P!==null&&s<4096&&(L[s++]=P<<8|ee,s>=g+1&&p<12&&(++p,g=g<<1|1)),P=D}else s=c+1,g=(1<<(p=n+1))-1,P=null}return F!==i&&Js.log("Warning, gif stream shorter than expected."),r}function sw(e){var t,r,i,n,a,c=Math.floor,s=new Array(64),p=new Array(64),g=new Array(64),v=new Array(64),B=new Array(65535),F=new Array(65535),C=new Array(64),L=new Array(64),P=[],D=0,j=7,q=new Array(64),H=new Array(64),ee=new Array(64),G=new Array(256),ne=new Array(2048),Z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],le=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],te=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],me=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(Y,Ae){for(var fe=0,be=0,Me=new Array,ze=1;ze<=16;ze++){for(var We=1;We<=Y[ze];We++)Me[Ae[be]]=[],Me[Ae[be]][0]=fe,Me[Ae[be]][1]=ze,be++,fe++;fe*=2}return Me}function Le(Y){for(var Ae=Y[0],fe=Y[1]-1;fe>=0;)Ae&1<<fe&&(D|=1<<j),fe--,--j<0&&(D==255?($e(255),$e(0)):$e(D),j=7,D=0)}function $e(Y){P.push(Y)}function Ne(Y){$e(Y>>8&255),$e(255&Y)}function Te(Y,Ae,fe,be,Me){for(var ze,We=Me[0],ut=Me[240],dt=function(ar,Wr){var Lr,Zr,qr,wi,Ci,$t,Ar,yr,it,ye,Ce=0;for(it=0;it<8;++it){Lr=ar[Ce],Zr=ar[Ce+1],qr=ar[Ce+2],wi=ar[Ce+3],Ci=ar[Ce+4],$t=ar[Ce+5],Ar=ar[Ce+6];var Re=Lr+(yr=ar[Ce+7]),Ze=Lr-yr,ot=Zr+Ar,vt=Zr-Ar,Rt=qr+$t,xt=qr-$t,Gt=wi+Ci,er=wi-Ci,qt=Re+Gt,Mr=Re-Gt,Fr=ot+Rt,wt=ot-Rt;ar[Ce]=qt+Fr,ar[Ce+4]=qt-Fr;var ei=.707106781*(wt+Mr);ar[Ce+2]=Mr+ei,ar[Ce+6]=Mr-ei;var Ji=.382683433*((qt=er+xt)-(wt=vt+Ze)),Hr=.5411961*qt+Ji,Ri=1.306562965*wt+Ji,In=.707106781*(Fr=xt+vt),Yr=Ze+In,on=Ze-In;ar[Ce+5]=on+Hr,ar[Ce+3]=on-Hr,ar[Ce+1]=Yr+Ri,ar[Ce+7]=Yr-Ri,Ce+=8}for(Ce=0,it=0;it<8;++it){Lr=ar[Ce],Zr=ar[Ce+8],qr=ar[Ce+16],wi=ar[Ce+24],Ci=ar[Ce+32],$t=ar[Ce+40],Ar=ar[Ce+48];var $i=Lr+(yr=ar[Ce+56]),mi=Lr-yr,ln=Zr+Ar,gi=Zr-Ar,dr=qr+$t,De=qr-$t,lt=wi+Ci,Ye=wi-Ci,nt=$i+lt,Qe=$i-lt,st=ln+dr,Tt=ln-dr;ar[Ce]=nt+st,ar[Ce+32]=nt-st;var sr=.707106781*(Tt+Qe);ar[Ce+16]=Qe+sr,ar[Ce+48]=Qe-sr;var jt=.382683433*((nt=Ye+De)-(Tt=gi+mi)),Kt=.5411961*nt+jt,Mt=1.306562965*Tt+jt,Cr=.707106781*(st=De+gi),Dr=mi+Cr,Kr=mi-Cr;ar[Ce+40]=Kr+Kt,ar[Ce+24]=Kr-Kt,ar[Ce+8]=Dr+Mt,ar[Ce+56]=Dr-Mt,Ce++}for(it=0;it<64;++it)ye=ar[it]*Wr[it],C[it]=ye>0?ye+.5|0:ye-.5|0;return C}(Y,Ae),zt=0;zt<64;++zt)L[Z[zt]]=dt[zt];var ve=L[0]-fe;fe=L[0],ve==0?Le(be[0]):(Le(be[F[ze=32767+ve]]),Le(B[ze]));for(var Ct=63;Ct>0&&L[Ct]==0;)Ct--;if(Ct==0)return Le(We),fe;for(var Pt,Ve=1;Ve<=Ct;){for(var lr=Ve;L[Ve]==0&&Ve<=Ct;)++Ve;var ir=Ve-lr;if(ir>=16){Pt=ir>>4;for(var jr=1;jr<=Pt;++jr)Le(ut);ir&=15}ze=32767+L[Ve],Le(Me[(ir<<4)+F[ze]]),Le(B[ze]),Ve++}return Ct!=63&&Le(We),fe}function Ge(Y){Y=Math.min(Math.max(Y,1),100),a!=Y&&(function(Ae){for(var fe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],be=0;be<64;be++){var Me=c((fe[be]*Ae+50)/100);Me=Math.min(Math.max(Me,1),255),s[Z[be]]=Me}for(var ze=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],We=0;We<64;We++){var ut=c((ze[We]*Ae+50)/100);ut=Math.min(Math.max(ut,1),255),p[Z[We]]=ut}for(var dt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],zt=0,ve=0;ve<8;ve++)for(var Ct=0;Ct<8;Ct++)g[zt]=1/(s[Z[zt]]*dt[ve]*dt[Ct]*8),v[zt]=1/(p[Z[zt]]*dt[ve]*dt[Ct]*8),zt++}(Y<50?Math.floor(5e3/Y):Math.floor(200-2*Y)),a=Y)}this.encode=function(Y,Ae){Ae&&Ge(Ae),P=new Array,D=0,j=7,Ne(65496),Ne(65504),Ne(16),$e(74),$e(70),$e(73),$e(70),$e(0),$e(1),$e(1),$e(0),Ne(1),Ne(1),$e(0),$e(0),function(){Ne(65499),Ne(132),$e(0);for(var Zr=0;Zr<64;Zr++)$e(s[Zr]);$e(1);for(var qr=0;qr<64;qr++)$e(p[qr])}(),function(Zr,qr){Ne(65472),Ne(17),$e(8),Ne(qr),Ne(Zr),$e(3),$e(1),$e(17),$e(0),$e(2),$e(17),$e(1),$e(3),$e(17),$e(1)}(Y.width,Y.height),function(){Ne(65476),Ne(418),$e(0);for(var Zr=0;Zr<16;Zr++)$e(le[Zr+1]);for(var qr=0;qr<=11;qr++)$e(J[qr]);$e(16);for(var wi=0;wi<16;wi++)$e(ce[wi+1]);for(var Ci=0;Ci<=161;Ci++)$e(te[Ci]);$e(1);for(var $t=0;$t<16;$t++)$e(K[$t+1]);for(var Ar=0;Ar<=11;Ar++)$e(me[Ar]);$e(17);for(var yr=0;yr<16;yr++)$e(we[yr+1]);for(var it=0;it<=161;it++)$e(Fe[it])}(),Ne(65498),Ne(12),$e(3),$e(1),$e(0),$e(2),$e(17),$e(3),$e(17),$e(0),$e(63),$e(0);var fe=0,be=0,Me=0;D=0,j=7,this.encode.displayName="_encode_";for(var ze,We,ut,dt,zt,ve,Ct,Pt,Ve,lr=Y.data,ir=Y.width,jr=Y.height,ar=4*ir,Wr=0;Wr<jr;){for(ze=0;ze<ar;){for(zt=ar*Wr+ze,Ct=-1,Pt=0,Ve=0;Ve<64;Ve++)ve=zt+(Pt=Ve>>3)*ar+(Ct=4*(7&Ve)),Wr+Pt>=jr&&(ve-=ar*(Wr+1+Pt-jr)),ze+Ct>=ar&&(ve-=ze+Ct-ar+4),We=lr[ve++],ut=lr[ve++],dt=lr[ve++],q[Ve]=(ne[We]+ne[ut+256|0]+ne[dt+512|0]>>16)-128,H[Ve]=(ne[We+768|0]+ne[ut+1024|0]+ne[dt+1280|0]>>16)-128,ee[Ve]=(ne[We+1280|0]+ne[ut+1536|0]+ne[dt+1792|0]>>16)-128;fe=Te(q,g,fe,t,i),be=Te(H,v,be,r,n),Me=Te(ee,v,Me,r,n),ze+=32}Wr+=8}if(j>=0){var Lr=[];Lr[1]=j+1,Lr[0]=(1<<j+1)-1,Le(Lr)}return Ne(65497),new Uint8Array(P)},e=e||50,function(){for(var Y=String.fromCharCode,Ae=0;Ae<256;Ae++)G[Ae]=Y(Ae)}(),t=he(le,J),r=he(K,me),i=he(ce,te),n=he(we,Fe),function(){for(var Y=1,Ae=2,fe=1;fe<=15;fe++){for(var be=Y;be<Ae;be++)F[32767+be]=fe,B[32767+be]=[],B[32767+be][1]=fe,B[32767+be][0]=be;for(var Me=-(Ae-1);Me<=-Y;Me++)F[32767+Me]=fe,B[32767+Me]=[],B[32767+Me][1]=fe,B[32767+Me][0]=Ae-1+Me;Y<<=1,Ae<<=1}}(),function(){for(var Y=0;Y<256;Y++)ne[Y]=19595*Y,ne[Y+256|0]=38470*Y,ne[Y+512|0]=7471*Y+32768,ne[Y+768|0]=-11059*Y,ne[Y+1024|0]=-21709*Y,ne[Y+1280|0]=32768*Y+8421375,ne[Y+1536|0]=-27439*Y,ne[Y+1792|0]=-5329*Y}(),Ge(e)}function MA(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _E(e){function t(J){if(!J)throw Error("assert :P")}function r(J,ce,te){for(var K=0;4>K;K++)if(J[ce+K]!=te.charCodeAt(K))return!0;return!1}function i(J,ce,te,K,me){for(var we=0;we<me;we++)J[ce+we]=te[K+we]}function n(J,ce,te,K){for(var me=0;me<K;me++)J[ce+me]=te}function a(J){return new Int32Array(J)}function c(J,ce){for(var te=[],K=0;K<J;K++)te.push(new ce);return te}function s(J,ce){var te=[];return function K(me,we,Fe){for(var he=Fe[we],Le=0;Le<he&&(me.push(Fe.length>we+1?[]:new ce),!(Fe.length<we+1));Le++)K(me[Le],we+1,Fe)}(te,0,J),te}var p=function(){var J=this;function ce(R,Q){for(var ae=1<<Q-1>>>0;R&ae;)ae>>>=1;return ae?(R&ae-1)+ae:R}function te(R,Q,ae,pe,Pe){t(!(pe%ae));do R[Q+(pe-=ae)]=Pe;while(0<pe)}function K(R,Q,ae,pe,Pe){if(t(2328>=Pe),512>=Pe)var Oe=a(512);else if((Oe=a(Pe))==null)return 0;return function(Ke,Xe,rt,qe,Ft,Jt){var ct,Dt,Qt=Xe,ur=1<<rt,It=a(16),fr=a(16);for(t(Ft!=0),t(qe!=null),t(Ke!=null),t(0<rt),Dt=0;Dt<Ft;++Dt){if(15<qe[Dt])return 0;++It[qe[Dt]]}if(It[0]==Ft)return 0;for(fr[1]=0,ct=1;15>ct;++ct){if(It[ct]>1<<ct)return 0;fr[ct+1]=fr[ct]+It[ct]}for(Dt=0;Dt<Ft;++Dt)ct=qe[Dt],0<qe[Dt]&&(Jt[fr[ct]++]=Dt);if(fr[15]==1)return(qe=new me).g=0,qe.value=Jt[0],te(Ke,Qt,1,ur,qe),ur;var mr,Tr=-1,wr=ur-1,hi=0,ti=1,Ui=1,ii=1<<rt;for(Dt=0,ct=1,Ft=2;ct<=rt;++ct,Ft<<=1){if(ti+=Ui<<=1,0>(Ui-=It[ct]))return 0;for(;0<It[ct];--It[ct])(qe=new me).g=ct,qe.value=Jt[Dt++],te(Ke,Qt+hi,Ft,ii,qe),hi=ce(hi,ct)}for(ct=rt+1,Ft=2;15>=ct;++ct,Ft<<=1){if(ti+=Ui<<=1,0>(Ui-=It[ct]))return 0;for(;0<It[ct];--It[ct]){if(qe=new me,(hi&wr)!=Tr){for(Qt+=ii,mr=1<<(Tr=ct)-rt;15>Tr&&!(0>=(mr-=It[Tr]));)++Tr,mr<<=1;ur+=ii=1<<(mr=Tr-rt),Ke[Xe+(Tr=hi&wr)].g=mr+rt,Ke[Xe+Tr].value=Qt-Xe-Tr}qe.g=ct-rt,qe.value=Jt[Dt++],te(Ke,Qt+(hi>>rt),Ft,ii,qe),hi=ce(hi,ct)}}return ti!=2*fr[15]-1?0:ur}(R,Q,ae,pe,Pe,Oe)}function me(){this.value=this.g=0}function we(){this.value=this.g=0}function Fe(){this.G=c(5,me),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(oo,we)}function he(R,Q,ae,pe){t(R!=null),t(Q!=null),t(2147483648>pe),R.Ca=254,R.I=0,R.b=-8,R.Ka=0,R.oa=Q,R.pa=ae,R.Jd=Q,R.Yc=ae+pe,R.Zc=4<=pe?ae+pe-4+1:ae,We(R)}function Le(R,Q){for(var ae=0;0<Q--;)ae|=dt(R,128)<<Q;return ae}function $e(R,Q){var ae=Le(R,Q);return ut(R)?-ae:ae}function Ne(R,Q,ae,pe){var Pe,Oe=0;for(t(R!=null),t(Q!=null),t(4294967288>pe),R.Sb=pe,R.Ra=0,R.u=0,R.h=0,4<pe&&(pe=4),Pe=0;Pe<pe;++Pe)Oe+=Q[ae+Pe]<<8*Pe;R.Ra=Oe,R.bb=pe,R.oa=Q,R.pa=ae}function Te(R){for(;8<=R.u&&R.bb<R.Sb;)R.Ra>>>=8,R.Ra+=R.oa[R.pa+R.bb]<<co-8>>>0,++R.bb,R.u-=8;be(R)&&(R.h=1,R.u=0)}function Ge(R,Q){if(t(0<=Q),!R.h&&Q<=lo){var ae=fe(R)&qa[Q];return R.u+=Q,Te(R),ae}return R.h=1,R.u=0}function Y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ae(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function fe(R){return R.Ra>>>(R.u&co-1)>>>0}function be(R){return t(R.bb<=R.Sb),R.h||R.bb==R.Sb&&R.u>co}function Me(R,Q){R.u=Q,R.h=be(R)}function ze(R){R.u>=Yl&&(t(R.u>=Yl),Te(R))}function We(R){t(R!=null&&R.oa!=null),R.pa<R.Zc?(R.I=(R.oa[R.pa++]|R.I<<8)>>>0,R.b+=8):(t(R!=null&&R.oa!=null),R.pa<R.Yc?(R.b+=8,R.I=R.oa[R.pa++]|R.I<<8):R.Ka?R.b=0:(R.I<<=8,R.b+=8,R.Ka=1))}function ut(R){return Le(R,1)}function dt(R,Q){var ae=R.Ca;0>R.b&&We(R);var pe=R.b,Pe=ae*Q>>>8,Oe=(R.I>>>pe>Pe)+0;for(Oe?(ae-=Pe,R.I-=Pe+1<<pe>>>0):ae=Pe+1,pe=ae,Pe=0;256<=pe;)Pe+=8,pe>>=8;return pe=7^Pe+Jl[pe],R.b-=pe,R.Ca=(ae<<pe)-1,Oe}function zt(R,Q,ae){R[Q+0]=ae>>24&255,R[Q+1]=ae>>16&255,R[Q+2]=ae>>8&255,R[Q+3]=255&ae}function ve(R,Q){return R[Q+0]|R[Q+1]<<8}function Ct(R,Q){return ve(R,Q)|R[Q+2]<<16}function Pt(R,Q){return ve(R,Q)|ve(R,Q+2)<<16}function Ve(R,Q){var ae=1<<Q;return t(R!=null),t(0<Q),R.X=a(ae),R.X==null?0:(R.Mb=32-Q,R.Xa=Q,1)}function lr(R,Q){t(R!=null),t(Q!=null),t(R.Xa==Q.Xa),i(Q.X,0,R.X,0,1<<Q.Xa)}function ir(){this.X=[],this.Xa=this.Mb=0}function jr(R,Q,ae,pe){t(ae!=null),t(pe!=null);var Pe=ae[0],Oe=pe[0];return Pe==0&&(Pe=(R*Oe+Q/2)/Q),Oe==0&&(Oe=(Q*Pe+R/2)/R),0>=Pe||0>=Oe?0:(ae[0]=Pe,pe[0]=Oe,1)}function ar(R,Q){return R+(1<<Q)-1>>>Q}function Wr(R,Q){return((4278255360&R)+(4278255360&Q)>>>0&4278255360)+((16711935&R)+(16711935&Q)>>>0&16711935)>>>0}function Lr(R,Q){J[Q]=function(ae,pe,Pe,Oe,Ke,Xe,rt){var qe;for(qe=0;qe<Ke;++qe){var Ft=J[R](Xe[rt+qe-1],Pe,Oe+qe);Xe[rt+qe]=Wr(ae[pe+qe],Ft)}}}function Zr(){this.ud=this.hd=this.jd=0}function qr(R,Q){return((4278124286&(R^Q))>>>1)+(R&Q)>>>0}function wi(R){return 0<=R&&256>R?R:0>R?0:255<R?255:void 0}function Ci(R,Q){return wi(R+(R-Q+.5>>1))}function $t(R,Q,ae){return Math.abs(Q-ae)-Math.abs(R-ae)}function Ar(R,Q,ae,pe,Pe,Oe,Ke){for(pe=Oe[Ke-1],ae=0;ae<Pe;++ae)Oe[Ke+ae]=pe=Wr(R[Q+ae],pe)}function yr(R,Q,ae,pe,Pe){var Oe;for(Oe=0;Oe<ae;++Oe){var Ke=R[Q+Oe],Xe=Ke>>8&255,rt=16711935&(rt=(rt=16711935&Ke)+((Xe<<16)+Xe));pe[Pe+Oe]=(4278255360&Ke)+rt>>>0}}function it(R,Q){Q.jd=255&R,Q.hd=R>>8&255,Q.ud=R>>16&255}function ye(R,Q,ae,pe,Pe,Oe){var Ke;for(Ke=0;Ke<pe;++Ke){var Xe=Q[ae+Ke],rt=Xe>>>8,qe=Xe,Ft=255&(Ft=(Ft=Xe>>>16)+((R.jd<<24>>24)*(rt<<24>>24)>>>5));qe=255&(qe=(qe+=(R.hd<<24>>24)*(rt<<24>>24)>>>5)+((R.ud<<24>>24)*(Ft<<24>>24)>>>5)),Pe[Oe+Ke]=(4278255360&Xe)+(Ft<<16)+qe}}function Ce(R,Q,ae,pe,Pe){J[Q]=function(Oe,Ke,Xe,rt,qe,Ft,Jt,ct,Dt){for(rt=Jt;rt<ct;++rt)for(Jt=0;Jt<Dt;++Jt)qe[Ft++]=Pe(Xe[pe(Oe[Ke++])])},J[R]=function(Oe,Ke,Xe,rt,qe,Ft,Jt){var ct=8>>Oe.b,Dt=Oe.Ea,Qt=Oe.K[0],ur=Oe.w;if(8>ct)for(Oe=(1<<Oe.b)-1,ur=(1<<ct)-1;Ke<Xe;++Ke){var It,fr=0;for(It=0;It<Dt;++It)It&Oe||(fr=pe(rt[qe++])),Ft[Jt++]=Pe(Qt[fr&ur]),fr>>=ct}else J["VP8LMapColor"+ae](rt,qe,Qt,ur,Ft,Jt,Ke,Xe,Dt)}}function Re(R,Q,ae,pe,Pe){for(ae=Q+ae;Q<ae;){var Oe=R[Q++];pe[Pe++]=Oe>>16&255,pe[Pe++]=Oe>>8&255,pe[Pe++]=255&Oe}}function Ze(R,Q,ae,pe,Pe){for(ae=Q+ae;Q<ae;){var Oe=R[Q++];pe[Pe++]=Oe>>16&255,pe[Pe++]=Oe>>8&255,pe[Pe++]=255&Oe,pe[Pe++]=Oe>>24&255}}function ot(R,Q,ae,pe,Pe){for(ae=Q+ae;Q<ae;){var Oe=(Ke=R[Q++])>>16&240|Ke>>12&15,Ke=240&Ke|Ke>>28&15;pe[Pe++]=Oe,pe[Pe++]=Ke}}function vt(R,Q,ae,pe,Pe){for(ae=Q+ae;Q<ae;){var Oe=(Ke=R[Q++])>>16&248|Ke>>13&7,Ke=Ke>>5&224|Ke>>3&31;pe[Pe++]=Oe,pe[Pe++]=Ke}}function Rt(R,Q,ae,pe,Pe){for(ae=Q+ae;Q<ae;){var Oe=R[Q++];pe[Pe++]=255&Oe,pe[Pe++]=Oe>>8&255,pe[Pe++]=Oe>>16&255}}function xt(R,Q,ae,pe,Pe,Oe){if(Oe==0)for(ae=Q+ae;Q<ae;)zt(pe,((Oe=R[Q++])[0]>>24|Oe[1]>>8&65280|Oe[2]<<8&16711680|Oe[3]<<24)>>>0),Pe+=32;else i(pe,Pe,R,Q,ae)}function Gt(R,Q){J[Q][0]=J[R+"0"],J[Q][1]=J[R+"1"],J[Q][2]=J[R+"2"],J[Q][3]=J[R+"3"],J[Q][4]=J[R+"4"],J[Q][5]=J[R+"5"],J[Q][6]=J[R+"6"],J[Q][7]=J[R+"7"],J[Q][8]=J[R+"8"],J[Q][9]=J[R+"9"],J[Q][10]=J[R+"10"],J[Q][11]=J[R+"11"],J[Q][12]=J[R+"12"],J[Q][13]=J[R+"13"],J[Q][14]=J[R+"0"],J[Q][15]=J[R+"0"]}function er(R){return R==pA||R==Ec||R==kl||R==du}function qt(){this.eb=[],this.size=this.A=this.fb=0}function Mr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qt,this.f.kb=new Mr,this.sd=null}function wt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ei(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ji(R){return alert("todo:WebPSamplerProcessPlane"),R.T}function Hr(R,Q){var ae=R.T,pe=Q.ba.f.RGBA,Pe=pe.eb,Oe=pe.fb+R.ka*pe.A,Ke=qs[Q.ba.S],Xe=R.y,rt=R.O,qe=R.f,Ft=R.N,Jt=R.ea,ct=R.W,Dt=Q.cc,Qt=Q.dc,ur=Q.Mc,It=Q.Nc,fr=R.ka,mr=R.ka+R.T,Tr=R.U,wr=Tr+1>>1;for(fr==0?Ke(Xe,rt,null,null,qe,Ft,Jt,ct,qe,Ft,Jt,ct,Pe,Oe,null,null,Tr):(Ke(Q.ec,Q.fc,Xe,rt,Dt,Qt,ur,It,qe,Ft,Jt,ct,Pe,Oe-pe.A,Pe,Oe,Tr),++ae);fr+2<mr;fr+=2)Dt=qe,Qt=Ft,ur=Jt,It=ct,Ft+=R.Rc,ct+=R.Rc,Oe+=2*pe.A,Ke(Xe,(rt+=2*R.fa)-R.fa,Xe,rt,Dt,Qt,ur,It,qe,Ft,Jt,ct,Pe,Oe-pe.A,Pe,Oe,Tr);return rt+=R.fa,R.j+mr<R.o?(i(Q.ec,Q.fc,Xe,rt,Tr),i(Q.cc,Q.dc,qe,Ft,wr),i(Q.Mc,Q.Nc,Jt,ct,wr),ae--):1&mr||Ke(Xe,rt,null,null,qe,Ft,Jt,ct,qe,Ft,Jt,ct,Pe,Oe+pe.A,null,null,Tr),ae}function Ri(R,Q,ae){var pe=R.F,Pe=[R.J];if(pe!=null){var Oe=R.U,Ke=Q.ba.S,Xe=Ke==mh||Ke==kl;Q=Q.ba.f.RGBA;var rt=[0],qe=R.ka;rt[0]=R.T,R.Kb&&(qe==0?--rt[0]:(--qe,Pe[0]-=R.width),R.j+R.ka+R.T==R.o&&(rt[0]=R.o-R.j-qe));var Ft=Q.eb;qe=Q.fb+qe*Q.A,R=fa(pe,Pe[0],R.width,Oe,rt,Ft,qe+(Xe?0:3),Q.A),t(ae==rt),R&&er(Ke)&&fh(Ft,qe,Xe,Oe,rt,Q.A)}return 0}function In(R){var Q=R.ma,ae=Q.ba.S,pe=11>ae,Pe=ae==Ih||ae==Au||ae==mh||ae==Tl||ae==12||er(ae);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!ou(Q.Oa,R,Pe?11:12))return 0;if(Pe&&er(ae)&&bl(),R.da)alert("todo:use_scaling");else{if(pe){if(Q.Ib=Ji,R.Kb){if(ae=R.U+1>>1,Q.memory=a(R.U+2*ae),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+R.U,Q.Mc=Q.cc,Q.Nc=Q.dc+ae,Q.Ib=Hr,bl()}}else alert("todo:EmitYUV");Pe&&(Q.Jb=Ri,pe&&tl())}if(pe&&!Id){for(R=0;256>R;++R)Ef[R]=89858*(R-128)+Ks>>Ml,Fc[R]=-22014*(R-128)+Ks,YA[R]=-45773*(R-128),ta[R]=113618*(R-128)+Ks>>Ml;for(R=ol;R<kc;++R)Q=76283*(R-16)+Ks>>Ml,Nc[R-ol]=Qs(Q,255),Xa[R-ol]=Qs(Q+8>>4,15);Id=1}return 1}function Yr(R){var Q=R.ma,ae=R.U,pe=R.T;return t(!(1&R.ka)),0>=ae||0>=pe?0:(ae=Q.Ib(R,Q),Q.Jb!=null&&Q.Jb(R,Q,ae),Q.Dc+=ae,1)}function on(R){R.ma.memory=null}function $i(R,Q,ae,pe){return Ge(R,8)!=47?0:(Q[0]=Ge(R,14)+1,ae[0]=Ge(R,14)+1,pe[0]=Ge(R,1),Ge(R,3)!=0?0:!R.h)}function mi(R,Q){if(4>R)return R+1;var ae=R-2>>1;return(2+(1&R)<<ae)+Ge(Q,ae)+1}function ln(R,Q){return 120<Q?Q-120:1<=(ae=((ae=nl[Q-1])>>4)*R+(8-(15&ae)))?ae:1;var ae}function gi(R,Q,ae){var pe=fe(ae),Pe=R[Q+=255&pe].g-8;return 0<Pe&&(Me(ae,ae.u+8),pe=fe(ae),Q+=R[Q].value,Q+=pe&(1<<Pe)-1),Me(ae,ae.u+R[Q].g),R[Q].value}function dr(R,Q,ae){return ae.g+=R.g,ae.value+=R.value<<Q>>>0,t(8>=ae.g),R.g}function De(R,Q,ae){var pe=R.xc;return t((Q=pe==0?0:R.vc[R.md*(ae>>pe)+(Q>>pe)])<R.Wb),R.Ya[Q]}function lt(R,Q,ae,pe){var Pe=R.ab,Oe=R.c*Q,Ke=R.C;Q=Ke+Q;var Xe=ae,rt=pe;for(pe=R.Ta,ae=R.Ua;0<Pe--;){var qe=R.gc[Pe],Ft=Ke,Jt=Q,ct=Xe,Dt=rt,Qt=(rt=pe,Xe=ae,qe.Ea);switch(t(Ft<Jt),t(Jt<=qe.nc),qe.hc){case 2:bs(ct,Dt,(Jt-Ft)*Qt,rt,Xe);break;case 0:var ur=Ft,It=Jt,fr=rt,mr=Xe,Tr=(ii=qe).Ea;ur==0&&(AA(ct,Dt,null,null,1,fr,mr),Ar(ct,Dt+1,0,0,Tr-1,fr,mr+1),Dt+=Tr,mr+=Tr,++ur);for(var wr=1<<ii.b,hi=wr-1,ti=ar(Tr,ii.b),Ui=ii.K,ii=ii.w+(ur>>ii.b)*ti;ur<It;){var cn=Ui,Ws=ii,zi=1;for(hh(ct,Dt,fr,mr-Tr,1,fr,mr);zi<Tr;){var ai=(zi&~hi)+wr;ai>Tr&&(ai=Tr),(0,lu[cn[Ws++]>>8&15])(ct,Dt+ +zi,fr,mr+zi-Tr,ai-zi,fr,mr+zi),zi=ai}Dt+=Tr,mr+=Tr,++ur&hi||(ii+=ti)}Jt!=qe.nc&&i(rt,Xe-Qt,rt,Xe+(Jt-Ft-1)*Qt,Qt);break;case 1:for(Qt=ct,It=Dt,Tr=(ct=qe.Ea)-(mr=ct&~(fr=(Dt=1<<qe.b)-1)),ur=ar(ct,qe.b),wr=qe.K,qe=qe.w+(Ft>>qe.b)*ur;Ft<Jt;){for(hi=wr,ti=qe,Ui=new Zr,ii=It+mr,cn=It+ct;It<ii;)it(hi[ti++],Ui),Io(Ui,Qt,It,Dt,rt,Xe),It+=Dt,Xe+=Dt;It<cn&&(it(hi[ti++],Ui),Io(Ui,Qt,It,Tr,rt,Xe),It+=Tr,Xe+=Tr),++Ft&fr||(qe+=ur)}break;case 3:if(ct==rt&&Dt==Xe&&0<qe.b){for(It=rt,ct=Qt=Xe+(Jt-Ft)*Qt-(mr=(Jt-Ft)*ar(qe.Ea,qe.b)),Dt=rt,fr=Xe,ur=[],mr=(Tr=mr)-1;0<=mr;--mr)ur[mr]=Dt[fr+mr];for(mr=Tr-1;0<=mr;--mr)It[ct+mr]=ur[mr];dA(qe,Ft,Jt,rt,Qt,rt,Xe)}else dA(qe,Ft,Jt,ct,Dt,rt,Xe)}Xe=pe,rt=ae}rt!=ae&&i(pe,ae,Xe,rt,Oe)}function Ye(R,Q){var ae=R.V,pe=R.Ba+R.c*R.C,Pe=Q-R.C;if(t(Q<=R.l.o),t(16>=Pe),0<Pe){var Oe=R.l,Ke=R.Ta,Xe=R.Ua,rt=Oe.width;if(lt(R,Pe,ae,pe),Pe=Xe=[Xe],t((ae=R.C)<(pe=Q)),t(Oe.v<Oe.va),pe>Oe.o&&(pe=Oe.o),ae<Oe.j){var qe=Oe.j-ae;ae=Oe.j,Pe[0]+=qe*rt}if(ae>=pe?ae=0:(Pe[0]+=4*Oe.v,Oe.ka=ae-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=pe-ae,ae=1),ae){if(Xe=Xe[0],11>(ae=R.ca).S){var Ft=ae.f.RGBA,Jt=(pe=ae.S,Pe=Oe.U,Oe=Oe.T,qe=Ft.eb,Ft.A),ct=Oe;for(Ft=Ft.fb+R.Ma*Ft.A;0<ct--;){var Dt=Ke,Qt=Xe,ur=Pe,It=qe,fr=Ft;switch(pe){case pa:Mu(Dt,Qt,ur,It,fr);break;case Ih:Bl(Dt,Qt,ur,It,fr);break;case pA:Bl(Dt,Qt,ur,It,fr),fh(It,fr,0,ur,1,0);break;case El:ec(Dt,Qt,ur,It,fr);break;case Au:xt(Dt,Qt,ur,It,fr,1);break;case Ec:xt(Dt,Qt,ur,It,fr,1),fh(It,fr,0,ur,1,0);break;case mh:xt(Dt,Qt,ur,It,fr,0);break;case kl:xt(Dt,Qt,ur,It,fr,0),fh(It,fr,1,ur,1,0);break;case Tl:en(Dt,Qt,ur,It,fr);break;case du:en(Dt,Qt,ur,It,fr),ho(It,fr,ur,1,0);break;case Lh:Lo(Dt,Qt,ur,It,fr);break;default:t(0)}Xe+=rt,Ft+=Jt}R.Ma+=Oe}else alert("todo:EmitRescaledRowsYUVA");t(R.Ma<=ae.height)}}R.C=Q,t(R.C<=R.i)}function nt(R){var Q;if(0<R.ua)return 0;for(Q=0;Q<R.Wb;++Q){var ae=R.Ya[Q].G,pe=R.Ya[Q].H;if(0<ae[1][pe[1]+0].g||0<ae[2][pe[2]+0].g||0<ae[3][pe[3]+0].g)return 0}return 1}function Qe(R,Q,ae,pe,Pe,Oe){if(R.Z!=0){var Ke=R.qd,Xe=R.rd;for(t(Ll[R.Z]!=null);Q<ae;++Q)Ll[R.Z](Ke,Xe,pe,Pe,pe,Pe,Oe),Ke=pe,Xe=Pe,Pe+=Oe;R.qd=Ke,R.rd=Xe}}function st(R,Q){var ae=R.l.ma,pe=ae.Z==0||ae.Z==1?R.l.j:R.C;if(pe=R.C<pe?pe:R.C,t(Q<=R.l.o),Q>pe){var Pe=R.l.width,Oe=ae.ca,Ke=ae.tb+Pe*pe,Xe=R.V,rt=R.Ba+R.c*pe,qe=R.gc;t(R.ab==1),t(qe[0].hc==3),Ka(qe[0],pe,Q,Xe,rt,Oe,Ke),Qe(ae,pe,Q,Oe,Ke,Pe)}R.C=R.Ma=Q}function Tt(R,Q,ae,pe,Pe,Oe,Ke){var Xe=R.$/pe,rt=R.$%pe,qe=R.m,Ft=R.s,Jt=ae+R.$,ct=Jt;Pe=ae+pe*Pe;var Dt=ae+pe*Oe,Qt=280+Ft.ua,ur=R.Pb?Xe:16777216,It=0<Ft.ua?Ft.Wa:null,fr=Ft.wc,mr=Jt<Dt?De(Ft,rt,Xe):null;t(R.C<Oe),t(Dt<=Pe);var Tr=!1;e:for(;;){for(;Tr||Jt<Dt;){var wr=0;if(Xe>=ur){var hi=Jt-ae;t((ur=R).Pb),ur.wd=ur.m,ur.xd=hi,0<ur.s.ua&&lr(ur.s.Wa,ur.s.vb),ur=Xe+mA}if(rt&fr||(mr=De(Ft,rt,Xe)),t(mr!=null),mr.Qb&&(Q[Jt]=mr.qb,Tr=!0),!Tr)if(ze(qe),mr.jc){wr=qe,hi=Q;var ti=Jt,Ui=mr.pd[fe(wr)&oo-1];t(mr.jc),256>Ui.g?(Me(wr,wr.u+Ui.g),hi[ti]=Ui.value,wr=0):(Me(wr,wr.u+Ui.g-256),t(256<=Ui.value),wr=Ui.value),wr==0&&(Tr=!0)}else wr=gi(mr.G[0],mr.H[0],qe);if(qe.h)break;if(Tr||256>wr){if(!Tr)if(mr.nd)Q[Jt]=(mr.qb|wr<<8)>>>0;else{if(ze(qe),Tr=gi(mr.G[1],mr.H[1],qe),ze(qe),hi=gi(mr.G[2],mr.H[2],qe),ti=gi(mr.G[3],mr.H[3],qe),qe.h)break;Q[Jt]=(ti<<24|Tr<<16|wr<<8|hi)>>>0}if(Tr=!1,++Jt,++rt>=pe&&(rt=0,++Xe,Ke!=null&&Xe<=Oe&&!(Xe%16)&&Ke(R,Xe),It!=null))for(;ct<Jt;)wr=Q[ct++],It.X[(506832829*wr&4294967295)>>>It.Mb]=wr}else if(280>wr){if(wr=mi(wr-256,qe),hi=gi(mr.G[4],mr.H[4],qe),ze(qe),hi=ln(pe,hi=mi(hi,qe)),qe.h)break;if(Jt-ae<hi||Pe-Jt<wr)break e;for(ti=0;ti<wr;++ti)Q[Jt+ti]=Q[Jt+ti-hi];for(Jt+=wr,rt+=wr;rt>=pe;)rt-=pe,++Xe,Ke!=null&&Xe<=Oe&&!(Xe%16)&&Ke(R,Xe);if(t(Jt<=Pe),rt&fr&&(mr=De(Ft,rt,Xe)),It!=null)for(;ct<Jt;)wr=Q[ct++],It.X[(506832829*wr&4294967295)>>>It.Mb]=wr}else{if(!(wr<Qt))break e;for(Tr=wr-280,t(It!=null);ct<Jt;)wr=Q[ct++],It.X[(506832829*wr&4294967295)>>>It.Mb]=wr;wr=Jt,t(!(Tr>>>(hi=It).Xa)),Q[wr]=hi.X[Tr],Tr=!0}Tr||t(qe.h==be(qe))}if(R.Pb&&qe.h&&Jt<Pe)t(R.m.h),R.a=5,R.m=R.wd,R.$=R.xd,0<R.s.ua&&lr(R.s.vb,R.s.Wa);else{if(qe.h)break e;Ke?.(R,Xe>Oe?Oe:Xe),R.a=0,R.$=Jt-ae}return 1}return R.a=3,0}function sr(R){t(R!=null),R.vc=null,R.yc=null,R.Ya=null;var Q=R.Wa;Q!=null&&(Q.X=null),R.vb=null,t(R!=null)}function jt(){var R=new ji;return R==null?null:(R.a=0,R.xb=ja,Gt("Predictor","VP8LPredictors"),Gt("Predictor","VP8LPredictors_C"),Gt("PredictorAdd","VP8LPredictorsAdd"),Gt("PredictorAdd","VP8LPredictorsAdd_C"),bs=yr,Io=ye,Mu=Re,Bl=Ze,en=ot,Lo=vt,ec=Rt,J.VP8LMapColor32b=ws,J.VP8LMapColor8b=Lu,R)}function Kt(R,Q,ae,pe,Pe){var Oe=1,Ke=[R],Xe=[Q],rt=pe.m,qe=pe.s,Ft=null,Jt=0;e:for(;;){if(ae)for(;Oe&&Ge(rt,1);){var ct=Ke,Dt=Xe,Qt=pe,ur=1,It=Qt.m,fr=Qt.gc[Qt.ab],mr=Ge(It,2);if(Qt.Oc&1<<mr)Oe=0;else{switch(Qt.Oc|=1<<mr,fr.hc=mr,fr.Ea=ct[0],fr.nc=Dt[0],fr.K=[null],++Qt.ab,t(4>=Qt.ab),mr){case 0:case 1:fr.b=Ge(It,3)+2,ur=Kt(ar(fr.Ea,fr.b),ar(fr.nc,fr.b),0,Qt,fr.K),fr.K=fr.K[0];break;case 3:var Tr,wr=Ge(It,8)+1,hi=16<wr?0:4<wr?1:2<wr?2:3;if(ct[0]=ar(fr.Ea,hi),fr.b=hi,Tr=ur=Kt(wr,1,0,Qt,fr.K)){var ti,Ui=wr,ii=fr,cn=1<<(8>>ii.b),Ws=a(cn);if(Ws==null)Tr=0;else{var zi=ii.K[0],ai=ii.w;for(Ws[0]=ii.K[0][0],ti=1;ti<1*Ui;++ti)Ws[ti]=Wr(zi[ai+ti],Ws[ti-1]);for(;ti<4*cn;++ti)Ws[ti]=0;ii.K[0]=null,ii.K[0]=Ws,Tr=1}}ur=Tr;break;case 2:break;default:t(0)}Oe=ur}}if(Ke=Ke[0],Xe=Xe[0],Oe&&Ge(rt,1)&&!(Oe=1<=(Jt=Ge(rt,4))&&11>=Jt)){pe.a=3;break e}var Vr;if(Vr=Oe)t:{var Li,Hi,qi,ni=pe,Vi=Ke,nn=Xe,is=Jt,Ss=ae,jn=ni.m,ls=ni.s,kr=[null],Or=1,Jn=0,Mi=sl[is];r:for(;;){if(Ss&&Ge(jn,1)){var Ds=Ge(jn,3)+2,es=ar(Vi,Ds),Es=ar(nn,Ds),cs=es*Es;if(!Kt(es,Es,0,ni,kr))break r;for(kr=kr[0],ls.xc=Ds,Li=0;Li<cs;++Li){var Sn=kr[Li]>>8&65535;kr[Li]=Sn,Sn>=Or&&(Or=Sn+1)}}if(jn.h)break r;for(Hi=0;5>Hi;++Hi){var $s=fo[Hi];!Hi&&0<is&&($s+=1<<is),Jn<$s&&(Jn=$s)}var mo=c(Or*Mi,me),Ua=Or,Ln=c(Ua,Fe);if(Ln==null)var vi=null;else t(65536>=Ua),vi=Ln;var un=a(Jn);if(vi==null||un==null||mo==null){ni.a=1;break r}var ps=mo;for(Li=qi=0;Li<Or;++Li){var wn=vi[Li],ra=wn.G,js=wn.H,Ro=0,ll=1,ns=0;for(Hi=0;5>Hi;++Hi){$s=fo[Hi],ra[Hi]=ps,js[Hi]=qi,!Hi&&0<is&&($s+=1<<is);n:{var ac,Rh=$s,Qu=ni,Dl=un,JA=ps,ed=qi,Hu=0,oc=Qu.m,S=Ge(oc,1);if(n(Dl,0,0,Rh),S){var o=Ge(oc,1)+1,f=Ge(oc,1),y=Ge(oc,f==0?1:8);Dl[y]=1,o==2&&(Dl[y=Ge(oc,8)]=1);var w=1}else{var T=a(19),I=Ge(oc,4)+4;if(19<I){Qu.a=3;var O=0;break n}for(ac=0;ac<I;++ac)T[Fl[ac]]=Ge(oc,3);var V=void 0,se=void 0,oe=Qu,ge=T,de=Rh,Ee=Dl,je=0,Je=oe.m,tt=8,at=c(128,me);i:for(;K(at,0,7,ge,19);){if(Ge(Je,1)){var ft=2+2*Ge(Je,3);if((V=2+Ge(Je,ft))>de)break i}else V=de;for(se=0;se<de&&V--;){ze(Je);var mt=at[0+(127&fe(Je))];Me(Je,Je.u+mt.g);var pt=mt.value;if(16>pt)Ee[se++]=pt,pt!=0&&(tt=pt);else{var bt=pt==16,St=pt-16,gt=Ao[St],kt=Ge(Je,gh[St])+gt;if(se+kt>de)break i;for(var tr=bt?tt:0;0<kt--;)Ee[se++]=tr}}je=1;break i}je||(oe.a=3),w=je}(w=w&&!oc.h)&&(Hu=K(JA,ed,8,Dl,Rh)),w&&Hu!=0?O=Hu:(Qu.a=3,O=0)}if(O==0)break r;if(ll&&Tc[Hi]==1&&(ll=ps[qi].g==0),Ro+=ps[qi].g,qi+=O,3>=Hi){var Vt,Wt=un[0];for(Vt=1;Vt<$s;++Vt)un[Vt]>Wt&&(Wt=un[Vt]);ns+=Wt}}if(wn.nd=ll,wn.Qb=0,ll&&(wn.qb=(ra[3][js[3]+0].value<<24|ra[1][js[1]+0].value<<16|ra[2][js[2]+0].value)>>>0,Ro==0&&256>ra[0][js[0]+0].value&&(wn.Qb=1,wn.qb+=ra[0][js[0]+0].value<<8)),wn.jc=!wn.Qb&&6>ns,wn.jc){var Xt,Sr=wn;for(Xt=0;Xt<oo;++Xt){var Er=Xt,gr=Sr.pd[Er],Xr=Sr.G[0][Sr.H[0]+Er];256<=Xr.value?(gr.g=Xr.g+256,gr.value=Xr.value):(gr.g=0,gr.value=0,Er>>=dr(Xr,8,gr),Er>>=dr(Sr.G[1][Sr.H[1]+Er],16,gr),Er>>=dr(Sr.G[2][Sr.H[2]+Er],0,gr),dr(Sr.G[3][Sr.H[3]+Er],24,gr))}}}ls.vc=kr,ls.Wb=Or,ls.Ya=vi,ls.yc=mo,Vr=1;break t}Vr=0}if(!(Oe=Vr)){pe.a=3;break e}if(0<Jt){if(qe.ua=1<<Jt,!Ve(qe.Wa,Jt)){pe.a=1,Oe=0;break e}}else qe.ua=0;var Bi=pe,En=Ke,Nn=Xe,Mn=Bi.s,ss=Mn.xc;if(Bi.c=En,Bi.i=Nn,Mn.md=ar(En,ss),Mn.wc=ss==0?-1:(1<<ss)-1,ae){pe.xb=Uu;break e}if((Ft=a(Ke*Xe))==null){pe.a=1,Oe=0;break e}Oe=(Oe=Tt(pe,Ft,0,Ke,Xe,Xe,null))&&!rt.h;break e}return Oe?(Pe!=null?Pe[0]=Ft:(t(Ft==null),t(ae)),pe.$=0,ae||sr(qe)):sr(qe),Oe}function Mt(R,Q){var ae=R.c*R.i,pe=ae+Q+16*Q;return t(R.c<=Q),R.V=a(pe),R.V==null?(R.Ta=null,R.Ua=0,R.a=1,0):(R.Ta=R.V,R.Ua=R.Ba+ae+Q,1)}function Cr(R,Q){var ae=R.C,pe=Q-ae,Pe=R.V,Oe=R.Ba+R.c*ae;for(t(Q<=R.l.o);0<pe;){var Ke=16<pe?16:pe,Xe=R.l.ma,rt=R.l.width,qe=rt*Ke,Ft=Xe.ca,Jt=Xe.tb+rt*ae,ct=R.Ta,Dt=R.Ua;lt(R,Ke,Pe,Oe),Sc(ct,Dt,Ft,Jt,qe),Qe(Xe,ae,ae+Ke,Ft,Jt,rt),pe-=Ke,Pe+=Ke*R.c,ae+=Ke}t(ae==Q),R.C=R.Ma=Q}function Dr(){this.ub=this.yd=this.td=this.Rb=0}function Kr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pr(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Gr(){this.Yb=function(){var R=[];return function Q(ae,pe,Pe){for(var Oe=Pe[pe],Ke=0;Ke<Oe&&(ae.push(Pe.length>pe+1?[]:0),!(Pe.length<pe+1));Ke++)Q(ae[Ke],pe+1,Pe)}(R,0,[3,11]),R}()}function yi(){this.jb=a(3),this.Wc=s([4,8],Gr),this.Xc=s([4,17],Gr)}function Fi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ni(){this.ld=this.La=this.dd=this.tc=0}function _i(){this.Na=this.la=0}function Qa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function La(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ma(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ni),this.Y=0,this.ya=Array(new La),this.aa=0,this.l=new iu}function ea(){this.y=a(16),this.f=a(8),this.ea=a(8)}function xa(){this.cb=this.a=0,this.sc="",this.m=new Y,this.Od=new Dr,this.Kc=new Kr,this.ed=new Fi,this.Qa=new Pr,this.Ic=this.$c=this.Aa=0,this.D=new Ma,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Y),this.ia=0,this.pb=c(4,Qa),this.Pa=new yi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ea),this.Hd=0,this.rb=Array(new _i),this.sb=0,this.wa=Array(new Ni),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new La),this.L=this.aa=0,this.gd=s([4,2],Ni),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qs(R,Q){return 0>R?0:R>Q?Q:R}function iu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function no(){var R=new xa;return R!=null&&(R.a=0,R.sc="OK",R.cb=0,R.Xb=0,ma||(ma=oh)),R}function rs(R,Q,ae){return R.a==0&&(R.a=Q,R.sc=ae,R.cb=0),0}function cA(R,Q,ae){return 3<=ae&&R[Q+0]==157&&R[Q+1]==1&&R[Q+2]==42}function $o(R,Q){if(R==null)return 0;if(R.a=0,R.sc="OK",Q==null)return rs(R,2,"null VP8Io passed to VP8GetHeaders()");var ae=Q.data,pe=Q.w,Pe=Q.ha;if(4>Pe)return rs(R,7,"Truncated header.");var Oe=ae[pe+0]|ae[pe+1]<<8|ae[pe+2]<<16,Ke=R.Od;if(Ke.Rb=!(1&Oe),Ke.td=Oe>>1&7,Ke.yd=Oe>>4&1,Ke.ub=Oe>>5,3<Ke.td)return rs(R,3,"Incorrect keyframe parameters.");if(!Ke.yd)return rs(R,4,"Frame not displayable.");pe+=3,Pe-=3;var Xe=R.Kc;if(Ke.Rb){if(7>Pe)return rs(R,7,"cannot parse picture header");if(!cA(ae,pe,Pe))return rs(R,3,"Bad code word");Xe.c=16383&(ae[pe+4]<<8|ae[pe+3]),Xe.Td=ae[pe+4]>>6,Xe.i=16383&(ae[pe+6]<<8|ae[pe+5]),Xe.Ud=ae[pe+6]>>6,pe+=7,Pe-=7,R.za=Xe.c+15>>4,R.Ub=Xe.i+15>>4,Q.width=Xe.c,Q.height=Xe.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,n((Oe=R.Pa).jb,0,255,Oe.jb.length),t((Oe=R.Qa)!=null),Oe.Cb=0,Oe.Bb=0,Oe.Fb=1,n(Oe.Zb,0,0,Oe.Zb.length),n(Oe.Lb,0,0,Oe.Lb)}if(Ke.ub>Pe)return rs(R,7,"bad partition length");he(Oe=R.m,ae,pe,Ke.ub),pe+=Ke.ub,Pe-=Ke.ub,Ke.Rb&&(Xe.Ld=ut(Oe),Xe.Kd=ut(Oe)),Xe=R.Qa;var rt,qe=R.Pa;if(t(Oe!=null),t(Xe!=null),Xe.Cb=ut(Oe),Xe.Cb){if(Xe.Bb=ut(Oe),ut(Oe)){for(Xe.Fb=ut(Oe),rt=0;4>rt;++rt)Xe.Zb[rt]=ut(Oe)?$e(Oe,7):0;for(rt=0;4>rt;++rt)Xe.Lb[rt]=ut(Oe)?$e(Oe,6):0}if(Xe.Bb)for(rt=0;3>rt;++rt)qe.jb[rt]=ut(Oe)?Le(Oe,8):255}else Xe.Bb=0;if(Oe.Ka)return rs(R,3,"cannot parse segment header");if((Xe=R.ed).zd=ut(Oe),Xe.Tb=Le(Oe,6),Xe.wb=Le(Oe,3),Xe.Pc=ut(Oe),Xe.Pc&&ut(Oe)){for(qe=0;4>qe;++qe)ut(Oe)&&(Xe.vd[qe]=$e(Oe,6));for(qe=0;4>qe;++qe)ut(Oe)&&(Xe.od[qe]=$e(Oe,6))}if(R.L=Xe.Tb==0?0:Xe.zd?1:2,Oe.Ka)return rs(R,3,"cannot parse filter header");var Ft=Pe;if(Pe=rt=pe,pe=rt+Ft,Xe=Ft,R.Xb=(1<<Le(R.m,2))-1,Ft<3*(qe=R.Xb))ae=7;else{for(rt+=3*qe,Xe-=3*qe,Ft=0;Ft<qe;++Ft){var Jt=ae[Pe+0]|ae[Pe+1]<<8|ae[Pe+2]<<16;Jt>Xe&&(Jt=Xe),he(R.Jc[+Ft],ae,rt,Jt),rt+=Jt,Xe-=Jt,Pe+=3}he(R.Jc[+qe],ae,rt,Xe),ae=rt<pe?0:5}if(ae!=0)return rs(R,ae,"cannot parse partitions");for(ae=Le(rt=R.m,7),Pe=ut(rt)?$e(rt,4):0,pe=ut(rt)?$e(rt,4):0,Xe=ut(rt)?$e(rt,4):0,qe=ut(rt)?$e(rt,4):0,rt=ut(rt)?$e(rt,4):0,Ft=R.Qa,Jt=0;4>Jt;++Jt){if(Ft.Cb){var ct=Ft.Zb[Jt];Ft.Fb||(ct+=ae)}else{if(0<Jt){R.pb[Jt]=R.pb[0];continue}ct=ae}var Dt=R.pb[Jt];Dt.Sc[0]=gA[Qs(ct+Pe,127)],Dt.Sc[1]=fu[Qs(ct+0,127)],Dt.Eb[0]=2*gA[Qs(ct+pe,127)],Dt.Eb[1]=101581*fu[Qs(ct+Xe,127)]>>16,8>Dt.Eb[1]&&(Dt.Eb[1]=8),Dt.Qc[0]=gA[Qs(ct+qe,117)],Dt.Qc[1]=fu[Qs(ct+rt,127)],Dt.lc=ct+rt}if(!Ke.Rb)return rs(R,4,"Not a key frame.");for(ut(Oe),Ke=R.Pa,ae=0;4>ae;++ae){for(Pe=0;8>Pe;++Pe)for(pe=0;3>pe;++pe)for(Xe=0;11>Xe;++Xe)qe=dt(Oe,Nl[ae][Pe][pe][Xe])?Le(Oe,8):al[ae][Pe][pe][Xe],Ke.Wc[ae][Pe].Yb[pe][Xe]=qe;for(Pe=0;17>Pe;++Pe)Ke.Xc[ae][Pe]=Ke.Wc[ae][Ph[Pe]]}return R.kc=ut(Oe),R.kc&&(R.Bd=Le(Oe,8)),R.cb=1}function oh(R,Q,ae,pe,Pe,Oe,Ke){var Xe=Q[Pe].Yb[ae];for(ae=0;16>Pe;++Pe){if(!dt(R,Xe[ae+0]))return Pe;for(;!dt(R,Xe[ae+1]);)if(Xe=Q[++Pe].Yb[0],ae=0,Pe==16)return 16;var rt=Q[Pe+1].Yb;if(dt(R,Xe[ae+2])){var qe=R,Ft=0;if(dt(qe,(ct=Xe)[(Jt=ae)+3]))if(dt(qe,ct[Jt+6])){for(Xe=0,Jt=2*(Ft=dt(qe,ct[Jt+8]))+(ct=dt(qe,ct[Jt+9+Ft])),Ft=0,ct=Bs[Jt];ct[Xe];++Xe)Ft+=Ft+dt(qe,ct[Xe]);Ft+=3+(8<<Jt)}else dt(qe,ct[Jt+7])?(Ft=7+2*dt(qe,165),Ft+=dt(qe,145)):Ft=5+dt(qe,159);else Ft=dt(qe,ct[Jt+4])?3+dt(qe,ct[Jt+5]):2;Xe=rt[2]}else Ft=1,Xe=rt[1];rt=Ke+mn[Pe],0>(qe=R).b&&We(qe);var Jt,ct=qe.b,Dt=(Jt=qe.Ca>>1)-(qe.I>>ct)>>31;--qe.b,qe.Ca+=Dt,qe.Ca|=1,qe.I-=(Jt+1&Dt)<<ct,Oe[rt]=((Ft^Dt)-Dt)*pe[(0<Pe)+0]}return 16}function lh(R){var Q=R.rb[R.sb-1];Q.la=0,Q.Na=0,n(R.zc,0,0,R.zc.length),R.ja=0}function Xo(R,Q,ae,pe,Pe){Pe=R[Q+ae+32*pe]+(Pe>>3),R[Q+ae+32*pe]=-256&Pe?0>Pe?0:255:Pe}function kn(R,Q,ae,pe,Pe,Oe){Xo(R,Q,0,ae,pe+Pe),Xo(R,Q,1,ae,pe+Oe),Xo(R,Q,2,ae,pe-Oe),Xo(R,Q,3,ae,pe-Pe)}function Pa(R){return(20091*R>>16)+R}function ch(R,Q,ae,pe){var Pe,Oe=0,Ke=a(16);for(Pe=0;4>Pe;++Pe){var Xe=R[Q+0]+R[Q+8],rt=R[Q+0]-R[Q+8],qe=(35468*R[Q+4]>>16)-Pa(R[Q+12]),Ft=Pa(R[Q+4])+(35468*R[Q+12]>>16);Ke[Oe+0]=Xe+Ft,Ke[Oe+1]=rt+qe,Ke[Oe+2]=rt-qe,Ke[Oe+3]=Xe-Ft,Oe+=4,Q++}for(Pe=Oe=0;4>Pe;++Pe)Xe=(R=Ke[Oe+0]+4)+Ke[Oe+8],rt=R-Ke[Oe+8],qe=(35468*Ke[Oe+4]>>16)-Pa(Ke[Oe+12]),Xo(ae,pe,0,0,Xe+(Ft=Pa(Ke[Oe+4])+(35468*Ke[Oe+12]>>16))),Xo(ae,pe,1,0,rt+qe),Xo(ae,pe,2,0,rt-qe),Xo(ae,pe,3,0,Xe-Ft),Oe++,pe+=32}function Nh(R,Q,ae,pe){var Pe=R[Q+0]+4,Oe=35468*R[Q+4]>>16,Ke=Pa(R[Q+4]),Xe=35468*R[Q+1]>>16;kn(ae,pe,0,Pe+Ke,R=Pa(R[Q+1]),Xe),kn(ae,pe,1,Pe+Oe,R,Xe),kn(ae,pe,2,Pe-Oe,R,Xe),kn(ae,pe,3,Pe-Ke,R,Xe)}function To(R,Q,ae,pe,Pe){ch(R,Q,ae,pe),Pe&&ch(R,Q+16,ae,pe+4)}function Zo(R,Q,ae,pe){tc(R,Q+0,ae,pe,1),tc(R,Q+32,ae,pe+128,1)}function uA(R,Q,ae,pe){var Pe;for(R=R[Q+0]+4,Pe=0;4>Pe;++Pe)for(Q=0;4>Q;++Q)Xo(ae,pe,Q,Pe,R)}function Yo(R,Q,ae,pe){R[Q+0]&&pn(R,Q+0,ae,pe),R[Q+16]&&pn(R,Q+16,ae,pe+4),R[Q+32]&&pn(R,Q+32,ae,pe+128),R[Q+48]&&pn(R,Q+48,ae,pe+128+4)}function vc(R,Q,ae,pe){var Pe,Oe=a(16);for(Pe=0;4>Pe;++Pe){var Ke=R[Q+0+Pe]+R[Q+12+Pe],Xe=R[Q+4+Pe]+R[Q+8+Pe],rt=R[Q+4+Pe]-R[Q+8+Pe],qe=R[Q+0+Pe]-R[Q+12+Pe];Oe[0+Pe]=Ke+Xe,Oe[8+Pe]=Ke-Xe,Oe[4+Pe]=qe+rt,Oe[12+Pe]=qe-rt}for(Pe=0;4>Pe;++Pe)Ke=(R=Oe[0+4*Pe]+3)+Oe[3+4*Pe],Xe=Oe[1+4*Pe]+Oe[2+4*Pe],rt=Oe[1+4*Pe]-Oe[2+4*Pe],qe=R-Oe[3+4*Pe],ae[pe+0]=Ke+Xe>>3,ae[pe+16]=qe+rt>>3,ae[pe+32]=Ke-Xe>>3,ae[pe+48]=qe-rt>>3,pe+=64}function xc(R,Q,ae){var pe,Pe=Q-32,Oe=Rs,Ke=255-R[Pe-1];for(pe=0;pe<ae;++pe){var Xe,rt=Oe,qe=Ke+R[Q-1];for(Xe=0;Xe<ae;++Xe)R[Q+Xe]=rt[qe+R[Pe+Xe]];Q+=32}}function ya(R,Q){xc(R,Q,4)}function Xi(R,Q){xc(R,Q,8)}function Eu(R,Q){xc(R,Q,16)}function Aa(R,Q){var ae;for(ae=0;16>ae;++ae)i(R,Q+32*ae,R,Q-32,16)}function Jo(R,Q){var ae;for(ae=16;0<ae;--ae)n(R,Q,R[Q-1],16),Q+=32}function Ti(R,Q,ae){var pe;for(pe=0;16>pe;++pe)n(Q,ae+32*pe,R,16)}function nu(R,Q){var ae,pe=16;for(ae=0;16>ae;++ae)pe+=R[Q-1+32*ae]+R[Q+ae-32];Ti(pe>>5,R,Q)}function Ha(R,Q){var ae,pe=8;for(ae=0;16>ae;++ae)pe+=R[Q-1+32*ae];Ti(pe>>4,R,Q)}function so(R,Q){var ae,pe=8;for(ae=0;16>ae;++ae)pe+=R[Q+ae-32];Ti(pe>>4,R,Q)}function Ra(R,Q){Ti(128,R,Q)}function oi(R,Q,ae){return R+2*Q+ae+2>>2}function Hs(R,Q){var ae,pe=Q-32;for(pe=new Uint8Array([oi(R[pe-1],R[pe+0],R[pe+1]),oi(R[pe+0],R[pe+1],R[pe+2]),oi(R[pe+1],R[pe+2],R[pe+3]),oi(R[pe+2],R[pe+3],R[pe+4])]),ae=0;4>ae;++ae)i(R,Q+32*ae,pe,0,pe.length)}function ys(R,Q){var ae=R[Q-1],pe=R[Q-1+32],Pe=R[Q-1+64],Oe=R[Q-1+96];zt(R,Q+0,16843009*oi(R[Q-1-32],ae,pe)),zt(R,Q+32,16843009*oi(ae,pe,Pe)),zt(R,Q+64,16843009*oi(pe,Pe,Oe)),zt(R,Q+96,16843009*oi(Pe,Oe,Oe))}function An(R,Q){var ae,pe=4;for(ae=0;4>ae;++ae)pe+=R[Q+ae-32]+R[Q-1+32*ae];for(pe>>=3,ae=0;4>ae;++ae)n(R,Q+32*ae,pe,4)}function Va(R,Q){var ae=R[Q-1+0],pe=R[Q-1+32],Pe=R[Q-1+64],Oe=R[Q-1-32],Ke=R[Q+0-32],Xe=R[Q+1-32],rt=R[Q+2-32],qe=R[Q+3-32];R[Q+0+96]=oi(pe,Pe,R[Q-1+96]),R[Q+1+96]=R[Q+0+64]=oi(ae,pe,Pe),R[Q+2+96]=R[Q+1+64]=R[Q+0+32]=oi(Oe,ae,pe),R[Q+3+96]=R[Q+2+64]=R[Q+1+32]=R[Q+0+0]=oi(Ke,Oe,ae),R[Q+3+64]=R[Q+2+32]=R[Q+1+0]=oi(Xe,Ke,Oe),R[Q+3+32]=R[Q+2+0]=oi(rt,Xe,Ke),R[Q+3+0]=oi(qe,rt,Xe)}function Yn(R,Q){var ae=R[Q+1-32],pe=R[Q+2-32],Pe=R[Q+3-32],Oe=R[Q+4-32],Ke=R[Q+5-32],Xe=R[Q+6-32],rt=R[Q+7-32];R[Q+0+0]=oi(R[Q+0-32],ae,pe),R[Q+1+0]=R[Q+0+32]=oi(ae,pe,Pe),R[Q+2+0]=R[Q+1+32]=R[Q+0+64]=oi(pe,Pe,Oe),R[Q+3+0]=R[Q+2+32]=R[Q+1+64]=R[Q+0+96]=oi(Pe,Oe,Ke),R[Q+3+32]=R[Q+2+64]=R[Q+1+96]=oi(Oe,Ke,Xe),R[Q+3+64]=R[Q+2+96]=oi(Ke,Xe,rt),R[Q+3+96]=oi(Xe,rt,rt)}function Ls(R,Q){var ae=R[Q-1+0],pe=R[Q-1+32],Pe=R[Q-1+64],Oe=R[Q-1-32],Ke=R[Q+0-32],Xe=R[Q+1-32],rt=R[Q+2-32],qe=R[Q+3-32];R[Q+0+0]=R[Q+1+64]=Oe+Ke+1>>1,R[Q+1+0]=R[Q+2+64]=Ke+Xe+1>>1,R[Q+2+0]=R[Q+3+64]=Xe+rt+1>>1,R[Q+3+0]=rt+qe+1>>1,R[Q+0+96]=oi(Pe,pe,ae),R[Q+0+64]=oi(pe,ae,Oe),R[Q+0+32]=R[Q+1+96]=oi(ae,Oe,Ke),R[Q+1+32]=R[Q+2+96]=oi(Oe,Ke,Xe),R[Q+2+32]=R[Q+3+96]=oi(Ke,Xe,rt),R[Q+3+32]=oi(Xe,rt,qe)}function _a(R,Q){var ae=R[Q+0-32],pe=R[Q+1-32],Pe=R[Q+2-32],Oe=R[Q+3-32],Ke=R[Q+4-32],Xe=R[Q+5-32],rt=R[Q+6-32],qe=R[Q+7-32];R[Q+0+0]=ae+pe+1>>1,R[Q+1+0]=R[Q+0+64]=pe+Pe+1>>1,R[Q+2+0]=R[Q+1+64]=Pe+Oe+1>>1,R[Q+3+0]=R[Q+2+64]=Oe+Ke+1>>1,R[Q+0+32]=oi(ae,pe,Pe),R[Q+1+32]=R[Q+0+96]=oi(pe,Pe,Oe),R[Q+2+32]=R[Q+1+96]=oi(Pe,Oe,Ke),R[Q+3+32]=R[Q+2+96]=oi(Oe,Ke,Xe),R[Q+3+64]=oi(Ke,Xe,rt),R[Q+3+96]=oi(Xe,rt,qe)}function el(R,Q){var ae=R[Q-1+0],pe=R[Q-1+32],Pe=R[Q-1+64],Oe=R[Q-1+96];R[Q+0+0]=ae+pe+1>>1,R[Q+2+0]=R[Q+0+32]=pe+Pe+1>>1,R[Q+2+32]=R[Q+0+64]=Pe+Oe+1>>1,R[Q+1+0]=oi(ae,pe,Pe),R[Q+3+0]=R[Q+1+32]=oi(pe,Pe,Oe),R[Q+3+32]=R[Q+1+64]=oi(Pe,Oe,Oe),R[Q+3+64]=R[Q+2+64]=R[Q+0+96]=R[Q+1+96]=R[Q+2+96]=R[Q+3+96]=Oe}function _n(R,Q){var ae=R[Q-1+0],pe=R[Q-1+32],Pe=R[Q-1+64],Oe=R[Q-1+96],Ke=R[Q-1-32],Xe=R[Q+0-32],rt=R[Q+1-32],qe=R[Q+2-32];R[Q+0+0]=R[Q+2+32]=ae+Ke+1>>1,R[Q+0+32]=R[Q+2+64]=pe+ae+1>>1,R[Q+0+64]=R[Q+2+96]=Pe+pe+1>>1,R[Q+0+96]=Oe+Pe+1>>1,R[Q+3+0]=oi(Xe,rt,qe),R[Q+2+0]=oi(Ke,Xe,rt),R[Q+1+0]=R[Q+3+32]=oi(ae,Ke,Xe),R[Q+1+32]=R[Q+3+64]=oi(pe,ae,Ke),R[Q+1+64]=R[Q+3+96]=oi(Pe,pe,ae),R[Q+1+96]=oi(Oe,Pe,pe)}function Fn(R,Q){var ae;for(ae=0;8>ae;++ae)i(R,Q+32*ae,R,Q-32,8)}function Wi(R,Q){var ae;for(ae=0;8>ae;++ae)n(R,Q,R[Q-1],8),Q+=32}function di(R,Q,ae){var pe;for(pe=0;8>pe;++pe)n(Q,ae+32*pe,R,8)}function Vs(R,Q){var ae,pe=8;for(ae=0;8>ae;++ae)pe+=R[Q+ae-32]+R[Q-1+32*ae];di(pe>>4,R,Q)}function bi(R,Q){var ae,pe=4;for(ae=0;8>ae;++ae)pe+=R[Q+ae-32];di(pe>>3,R,Q)}function Kl(R,Q){var ae,pe=4;for(ae=0;8>ae;++ae)pe+=R[Q-1+32*ae];di(pe>>3,R,Q)}function _s(R,Q){di(128,R,Q)}function Wl(R,Q,ae){var pe=R[Q-ae],Pe=R[Q+0],Oe=3*(Pe-pe)+hu[1020+R[Q-2*ae]-R[Q+ae]],Ke=ju[112+(Oe+4>>3)];R[Q-ae]=Rs[255+pe+ju[112+(Oe+3>>3)]],R[Q+0]=Rs[255+Pe-Ke]}function $l(R,Q,ae,pe){var Pe=R[Q+0],Oe=R[Q+ae];return Ii[255+R[Q-2*ae]-R[Q-ae]]>pe||Ii[255+Oe-Pe]>pe}function xl(R,Q,ae,pe){return 4*Ii[255+R[Q-ae]-R[Q+0]]+Ii[255+R[Q-2*ae]-R[Q+ae]]<=pe}function ko(R,Q,ae,pe,Pe){var Oe=R[Q-3*ae],Ke=R[Q-2*ae],Xe=R[Q-ae],rt=R[Q+0],qe=R[Q+ae],Ft=R[Q+2*ae],Jt=R[Q+3*ae];return 4*Ii[255+Xe-rt]+Ii[255+Ke-qe]>pe?0:Ii[255+R[Q-4*ae]-Oe]<=Pe&&Ii[255+Oe-Ke]<=Pe&&Ii[255+Ke-Xe]<=Pe&&Ii[255+Jt-Ft]<=Pe&&Ii[255+Ft-qe]<=Pe&&Ii[255+qe-rt]<=Pe}function Fo(R,Q,ae,pe){var Pe=2*pe+1;for(pe=0;16>pe;++pe)xl(R,Q+pe,ae,Pe)&&Wl(R,Q+pe,ae)}function Tu(R,Q,ae,pe){var Pe=2*pe+1;for(pe=0;16>pe;++pe)xl(R,Q+pe*ae,1,Pe)&&Wl(R,Q+pe*ae,1)}function uh(R,Q,ae,pe){var Pe;for(Pe=3;0<Pe;--Pe)Fo(R,Q+=4*ae,ae,pe)}function ku(R,Q,ae,pe){var Pe;for(Pe=3;0<Pe;--Pe)Tu(R,Q+=4,ae,pe)}function ba(R,Q,ae,pe,Pe,Oe,Ke,Xe){for(Oe=2*Oe+1;0<Pe--;){if(ko(R,Q,ae,Oe,Ke))if($l(R,Q,ae,Xe))Wl(R,Q,ae);else{var rt=R,qe=Q,Ft=ae,Jt=rt[qe-2*Ft],ct=rt[qe-Ft],Dt=rt[qe+0],Qt=rt[qe+Ft],ur=rt[qe+2*Ft],It=27*(mr=hu[1020+3*(Dt-ct)+hu[1020+Jt-Qt]])+63>>7,fr=18*mr+63>>7,mr=9*mr+63>>7;rt[qe-3*Ft]=Rs[255+rt[qe-3*Ft]+mr],rt[qe-2*Ft]=Rs[255+Jt+fr],rt[qe-Ft]=Rs[255+ct+It],rt[qe+0]=Rs[255+Dt-It],rt[qe+Ft]=Rs[255+Qt-fr],rt[qe+2*Ft]=Rs[255+ur-mr]}Q+=pe}}function Wn(R,Q,ae,pe,Pe,Oe,Ke,Xe){for(Oe=2*Oe+1;0<Pe--;){if(ko(R,Q,ae,Oe,Ke))if($l(R,Q,ae,Xe))Wl(R,Q,ae);else{var rt=R,qe=Q,Ft=ae,Jt=rt[qe-Ft],ct=rt[qe+0],Dt=rt[qe+Ft],Qt=ju[112+(4+(ur=3*(ct-Jt))>>3)],ur=ju[112+(ur+3>>3)],It=Qt+1>>1;rt[qe-2*Ft]=Rs[255+rt[qe-2*Ft]+It],rt[qe-Ft]=Rs[255+Jt+ur],rt[qe+0]=Rs[255+ct-Qt],rt[qe+Ft]=Rs[255+Dt-It]}Q+=pe}}function yc(R,Q,ae,pe,Pe,Oe){ba(R,Q,ae,1,16,pe,Pe,Oe)}function Xl(R,Q,ae,pe,Pe,Oe){ba(R,Q,1,ae,16,pe,Pe,Oe)}function Zl(R,Q,ae,pe,Pe,Oe){var Ke;for(Ke=3;0<Ke;--Ke)Wn(R,Q+=4*ae,ae,1,16,pe,Pe,Oe)}function re(R,Q,ae,pe,Pe,Oe){var Ke;for(Ke=3;0<Ke;--Ke)Wn(R,Q+=4,1,ae,16,pe,Pe,Oe)}function Ie(R,Q,ae,pe,Pe,Oe,Ke,Xe){ba(R,Q,Pe,1,8,Oe,Ke,Xe),ba(ae,pe,Pe,1,8,Oe,Ke,Xe)}function At(R,Q,ae,pe,Pe,Oe,Ke,Xe){ba(R,Q,1,Pe,8,Oe,Ke,Xe),ba(ae,pe,1,Pe,8,Oe,Ke,Xe)}function Et(R,Q,ae,pe,Pe,Oe,Ke,Xe){Wn(R,Q+4*Pe,Pe,1,8,Oe,Ke,Xe),Wn(ae,pe+4*Pe,Pe,1,8,Oe,Ke,Xe)}function Ht(R,Q,ae,pe,Pe,Oe,Ke,Xe){Wn(R,Q+4,1,Pe,8,Oe,Ke,Xe),Wn(ae,pe+4,1,Pe,8,Oe,Ke,Xe)}function cr(){this.ba=new Fr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ei,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Br(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $r(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ci(){this.ua=0,this.Wa=new ir,this.vb=new ir,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Fe,this.yc=new me}function ji(){this.xb=this.a=0,this.l=new iu,this.ca=new Fr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ae,this.Pb=0,this.wd=new Ae,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ci,this.ab=0,this.gc=c(4,$r),this.Oc=0}function Qi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new iu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zi(R,Q,ae,pe,Pe,Oe,Ke){for(R=R==null?0:R[Q+0],Q=0;Q<Ke;++Q)Pe[Oe+Q]=R+ae[pe+Q]&255,R=Pe[Oe+Q]}function Bn(R,Q,ae,pe,Pe,Oe,Ke){var Xe;if(R==null)Zi(null,null,ae,pe,Pe,Oe,Ke);else for(Xe=0;Xe<Ke;++Xe)Pe[Oe+Xe]=R[Q+Xe]+ae[pe+Xe]&255}function Gs(R,Q,ae,pe,Pe,Oe,Ke){if(R==null)Zi(null,null,ae,pe,Pe,Oe,Ke);else{var Xe,rt=R[Q+0],qe=rt,Ft=rt;for(Xe=0;Xe<Ke;++Xe)qe=Ft+(rt=R[Q+Xe])-qe,Ft=ae[pe+Xe]+(-256&qe?0>qe?0:255:qe)&255,qe=rt,Pe[Oe+Xe]=Ft}}function Qn(R,Q,ae,pe){var Pe=Q.width,Oe=Q.o;if(t(R!=null&&Q!=null),0>ae||0>=pe||ae+pe>Oe)return null;if(!R.Cc){if(R.ga==null){var Ke;if(R.ga=new Qi,(Ke=R.ga==null)||(Ke=Q.width*Q.o,t(R.Gb.length==0),R.Gb=a(Ke),R.Uc=0,R.Gb==null?Ke=0:(R.mb=R.Gb,R.nb=R.Uc,R.rc=null,Ke=1),Ke=!Ke),!Ke){Ke=R.ga;var Xe=R.Fa,rt=R.P,qe=R.qc,Ft=R.mb,Jt=R.nb,ct=rt+1,Dt=qe-1,Qt=Ke.l;if(t(Xe!=null&&Ft!=null&&Q!=null),Ll[0]=null,Ll[1]=Zi,Ll[2]=Bn,Ll[3]=Gs,Ke.ca=Ft,Ke.tb=Jt,Ke.c=Q.width,Ke.i=Q.height,t(0<Ke.c&&0<Ke.i),1>=qe)Q=0;else if(Ke.$a=3&Xe[rt+0],Ke.Z=Xe[rt+0]>>2&3,Ke.Lc=Xe[rt+0]>>4&3,rt=Xe[rt+0]>>6&3,0>Ke.$a||1<Ke.$a||4<=Ke.Z||1<Ke.Lc||rt)Q=0;else if(Qt.put=Yr,Qt.ac=In,Qt.bc=on,Qt.ma=Ke,Qt.width=Q.width,Qt.height=Q.height,Qt.Da=Q.Da,Qt.v=Q.v,Qt.va=Q.va,Qt.j=Q.j,Qt.o=Q.o,Ke.$a)e:{t(Ke.$a==1),Q=jt();t:for(;;){if(Q==null){Q=0;break e}if(t(Ke!=null),Ke.mc=Q,Q.c=Ke.c,Q.i=Ke.i,Q.l=Ke.l,Q.l.ma=Ke,Q.l.width=Ke.c,Q.l.height=Ke.i,Q.a=0,Ne(Q.m,Xe,ct,Dt),!Kt(Ke.c,Ke.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&nt(Q.s)?(Ke.ic=1,Xe=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=a(Xe),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(Ke.ic=0,Q=Mt(Q,Ke.c)),!Q))break t;Q=1;break e}Ke.mc=null,Q=0}else Q=Dt>=Ke.c*Ke.i;Ke=!Q}if(Ke)return null;R.ga.Lc!=1?R.Ga=0:pe=Oe-ae}t(R.ga!=null),t(ae+pe<=Oe);e:{if(Q=(Xe=R.ga).c,Oe=Xe.l.o,Xe.$a==0){if(ct=R.rc,Dt=R.Vc,Qt=R.Fa,rt=R.P+1+ae*Q,qe=R.mb,Ft=R.nb+ae*Q,t(rt<=R.P+R.qc),Xe.Z!=0)for(t(Ll[Xe.Z]!=null),Ke=0;Ke<pe;++Ke)Ll[Xe.Z](ct,Dt,Qt,rt,qe,Ft,Q),ct=qe,Dt=Ft,Ft+=Q,rt+=Q;else for(Ke=0;Ke<pe;++Ke)i(qe,Ft,Qt,rt,Q),ct=qe,Dt=Ft,Ft+=Q,rt+=Q;R.rc=ct,R.Vc=Dt}else{if(t(Xe.mc!=null),Q=ae+pe,t((Ke=Xe.mc)!=null),t(Q<=Ke.i),Ke.C>=Q)Q=1;else if(Xe.ic||tl(),Xe.ic){Xe=Ke.V,ct=Ke.Ba,Dt=Ke.c;var ur=Ke.i,It=(Qt=1,rt=Ke.$/Dt,qe=Ke.$%Dt,Ft=Ke.m,Jt=Ke.s,Ke.$),fr=Dt*ur,mr=Dt*Q,Tr=Jt.wc,wr=It<mr?De(Jt,qe,rt):null;t(It<=fr),t(Q<=ur),t(nt(Jt));t:for(;;){for(;!Ft.h&&It<mr;){if(qe&Tr||(wr=De(Jt,qe,rt)),t(wr!=null),ze(Ft),256>(ur=gi(wr.G[0],wr.H[0],Ft)))Xe[ct+It]=ur,++It,++qe>=Dt&&(qe=0,++rt<=Q&&!(rt%16)&&st(Ke,rt));else{if(!(280>ur)){Qt=0;break t}ur=mi(ur-256,Ft);var hi,ti=gi(wr.G[4],wr.H[4],Ft);if(ze(Ft),!(It>=(ti=ln(Dt,ti=mi(ti,Ft)))&&fr-It>=ur)){Qt=0;break t}for(hi=0;hi<ur;++hi)Xe[ct+It+hi]=Xe[ct+It+hi-ti];for(It+=ur,qe+=ur;qe>=Dt;)qe-=Dt,++rt<=Q&&!(rt%16)&&st(Ke,rt);It<mr&&qe&Tr&&(wr=De(Jt,qe,rt))}t(Ft.h==be(Ft))}st(Ke,rt>Q?Q:rt);break t}!Qt||Ft.h&&It<fr?(Qt=0,Ke.a=Ft.h?5:3):Ke.$=It,Q=Qt}else Q=Tt(Ke,Ke.V,Ke.Ba,Ke.c,Ke.i,Q,Cr);if(!Q){pe=0;break e}}ae+pe>=Oe&&(R.Cc=1),pe=1}if(!pe)return null;if(R.Cc&&((pe=R.ga)!=null&&(pe.mc=null),R.ga=null,0<R.Ga))return alert("todo:WebPDequantizeLevels"),null}return R.nb+ae*Pe}function da(R,Q,ae,pe,Pe,Oe){for(;0<Pe--;){var Ke,Xe=R,rt=Q+(ae?1:0),qe=R,Ft=Q+(ae?0:3);for(Ke=0;Ke<pe;++Ke){var Jt=qe[Ft+4*Ke];Jt!=255&&(Jt*=32897,Xe[rt+4*Ke+0]=Xe[rt+4*Ke+0]*Jt>>23,Xe[rt+4*Ke+1]=Xe[rt+4*Ke+1]*Jt>>23,Xe[rt+4*Ke+2]=Xe[rt+4*Ke+2]*Jt>>23)}Q+=Oe}}function Ms(R,Q,ae,pe,Pe){for(;0<pe--;){var Oe;for(Oe=0;Oe<ae;++Oe){var Ke=R[Q+2*Oe+0],Xe=15&(qe=R[Q+2*Oe+1]),rt=4369*Xe,qe=(240&qe|qe>>4)*rt>>16;R[Q+2*Oe+0]=(240&Ke|Ke>>4)*rt>>16&240|(15&Ke|Ke<<4)*rt>>16>>4&15,R[Q+2*Oe+1]=240&qe|Xe}Q+=Pe}}function Da(R,Q,ae,pe,Pe,Oe,Ke,Xe){var rt,qe,Ft=255;for(qe=0;qe<Pe;++qe){for(rt=0;rt<pe;++rt){var Jt=R[Q+rt];Oe[Ke+4*rt]=Jt,Ft&=Jt}Q+=ae,Ke+=Xe}return Ft!=255}function yl(R,Q,ae,pe,Pe){var Oe;for(Oe=0;Oe<Pe;++Oe)ae[pe+Oe]=R[Q+Oe]>>8}function tl(){fh=da,ho=Ms,fa=Da,Sc=yl}function _l(R,Q,ae){J[R]=function(pe,Pe,Oe,Ke,Xe,rt,qe,Ft,Jt,ct,Dt,Qt,ur,It,fr,mr,Tr){var wr,hi=Tr-1>>1,ti=Xe[rt+0]|qe[Ft+0]<<16,Ui=Jt[ct+0]|Dt[Qt+0]<<16;t(pe!=null);var ii=3*ti+Ui+131074>>2;for(Q(pe[Pe+0],255&ii,ii>>16,ur,It),Oe!=null&&(ii=3*Ui+ti+131074>>2,Q(Oe[Ke+0],255&ii,ii>>16,fr,mr)),wr=1;wr<=hi;++wr){var cn=Xe[rt+wr]|qe[Ft+wr]<<16,Ws=Jt[ct+wr]|Dt[Qt+wr]<<16,zi=ti+cn+Ui+Ws+524296,ai=zi+2*(cn+Ui)>>3;ii=ai+ti>>1,ti=(zi=zi+2*(ti+Ws)>>3)+cn>>1,Q(pe[Pe+2*wr-1],255&ii,ii>>16,ur,It+(2*wr-1)*ae),Q(pe[Pe+2*wr-0],255&ti,ti>>16,ur,It+(2*wr-0)*ae),Oe!=null&&(ii=zi+Ui>>1,ti=ai+Ws>>1,Q(Oe[Ke+2*wr-1],255&ii,ii>>16,fr,mr+(2*wr-1)*ae),Q(Oe[Ke+2*wr+0],255&ti,ti>>16,fr,mr+(2*wr+0)*ae)),ti=cn,Ui=Ws}1&Tr||(ii=3*ti+Ui+131074>>2,Q(pe[Pe+Tr-1],255&ii,ii>>16,ur,It+(Tr-1)*ae),Oe!=null&&(ii=3*Ui+ti+131074>>2,Q(Oe[Ke+Tr-1],255&ii,ii>>16,fr,mr+(Tr-1)*ae)))}}function bl(){qs[pa]=nc,qs[Ih]=po,qs[El]=Mo,qs[Au]=Ou,qs[mh]=vh,qs[Tl]=zu,qs[Lh]=vA,qs[pA]=po,qs[Ec]=Ou,qs[kl]=vh,qs[du]=zu}function wl(R){return R&-16384?0>R?0:255:R>>Sf}function wa(R,Q){return wl((19077*R>>8)+(26149*Q>>8)-14234)}function su(R,Q,ae){return wl((19077*R>>8)-(6419*Q>>8)-(13320*ae>>8)+8708)}function _c(R,Q){return wl((19077*R>>8)+(33050*Q>>8)-17685)}function No(R,Q,ae,pe,Pe){pe[Pe+0]=wa(R,ae),pe[Pe+1]=su(R,Q,ae),pe[Pe+2]=_c(R,Q)}function Ps(R,Q,ae,pe,Pe){pe[Pe+0]=_c(R,Q),pe[Pe+1]=su(R,Q,ae),pe[Pe+2]=wa(R,ae)}function Fu(R,Q,ae,pe,Pe){var Oe=su(R,Q,ae);Q=Oe<<3&224|_c(R,Q)>>3,pe[Pe+0]=248&wa(R,ae)|Oe>>5,pe[Pe+1]=Q}function ao(R,Q,ae,pe,Pe){var Oe=240&_c(R,Q)|15;pe[Pe+0]=240&wa(R,ae)|su(R,Q,ae)>>4,pe[Pe+1]=Oe}function hA(R,Q,ae,pe,Pe){pe[Pe+0]=255,No(R,Q,ae,pe,Pe+1)}function bc(R,Q,ae,pe,Pe){Ps(R,Q,ae,pe,Pe),pe[Pe+3]=255}function Ga(R,Q,ae,pe,Pe){No(R,Q,ae,pe,Pe),pe[Pe+3]=255}function Cl(R,Q,ae){J[R]=function(pe,Pe,Oe,Ke,Xe,rt,qe,Ft,Jt){for(var ct=Ft+(-2&Jt)*ae;Ft!=ct;)Q(pe[Pe+0],Oe[Ke+0],Xe[rt+0],qe,Ft),Q(pe[Pe+1],Oe[Ke+0],Xe[rt+0],qe,Ft+ae),Pe+=2,++Ke,++rt,Ft+=2*ae;1&Jt&&Q(pe[Pe+0],Oe[Ke+0],Xe[rt+0],qe,Ft)}}function Nu(R,Q,ae){return ae==0?R==0?Q==0?6:5:Q==0?4:0:ae}function au(R,Q,ae,pe,Pe){switch(R>>>30){case 3:tc(Q,ae,pe,Pe,0);break;case 2:rl(Q,ae,pe,Pe);break;case 1:pn(Q,ae,pe,Pe)}}function Ca(R,Q){var ae,pe,Pe=Q.M,Oe=Q.Nb,Ke=R.oc,Xe=R.pc+40,rt=R.oc,qe=R.pc+584,Ft=R.oc,Jt=R.pc+600;for(ae=0;16>ae;++ae)Ke[Xe+32*ae-1]=129;for(ae=0;8>ae;++ae)rt[qe+32*ae-1]=129,Ft[Jt+32*ae-1]=129;for(0<Pe?Ke[Xe-1-32]=rt[qe-1-32]=Ft[Jt-1-32]=129:(n(Ke,Xe-32-1,127,21),n(rt,qe-32-1,127,9),n(Ft,Jt-32-1,127,9)),pe=0;pe<R.za;++pe){var ct=Q.ya[Q.aa+pe];if(0<pe){for(ae=-1;16>ae;++ae)i(Ke,Xe+32*ae-4,Ke,Xe+32*ae+12,4);for(ae=-1;8>ae;++ae)i(rt,qe+32*ae-4,rt,qe+32*ae+4,4),i(Ft,Jt+32*ae-4,Ft,Jt+32*ae+4,4)}var Dt=R.Gd,Qt=R.Hd+pe,ur=ct.ad,It=ct.Hc;if(0<Pe&&(i(Ke,Xe-32,Dt[Qt].y,0,16),i(rt,qe-32,Dt[Qt].f,0,8),i(Ft,Jt-32,Dt[Qt].ea,0,8)),ct.Za){var fr=Ke,mr=Xe-32+16;for(0<Pe&&(pe>=R.za-1?n(fr,mr,Dt[Qt].y[15],4):i(fr,mr,Dt[Qt+1].y,0,4)),ae=0;4>ae;ae++)fr[mr+128+ae]=fr[mr+256+ae]=fr[mr+384+ae]=fr[mr+0+ae];for(ae=0;16>ae;++ae,It<<=2)fr=Ke,mr=Xe+Po[ae],$a[ct.Ob[ae]](fr,mr),au(It,ur,16*+ae,fr,mr)}else if(fr=Nu(pe,Pe,ct.Ob[0]),Il[fr](Ke,Xe),It!=0)for(ae=0;16>ae;++ae,It<<=2)au(It,ur,16*+ae,Ke,Xe+Po[ae]);for(ae=ct.Gc,fr=Nu(pe,Pe,ct.Dd),bn[fr](rt,qe),bn[fr](Ft,Jt),It=ur,fr=rt,mr=qe,255&(ct=0|ae)&&(170&ct?Wa(It,256,fr,mr):Hn(It,256,fr,mr)),ct=Ft,It=Jt,255&(ae>>=8)&&(170&ae?Wa(ur,320,ct,It):Hn(ur,320,ct,It)),Pe<R.Ub-1&&(i(Dt[Qt].y,0,Ke,Xe+480,16),i(Dt[Qt].f,0,rt,qe+224,8),i(Dt[Qt].ea,0,Ft,Jt+224,8)),ae=8*Oe*R.B,Dt=R.sa,Qt=R.ta+16*pe+16*Oe*R.R,ur=R.qa,ct=R.ra+8*pe+ae,It=R.Ha,fr=R.Ia+8*pe+ae,ae=0;16>ae;++ae)i(Dt,Qt+ae*R.R,Ke,Xe+32*ae,16);for(ae=0;8>ae;++ae)i(ur,ct+ae*R.B,rt,qe+32*ae,8),i(It,fr+ae*R.B,Ft,Jt+32*ae,8)}}function Iu(R,Q,ae,pe,Pe,Oe,Ke,Xe,rt){var qe=[0],Ft=[0],Jt=0,ct=rt!=null?rt.kd:0,Dt=rt??new Br;if(R==null||12>ae)return 7;Dt.data=R,Dt.w=Q,Dt.ha=ae,Q=[Q],ae=[ae],Dt.gb=[Dt.gb];e:{var Qt=Q,ur=ae,It=Dt.gb;if(t(R!=null),t(ur!=null),t(It!=null),It[0]=0,12<=ur[0]&&!r(R,Qt[0],"RIFF")){if(r(R,Qt[0]+8,"WEBP")){It=3;break e}var fr=Pt(R,Qt[0]+4);if(12>fr||4294967286<fr){It=3;break e}if(ct&&fr>ur[0]-8){It=7;break e}It[0]=fr,Qt[0]+=12,ur[0]-=12}It=0}if(It!=0)return It;for(fr=0<Dt.gb[0],ae=ae[0];;){e:{var mr=R;ur=Q,It=ae;var Tr=qe,wr=Ft,hi=Qt=[0];if((ii=Jt=[Jt])[0]=0,8>It[0])It=7;else{if(!r(mr,ur[0],"VP8X")){if(Pt(mr,ur[0]+4)!=10){It=3;break e}if(18>It[0]){It=7;break e}var ti=Pt(mr,ur[0]+8),Ui=1+Ct(mr,ur[0]+12);if(2147483648<=Ui*(mr=1+Ct(mr,ur[0]+15))){It=3;break e}hi!=null&&(hi[0]=ti),Tr!=null&&(Tr[0]=Ui),wr!=null&&(wr[0]=mr),ur[0]+=18,It[0]-=18,ii[0]=1}It=0}}if(Jt=Jt[0],Qt=Qt[0],It!=0)return It;if(ur=!!(2&Qt),!fr&&Jt)return 3;if(Oe!=null&&(Oe[0]=!!(16&Qt)),Ke!=null&&(Ke[0]=ur),Xe!=null&&(Xe[0]=0),Ke=qe[0],Qt=Ft[0],Jt&&ur&&rt==null){It=0;break}if(4>ae){It=7;break}if(fr&&Jt||!fr&&!Jt&&!r(R,Q[0],"ALPH")){ae=[ae],Dt.na=[Dt.na],Dt.P=[Dt.P],Dt.Sa=[Dt.Sa];e:{ti=R,It=Q,fr=ae;var ii=Dt.gb;Tr=Dt.na,wr=Dt.P,hi=Dt.Sa,Ui=22,t(ti!=null),t(fr!=null),mr=It[0];var cn=fr[0];for(t(Tr!=null),t(hi!=null),Tr[0]=null,wr[0]=null,hi[0]=0;;){if(It[0]=mr,fr[0]=cn,8>cn){It=7;break e}var Ws=Pt(ti,mr+4);if(4294967286<Ws){It=3;break e}var zi=8+Ws+1&-2;if(Ui+=zi,0<ii&&Ui>ii){It=3;break e}if(!r(ti,mr,"VP8 ")||!r(ti,mr,"VP8L")){It=0;break e}if(cn[0]<zi){It=7;break e}r(ti,mr,"ALPH")||(Tr[0]=ti,wr[0]=mr+8,hi[0]=Ws),mr+=zi,cn-=zi}}if(ae=ae[0],Dt.na=Dt.na[0],Dt.P=Dt.P[0],Dt.Sa=Dt.Sa[0],It!=0)break}ae=[ae],Dt.Ja=[Dt.Ja],Dt.xa=[Dt.xa];e:if(ii=R,It=Q,fr=ae,Tr=Dt.gb[0],wr=Dt.Ja,hi=Dt.xa,ti=It[0],mr=!r(ii,ti,"VP8 "),Ui=!r(ii,ti,"VP8L"),t(ii!=null),t(fr!=null),t(wr!=null),t(hi!=null),8>fr[0])It=7;else{if(mr||Ui){if(ii=Pt(ii,ti+4),12<=Tr&&ii>Tr-12){It=3;break e}if(ct&&ii>fr[0]-8){It=7;break e}wr[0]=ii,It[0]+=8,fr[0]-=8,hi[0]=Ui}else hi[0]=5<=fr[0]&&ii[ti+0]==47&&!(ii[ti+4]>>5),wr[0]=fr[0];It=0}if(ae=ae[0],Dt.Ja=Dt.Ja[0],Dt.xa=Dt.xa[0],Q=Q[0],It!=0)break;if(4294967286<Dt.Ja)return 3;if(Xe==null||ur||(Xe[0]=Dt.xa?2:1),Ke=[Ke],Qt=[Qt],Dt.xa){if(5>ae){It=7;break}Xe=Ke,ct=Qt,ur=Oe,R==null||5>ae?R=0:5<=ae&&R[Q+0]==47&&!(R[Q+4]>>5)?(fr=[0],ii=[0],Tr=[0],Ne(wr=new Ae,R,Q,ae),$i(wr,fr,ii,Tr)?(Xe!=null&&(Xe[0]=fr[0]),ct!=null&&(ct[0]=ii[0]),ur!=null&&(ur[0]=Tr[0]),R=1):R=0):R=0}else{if(10>ae){It=7;break}Xe=Qt,R==null||10>ae||!cA(R,Q+3,ae-3)?R=0:(ct=R[Q+0]|R[Q+1]<<8|R[Q+2]<<16,ur=16383&(R[Q+7]<<8|R[Q+6]),R=16383&(R[Q+9]<<8|R[Q+8]),1&ct||3<(ct>>1&7)||!(ct>>4&1)||ct>>5>=Dt.Ja||!ur||!R?R=0:(Ke&&(Ke[0]=ur),Xe&&(Xe[0]=R),R=1))}if(!R||(Ke=Ke[0],Qt=Qt[0],Jt&&(qe[0]!=Ke||Ft[0]!=Qt)))return 3;rt!=null&&(rt[0]=Dt,rt.offset=Q-rt.w,t(4294967286>Q-rt.w),t(rt.offset==rt.ha-ae));break}return It==0||It==7&&Jt&&rt==null?(Oe!=null&&(Oe[0]|=Dt.na!=null&&0<Dt.na.length),pe!=null&&(pe[0]=Ke),Pe!=null&&(Pe[0]=Qt),0):It}function ou(R,Q,ae){var pe=Q.width,Pe=Q.height,Oe=0,Ke=0,Xe=pe,rt=Pe;if(Q.Da=R!=null&&0<R.Da,Q.Da&&(Xe=R.cd,rt=R.bd,Oe=R.v,Ke=R.j,11>ae||(Oe&=-2,Ke&=-2),0>Oe||0>Ke||0>=Xe||0>=rt||Oe+Xe>pe||Ke+rt>Pe))return 0;if(Q.v=Oe,Q.j=Ke,Q.va=Oe+Xe,Q.o=Ke+rt,Q.U=Xe,Q.T=rt,Q.da=R!=null&&0<R.da,Q.da){if(!jr(Xe,rt,ae=[R.ib],Oe=[R.hb]))return 0;Q.ib=ae[0],Q.hb=Oe[0]}return Q.ob=R!=null&&R.ob,Q.Kb=R==null||!R.Sd,Q.da&&(Q.ob=Q.ib<3*pe/4&&Q.hb<3*Pe/4,Q.Kb=0),1}function wc(R){if(R==null)return 2;if(11>R.S){var Q=R.f.RGBA;Q.fb+=(R.height-1)*Q.A,Q.A=-Q.A}else Q=R.f.kb,R=R.height,Q.O+=(R-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(R-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(R-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(R-1)*Q.lb,Q.lb=-Q.lb);return 0}function Cc(R,Q,ae,pe){if(pe==null||0>=R||0>=Q)return 2;if(ae!=null){if(ae.Da){var Pe=ae.cd,Oe=ae.bd,Ke=-2&ae.v,Xe=-2&ae.j;if(0>Ke||0>Xe||0>=Pe||0>=Oe||Ke+Pe>R||Xe+Oe>Q)return 2;R=Pe,Q=Oe}if(ae.da){if(!jr(R,Q,Pe=[ae.ib],Oe=[ae.hb]))return 2;R=Pe[0],Q=Oe[0]}}pe.width=R,pe.height=Q;e:{var rt=pe.width,qe=pe.height;if(R=pe.S,0>=rt||0>=qe||!(R>=pa&&13>R))R=2;else{if(0>=pe.Rd&&pe.sd==null){Ke=Oe=Pe=Q=0;var Ft=(Xe=rt*xh[R])*qe;if(11>R||(Oe=(qe+1)/2*(Q=(rt+1)/2),R==12&&(Ke=(Pe=rt)*qe)),(qe=a(Ft+2*Oe+Ke))==null){R=1;break e}pe.sd=qe,11>R?((rt=pe.f.RGBA).eb=qe,rt.fb=0,rt.A=Xe,rt.size=Ft):((rt=pe.f.kb).y=qe,rt.O=0,rt.fa=Xe,rt.Fd=Ft,rt.f=qe,rt.N=0+Ft,rt.Ab=Q,rt.Cd=Oe,rt.ea=qe,rt.W=0+Ft+Oe,rt.Db=Q,rt.Ed=Oe,R==12&&(rt.F=qe,rt.J=0+Ft+2*Oe),rt.Tc=Ke,rt.lb=Pe)}if(Q=1,Pe=pe.S,Oe=pe.width,Ke=pe.height,Pe>=pa&&13>Pe)if(11>Pe)R=pe.f.RGBA,Q&=(Xe=Math.abs(R.A))*(Ke-1)+Oe<=R.size,Q&=Xe>=Oe*xh[Pe],Q&=R.eb!=null;else{R=pe.f.kb,Xe=(Oe+1)/2,Ft=(Ke+1)/2,rt=Math.abs(R.fa),qe=Math.abs(R.Ab);var Jt=Math.abs(R.Db),ct=Math.abs(R.lb),Dt=ct*(Ke-1)+Oe;Q&=rt*(Ke-1)+Oe<=R.Fd,Q&=qe*(Ft-1)+Xe<=R.Cd,Q=(Q&=Jt*(Ft-1)+Xe<=R.Ed)&rt>=Oe&qe>=Xe&Jt>=Xe,Q&=R.y!=null,Q&=R.f!=null,Q&=R.ea!=null,Pe==12&&(Q&=ct>=Oe,Q&=Dt<=R.Tc,Q&=R.F!=null)}else Q=0;R=Q?0:2}}return R!=0||ae!=null&&ae.fd&&(R=wc(pe)),R}var oo=64,qa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],lo=24,co=32,Yl=8,Jl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Lr("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(R){return R},J.Predictor2=function(R,Q,ae){return Q[ae+0]},J.Predictor3=function(R,Q,ae){return Q[ae+1]},J.Predictor4=function(R,Q,ae){return Q[ae-1]},J.Predictor5=function(R,Q,ae){return qr(qr(R,Q[ae+1]),Q[ae+0])},J.Predictor6=function(R,Q,ae){return qr(R,Q[ae-1])},J.Predictor7=function(R,Q,ae){return qr(R,Q[ae+0])},J.Predictor8=function(R,Q,ae){return qr(Q[ae-1],Q[ae+0])},J.Predictor9=function(R,Q,ae){return qr(Q[ae+0],Q[ae+1])},J.Predictor10=function(R,Q,ae){return qr(qr(R,Q[ae-1]),qr(Q[ae+0],Q[ae+1]))},J.Predictor11=function(R,Q,ae){var pe=Q[ae+0];return 0>=$t(pe>>24&255,R>>24&255,(Q=Q[ae-1])>>24&255)+$t(pe>>16&255,R>>16&255,Q>>16&255)+$t(pe>>8&255,R>>8&255,Q>>8&255)+$t(255&pe,255&R,255&Q)?pe:R},J.Predictor12=function(R,Q,ae){var pe=Q[ae+0];return(wi((R>>24&255)+(pe>>24&255)-((Q=Q[ae-1])>>24&255))<<24|wi((R>>16&255)+(pe>>16&255)-(Q>>16&255))<<16|wi((R>>8&255)+(pe>>8&255)-(Q>>8&255))<<8|wi((255&R)+(255&pe)-(255&Q)))>>>0},J.Predictor13=function(R,Q,ae){var pe=Q[ae-1];return(Ci((R=qr(R,Q[ae+0]))>>24&255,pe>>24&255)<<24|Ci(R>>16&255,pe>>16&255)<<16|Ci(R>>8&255,pe>>8&255)<<8|Ci(255&R,255&pe))>>>0};var AA=J.PredictorAdd0;J.PredictorAdd1=Ar,Lr("Predictor2","PredictorAdd2"),Lr("Predictor3","PredictorAdd3"),Lr("Predictor4","PredictorAdd4"),Lr("Predictor5","PredictorAdd5"),Lr("Predictor6","PredictorAdd6"),Lr("Predictor7","PredictorAdd7"),Lr("Predictor8","PredictorAdd8"),Lr("Predictor9","PredictorAdd9"),Lr("Predictor10","PredictorAdd10"),Lr("Predictor11","PredictorAdd11"),Lr("Predictor12","PredictorAdd12"),Lr("Predictor13","PredictorAdd13");var hh=J.PredictorAdd2;Ce("ColorIndexInverseTransform","MapARGB","32b",function(R){return R>>8&255},function(R){return R}),Ce("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(R){return R},function(R){return R>>8&255});var bs,dA=J.ColorIndexInverseTransform,ws=J.MapARGB,Ka=J.VP8LColorIndexInverseTransformAlpha,Lu=J.MapAlpha,lu=J.VP8LPredictorsAdd=[];lu.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var Io,Mu,Bl,en,Lo,ec,Ba,tc,rl,Wa,pn,Hn,Cs,os,rc,cu,Bc,Ah,ZA,Pu,dh,Ru,uo,il,fh,ho,fa,Sc,ph=a(511),uu=a(2041),Du=a(225),fA=a(767),Sl=0,hu=uu,ju=Du,Rs=fA,Ii=ph,pa=0,Ih=1,El=2,Au=3,mh=4,Tl=5,Lh=6,pA=7,Ec=8,kl=9,du=10,gh=[2,3,7],Ao=[3,3,11],fo=[280,256,256,256,40],Tc=[0,1,1,1,0],Fl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mA=8,gA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ma=null,Bs=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ic=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],al=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Mh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ph=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Il=[],$a=[],bn=[],Uu=1,ja=2,Ll=[],qs=[];_l("UpsampleRgbLinePair",No,3),_l("UpsampleBgrLinePair",Ps,3),_l("UpsampleRgbaLinePair",Ga,4),_l("UpsampleBgraLinePair",bc,4),_l("UpsampleArgbLinePair",hA,4),_l("UpsampleRgba4444LinePair",ao,2),_l("UpsampleRgb565LinePair",Fu,2);var nc=J.UpsampleRgbLinePair,Mo=J.UpsampleBgrLinePair,po=J.UpsampleRgbaLinePair,Ou=J.UpsampleBgraLinePair,vh=J.UpsampleArgbLinePair,zu=J.UpsampleRgba4444LinePair,vA=J.UpsampleRgb565LinePair,Ml=16,Ks=1<<Ml-1,ol=-227,kc=482,Sf=6,Id=0,Ef=a(256),ta=a(256),YA=a(256),Fc=a(256),Nc=a(kc-ol),Xa=a(kc-ol);Cl("YuvToRgbRow",No,3),Cl("YuvToBgrRow",Ps,3),Cl("YuvToRgbaRow",Ga,4),Cl("YuvToBgraRow",bc,4),Cl("YuvToArgbRow",hA,4),Cl("YuvToRgba4444Row",ao,2),Cl("YuvToRgb565Row",Fu,2);var Po=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sc=[0,2,8],Pl=[8,7,6,4,4,2,2,2,1,1,1,1],Rl=1;this.WebPDecodeRGBA=function(R,Q,ae,pe,Pe){var Oe=Ih,Ke=new cr,Xe=new Fr;Ke.ba=Xe,Xe.S=Oe,Xe.width=[Xe.width],Xe.height=[Xe.height];var rt=Xe.width,qe=Xe.height,Ft=new wt;if(Ft==null||R==null)var Jt=2;else t(Ft!=null),Jt=Iu(R,Q,ae,Ft.width,Ft.height,Ft.Pd,Ft.Qd,Ft.format,null);if(Jt!=0?rt=0:(rt!=null&&(rt[0]=Ft.width[0]),qe!=null&&(qe[0]=Ft.height[0]),rt=1),rt){Xe.width=Xe.width[0],Xe.height=Xe.height[0],pe!=null&&(pe[0]=Xe.width),Pe!=null&&(Pe[0]=Xe.height);e:{if(pe=new iu,(Pe=new Br).data=R,Pe.w=Q,Pe.ha=ae,Pe.kd=1,Q=[0],t(Pe!=null),((R=Iu(Pe.data,Pe.w,Pe.ha,null,null,null,Q,null,Pe))==0||R==7)&&Q[0]&&(R=4),(Q=R)==0){if(t(Ke!=null),pe.data=Pe.data,pe.w=Pe.w+Pe.offset,pe.ha=Pe.ha-Pe.offset,pe.put=Yr,pe.ac=In,pe.bc=on,pe.ma=Ke,Pe.xa){if((R=jt())==null){Ke=1;break e}if(function(ct,Dt){var Qt=[0],ur=[0],It=[0];t:for(;;){if(ct==null)return 0;if(Dt==null)return ct.a=2,0;if(ct.l=Dt,ct.a=0,Ne(ct.m,Dt.data,Dt.w,Dt.ha),!$i(ct.m,Qt,ur,It)){ct.a=3;break t}if(ct.xb=ja,Dt.width=Qt[0],Dt.height=ur[0],!Kt(Qt[0],ur[0],1,ct,null))break t;return 1}return t(ct.a!=0),0}(R,pe)){if(pe=(Q=Cc(pe.width,pe.height,Ke.Oa,Ke.ba))==0){t:{pe=R;r:for(;;){if(pe==null){pe=0;break t}if(t(pe.s.yc!=null),t(pe.s.Ya!=null),t(0<pe.s.Wb),t((ae=pe.l)!=null),t((Pe=ae.ma)!=null),pe.xb!=0){if(pe.ca=Pe.ba,pe.tb=Pe.tb,t(pe.ca!=null),!ou(Pe.Oa,ae,Au)){pe.a=2;break r}if(!Mt(pe,ae.width)||ae.da)break r;if((ae.da||er(pe.ca.S))&&tl(),11>pe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),pe.ca.f.kb.F!=null&&tl()),pe.Pb&&0<pe.s.ua&&pe.s.vb.X==null&&!Ve(pe.s.vb,pe.s.Wa.Xa)){pe.a=1;break r}pe.xb=0}if(!Tt(pe,pe.V,pe.Ba,pe.c,pe.i,ae.o,Ye))break r;Pe.Dc=pe.Ma,pe=1;break t}t(pe.a!=0),pe=0}pe=!pe}pe&&(Q=R.a)}else Q=R.a}else{if((R=new no)==null){Ke=1;break e}if(R.Fa=Pe.na,R.P=Pe.P,R.qc=Pe.Sa,$o(R,pe)){if((Q=Cc(pe.width,pe.height,Ke.Oa,Ke.ba))==0){if(R.Aa=0,ae=Ke.Oa,t((Pe=R)!=null),ae!=null){if(0<(rt=0>(rt=ae.Md)?0:100<rt?255:255*rt/100)){for(qe=Ft=0;4>qe;++qe)12>(Jt=Pe.pb[qe]).lc&&(Jt.ia=rt*Pl[0>Jt.lc?0:Jt.lc]>>3),Ft|=Jt.ia;Ft&&(alert("todo:VP8InitRandom"),Pe.ia=1)}Pe.Ga=ae.Id,100<Pe.Ga?Pe.Ga=100:0>Pe.Ga&&(Pe.Ga=0)}(function(ct,Dt){if(ct==null)return 0;if(Dt==null)return rs(ct,2,"NULL VP8Io parameter in VP8Decode().");if(!ct.cb&&!$o(ct,Dt))return 0;if(t(ct.cb),Dt.ac==null||Dt.ac(Dt)){Dt.ob&&(ct.L=0);var Qt=sc[ct.L];if(ct.L==2?(ct.yb=0,ct.zb=0):(ct.yb=Dt.v-Qt>>4,ct.zb=Dt.j-Qt>>4,0>ct.yb&&(ct.yb=0),0>ct.zb&&(ct.zb=0)),ct.Va=Dt.o+15+Qt>>4,ct.Hb=Dt.va+15+Qt>>4,ct.Hb>ct.za&&(ct.Hb=ct.za),ct.Va>ct.Ub&&(ct.Va=ct.Ub),0<ct.L){var ur=ct.ed;for(Qt=0;4>Qt;++Qt){var It;if(ct.Qa.Cb){var fr=ct.Qa.Lb[Qt];ct.Qa.Fb||(fr+=ur.Tb)}else fr=ur.Tb;for(It=0;1>=It;++It){var mr=ct.gd[Qt][It],Tr=fr;if(ur.Pc&&(Tr+=ur.vd[0],It&&(Tr+=ur.od[0])),0<(Tr=0>Tr?0:63<Tr?63:Tr)){var wr=Tr;0<ur.wb&&(wr=4<ur.wb?wr>>2:wr>>1)>9-ur.wb&&(wr=9-ur.wb),1>wr&&(wr=1),mr.dd=wr,mr.tc=2*Tr+wr,mr.ld=40<=Tr?2:15<=Tr?1:0}else mr.tc=0;mr.La=It}}}Qt=0}else rs(ct,6,"Frame setup failed"),Qt=ct.a;if(Qt=Qt==0){if(Qt){ct.$c=0,0<ct.Aa||(ct.Ic=Rl);t:{Qt=ct.Ic,ur=4*(wr=ct.za);var hi=32*wr,ti=wr+1,Ui=0<ct.L?wr*(0<ct.Aa?2:1):0,ii=(ct.Aa==2?2:1)*wr;if((mr=ur+832+(It=3*(16*Qt+sc[ct.L])/2*hi)+(fr=ct.Fa!=null&&0<ct.Fa.length?ct.Kc.c*ct.Kc.i:0))!=mr)Qt=0;else{if(mr>ct.Vb){if(ct.Vb=0,ct.Ec=a(mr),ct.Fc=0,ct.Ec==null){Qt=rs(ct,1,"no memory during frame initialization.");break t}ct.Vb=mr}mr=ct.Ec,Tr=ct.Fc,ct.Ac=mr,ct.Bc=Tr,Tr+=ur,ct.Gd=c(hi,ea),ct.Hd=0,ct.rb=c(ti+1,_i),ct.sb=1,ct.wa=Ui?c(Ui,Ni):null,ct.Y=0,ct.D.Nb=0,ct.D.wa=ct.wa,ct.D.Y=ct.Y,0<ct.Aa&&(ct.D.Y+=wr),t(!0),ct.oc=mr,ct.pc=Tr,Tr+=832,ct.ya=c(ii,La),ct.aa=0,ct.D.ya=ct.ya,ct.D.aa=ct.aa,ct.Aa==2&&(ct.D.aa+=wr),ct.R=16*wr,ct.B=8*wr,wr=(hi=sc[ct.L])*ct.R,hi=hi/2*ct.B,ct.sa=mr,ct.ta=Tr+wr,ct.qa=ct.sa,ct.ra=ct.ta+16*Qt*ct.R+hi,ct.Ha=ct.qa,ct.Ia=ct.ra+8*Qt*ct.B+hi,ct.$c=0,Tr+=It,ct.mb=fr?mr:null,ct.nb=fr?Tr:null,t(Tr+fr<=ct.Fc+ct.Vb),lh(ct),n(ct.Ac,ct.Bc,0,ur),Qt=1}}if(Qt){if(Dt.ka=0,Dt.y=ct.sa,Dt.O=ct.ta,Dt.f=ct.qa,Dt.N=ct.ra,Dt.ea=ct.Ha,Dt.Vd=ct.Ia,Dt.fa=ct.R,Dt.Rc=ct.B,Dt.F=null,Dt.J=0,!Sl){for(Qt=-255;255>=Qt;++Qt)ph[255+Qt]=0>Qt?-Qt:Qt;for(Qt=-1020;1020>=Qt;++Qt)uu[1020+Qt]=-128>Qt?-128:127<Qt?127:Qt;for(Qt=-112;112>=Qt;++Qt)Du[112+Qt]=-16>Qt?-16:15<Qt?15:Qt;for(Qt=-255;510>=Qt;++Qt)fA[255+Qt]=0>Qt?0:255<Qt?255:Qt;Sl=1}Ba=vc,tc=To,Wa=Zo,pn=uA,Hn=Yo,rl=Nh,Cs=yc,os=Xl,rc=Ie,cu=At,Bc=Zl,Ah=re,ZA=Et,Pu=Ht,dh=Fo,Ru=Tu,uo=uh,il=ku,$a[0]=An,$a[1]=ya,$a[2]=Hs,$a[3]=ys,$a[4]=Va,$a[5]=Ls,$a[6]=Yn,$a[7]=_a,$a[8]=_n,$a[9]=el,Il[0]=nu,Il[1]=Eu,Il[2]=Aa,Il[3]=Jo,Il[4]=Ha,Il[5]=so,Il[6]=Ra,bn[0]=Vs,bn[1]=Xi,bn[2]=Fn,bn[3]=Wi,bn[4]=Kl,bn[5]=bi,bn[6]=_s,Qt=1}else Qt=0}Qt&&(Qt=function(cn,Ws){for(cn.M=0;cn.M<cn.Va;++cn.M){var zi,ai=cn.Jc[cn.M&cn.Xb],Vr=cn.m,Li=cn;for(zi=0;zi<Li.za;++zi){var Hi=Vr,qi=Li,ni=qi.Ac,Vi=qi.Bc+4*zi,nn=qi.zc,is=qi.ya[qi.aa+zi];if(qi.Qa.Bb?is.$b=dt(Hi,qi.Pa.jb[0])?2+dt(Hi,qi.Pa.jb[2]):dt(Hi,qi.Pa.jb[1]):is.$b=0,qi.kc&&(is.Ad=dt(Hi,qi.Bd)),is.Za=!dt(Hi,145)+0,is.Za){var Ss=is.Ob,jn=0;for(qi=0;4>qi;++qi){var ls,kr=nn[0+qi];for(ls=0;4>ls;++ls){kr=Mh[ni[Vi+ls]][kr];for(var Or=ic[dt(Hi,kr[0])];0<Or;)Or=ic[2*Or+dt(Hi,kr[Or])];kr=-Or,ni[Vi+ls]=kr}i(Ss,jn,ni,Vi,4),jn+=4,nn[0+qi]=kr}}else kr=dt(Hi,156)?dt(Hi,128)?1:3:dt(Hi,163)?2:0,is.Ob[0]=kr,n(ni,Vi,kr,4),n(nn,0,kr,4);is.Dd=dt(Hi,142)?dt(Hi,114)?dt(Hi,183)?1:3:2:0}if(Li.m.Ka)return rs(cn,7,"Premature end-of-partition0 encountered.");for(;cn.ja<cn.za;++cn.ja){if(Li=ai,Hi=(Vr=cn).rb[Vr.sb-1],ni=Vr.rb[Vr.sb+Vr.ja],zi=Vr.ya[Vr.aa+Vr.ja],Vi=Vr.kc?zi.Ad:0)Hi.la=ni.la=0,zi.Za||(Hi.Na=ni.Na=0),zi.Hc=0,zi.Gc=0,zi.ia=0;else{var Jn,Mi;if(Hi=ni,ni=Li,Vi=Vr.Pa.Xc,nn=Vr.ya[Vr.aa+Vr.ja],is=Vr.pb[nn.$b],qi=nn.ad,Ss=0,jn=Vr.rb[Vr.sb-1],kr=ls=0,n(qi,Ss,0,384),nn.Za)var Ds=0,es=Vi[3];else{Or=a(16);var Es=Hi.Na+jn.Na;if(Es=ma(ni,Vi[1],Es,is.Eb,0,Or,0),Hi.Na=jn.Na=(0<Es)+0,1<Es)Ba(Or,0,qi,Ss);else{var cs=Or[0]+3>>3;for(Or=0;256>Or;Or+=16)qi[Ss+Or]=cs}Ds=1,es=Vi[0]}var Sn=15&Hi.la,$s=15&jn.la;for(Or=0;4>Or;++Or){var mo=1&$s;for(cs=Mi=0;4>cs;++cs)Sn=Sn>>1|(mo=(Es=ma(ni,es,Es=mo+(1&Sn),is.Sc,Ds,qi,Ss))>Ds)<<7,Mi=Mi<<2|(3<Es?3:1<Es?2:qi[Ss+0]!=0),Ss+=16;Sn>>=4,$s=$s>>1|mo<<7,ls=(ls<<8|Mi)>>>0}for(es=Sn,Ds=$s>>4,Jn=0;4>Jn;Jn+=2){for(Mi=0,Sn=Hi.la>>4+Jn,$s=jn.la>>4+Jn,Or=0;2>Or;++Or){for(mo=1&$s,cs=0;2>cs;++cs)Es=mo+(1&Sn),Sn=Sn>>1|(mo=0<(Es=ma(ni,Vi[2],Es,is.Qc,0,qi,Ss)))<<3,Mi=Mi<<2|(3<Es?3:1<Es?2:qi[Ss+0]!=0),Ss+=16;Sn>>=2,$s=$s>>1|mo<<5}kr|=Mi<<4*Jn,es|=Sn<<4<<Jn,Ds|=(240&$s)<<Jn}Hi.la=es,jn.la=Ds,nn.Hc=ls,nn.Gc=kr,nn.ia=43690&kr?0:is.ia,Vi=!(ls|kr)}if(0<Vr.L&&(Vr.wa[Vr.Y+Vr.ja]=Vr.gd[zi.$b][zi.Za],Vr.wa[Vr.Y+Vr.ja].La|=!Vi),Li.Ka)return rs(cn,7,"Premature end-of-file encountered.")}if(lh(cn),Vr=Ws,Li=1,zi=(ai=cn).D,Hi=0<ai.L&&ai.M>=ai.zb&&ai.M<=ai.Va,ai.Aa==0)t:{if(zi.M=ai.M,zi.uc=Hi,Ca(ai,zi),Li=1,zi=(Mi=ai.D).Nb,Hi=(kr=sc[ai.L])*ai.R,ni=kr/2*ai.B,Or=16*zi*ai.R,cs=8*zi*ai.B,Vi=ai.sa,nn=ai.ta-Hi+Or,is=ai.qa,qi=ai.ra-ni+cs,Ss=ai.Ha,jn=ai.Ia-ni+cs,$s=(Sn=Mi.M)==0,ls=Sn>=ai.Va-1,ai.Aa==2&&Ca(ai,Mi),Mi.uc)for(mo=(Es=ai).D.M,t(Es.D.uc),Mi=Es.yb;Mi<Es.Hb;++Mi){Ds=Mi,es=mo;var Ua=(Ln=(ns=Es).D).Nb;Jn=ns.R;var Ln=Ln.wa[Ln.Y+Ds],vi=ns.sa,un=ns.ta+16*Ua*Jn+16*Ds,ps=Ln.dd,wn=Ln.tc;if(wn!=0)if(t(3<=wn),ns.L==1)0<Ds&&Ru(vi,un,Jn,wn+4),Ln.La&&il(vi,un,Jn,wn),0<es&&dh(vi,un,Jn,wn+4),Ln.La&&uo(vi,un,Jn,wn);else{var ra=ns.B,js=ns.qa,Ro=ns.ra+8*Ua*ra+8*Ds,ll=ns.Ha,ns=ns.Ia+8*Ua*ra+8*Ds;Ua=Ln.ld,0<Ds&&(os(vi,un,Jn,wn+4,ps,Ua),cu(js,Ro,ll,ns,ra,wn+4,ps,Ua)),Ln.La&&(Ah(vi,un,Jn,wn,ps,Ua),Pu(js,Ro,ll,ns,ra,wn,ps,Ua)),0<es&&(Cs(vi,un,Jn,wn+4,ps,Ua),rc(js,Ro,ll,ns,ra,wn+4,ps,Ua)),Ln.La&&(Bc(vi,un,Jn,wn,ps,Ua),ZA(js,Ro,ll,ns,ra,wn,ps,Ua))}}if(ai.ia&&alert("todo:DitherRow"),Vr.put!=null){if(Mi=16*Sn,Sn=16*(Sn+1),$s?(Vr.y=ai.sa,Vr.O=ai.ta+Or,Vr.f=ai.qa,Vr.N=ai.ra+cs,Vr.ea=ai.Ha,Vr.W=ai.Ia+cs):(Mi-=kr,Vr.y=Vi,Vr.O=nn,Vr.f=is,Vr.N=qi,Vr.ea=Ss,Vr.W=jn),ls||(Sn-=kr),Sn>Vr.o&&(Sn=Vr.o),Vr.F=null,Vr.J=null,ai.Fa!=null&&0<ai.Fa.length&&Mi<Sn&&(Vr.J=Qn(ai,Vr,Mi,Sn-Mi),Vr.F=ai.mb,Vr.F==null&&Vr.F.length==0)){Li=rs(ai,3,"Could not decode alpha data.");break t}Mi<Vr.j&&(kr=Vr.j-Mi,Mi=Vr.j,t(!(1&kr)),Vr.O+=ai.R*kr,Vr.N+=ai.B*(kr>>1),Vr.W+=ai.B*(kr>>1),Vr.F!=null&&(Vr.J+=Vr.width*kr)),Mi<Sn&&(Vr.O+=Vr.v,Vr.N+=Vr.v>>1,Vr.W+=Vr.v>>1,Vr.F!=null&&(Vr.J+=Vr.v),Vr.ka=Mi-Vr.j,Vr.U=Vr.va-Vr.v,Vr.T=Sn-Mi,Li=Vr.put(Vr))}zi+1!=ai.Ic||ls||(i(ai.sa,ai.ta-Hi,Vi,nn+16*ai.R,Hi),i(ai.qa,ai.ra-ni,is,qi+8*ai.B,ni),i(ai.Ha,ai.Ia-ni,Ss,jn+8*ai.B,ni))}if(!Li)return rs(cn,6,"Output aborted.")}return 1}(ct,Dt)),Dt.bc!=null&&Dt.bc(Dt),Qt&=1}return Qt?(ct.cb=0,Qt):0})(R,pe)||(Q=R.a)}}else Q=R.a}Q==0&&Ke.Oa!=null&&Ke.Oa.fd&&(Q=wc(Ke.ba))}Ke=Q}Oe=Ke!=0?null:11>Oe?Xe.f.RGBA.eb:Xe.f.kb.y}else Oe=null;return Oe};var xh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(J,ce){for(var te="",K=0;K<4;K++)te+=String.fromCharCode(J[ce++]);return te}function v(J,ce){return J[ce+0]|J[ce+1]<<8}function B(J,ce){return(J[ce+0]|J[ce+1]<<8|J[ce+2]<<16)>>>0}function F(J,ce){return(J[ce+0]|J[ce+1]<<8|J[ce+2]<<16|J[ce+3]<<24)>>>0}new p;var C=[0],L=[0],P=[],D=new p,j=e,q=function(J,ce){var te={},K=0,me=!1,we=0,Fe=0;if(te.frames=[],!function(Y,Ae){for(var fe=0;fe<4;fe++)if(Y[Ae+fe]!="RIFF".charCodeAt(fe))return!0;return!1}(J,ce)){for(F(J,ce+=4),ce+=8;ce<J.length;){var he=g(J,ce),Le=F(J,ce+=4);ce+=4;var $e=Le+(1&Le);switch(he){case"VP8 ":case"VP8L":te.frames[K]===void 0&&(te.frames[K]={}),(Ge=te.frames[K]).src_off=me?Fe:ce-8,Ge.src_size=we+Le+8,K++,me&&(me=!1,we=0,Fe=0);break;case"VP8X":(Ge=te.header={}).feature_flags=J[ce];var Ne=ce+4;Ge.canvas_width=1+B(J,Ne),Ne+=3,Ge.canvas_height=1+B(J,Ne),Ne+=3;break;case"ALPH":me=!0,we=$e+8,Fe=ce-8;break;case"ANIM":(Ge=te.header).bgcolor=F(J,ce),Ne=ce+4,Ge.loop_count=v(J,Ne),Ne+=2;break;case"ANMF":var Te,Ge;(Ge=te.frames[K]={}).offset_x=2*B(J,ce),ce+=3,Ge.offset_y=2*B(J,ce),ce+=3,Ge.width=1+B(J,ce),ce+=3,Ge.height=1+B(J,ce),ce+=3,Ge.duration=B(J,ce),ce+=3,Te=J[ce++],Ge.dispose=1&Te,Ge.blend=Te>>1&1}he!="ANMF"&&(ce+=$e)}return te}}(j,0);q.response=j,q.rgbaoutput=!0,q.dataurl=!1;var H=q.header?q.header:null,ee=q.frames?q.frames:null;if(H){H.loop_counter=H.loop_count,C=[H.canvas_height],L=[H.canvas_width];for(var G=0;G<ee.length&&ee[G].blend!=0;G++);}var ne=ee[0],Z=D.WebPDecodeRGBA(j,ne.src_off,ne.src_size,L,C);ne.rgba=Z,ne.imgwidth=L[0],ne.imgheight=C[0];for(var le=0;le<L[0]*C[0]*4;le++)P[le]=Z[le];return this.width=L,this.height=C,this.data=P,this}(function(e){var t,r,i,n,a,c,s,p,g,v=function(Y){return Y=Y||{},this.isStrokeTransparent=Y.isStrokeTransparent||!1,this.strokeOpacity=Y.strokeOpacity||1,this.strokeStyle=Y.strokeStyle||"#000000",this.fillStyle=Y.fillStyle||"#000000",this.isFillTransparent=Y.isFillTransparent||!1,this.fillOpacity=Y.fillOpacity||1,this.font=Y.font||"10px sans-serif",this.textBaseline=Y.textBaseline||"alphabetic",this.textAlign=Y.textAlign||"left",this.lineWidth=Y.lineWidth||1,this.lineJoin=Y.lineJoin||"miter",this.lineCap=Y.lineCap||"butt",this.path=Y.path||[],this.transform=Y.transform!==void 0?Y.transform.clone():new p,this.globalCompositeOperation=Y.globalCompositeOperation||"normal",this.globalAlpha=Y.globalAlpha||1,this.clip_path=Y.clip_path||[],this.currentPoint=Y.currentPoint||new c,this.miterLimit=Y.miterLimit||10,this.lastPoint=Y.lastPoint||new c,this.lineDashOffset=Y.lineDashOffset||0,this.lineDash=Y.lineDash||[],this.margin=Y.margin||[0,0,0,0],this.prevPageLastElemOffset=Y.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Y.ignoreClearRect!="boolean"||Y.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new B(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,s=this.internal.Rectangle,p=this.internal.Matrix,g=new v}]);var B=function(Y){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ae=Y;Object.defineProperty(this,"pdf",{get:function(){return Ae}});var fe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return fe},set:function(Ve){fe=!!Ve}});var be=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return be},set:function(Ve){be=!!Ve}});var Me=0;Object.defineProperty(this,"posX",{get:function(){return Me},set:function(Ve){isNaN(Ve)||(Me=Ve)}});var ze=0;Object.defineProperty(this,"posY",{get:function(){return ze},set:function(Ve){isNaN(Ve)||(ze=Ve)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(Ve){var lr;typeof Ve=="number"?lr=[Ve,Ve,Ve,Ve]:((lr=new Array(4))[0]=Ve[0],lr[1]=Ve.length>=2?Ve[1]:lr[0],lr[2]=Ve.length>=3?Ve[2]:lr[0],lr[3]=Ve.length>=4?Ve[3]:lr[1]),g.margin=lr}});var We=!1;Object.defineProperty(this,"autoPaging",{get:function(){return We},set:function(Ve){We=Ve}});var ut=0;Object.defineProperty(this,"lastBreak",{get:function(){return ut},set:function(Ve){ut=Ve}});var dt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return dt},set:function(Ve){dt=Ve}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(Ve){Ve instanceof v&&(g=Ve)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(Ve){g.path=Ve}});var zt=[];Object.defineProperty(this,"ctxStack",{get:function(){return zt},set:function(Ve){zt=Ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ve){var lr;lr=F(Ve),this.ctx.fillStyle=lr.style,this.ctx.isFillTransparent=lr.a===0,this.ctx.fillOpacity=lr.a,this.pdf.setFillColor(lr.r,lr.g,lr.b,{a:lr.a}),this.pdf.setTextColor(lr.r,lr.g,lr.b,{a:lr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ve){var lr=F(Ve);this.ctx.strokeStyle=lr.style,this.ctx.isStrokeTransparent=lr.a===0,this.ctx.strokeOpacity=lr.a,lr.a===0?this.pdf.setDrawColor(255,255,255):(lr.a,this.pdf.setDrawColor(lr.r,lr.g,lr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ve){["butt","round","square"].indexOf(Ve)!==-1&&(this.ctx.lineCap=Ve,this.pdf.setLineCap(Ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ve){isNaN(Ve)||(this.ctx.lineWidth=Ve,this.pdf.setLineWidth(Ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ve){["bevel","round","miter"].indexOf(Ve)!==-1&&(this.ctx.lineJoin=Ve,this.pdf.setLineJoin(Ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ve){isNaN(Ve)||(this.ctx.miterLimit=Ve,this.pdf.setMiterLimit(Ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ve){this.ctx.textBaseline=Ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ve){["right","end","center","left","start"].indexOf(Ve)!==-1&&(this.ctx.textAlign=Ve)}});var ve=null,Ct=null,Pt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pt},set:function(Ve){ve=null,Ct=null,Pt=Ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ve){var lr;if(this.ctx.font=Ve,(lr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Ve))!==null){var ir=lr[1];lr[2];var jr=lr[3],ar=lr[4];lr[5];var Wr=lr[6],Lr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ar)[2];ar=Math.floor(Lr==="px"?parseFloat(ar)*this.pdf.internal.scaleFactor:Lr==="em"?parseFloat(ar)*this.pdf.getFontSize():parseFloat(ar)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ar);var Zr=function(Ce){var Re,Ze,ot=[],vt=Ce.trim();if(vt==="")return iw;if(vt in aE)return[aE[vt]];for(;vt!=="";){switch(Ze=null,Re=(vt=lE(vt)).charAt(0)){case'"':case"'":Ze=xq(vt.substring(1),Re);break;default:Ze=yq(vt)}if(Ze===null||(ot.push(Ze[0]),(vt=lE(Ze[1]))!==""&&vt.charAt(0)!==","))return iw;vt=vt.replace(/^,/,"")}return ot}(Wr);if(this.fontFaces){var qr=function(Ce,Re){var Ze=Ce.getFontList(),ot=JSON.stringify(Ze);if(ve===null||Ct!==ot){var vt=function(Rt){var xt=[];return Object.keys(Rt).forEach(function(Gt){Rt[Gt].forEach(function(er){var qt=null;switch(er){case"bold":qt={family:Gt,weight:"bold"};break;case"italic":qt={family:Gt,style:"italic"};break;case"bolditalic":qt={family:Gt,weight:"bold",style:"italic"};break;case"":case"normal":qt={family:Gt}}qt!==null&&(qt.ref={name:Gt,style:er},xt.push(qt))})}),xt}(Ze);ve=function(Rt){for(var xt={},Gt=0;Gt<Rt.length;++Gt){var er=rw(Rt[Gt]),qt=er.family,Mr=er.stretch,Fr=er.style,wt=er.weight;xt[qt]=xt[qt]||{},xt[qt][Mr]=xt[qt][Mr]||{},xt[qt][Mr][Fr]=xt[qt][Mr][Fr]||{},xt[qt][Mr][Fr][wt]=er}return xt}(vt.concat(Re)),Ct=ot}return ve}(this.pdf,this.fontFaces),wi=Zr.map(function(Ce){return{family:Ce,stretch:"normal",weight:jr,style:ir}}),Ci=function(Ce,Re,Ze){for(var ot=(Ze=Ze||{}).defaultFontFamily||"times",vt=Object.assign({},vq,Ze.genericFontFamilies||{}),Rt=null,xt=null,Gt=0;Gt<Re.length;++Gt)if(vt[(Rt=rw(Re[Gt])).family]&&(Rt.family=vt[Rt.family]),Ce.hasOwnProperty(Rt.family)){xt=Ce[Rt.family];break}if(!(xt=xt||Ce[ot]))throw new Error("Could not find a font-family for the rule '"+oE(Rt)+"' and default family '"+ot+"'.");if(xt=function(er,qt){if(qt[er])return qt[er];var Mr=T5[er],Fr=Mr<=T5.normal?-1:1,wt=sE(qt,jN,Mr,Fr);if(!wt)throw new Error("Could not find a matching font-stretch value for "+er);return wt}(Rt.stretch,xt),xt=function(er,qt){if(qt[er])return qt[er];for(var Mr=DN[er],Fr=0;Fr<Mr.length;++Fr)if(qt[Mr[Fr]])return qt[Mr[Fr]];throw new Error("Could not find a matching font-style for "+er)}(Rt.style,xt),!(xt=function(er,qt){if(qt[er])return qt[er];if(er===400&&qt[500])return qt[500];if(er===500&&qt[400])return qt[400];var Mr=gq[er],Fr=sE(qt,UN,Mr,er<400?-1:1);if(!Fr)throw new Error("Could not find a matching font-weight for value "+er);return Fr}(Rt.weight,xt)))throw new Error("Failed to resolve a font for the rule '"+oE(Rt)+"'.");return xt}(qr,wi);this.pdf.setFont(Ci.ref.name,Ci.ref.style)}else{var $t="";(jr==="bold"||parseInt(jr,10)>=700||ir==="bold")&&($t="bold"),ir==="italic"&&($t+="italic"),$t.length===0&&($t="normal");for(var Ar="",yr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},it=0;it<Zr.length;it++){if(this.pdf.internal.getFont(Zr[it],$t,{noFallback:!0,disableWarning:!0})!==void 0){Ar=Zr[it];break}if($t==="bolditalic"&&this.pdf.internal.getFont(Zr[it],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ar=Zr[it],$t="bold";else if(this.pdf.internal.getFont(Zr[it],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ar=Zr[it],$t="normal";break}}if(Ar===""){for(var ye=0;ye<Zr.length;ye++)if(yr[Zr[ye]]){Ar=yr[Zr[ye]];break}}Ar=Ar===""?"Times":Ar,this.pdf.setFont(Ar,$t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ve){this.ctx.globalCompositeOperation=Ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ve){this.ctx.globalAlpha=Ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ve){this.ctx.lineDashOffset=Ve,Ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ve){this.ctx.lineDash=Ve,Ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ve){this.ctx.ignoreClearRect=!!Ve}})};B.prototype.setLineDash=function(Y){this.lineDash=Y},B.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},B.prototype.fill=function(){ee.call(this,"fill",!1)},B.prototype.stroke=function(){ee.call(this,"stroke",!1)},B.prototype.beginPath=function(){this.path=[{type:"begin"}]},B.prototype.moveTo=function(Y,Ae){if(isNaN(Y)||isNaN(Ae))throw Js.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var fe=this.ctx.transform.applyToPoint(new c(Y,Ae));this.path.push({type:"mt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(Y,Ae)},B.prototype.closePath=function(){var Y=new c(0,0),Ae=0;for(Ae=this.path.length-1;Ae!==-1;Ae--)if(this.path[Ae].type==="begin"&&Ns(this.path[Ae+1])==="object"&&typeof this.path[Ae+1].x=="number"){Y=new c(this.path[Ae+1].x,this.path[Ae+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(Y.x,Y.y)},B.prototype.lineTo=function(Y,Ae){if(isNaN(Y)||isNaN(Ae))throw Js.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var fe=this.ctx.transform.applyToPoint(new c(Y,Ae));this.path.push({type:"lt",x:fe.x,y:fe.y}),this.ctx.lastPoint=new c(fe.x,fe.y)},B.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ee.call(this,null,!0)},B.prototype.quadraticCurveTo=function(Y,Ae,fe,be){if(isNaN(fe)||isNaN(be)||isNaN(Y)||isNaN(Ae))throw Js.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Me=this.ctx.transform.applyToPoint(new c(fe,be)),ze=this.ctx.transform.applyToPoint(new c(Y,Ae));this.path.push({type:"qct",x1:ze.x,y1:ze.y,x:Me.x,y:Me.y}),this.ctx.lastPoint=new c(Me.x,Me.y)},B.prototype.bezierCurveTo=function(Y,Ae,fe,be,Me,ze){if(isNaN(Me)||isNaN(ze)||isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be))throw Js.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var We=this.ctx.transform.applyToPoint(new c(Me,ze)),ut=this.ctx.transform.applyToPoint(new c(Y,Ae)),dt=this.ctx.transform.applyToPoint(new c(fe,be));this.path.push({type:"bct",x1:ut.x,y1:ut.y,x2:dt.x,y2:dt.y,x:We.x,y:We.y}),this.ctx.lastPoint=new c(We.x,We.y)},B.prototype.arc=function(Y,Ae,fe,be,Me,ze){if(isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be)||isNaN(Me))throw Js.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ze=!!ze,!this.ctx.transform.isIdentity){var We=this.ctx.transform.applyToPoint(new c(Y,Ae));Y=We.x,Ae=We.y;var ut=this.ctx.transform.applyToPoint(new c(0,fe)),dt=this.ctx.transform.applyToPoint(new c(0,0));fe=Math.sqrt(Math.pow(ut.x-dt.x,2)+Math.pow(ut.y-dt.y,2))}Math.abs(Me-be)>=2*Math.PI&&(be=0,Me=2*Math.PI),this.path.push({type:"arc",x:Y,y:Ae,radius:fe,startAngle:be,endAngle:Me,counterclockwise:ze})},B.prototype.arcTo=function(Y,Ae,fe,be,Me){throw new Error("arcTo not implemented.")},B.prototype.rect=function(Y,Ae,fe,be){if(isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be))throw Js.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Y,Ae),this.lineTo(Y+fe,Ae),this.lineTo(Y+fe,Ae+be),this.lineTo(Y,Ae+be),this.lineTo(Y,Ae),this.lineTo(Y+fe,Ae),this.lineTo(Y,Ae)},B.prototype.fillRect=function(Y,Ae,fe,be){if(isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be))throw Js.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var Me={};this.lineCap!=="butt"&&(Me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Y,Ae,fe,be),this.fill(),Me.hasOwnProperty("lineCap")&&(this.lineCap=Me.lineCap),Me.hasOwnProperty("lineJoin")&&(this.lineJoin=Me.lineJoin)}},B.prototype.strokeRect=function(Y,Ae,fe,be){if(isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be))throw Js.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(Y,Ae,fe,be),this.stroke())},B.prototype.clearRect=function(Y,Ae,fe,be){if(isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be))throw Js.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Y,Ae,fe,be))},B.prototype.save=function(Y){Y=typeof Y!="boolean"||Y;for(var Ae=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ae),Y){this.ctx.fontSize=this.pdf.internal.getFontSize();var be=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=be}},B.prototype.restore=function(Y){Y=typeof Y!="boolean"||Y;for(var Ae=this.pdf.internal.getCurrentPageInfo().pageNumber,fe=0;fe<this.pdf.internal.getNumberOfPages();fe++)this.pdf.setPage(fe+1),this.pdf.internal.out("Q");this.pdf.setPage(Ae),Y&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},B.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var F=function(Y){var Ae,fe,be,Me;if(Y.isCanvasGradient===!0&&(Y=Y.getColor()),!Y)return{r:0,g:0,b:0,a:0,style:Y};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Y))Ae=0,fe=0,be=0,Me=0;else{var ze=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Y);if(ze!==null)Ae=parseInt(ze[1]),fe=parseInt(ze[2]),be=parseInt(ze[3]),Me=1;else if((ze=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Y))!==null)Ae=parseInt(ze[1]),fe=parseInt(ze[2]),be=parseInt(ze[3]),Me=parseFloat(ze[4]);else{if(Me=1,typeof Y=="string"&&Y.charAt(0)!=="#"){var We=new FN(Y);Y=We.ok?We.toHex():"#000000"}Y.length===4?(Ae=Y.substring(1,2),Ae+=Ae,fe=Y.substring(2,3),fe+=fe,be=Y.substring(3,4),be+=be):(Ae=Y.substring(1,3),fe=Y.substring(3,5),be=Y.substring(5,7)),Ae=parseInt(Ae,16),fe=parseInt(fe,16),be=parseInt(be,16)}}return{r:Ae,g:fe,b:be,a:Me,style:Y}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},L=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};B.prototype.fillText=function(Y,Ae,fe,be){if(isNaN(Ae)||isNaN(fe)||typeof Y!="string")throw Js.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(be=isNaN(be)?void 0:be,!C.call(this)){var Me=$e(this.ctx.transform.rotation),ze=this.ctx.transform.scaleX;K.call(this,{text:Y,x:Ae,y:fe,scale:ze,angle:Me,align:this.textAlign,maxWidth:be})}},B.prototype.strokeText=function(Y,Ae,fe,be){if(isNaN(Ae)||isNaN(fe)||typeof Y!="string")throw Js.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){be=isNaN(be)?void 0:be;var Me=$e(this.ctx.transform.rotation),ze=this.ctx.transform.scaleX;K.call(this,{text:Y,x:Ae,y:fe,scale:ze,renderingMode:"stroke",angle:Me,align:this.textAlign,maxWidth:be})}},B.prototype.measureText=function(Y){if(typeof Y!="string")throw Js.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ae=this.pdf,fe=this.pdf.internal.scaleFactor,be=Ae.internal.getFontSize(),Me=Ae.getStringUnitWidth(Y)*be/Ae.internal.scaleFactor;return new function(ze){var We=(ze=ze||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return We}}),this}({width:Me*=Math.round(96*fe/72*1e4)/1e4})},B.prototype.scale=function(Y,Ae){if(isNaN(Y)||isNaN(Ae))throw Js.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var fe=new p(Y,0,0,Ae,0,0);this.ctx.transform=this.ctx.transform.multiply(fe)},B.prototype.rotate=function(Y){if(isNaN(Y))throw Js.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ae=new p(Math.cos(Y),Math.sin(Y),-Math.sin(Y),Math.cos(Y),0,0);this.ctx.transform=this.ctx.transform.multiply(Ae)},B.prototype.translate=function(Y,Ae){if(isNaN(Y)||isNaN(Ae))throw Js.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var fe=new p(1,0,0,1,Y,Ae);this.ctx.transform=this.ctx.transform.multiply(fe)},B.prototype.transform=function(Y,Ae,fe,be,Me,ze){if(isNaN(Y)||isNaN(Ae)||isNaN(fe)||isNaN(be)||isNaN(Me)||isNaN(ze))throw Js.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var We=new p(Y,Ae,fe,be,Me,ze);this.ctx.transform=this.ctx.transform.multiply(We)},B.prototype.setTransform=function(Y,Ae,fe,be,Me,ze){Y=isNaN(Y)?1:Y,Ae=isNaN(Ae)?0:Ae,fe=isNaN(fe)?0:fe,be=isNaN(be)?1:be,Me=isNaN(Me)?0:Me,ze=isNaN(ze)?0:ze,this.ctx.transform=new p(Y,Ae,fe,be,Me,ze)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};B.prototype.drawImage=function(Y,Ae,fe,be,Me,ze,We,ut,dt){var zt=this.pdf.getImageProperties(Y),ve=1,Ct=1,Pt=1,Ve=1;be!==void 0&&ut!==void 0&&(Pt=ut/be,Ve=dt/Me,ve=zt.width/be*ut/be,Ct=zt.height/Me*dt/Me),ze===void 0&&(ze=Ae,We=fe,Ae=0,fe=0),be!==void 0&&ut===void 0&&(ut=be,dt=Me),be===void 0&&ut===void 0&&(ut=zt.width,dt=zt.height);var lr=this.ctx.transform.decompose(),ir=$e(lr.rotate.shx),jr=new p,ar=(jr=(jr=(jr=jr.multiply(lr.translate)).multiply(lr.skew)).multiply(lr.scale)).applyToRectangle(new s(ze-Ae*Pt,We-fe*Ve,be*ve,Me*Ct));if(this.autoPaging){for(var Wr,Lr=D.call(this,ar),Zr=[],qr=0;qr<Lr.length;qr+=1)Zr.indexOf(Lr[qr])===-1&&Zr.push(Lr[qr]);H(Zr);for(var wi=Zr[0],Ci=Zr[Zr.length-1],$t=wi;$t<Ci+1;$t++){this.pdf.setPage($t);var Ar=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yr=$t===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ye=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ce=$t===1?0:it+($t-2)*ye;if(this.ctx.clip_path.length!==0){var Re=this.path;Wr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(Wr,this.posX+this.margin[3],-Ce+yr+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=Re}var Ze=JSON.parse(JSON.stringify(ar));Ze=q([Ze],this.posX+this.margin[3],-Ce+yr+this.ctx.prevPageLastElemOffset)[0];var ot=($t>wi||$t<Ci)&&P.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ar,ye,null).clip().discardPath()),this.pdf.addImage(Y,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,ir),ot&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(Y,"JPEG",ar.x,ar.y,ar.w,ar.h,null,null,ir)};var D=function(Y,Ae,fe){var be=[];Ae=Ae||this.pdf.internal.pageSize.width,fe=fe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Me=this.posY+this.ctx.prevPageLastElemOffset;switch(Y.type){default:case"mt":case"lt":be.push(Math.floor((Y.y+Me)/fe)+1);break;case"arc":be.push(Math.floor((Y.y+Me-Y.radius)/fe)+1),be.push(Math.floor((Y.y+Me+Y.radius)/fe)+1);break;case"qct":var ze=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x,Y.y);be.push(Math.floor((ze.y+Me)/fe)+1),be.push(Math.floor((ze.y+ze.h+Me)/fe)+1);break;case"bct":var We=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Y.x1,Y.y1,Y.x2,Y.y2,Y.x,Y.y);be.push(Math.floor((We.y+Me)/fe)+1),be.push(Math.floor((We.y+We.h+Me)/fe)+1);break;case"rect":be.push(Math.floor((Y.y+Me)/fe)+1),be.push(Math.floor((Y.y+Y.h+Me)/fe)+1)}for(var ut=0;ut<be.length;ut+=1)for(;this.pdf.internal.getNumberOfPages()<be[ut];)j.call(this);return be},j=function(){var Y=this.fillStyle,Ae=this.strokeStyle,fe=this.font,be=this.lineCap,Me=this.lineWidth,ze=this.lineJoin;this.pdf.addPage(),this.fillStyle=Y,this.strokeStyle=Ae,this.font=fe,this.lineCap=be,this.lineWidth=Me,this.lineJoin=ze},q=function(Y,Ae,fe){for(var be=0;be<Y.length;be++)switch(Y[be].type){case"bct":Y[be].x2+=Ae,Y[be].y2+=fe;case"qct":Y[be].x1+=Ae,Y[be].y1+=fe;default:Y[be].x+=Ae,Y[be].y+=fe}return Y},H=function(Y){return Y.sort(function(Ae,fe){return Ae-fe})},ee=function(Y,Ae){var fe=this.fillStyle,be=this.strokeStyle,Me=this.lineCap,ze=this.lineWidth,We=Math.abs(ze*this.ctx.transform.scaleX),ut=this.lineJoin;if(this.autoPaging){for(var dt,zt,ve=JSON.parse(JSON.stringify(this.path)),Ct=JSON.parse(JSON.stringify(this.path)),Pt=[],Ve=0;Ve<Ct.length;Ve++)if(Ct[Ve].x!==void 0)for(var lr=D.call(this,Ct[Ve]),ir=0;ir<lr.length;ir+=1)Pt.indexOf(lr[ir])===-1&&Pt.push(lr[ir]);for(var jr=0;jr<Pt.length;jr++)for(;this.pdf.internal.getNumberOfPages()<Pt[jr];)j.call(this);H(Pt);for(var ar=Pt[0],Wr=Pt[Pt.length-1],Lr=ar;Lr<Wr+1;Lr++){this.pdf.setPage(Lr),this.fillStyle=fe,this.strokeStyle=be,this.lineCap=Me,this.lineWidth=We,this.lineJoin=ut;var Zr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qr=Lr===1?this.posY+this.margin[0]:this.margin[0],wi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ci=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=Lr===1?0:wi+(Lr-2)*Ci;if(this.ctx.clip_path.length!==0){var Ar=this.path;dt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(dt,this.posX+this.margin[3],-$t+qr+this.ctx.prevPageLastElemOffset),G.call(this,Y,!0),this.path=Ar}if(zt=JSON.parse(JSON.stringify(ve)),this.path=q(zt,this.posX+this.margin[3],-$t+qr+this.ctx.prevPageLastElemOffset),Ae===!1||Lr===0){var yr=(Lr>ar||Lr<Wr)&&P.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zr,Ci,null).clip().discardPath()),G.call(this,Y,Ae),yr&&this.pdf.restoreGraphicsState()}this.lineWidth=ze}this.path=ve}else this.lineWidth=We,G.call(this,Y,Ae),this.lineWidth=ze},G=function(Y,Ae){if((Y!=="stroke"||Ae||!L.call(this))&&(Y==="stroke"||Ae||!C.call(this))){for(var fe,be,Me=[],ze=this.path,We=0;We<ze.length;We++){var ut=ze[We];switch(ut.type){case"begin":Me.push({begin:!0});break;case"close":Me.push({close:!0});break;case"mt":Me.push({start:ut,deltas:[],abs:[]});break;case"lt":var dt=Me.length;if(ze[We-1]&&!isNaN(ze[We-1].x)&&(fe=[ut.x-ze[We-1].x,ut.y-ze[We-1].y],dt>0)){for(;dt>=0;dt--)if(Me[dt-1].close!==!0&&Me[dt-1].begin!==!0){Me[dt-1].deltas.push(fe),Me[dt-1].abs.push(ut);break}}break;case"bct":fe=[ut.x1-ze[We-1].x,ut.y1-ze[We-1].y,ut.x2-ze[We-1].x,ut.y2-ze[We-1].y,ut.x-ze[We-1].x,ut.y-ze[We-1].y],Me[Me.length-1].deltas.push(fe);break;case"qct":var zt=ze[We-1].x+2/3*(ut.x1-ze[We-1].x),ve=ze[We-1].y+2/3*(ut.y1-ze[We-1].y),Ct=ut.x+2/3*(ut.x1-ut.x),Pt=ut.y+2/3*(ut.y1-ut.y),Ve=ut.x,lr=ut.y;fe=[zt-ze[We-1].x,ve-ze[We-1].y,Ct-ze[We-1].x,Pt-ze[We-1].y,Ve-ze[We-1].x,lr-ze[We-1].y],Me[Me.length-1].deltas.push(fe);break;case"arc":Me.push({deltas:[],abs:[],arc:!0}),Array.isArray(Me[Me.length-1].abs)&&Me[Me.length-1].abs.push(ut)}}be=Ae?null:Y==="stroke"?"stroke":"fill";for(var ir=!1,jr=0;jr<Me.length;jr++)if(Me[jr].arc)for(var ar=Me[jr].abs,Wr=0;Wr<ar.length;Wr++){var Lr=ar[Wr];Lr.type==="arc"?le.call(this,Lr.x,Lr.y,Lr.radius,Lr.startAngle,Lr.endAngle,Lr.counterclockwise,void 0,Ae,!ir):me.call(this,Lr.x,Lr.y),ir=!0}else if(Me[jr].close===!0)this.pdf.internal.out("h"),ir=!1;else if(Me[jr].begin!==!0){var Zr=Me[jr].start.x,qr=Me[jr].start.y;we.call(this,Me[jr].deltas,Zr,qr),ir=!0}be&&J.call(this,be),Ae&&ce.call(this)}},ne=function(Y){var Ae=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,fe=Ae*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Y-fe;case"top":return Y+Ae-fe;case"hanging":return Y+Ae-2*fe;case"middle":return Y+Ae/2-fe;default:return Y}},Z=function(Y){return Y+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};B.prototype.createLinearGradient=function(){var Y=function(){};return Y.colorStops=[],Y.addColorStop=function(Ae,fe){this.colorStops.push([Ae,fe])},Y.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Y.isCanvasGradient=!0,Y},B.prototype.createPattern=function(){return this.createLinearGradient()},B.prototype.createRadialGradient=function(){return this.createLinearGradient()};var le=function(Y,Ae,fe,be,Me,ze,We,ut,dt){for(var zt=he.call(this,fe,be,Me,ze),ve=0;ve<zt.length;ve++){var Ct=zt[ve];ve===0&&(dt?te.call(this,Ct.x1+Y,Ct.y1+Ae):me.call(this,Ct.x1+Y,Ct.y1+Ae)),Fe.call(this,Y,Ae,Ct.x2,Ct.y2,Ct.x3,Ct.y3,Ct.x4,Ct.y4)}ut?ce.call(this):J.call(this,We)},J=function(Y){switch(Y){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ce=function(){this.pdf.clip(),this.pdf.discardPath()},te=function(Y,Ae){this.pdf.internal.out(r(Y)+" "+i(Ae)+" m")},K=function(Y){var Ae;switch(Y.align){case"right":case"end":Ae="right";break;case"center":Ae="center";break;default:Ae="left"}var fe,be,Me,ze=this.pdf.getTextDimensions(Y.text),We=ne.call(this,Y.y),ut=Z.call(this,We)-ze.h,dt=this.ctx.transform.applyToPoint(new c(Y.x,We));if(this.autoPaging){var zt=this.ctx.transform.decompose(),ve=new p;ve=(ve=(ve=ve.multiply(zt.translate)).multiply(zt.skew)).multiply(zt.scale);for(var Ct=this.ctx.transform.applyToRectangle(new s(Y.x,We,ze.w,ze.h)),Pt=ve.applyToRectangle(new s(Y.x,ut,ze.w,ze.h)),Ve=D.call(this,Pt),lr=[],ir=0;ir<Ve.length;ir+=1)lr.indexOf(Ve[ir])===-1&&lr.push(Ve[ir]);H(lr);for(var jr=lr[0],ar=lr[lr.length-1],Wr=jr;Wr<ar+1;Wr++){this.pdf.setPage(Wr);var Lr=Wr===1?this.posY+this.margin[0]:this.margin[0],Zr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qr=this.pdf.internal.pageSize.height-this.margin[2],wi=qr-this.margin[0],Ci=this.pdf.internal.pageSize.width-this.margin[1],$t=Ci-this.margin[3],Ar=Wr===1?0:Zr+(Wr-2)*wi;if(this.ctx.clip_path.length!==0){var yr=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(fe,this.posX+this.margin[3],-1*Ar+Lr),G.call(this,"fill",!0),this.path=yr}var it=q([JSON.parse(JSON.stringify(Pt))],this.posX+this.margin[3],-Ar+Lr+this.ctx.prevPageLastElemOffset)[0];Y.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*Y.scale),Me=this.lineWidth,this.lineWidth=Me*Y.scale);var ye=this.autoPaging!=="text";if(ye||it.y+it.h<=qr){if(ye||it.y>=Lr&&it.x<=Ci){var Ce=ye?Y.text:this.pdf.splitTextToSize(Y.text,Y.maxWidth||Ci-it.x)[0],Re=q([JSON.parse(JSON.stringify(Ct))],this.posX+this.margin[3],-Ar+Lr+this.ctx.prevPageLastElemOffset)[0],Ze=ye&&(Wr>jr||Wr<ar)&&P.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,wi,null).clip().discardPath()),this.pdf.text(Ce,Re.x,Re.y,{angle:Y.angle,align:Ae,renderingMode:Y.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else it.y<qr&&(this.ctx.prevPageLastElemOffset+=qr-it.y);Y.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Me)}}else Y.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*Y.scale),Me=this.lineWidth,this.lineWidth=Me*Y.scale),this.pdf.text(Y.text,dt.x+this.posX,dt.y+this.posY,{angle:Y.angle,align:Ae,renderingMode:Y.renderingMode,maxWidth:Y.maxWidth}),Y.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Me)},me=function(Y,Ae,fe,be){fe=fe||0,be=be||0,this.pdf.internal.out(r(Y+fe)+" "+i(Ae+be)+" l")},we=function(Y,Ae,fe){return this.pdf.lines(Y,Ae,fe,null,null)},Fe=function(Y,Ae,fe,be,Me,ze,We,ut){this.pdf.internal.out([t(n(fe+Y)),t(a(be+Ae)),t(n(Me+Y)),t(a(ze+Ae)),t(n(We+Y)),t(a(ut+Ae)),"c"].join(" "))},he=function(Y,Ae,fe,be){for(var Me=2*Math.PI,ze=Math.PI/2;Ae>fe;)Ae-=Me;var We=Math.abs(fe-Ae);We<Me&&be&&(We=Me-We);for(var ut=[],dt=be?-1:1,zt=Ae;We>1e-5;){var ve=zt+dt*Math.min(We,ze);ut.push(Le.call(this,Y,zt,ve)),We-=Math.abs(ve-zt),zt=ve}return ut},Le=function(Y,Ae,fe){var be=(fe-Ae)/2,Me=Y*Math.cos(be),ze=Y*Math.sin(be),We=Me,ut=-ze,dt=We*We+ut*ut,zt=dt+We*Me+ut*ze,ve=4/3*(Math.sqrt(2*dt*zt)-zt)/(We*ze-ut*Me),Ct=We-ve*ut,Pt=ut+ve*We,Ve=Ct,lr=-Pt,ir=be+Ae,jr=Math.cos(ir),ar=Math.sin(ir);return{x1:Y*Math.cos(Ae),y1:Y*Math.sin(Ae),x2:Ct*jr-Pt*ar,y2:Ct*ar+Pt*jr,x3:Ve*jr-lr*ar,y3:Ve*ar+lr*jr,x4:Y*Math.cos(fe),y4:Y*Math.sin(fe)}},$e=function(Y){return 180*Y/Math.PI},Ne=function(Y,Ae,fe,be,Me,ze){var We=Y+.5*(fe-Y),ut=Ae+.5*(be-Ae),dt=Me+.5*(fe-Me),zt=ze+.5*(be-ze),ve=Math.min(Y,Me,We,dt),Ct=Math.max(Y,Me,We,dt),Pt=Math.min(Ae,ze,ut,zt),Ve=Math.max(Ae,ze,ut,zt);return new s(ve,Pt,Ct-ve,Ve-Pt)},Te=function(Y,Ae,fe,be,Me,ze,We,ut){var dt,zt,ve,Ct,Pt,Ve,lr,ir,jr,ar,Wr,Lr,Zr,qr,wi=fe-Y,Ci=be-Ae,$t=Me-fe,Ar=ze-be,yr=We-Me,it=ut-ze;for(zt=0;zt<41;zt++)jr=(lr=(ve=Y+(dt=zt/40)*wi)+dt*((Pt=fe+dt*$t)-ve))+dt*(Pt+dt*(Me+dt*yr-Pt)-lr),ar=(ir=(Ct=Ae+dt*Ci)+dt*((Ve=be+dt*Ar)-Ct))+dt*(Ve+dt*(ze+dt*it-Ve)-ir),zt==0?(Wr=jr,Lr=ar,Zr=jr,qr=ar):(Wr=Math.min(Wr,jr),Lr=Math.min(Lr,ar),Zr=Math.max(Zr,jr),qr=Math.max(qr,ar));return new s(Math.round(Wr),Math.round(Lr),Math.round(Zr-Wr),Math.round(qr-Lr))},Ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Y,Ae,fe=(Y=this.ctx.lineDash,Ae=this.ctx.lineDashOffset,JSON.stringify({lineDash:Y,lineDashOffset:Ae}));this.prevLineDash!==fe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=fe)}}})(ki.API),function(e){var t=function(c){var s,p,g,v,B,F,C,L,P,D;for(p=[],g=0,v=(c+=s="\0\0\0\0".slice(c.length%4||4)).length;v>g;g+=4)(B=(c.charCodeAt(g)<<24)+(c.charCodeAt(g+1)<<16)+(c.charCodeAt(g+2)<<8)+c.charCodeAt(g+3))!==0?(F=(B=((B=((B=((B=(B-(D=B%85))/85)-(P=B%85))/85)-(L=B%85))/85)-(C=B%85))/85)%85,p.push(F+33,C+33,L+33,P+33,D+33)):p.push(122);return function(j,q){for(var H=q;H>0;H--)j.pop()}(p,s.length),String.fromCharCode.apply(String,p)+"~>"},r=function(c){var s,p,g,v,B,F=String,C="length",L=255,P="charCodeAt",D="slice",j="replace";for(c[D](-2),c=c[D](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),g=[],v=0,B=(c+=s="uuuuu"[D](c[C]%5||5))[C];B>v;v+=5)p=52200625*(c[P](v)-33)+614125*(c[P](v+1)-33)+7225*(c[P](v+2)-33)+85*(c[P](v+3)-33)+(c[P](v+4)-33),g.push(L&p>>24,L&p>>16,L&p>>8,L&p);return function(q,H){for(var ee=H;ee>0;ee--)q.pop()}(g,s[C]),F.fromCharCode.apply(F,g)},i=function(c){return c.split("").map(function(s){return("0"+s.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(c){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),s.test(c)===!1)return"";for(var p="",g=0;g<c.length;g+=2)p+=String.fromCharCode("0x"+(c[g]+c[g+1]));return p},a=function(c){for(var s=new Uint8Array(c.length),p=c.length;p--;)s[p]=c.charCodeAt(p);return(s=_5(s)).reduce(function(g,v){return g+String.fromCharCode(v)},"")};e.processDataByFilters=function(c,s){var p=0,g=c||"",v=[];for(typeof(s=s||[])=="string"&&(s=[s]),p=0;p<s.length;p+=1)switch(s[p]){case"ASCII85Decode":case"/ASCII85Decode":g=r(g),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=n(g),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=i(g),v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=a(g),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[p]+'" is not implemented')}return{data:g,reverseChain:v.reverse().join(" ")}}}(ki.API),function(e){e.loadFile=function(t,r,i){return function(n,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var s=void 0;try{s=function(p,g,v){var B=new XMLHttpRequest,F=0,C=function(L){var P=L.length,D=[],j=String.fromCharCode;for(F=0;F<P;F+=1)D.push(j(255&L.charCodeAt(F)));return D.join("")};if(B.open("GET",p,!g),B.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(B.onload=function(){B.status===200?v(C(this.responseText)):v(void 0)}),B.send(null),g&&B.status===200)return C(B.responseText)}(n,a,c)}catch{}return s}(t,r,i)},e.loadImageFile=e.loadFile}(ki.API),function(e){function t(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):jb(()=>Promise.resolve().then(()=>KY),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function r(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):jb(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var p=Ns(s);return p==="undefined"?"undefined":p==="string"||s instanceof String?"string":p==="number"||s instanceof Number?"number":p==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":p==="object"?"object":"unknown"},n=function(s,p){var g=document.createElement(s);for(var v in p.className&&(g.className=p.className),p.innerHTML&&p.dompurify&&(g.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)g.style[v]=p.style[v];return g},a=function s(p,g){for(var v=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),B=p.firstChild;B;B=B.nextSibling)g!==!0&&B.nodeType===1&&B.nodeName==="SCRIPT"||v.appendChild(s(B,g));return p.nodeType===1&&(p.nodeName==="CANVAS"?(v.width=p.width,v.height=p.height,v.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(v.value=p.value),v.addEventListener("load",function(){v.scrollTop=p.scrollTop,v.scrollLeft=p.scrollLeft},!0)),v},c=function s(p){var g=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),v=s.convert(Promise.resolve(),g);return(v=v.setProgress(1,s,1,[s])).set(p)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(s,p){return s.__proto__=p||c.prototype,s},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(s,p){return this.then(function(){switch(p=p||function(g){switch(i(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s),p){case"string":return this.then(r).then(function(g){return this.set({src:n("div",{innerHTML:s,dompurify:g})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},c.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(p){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,p(this.prop.container,g)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(t).then(function(p){var g=this.opt.jsPDF,v=this.opt.fontFaces,B=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,F=Object.assign({async:!0,allowTaint:!0,scale:B,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete F.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=v,v)for(var C=0;C<v.length;++C){var L=v[C],P=L.src.find(function(D){return D.format==="truetype"});P&&g.addFont(P.url,L.ref.name,L.ref.style)}return F.windowHeight=F.windowHeight||0,F.windowHeight=F.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):F.windowHeight,g.context2d.save(!0),p(this.prop.container,F)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(s,p,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(s,p):this.outputPdf(s,p)},c.prototype.outputPdf=function(s,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,p)})},c.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},c.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(s){if(i(s)!=="object")return this;var p=Object.keys(s||{}).map(function(g){if(g in c.template.prop)return function(){this.prop[g]=s[g]};switch(g){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[g]=s[g]}}},this);return this.then(function(){return this.thenList(p)})},c.prototype.get=function(s,p){return this.then(function(){var g=s in c.template.prop?this.prop[s]:this.opt[s];return p?p(g):g})},c.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},c.prototype.setPageSize=function(s){function p(g,v){return Math.floor(g*v/72*96)}return this.then(function(){(s=s||ki.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:p(s.inner.width,s.k),height:p(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},c.prototype.setProgress=function(s,p,g,v){return s!=null&&(this.progress.val=s),p!=null&&(this.progress.state=p),g!=null&&(this.progress.n=g),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(s,p,g,v){return this.setProgress(s?this.progress.val+s:null,p||null,g?this.progress.n+g:null,v?this.progress.stack.concat(v):null)},c.prototype.then=function(s,p){var g=this;return this.thenCore(s,p,function(v,B){return g.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(F){return g.updateProgress(null,v),F}).then(v,B).then(function(F){return g.updateProgress(1),F})})},c.prototype.thenCore=function(s,p,g){g=g||Promise.prototype.then;var v=this;s&&(s=s.bind(v)),p&&(p=p.bind(v));var B=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?v:c.convert(Object.assign({},v),Promise.prototype),F=g.call(B,s,p);return c.convert(F,v.__proto__)},c.prototype.thenExternal=function(s,p){return Promise.prototype.then.call(this,s,p)},c.prototype.thenList=function(s){var p=this;return s.forEach(function(g){p=p.thenCore(g)}),p},c.prototype.catch=function(s){s&&(s=s.bind(this));var p=Promise.prototype.catch.call(this,s);return c.convert(p,this)},c.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},c.prototype.error=function(s){return this.then(function(){throw new Error(s)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,ki.getPageSize=function(s,p,g){if(Ns(s)==="object"){var v=s;s=v.orientation,p=v.unit||p,g=v.format||g}p=p||"mm",g=g||"a4",s=(""+(s||"P")).toLowerCase();var B,F=(""+g).toLowerCase(),C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":B=1;break;case"mm":B=72/25.4;break;case"cm":B=72/2.54;break;case"in":B=72;break;case"px":B=.75;break;case"pc":case"em":B=12;break;case"ex":B=6;break;default:throw"Invalid unit: "+p}var L,P=0,D=0;if(C.hasOwnProperty(F))P=C[F][1]/B,D=C[F][0]/B;else try{P=g[1],D=g[0]}catch{throw new Error("Invalid format: "+g)}if(s==="p"||s==="portrait")s="p",D>P&&(L=D,D=P,P=L);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",P>D&&(L=D,D=P,P=L)}return{width:D,height:P,unit:p,k:B,orientation:s}},e.html=function(s,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(rw):null;var g=new c(p);return p.worker?g:g.from(s).doCallback()}}(ki.API),ki.API.addJS=function(e){return uE=e,this.internal.events.subscribe("postPutResources",function(){gy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+uE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gy!==void 0&&cE!==void 0&&this.internal.out("/Names <</JavaScript "+gy+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),a=0;a<n.length;a++){var c=n[a],s=i.exec(c);if(s!=null){var p=s[1];r.internal.newObjectDeferredBegin(p,!1)}r.internal.write(c)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,v=[];for(a=0;a<g;a++){var B=r.internal.newObject();v.push(B);var F=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+F.objId+" 0 R /XYZ null null null]>> endobj")}var C=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<v.length;a++)r.internal.write("(page_"+(a+1)+")"+v[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+C+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,n,a){var c={title:n,options:a,children:[]};return i==null&&(i=this.root),i.children.push(c),c},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var n=0;n<i.children.length;n++)this.genIds_r(i.children[n])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var c=i.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var s=this.count=this.count_r({count:0},c);if(s>0&&this.line("/Count "+s),c.options&&c.options.pageNumber){var p=r.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var g=0;g<i.children.length;g++)this.renderItems(i.children[g])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,n){for(var a=0;a<n.children.length;a++)i.count++,this.count_r(i,n.children[a]);return i.count}}])}(ki.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,n,a,c,s){var p,g=this.decode.DCT_DECODE,v=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=c||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,p=function(B){for(var F,C=256*B.charCodeAt(4)+B.charCodeAt(5),L=B.length,P={width:0,height:0,numcomponents:1},D=4;D<L;D+=2){if(D+=C,t.indexOf(B.charCodeAt(D+1))!==-1){F=256*B.charCodeAt(D+5)+B.charCodeAt(D+6),P={width:256*B.charCodeAt(D+7)+B.charCodeAt(D+8),height:F,numcomponents:B.charCodeAt(D+9)};break}C=256*B.charCodeAt(D+2)+B.charCodeAt(D+3)}return P}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),p.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}v={data:r,width:p.width,height:p.height,colorSpace:s,bitsPerComponent:8,filter:g,index:i,alias:n}}return v}}(ki.API),ki.API.processPNG=function(e,t,r,i){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var n,a=iq(e,{checkCrc:!0}),c=a.width,s=a.height,p=a.channels,g=a.palette,v=a.depth;n=g&&p===1?function(le){for(var J=le.width,ce=le.height,te=le.data,K=le.palette,me=le.depth,we=!1,Fe=[],he=[],Le=void 0,$e=!1,Ne=0,Te=0;Te<K.length;Te++){var Ge=f3(K[Te],4),Y=Ge[0],Ae=Ge[1],fe=Ge[2],be=Ge[3];Fe.push(Y,Ae,fe),be!=null&&(be===0?(Ne++,he.length<1&&he.push(Te)):be<255&&($e=!0))}if($e||Ne>1){we=!0,he=void 0;var Me=J*ce;Le=new Uint8Array(Me);for(var ze=new DataView(te.buffer),We=0;We<Me;We++){var ut=nw(ze,We,me),dt=f3(K[ut],4)[3];Le[We]=dt}}else Ne===0&&(he=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:we?8:void 0,colorBytes:te,alphaBytes:Le,needSMask:we,palette:Fe,mask:he}}(a):p===2||p===4?function(le){for(var J=le.data,ce=le.width,te=le.height,K=le.channels,me=le.depth,we=K===2?"DeviceGray":"DeviceRGB",Fe=K-1,he=ce*te,Le=Fe,$e=he*Le,Ne=1*he,Te=Math.ceil($e*me/8),Ge=Math.ceil(Ne*me/8),Y=new Uint8Array(Te),Ae=new Uint8Array(Ge),fe=new DataView(J.buffer),be=new DataView(Y.buffer),Me=new DataView(Ae.buffer),ze=!1,We=0;We<he;We++){for(var ut=We*K,dt=0;dt<Le;dt++)xE(be,nw(fe,ut+dt,me),We*Le+dt,me);var zt=nw(fe,ut+Le,me);zt<(1<<me)-1&&(ze=!0),xE(Me,zt,1*We,me)}return{colorSpace:we,colorsPerPixel:Fe,sMaskBitsPerComponent:ze?me:void 0,colorBytes:Y,alphaBytes:Ae,needSMask:ze}}(a):function(le){var J=le.data,ce=le.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ce,colorsPerPixel:ce==="DeviceGray"?1:3,colorBytes:J instanceof Uint16Array?function(te){for(var K=te.length,me=new Uint8Array(2*K),we=new DataView(me.buffer,me.byteOffset,me.byteLength),Fe=0;Fe<K;Fe++)we.setUint16(2*Fe,te[Fe],!1);return me}(J):J,needSMask:!1}}(a);var B,F,C,L=n,P=L.colorSpace,D=L.colorsPerPixel,j=L.sMaskBitsPerComponent,q=L.colorBytes,H=L.alphaBytes,ee=L.needSMask,G=L.palette,ne=L.mask,Z=null;return i!==ki.API.image_compression.NONE&&typeof _5=="function"?(Z=function(le){var J;switch(le){case ki.API.image_compression.FAST:J=11;break;case ki.API.image_compression.MEDIUM:J=13;break;case ki.API.image_compression.SLOW:J=14;break;default:J=12}return J}(i),B=this.decode.FLATE_DECODE,F="/Predictor ".concat(Z," /Colors ").concat(D," /BitsPerComponent ").concat(v," /Columns ").concat(c),e=fE(q,Math.ceil(c*D*v/8),D,v,i),ee&&(C=fE(H,Math.ceil(c*j/8),1,j,i))):(B=void 0,F=void 0,e=q,ee&&(C=H)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(C&&this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),{alias:r,data:e,index:t,filter:B,decodeParameters:F,transparency:ne,palette:G,sMask:C,predictor:Z,width:c,height:s,bitsPerComponent:v,sMaskBitsPerComponent:j,colorSpace:P}}},function(e){e.processGIF89A=function(t,r,i,n){var a=new Cq(t),c=a.width,s=a.height,p=[];a.decodeAndBlitFrameRGBA(0,p);var g={data:p,width:c,height:s},v=new sw(100).encode(g,100);return e.processJPEG.call(this,v,r,i,n)},e.processGIF87A=e.processGIF89A}(ki.API),MA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:i,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},MA.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Js.log("bit decode error:"+r)}},MA.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var a=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+8*n*4,s=0;s<8&&8*n+s<this.width;s++){var p=this.palette[a>>7-s&1];this.data[c+4*s]=p.blue,this.data[c+4*s+1]=p.green,this.data[c+4*s+2]=p.red,this.data[c+4*s+3]=255}r!==0&&(this.pos+=4-r)}},MA.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,n=0;n<e;n++){var a=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+2*n*4,s=a>>4,p=15&a,g=this.palette[s];if(this.data[c]=g.blue,this.data[c+1]=g.green,this.data[c+2]=g.red,this.data[c+3]=255,2*n+1>=this.width)break;g=this.palette[p],this.data[c+4]=g.blue,this.data[c+4+1]=g.green,this.data[c+4+2]=g.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},MA.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*i;if(n<this.palette.length){var c=this.palette[n];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},MA.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&t)/t*255|0,s=(a>>5&t)/t*255|0,p=(a>>10&t)/t*255|0,g=a>>15?255:0,v=i*this.width*4+4*n;this.data[v]=p,this.data[v+1]=s,this.data[v+2]=c,this.data[v+3]=g}this.pos+=e}},MA.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(c&t)/t*255|0,p=(c>>5&r)/r*255|0,g=(c>>11)/t*255|0,v=n*this.width*4+4*a;this.data[v]=g,this.data[v+1]=p,this.data[v+2]=s,this.data[v+3]=255}this.pos+=e}},MA.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=a,this.data[c+1]=n,this.data[c+2]=i,this.data[c+3]=255}this.pos+=this.width%4}},MA.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=a,this.data[s+1]=n,this.data[s+2]=i,this.data[s+3]=c}},MA.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,n){var a=new MA(t,!1),c=a.width,s=a.height,p={data:a.getData(),width:c,height:s},g=new sw(100).encode(p,100);return e.processJPEG.call(this,g,r,i,n)}}(ki.API),_E.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,n){var a=new _E(t),c=a.width,s=a.height,p={data:a.getData(),width:c,height:s},g=new sw(100).encode(p,100);return e.processJPEG.call(this,g,r,i,n)}}(ki.API),ki.API.processRGBA=function(e,t,r){for(var i=e.data,n=i.length,a=new Uint8Array(n/4*3),c=new Uint8Array(n/4),s=0,p=0,g=0;g<n;g+=4){var v=i[g],B=i[g+1],F=i[g+2],C=i[g+3];a[s++]=v,a[s++]=B,a[s++]=F,c[p++]=C}var L=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:L,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ki.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Fm=ki.API,vy=Fm.getCharWidthsArray=function(e,t){var r,i,n=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:n.metadata.Unicode.widths,p=s.fof?s.fof:1,g=t.kerning?t.kerning:n.metadata.Unicode.kerning,v=g.fof?g.fof:1,B=t.doKerning!==!1,F=0,C=e.length,L=0,P=s[0]||p,D=[];for(r=0;r<C;r++)i=e.charCodeAt(r),typeof n.metadata.widthOfString=="function"?D.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(i))+c*(1e3/a)||0)/1e3):(F=B&&Ns(g[i])==="object"&&!isNaN(parseInt(g[i][L],10))?g[i][L]/v:0,D.push((s[i]||P)/p+F)),L=i;return D},hE=Fm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Fm.processArabic&&(e=Fm.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,n)/r:vy.apply(this,arguments).reduce(function(a,c){return a+c},0)},AE=function(e,t,r,i){for(var n=[],a=0,c=e.length,s=0;a!==c&&s+t[a]<r;)s+=t[a],a++;n.push(e.slice(0,a));var p=a;for(s=0;a!==c;)s+t[a]>i&&(n.push(e.slice(p,a)),s=0,p=a),s+=t[a],a++;return p!==a&&n.push(e.slice(p,a)),n},dE=function(e,t,r){r||(r={});var i,n,a,c,s,p,g,v=[],B=[v],F=r.textIndent||0,C=0,L=0,P=e.split(" "),D=vy.apply(this,[" ",r])[0];if(p=r.lineIndent===-1?P[0].length+2:r.lineIndent||0){var j=Array(p).join(" "),q=[];P.map(function(ee){(ee=ee.split(/\s*\n/)).length>1?q=q.concat(ee.map(function(G,ne){return(ne&&G.length?`
`:"")+G})):q.push(ee[0])}),P=q,p=hE.apply(this,[j,r])}for(a=0,c=P.length;a<c;a++){var H=0;if(i=P[a],p&&i[0]==`
`&&(i=i.substr(1),H=1),F+C+(L=(n=vy.apply(this,[i,r])).reduce(function(ee,G){return ee+G},0))>t||H){if(L>t){for(s=AE.apply(this,[i,n,t-(F+C),t]),v.push(s.shift()),v=[s.pop()];s.length;)B.push([s.shift()]);L=n.slice(i.length-(v[0]?v[0].length:0)).reduce(function(ee,G){return ee+G},0)}else v=[i];B.push(v),F=L+p,C=D}else v.push(i),F+=C+L,C=D}return g=p?function(ee,G){return(G?j:"")+ee.join(" ")}:function(ee){return ee.join(" ")},B.map(g)},Fm.splitTextToSize=function(e,t,r){var i,n=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var B=this.internal.getFont(v.fontName,v.fontStyle),F="Unicode";return B.metadata[F]?{widths:B.metadata[F].widths||{0:1},kerning:B.metadata[F].kerning||{}}:{font:B.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/n;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,a.lineIndent=r.lineIndent;var s,p,g=[];for(s=0,p=i.length;s<p;s++)g=g.concat(dE.apply(this,[i[s],c,a]));return g},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",i={},n={},a=0;a<16;a++)i[r[a]]=t[a],n[t[a]]=r[a];var c=function(F){return"0x"+parseInt(F,10).toString(16)},s=e.__fontmetrics__.compress=function(F){var C,L,P,D,j=["{"];for(var q in F){if(C=F[q],isNaN(parseInt(q,10))?L="'"+q+"'":(q=parseInt(q,10),L=(L=c(q).slice(2)).slice(0,-1)+n[L.slice(-1)]),typeof C=="number")C<0?(P=c(C).slice(3),D="-"):(P=c(C).slice(2),D=""),P=D+P.slice(0,-1)+n[P.slice(-1)];else{if(Ns(C)!=="object")throw new Error("Don't know what to do with value type "+Ns(C)+".");P=s(C)}j.push(L+P)}return j.push("}"),j.join("")},p=e.__fontmetrics__.uncompress=function(F){if(typeof F!="string")throw new Error("Invalid argument passed to uncompress.");for(var C,L,P,D,j={},q=1,H=j,ee=[],G="",ne="",Z=F.length-1,le=1;le<Z;le+=1)(D=F[le])=="'"?C?(P=C.join(""),C=void 0):C=[]:C?C.push(D):D=="{"?(ee.push([H,P]),H={},P=void 0):D=="}"?((L=ee.pop())[0][L[1]]=H,P=void 0,H=L[0]):D=="-"?q=-1:P===void 0?i.hasOwnProperty(D)?(G+=i[D],P=parseInt(G,16)*q,q=1,G=""):G+=D:i.hasOwnProperty(D)?(ne+=i[D],H[P]=parseInt(ne,16)*q,q=1,P=void 0,ne=""):ne+=D;return j},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},B={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(F){var C=F.font,L=B.Unicode[C.postScriptName];L&&(C.metadata.Unicode={},C.metadata.Unicode.widths=L.widths,C.metadata.Unicode.kerning=L.kerning);var P=v.Unicode[C.postScriptName];P&&(C.metadata.Unicode.encoding=P,C.encoding=P.codePages[0])}])}(ki.API),function(e){var t=function(r){for(var i=r.length,n=new Uint8Array(i),a=0;a<i;a++)n[a]=r.charCodeAt(a);return n};e.API.events.push(["addFont",function(r){var i=void 0,n=r.font,a=r.instance;if(!n.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(i=a.existsFileInVFS(n.postScriptName)===!1?a.loadFile(n.postScriptName):a.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(c,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(h2(s)),c.metadata=e.API.TTFFont.open(s),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(n,i)}}])}(ki),ki.API.addSvgAsImage=function(e,t,r,i,n,a,c,s){if(isNaN(t)||isNaN(r))throw Js.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(n))throw Js.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=i,p.height=n;var g=p.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,p.width,p.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},B=this;return(tn.canvg?Promise.resolve(tn.canvg):jb(()=>import("./index.es-DfnfzEME.js"),[])).catch(function(F){return Promise.reject(new Error("Could not load canvg: "+F))}).then(function(F){return F.default?F.default:F}).then(function(F){return F.fromString(g,e,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(v)}).then(function(){B.addImage(p.toDataURL("image/jpeg",1),t,r,i,n,c,s)})},ki.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var n=0;n<this.internal.pages[i].length;n++)this.internal.pages[i][n]=this.internal.pages[i][n].replace(t,r);return this},ki.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,n,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(c),p=[],g=0,v=0,B=0;function F(L,P){var D,j=!1;for(D=0;D<L.length;D+=1)L[D]===P&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var C=s.length;for(B=0;B<C;B+=1)r[s[B]].value=r[s[B]].defaultValue,r[s[B]].explicitSet=!1}if(Ns(e)==="object"){for(n in e)if(a=e[n],F(s,n)&&a!==void 0){if(r[n].type==="boolean"&&typeof a=="boolean")r[n].value=a;else if(r[n].type==="name"&&F(r[n].valueSet,a))r[n].value=a;else if(r[n].type==="integer"&&Number.isInteger(a))r[n].value=a;else if(r[n].type==="array"){for(g=0;g<a.length;g+=1)if(i=!0,a[g].length===1&&typeof a[g][0]=="number")p.push(String(a[g]-1));else if(a[g].length>1){for(v=0;v<a[g].length;v+=1)typeof a[g][v]!="number"&&(i=!1);i===!0&&p.push([a[g][0]-1,a[g][1]-1].join(" "))}r[n].value="["+p.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var L,P=[];for(L in r)r[L].explicitSet===!0&&(r[L].type==="name"?P.push("/"+L+" /"+r[L].value):P.push("/"+L+" "+r[L].value));P.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+P.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),g=a.length+c.length+s.length+n.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(n+a+c+s+p),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ki.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,c){for(var s,p=c.metadata.Unicode.widths,g=["","0","00","000","0000"],v=[""],B=0,F=a.length;B<F;++B){if(s=c.metadata.characterToGlyph(a.charCodeAt(B)),c.metadata.glyIdsUsed.push(s),c.metadata.toUnicode[s]=a.charCodeAt(B),p.indexOf(s)==-1&&(p.push(s),p.push([parseInt(c.metadata.widthOfGlyph(s),10)])),s=="0")return v.join("");s=s.toString(16),v.push(g[4-s.length],s)}return v.join("")},i=function(a){var c,s,p,g,v,B,F;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],B=0,F=(s=Object.keys(a).sort(function(C,L){return C-L})).length;B<F;B++)c=s[B],p.length>=100&&(v+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(g=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),p.push("<"+c+"><"+g+">"));return p.length&&(v+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),v+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(c){var s=c.font,p=c.out,g=c.newObject,v=c.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="Identity-H"){for(var B=s.metadata.Unicode.widths,F=s.metadata.subset.encode(s.metadata.glyIdsUsed,1),C="",L=0;L<F.length;L++)C+=String.fromCharCode(F[L]);var P=g();v({data:C,addLength1:!0,objectId:P}),p("endobj");var D=g();v({data:i(s.metadata.toUnicode),addLength1:!0,objectId:D}),p("endobj");var j=g();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Um(s.fontName)),p("/FontFile2 "+P+" 0 R"),p("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),p("/Flags "+s.metadata.flags),p("/StemV "+s.metadata.stemV),p("/ItalicAngle "+s.metadata.italicAngle),p("/Ascent "+s.metadata.ascender),p("/Descent "+s.metadata.decender),p("/CapHeight "+s.metadata.capHeight),p(">>"),p("endobj");var q=g();p("<<"),p("/Type /Font"),p("/BaseFont /"+Um(s.fontName)),p("/FontDescriptor "+j+" 0 R"),p("/W "+e.API.PDFObject.convert(B)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+s.encoding+")"),p(">>"),p(">>"),p("endobj"),s.objectNumber=g(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+D+" 0 R"),p("/BaseFont /"+Um(s.fontName)),p("/Encoding /"+s.encoding),p("/DescendantFonts ["+q+" 0 R]"),p(">>"),p("endobj"),s.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(c){var s=c.font,p=c.out,g=c.newObject,v=c.putStream;if(s.metadata instanceof e.API.TTFFont&&s.encoding==="WinAnsiEncoding"){for(var B=s.metadata.rawData,F="",C=0;C<B.length;C++)F+=String.fromCharCode(B[C]);var L=g();v({data:F,addLength1:!0,objectId:L}),p("endobj");var P=g();v({data:i(s.metadata.toUnicode),addLength1:!0,objectId:P}),p("endobj");var D=g();p("<<"),p("/Descent "+s.metadata.decender),p("/CapHeight "+s.metadata.capHeight),p("/StemV "+s.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+L+" 0 R"),p("/Flags 96"),p("/FontBBox "+e.API.PDFObject.convert(s.metadata.bbox)),p("/FontName /"+Um(s.fontName)),p("/ItalicAngle "+s.metadata.italicAngle),p("/Ascent "+s.metadata.ascender),p(">>"),p("endobj"),s.objectNumber=g();for(var j=0;j<s.metadata.hmtx.widths.length;j++)s.metadata.hmtx.widths[j]=parseInt(s.metadata.hmtx.widths[j]*(1e3/s.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+Um(s.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+s.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(s.metadata.hmtx.widths)+">>"),p("endobj"),s.isAlreadyPutted=!0}})(a)}]);var n=function(a){var c,s=a.text||"",p=a.x,g=a.y,v=a.options||{},B=a.mutex||{},F=B.pdfEscape,C=B.activeFontKey,L=B.fonts,P=C,D="",j=0,q="",H=L[P].encoding;if(L[P].encoding!=="Identity-H")return{text:s,x:p,y:g,options:v,mutex:B};for(q=s,P=C,Array.isArray(s)&&(q=s[0]),j=0;j<q.length;j+=1)L[P].metadata.hasOwnProperty("cmap")&&(c=L[P].metadata.cmap.unicode.codeMap[q[j].charCodeAt(0)]),c||q[j].charCodeAt(0)<256&&L[P].metadata.hasOwnProperty("Unicode")?D+=q[j]:D+="";var ee="";return parseInt(P.slice(1))<14||H==="WinAnsiEncoding"?ee=F(D,P).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(ee=r(D,L[P])),B.isHex=!0,{text:ee,x:p,y:g,options:v,mutex:B}};t.events.push(["postProcessText",function(a){var c=a.text||"",s=[],p={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var g=0;for(g=0;g<c.length;g+=1)Array.isArray(c[g])&&c[g].length===3?s.push([n(Object.assign({},p,{text:c[g][0]})).text,c[g][1],c[g][2]]):s.push(n(Object.assign({},p,{text:c[g]})).text);a.text=s}else a.text=n(Object.assign({},p,{text:c})).text}])}(ki),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ki.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var n,a,c,s,p,g,v,B=t,F=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),q=!1,H=0;this.__bidiEngine__={};var ee=function(te){var K=te.charCodeAt(),me=K>>8,we=P[me];return we!==void 0?B[256*we+(255&K)]:me===252||me===253?"AL":j.test(me)?"L":me===8?"R":"N"},G=function(te){for(var K,me=0;me<te.length;me++){if((K=ee(te.charAt(me)))==="L")return!1;if(K==="R")return!0}return!1},ne=function(te,K,me,we){var Fe,he,Le,$e,Ne=K[we];switch(Ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":q=!1;break;case"N":case"AN":break;case"EN":q&&(Ne="AN");break;case"AL":q=!0,Ne="R";break;case"WS":case"BN":Ne="N";break;case"CS":we<1||we+1>=K.length||(Fe=me[we-1])!=="EN"&&Fe!=="AN"||(he=K[we+1])!=="EN"&&he!=="AN"?Ne="N":q&&(he="AN"),Ne=he===Fe?he:"N";break;case"ES":Ne=(Fe=we>0?me[we-1]:"B")==="EN"&&we+1<K.length&&K[we+1]==="EN"?"EN":"N";break;case"ET":if(we>0&&me[we-1]==="EN"){Ne="EN";break}if(q){Ne="N";break}for(Le=we+1,$e=K.length;Le<$e&&K[Le]==="ET";)Le++;Ne=Le<$e&&K[Le]==="EN"?"EN":"N";break;case"NSM":if(c&&!s){for($e=K.length,Le=we+1;Le<$e&&K[Le]==="NSM";)Le++;if(Le<$e){var Te=te[we],Ge=Te>=1425&&Te<=2303||Te===64286;if(Fe=K[Le],Ge&&(Fe==="R"||Fe==="AL")){Ne="R";break}}}Ne=we<1||(Fe=K[we-1])==="B"?"N":me[we-1];break;case"B":q=!1,n=!0,Ne=H;break;case"S":a=!0,Ne="N"}return Ne},Z=function(te,K,me){var we=te.split("");return me&&le(we,me,{hiLevel:H}),we.reverse(),K&&K.reverse(),we.join("")},le=function(te,K,me){var we,Fe,he,Le,$e,Ne=-1,Te=te.length,Ge=0,Y=[],Ae=H?C:F,fe=[];for(q=!1,n=!1,a=!1,Fe=0;Fe<Te;Fe++)fe[Fe]=ee(te[Fe]);for(he=0;he<Te;he++){if($e=Ge,Y[he]=ne(te,fe,Y,he),we=240&(Ge=Ae[$e][L[Y[he]]]),Ge&=15,K[he]=Le=Ae[Ge][5],we>0)if(we===16){for(Fe=Ne;Fe<he;Fe++)K[Fe]=1;Ne=-1}else Ne=-1;if(Ae[Ge][6])Ne===-1&&(Ne=he);else if(Ne>-1){for(Fe=Ne;Fe<he;Fe++)K[Fe]=Le;Ne=-1}fe[he]==="B"&&(K[he]=0),me.hiLevel|=Le}a&&function(be,Me,ze){for(var We=0;We<ze;We++)if(be[We]==="S"){Me[We]=H;for(var ut=We-1;ut>=0&&be[ut]==="WS";ut--)Me[ut]=H}}(fe,K,Te)},J=function(te,K,me,we,Fe){if(!(Fe.hiLevel<te)){if(te===1&&H===1&&!n)return K.reverse(),void(me&&me.reverse());for(var he,Le,$e,Ne,Te=K.length,Ge=0;Ge<Te;){if(we[Ge]>=te){for($e=Ge+1;$e<Te&&we[$e]>=te;)$e++;for(Ne=Ge,Le=$e-1;Ne<Le;Ne++,Le--)he=K[Ne],K[Ne]=K[Le],K[Le]=he,me&&(he=me[Ne],me[Ne]=me[Le],me[Le]=he);Ge=$e}Ge++}}},ce=function(te,K,me){var we=te.split(""),Fe={hiLevel:H};return me||(me=[]),le(we,me,Fe),function(he,Le,$e){if($e.hiLevel!==0&&v)for(var Ne,Te=0;Te<he.length;Te++)Le[Te]===1&&(Ne=D.indexOf(he[Te]))>=0&&(he[Te]=D[Ne+1])}(we,me,Fe),J(2,we,K,me,Fe),J(1,we,K,me,Fe),we.join("")};return this.__bidiEngine__.doBidiReorder=function(te,K,me){if(function(Fe,he){if(he)for(var Le=0;Le<Fe.length;Le++)he[Le]=Le;s===void 0&&(s=G(Fe)),g===void 0&&(g=G(Fe))}(te,K),c||!p||g)if(c&&p&&s^g)H=s?1:0,te=Z(te,K,me);else if(!c&&p&&g)H=s?1:0,te=ce(te,K,me),te=Z(te,K);else if(!c||s||p||g){if(c&&!p&&s^g)te=Z(te,K),s?(H=0,te=ce(te,K,me)):(H=1,te=ce(te,K,me),te=Z(te,K));else if(c&&s&&!p&&g)H=1,te=ce(te,K,me),te=Z(te,K);else if(!c&&!p&&s^g){var we=v;s?(H=1,te=ce(te,K,me),H=0,v=!1,te=ce(te,K,me),v=we):(H=0,te=ce(te,K,me),te=Z(te,K),H=1,v=!1,te=ce(te,K,me),v=we,te=Z(te,K))}}else H=0,te=ce(te,K,me);else H=s?1:0,te=ce(te,K,me);return te},this.__bidiEngine__.setOptions=function(te){te&&(c=te.isInputVisual,p=te.isOutputVisual,s=te.isInputRtl,g=te.isOutputRtl,v=te.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var n=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var c=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(n)==="[object Array]"){var s=0;for(c=[],s=0;s<n.length;s+=1)Object.prototype.toString.call(n[s])==="[object Array]"?c.push([r.doBidiReorder(n[s][0]),n[s][1],n[s][2]]):c.push([r.doBidiReorder(n[s])]);i.text=c}else i.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])}(ki),ki.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new wp(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Uq(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Bq(this.contents),this.head=new Eq(this),this.name=new Iq(this),this.cmap=new zN(this),this.toUnicode={},this.hhea=new Tq(this),this.maxp=new Lq(this),this.hmtx=new Mq(this),this.post=new Fq(this),this.os2=new kq(this),this.loca=new jq(this),this.glyf=new Pq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,n,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,s,p,g;for(g=[],c=0,s=(p=this.bbox).length;c<s;c++)t=p[c],g.push(Math.round(t*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var n,a,c,s;for(c=0,a=0,s=(t=""+t).length;0<=s?a<s:a>s;a=0<=s?++a:--a)n=t.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/r)||0;return c*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var $A,wp=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,n;for(n=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,n,a,c,s,p;return t=this.readByte(),r=this.readByte(),i=this.readByte(),n=this.readByte(),a=this.readByte(),c=this.readByte(),s=this.readByte(),p=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^a)+65536*(255^c)+256*(255^s)+(255^p)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*n+16777216*a+65536*c+256*s+p},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,n,a;for(a=[],i=0,n=t.length;i<n;i++)r=t[i],a.push(this.writeByte(r));return a},e}(),Bq=function(){var e;function t(r){var i,n,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,a=this.tableCount;0<=a?n<a:n>a;n=0<=a?++n:--n)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,n,a,c,s,p,g,v,B,F,C,L,P;for(P in C=Object.keys(r).length,p=Math.log(2),B=16*Math.floor(Math.log(C)/p),c=Math.floor(B/p),v=16*C-B,(n=new wp).writeInt(this.scalarType),n.writeShort(C),n.writeShort(B),n.writeShort(c),n.writeShort(v),a=16*C,g=n.pos+a,s=null,L=[],r)for(F=r[P],n.writeString(P),n.writeInt(e(F)),n.writeInt(g),n.writeInt(F.length),L=L.concat(F),P==="head"&&(s=g),g+=F.length;g%4;)L.push(0),g++;return n.write(L),i=2981146554-e(n.data),n.pos=s+8,n.writeUInt32(i),n.data},e=function(r){var i,n,a,c;for(r=QN.call(r);r.length%4;)r.push(0);for(a=new wp(r),n=0,i=0,c=r.length;i<c;i=i+=4)n+=a.readUInt32();return 4294967295&n},t}(),Sq={}.hasOwnProperty,Ed=function(e,t){for(var r in t)Sq.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};$A=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Eq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new wp).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),bE=function(){function e(t,r){var i,n,a,c,s,p,g,v,B,F,C,L,P,D,j,q,H;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),B=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=t.readByte();break;case 4:for(C=t.readUInt16(),F=C/2,t.pos+=6,a=function(){var ee,G;for(G=[],p=ee=0;0<=F?ee<F:ee>F;p=0<=F?++ee:--ee)G.push(t.readUInt16());return G}(),t.pos+=2,P=function(){var ee,G;for(G=[],p=ee=0;0<=F?ee<F:ee>F;p=0<=F?++ee:--ee)G.push(t.readUInt16());return G}(),g=function(){var ee,G;for(G=[],p=ee=0;0<=F?ee<F:ee>F;p=0<=F?++ee:--ee)G.push(t.readUInt16());return G}(),v=function(){var ee,G;for(G=[],p=ee=0;0<=F?ee<F:ee>F;p=0<=F?++ee:--ee)G.push(t.readUInt16());return G}(),n=(this.length-t.pos+this.offset)/2,s=function(){var ee,G;for(G=[],p=ee=0;0<=n?ee<n:ee>n;p=0<=n?++ee:--ee)G.push(t.readUInt16());return G}(),p=j=0,H=a.length;j<H;p=++j)for(D=a[p],i=q=L=P[p];L<=D?q<=D:q>=D;i=L<=D?++q:--q)v[p]===0?c=i+g[p]:(c=s[v[p]/2+(i-L)-(F-p)]||0)!==0&&(c+=g[p]),this.codeMap[i]=65535&c}t.pos=B}return e.encode=function(t,r){var i,n,a,c,s,p,g,v,B,F,C,L,P,D,j,q,H,ee,G,ne,Z,le,J,ce,te,K,me,we,Fe,he,Le,$e,Ne,Te,Ge,Y,Ae,fe,be,Me,ze,We,ut,dt,zt,ve;switch(we=new wp,c=Object.keys(t).sort(function(Ct,Pt){return Ct-Pt}),r){case"macroman":for(P=0,D=function(){var Ct=[];for(L=0;L<256;++L)Ct.push(0);return Ct}(),q={0:0},a={},Fe=0,Ne=c.length;Fe<Ne;Fe++)q[ut=t[n=c[Fe]]]==null&&(q[ut]=++P),a[n]={old:t[n],new:q[t[n]]},D[n]=q[t[n]];return we.writeUInt16(1),we.writeUInt16(0),we.writeUInt32(12),we.writeUInt16(0),we.writeUInt16(262),we.writeUInt16(0),we.write(D),{charMap:a,subtable:we.data,maxGlyphID:P+1};case"unicode":for(K=[],B=[],H=0,q={},i={},j=g=null,he=0,Te=c.length;he<Te;he++)q[G=t[n=c[he]]]==null&&(q[G]=++H),i[n]={old:G,new:q[G]},s=q[G]-n,j!=null&&s===g||(j&&B.push(j),K.push(n),g=s),j=n;for(j&&B.push(j),B.push(65535),K.push(65535),ce=2*(J=K.length),le=2*Math.pow(Math.log(J)/Math.LN2,2),F=Math.log(le/2)/Math.LN2,Z=2*J-le,p=[],ne=[],C=[],L=Le=0,Ge=K.length;Le<Ge;L=++Le){if(te=K[L],v=B[L],te===65535){p.push(0),ne.push(0);break}if(te-(me=i[te].new)>=32768)for(p.push(0),ne.push(2*(C.length+J-L)),n=$e=te;te<=v?$e<=v:$e>=v;n=te<=v?++$e:--$e)C.push(i[n].new);else p.push(me-te),ne.push(0)}for(we.writeUInt16(3),we.writeUInt16(1),we.writeUInt32(12),we.writeUInt16(4),we.writeUInt16(16+8*J+2*C.length),we.writeUInt16(0),we.writeUInt16(ce),we.writeUInt16(le),we.writeUInt16(F),we.writeUInt16(Z),ze=0,Y=B.length;ze<Y;ze++)n=B[ze],we.writeUInt16(n);for(we.writeUInt16(0),We=0,Ae=K.length;We<Ae;We++)n=K[We],we.writeUInt16(n);for(dt=0,fe=p.length;dt<fe;dt++)s=p[dt],we.writeUInt16(s);for(zt=0,be=ne.length;zt<be;zt++)ee=ne[zt],we.writeUInt16(ee);for(ve=0,Me=C.length;ve<Me;ve++)P=C[ve],we.writeUInt16(P);return{charMap:i,subtable:we.data,maxGlyphID:H+1}}},e}(),zN=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)r=new bE(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,n;return r==null&&(r="macroman"),i=bE.encode(t,r),(n=new wp).writeUInt16(0),n.writeUInt16(1),i.table=n.data.concat(i.subtable),i},e}(),Tq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),kq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Fq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)r=t.readByte(),n.push(this.names.push(t.readString(r)));return n;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var c,s,p;for(p=[],a=c=0,s=this.file.maxp.numGlyphs;0<=s?c<s:c>s;a=0<=s?++c:--c)p.push(t.readUInt32());return p}).call(this)}},e}(),Nq=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Iq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,n,a,c,s,p,g,v,B,F;for(t.pos=this.offset,t.readShort(),r=t.readShort(),s=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(p={},a=v=0,B=i.length;v<B;a=++v)n=i[a],t.pos=n.offset,g=t.readString(n.length),c=new Nq(g,n),p[F=n.nameID]==null&&(p[F]=[]),p[n.nameID].push(c);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},e}(),Lq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Mq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,n,a,c,s,p;for(t.pos=this.offset,this.metrics=[],r=0,s=this.file.hhea.numberOfMetrics;0<=s?r<s:r>s;r=0<=s?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,v;for(v=[],r=g=0;0<=n?g<n:g>n;r=0<=n?++g:--g)v.push(t.readInt16());return v}(),this.widths=(function(){var g,v,B,F;for(F=[],g=0,v=(B=this.metrics).length;g<v;g++)a=B[g],F.push(a.advance);return F}).call(this),i=this.widths[this.widths.length-1],p=[],r=c=0;0<=n?c<n:c>n;r=0<=n?++c:--c)p.push(this.widths.push(i));return p},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),QN=[].slice,Pq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,n,a,c,s,p,g,v,B;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(n=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,c=(s=new wp(r.read(n))).readShort(),g=s.readShort(),B=s.readShort(),p=s.readShort(),v=s.readShort(),this.cache[t]=c===-1?new Dq(s,g,B,p,v):new Rq(s,c,g,B,p,v),this.cache[t]))},e.prototype.encode=function(t,r,i){var n,a,c,s,p;for(c=[],a=[],s=0,p=r.length;s<p;s++)n=t[r[s]],a.push(c.length),n&&(c=c.concat(n.encode(i)));return a.push(c.length),{table:c,offsets:a}},e}(),Rq=function(){function e(t,r,i,n,a,c){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=n,this.xMax=a,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Dq=function(){function e(t,r,i,n,a){var c,s;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=n,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;s=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&s;)c.pos+=1&s?4:2,128&s?c.pos+=8:64&s?c.pos+=4:8&s&&(c.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new wp(QN.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),jq=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ed(e,$A),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,a;for(a=[],i=0,n=this.length;i<n;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var n,a;for(a=[],i=0,n=this.length;i<n;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),n=0,a=0,c=0;c<i.length;++c)if(i[c]=n,a<r.length&&r[a]==c){++a,i[c]=n;var s=this.offsets[c],p=this.offsets[c+1]-s;p>0&&(n+=p)}for(var g=new Array(4*i.length),v=0;v<i.length;++v)g[4*v+3]=255&i[v],g[4*v+2]=(65280&i[v])>>8,g[4*v+1]=(16711680&i[v])>>16,g[4*v]=(4278190080&i[v])>>24;return g},e}(),Uq=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,n,a;for(r in n=this.font.cmap.tables[0].codeMap,t={},a=this.subset)i=a[r],t[r]=n[i];return t},e.prototype.glyphsFor=function(t){var r,i,n,a,c,s,p;for(n={},c=0,s=t.length;c<s;c++)n[a=t[c]]=this.font.glyf.glyphFor(a);for(a in r=[],n)(i=n[a])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(a in p=this.glyphsFor(r))i=p[a],n[a]=i;return n},e.prototype.encode=function(t,r){var i,n,a,c,s,p,g,v,B,F,C,L,P,D,j;for(n in i=zN.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),C={0:0},j=i.charMap)C[(p=j[n]).old]=p.new;for(L in F=i.maxGlyphID,c)L in C||(C[L]=F++);return v=function(q){var H,ee;for(H in ee={},q)ee[q[H]]=H;return ee}(C),B=Object.keys(v).sort(function(q,H){return q-H}),P=function(){var q,H,ee;for(ee=[],q=0,H=B.length;q<H;q++)s=B[q],ee.push(v[s]);return ee}(),a=this.font.glyf.encode(c,P,C),g=this.font.loca.encode(a.offsets,P),D={cmap:this.font.cmap.raw(),glyf:a.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},e}();ki.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,n,a,c;if(Array.isArray(r))return"["+function(){var s,p,g;for(g=[],s=0,p=r.length;s<p;s++)i=r[s],g.push(t.convert(i));return g}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in a=["<<"],r)c=r[n],a.push("/"+n+" "+t.convert(c));return a.push(">>"),a.join(`
`)}return""+r},t}();function HN(e,t,r,i,n){i=i||{};var a=1.15,c=n.internal.scaleFactor,s=n.internal.getFontSize()/c,p=n.getLineHeightFactor?n.getLineHeightFactor():a,g=s*p,v=/\r\n|\r|\n/g,B="",F=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(B=typeof e=="string"?e.split(v):e,F=B.length||1),r+=s*(2-a),i.valign==="middle"?r-=F/2*g:i.valign==="bottom"&&(r-=F*g),i.halign==="center"||i.halign==="right"){var C=s;if(i.halign==="center"&&(C*=.5),B&&F>=1){for(var L=0;L<B.length;L++)n.text(B[L],t-n.getStringUnitWidth(B[L])*C,r),r+=g;return n}t-=n.getStringUnitWidth(e)*C}return i.halign==="justify"?n.text(e,t,r,{maxWidth:i.maxWidth||100,align:"justify"}):n.text(e,t,r),n}var wE={},tg=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:wE=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var i,n,a;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var c=this.jsPDFDocument.internal.getFont(),s=c.fontStyle,p=c.fontName;if(t.font&&(p=t.font),t.fontStyle){s=t.fontStyle;var g=this.getFontList()[p];g&&g.indexOf(s)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(g[0]),s=g[0])}if(this.jsPDFDocument.setFont(p,s),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var v=e.unifyColor(t.fillColor);v&&(i=this.jsPDFDocument).setFillColor.apply(i,v),v=e.unifyColor(t.textColor),v&&(n=this.jsPDFDocument).setTextColor.apply(n,v),v=e.unifyColor(t.lineColor),v&&(a=this.jsPDFDocument).setDrawColor.apply(a,v),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,i){return this.jsPDFDocument.splitTextToSize(t,r,i)},e.prototype.rect=function(t,r,i,n,a){return this.jsPDFDocument.rect(t,r,i,n,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return wE||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),k5=function(e,t){return k5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},k5(e,t)};function VN(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");k5(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var GN=function(e){VN(t,e);function t(r){var i=e.call(this)||this;return i._element=r,i}return t}(Array);function Oq(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function zq(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function j2(e,t,r){r.applyStyles(t,!0);var i=Array.isArray(e)?e:[e],n=i.map(function(a){return r.getTextWidth(a)}).reduce(function(a,c){return Math.max(a,c)},0);return n}function qN(e,t,r,i){var n=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:a});var c=KN(n,!1);c&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),i.y-r.y,c)}function KN(e,t){var r=e>0,i=t||t===0;return r&&i?"DF":r?"S":i?"F":null}function k_(e,t){var r,i,n,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(i=e.top)!==null&&i!==void 0?i:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function WN(e,t){var r=k_(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Qq(e,t,r,i,n){var a={},c=1.3333333333333333,s=aw(t,function(H){return n.getComputedStyle(H).backgroundColor});s!=null&&(a.fillColor=s);var p=aw(t,function(H){return n.getComputedStyle(H).color});p!=null&&(a.textColor=p);var g=Vq(i,r);g&&(a.cellPadding=g);var v="borderTopColor",B=c*r,F=i.borderTopWidth;if(i.borderBottomWidth===F&&i.borderRightWidth===F&&i.borderLeftWidth===F){var C=(parseFloat(F)||0)/B;C&&(a.lineWidth=C)}else a.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/B,right:(parseFloat(i.borderRightWidth)||0)/B,bottom:(parseFloat(i.borderBottomWidth)||0)/B,left:(parseFloat(i.borderLeftWidth)||0)/B},a.lineWidth.top||(a.lineWidth.right?v="borderRightColor":a.lineWidth.bottom?v="borderBottomColor":a.lineWidth.left&&(v="borderLeftColor"));var L=aw(t,function(H){return n.getComputedStyle(H)[v]});L!=null&&(a.lineColor=L);var P=["left","right","center","justify"];P.indexOf(i.textAlign)!==-1&&(a.halign=i.textAlign),P=["middle","bottom","top"],P.indexOf(i.verticalAlign)!==-1&&(a.valign=i.verticalAlign);var D=parseInt(i.fontSize||"");isNaN(D)||(a.fontSize=D/c);var j=Hq(i);j&&(a.fontStyle=j);var q=(i.fontFamily||"").toLowerCase();return e.indexOf(q)!==-1&&(a.font=q),a}function Hq(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function aw(e,t){var r=$N(e,t);if(!r)return null;var i=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var n=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],a=parseInt(i[4]);return a===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function $N(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:$N(e.parentElement,t):r}function Vq(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],i=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=r.map(function(s){return parseInt(s||"0")/i}),c=k_(a,0);return n>c.top&&(c.top=n),n>c.bottom&&(c.bottom=n),c}function XN(e,t,r,i,n){var a,c;i===void 0&&(i=!1),n===void 0&&(n=!1);var s;typeof t=="string"?s=r.document.querySelector(t):s=t;var p=Object.keys(e.getFontList()),g=e.scaleFactor(),v=[],B=[],F=[];if(!s)return console.error("Html table could not be found with input: ",t),{head:v,body:B,foot:F};for(var C=0;C<s.rows.length;C++){var L=s.rows[C],P=(c=(a=L?.parentElement)===null||a===void 0?void 0:a.tagName)===null||c===void 0?void 0:c.toLowerCase(),D=Gq(p,g,r,L,i,n);D&&(P==="thead"?v.push(D):P==="tfoot"?F.push(D):B.push(D))}return{head:v,body:B,foot:F}}function Gq(e,t,r,i,n,a){for(var c=new GN(i),s=0;s<i.cells.length;s++){var p=i.cells[s],g=r.getComputedStyle(p);if(n||g.display!=="none"){var v=void 0;a&&(v=Qq(e,p,t,g,r)),c.push({rowSpan:p.rowSpan,colSpan:p.colSpan,styles:v,_element:p,content:qq(p)})}}var B=r.getComputedStyle(i);if(c.length>0&&(n||B.display!=="none"))return c}function qq(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Kq(e,t,r){for(var i=0,n=[e,t,r];i<n.length;i++){var a=n[i];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Af(e,t,r,i,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),c=1;c<arguments.length;c++){var s=arguments[c];if(s!=null)for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(a[p]=s[p])}return a}function ZN(e,t){var r=new tg(e),i=r.getDocumentOptions(),n=r.getGlobalOptions();Kq(n,i,t);var a=Af({},n,i,t),c;typeof window<"u"&&(c=window);var s=Wq(n,i,t),p=$q(n,i,t),g=Xq(r,a),v=Yq(r,a,c);return{id:t.tableId,content:v,hooks:p,styles:s,settings:g}}function Wq(e,t,r){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(p){if(p==="columnStyles"){var g=e[p],v=t[p],B=r[p];i.columnStyles=Af({},g,v,B)}else{var F=[e,t,r],C=F.map(function(L){return L[p]||{}});i[p]=Af({},C[0],C[1],C[2])}},a=0,c=Object.keys(i);a<c.length;a++){var s=c[a];n(s)}return i}function $q(e,t,r){for(var i=[e,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,c=i;a<c.length;a++){var s=c[a];s.didParseCell&&n.didParseCell.push(s.didParseCell),s.willDrawCell&&n.willDrawCell.push(s.willDrawCell),s.didDrawCell&&n.didDrawCell.push(s.didDrawCell),s.willDrawPage&&n.willDrawPage.push(s.willDrawPage),s.didDrawPage&&n.didDrawPage.push(s.didDrawPage)}return n}function Xq(e,t){var r,i,n,a,c,s,p,g,v,B,F,C,L=k_(t.margin,40/e.scaleFactor()),P=(r=Zq(e,t.startY))!==null&&r!==void 0?r:L.top,D;t.showFoot===!0?D="everyPage":t.showFoot===!1?D="never":D=(i=t.showFoot)!==null&&i!==void 0?i:"everyPage";var j;t.showHead===!0?j="everyPage":t.showHead===!1?j="never":j=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var q=(a=t.useCss)!==null&&a!==void 0?a:!1,H=t.theme||(q?"plain":"striped"),ee=!!t.horizontalPageBreak,G=(c=t.horizontalPageBreakRepeat)!==null&&c!==void 0?c:null;return{includeHiddenHtml:(s=t.includeHiddenHtml)!==null&&s!==void 0?s:!1,useCss:q,theme:H,startY:P,margin:L,pageBreak:(p=t.pageBreak)!==null&&p!==void 0?p:"auto",rowPageBreak:(g=t.rowPageBreak)!==null&&g!==void 0?g:"auto",tableWidth:(v=t.tableWidth)!==null&&v!==void 0?v:"auto",showHead:j,showFoot:D,tableLineWidth:(B=t.tableLineWidth)!==null&&B!==void 0?B:0,tableLineColor:(F=t.tableLineColor)!==null&&F!==void 0?F:200,horizontalPageBreak:ee,horizontalPageBreakRepeat:G,horizontalPageBreakBehaviour:(C=t.horizontalPageBreakBehaviour)!==null&&C!==void 0?C:"afterAllRows"}}function Zq(e,t){var r=e.getLastAutoTable(),i=e.scaleFactor(),n=e.pageNumber(),a=!1;if(r&&r.startPageNumber){var c=r.startPageNumber+r.pageNumber-1;a=c===n}return typeof t=="number"?t:(t==null||t===!1)&&a&&r?.finalY!=null?r.finalY+20/i:null}function Yq(e,t,r){var i=t.head||[],n=t.body||[],a=t.foot||[];if(t.html){var c=t.includeHiddenHtml;if(r){var s=XN(e,t.html,r,c,t.useCss)||{};i=s.head||i,n=s.body||i,a=s.foot||i}else console.error("Cannot parse html in non browser environment")}var p=t.columns||Jq(i,n,a);return{columns:p,head:i,body:n,foot:a}}function Jq(e,t,r){var i=e[0]||t[0]||r[0]||[],n=[];return Object.keys(i).filter(function(a){return a!=="_element"}).forEach(function(a){var c=1,s;Array.isArray(i)?s=i[parseInt(a)]:s=i[a],typeof s=="object"&&!Array.isArray(s)&&(c=s?.colSpan||1);for(var p=0;p<c;p++){var g=void 0;Array.isArray(i)?g=n.length:g=a+(p>0?"_".concat(p):"");var v={dataKey:g};n.push(v)}}),n}var F5=function(){function e(t,r,i){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=i,this.doc=t.getDocument()}return e}(),eK=function(e){VN(t,e);function t(r,i,n,a,c,s){var p=e.call(this,r,i,s)||this;return p.cell=n,p.row=a,p.column=c,p.section=a.section,p}return t}(F5),tK=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,i){return r+i.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,i){return r+i.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,i,n,a,c){for(var s=0,p=r;s<p.length;s++){var g=p[s],v=new eK(t,this,i,n,a,c),B=g(v)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],B)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var i=0,n=this.hooks.didDrawPage;i<n.length;i++){var a=n[i];a(new F5(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var i=0,n=this.hooks.willDrawPage;i<n.length;i++){var a=n[i];a(new F5(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,a){return n+a.wrappedWidth},0);return r}else{var i=this.settings.margin;return t-i.left-i.right}},e}(),YN=function(){function e(t,r,i,n,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof GN&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=i,this.cells=n,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(i,n){var a;return Math.max(i,((a=r.cells[n.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(i){var n=r.cells[i.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var i=this;return t.reduce(function(n,a){var c=i.cells[a.index];if(!c)return 0;var s=r.getLineHeight(c.styles.fontSize),p=c.padding("vertical"),g=p+s;return g>n?g:n},0)},e}(),JN=function(){function e(t,r,i){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=i,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var c=a!=null?""+a:"",s=/\r\n|\r|\n/g;this.text=c.split(s)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");i=this.x+n/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var i=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,a=i*n+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=k_(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),rK=function(){function e(t,r,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=i}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,i=0,n=t.allRows();i<n.length;i++){var a=n[i],c=a.cells[this.index];c&&typeof c.styles.cellWidth=="number"&&(r=Math.max(r,c.styles.cellWidth))}return r},e}();function iK(e,t){nK(e,t);var r=[],i=0;t.columns.forEach(function(a){var c=a.getMaxCustomCellWidth(t);c?a.width=c:(a.width=a.wrappedWidth,r.push(a)),i+=a.width});var n=t.getWidth(e.pageSize().width)-i;n&&(n=N5(r,n,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),n&&(n=N5(r,n,function(a){return a.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),aK(t),oK(t,e),sK(t)}function nK(e,t){var r=e.scaleFactor(),i=t.settings.horizontalPageBreak,n=WN(e,t);t.allRows().forEach(function(a){for(var c=0,s=t.columns;c<s.length;c++){var p=s[c],g=a.cells[p.index];if(g){var v=t.hooks.didParseCell;t.callCellHooks(e,v,g,a,p,null);var B=g.padding("horizontal");g.contentWidth=j2(g.text,g.styles,e)+B;var F=j2(g.text.join(" ").split(/[^\S\u00A0]+/),g.styles,e);if(g.minReadableWidth=F+g.padding("horizontal"),typeof g.styles.cellWidth=="number")g.minWidth=g.styles.cellWidth,g.wrappedWidth=g.styles.cellWidth;else if(g.styles.cellWidth==="wrap"||i===!0)g.contentWidth>n?(g.minWidth=n,g.wrappedWidth=n):(g.minWidth=g.contentWidth,g.wrappedWidth=g.contentWidth);else{var C=10/r;g.minWidth=g.styles.minCellWidth||C,g.wrappedWidth=g.contentWidth,g.minWidth>g.wrappedWidth&&(g.wrappedWidth=g.minWidth)}}}}),t.allRows().forEach(function(a){for(var c=0,s=t.columns;c<s.length;c++){var p=s[c],g=a.cells[p.index];if(g&&g.colSpan===1)p.wrappedWidth=Math.max(p.wrappedWidth,g.wrappedWidth),p.minWidth=Math.max(p.minWidth,g.minWidth),p.minReadableWidth=Math.max(p.minReadableWidth,g.minReadableWidth);else{var v=t.styles.columnStyles[p.dataKey]||t.styles.columnStyles[p.index]||{},B=v.cellWidth||v.minCellWidth;B&&typeof B=="number"&&(p.minWidth=B,p.wrappedWidth=B)}g&&(g.colSpan>1&&!p.minWidth&&(p.minWidth=g.minWidth),g.colSpan>1&&!p.wrappedWidth&&(p.wrappedWidth=g.minWidth))}})}function N5(e,t,r){for(var i=t,n=e.reduce(function(C,L){return C+L.wrappedWidth},0),a=0;a<e.length;a++){var c=e[a],s=c.wrappedWidth/n,p=i*s,g=c.width+p,v=r(c),B=g<v?v:g;t-=B-c.width,c.width=B}if(t=Math.round(t*1e10)/1e10,t){var F=e.filter(function(C){return t<0?C.width>r(C):!0});F.length&&(t=N5(F,t,r))}return t}function sK(e){for(var t={},r=1,i=e.allRows(),n=0;n<i.length;n++)for(var a=i[n],c=0,s=e.columns;c<s.length;c++){var p=s[c],g=t[p.index];if(r>1)r--,delete a.cells[p.index];else if(g)g.cell.height+=a.height,r=g.cell.colSpan,delete a.cells[p.index],g.left--,g.left<=1&&delete t[p.index];else{var v=a.cells[p.index];if(!v)continue;if(v.height=a.height,v.rowSpan>1){var B=i.length-n,F=v.rowSpan>B?B:v.rowSpan;t[p.index]={cell:v,left:F,row:a}}}}}function aK(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var i=t[r],n=null,a=0,c=0,s=0;s<e.columns.length;s++){var p=e.columns[s];if(c-=1,c>1&&e.columns[s+1])a+=p.width,delete i.cells[p.index];else if(n){var g=n;delete i.cells[p.index],n=null,g.width=p.width+a}else{var g=i.cells[p.index];if(!g)continue;if(c=g.colSpan,a=0,g.colSpan>1){n=g,a+=p.width;continue}g.width=p.width+a}}}function oK(e,t){for(var r={count:0,height:0},i=0,n=e.allRows();i<n.length;i++){for(var a=n[i],c=0,s=e.columns;c<s.length;c++){var p=s[c],g=a.cells[p.index];if(g){t.applyStyles(g.styles,!0);var v=g.width-g.padding("horizontal");if(g.styles.overflow==="linebreak")g.text=t.splitTextToSize(g.text,v+1/t.scaleFactor(),{fontSize:g.styles.fontSize});else if(g.styles.overflow==="ellipsize")g.text=CE(g.text,v,g.styles,t,"...");else if(g.styles.overflow==="hidden")g.text=CE(g.text,v,g.styles,t,"");else if(typeof g.styles.overflow=="function"){var B=g.styles.overflow(g.text,v);typeof B=="string"?g.text=[B]:g.text=B}g.contentHeight=g.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var F=g.contentHeight/g.rowSpan;g.rowSpan>1&&r.count*r.height<F*g.rowSpan?r={height:F,count:g.rowSpan}:r&&r.count>0&&r.height>F&&(F=r.height),F>a.height&&(a.height=F)}}r.count--}}function CE(e,t,r,i,n){return e.map(function(a){return lK(a,t,r,i,n)})}function lK(e,t,r,i,n){var a=1e4*i.scaleFactor();if(t=Math.ceil(t*a)/a,t>=j2(e,r,i))return e;for(;t<j2(e+n,r,i)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function e8(e,t){var r=new tg(e),i=cK(t,r.scaleFactor()),n=new tK(t,i);return iK(r,n),r.applyStyles(r.userStyles),n}function cK(e,t){var r=e.content,i=hK(r.columns);if(r.head.length===0){var n=BE(i,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=BE(i,"foot");n&&r.foot.push(n)}var a=e.settings.theme,c=e.styles;return{columns:i,head:ow("head",r.head,i,c,a,t),body:ow("body",r.body,i,c,a,t),foot:ow("foot",r.foot,i,c,a,t)}}function ow(e,t,r,i,n,a){var c={},s=t.map(function(p,g){for(var v=0,B={},F=0,C=0,L=0,P=r;L<P.length;L++){var D=P[L];if(c[D.index]==null||c[D.index].left===0)if(C===0){var j=void 0;Array.isArray(p)?j=p[D.index-F-v]:j=p[D.dataKey];var q={};typeof j=="object"&&!Array.isArray(j)&&(q=j?.styles||{});var H=AK(e,D,g,n,i,a,q),ee=new JN(j,H,e);B[D.dataKey]=ee,B[D.index]=ee,C=ee.colSpan-1,c[D.index]={left:ee.rowSpan-1,times:C}}else C--,F++;else c[D.index].left--,C=c[D.index].times,v++}return new YN(p,g,e,B)});return s}function BE(e,t){var r={};return e.forEach(function(i){if(i.raw!=null){var n=uK(t,i.raw);n!=null&&(r[i.dataKey]=n)}}),Object.keys(r).length>0?r:null}function uK(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function hK(e){return e.map(function(t,r){var i,n;return typeof t=="object"?n=(i=t.dataKey)!==null&&i!==void 0?i:r:n=r,new rK(n,t,r)})}function AK(e,t,r,i,n,a,c){var s=zq(i),p;e==="head"?p=n.headStyles:e==="body"?p=n.bodyStyles:e==="foot"&&(p=n.footStyles);var g=Af({},s.table,s[e],n.styles,p),v=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},B=e==="body"?v:{},F=e==="body"&&r%2===0?Af({},s.alternateRow,n.alternateRowStyles):{},C=Oq(a),L=Af({},C,g,F,B);return Af(L,c)}function dK(e,t,r){var i;r===void 0&&(r={});var n=WN(e,t),a=new Map,c=[],s=[],p=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?p=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(p=[t.settings.horizontalPageBreakRepeat]),p.forEach(function(F){var C=t.columns.find(function(L){return L.dataKey===F||L.index===F});C&&!a.has(C.index)&&(a.set(C.index,!0),c.push(C.index),s.push(t.columns[C.index]),n-=C.wrappedWidth)});for(var g=!0,v=(i=r?.start)!==null&&i!==void 0?i:0;v<t.columns.length;){if(a.has(v)){v++;continue}var B=t.columns[v].wrappedWidth;if(g||n>=B)g=!1,c.push(v),s.push(t.columns[v]),n-=B;else break;v++}return{colIndexes:c,columns:s,lastIndex:v-1}}function fK(e,t){for(var r=[],i=0;i<t.columns.length;i++){var n=dK(e,t,{start:i});n.columns.length&&(r.push(n),i=n.lastIndex)}return r}function t8(e,t){var r=t.settings,i=r.startY,n=r.margin,a={x:n.left,y:i},c=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),s=i+n.bottom+c;if(r.pageBreak==="avoid"){var p=t.body,g=p.reduce(function(F,C){return F+C.height},0);s+=g}var v=new tg(e);(r.pageBreak==="always"||r.startY!=null&&s>v.pageSize().height)&&(i8(v),a.y=n.top),t.callWillDrawPageHooks(v,a);var B=Af({},a);t.startPageNumber=v.pageNumber(),r.horizontalPageBreak?pK(v,t,B,a):(v.applyStyles(v.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(F){return _f(v,t,F,a,t.columns)}),v.applyStyles(v.userStyles),t.body.forEach(function(F,C){var L=C===t.body.length-1;U2(v,t,F,L,B,a,t.columns)}),v.applyStyles(v.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(F){return _f(v,t,F,a,t.columns)})),qN(v,t,B,a),t.callEndPageHooks(v,a),t.finalY=a.y,e.lastAutoTable=t,v.applyStyles(v.userStyles)}function pK(e,t,r,i){var n=fK(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(g,v){e.applyStyles(e.userStyles),v>0?Y1(e,t,r,i,g.columns,!0):SE(e,t,i,g.columns),mK(e,t,r,i,g.columns),lw(e,t,i,g.columns)});else for(var c=-1,s=n[0],p=function(){var g=c;if(s){e.applyStyles(e.userStyles);var v=s.columns;c>=0?Y1(e,t,r,i,v,!0):SE(e,t,i,v),g=EE(e,t,c+1,i,v),lw(e,t,i,v)}var B=g-c;n.slice(1).forEach(function(F){e.applyStyles(e.userStyles),Y1(e,t,r,i,F.columns,!0),EE(e,t,c+1,i,F.columns,B),lw(e,t,i,F.columns)}),c=g};c<t.body.length-1;)p()}function SE(e,t,r,i){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(a){return _f(e,t,a,r,i)})}function mK(e,t,r,i,n){e.applyStyles(e.userStyles),t.body.forEach(function(a,c){var s=c===t.body.length-1;U2(e,t,a,s,r,i,n)})}function EE(e,t,r,i,n,a){e.applyStyles(e.userStyles),a=a??t.body.length;var c=Math.min(r+a,t.body.length),s=-1;return t.body.slice(r,c).forEach(function(p,g){var v=r+g===t.body.length-1,B=r8(e,t,v,i);p.canEntireRowFit(B,n)&&(_f(e,t,p,i,n),s=r+g)}),s}function lw(e,t,r,i){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(a){return _f(e,t,a,r,i)})}function gK(e,t,r){var i=r.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),a=Math.floor((t-n)/i);return Math.max(0,a)}function vK(e,t,r,i){var n={};e.spansMultiplePages=!0,e.height=0;for(var a=0,c=0,s=r.columns;c<s.length;c++){var p=s[c],g=e.cells[p.index];if(g){Array.isArray(g.text)||(g.text=[g.text]);var v=new JN(g.raw,g.styles,g.section);v=Af(v,g),v.text=[];var B=gK(g,t,i);g.text.length>B&&(v.text=g.text.splice(B,g.text.length));var F=i.scaleFactor(),C=i.getLineHeightFactor();g.contentHeight=g.getContentHeight(F,C),g.contentHeight>=t&&(g.contentHeight=t,v.styles.minCellHeight-=t),g.contentHeight>e.height&&(e.height=g.contentHeight),v.contentHeight=v.getContentHeight(F,C),v.contentHeight>a&&(a=v.contentHeight),n[p.index]=v}}var L=new YN(e.raw,-1,e.section,n,!0);L.height=a;for(var P=0,D=r.columns;P<D.length;P++){var p=D[P],v=L.cells[p.index];v&&(v.height=L.height);var g=e.cells[p.index];g&&(g.height=e.height)}return L}function xK(e,t,r,i){var n=e.pageSize().height,a=i.settings.margin,c=a.top+a.bottom,s=n-c;t.section==="body"&&(s-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var p=t.getMinimumRowHeight(i.columns,e),g=p<r;if(p>s)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!g)return!1;var v=t.hasRowSpan(i.columns),B=t.getMaxCellHeight(i.columns)>s;return B?(v&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(v||i.settings.rowPageBreak==="avoid")}function U2(e,t,r,i,n,a,c){var s=r8(e,t,i,a);if(r.canEntireRowFit(s,c))_f(e,t,r,a,c);else if(xK(e,r,s,t)){var p=vK(r,s,t,e);_f(e,t,r,a,c),Y1(e,t,n,a,c),U2(e,t,p,i,n,a,c)}else Y1(e,t,n,a,c),U2(e,t,r,i,n,a,c)}function _f(e,t,r,i,n){i.x=t.settings.margin.left;for(var a=0,c=n;a<c.length;a++){var s=c[a],p=r.cells[s.index];if(!p){i.x+=s.width;continue}e.applyStyles(p.styles),p.x=i.x,p.y=i.y;var g=t.callCellHooks(e,t.hooks.willDrawCell,p,r,s,i);if(g===!1){i.x+=s.width;continue}yK(e,p,i);var v=p.getTextPos();HN(p.text,v.x,v.y,{halign:p.styles.halign,valign:p.styles.valign,maxWidth:Math.ceil(p.width-p.padding("left")-p.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,p,r,s,i),i.x+=s.width}i.y+=r.height}function yK(e,t,r){var i=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof i.lineWidth=="number"){var n=KN(i.lineWidth,i.fillColor);n&&e.rect(t.x,r.y,t.width,t.height,n)}else typeof i.lineWidth=="object"&&(i.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),_K(e,t,r,i.lineWidth))}function _K(e,t,r,i){var n,a,c,s;i.top&&(n=r.x,a=r.y,c=r.x+t.width,s=r.y,i.right&&(c+=.5*i.right),i.left&&(n-=.5*i.left),p(i.top,n,a,c,s)),i.bottom&&(n=r.x,a=r.y+t.height,c=r.x+t.width,s=r.y+t.height,i.right&&(c+=.5*i.right),i.left&&(n-=.5*i.left),p(i.bottom,n,a,c,s)),i.left&&(n=r.x,a=r.y,c=r.x,s=r.y+t.height,i.top&&(a-=.5*i.top),i.bottom&&(s+=.5*i.bottom),p(i.left,n,a,c,s)),i.right&&(n=r.x+t.width,a=r.y,c=r.x+t.width,s=r.y+t.height,i.top&&(a-=.5*i.top),i.bottom&&(s+=.5*i.bottom),p(i.right,n,a,c,s));function p(g,v,B,F,C){e.getDocument().setLineWidth(g),e.getDocument().line(v,B,F,C,"S")}}function r8(e,t,r,i){var n=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-i.y-n}function Y1(e,t,r,i,n,a){n===void 0&&(n=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(s){return _f(e,t,s,i,n)}),t.callEndPageHooks(e,i);var c=t.settings.margin;qN(e,t,r,i),i8(e),t.pageNumber++,i.x=c.left,i.y=c.top,r.y=c.top,t.callWillDrawPageHooks(e,i),t.settings.showHead==="everyPage"&&(t.head.forEach(function(s){return _f(e,t,s,i,n)}),e.applyStyles(e.userStyles))}function i8(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function bK(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=t[0],n=ZN(this,i),a=e8(this,n);return t8(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,i,n){HN(t,r,i,n,this)},e.API.autoTableSetDefaults=function(t){return tg.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){tg.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var i;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new tg(this),a=XN(n,t,window,r,!1),c=a.head,s=a.body,p=((i=c[0])===null||i===void 0?void 0:i.map(function(g){return g.content}))||[];return{columns:p,rows:s,data:s}}}var cw;function B1(e,t){var r=ZN(e,t),i=e8(e,r);t8(e,i)}try{if(typeof window<"u"&&window){var TE=window,kE=TE.jsPDF||((cw=TE.jspdf)===null||cw===void 0?void 0:cw.jsPDF);kE&&bK(kE)}}catch(e){console.error("Could not apply autoTable plugin",e)}var I5=function(e,t){return I5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},I5(e,t)};function XA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");I5(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var L5=function(){return L5=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},L5.apply(this,arguments)};function yu(e,t,r,i){function n(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function s(v){try{g(i.next(v))}catch(B){c(B)}}function p(v){try{g(i.throw(v))}catch(B){c(B)}}function g(v){v.done?a(v.value):n(v.value).then(s,p)}g((i=i.apply(e,[])).next())})}function Vc(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(g){return function(v){return p([g,v])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,n=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){r.label=g[1];break}if(g[0]===6&&r.label<a[1]){r.label=a[1],a=g;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(g);break}a[2]&&r.ops.pop(),r.trys.pop();continue}g=t.call(e,r)}catch(v){g=[6,v],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function xy(e,t,r){if(arguments.length===2)for(var i=0,n=t.length,a;i<n;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||t)}var bf=function(){function e(t,r,i,n){this.left=t,this.top=r,this.width=i,this.height=n}return e.prototype.add=function(t,r,i,n){return new e(this.left+t,this.top+r,this.width+i,this.height+n)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var i=Array.from(r).find(function(n){return n.width!==0});return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),F_=function(e,t){return bf.fromClientRect(e,t.getBoundingClientRect())},wK=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),n=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new bf(0,0,i,n)},N_=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var a=e.charCodeAt(r++);(a&64512)===56320?t.push(((n&1023)<<10)+(a&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},bo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],n=-1,a="";++n<r;){var c=e[n];c<=65535?i.push(c):(c-=65536,i.push((c>>10)+55296,c%1024+56320)),(n+1===r||i.length>16384)&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return a},FE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yy=0;yy<FE.length;yy++)CK[FE.charCodeAt(yy)]=yy;var NE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _y=0;_y<NE.length;_y++)P1[NE.charCodeAt(_y)]=_y;var BK=function(e){var t=e.length*.75,r=e.length,i,n=0,a,c,s,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),v=Array.isArray(g)?g:new Uint8Array(g);for(i=0;i<r;i+=4)a=P1[e.charCodeAt(i)],c=P1[e.charCodeAt(i+1)],s=P1[e.charCodeAt(i+2)],p=P1[e.charCodeAt(i+3)],v[n++]=a<<2|c>>4,v[n++]=(c&15)<<4|s>>2,v[n++]=(s&3)<<6|p&63;return g},SK=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},EK=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},x0=5,lC=11,uw=2,TK=lC-x0,n8=65536>>x0,kK=1<<x0,hw=kK-1,FK=1024>>x0,NK=n8+FK,IK=NK,LK=32,MK=IK+LK,PK=65536>>lC,RK=1<<TK,DK=RK-1,IE=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},jK=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},UK=function(e,t){var r=BK(e),i=Array.isArray(r)?EK(r):new Uint32Array(r),n=Array.isArray(r)?SK(r):new Uint16Array(r),a=24,c=IE(n,a/2,i[4]/2),s=i[5]===2?IE(n,(a+i[4])/2):jK(i,Math.ceil((a+i[4])/4));return new OK(i[0],i[1],i[2],i[3],c,s)},OK=function(){function e(t,r,i,n,a,c){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=n,this.index=a,this.data=c}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>x0],r=(r<<uw)+(t&hw),this.data[r];if(t<=65535)return r=this.index[n8+(t-55296>>x0)],r=(r<<uw)+(t&hw),this.data[r];if(t<this.highStart)return r=MK-PK+(t>>lC),r=this.index[r],r+=t>>x0&DK,r=this.index[r],r=(r<<uw)+(t&hw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),LE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var by=0;by<LE.length;by++)zK[LE.charCodeAt(by)]=by;var QK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ME=50,HK=1,s8=2,a8=3,VK=4,GK=5,PE=7,o8=8,RE=9,hp=10,M5=11,DE=12,P5=13,qK=14,R1=15,R5=16,wy=17,S1=18,KK=19,jE=20,D5=21,E1=22,Aw=23,Nm=24,Bh=25,D1=26,j1=27,Im=28,WK=29,o0=30,$K=31,Cy=32,By=33,j5=34,U5=35,O5=36,Sv=37,z5=38,m2=39,g2=40,dw=41,l8=42,XK=43,ZK=[9001,65288],c8="!",Un="",Sy="",Q5=UK(QK),ef=[o0,O5],H5=[HK,s8,a8,GK],u8=[hp,o8],UE=[j1,D1],YK=H5.concat(u8),OE=[z5,m2,g2,j5,U5],JK=[R1,P5],eW=function(e,t){t===void 0&&(t="strict");var r=[],i=[],n=[];return e.forEach(function(a,c){var s=Q5.get(a);if(s>ME?(n.push(!0),s-=ME):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return i.push(c),r.push(R5);if(s===VK||s===M5){if(c===0)return i.push(c),r.push(o0);var p=r[c-1];return YK.indexOf(p)===-1?(i.push(i[c-1]),r.push(p)):(i.push(c),r.push(o0))}if(i.push(c),s===$K)return r.push(t==="strict"?D5:Sv);if(s===l8||s===WK)return r.push(o0);if(s===XK)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(Sv):r.push(o0);r.push(s)}),[i,r,n]},fw=function(e,t,r,i){var n=i[r];if(Array.isArray(e)?e.indexOf(n)!==-1:e===n)for(var a=r;a<=i.length;){a++;var c=i[a];if(c===t)return!0;if(c!==hp)break}if(n===hp)for(var a=r;a>0;){a--;var s=i[a];if(Array.isArray(e)?e.indexOf(s)!==-1:e===s)for(var p=r;p<=i.length;){p++;var c=i[p];if(c===t)return!0;if(c!==hp)break}if(s!==hp)break}return!1},zE=function(e,t){for(var r=e;r>=0;){var i=t[r];if(i===hp)r--;else return i}return 0},tW=function(e,t,r,i,n){if(r[i]===0)return Un;var a=i-1;if(Array.isArray(n)&&n[a]===!0)return Un;var c=a-1,s=a+1,p=t[a],g=c>=0?t[c]:0,v=t[s];if(p===s8&&v===a8)return Un;if(H5.indexOf(p)!==-1)return c8;if(H5.indexOf(v)!==-1||u8.indexOf(v)!==-1)return Un;if(zE(a,t)===o8)return Sy;if(Q5.get(e[a])===M5||(p===Cy||p===By)&&Q5.get(e[s])===M5||p===PE||v===PE||p===RE||[hp,P5,R1].indexOf(p)===-1&&v===RE||[wy,S1,KK,Nm,Im].indexOf(v)!==-1||zE(a,t)===E1||fw(Aw,E1,a,t)||fw([wy,S1],D5,a,t)||fw(DE,DE,a,t))return Un;if(p===hp)return Sy;if(p===Aw||v===Aw)return Un;if(v===R5||p===R5)return Sy;if([P5,R1,D5].indexOf(v)!==-1||p===qK||g===O5&&JK.indexOf(p)!==-1||p===Im&&v===O5||v===jE||ef.indexOf(v)!==-1&&p===Bh||ef.indexOf(p)!==-1&&v===Bh||p===j1&&[Sv,Cy,By].indexOf(v)!==-1||[Sv,Cy,By].indexOf(p)!==-1&&v===D1||ef.indexOf(p)!==-1&&UE.indexOf(v)!==-1||UE.indexOf(p)!==-1&&ef.indexOf(v)!==-1||[j1,D1].indexOf(p)!==-1&&(v===Bh||[E1,R1].indexOf(v)!==-1&&t[s+1]===Bh)||[E1,R1].indexOf(p)!==-1&&v===Bh||p===Bh&&[Bh,Im,Nm].indexOf(v)!==-1)return Un;if([Bh,Im,Nm,wy,S1].indexOf(v)!==-1)for(var B=a;B>=0;){var F=t[B];if(F===Bh)return Un;if([Im,Nm].indexOf(F)!==-1)B--;else break}if([j1,D1].indexOf(v)!==-1)for(var B=[wy,S1].indexOf(p)!==-1?c:a;B>=0;){var F=t[B];if(F===Bh)return Un;if([Im,Nm].indexOf(F)!==-1)B--;else break}if(z5===p&&[z5,m2,j5,U5].indexOf(v)!==-1||[m2,j5].indexOf(p)!==-1&&[m2,g2].indexOf(v)!==-1||[g2,U5].indexOf(p)!==-1&&v===g2||OE.indexOf(p)!==-1&&[jE,D1].indexOf(v)!==-1||OE.indexOf(v)!==-1&&p===j1||ef.indexOf(p)!==-1&&ef.indexOf(v)!==-1||p===Nm&&ef.indexOf(v)!==-1||ef.concat(Bh).indexOf(p)!==-1&&v===E1&&ZK.indexOf(e[s])===-1||ef.concat(Bh).indexOf(v)!==-1&&p===S1)return Un;if(p===dw&&v===dw){for(var C=r[a],L=1;C>0&&(C--,t[C]===dw);)L++;if(L%2!==0)return Un}return p===Cy&&v===By?Un:Sy},rW=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=eW(e,t.lineBreak),i=r[0],n=r[1],a=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(s){return[Bh,o0,l8].indexOf(s)!==-1?Sv:s}));var c=t.wordBreak==="keep-all"?a.map(function(s,p){return s&&e[p]>=19968&&e[p]<=40959}):void 0;return[i,n,c]},iW=function(){function e(t,r,i,n){this.codePoints=t,this.required=r===c8,this.start=i,this.end=n}return e.prototype.slice=function(){return bo.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),nW=function(e,t){var r=N_(e),i=rW(r,t),n=i[0],a=i[1],c=i[2],s=r.length,p=0,g=0;return{next:function(){if(g>=s)return{done:!0,value:null};for(var v=Un;g<s&&(v=tW(r,a,n,++g,c))===Un;);if(v!==Un||g===s){var B=new iW(r,v,p,g);return p=g,{value:B,done:!1}}return{done:!0,value:null}}}},sW=1,aW=2,$v=4,QE=8,O2=10,HE=47,J1=92,oW=9,lW=32,Ey=34,T1=61,cW=35,uW=36,hW=37,Ty=39,ky=40,k1=41,AW=95,th=45,dW=33,fW=60,pW=62,mW=64,gW=91,vW=93,xW=61,yW=123,Fy=63,_W=125,VE=124,bW=126,wW=128,GE=65533,pw=42,A0=43,CW=44,BW=58,SW=59,Ev=46,EW=0,TW=8,kW=11,FW=14,NW=31,IW=127,md=-1,h8=48,A8=97,d8=101,LW=102,MW=117,PW=122,f8=65,p8=69,m8=70,RW=85,DW=90,qc=function(e){return e>=h8&&e<=57},jW=function(e){return e>=55296&&e<=57343},Lm=function(e){return qc(e)||e>=f8&&e<=m8||e>=A8&&e<=LW},UW=function(e){return e>=A8&&e<=PW},OW=function(e){return e>=f8&&e<=DW},zW=function(e){return UW(e)||OW(e)},QW=function(e){return e>=wW},Ny=function(e){return e===O2||e===oW||e===lW},z2=function(e){return zW(e)||QW(e)||e===AW},qE=function(e){return z2(e)||qc(e)||e===th},HW=function(e){return e>=EW&&e<=TW||e===kW||e>=FW&&e<=NW||e===IW},np=function(e,t){return e!==J1?!1:t!==O2},Iy=function(e,t,r){return e===th?z2(t)||np(t,r):z2(e)?!0:!!(e===J1&&np(e,t))},mw=function(e,t,r){return e===A0||e===th?qc(t)?!0:t===Ev&&qc(r):qc(e===Ev?t:e)},VW=function(e){var t=0,r=1;(e[t]===A0||e[t]===th)&&(e[t]===th&&(r=-1),t++);for(var i=[];qc(e[t]);)i.push(e[t++]);var n=i.length?parseInt(bo.apply(void 0,i),10):0;e[t]===Ev&&t++;for(var a=[];qc(e[t]);)a.push(e[t++]);var c=a.length,s=c?parseInt(bo.apply(void 0,a),10):0;(e[t]===p8||e[t]===d8)&&t++;var p=1;(e[t]===A0||e[t]===th)&&(e[t]===th&&(p=-1),t++);for(var g=[];qc(e[t]);)g.push(e[t++]);var v=g.length?parseInt(bo.apply(void 0,g),10):0;return r*(n+s*Math.pow(10,-c))*Math.pow(10,p*v)},GW={type:2},qW={type:3},KW={type:4},WW={type:13},$W={type:8},XW={type:21},ZW={type:9},YW={type:10},JW={type:11},e$={type:12},t$={type:14},Ly={type:23},r$={type:1},i$={type:25},n$={type:24},s$={type:26},a$={type:27},o$={type:28},l$={type:29},c$={type:31},V5={type:32},g8=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(N_(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==V5;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Ey:return this.consumeStringToken(Ey);case cW:var r=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(qE(r)||np(i,n)){var a=Iy(r,i,n)?aW:sW,c=this.consumeName();return{type:5,value:c,flags:a}}break;case uW:if(this.peekCodePoint(0)===T1)return this.consumeCodePoint(),WW;break;case Ty:return this.consumeStringToken(Ty);case ky:return GW;case k1:return qW;case pw:if(this.peekCodePoint(0)===T1)return this.consumeCodePoint(),t$;break;case A0:if(mw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case CW:return KW;case th:var s=t,p=this.peekCodePoint(0),g=this.peekCodePoint(1);if(mw(s,p,g))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Iy(s,p,g))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(p===th&&g===pW)return this.consumeCodePoint(),this.consumeCodePoint(),n$;break;case Ev:if(mw(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case HE:if(this.peekCodePoint(0)===pw)for(this.consumeCodePoint();;){var v=this.consumeCodePoint();if(v===pw&&(v=this.consumeCodePoint(),v===HE))return this.consumeToken();if(v===md)return this.consumeToken()}break;case BW:return s$;case SW:return a$;case fW:if(this.peekCodePoint(0)===dW&&this.peekCodePoint(1)===th&&this.peekCodePoint(2)===th)return this.consumeCodePoint(),this.consumeCodePoint(),i$;break;case mW:var B=this.peekCodePoint(0),F=this.peekCodePoint(1),C=this.peekCodePoint(2);if(Iy(B,F,C)){var c=this.consumeName();return{type:7,value:c}}break;case gW:return o$;case J1:if(np(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case vW:return l$;case xW:if(this.peekCodePoint(0)===T1)return this.consumeCodePoint(),$W;break;case yW:return JW;case _W:return e$;case MW:case RW:var L=this.peekCodePoint(0),P=this.peekCodePoint(1);return L===A0&&(Lm(P)||P===Fy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case VE:if(this.peekCodePoint(0)===T1)return this.consumeCodePoint(),ZW;if(this.peekCodePoint(0)===VE)return this.consumeCodePoint(),XW;break;case bW:if(this.peekCodePoint(0)===T1)return this.consumeCodePoint(),YW;break;case md:return V5}return Ny(t)?(this.consumeWhiteSpace(),c$):qc(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):z2(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:bo(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Lm(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var i=!1;r===Fy&&t.length<6;)t.push(r),r=this.consumeCodePoint(),i=!0;if(i){var n=parseInt(bo.apply(void 0,t.map(function(p){return p===Fy?h8:p})),16),a=parseInt(bo.apply(void 0,t.map(function(p){return p===Fy?m8:p})),16);return{type:30,start:n,end:a}}var c=parseInt(bo.apply(void 0,t),16);if(this.peekCodePoint(0)===th&&Lm(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var s=[];Lm(r)&&s.length<6;)s.push(r),r=this.consumeCodePoint();var a=parseInt(bo.apply(void 0,s),16);return{type:30,start:c,end:a}}else return{type:30,start:c,end:c}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===ky?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ky?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===md)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Ty||r===Ey){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===md||this.peekCodePoint(0)===k1)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),Ly)}for(;;){var n=this.consumeCodePoint();if(n===md||n===k1)return{type:22,value:bo.apply(void 0,t)};if(Ny(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===md||this.peekCodePoint(0)===k1?(this.consumeCodePoint(),{type:22,value:bo.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Ly);if(n===Ey||n===Ty||n===ky||HW(n))return this.consumeBadUrlRemnants(),Ly;if(n===J1)if(np(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ly;else t.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;Ny(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===k1||t===md)return;np(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,i="";t>0;){var n=Math.min(r,t);i+=bo.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),i},e.prototype.consumeStringToken=function(t){var r="",i=0;do{var n=this._value[i];if(n===md||n===void 0||n===t)return r+=this.consumeStringSlice(i),{type:0,value:r};if(n===O2)return this._value.splice(0,i),r$;if(n===J1){var a=this._value[i+1];a!==md&&a!==void 0&&(a===O2?(r+=this.consumeStringSlice(i),i=-1,this._value.shift()):np(n,a)&&(r+=this.consumeStringSlice(i),r+=bo(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=$v,i=this.peekCodePoint(0);for((i===A0||i===th)&&t.push(this.consumeCodePoint());qc(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(i===Ev&&qc(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=QE;qc(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((i===p8||i===d8)&&((n===A0||n===th)&&qc(a)||qc(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=QE;qc(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[VW(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],i=t[1],n=this.peekCodePoint(0),a=this.peekCodePoint(1),c=this.peekCodePoint(2);if(Iy(n,a,c)){var s=this.consumeName();return{type:15,number:r,flags:i,unit:s}}return n===hW?(this.consumeCodePoint(),{type:16,number:r,flags:i}):{type:17,number:r,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Lm(t)){for(var r=bo(t);Lm(this.peekCodePoint(0))&&r.length<6;)r+=bo(this.consumeCodePoint());Ny(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(r,16);return i===0||jW(i)||i>1114111?GE:i}return t===md?GE:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(qE(r))t+=bo(r);else if(np(r,this.peekCodePoint(0)))t+=bo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),v8=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new g8;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},i=this.consumeToken();;){if(i.type===32||h$(i,t))return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?V5:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),Xv=function(e){return e.type===15},bg=function(e){return e.type===17},zs=function(e){return e.type===20},u$=function(e){return e.type===0},G5=function(e,t){return zs(e)&&e.value===t},x8=function(e){return e.type!==31},cg=function(e){return e.type!==31&&e.type!==4},Td=function(e){var t=[],r=[];return e.forEach(function(i){if(i.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}i.type!==31&&r.push(i)}),r.length&&t.push(r),t},h$=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Cp=function(e){return e.type===17||e.type===15},Go=function(e){return e.type===16||Cp(e)},y8=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},pc={type:17,number:0,flags:$v},cC={type:16,number:50,flags:$v},Ap={type:16,number:100,flags:$v},U1=function(e,t,r){var i=e[0],n=e[1];return[ua(i,t),ua(typeof n<"u"?n:i,r)]},ua=function(e,t){if(e.type===16)return e.number/100*t;if(Xv(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},_8="deg",b8="grad",w8="rad",C8="turn",I_={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case _8:return Math.PI*t.number/180;case b8:return Math.PI/200*t.number;case w8:return t.number;case C8:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},B8=function(e){return e.type===15&&(e.unit===_8||e.unit===b8||e.unit===w8||e.unit===C8)},S8=function(e){var t=e.filter(zs).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[pc,pc];case"to top":case"bottom":return iA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[pc,Ap];case"to right":case"left":return iA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ap,Ap];case"to bottom":case"top":return iA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ap,pc];case"to left":case"right":return iA(270)}return 0},iA=function(e){return Math.PI*e/180},xp={name:"color",parse:function(e,t){if(t.type===18){var r=A$[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var i=t.value.substring(0,1),n=t.value.substring(1,2),a=t.value.substring(2,3);return dp(parseInt(i+i,16),parseInt(n+n,16),parseInt(a+a,16),1)}if(t.value.length===4){var i=t.value.substring(0,1),n=t.value.substring(1,2),a=t.value.substring(2,3),c=t.value.substring(3,4);return dp(parseInt(i+i,16),parseInt(n+n,16),parseInt(a+a,16),parseInt(c+c,16)/255)}if(t.value.length===6){var i=t.value.substring(0,2),n=t.value.substring(2,4),a=t.value.substring(4,6);return dp(parseInt(i,16),parseInt(n,16),parseInt(a,16),1)}if(t.value.length===8){var i=t.value.substring(0,2),n=t.value.substring(2,4),a=t.value.substring(4,6),c=t.value.substring(6,8);return dp(parseInt(i,16),parseInt(n,16),parseInt(a,16),parseInt(c,16)/255)}}if(t.type===20){var s=pf[t.value.toUpperCase()];if(typeof s<"u")return s}return pf.TRANSPARENT}},yp=function(e){return(255&e)===0},Hl=function(e){var t=255&e,r=255&e>>8,i=255&e>>16,n=255&e>>24;return t<255?"rgba("+n+","+i+","+r+","+t/255+")":"rgb("+n+","+i+","+r+")"},dp=function(e,t,r,i){return(e<<24|t<<16|r<<8|Math.round(i*255)<<0)>>>0},KE=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},WE=function(e,t){var r=t.filter(cg);if(r.length===3){var i=r.map(KE),n=i[0],a=i[1],c=i[2];return dp(n,a,c,1)}if(r.length===4){var s=r.map(KE),n=s[0],a=s[1],c=s[2],p=s[3];return dp(n,a,c,p)}return 0};function gw(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var $E=function(e,t){var r=t.filter(cg),i=r[0],n=r[1],a=r[2],c=r[3],s=(i.type===17?iA(i.number):I_.parse(e,i))/(Math.PI*2),p=Go(n)?n.number/100:0,g=Go(a)?a.number/100:0,v=typeof c<"u"&&Go(c)?ua(c,1):1;if(p===0)return dp(g*255,g*255,g*255,1);var B=g<=.5?g*(p+1):g+p-g*p,F=g*2-B,C=gw(F,B,s+1/3),L=gw(F,B,s),P=gw(F,B,s-1/3);return dp(C*255,L*255,P*255,v)},A$={hsl:$E,hsla:$E,rgb:WE,rgba:WE},ev=function(e,t){return xp.parse(e,v8.create(t).parseComponentValue())},pf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},d$={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(zs(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},f$={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},L_=function(e,t){var r=xp.parse(e,t[0]),i=t[1];return i&&Go(i)?{color:r,stop:i}:{color:r,stop:null}},XE=function(e,t){var r=e[0],i=e[e.length-1];r.stop===null&&(r.stop=pc),i.stop===null&&(i.stop=Ap);for(var n=[],a=0,c=0;c<e.length;c++){var s=e[c].stop;if(s!==null){var p=ua(s,t);p>a?n.push(p):n.push(a),a=p}else n.push(null)}for(var g=null,c=0;c<n.length;c++){var v=n[c];if(v===null)g===null&&(g=c);else if(g!==null){for(var B=c-g,F=n[g-1],C=(v-F)/(B+1),L=1;L<=B;L++)n[g+L-1]=C*L;g=null}}return e.map(function(P,D){var j=P.color;return{color:j,stop:Math.max(Math.min(1,n[D]/t),0)}})},p$=function(e,t,r){var i=t/2,n=r/2,a=ua(e[0],t)-i,c=n-ua(e[1],r);return(Math.atan2(c,a)+Math.PI*2)%(Math.PI*2)},m$=function(e,t,r){var i=typeof e=="number"?e:p$(e,t,r),n=Math.abs(t*Math.sin(i))+Math.abs(r*Math.cos(i)),a=t/2,c=r/2,s=n/2,p=Math.sin(i-Math.PI/2)*s,g=Math.cos(i-Math.PI/2)*s;return[n,a-g,a+g,c-p,c+p]},DA=function(e,t){return Math.sqrt(e*e+t*t)},ZE=function(e,t,r,i,n){var a=[[0,0],[0,t],[e,0],[e,t]];return a.reduce(function(c,s){var p=s[0],g=s[1],v=DA(r-p,i-g);return(n?v<c.optimumDistance:v>c.optimumDistance)?{optimumCorner:s,optimumDistance:v}:c},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},g$=function(e,t,r,i,n){var a=0,c=0;switch(e.size){case 0:e.shape===0?a=c=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-n)):e.shape===1&&(a=Math.min(Math.abs(t),Math.abs(t-i)),c=Math.min(Math.abs(r),Math.abs(r-n)));break;case 2:if(e.shape===0)a=c=Math.min(DA(t,r),DA(t,r-n),DA(t-i,r),DA(t-i,r-n));else if(e.shape===1){var s=Math.min(Math.abs(r),Math.abs(r-n))/Math.min(Math.abs(t),Math.abs(t-i)),p=ZE(i,n,t,r,!0),g=p[0],v=p[1];a=DA(g-t,(v-r)/s),c=s*a}break;case 1:e.shape===0?a=c=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-n)):e.shape===1&&(a=Math.max(Math.abs(t),Math.abs(t-i)),c=Math.max(Math.abs(r),Math.abs(r-n)));break;case 3:if(e.shape===0)a=c=Math.max(DA(t,r),DA(t,r-n),DA(t-i,r),DA(t-i,r-n));else if(e.shape===1){var s=Math.max(Math.abs(r),Math.abs(r-n))/Math.max(Math.abs(t),Math.abs(t-i)),B=ZE(i,n,t,r,!1),g=B[0],v=B[1];a=DA(g-t,(v-r)/s),c=s*a}break}return Array.isArray(e.size)&&(a=ua(e.size[0],i),c=e.size.length===2?ua(e.size[1],n):a),[a,c]},v$=function(e,t){var r=iA(180),i=[];return Td(t).forEach(function(n,a){if(a===0){var c=n[0];if(c.type===20&&c.value==="to"){r=S8(n);return}else if(B8(c)){r=I_.parse(e,c);return}}var s=L_(e,n);i.push(s)}),{angle:r,stops:i,type:1}},My=function(e,t){var r=iA(180),i=[];return Td(t).forEach(function(n,a){if(a===0){var c=n[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){r=S8(n);return}else if(B8(c)){r=(I_.parse(e,c)+iA(270))%iA(360);return}}var s=L_(e,n);i.push(s)}),{angle:r,stops:i,type:1}},x$=function(e,t){var r=iA(180),i=[],n=1,a=0,c=3,s=[];return Td(t).forEach(function(p,g){var v=p[0];if(g===0){if(zs(v)&&v.value==="linear"){n=1;return}else if(zs(v)&&v.value==="radial"){n=2;return}}if(v.type===18){if(v.name==="from"){var B=xp.parse(e,v.values[0]);i.push({stop:pc,color:B})}else if(v.name==="to"){var B=xp.parse(e,v.values[0]);i.push({stop:Ap,color:B})}else if(v.name==="color-stop"){var F=v.values.filter(cg);if(F.length===2){var B=xp.parse(e,F[1]),C=F[0];bg(C)&&i.push({stop:{type:16,number:C.number*100,flags:C.flags},color:B})}}}}),n===1?{angle:(r+iA(180))%iA(360),stops:i,type:n}:{size:c,shape:a,stops:i,position:s,type:n}},E8="closest-side",T8="farthest-side",k8="closest-corner",F8="farthest-corner",N8="circle",I8="ellipse",L8="cover",M8="contain",y$=function(e,t){var r=0,i=3,n=[],a=[];return Td(t).forEach(function(c,s){var p=!0;if(s===0){var g=!1;p=c.reduce(function(B,F){if(g)if(zs(F))switch(F.value){case"center":return a.push(cC),B;case"top":case"left":return a.push(pc),B;case"right":case"bottom":return a.push(Ap),B}else(Go(F)||Cp(F))&&a.push(F);else if(zs(F))switch(F.value){case N8:return r=0,!1;case I8:return r=1,!1;case"at":return g=!0,!1;case E8:return i=0,!1;case L8:case T8:return i=1,!1;case M8:case k8:return i=2,!1;case F8:return i=3,!1}else if(Cp(F)||Go(F))return Array.isArray(i)||(i=[]),i.push(F),!1;return B},p)}if(p){var v=L_(e,c);n.push(v)}}),{size:i,shape:r,stops:n,position:a,type:2}},Py=function(e,t){var r=0,i=3,n=[],a=[];return Td(t).forEach(function(c,s){var p=!0;if(s===0?p=c.reduce(function(v,B){if(zs(B))switch(B.value){case"center":return a.push(cC),!1;case"top":case"left":return a.push(pc),!1;case"right":case"bottom":return a.push(Ap),!1}else if(Go(B)||Cp(B))return a.push(B),!1;return v},p):s===1&&(p=c.reduce(function(v,B){if(zs(B))switch(B.value){case N8:return r=0,!1;case I8:return r=1,!1;case M8:case E8:return i=0,!1;case T8:return i=1,!1;case k8:return i=2,!1;case L8:case F8:return i=3,!1}else if(Cp(B)||Go(B))return Array.isArray(i)||(i=[]),i.push(B),!1;return v},p)),p){var g=L_(e,c);n.push(g)}}),{size:i,shape:r,stops:n,position:a,type:2}},_$=function(e){return e.type===1},b$=function(e){return e.type===2},uC={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var i=P8[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function w$(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!P8[e.name])}var P8={"linear-gradient":v$,"-moz-linear-gradient":My,"-ms-linear-gradient":My,"-o-linear-gradient":My,"-webkit-linear-gradient":My,"radial-gradient":y$,"-moz-radial-gradient":Py,"-ms-radial-gradient":Py,"-o-radial-gradient":Py,"-webkit-radial-gradient":Py,"-webkit-gradient":x$},C$={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(i){return cg(i)&&w$(i)}).map(function(i){return uC.parse(e,i)})}},B$={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(zs(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},S$={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Td(t).map(function(r){return r.filter(Go)}).map(y8)}},E$={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Td(t).map(function(r){return r.filter(zs).map(function(i){return i.value}).join(" ")}).map(T$)}},T$=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},rg;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(rg||(rg={}));var k$={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Td(t).map(function(r){return r.filter(F$)})}},F$=function(e){return zs(e)||Go(e)},M_=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},N$=M_("top"),I$=M_("right"),L$=M_("bottom"),M$=M_("left"),P_=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return y8(r.filter(Go))}}},P$=P_("top-left"),R$=P_("top-right"),D$=P_("bottom-right"),j$=P_("bottom-left"),R_=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},U$=R_("top"),O$=R_("right"),z$=R_("bottom"),Q$=R_("left"),D_=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Xv(r)?r.number:0}}},H$=D_("top"),V$=D_("right"),G$=D_("bottom"),q$=D_("left"),K$={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},W$={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},$$={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(zs).reduce(function(r,i){return r|X$(i.value)},0)}},X$=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Z$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Y$={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},Q2;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Q2||(Q2={}));var J$={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return Q2.STRICT;case"normal":default:return Q2.NORMAL}}},eX={name:"line-height",initialValue:"normal",prefix:!1,type:4},YE=function(e,t){return zs(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Go(e)?ua(e,t):t},tX={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:uC.parse(e,t)}},rX={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},q5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},j_=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},iX=j_("top"),nX=j_("right"),sX=j_("bottom"),aX=j_("left"),oX={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(zs).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},lX={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},U_=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},cX=U_("top"),uX=U_("right"),hX=U_("bottom"),AX=U_("left"),dX={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},fX={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},pX={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&G5(t[0],"none")?[]:Td(t).map(function(r){for(var i={color:pf.TRANSPARENT,offsetX:pc,offsetY:pc,blur:pc},n=0,a=0;a<r.length;a++){var c=r[a];Cp(c)?(n===0?i.offsetX=c:n===1?i.offsetY=c:i.blur=c,n++):i.color=xp.parse(e,c)}return i})}},mX={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},gX={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=yX[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},vX=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},xX=function(e){var t=e.filter(function(p){return p.type===17}).map(function(p){return p.number}),r=t[0],i=t[1];t[2],t[3];var n=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var c=t[12],s=t[13];return t[14],t[15],t.length===16?[r,i,n,a,c,s]:null},yX={matrix:vX,matrix3d:xX},JE={type:16,number:50,flags:$v},_X=[JE,JE],bX={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Go);return r.length!==2?_X:[r[0],r[1]]}},wX={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},tv;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(tv||(tv={}));var CX={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return tv.BREAK_ALL;case"keep-all":return tv.KEEP_ALL;case"normal":default:return tv.NORMAL}}},BX={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(bg(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},R8={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},SX={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return bg(t)?t.number:1}},EX={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},TX={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(zs).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},kX={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],i=[];return t.forEach(function(n){switch(n.type){case 20:case 0:r.push(n.value);break;case 17:r.push(n.number.toString());break;case 4:i.push(r.join(" ")),r.length=0;break}}),r.length&&i.push(r.join(" ")),i.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},FX={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},NX={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(bg(t))return t.number;if(zs(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},IX={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(zs).map(function(r){return r.value})}},LX={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pl=function(e,t){return(e&t)!==0},MX={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},PX={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var i=[],n=t.filter(x8),a=0;a<n.length;a++){var c=n[a],s=n[a+1];if(c.type===20){var p=s&&bg(s)?s.number:1;i.push({counter:c.value,increment:p})}}return i}},RX={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],i=t.filter(x8),n=0;n<i.length;n++){var a=i[n],c=i[n+1];if(zs(a)&&a.value!=="none"){var s=c&&bg(c)?c.number:0;r.push({counter:a.value,reset:s})}}return r}},DX={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Xv).map(function(r){return R8.parse(e,r)})}},jX={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var i=[],n=t.filter(u$);if(n.length%2!==0)return null;for(var a=0;a<n.length;a+=2){var c=n[a].value,s=n[a+1].value;i.push({open:c,close:s})}return i}},eT=function(e,t,r){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?r?i.open:i.close:""},UX={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&G5(t[0],"none")?[]:Td(t).map(function(r){for(var i={color:255,offsetX:pc,offsetY:pc,blur:pc,spread:pc,inset:!1},n=0,a=0;a<r.length;a++){var c=r[a];G5(c,"inset")?i.inset=!0:Cp(c)?(n===0?i.offsetX=c:n===1?i.offsetY=c:n===2?i.blur=c:i.spread=c,n++):i.color=xp.parse(e,c)}return i})}},OX={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],i=[];return t.filter(zs).forEach(function(n){switch(n.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),r.forEach(function(n){i.indexOf(n)===-1&&i.push(n)}),i}},zX={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},QX={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Xv(t)?t.number:0}},HX=function(){function e(t,r){var i,n;this.animationDuration=li(t,DX,r.animationDuration),this.backgroundClip=li(t,d$,r.backgroundClip),this.backgroundColor=li(t,f$,r.backgroundColor),this.backgroundImage=li(t,C$,r.backgroundImage),this.backgroundOrigin=li(t,B$,r.backgroundOrigin),this.backgroundPosition=li(t,S$,r.backgroundPosition),this.backgroundRepeat=li(t,E$,r.backgroundRepeat),this.backgroundSize=li(t,k$,r.backgroundSize),this.borderTopColor=li(t,N$,r.borderTopColor),this.borderRightColor=li(t,I$,r.borderRightColor),this.borderBottomColor=li(t,L$,r.borderBottomColor),this.borderLeftColor=li(t,M$,r.borderLeftColor),this.borderTopLeftRadius=li(t,P$,r.borderTopLeftRadius),this.borderTopRightRadius=li(t,R$,r.borderTopRightRadius),this.borderBottomRightRadius=li(t,D$,r.borderBottomRightRadius),this.borderBottomLeftRadius=li(t,j$,r.borderBottomLeftRadius),this.borderTopStyle=li(t,U$,r.borderTopStyle),this.borderRightStyle=li(t,O$,r.borderRightStyle),this.borderBottomStyle=li(t,z$,r.borderBottomStyle),this.borderLeftStyle=li(t,Q$,r.borderLeftStyle),this.borderTopWidth=li(t,H$,r.borderTopWidth),this.borderRightWidth=li(t,V$,r.borderRightWidth),this.borderBottomWidth=li(t,G$,r.borderBottomWidth),this.borderLeftWidth=li(t,q$,r.borderLeftWidth),this.boxShadow=li(t,UX,r.boxShadow),this.color=li(t,K$,r.color),this.direction=li(t,W$,r.direction),this.display=li(t,$$,r.display),this.float=li(t,Z$,r.cssFloat),this.fontFamily=li(t,kX,r.fontFamily),this.fontSize=li(t,FX,r.fontSize),this.fontStyle=li(t,LX,r.fontStyle),this.fontVariant=li(t,IX,r.fontVariant),this.fontWeight=li(t,NX,r.fontWeight),this.letterSpacing=li(t,Y$,r.letterSpacing),this.lineBreak=li(t,J$,r.lineBreak),this.lineHeight=li(t,eX,r.lineHeight),this.listStyleImage=li(t,tX,r.listStyleImage),this.listStylePosition=li(t,rX,r.listStylePosition),this.listStyleType=li(t,q5,r.listStyleType),this.marginTop=li(t,iX,r.marginTop),this.marginRight=li(t,nX,r.marginRight),this.marginBottom=li(t,sX,r.marginBottom),this.marginLeft=li(t,aX,r.marginLeft),this.opacity=li(t,SX,r.opacity);var a=li(t,oX,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=li(t,lX,r.overflowWrap),this.paddingTop=li(t,cX,r.paddingTop),this.paddingRight=li(t,uX,r.paddingRight),this.paddingBottom=li(t,hX,r.paddingBottom),this.paddingLeft=li(t,AX,r.paddingLeft),this.paintOrder=li(t,OX,r.paintOrder),this.position=li(t,fX,r.position),this.textAlign=li(t,dX,r.textAlign),this.textDecorationColor=li(t,EX,(i=r.textDecorationColor)!==null&&i!==void 0?i:r.color),this.textDecorationLine=li(t,TX,(n=r.textDecorationLine)!==null&&n!==void 0?n:r.textDecoration),this.textShadow=li(t,pX,r.textShadow),this.textTransform=li(t,mX,r.textTransform),this.transform=li(t,gX,r.transform),this.transformOrigin=li(t,bX,r.transformOrigin),this.visibility=li(t,wX,r.visibility),this.webkitTextStrokeColor=li(t,zX,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=li(t,QX,r.webkitTextStrokeWidth),this.wordBreak=li(t,CX,r.wordBreak),this.zIndex=li(t,BX,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return yp(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return pl(this.display,4)||pl(this.display,33554432)||pl(this.display,268435456)||pl(this.display,536870912)||pl(this.display,67108864)||pl(this.display,134217728)},e}(),VX=function(){function e(t,r){this.content=li(t,MX,r.content),this.quotes=li(t,jX,r.quotes)}return e}(),tT=function(){function e(t,r){this.counterIncrement=li(t,PX,r.counterIncrement),this.counterReset=li(t,RX,r.counterReset)}return e}(),li=function(e,t,r){var i=new g8,n=r!==null&&typeof r<"u"?r.toString():t.initialValue;i.write(n);var a=new v8(i.read());switch(t.type){case 2:var c=a.parseComponentValue();return t.parse(e,zs(c)?c.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return I_.parse(e,a.parseComponentValue());case"color":return xp.parse(e,a.parseComponentValue());case"image":return uC.parse(e,a.parseComponentValue());case"length":var s=a.parseComponentValue();return Cp(s)?s:pc;case"length-percentage":var p=a.parseComponentValue();return Go(p)?p:pc;case"time":return R8.parse(e,a.parseComponentValue())}break}},GX="data-html2canvas-debug",qX=function(e){var t=e.getAttribute(GX);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},K5=function(e,t){var r=qX(e);return r===1||t===r},kd=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,K5(r,3))debugger;this.styles=new HX(t,window.getComputedStyle(r,null)),X5(r)&&(this.styles.animationDuration.some(function(i){return i>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=F_(this.context,r),K5(r,4)&&(this.flags|=16)}return e}(),KX="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",rT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ry=0;Ry<rT.length;Ry++)O1[rT.charCodeAt(Ry)]=Ry;var WX=function(e){var t=e.length*.75,r=e.length,i,n=0,a,c,s,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),v=Array.isArray(g)?g:new Uint8Array(g);for(i=0;i<r;i+=4)a=O1[e.charCodeAt(i)],c=O1[e.charCodeAt(i+1)],s=O1[e.charCodeAt(i+2)],p=O1[e.charCodeAt(i+3)],v[n++]=a<<2|c>>4,v[n++]=(c&15)<<4|s>>2,v[n++]=(s&3)<<6|p&63;return g},$X=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},XX=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},y0=5,hC=11,vw=2,ZX=hC-y0,D8=65536>>y0,YX=1<<y0,xw=YX-1,JX=1024>>y0,eZ=D8+JX,tZ=eZ,rZ=32,iZ=tZ+rZ,nZ=65536>>hC,sZ=1<<ZX,aZ=sZ-1,iT=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},oZ=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},lZ=function(e,t){var r=WX(e),i=Array.isArray(r)?XX(r):new Uint32Array(r),n=Array.isArray(r)?$X(r):new Uint16Array(r),a=24,c=iT(n,a/2,i[4]/2),s=i[5]===2?iT(n,(a+i[4])/2):oZ(i,Math.ceil((a+i[4])/4));return new cZ(i[0],i[1],i[2],i[3],c,s)},cZ=function(){function e(t,r,i,n,a,c){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=n,this.index=a,this.data=c}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>y0],r=(r<<vw)+(t&xw),this.data[r];if(t<=65535)return r=this.index[D8+(t-55296>>y0)],r=(r<<vw)+(t&xw),this.data[r];if(t<this.highStart)return r=iZ-nZ+(t>>hC),r=this.index[r],r+=t>>y0&aZ,r=this.index[r],r=(r<<vw)+(t&xw),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),nT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uZ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dy=0;Dy<nT.length;Dy++)uZ[nT.charCodeAt(Dy)]=Dy;var hZ=1,yw=2,_w=3,sT=4,aT=5,AZ=7,oT=8,bw=9,ww=10,lT=11,cT=12,uT=13,hT=14,Cw=15,dZ=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var a=e.charCodeAt(r++);(a&64512)===56320?t.push(((n&1023)<<10)+(a&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},fZ=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],n=-1,a="";++n<r;){var c=e[n];c<=65535?i.push(c):(c-=65536,i.push((c>>10)+55296,c%1024+56320)),(n+1===r||i.length>16384)&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return a},pZ=lZ(KX),Zh="",Bw="",mZ=function(e){return pZ.get(e)},gZ=function(e,t,r){var i=r-2,n=t[i],a=t[r-1],c=t[r];if(a===yw&&c===_w)return Zh;if(a===yw||a===_w||a===sT||c===yw||c===_w||c===sT)return Bw;if(a===oT&&[oT,bw,lT,cT].indexOf(c)!==-1||(a===lT||a===bw)&&(c===bw||c===ww)||(a===cT||a===ww)&&c===ww||c===uT||c===aT||c===AZ||a===hZ)return Zh;if(a===uT&&c===hT){for(;n===aT;)n=t[--i];if(n===hT)return Zh}if(a===Cw&&c===Cw){for(var s=0;n===Cw;)s++,n=t[--i];if(s%2===0)return Zh}return Bw},vZ=function(e){var t=dZ(e),r=t.length,i=0,n=0,a=t.map(mZ);return{next:function(){if(i>=r)return{done:!0,value:null};for(var c=Zh;i<r&&(c=gZ(t,a,++i))===Zh;);if(c!==Zh||i===r){var s=fZ.apply(null,t.slice(n,i));return n=i,{value:s,done:!1}}return{done:!0,value:null}}}},xZ=function(e){for(var t=vZ(e),r=[],i;!(i=t.next()).done;)i.value&&r.push(i.value.slice());return r},yZ=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height=t+"px",i.style.display="block",e.body.appendChild(i),r.selectNode(i);var n=r.getBoundingClientRect(),a=Math.round(n.height);if(e.body.removeChild(i),a===t)return!0}}return!1},_Z=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=t.firstChild,n=N_(i.data).map(function(p){return bo(p)}),a=0,c={},s=n.every(function(p,g){r.setStart(i,a),r.setEnd(i,a+p.length);var v=r.getBoundingClientRect();a+=p.length;var B=v.x>c.x||v.y>c.y;return c=v,g===0?!0:B});return e.body.removeChild(t),s},bZ=function(){return typeof new Image().crossOrigin<"u"},wZ=function(){return typeof new XMLHttpRequest().responseType=="string"},CZ=function(e){var t=new Image,r=e.createElement("canvas"),i=r.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},AT=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},BZ=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,r,r);var n=new Image,a=t.toDataURL();n.src=a;var c=W5(r,r,0,0,n);return i.fillStyle="red",i.fillRect(0,0,r,r),dT(c).then(function(s){i.drawImage(s,0,0);var p=i.getImageData(0,0,r,r).data;i.fillStyle="red",i.fillRect(0,0,r,r);var g=e.createElement("div");return g.style.backgroundImage="url("+a+")",g.style.height=r+"px",AT(p)?dT(W5(r,r,0,0,g)):Promise.reject(!1)}).then(function(s){return i.drawImage(s,0,0),AT(i.getImageData(0,0,r,r).data)}).catch(function(){return!1})},W5=function(e,t,r,i,n){var a="http://www.w3.org/2000/svg",c=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return c.setAttributeNS(null,"width",e.toString()),c.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",r.toString()),s.setAttributeNS(null,"y",i.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(s),s.appendChild(n),c},dT=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){return t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},hc={get SUPPORT_RANGE_BOUNDS(){var e=yZ(document);return Object.defineProperty(hc,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=hc.SUPPORT_RANGE_BOUNDS&&_Z(document);return Object.defineProperty(hc,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=CZ(document);return Object.defineProperty(hc,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?BZ(document):Promise.resolve(!1);return Object.defineProperty(hc,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=bZ();return Object.defineProperty(hc,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=wZ();return Object.defineProperty(hc,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(hc,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(hc,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},rv=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),SZ=function(e,t,r,i){var n=kZ(t,r),a=[],c=0;return n.forEach(function(s){if(r.textDecorationLine.length||s.trim().length>0)if(hc.SUPPORT_RANGE_BOUNDS){var p=fT(i,c,s.length).getClientRects();if(p.length>1){var g=AC(s),v=0;g.forEach(function(F){a.push(new rv(F,bf.fromDOMRectList(e,fT(i,v+c,F.length).getClientRects()))),v+=F.length})}else a.push(new rv(s,bf.fromDOMRectList(e,p)))}else{var B=i.splitText(s.length);a.push(new rv(s,EZ(e,i))),i=B}else hc.SUPPORT_RANGE_BOUNDS||(i=i.splitText(s.length));c+=s.length}),a},EZ=function(e,t){var r=t.ownerDocument;if(r){var i=r.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(i,t);var a=F_(e,i);return i.firstChild&&n.replaceChild(i.firstChild,i),a}}return bf.EMPTY},fT=function(e,t,r){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var n=i.createRange();return n.setStart(e,t),n.setEnd(e,t+r),n},AC=function(e){if(hc.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return xZ(e)},TZ=function(e,t){if(hc.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(i){return i.segment})}return NZ(e,t)},kZ=function(e,t){return t.letterSpacing!==0?AC(e):TZ(e,t)},FZ=[32,160,4961,65792,65793,4153,4241],NZ=function(e,t){for(var r=nW(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),i=[],n,a=function(){if(n.value){var c=n.value.slice(),s=N_(c),p="";s.forEach(function(g){FZ.indexOf(g)===-1?p+=bo(g):(p.length&&i.push(p),i.push(bo(g)),p="")}),p.length&&i.push(p)}};!(n=r.next()).done;)a();return i},IZ=function(){function e(t,r,i){this.text=LZ(r.data,i.textTransform),this.textBounds=SZ(t,this.text,i,r)}return e}(),LZ=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(MZ,PZ);case 2:return e.toUpperCase();default:return e}},MZ=/(^|\s|:|-|\(|\))([a-z])/g,PZ=function(e,t,r){return e.length>0?t+r.toUpperCase():e},j8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return t}(kd),U8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return t}(kd),O8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this,a=new XMLSerializer,c=F_(r,i);return i.setAttribute("width",c.width+"px"),i.setAttribute("height",c.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t}(kd),z8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.value=i.value,n}return t}(kd),$5=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.start=i.start,n.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,n}return t}(kd),RZ=[{type:15,flags:0,unit:"px",number:3}],DZ=[{type:16,flags:0,number:50}],jZ=function(e){return e.width>e.height?new bf(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new bf(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},UZ=function(e){var t=e.type===OZ?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},H2="checkbox",V2="radio",OZ="password",pT=707406591,dC=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;switch(n.type=i.type.toLowerCase(),n.checked=i.checked,n.value=UZ(i),(n.type===H2||n.type===V2)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=jZ(n.bounds)),n.type){case H2:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=RZ;break;case V2:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=DZ;break}return n}return t}(kd),Q8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this,a=i.options[i.selectedIndex||0];return n.value=a&&a.text||"",n}return t}(kd),H8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.value=i.value,n}return t}(kd),V8=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=q8(r,i.contentWindow.document.documentElement);var a=i.contentWindow.document.documentElement?ev(r,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):pf.TRANSPARENT,c=i.contentWindow.document.body?ev(r,getComputedStyle(i.contentWindow.document.body).backgroundColor):pf.TRANSPARENT;n.backgroundColor=yp(a)?yp(c)?n.styles.backgroundColor:c:a}}catch{}return n}return t}(kd),zZ=["OL","UL","MENU"],v2=function(e,t,r,i){for(var n=t.firstChild,a=void 0;n;n=a)if(a=n.nextSibling,K8(n)&&n.data.trim().length>0)r.textNodes.push(new IZ(e,n,r.styles));else if(Vm(n))if(Z8(n)&&n.assignedNodes)n.assignedNodes().forEach(function(s){return v2(e,s,r,i)});else{var c=G8(e,n);c.styles.isVisible()&&(QZ(n,c,i)?c.flags|=4:HZ(c.styles)&&(c.flags|=2),zZ.indexOf(n.tagName)!==-1&&(c.flags|=8),r.elements.push(c),n.slot,n.shadowRoot?v2(e,n.shadowRoot,c,i):!G2(n)&&!W8(n)&&!q2(n)&&v2(e,n,c,i))}},G8=function(e,t){return Z5(t)?new j8(e,t):$8(t)?new U8(e,t):W8(t)?new O8(e,t):VZ(t)?new z8(e,t):GZ(t)?new $5(e,t):qZ(t)?new dC(e,t):q2(t)?new Q8(e,t):G2(t)?new H8(e,t):X8(t)?new V8(e,t):new kd(e,t)},q8=function(e,t){var r=G8(e,t);return r.flags|=4,v2(e,t,r,r),r},QZ=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||fC(e)&&r.styles.isTransparent()},HZ=function(e){return e.isPositioned()||e.isFloating()},K8=function(e){return e.nodeType===Node.TEXT_NODE},Vm=function(e){return e.nodeType===Node.ELEMENT_NODE},X5=function(e){return Vm(e)&&typeof e.style<"u"&&!x2(e)},x2=function(e){return typeof e.className=="object"},VZ=function(e){return e.tagName==="LI"},GZ=function(e){return e.tagName==="OL"},qZ=function(e){return e.tagName==="INPUT"},KZ=function(e){return e.tagName==="HTML"},W8=function(e){return e.tagName==="svg"},fC=function(e){return e.tagName==="BODY"},$8=function(e){return e.tagName==="CANVAS"},mT=function(e){return e.tagName==="VIDEO"},Z5=function(e){return e.tagName==="IMG"},X8=function(e){return e.tagName==="IFRAME"},gT=function(e){return e.tagName==="STYLE"},WZ=function(e){return e.tagName==="SCRIPT"},G2=function(e){return e.tagName==="TEXTAREA"},q2=function(e){return e.tagName==="SELECT"},Z8=function(e){return e.tagName==="SLOT"},vT=function(e){return e.tagName.indexOf("-")>0},$Z=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(i){return r.counters[i].pop()})},e.prototype.parse=function(t){var r=this,i=t.counterIncrement,n=t.counterReset,a=!0;i!==null&&i.forEach(function(s){var p=r.counters[s.counter];p&&s.increment!==0&&(a=!1,p.length||p.push(1),p[Math.max(0,p.length-1)]+=s.increment)});var c=[];return a&&n.forEach(function(s){var p=r.counters[s.counter];c.push(s.counter),p||(p=r.counters[s.counter]=[]),p.push(s.reset)}),c},e}(),xT={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},yT={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},XZ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ZZ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Mm=function(e,t,r,i,n,a){return e<t||e>r?Tv(e,n,a.length>0):i.integers.reduce(function(c,s,p){for(;e>=s;)e-=s,c+=i.values[p];return c},"")+a},Y8=function(e,t,r,i){var n="";do r||e--,n=i(e)+n,e/=t;while(e*t>=t);return n},yo=function(e,t,r,i,n){var a=r-t+1;return(e<0?"-":"")+(Y8(Math.abs(e),a,i,function(c){return bo(Math.floor(c%a)+t)})+n)},r0=function(e,t,r){r===void 0&&(r=". ");var i=t.length;return Y8(Math.abs(e),i,!1,function(n){return t[Math.floor(n%i)]})+r},Om=1,rp=2,ip=4,z1=8,tf=function(e,t,r,i,n,a){if(e<-9999||e>9999)return Tv(e,4,n.length>0);var c=Math.abs(e),s=n;if(c===0)return t[0]+s;for(var p=0;c>0&&p<=4;p++){var g=c%10;g===0&&pl(a,Om)&&s!==""?s=t[g]+s:g>1||g===1&&p===0||g===1&&p===1&&pl(a,rp)||g===1&&p===1&&pl(a,ip)&&e>100||g===1&&p>1&&pl(a,z1)?s=t[g]+(p>0?r[p-1]:"")+s:g===1&&p>0&&(s=r[p-1]+s),c=Math.floor(c/10)}return(e<0?i:"")+s},_T="",bT="",wT="",Sw="",Tv=function(e,t,r){var i=r?". ":"",n=r?"":"",a=r?", ":"",c=r?" ":"";switch(t){case 0:return""+c;case 1:return""+c;case 2:return""+c;case 5:var s=yo(e,48,57,!0,i);return s.length<4?"0"+s:s;case 4:return r0(e,"",n);case 6:return Mm(e,1,3999,xT,3,i).toLowerCase();case 7:return Mm(e,1,3999,xT,3,i);case 8:return yo(e,945,969,!1,i);case 9:return yo(e,97,122,!1,i);case 10:return yo(e,65,90,!1,i);case 11:return yo(e,1632,1641,!0,i);case 12:case 49:return Mm(e,1,9999,yT,3,i);case 35:return Mm(e,1,9999,yT,3,i).toLowerCase();case 13:return yo(e,2534,2543,!0,i);case 14:case 30:return yo(e,6112,6121,!0,i);case 15:return r0(e,"",n);case 16:return r0(e,"",n);case 17:case 48:return tf(e,"",_T,"",n,rp|ip|z1);case 47:return tf(e,"",bT,"",n,Om|rp|ip|z1);case 42:return tf(e,"",_T,"",n,rp|ip|z1);case 41:return tf(e,"",bT,"",n,Om|rp|ip|z1);case 26:return tf(e,"","",wT,n,0);case 25:return tf(e,"","",wT,n,Om|rp|ip);case 31:return tf(e,"","",Sw,a,Om|rp|ip);case 33:return tf(e,"","",Sw,a,0);case 32:return tf(e,"","",Sw,a,Om|rp|ip);case 18:return yo(e,2406,2415,!0,i);case 20:return Mm(e,1,19999,ZZ,3,i);case 21:return yo(e,2790,2799,!0,i);case 22:return yo(e,2662,2671,!0,i);case 22:return Mm(e,1,10999,XZ,3,i);case 23:return r0(e,"");case 24:return r0(e,"");case 27:return yo(e,3302,3311,!0,i);case 28:return r0(e,"",n);case 29:return r0(e,"",n);case 34:return yo(e,3792,3801,!0,i);case 37:return yo(e,6160,6169,!0,i);case 38:return yo(e,4160,4169,!0,i);case 39:return yo(e,2918,2927,!0,i);case 40:return yo(e,1776,1785,!0,i);case 43:return yo(e,3046,3055,!0,i);case 44:return yo(e,3174,3183,!0,i);case 45:return yo(e,3664,3673,!0,i);case 46:return yo(e,3872,3881,!0,i);case 3:default:return yo(e,48,57,!0,i)}},J8="data-html2canvas-ignore",CT=function(){function e(t,r,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=r,this.counters=new $Z,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var i=this,n=YZ(t,r);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var a=t.defaultView.pageXOffset,c=t.defaultView.pageYOffset,s=n.contentWindow,p=s.document,g=tY(n).then(function(){return yu(i,void 0,void 0,function(){var v,B;return Vc(this,function(F){switch(F.label){case 0:return this.scrolledElements.forEach(sY),s&&(s.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(s.scrollY!==r.top||s.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-r.left,s.scrollY-r.top,0,0))),v=this.options.onclone,B=this.clonedReferenceElement,typeof B>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:p.fonts&&p.fonts.ready?[4,p.fonts.ready]:[3,2];case 1:F.sent(),F.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,eY(p)]:[3,4];case 3:F.sent(),F.label=4;case 4:return typeof v=="function"?[2,Promise.resolve().then(function(){return v(p,B)}).then(function(){return n})]:[2,n]}})})});return p.open(),p.write(iY(document.doctype)+"<html></html>"),nY(this.referenceElement.ownerDocument,a,c),p.replaceChild(p.adoptNode(this.documentElement),p.documentElement),p.close(),g},e.prototype.createElementClone=function(t){if(K5(t,2))debugger;if($8(t))return this.createCanvasClone(t);if(mT(t))return this.createVideoClone(t);if(gT(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return Z5(r)&&(Z5(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),vT(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return Ew(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var i=[].slice.call(r.cssRules,0).reduce(function(a,c){return c&&typeof c.cssText=="string"?a+c.cssText:a},""),n=t.cloneNode(!1);return n.textContent=i,n}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var a=t.getContext("2d"),c=n.getContext("2d");if(c)if(!this.options.allowTaint&&a)c.putImageData(a.getImageData(0,0,t.width,t.height),0,0);else{var s=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(s){var p=s.getContextAttributes();p?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}c.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var i=r.getContext("2d");try{return i&&(i.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||i.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},e.prototype.appendChildNode=function(t,r,i){(!Vm(r)||!WZ(r)&&!r.hasAttribute(J8)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Vm(r)||!gT(r))&&t.appendChild(this.cloneNode(r,i))},e.prototype.cloneChildNodes=function(t,r,i){for(var n=this,a=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;a;a=a.nextSibling)if(Vm(a)&&Z8(a)&&typeof a.assignedNodes=="function"){var c=a.assignedNodes();c.length&&c.forEach(function(s){return n.appendChildNode(r,s,i)})}else this.appendChildNode(r,a,i)},e.prototype.cloneNode=function(t,r){if(K8(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&Vm(t)&&(X5(t)||x2(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var a=i.getComputedStyle(t),c=i.getComputedStyle(t,":before"),s=i.getComputedStyle(t,":after");this.referenceElement===t&&X5(n)&&(this.clonedReferenceElement=n),fC(n)&&lY(n);var p=this.counters.parse(new tT(this.context,a)),g=this.resolvePseudoContent(t,n,c,iv.BEFORE);vT(t)&&(r=!0),mT(t)||this.cloneChildNodes(t,n,r),g&&n.insertBefore(g,n.firstChild);var v=this.resolvePseudoContent(t,n,s,iv.AFTER);return v&&n.appendChild(v),this.counters.pop(p),(a&&(this.options.copyStyles||x2(t))&&!X8(t)||r)&&Ew(a,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(G2(t)||q2(t))&&(G2(n)||q2(n))&&(n.value=t.value),n}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,i,n){var a=this;if(i){var c=i.content,s=r.ownerDocument;if(!(!s||!c||c==="none"||c==="-moz-alt-content"||i.display==="none")){this.counters.parse(new tT(this.context,i));var p=new VX(this.context,i),g=s.createElement("html2canvaspseudoelement");Ew(i,g),p.content.forEach(function(B){if(B.type===0)g.appendChild(s.createTextNode(B.value));else if(B.type===22){var F=s.createElement("img");F.src=B.value,F.style.opacity="1",g.appendChild(F)}else if(B.type===18){if(B.name==="attr"){var C=B.values.filter(zs);C.length&&g.appendChild(s.createTextNode(t.getAttribute(C[0].value)||""))}else if(B.name==="counter"){var L=B.values.filter(cg),P=L[0],D=L[1];if(P&&zs(P)){var j=a.counters.getCounterValue(P.value),q=D&&zs(D)?q5.parse(a.context,D.value):3;g.appendChild(s.createTextNode(Tv(j,q,!1)))}}else if(B.name==="counters"){var H=B.values.filter(cg),P=H[0],ee=H[1],D=H[2];if(P&&zs(P)){var G=a.counters.getCounterValues(P.value),ne=D&&zs(D)?q5.parse(a.context,D.value):3,Z=ee&&ee.type===0?ee.value:"",le=G.map(function(te){return Tv(te,ne,!1)}).join(Z);g.appendChild(s.createTextNode(le))}}}else if(B.type===20)switch(B.value){case"open-quote":g.appendChild(s.createTextNode(eT(p.quotes,a.quoteDepth++,!0)));break;case"close-quote":g.appendChild(s.createTextNode(eT(p.quotes,--a.quoteDepth,!1)));break;default:g.appendChild(s.createTextNode(B.value))}}),g.className=Y5+" "+J5;var v=n===iv.BEFORE?" "+Y5:" "+J5;return x2(r)?r.className.baseValue+=v:r.className+=v,g}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),iv;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(iv||(iv={}));var YZ=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(J8,"true"),e.body.appendChild(r),r},JZ=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},eY=function(e){return Promise.all([].slice.call(e.images,0).map(JZ))},tY=function(e){return new Promise(function(t,r){var i=e.contentWindow;if(!i)return r("No window assigned for iframe");var n=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var a=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(a),t(e))},50)}})},rY=["all","d","content"],Ew=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e.item(r);rY.indexOf(i)===-1&&t.style.setProperty(i,e.getPropertyValue(i))}return t},iY=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},nY=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},sY=function(e){var t=e[0],r=e[1],i=e[2];t.scrollLeft=r,t.scrollTop=i},aY=":before",oY=":after",Y5="___html2canvas___pseudoelement_before",J5="___html2canvas___pseudoelement_after",BT=`{
    content: "" !important;
    display: none !important;
}`,lY=function(e){cY(e,"."+Y5+aY+BT+`
         .`+J5+oY+BT)},cY=function(e,t){var r=e.ownerDocument;if(r){var i=r.createElement("style");i.textContent=t,e.appendChild(i)}},eI=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),uY=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(kw(t)||fY(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return yu(this,void 0,void 0,function(){var r,i,n,a,c=this;return Vc(this,function(s){switch(s.label){case 0:return r=eI.isSameOrigin(t),i=!Tw(t)&&this._options.useCORS===!0&&hc.SUPPORT_CORS_IMAGES&&!r,n=!Tw(t)&&!r&&!kw(t)&&typeof this._options.proxy=="string"&&hc.SUPPORT_CORS_XHR&&!i,!r&&this._options.allowTaint===!1&&!Tw(t)&&!kw(t)&&!n&&!i?[2]:(a=t,n?[4,this.proxy(a)]:[3,2]);case 1:a=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(p,g){var v=new Image;v.onload=function(){return p(v)},v.onerror=g,(pY(a)||i)&&(v.crossOrigin="anonymous"),v.src=a,v.complete===!0&&setTimeout(function(){return p(v)},500),c._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,s.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(a,c){var s=hc.SUPPORT_RESPONSE_TYPE?"blob":"text",p=new XMLHttpRequest;p.onload=function(){if(p.status===200)if(s==="text")a(p.response);else{var B=new FileReader;B.addEventListener("load",function(){return a(B.result)},!1),B.addEventListener("error",function(F){return c(F)},!1),B.readAsDataURL(p.response)}else c("Failed to proxy resource "+n+" with status code "+p.status)},p.onerror=c;var g=i.indexOf("?")>-1?"&":"?";if(p.open("GET",""+i+g+"url="+encodeURIComponent(t)+"&responseType="+s),s!=="text"&&p instanceof XMLHttpRequest&&(p.responseType=s),r._options.imageTimeout){var v=r._options.imageTimeout;p.timeout=v,p.ontimeout=function(){return c("Timed out ("+v+"ms) proxying "+n)}}p.send()})},e}(),hY=/^data:image\/svg\+xml/i,AY=/^data:image\/.*;base64,/i,dY=/^data:image\/.*/i,fY=function(e){return hc.SUPPORT_SVG_DRAWING||!mY(e)},Tw=function(e){return dY.test(e)},pY=function(e){return AY.test(e)},kw=function(e){return e.substr(0,4)==="blob"},mY=function(e){return e.substr(-3).toLowerCase()==="svg"||hY.test(e)},si=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Pm=function(e,t,r){return new si(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},jy=function(){function e(t,r,i,n){this.type=1,this.start=t,this.startControl=r,this.endControl=i,this.end=n}return e.prototype.subdivide=function(t,r){var i=Pm(this.start,this.startControl,t),n=Pm(this.startControl,this.endControl,t),a=Pm(this.endControl,this.end,t),c=Pm(i,n,t),s=Pm(n,a,t),p=Pm(c,s,t);return r?new e(this.start,i,c,p):new e(p,s,a,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),eA=function(e){return e.type===1},gY=function(){function e(t){var r=t.styles,i=t.bounds,n=U1(r.borderTopLeftRadius,i.width,i.height),a=n[0],c=n[1],s=U1(r.borderTopRightRadius,i.width,i.height),p=s[0],g=s[1],v=U1(r.borderBottomRightRadius,i.width,i.height),B=v[0],F=v[1],C=U1(r.borderBottomLeftRadius,i.width,i.height),L=C[0],P=C[1],D=[];D.push((a+p)/i.width),D.push((L+B)/i.width),D.push((c+P)/i.height),D.push((g+F)/i.height);var j=Math.max.apply(Math,D);j>1&&(a/=j,c/=j,p/=j,g/=j,B/=j,F/=j,L/=j,P/=j);var q=i.width-p,H=i.height-F,ee=i.width-B,G=i.height-P,ne=r.borderTopWidth,Z=r.borderRightWidth,le=r.borderBottomWidth,J=r.borderLeftWidth,ce=ua(r.paddingTop,t.bounds.width),te=ua(r.paddingRight,t.bounds.width),K=ua(r.paddingBottom,t.bounds.width),me=ua(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||c>0?Fa(i.left+J/3,i.top+ne/3,a-J/3,c-ne/3,vs.TOP_LEFT):new si(i.left+J/3,i.top+ne/3),this.topRightBorderDoubleOuterBox=a>0||c>0?Fa(i.left+q,i.top+ne/3,p-Z/3,g-ne/3,vs.TOP_RIGHT):new si(i.left+i.width-Z/3,i.top+ne/3),this.bottomRightBorderDoubleOuterBox=B>0||F>0?Fa(i.left+ee,i.top+H,B-Z/3,F-le/3,vs.BOTTOM_RIGHT):new si(i.left+i.width-Z/3,i.top+i.height-le/3),this.bottomLeftBorderDoubleOuterBox=L>0||P>0?Fa(i.left+J/3,i.top+G,L-J/3,P-le/3,vs.BOTTOM_LEFT):new si(i.left+J/3,i.top+i.height-le/3),this.topLeftBorderDoubleInnerBox=a>0||c>0?Fa(i.left+J*2/3,i.top+ne*2/3,a-J*2/3,c-ne*2/3,vs.TOP_LEFT):new si(i.left+J*2/3,i.top+ne*2/3),this.topRightBorderDoubleInnerBox=a>0||c>0?Fa(i.left+q,i.top+ne*2/3,p-Z*2/3,g-ne*2/3,vs.TOP_RIGHT):new si(i.left+i.width-Z*2/3,i.top+ne*2/3),this.bottomRightBorderDoubleInnerBox=B>0||F>0?Fa(i.left+ee,i.top+H,B-Z*2/3,F-le*2/3,vs.BOTTOM_RIGHT):new si(i.left+i.width-Z*2/3,i.top+i.height-le*2/3),this.bottomLeftBorderDoubleInnerBox=L>0||P>0?Fa(i.left+J*2/3,i.top+G,L-J*2/3,P-le*2/3,vs.BOTTOM_LEFT):new si(i.left+J*2/3,i.top+i.height-le*2/3),this.topLeftBorderStroke=a>0||c>0?Fa(i.left+J/2,i.top+ne/2,a-J/2,c-ne/2,vs.TOP_LEFT):new si(i.left+J/2,i.top+ne/2),this.topRightBorderStroke=a>0||c>0?Fa(i.left+q,i.top+ne/2,p-Z/2,g-ne/2,vs.TOP_RIGHT):new si(i.left+i.width-Z/2,i.top+ne/2),this.bottomRightBorderStroke=B>0||F>0?Fa(i.left+ee,i.top+H,B-Z/2,F-le/2,vs.BOTTOM_RIGHT):new si(i.left+i.width-Z/2,i.top+i.height-le/2),this.bottomLeftBorderStroke=L>0||P>0?Fa(i.left+J/2,i.top+G,L-J/2,P-le/2,vs.BOTTOM_LEFT):new si(i.left+J/2,i.top+i.height-le/2),this.topLeftBorderBox=a>0||c>0?Fa(i.left,i.top,a,c,vs.TOP_LEFT):new si(i.left,i.top),this.topRightBorderBox=p>0||g>0?Fa(i.left+q,i.top,p,g,vs.TOP_RIGHT):new si(i.left+i.width,i.top),this.bottomRightBorderBox=B>0||F>0?Fa(i.left+ee,i.top+H,B,F,vs.BOTTOM_RIGHT):new si(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=L>0||P>0?Fa(i.left,i.top+G,L,P,vs.BOTTOM_LEFT):new si(i.left,i.top+i.height),this.topLeftPaddingBox=a>0||c>0?Fa(i.left+J,i.top+ne,Math.max(0,a-J),Math.max(0,c-ne),vs.TOP_LEFT):new si(i.left+J,i.top+ne),this.topRightPaddingBox=p>0||g>0?Fa(i.left+Math.min(q,i.width-Z),i.top+ne,q>i.width+Z?0:Math.max(0,p-Z),Math.max(0,g-ne),vs.TOP_RIGHT):new si(i.left+i.width-Z,i.top+ne),this.bottomRightPaddingBox=B>0||F>0?Fa(i.left+Math.min(ee,i.width-J),i.top+Math.min(H,i.height-le),Math.max(0,B-Z),Math.max(0,F-le),vs.BOTTOM_RIGHT):new si(i.left+i.width-Z,i.top+i.height-le),this.bottomLeftPaddingBox=L>0||P>0?Fa(i.left+J,i.top+Math.min(G,i.height-le),Math.max(0,L-J),Math.max(0,P-le),vs.BOTTOM_LEFT):new si(i.left+J,i.top+i.height-le),this.topLeftContentBox=a>0||c>0?Fa(i.left+J+me,i.top+ne+ce,Math.max(0,a-(J+me)),Math.max(0,c-(ne+ce)),vs.TOP_LEFT):new si(i.left+J+me,i.top+ne+ce),this.topRightContentBox=p>0||g>0?Fa(i.left+Math.min(q,i.width+J+me),i.top+ne+ce,q>i.width+J+me?0:p-J+me,g-(ne+ce),vs.TOP_RIGHT):new si(i.left+i.width-(Z+te),i.top+ne+ce),this.bottomRightContentBox=B>0||F>0?Fa(i.left+Math.min(ee,i.width-(J+me)),i.top+Math.min(H,i.height+ne+ce),Math.max(0,B-(Z+te)),F-(le+K),vs.BOTTOM_RIGHT):new si(i.left+i.width-(Z+te),i.top+i.height-(le+K)),this.bottomLeftContentBox=L>0||P>0?Fa(i.left+J+me,i.top+G,Math.max(0,L-(J+me)),P-(le+K),vs.BOTTOM_LEFT):new si(i.left+J+me,i.top+i.height-(le+K))}return e}(),vs;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vs||(vs={}));var Fa=function(e,t,r,i,n){var a=4*((Math.sqrt(2)-1)/3),c=r*a,s=i*a,p=e+r,g=t+i;switch(n){case vs.TOP_LEFT:return new jy(new si(e,g),new si(e,g-s),new si(p-c,t),new si(p,t));case vs.TOP_RIGHT:return new jy(new si(e,t),new si(e+c,t),new si(p,g-s),new si(p,g));case vs.BOTTOM_RIGHT:return new jy(new si(p,t),new si(p,t+s),new si(e+c,g),new si(e,g));case vs.BOTTOM_LEFT:default:return new jy(new si(p,g),new si(p-c,g),new si(e,t+s),new si(e,t))}},K2=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},vY=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},W2=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},xY=function(){function e(t,r,i){this.offsetX=t,this.offsetY=r,this.matrix=i,this.type=0,this.target=6}return e}(),Uy=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),yY=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),_Y=function(e){return e.type===0},tI=function(e){return e.type===1},bY=function(e){return e.type===2},ST=function(e,t){return e.length===t.length?e.some(function(r,i){return r===t[i]}):!1},wY=function(e,t,r,i,n){return e.map(function(a,c){switch(c){case 0:return a.add(t,r);case 1:return a.add(t+i,r);case 2:return a.add(t+i,r+n);case 3:return a.add(t,r+n)}return a})},rI=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),iI=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new gY(this.container),this.container.styles.opacity<1&&this.effects.push(new yY(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new xY(i,n,a))}if(this.container.styles.overflowX!==0){var c=K2(this.curves),s=W2(this.curves);ST(c,s)?this.effects.push(new Uy(c,6)):(this.effects.push(new Uy(c,2)),this.effects.push(new Uy(s,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,n=this.effects.slice(0);i;){var a=i.effects.filter(function(p){return!tI(p)});if(r||i.container.styles.position!==0||!i.parent){if(n.unshift.apply(n,a),r=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var c=K2(i.curves),s=W2(i.curves);ST(c,s)||n.unshift(new Uy(s,6))}}else n.unshift.apply(n,a);i=i.parent}return n.filter(function(p){return pl(p.target,t)})},e}(),e4=function(e,t,r,i){e.container.elements.forEach(function(n){var a=pl(n.flags,4),c=pl(n.flags,2),s=new iI(n,e);pl(n.styles.display,2048)&&i.push(s);var p=pl(n.flags,8)?[]:i;if(a||c){var g=a||n.styles.isPositioned()?r:t,v=new rI(s);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var B=n.styles.zIndex.order;if(B<0){var F=0;g.negativeZIndex.some(function(L,P){return B>L.element.container.styles.zIndex.order?(F=P,!1):F>0}),g.negativeZIndex.splice(F,0,v)}else if(B>0){var C=0;g.positiveZIndex.some(function(L,P){return B>=L.element.container.styles.zIndex.order?(C=P+1,!1):C>0}),g.positiveZIndex.splice(C,0,v)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(v)}else n.styles.isFloating()?g.nonPositionedFloats.push(v):g.nonPositionedInlineLevel.push(v);e4(s,v,a?v:r,p)}else n.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),e4(s,t,r,p);pl(n.flags,8)&&nI(n,p)})},nI=function(e,t){for(var r=e instanceof $5?e.start:1,i=e instanceof $5?e.reversed:!1,n=0;n<t.length;n++){var a=t[n];a.container instanceof z8&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=Tv(r,a.container.styles.listStyleType,!0),r+=i?-1:1}},CY=function(e){var t=new iI(e,null),r=new rI(t),i=[];return e4(t,r,r,i),nI(t.container,i),r},ET=function(e,t){switch(t){case 0:return nA(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return nA(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return nA(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return nA(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},BY=function(e,t){switch(t){case 0:return nA(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return nA(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return nA(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return nA(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},SY=function(e,t){switch(t){case 0:return nA(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return nA(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return nA(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return nA(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},EY=function(e,t){switch(t){case 0:return Oy(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Oy(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Oy(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Oy(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Oy=function(e,t){var r=[];return eA(e)?r.push(e.subdivide(.5,!1)):r.push(e),eA(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},nA=function(e,t,r,i){var n=[];return eA(e)?n.push(e.subdivide(.5,!1)):n.push(e),eA(r)?n.push(r.subdivide(.5,!0)):n.push(r),eA(i)?n.push(i.subdivide(.5,!0).reverse()):n.push(i),eA(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},sI=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},$2=function(e){var t=e.styles,r=e.bounds,i=ua(t.paddingLeft,r.width),n=ua(t.paddingRight,r.width),a=ua(t.paddingTop,r.width),c=ua(t.paddingBottom,r.width);return r.add(i+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+n),-(t.borderTopWidth+t.borderBottomWidth+a+c))},TY=function(e,t){return e===0?t.bounds:e===2?$2(t):sI(t)},kY=function(e,t){return e===0?t.bounds:e===2?$2(t):sI(t)},Fw=function(e,t,r){var i=TY(zm(e.styles.backgroundOrigin,t),e),n=kY(zm(e.styles.backgroundClip,t),e),a=FY(zm(e.styles.backgroundSize,t),r,i),c=a[0],s=a[1],p=U1(zm(e.styles.backgroundPosition,t),i.width-c,i.height-s),g=NY(zm(e.styles.backgroundRepeat,t),p,a,i,n),v=Math.round(i.left+p[0]),B=Math.round(i.top+p[1]);return[g,v,B,c,s]},Rm=function(e){return zs(e)&&e.value===rg.AUTO},zy=function(e){return typeof e=="number"},FY=function(e,t,r){var i=t[0],n=t[1],a=t[2],c=e[0],s=e[1];if(!c)return[0,0];if(Go(c)&&s&&Go(s))return[ua(c,r.width),ua(s,r.height)];var p=zy(a);if(zs(c)&&(c.value===rg.CONTAIN||c.value===rg.COVER)){if(zy(a)){var g=r.width/r.height;return g<a!=(c.value===rg.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var v=zy(i),B=zy(n),F=v||B;if(Rm(c)&&(!s||Rm(s))){if(v&&B)return[i,n];if(!p&&!F)return[r.width,r.height];if(F&&p){var C=v?i:n*a,L=B?n:i/a;return[C,L]}var P=v?i:r.width,D=B?n:r.height;return[P,D]}if(p){var j=0,q=0;return Go(c)?j=ua(c,r.width):Go(s)&&(q=ua(s,r.height)),Rm(c)?j=q*a:(!s||Rm(s))&&(q=j/a),[j,q]}var H=null,ee=null;if(Go(c)?H=ua(c,r.width):s&&Go(s)&&(ee=ua(s,r.height)),H!==null&&(!s||Rm(s))&&(ee=v&&B?H/i*n:r.height),ee!==null&&Rm(c)&&(H=v&&B?ee/n*i:r.width),H!==null&&ee!==null)return[H,ee];throw new Error("Unable to calculate background-size for element")},zm=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},NY=function(e,t,r,i,n){var a=t[0],c=t[1],s=r[0],p=r[1];switch(e){case 2:return[new si(Math.round(i.left),Math.round(i.top+c)),new si(Math.round(i.left+i.width),Math.round(i.top+c)),new si(Math.round(i.left+i.width),Math.round(p+i.top+c)),new si(Math.round(i.left),Math.round(p+i.top+c))];case 3:return[new si(Math.round(i.left+a),Math.round(i.top)),new si(Math.round(i.left+a+s),Math.round(i.top)),new si(Math.round(i.left+a+s),Math.round(i.height+i.top)),new si(Math.round(i.left+a),Math.round(i.height+i.top))];case 1:return[new si(Math.round(i.left+a),Math.round(i.top+c)),new si(Math.round(i.left+a+s),Math.round(i.top+c)),new si(Math.round(i.left+a+s),Math.round(i.top+c+p)),new si(Math.round(i.left+a),Math.round(i.top+c+p))];default:return[new si(Math.round(n.left),Math.round(n.top)),new si(Math.round(n.left+n.width),Math.round(n.top)),new si(Math.round(n.left+n.width),Math.round(n.height+n.top)),new si(Math.round(n.left),Math.round(n.height+n.top))]}},IY="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",TT="Hidden Text",LY=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var i=this._document.createElement("div"),n=this._document.createElement("img"),a=this._document.createElement("span"),c=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",c.appendChild(i),n.src=IY,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(TT)),i.appendChild(a),i.appendChild(n);var s=n.offsetTop-a.offsetTop+2;i.removeChild(a),i.appendChild(this._document.createTextNode(TT)),i.style.lineHeight="normal",n.style.verticalAlign="super";var p=n.offsetTop-i.offsetTop+2;return c.removeChild(i),{baseline:s,middle:p}},e.prototype.getMetrics=function(t,r){var i=t+" "+r;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(t,r)),this._data[i]},e}(),aI=function(){function e(t,r){this.context=t,this.options=r}return e}(),MY=1e4,PY=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new LY(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return t.prototype.applyEffects=function(r){for(var i=this;this._activeEffects.length;)this.popEffect();r.forEach(function(n){return i.applyEffect(n)})},t.prototype.applyEffect=function(r){this.ctx.save(),bY(r)&&(this.ctx.globalAlpha=r.opacity),_Y(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),tI(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return yu(this,void 0,void 0,function(){var i;return Vc(this,function(n){switch(n.label){case 0:return i=r.element.container.styles,i.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return yu(this,void 0,void 0,function(){return Vc(this,function(i){switch(i.label){case 0:if(pl(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,i,n){var a=this;if(i===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+n);else{var c=AC(r.text);c.reduce(function(s,p){return a.ctx.fillText(p,s,r.bounds.top+n),s+a.ctx.measureText(p).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var i=r.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),n=OY(r.fontFamily).join(", "),a=Xv(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,i,r.fontWeight,a,n].join(" "),n,a]},t.prototype.renderTextNode=function(r,i){return yu(this,void 0,void 0,function(){var n,a,c,s,p,g,v,B,F=this;return Vc(this,function(C){return n=this.createFontStyle(i),a=n[0],c=n[1],s=n[2],this.ctx.font=a,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",p=this.fontMetrics.getMetrics(c,s),g=p.baseline,v=p.middle,B=i.paintOrder,r.textBounds.forEach(function(L){B.forEach(function(P){switch(P){case 0:F.ctx.fillStyle=Hl(i.color),F.renderTextWithLetterSpacing(L,i.letterSpacing,g);var D=i.textShadow;D.length&&L.text.trim().length&&(D.slice(0).reverse().forEach(function(j){F.ctx.shadowColor=Hl(j.color),F.ctx.shadowOffsetX=j.offsetX.number*F.options.scale,F.ctx.shadowOffsetY=j.offsetY.number*F.options.scale,F.ctx.shadowBlur=j.blur.number,F.renderTextWithLetterSpacing(L,i.letterSpacing,g)}),F.ctx.shadowColor="",F.ctx.shadowOffsetX=0,F.ctx.shadowOffsetY=0,F.ctx.shadowBlur=0),i.textDecorationLine.length&&(F.ctx.fillStyle=Hl(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(j){switch(j){case 1:F.ctx.fillRect(L.bounds.left,Math.round(L.bounds.top+g),L.bounds.width,1);break;case 2:F.ctx.fillRect(L.bounds.left,Math.round(L.bounds.top),L.bounds.width,1);break;case 3:F.ctx.fillRect(L.bounds.left,Math.ceil(L.bounds.top+v),L.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&L.text.trim().length&&(F.ctx.strokeStyle=Hl(i.webkitTextStrokeColor),F.ctx.lineWidth=i.webkitTextStrokeWidth,F.ctx.lineJoin=window.chrome?"miter":"round",F.ctx.strokeText(L.text,L.bounds.left,L.bounds.top+g)),F.ctx.strokeStyle="",F.ctx.lineWidth=0,F.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,i,n){if(n&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=$2(r),c=W2(i);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return yu(this,void 0,void 0,function(){var i,n,a,c,s,p,q,q,g,v,B,F,ee,C,L,G,P,D,j,q,H,ee,G;return Vc(this,function(ne){switch(ne.label){case 0:this.applyEffects(r.getEffects(4)),i=r.container,n=r.curves,a=i.styles,c=0,s=i.textNodes,ne.label=1;case 1:return c<s.length?(p=s[c],[4,this.renderTextNode(p,a)]):[3,4];case 2:ne.sent(),ne.label=3;case 3:return c++,[3,1];case 4:if(!(i instanceof j8))return[3,8];ne.label=5;case 5:return ne.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return q=ne.sent(),this.renderReplacedElement(i,n,q),[3,8];case 7:return ne.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof U8&&this.renderReplacedElement(i,n,i.canvas),!(i instanceof O8))return[3,12];ne.label=9;case 9:return ne.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return q=ne.sent(),this.renderReplacedElement(i,n,q),[3,12];case 11:return ne.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof V8&&i.tree?(g=new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,g.render(i.tree)]):[3,14];case 13:v=ne.sent(),i.width&&i.height&&this.ctx.drawImage(v,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),ne.label=14;case 14:if(i instanceof dC&&(B=Math.min(i.bounds.width,i.bounds.height),i.type===H2?i.checked&&(this.ctx.save(),this.path([new si(i.bounds.left+B*.39363,i.bounds.top+B*.79),new si(i.bounds.left+B*.16,i.bounds.top+B*.5549),new si(i.bounds.left+B*.27347,i.bounds.top+B*.44071),new si(i.bounds.left+B*.39694,i.bounds.top+B*.5649),new si(i.bounds.left+B*.72983,i.bounds.top+B*.23),new si(i.bounds.left+B*.84,i.bounds.top+B*.34085),new si(i.bounds.left+B*.39363,i.bounds.top+B*.79)]),this.ctx.fillStyle=Hl(pT),this.ctx.fill(),this.ctx.restore()):i.type===V2&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+B/2,i.bounds.top+B/2,B/4,0,Math.PI*2,!0),this.ctx.fillStyle=Hl(pT),this.ctx.fill(),this.ctx.restore())),RY(i)&&i.value.length){switch(F=this.createFontStyle(a),ee=F[0],C=F[1],L=this.fontMetrics.getMetrics(ee,C).baseline,this.ctx.font=ee,this.ctx.fillStyle=Hl(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=jY(i.styles.textAlign),G=$2(i),P=0,i.styles.textAlign){case 1:P+=G.width/2;break;case 2:P+=G.width;break}D=G.add(P,0,0,-G.height/2+1),this.ctx.save(),this.path([new si(G.left,G.top),new si(G.left+G.width,G.top),new si(G.left+G.width,G.top+G.height),new si(G.left,G.top+G.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new rv(i.value,D),a.letterSpacing,L),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pl(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(j=i.styles.listStyleImage,j.type!==0)return[3,18];q=void 0,H=j.url,ne.label=15;case 15:return ne.trys.push([15,17,,18]),[4,this.context.cache.match(H)];case 16:return q=ne.sent(),this.ctx.drawImage(q,i.bounds.left-(q.width+10),i.bounds.top),[3,18];case 17:return ne.sent(),this.context.logger.error("Error loading list-style-image "+H),[3,18];case 18:return[3,20];case 19:r.listValue&&i.styles.listStyleType!==-1&&(ee=this.createFontStyle(a)[0],this.ctx.font=ee,this.ctx.fillStyle=Hl(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",G=new bf(i.bounds.left,i.bounds.top+ua(i.styles.paddingTop,i.bounds.width),i.bounds.width,YE(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new rv(r.listValue,G),a.letterSpacing,YE(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ne.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return yu(this,void 0,void 0,function(){var i,n,j,a,c,j,s,p,j,g,v,j,B,F,j,C,L,j,P,D,j;return Vc(this,function(q){switch(q.label){case 0:if(pl(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:q.sent(),i=0,n=r.negativeZIndex,q.label=2;case 2:return i<n.length?(j=n[i],[4,this.renderStack(j)]):[3,5];case 3:q.sent(),q.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:q.sent(),a=0,c=r.nonInlineLevel,q.label=7;case 7:return a<c.length?(j=c[a],[4,this.renderNode(j)]):[3,10];case 8:q.sent(),q.label=9;case 9:return a++,[3,7];case 10:s=0,p=r.nonPositionedFloats,q.label=11;case 11:return s<p.length?(j=p[s],[4,this.renderStack(j)]):[3,14];case 12:q.sent(),q.label=13;case 13:return s++,[3,11];case 14:g=0,v=r.nonPositionedInlineLevel,q.label=15;case 15:return g<v.length?(j=v[g],[4,this.renderStack(j)]):[3,18];case 16:q.sent(),q.label=17;case 17:return g++,[3,15];case 18:B=0,F=r.inlineLevel,q.label=19;case 19:return B<F.length?(j=F[B],[4,this.renderNode(j)]):[3,22];case 20:q.sent(),q.label=21;case 21:return B++,[3,19];case 22:C=0,L=r.zeroOrAutoZIndexOrTransformedOrOpacity,q.label=23;case 23:return C<L.length?(j=L[C],[4,this.renderStack(j)]):[3,26];case 24:q.sent(),q.label=25;case 25:return C++,[3,23];case 26:P=0,D=r.positiveZIndex,q.label=27;case 27:return P<D.length?(j=D[P],[4,this.renderStack(j)]):[3,30];case 28:q.sent(),q.label=29;case 29:return P++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var i=this;r.forEach(function(n,a){var c=eA(n)?n.start:n;a===0?i.ctx.moveTo(c.x,c.y):i.ctx.lineTo(c.x,c.y),eA(n)&&i.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(r,i,n,a){this.path(r),this.ctx.fillStyle=i,this.ctx.translate(n,a),this.ctx.fill(),this.ctx.translate(-n,-a)},t.prototype.resizeImage=function(r,i,n){var a;if(r.width===i&&r.height===n)return r;var c=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,s=c.createElement("canvas");s.width=Math.max(1,i),s.height=Math.max(1,n);var p=s.getContext("2d");return p.drawImage(r,0,0,r.width,r.height,0,0,i,n),s},t.prototype.renderBackgroundImage=function(r){return yu(this,void 0,void 0,function(){var i,n,a,c,s,p;return Vc(this,function(g){switch(g.label){case 0:i=r.styles.backgroundImage.length-1,n=function(v){var B,F,C,ce,he,Le,me,we,le,L,ce,he,Le,me,we,P,D,j,q,H,ee,G,ne,Z,le,J,ce,te,K,me,we,Fe,he,Le,$e,Ne,Te,Ge,Y,Ae,fe,be;return Vc(this,function(Me){switch(Me.label){case 0:if(v.type!==0)return[3,5];B=void 0,F=v.url,Me.label=1;case 1:return Me.trys.push([1,3,,4]),[4,a.context.cache.match(F)];case 2:return B=Me.sent(),[3,4];case 3:return Me.sent(),a.context.logger.error("Error loading background-image "+F),[3,4];case 4:return B&&(C=Fw(r,i,[B.width,B.height,B.width/B.height]),ce=C[0],he=C[1],Le=C[2],me=C[3],we=C[4],le=a.ctx.createPattern(a.resizeImage(B,me,we),"repeat"),a.renderRepeat(ce,le,he,Le)),[3,6];case 5:_$(v)?(L=Fw(r,i,[null,null,null]),ce=L[0],he=L[1],Le=L[2],me=L[3],we=L[4],P=m$(v.angle,me,we),D=P[0],j=P[1],q=P[2],H=P[3],ee=P[4],G=document.createElement("canvas"),G.width=me,G.height=we,ne=G.getContext("2d"),Z=ne.createLinearGradient(j,H,q,ee),XE(v.stops,D).forEach(function(ze){return Z.addColorStop(ze.stop,Hl(ze.color))}),ne.fillStyle=Z,ne.fillRect(0,0,me,we),me>0&&we>0&&(le=a.ctx.createPattern(G,"repeat"),a.renderRepeat(ce,le,he,Le))):b$(v)&&(J=Fw(r,i,[null,null,null]),ce=J[0],te=J[1],K=J[2],me=J[3],we=J[4],Fe=v.position.length===0?[cC]:v.position,he=ua(Fe[0],me),Le=ua(Fe[Fe.length-1],we),$e=g$(v,he,Le,me,we),Ne=$e[0],Te=$e[1],Ne>0&&Te>0&&(Ge=a.ctx.createRadialGradient(te+he,K+Le,0,te+he,K+Le,Ne),XE(v.stops,Ne*2).forEach(function(ze){return Ge.addColorStop(ze.stop,Hl(ze.color))}),a.path(ce),a.ctx.fillStyle=Ge,Ne!==Te?(Y=r.bounds.left+.5*r.bounds.width,Ae=r.bounds.top+.5*r.bounds.height,fe=Te/Ne,be=1/fe,a.ctx.save(),a.ctx.translate(Y,Ae),a.ctx.transform(1,0,0,fe,0,0),a.ctx.translate(-Y,-Ae),a.ctx.fillRect(te,be*(K-Ae)+Ae,me,we*be),a.ctx.restore()):a.ctx.fill())),Me.label=6;case 6:return i--,[2]}})},a=this,c=0,s=r.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return c<s.length?(p=s[c],[5,n(p)]):[3,4];case 2:g.sent(),g.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,i,n){return yu(this,void 0,void 0,function(){return Vc(this,function(a){return this.path(ET(n,i)),this.ctx.fillStyle=Hl(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,i,n,a){return yu(this,void 0,void 0,function(){var c,s;return Vc(this,function(p){switch(p.label){case 0:return i<3?[4,this.renderSolidBorder(r,n,a)]:[3,2];case 1:return p.sent(),[2];case 2:return c=BY(a,n),this.path(c),this.ctx.fillStyle=Hl(r),this.ctx.fill(),s=SY(a,n),this.path(s),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return yu(this,void 0,void 0,function(){var i,n,a,c,s,p,g,v,B=this;return Vc(this,function(F){switch(F.label){case 0:return this.applyEffects(r.getEffects(2)),i=r.container.styles,n=!yp(i.backgroundColor)||i.backgroundImage.length,a=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],c=DY(zm(i.backgroundClip,0),r.curves),n||i.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),yp(i.backgroundColor)||(this.ctx.fillStyle=Hl(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:F.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(C){B.ctx.save();var L=K2(r.curves),P=C.inset?0:MY,D=wY(L,-P+(C.inset?1:-1)*C.spread.number,(C.inset?1:-1)*C.spread.number,C.spread.number*(C.inset?-2:2),C.spread.number*(C.inset?-2:2));C.inset?(B.path(L),B.ctx.clip(),B.mask(D)):(B.mask(L),B.ctx.clip(),B.path(D)),B.ctx.shadowOffsetX=C.offsetX.number+P,B.ctx.shadowOffsetY=C.offsetY.number,B.ctx.shadowColor=Hl(C.color),B.ctx.shadowBlur=C.blur.number,B.ctx.fillStyle=C.inset?Hl(C.color):"rgba(0,0,0,1)",B.ctx.fill(),B.ctx.restore()}),F.label=2;case 2:s=0,p=0,g=a,F.label=3;case 3:return p<g.length?(v=g[p],v.style!==0&&!yp(v.color)&&v.width>0?v.style!==2?[3,5]:[4,this.renderDashedDottedBorder(v.color,v.width,s,r.curves,2)]:[3,11]):[3,13];case 4:return F.sent(),[3,11];case 5:return v.style!==3?[3,7]:[4,this.renderDashedDottedBorder(v.color,v.width,s,r.curves,3)];case 6:return F.sent(),[3,11];case 7:return v.style!==4?[3,9]:[4,this.renderDoubleBorder(v.color,v.width,s,r.curves)];case 8:return F.sent(),[3,11];case 9:return[4,this.renderSolidBorder(v.color,s,r.curves)];case 10:F.sent(),F.label=11;case 11:s++,F.label=12;case 12:return p++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,i,n,a,c){return yu(this,void 0,void 0,function(){var s,p,g,v,B,F,C,L,P,D,j,q,H,ee,G,ne,G,ne;return Vc(this,function(Z){return this.ctx.save(),s=EY(a,n),p=ET(a,n),c===2&&(this.path(p),this.ctx.clip()),eA(p[0])?(g=p[0].start.x,v=p[0].start.y):(g=p[0].x,v=p[0].y),eA(p[1])?(B=p[1].end.x,F=p[1].end.y):(B=p[1].x,F=p[1].y),n===0||n===2?C=Math.abs(g-B):C=Math.abs(v-F),this.ctx.beginPath(),c===3?this.formatPath(s):this.formatPath(p.slice(0,2)),L=i<3?i*3:i*2,P=i<3?i*2:i,c===3&&(L=i,P=i),D=!0,C<=L*2?D=!1:C<=L*2+P?(j=C/(2*L+P),L*=j,P*=j):(q=Math.floor((C+P)/(L+P)),H=(C-q*L)/(q-1),ee=(C-(q+1)*L)/q,P=ee<=0||Math.abs(P-H)<Math.abs(P-ee)?H:ee),D&&(c===3?this.ctx.setLineDash([0,L+P]):this.ctx.setLineDash([L,P])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=Hl(r),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(eA(p[0])&&(G=p[3],ne=p[0],this.ctx.beginPath(),this.formatPath([new si(G.end.x,G.end.y),new si(ne.start.x,ne.start.y)]),this.ctx.stroke()),eA(p[1])&&(G=p[1],ne=p[2],this.ctx.beginPath(),this.formatPath([new si(G.end.x,G.end.y),new si(ne.start.x,ne.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return yu(this,void 0,void 0,function(){var i;return Vc(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Hl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=CY(r),[4,this.renderStack(i)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(aI),RY=function(e){return e instanceof H8||e instanceof Q8?!0:e instanceof dC&&e.type!==V2&&e.type!==H2},DY=function(e,t){switch(e){case 0:return K2(t);case 2:return vY(t);case 1:default:return W2(t)}},jY=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},UY=["-apple-system","system-ui"],OY=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return UY.indexOf(t)===-1}):e},zY=function(e){XA(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return t.prototype.render=function(r){return yu(this,void 0,void 0,function(){var i,n;return Vc(this,function(a){switch(a.label){case 0:return i=W5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,QY(i)];case 1:return n=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Hl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(aI),QY=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},HY=function(){function e(t){var r=t.id,i=t.enabled;this.id=r,this.enabled=i,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,xy([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,xy([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,xy([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,xy([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),VY=function(){function e(t,r){var i;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new HY({id:this.instanceName,enabled:t.logging}),this.cache=(i=t.cache)!==null&&i!==void 0?i:new uY(this,t)}return e.instanceCount=1,e}(),oI=function(e,t){return t===void 0&&(t={}),GY(e,t)};typeof window<"u"&&eI.setContext(window);var GY=function(e,t){return yu(void 0,void 0,void 0,function(){var r,i,n,a,c,s,p,g,v,B,F,C,L,P,D,j,q,H,ee,G,Z,ne,Z,le,J,ce,te,K,me,we,Fe,he,Le,$e,Ne,Te,Ge,Y,Ae,fe;return Vc(this,function(be){switch(be.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(i=r.defaultView,!i)throw new Error("Document is not attached to a Window");return n={allowTaint:(le=t.allowTaint)!==null&&le!==void 0?le:!1,imageTimeout:(J=t.imageTimeout)!==null&&J!==void 0?J:15e3,proxy:t.proxy,useCORS:(ce=t.useCORS)!==null&&ce!==void 0?ce:!1},a=L5({logging:(te=t.logging)!==null&&te!==void 0?te:!0,cache:t.cache},n),c={windowWidth:(K=t.windowWidth)!==null&&K!==void 0?K:i.innerWidth,windowHeight:(me=t.windowHeight)!==null&&me!==void 0?me:i.innerHeight,scrollX:(we=t.scrollX)!==null&&we!==void 0?we:i.pageXOffset,scrollY:(Fe=t.scrollY)!==null&&Fe!==void 0?Fe:i.pageYOffset},s=new bf(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),p=new VY(a,s),g=(he=t.foreignObjectRendering)!==null&&he!==void 0?he:!1,v={allowTaint:(Le=t.allowTaint)!==null&&Le!==void 0?Le:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:g,copyStyles:g},p.logger.debug("Starting document clone with size "+s.width+"x"+s.height+" scrolled to "+-s.left+","+-s.top),B=new CT(p,e,v),F=B.clonedReferenceElement,F?[4,B.toIFrame(r,s)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return C=be.sent(),L=fC(F)||KZ(F)?wK(F.ownerDocument):F_(p,F),P=L.width,D=L.height,j=L.left,q=L.top,H=qY(p,F,t.backgroundColor),ee={canvas:t.canvas,backgroundColor:H,scale:(Ne=($e=t.scale)!==null&&$e!==void 0?$e:i.devicePixelRatio)!==null&&Ne!==void 0?Ne:1,x:((Te=t.x)!==null&&Te!==void 0?Te:0)+j,y:((Ge=t.y)!==null&&Ge!==void 0?Ge:0)+q,width:(Y=t.width)!==null&&Y!==void 0?Y:Math.ceil(P),height:(Ae=t.height)!==null&&Ae!==void 0?Ae:Math.ceil(D)},g?(p.logger.debug("Document cloned, using foreign object rendering"),Z=new zY(p,ee),[4,Z.render(F)]):[3,3];case 2:return G=be.sent(),[3,5];case 3:return p.logger.debug("Document cloned, element located at "+j+","+q+" with size "+P+"x"+D+" using computed rendering"),p.logger.debug("Starting DOM parsing"),ne=q8(p,F),H===ne.styles.backgroundColor&&(ne.styles.backgroundColor=pf.TRANSPARENT),p.logger.debug("Starting renderer for element at "+ee.x+","+ee.y+" with size "+ee.width+"x"+ee.height),Z=new PY(p,ee),[4,Z.render(ne)];case 4:G=be.sent(),be.label=5;case 5:return(!((fe=t.removeContainer)!==null&&fe!==void 0)||fe)&&(CT.destroy(C)||p.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),p.logger.debug("Finished rendering"),[2,G]}})})},qY=function(e,t,r){var i=t.ownerDocument,n=i.documentElement?ev(e,getComputedStyle(i.documentElement).backgroundColor):pf.TRANSPARENT,a=i.body?ev(e,getComputedStyle(i.body).backgroundColor):pf.TRANSPARENT,c=typeof r=="string"?ev(e,r):r===null?pf.TRANSPARENT:4294967295;return t===i.documentElement?yp(n)?yp(a)?c:a:n:c};const KY=Object.freeze(Object.defineProperty({__proto__:null,default:oI},Symbol.toStringTag,{value:"Module"}));xg.register(eC,tC,X4,yg,$4,W4,Y4,J4,Z4,GF);const WY=()=>{const[e,t]=xe.useState({totals:{totalUsers:0,serviceProviders:0,totalPopulation:0},demographics:{ageGroups:{},employment:{}},skills:{},skilledPerTrade:{byRole:{},bySkill:{}},mostBookedServices:{},totalsOverTime:{labels:[],values:[]},activeUsers:0,totalBookings:0,popularServices:[]}),[r,i]=xe.useState(!0),[n,a]=xe.useState(null),[c,s]=xe.useState("12"),p=xe.useRef(null),g=xe.useRef(null),v=xe.useRef(null),B=xe.useRef(null),F=xe.useRef(null),C=xe.useRef(null),L=(K,me)=>{const we=K.totalsOverTime.values;if(we.length<2)return"Insufficient data for trend analysis.";const Fe=we[we.length-1],he=we[we.length-2],Le=he>0?((Fe-he)/he*100).toFixed(1):0,$e=we.length>1?((Fe-we[0])/(we[0]||1)*100).toFixed(1):0,Ne=we.reduce((Te,Ge)=>Te+Ge,0)/we.length;return`User registration shows ${Le>=0?"positive":"negative"} momentum with ${Math.abs(Le)}% ${Le>=0?"growth":"decline"} from last month. Overall ${$e}% increase over ${me} months. Average monthly registrations: ${Math.round(Ne)}.`},P=K=>{const me=K.demographics.ageGroups||{};if(Object.keys(me).length===0)return"No age distribution data available.";const Fe=Object.entries(me).sort(($e,Ne)=>Ne[1]-$e[1])[0],he=Object.values(me).reduce(($e,Ne)=>$e+Ne,0),Le=(Fe[1]/he*100).toFixed(1);return`The ${Fe[0]} age group dominates with ${Le}% of users (${Fe[1]} users). This suggests the platform primarily serves ${Fe[0].includes("18-25")||Fe[0].includes("26-35")?"young adults":Fe[0].includes("36-45")?"middle-aged adults":"mature adults"}.`},D=K=>{const me=K.demographics.employment;if(!me)return"Employment data not available.";const we=(me.worker||0)+(me.nonWorker||0);if(we===0)return"No employment data available.";const Fe=(me.worker/we*100).toFixed(1),he=(me.nonWorker/we*100).toFixed(1);return`Employment rate stands at ${Fe}% (${me.worker} employed users) vs ${he}% unemployed (${me.nonWorker} users). ${Fe>50?"Majority of users are employed, indicating strong workforce participation.":"Significant portion of users are unemployed, suggesting potential for skill development programs."}`},j=K=>{const me=K.skills;if(Object.keys(me).length===0)return"No skills data available.";const we=Object.entries(me).sort((Ne,Te)=>Te[1]-Ne[1]),Fe=we[0],he=Object.values(me).reduce((Ne,Te)=>Ne+Te,0),Le=(Fe[1]/he*100).toFixed(1),$e=we.length;return`"${Fe[0]}" is the most common skill with ${Le}% adoption (${Fe[1]} users). Platform offers ${$e} different skills, indicating ${$e>10?"good":"moderate"} skill diversity. ${Le>30?"High concentration in top skill suggests specialization opportunity.":"Well-distributed skills show broad service coverage."}`},q=K=>{if(K.popularServices.length===0)return"No service booking data available.";const me=K.popularServices[0],we=K.totalBookings,Fe=(me.count/we*100).toFixed(1);return`"${me.service}" leads service bookings with ${Fe}% market share (${me.count} bookings). Total platform bookings: ${we}. ${Fe>40?"High demand concentration suggests specialization in popular services.":"Well-distributed demand indicates diverse service needs."}`},H=K=>{const me=K.skilledPerTrade.byRole||{};if(Object.keys(me).length===0)return"No provider role data available.";const we=Object.entries(me).sort(($e,Ne)=>Ne[1]-$e[1]),Fe=we[0],he=Object.values(me).reduce(($e,Ne)=>$e+Ne,0),Le=(Fe[1]/he*100).toFixed(1);return`"${Fe[0]}" is the most represented role with ${Le}% of providers (${Fe[1]} providers). Network includes ${we.length} different roles. ${Le>30?"Specialized provider network with strong focus on key trades.":"Diverse provider network covering multiple service categories."}`},ee=(K,me)=>{const we=P(K),Fe=H(K),he=K.totals.totalUsers||0,Le=K.totals.serviceProviders||0,$e=K.totalBookings,Ne=K.activeUsers,Te=K.totalsOverTime.values,Ge=Te.length>1?Math.round((Te[Te.length-1]-Te[Te.length-2])/(Te[Te.length-2]||1)*100):0,Y=K.demographics.employment,Ae=Y?.worker&&Y?.nonWorker?Math.round(Y.worker/(Y.worker+Y.nonWorker)*100):0,fe=Object.entries(K.skills).sort((Me,ze)=>ze[1]-Me[1])[0],be=K.popularServices[0];return`SkillConnect platform demonstrates robust performance with ${he.toLocaleString()} total users and ${Le.toLocaleString()} service providers, achieving ${$e.toLocaleString()} service bookings. The platform shows ${Ge>=0?"positive":"challenging"} growth momentum with a ${Math.abs(Ge)}% ${Ge>=0?"increase":"decrease"} in user registrations, maintaining ${Ne.toLocaleString()} active users. User demographics reveal a ${Ae}% employment rate, with the platform primarily serving ${we.includes("young adults")?"young professionals":we.includes("middle-aged")?"established adults":"diverse age groups"}. The skills ecosystem features "${fe?.[0]||"various skills"}" as the most demanded skill, complemented by "${be?.service||"popular services"}" leading service bookings. The provider network shows ${Fe.includes("Specialized")?"strong specialization":"good diversity"} across ${Object.keys(K.skilledPerTrade.byRole||{}).length} different roles, indicating a ${$e>he*.5?"highly engaged":"moderately active"} marketplace. Overall, the platform exhibits healthy growth patterns with opportunities for ${Ae<50?"employment-focused initiatives":"continued expansion"} and ${Object.keys(K.skills).length>15?"diverse skill development":"targeted skill enhancement"}.`};xe.useEffect(()=>{G()},[c]);const G=async()=>{i(!0),a(null);try{const[K,me,we,Fe,he,Le]=await Promise.all([Nr.get("/reports/totals"),Nr.get("/reports/demographics"),Nr.get("/reports/skills"),Nr.get("/reports/skilled-per-trade"),Nr.get("/reports/most-booked-services"),Nr.get(`/reports/totals-over-time?months=${c}`)]),$e=K.data?.data||K.data||{},Ne=me.data?.data||me.data||{},Te=we.data?.data||we.data||{},Ge=Fe.data?.data||Fe.data||{},Y=he.data?.data||he.data||{},Ae=Le.data?.data||Le.data||{labels:[],values:[]},fe=typeof Y=="object"&&Y!==null?Object.values(Y).filter(Me=>typeof Me=="number").reduce((Me,ze)=>Me+ze,0):0,be=typeof Y=="object"&&Y!==null?Object.entries(Y).filter(([,Me])=>typeof Me=="number").map(([Me,ze])=>({service:Me,count:ze})).sort((Me,ze)=>ze.count-Me.count).slice(0,10):[];t({totals:$e,demographics:Ne,skills:Te,skilledPerTrade:Ge,mostBookedServices:Y,totalsOverTime:Ae,activeUsers:(()=>{const Me=$e?.totalUsers;return typeof Me=="number"&&!isNaN(Me)&&Me>0?Math.floor(Me*.7):0})(),totalBookings:typeof fe=="number"&&!isNaN(fe)?fe:0,popularServices:be}),pi.success("Analytics data loaded successfully!")}catch(K){if(console.error("Failed to fetch analytics data:",K),K.code==="ERR_NETWORK"||K.message?.includes("Network Error")||K.message?.includes("ERR_CONNECTION_REFUSED")){const we="Cannot connect to the server. Please ensure the backend server is running and accessible.";a(we),pi.error(we,{duration:5e3})}else if(K.response?.status===401){const we="Authentication required. Please log in again.";a(we),pi.error(we)}else if(K.response?.status===403){const we="Access denied. You don't have permission to view analytics.";a(we),pi.error(we)}else{const we=K.response?.data?.message||K.message||"Failed to load analytics data";a(we),pi.error(we)}}finally{i(!1)}},ne=async()=>{try{pi.loading("Generating PDF report..."),xg.register(eC,tC,X4,yg,$4,W4,Y4,J4,Z4);const K=new ki("p","mm","a4"),me=K.internal.pageSize.getWidth(),we=K.internal.pageSize.getHeight(),Fe=20;let he=Fe;const Le=(dt,zt,ve,Ct,Pt=11)=>{K.setFontSize(Pt);const Ve=K.splitTextToSize(dt,Ct);return K.text(Ve,zt,ve),ve+Ve.length*Pt*.4},$e=dt=>he+dt>we-Fe?(K.addPage(),he=Fe,!0):!1;K.setFontSize(24),K.setFont("helvetica","bold"),K.text("System Analytics Report",me/2,he,{align:"center"}),he+=15,K.setFontSize(14),K.setFont("helvetica","normal"),K.text(`Generated on ${new Date().toLocaleDateString()}`,me/2,he,{align:"center"}),he+=10,K.text(`Report Period: Last ${c} months`,me/2,he,{align:"center"}),K.addPage(),he=Fe,K.setFontSize(18),K.setFont("helvetica","bold"),K.text("Executive Summary",Fe,he),he+=15;const Ne=`This comprehensive analytics report provides detailed insights into the SkillConnect platform's performance and user engagement metrics. The report covers key performance indicators, user demographics, skill distribution, and service utilization patterns over the past ${c} months.

Key highlights include:
 Total registered users: ${e.totals.totalUsers?.toLocaleString()||0}
 Active service providers: ${e.totals.serviceProviders?.toLocaleString()||0}
 Total service bookings: ${e.totalBookings.toLocaleString()}
 Platform growth rate: ${e.totalsOverTime.values.length>1?Math.round((e.totalsOverTime.values[e.totalsOverTime.values.length-1]-e.totalsOverTime.values[e.totalsOverTime.values.length-2])/(e.totalsOverTime.values[e.totalsOverTime.values.length-2]||1)*100):0}%

The following sections provide detailed analysis and visualizations of these metrics.`;he=Le(Ne,Fe,he,me-2*Fe),$e(80),he+=10,K.setFontSize(16),K.setFont("helvetica","bold"),K.text("Platform Overview",Fe,he),he+=10;const Te=[["Metric","Value","Description"],["Total Users",e.totals.totalUsers?.toLocaleString()||"0","Registered platform users"],["Service Providers",e.totals.serviceProviders?.toLocaleString()||"0","Active service providers"],["Total Population",e.totals.totalPopulation?.toLocaleString()||"0","Total population in coverage area"],["Active Users",e.activeUsers.toLocaleString(),"Estimated active users (70%)"],["Total Requests",e.totalBookings.toLocaleString(),"Completed service requests"]];if(B1(K,{startY:he,head:[Te[0]],body:Te.slice(1),theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[37,99,235]},margin:{left:Fe,right:Fe}}),he=K.lastAutoTable.finalY+15,$e(100),K.setFontSize(16),K.setFont("helvetica","bold"),K.text("User Demographics Analysis",Fe,he),he+=10,e.demographics.ageGroups&&Object.keys(e.demographics.ageGroups).length>0){K.setFontSize(14),K.setFont("helvetica","bold"),K.text("Age Distribution",Fe,he),he+=8;const dt=[["Age Group","Count","Percentage"]],zt=Object.values(e.demographics.ageGroups).reduce((ve,Ct)=>ve+Ct,0);Object.entries(e.demographics.ageGroups).forEach(([ve,Ct])=>{const Pt=zt>0?(Ct/zt*100).toFixed(1):"0.0";dt.push([ve,Ct.toString(),`${Pt}%`])}),B1(K,{startY:he,head:[dt[0]],body:dt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Fe,right:Fe}}),he=K.lastAutoTable.finalY+10}if(e.demographics.employment){$e(40),K.setFontSize(14),K.setFont("helvetica","bold"),K.text("Employment Status",Fe,he),he+=8;const dt=[["Status","Count","Percentage"]],zt=(e.demographics.employment.worker||0)+(e.demographics.employment.nonWorker||0);if(e.demographics.employment.worker){const ve=zt>0?(e.demographics.employment.worker/zt*100).toFixed(1):"0.0";dt.push(["Employed",e.demographics.employment.worker.toString(),`${ve}%`])}if(e.demographics.employment.nonWorker){const ve=zt>0?(e.demographics.employment.nonWorker/zt*100).toFixed(1):"0.0";dt.push(["Unemployed",e.demographics.employment.nonWorker.toString(),`${ve}%`])}B1(K,{startY:he,head:[dt[0]],body:dt.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Fe,right:Fe}}),he=K.lastAutoTable.finalY+10}$e(80),K.setFontSize(16),K.setFont("helvetica","bold"),K.text("Skills & Services Analysis",Fe,he),he+=10,K.setFontSize(14),K.setFont("helvetica","bold"),K.text("Top Skills Distribution",Fe,he),he+=8;const Ge=[["Skill","Users","Percentage"]],Y=Object.values(e.skills).reduce((dt,zt)=>dt+zt,0);Object.entries(e.skills).slice(0,10).forEach(([dt,zt])=>{const ve=Y>0?(zt/Y*100).toFixed(1):"0.0";Ge.push([dt,zt.toString(),`${ve}%`])}),B1(K,{startY:he,head:[Ge[0]],body:Ge.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Fe,right:Fe}}),he=K.lastAutoTable.finalY+10,$e(60),K.setFontSize(14),K.setFont("helvetica","bold"),K.text("Popular Services",Fe,he),he+=8;const Ae=[["Service","Bookings","Percentage"]],fe=e.popularServices.reduce((dt,zt)=>dt+zt.count,0);e.popularServices.slice(0,10).forEach(({service:dt,count:zt})=>{const ve=fe>0?(zt/fe*100).toFixed(1):"0.0";Ae.push([dt,zt.toString(),`${ve}%`])}),B1(K,{startY:he,head:[Ae[0]],body:Ae.slice(1),theme:"grid",styles:{fontSize:9},headStyles:{fillColor:[37,99,235]},margin:{left:Fe,right:Fe}}),he=K.lastAutoTable.finalY+15,K.addPage(),he=Fe,K.setFontSize(18),K.setFont("helvetica","bold"),K.text("Visual Analytics",Fe,he),he+=15;const be=[{ref:p,title:"User Registration Trends",height:80,getInsights:()=>L(e,c)},{ref:g,title:"Age Distribution",height:60,getInsights:()=>P(e)},{ref:v,title:"Employment Status",height:60,getInsights:()=>D(e)},{ref:B,title:"Skills Distribution",height:80,getInsights:()=>j(e)},{ref:F,title:"Popular Services",height:70,getInsights:()=>q(e)},{ref:C,title:"Service Provider Network",height:70,getInsights:()=>H(e)}];for(const dt of be)if(dt.ref?.current)try{$e(dt.height+40),K.setFontSize(14),K.setFont("helvetica","bold"),K.text(dt.title||"Untitled Chart",Fe,he),he+=10;const zt=await oI(dt.ref.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",ignoreElements:ir=>{const jr=window.getComputedStyle(ir);return jr.display==="none"||jr.visibility==="hidden"}}),ve=zt.toDataURL("image/png"),Ct=me-2*Fe,Pt=zt.height*Ct/zt.width;K.addImage(ve,"PNG",Fe,he,Ct,Pt),he+=Pt+8,K.setFontSize(10),K.setFont("helvetica","italic"),K.setTextColor(100,100,100);const Ve=dt.getInsights?dt.getInsights():"No insights available.",lr=K.splitTextToSize(`${Ve}`,me-2*Fe);K.text(lr,Fe,he),he+=lr.length*10*.4+12,K.setTextColor(0,0,0)}catch(zt){console.error(`Chart capture failed (${dt.title}):`,zt),he+=10}$e(60),K.setFontSize(16),K.setFont("helvetica","bold"),K.text("Comprehensive Summary",Fe,he),he+=12,K.setFontSize(11),K.setFont("helvetica","normal");const Me=ee(e,c),ze=K.splitTextToSize(Me,me-2*Fe);K.text(ze,Fe,he),he+=ze.length*11*.4+15;const We=K.internal.getNumberOfPages();for(let dt=1;dt<=We;dt++)K.setPage(dt),K.setFontSize(8),K.setFont("helvetica","normal"),K.text(`Page ${dt} of ${We}`,me/2,we-10,{align:"center"}),K.text(`SkillConnect Analytics Report - ${new Date().toLocaleDateString()}`,Fe,we-10);const ut=`skillconnect-analytics-report-${new Date().toISOString().split("T")[0]}.pdf`;K.save(ut),pi.dismiss(),pi.success("PDF report generated successfully!")}catch(K){console.error("PDF generation failed:",K),pi.dismiss(),pi.error("Failed to generate PDF report")}};if(r)return d.jsxs("div",{className:"analytics-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"System Analytics"}),d.jsx("p",{className:"header-description",children:"Loading analytics data..."})]})}),d.jsx("div",{className:"analytics-card loading-card",children:d.jsx("div",{className:"loading-wrapper",children:d.jsx("div",{className:"loader"})})})]});if(n)return d.jsxs("div",{className:"analytics-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"System Analytics"}),d.jsx("p",{className:"header-description",children:"Error loading analytics data"})]})}),d.jsx("div",{className:"analytics-card error-card",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:" Error Loading Data"}),d.jsx("p",{children:n}),n.includes("Cannot connect to the server")&&d.jsxs("div",{className:"connection-help",children:[d.jsx("p",{children:d.jsx("strong",{children:"Troubleshooting steps:"})}),d.jsxs("ul",{children:[d.jsx("li",{children:"Ensure the backend server is running on port 4000"}),d.jsx("li",{children:"Check if the server address (192.168.1.3:4000) is correct"}),d.jsx("li",{children:"Verify your network connection"}),d.jsx("li",{children:"Check if the API base URL in your environment variables is correct"})]})]}),d.jsxs("button",{onClick:G,className:"retry-btn",children:[d.jsx(pv,{})," Retry"]})]})})]});const Z={labels:e.totalsOverTime.labels,datasets:[{label:"New User Registrations",data:e.totalsOverTime.values,borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",tension:.4,fill:!0}]},le={labels:Object.keys(e.skills).slice(0,10),datasets:[{label:"Users with Skill",data:Object.values(e.skills).slice(0,10),backgroundColor:["#2563eb","#16a34a","#ca8a04","#dc2626","#7c3aed","#ea580c","#0891b2","#be185d","#4b5563","#0f766e"]}]},J={labels:Object.keys(e.demographics.ageGroups||{}),datasets:[{label:"Users by Age Group",data:Object.values(e.demographics.ageGroups||{}),backgroundColor:"#2563eb"}]},ce={labels:e.popularServices.slice(0,8).map(K=>K.service.length>15?K.service.substring(0,15)+"...":K.service),datasets:[{label:"Service Bookings",data:e.popularServices.slice(0,8).map(K=>K.count),backgroundColor:"#16a34a"}]},te={labels:["Employed","Unemployed"],datasets:[{label:"Employment Status",data:[e.demographics.employment?.worker||0,e.demographics.employment?.nonWorker||0],backgroundColor:["#16a34a","#dc2626"],borderWidth:2,borderColor:"#ffffff"}]};return d.jsxs("div",{className:"analytics-container",children:[d.jsxs("div",{className:"analytics-header",children:[d.jsxs("div",{children:[d.jsx("h1",{children:"System Analytics Dashboard"}),d.jsx("p",{className:"header-description",children:"Real-time insights from database analytics"})]}),d.jsxs("div",{className:"header-actions",children:[d.jsxs("select",{value:c,onChange:K=>s(K.target.value),className:"time-select",children:[d.jsx("option",{value:"6",children:" Last 6 months"}),d.jsx("option",{value:"12",children:" Last 12 months"}),d.jsx("option",{value:"24",children:" Last 24 months"})]}),d.jsxs("button",{onClick:G,className:"refresh-btn",title:"Refresh data",children:[d.jsx(pv,{})," Refresh"]})]})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" Platform Overview"}),d.jsx("div",{className:"card-subinfo",children:"Real-time metrics from database"})]}),d.jsxs("div",{className:"metrics-grid",children:[d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon users",children:d.jsx(cf,{})}),d.jsx("h3",{className:"metric-title",children:"Total Users"}),d.jsx("p",{className:"metric-value",children:typeof e.totals?.totalUsers=="number"?e.totals.totalUsers.toLocaleString():0}),d.jsx("div",{className:"metric-description",children:"Registered platform users"})]}),d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon providers",children:d.jsx(lf,{})}),d.jsx("h3",{className:"metric-title",children:"Service Providers"}),d.jsx("p",{className:"metric-value",children:typeof e.totals?.serviceProviders=="number"?e.totals.serviceProviders.toLocaleString():0}),d.jsx("div",{className:"metric-description",children:"Active service providers"})]}),d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon bookings",children:d.jsx(qU,{})}),d.jsx("h3",{className:"metric-title",children:"Total Requests"}),d.jsx("p",{className:"metric-value",children:typeof e.totalBookings=="number"?e.totalBookings.toLocaleString():0}),d.jsx("div",{className:"metric-description",children:"Completed service requests"})]}),d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon jobfairs",children:d.jsx(W6,{})}),d.jsx("h3",{className:"metric-title",children:"Active Users"}),d.jsx("p",{className:"metric-value",children:typeof e.activeUsers=="number"?e.activeUsers.toLocaleString():0}),d.jsx("div",{className:"metric-description",children:"~70% of total users"})]})]})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" User Registration Trends"}),d.jsx("div",{className:"card-subinfo",children:"Monthly user growth over time"})]}),d.jsx("div",{className:"chart-container user-growth-chart",ref:p,children:d.jsx($H,{data:Z,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2.5,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"card-header",children:d.jsx("h2",{children:" User Demographics"})}),d.jsxs("div",{className:"charts-grid",children:[d.jsxs("div",{className:"chart-item",children:[d.jsx("h4",{children:"Age Distribution"}),d.jsxs("div",{className:"chart-wrapper age-distribution-chart",ref:g,children:[d.jsx(a3,{data:J,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(K){return`${K.label}: ${K.parsed.y} users`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{ticks:{maxRotation:0,minRotation:0}}}}}),d.jsx("div",{className:"card-subinfo",children:"Age distribution and employment status"})]})]}),d.jsxs("div",{className:"chart-item",children:[d.jsx("h4",{children:"Employment Status"}),d.jsx("div",{className:"chart-wrapper employment-chart",ref:v,children:d.jsx(o3,{data:te,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.2,plugins:{legend:{position:"bottom",labels:{boxWidth:10,font:{size:10},padding:10}},tooltip:{callbacks:{label:function(K){const me=K.label||"",we=K.parsed||0,Fe=K.dataset.data.reduce((Le,$e)=>Le+$e,0),he=Fe>0?Math.round(we/Fe*100):0;return`${me}: ${we} (${he}%)`}}}},cutout:"65%"}})}),d.jsx("div",{className:"employment-summary",children:d.jsxs("div",{className:"employment-rate",children:[d.jsx("span",{className:"rate-label",children:"Employment Rate:"}),d.jsxs("span",{className:"rate-value",children:[(()=>{const K=e.demographics.employment?.worker||0,me=e.demographics.employment?.nonWorker||0,we=K+me;return we>0?Math.round(K/we*100):0})(),"%"]})]})})]})]})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"card-header",children:d.jsx("h2",{children:" Skills & Services Analysis"})}),d.jsxs("div",{className:"charts-grid",children:[d.jsxs("div",{className:"chart-item",children:[d.jsx("h4",{children:"Top Skills Distribution"}),d.jsxs("div",{className:"chart-wrapper skills-chart",ref:B,children:[d.jsx(o3,{data:le,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1.5,plugins:{legend:{position:"right",labels:{boxWidth:15,font:{size:11}}}}}}),d.jsx("div",{className:"card-subinfo",children:"Most demanded skills and popular services"})]})]}),d.jsxs("div",{className:"chart-item",children:[d.jsx("h4",{children:"Popular Services"}),d.jsx("div",{className:"chart-wrapper services-chart",ref:F,children:d.jsx(a3,{data:ce,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(K){return`${K.label}: ${K.parsed.y} bookings`}}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}},x:{ticks:{maxRotation:45,minRotation:45}}}}})})]})]})]}),d.jsxs("button",{className:"fixed-export-btn",onClick:ne,title:"Export Full Report",children:[d.jsx(F4,{})," Export Full Report"]})]})},$Y=()=>{const[e,t]=xe.useState({totals:{totalUsers:0,serviceProviders:0,totalPopulation:0},demographics:{ageGroups:{},employment:{}},skills:{},skilledPerTrade:{byRole:{},bySkill:{}},mostBookedServices:{},totalsOverTime:{labels:[],values:[]},activeUsers:0,totalBookings:0,popularServices:[]}),[r,i]=xe.useState({barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]}),[n,a]=xe.useState({isActive:!1,lastGenerated:null,recommendationSources:{ruleBased:0,contentBased:0,collaborative:0,aiBased:0}}),[c,s]=xe.useState(!0),[p,g]=xe.useState(null),[v,B]=xe.useState("12");xe.useEffect(()=>{D()},[v]);const F=G=>{const ne={barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]},Z=G.demographics,le=Z.ageGroups?.["18-35"]?.total||0,J=Z.ageGroups?.["56-65"]?.total||Z.ageGroups?.["65+"]?.total||0;le>G.totals.totalUsers*.3&&ne.barangayProjects.push({title:"Youth Innovation Hub",description:"Modern facility catering to young entrepreneurs and tech learners",priority:"High",impact:"Economic Development",rationale:`Your community has ${le} young people (${(le/G.totals.totalUsers*100).toFixed(1)}% of population). This represents significant untapped potential. A Youth Innovation Hub would provide digital tools, entrepreneurship training, and startup incubation. Youth are most adaptable to technology and most likely to create jobs for their peers. Investment now builds economic resilience for the next 20+ years.`,estimatedCost:"1.5M - 2.5M",timeline:"6-9 months",source:"content-based",confidence:.85}),J>G.totals.totalUsers*.2&&ne.communityPrograms.push({title:"Senior Citizen Digital Inclusion Program",description:"Dedicated support for elderly residents to access platform services",targetGroup:"Seniors (55+ years)",focus:"Digital literacy and service access",duration:"Ongoing",rationale:`Your community includes ${J} seniors (${(J/G.totals.totalUsers*100).toFixed(1)}% of population). Many face barriers using digital platforms yet possess valuable skills. Program enables: (1) Seniors finding affordable services easily, (2) Senior providers reaching more customers, (3) Youth jobs as digital mentors, (4) Inclusive digital economy. Creates intergenerational employment while ensuring no one is left behind.`,source:"content-based",confidence:.9});const ce=G.skills,te=Object.keys(ce).length;return te<5&&ne.skillsTraining.push({title:" Skills Diversification Program (Add New Skill Types)",description:"Expand skill offerings by introducing completely new types of skills to fill community gaps and create more economic opportunities",targetAudience:"All interested residents",duration:"6 months",expectedParticipants:Math.floor(G.totals.totalUsers*.2),priority:"Critical",skills:Object.keys(ce).slice(0,5),rationale:`CRITICAL ANALYSIS: Only ${te} skill categories serving ${G.totals.totalUsers} residents with ${G.totalBookings} monthly service requests = severe supply gap. Current offerings: ${Object.keys(G.skills).slice(0,3).join(", ")}. Adding new skills (electrical, plumbing, welding, automotive, digital) would: (1) Reduce external dependency 40-60%, (2) Create 15-25 jobs immediately, (3) Increase fulfillment from current to 85%+, (4) Retain approximately ${Math.ceil(G.totalBookings*500/te)}K annually internally. Communities with 10+ skill categories show 3x higher economic activity and 2x faster employment growth.`,source:"content-based",confidence:.8}),ne},C=G=>{const ne={barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]},Z=G.activeUsers,le=G.totalBookings,J=G.totalsOverTime.values.length>1?(G.totalsOverTime.values[G.totalsOverTime.values.length-1]-G.totalsOverTime.values[G.totalsOverTime.values.length-2])/Math.max(G.totalsOverTime.values[G.totalsOverTime.values.length-2],1)*100:0,ce=Z/G.totals.totalUsers,te=le/G.totals.totalUsers;return ce>.7&&le>300&&J>20&&(ne.barangayProjects.push({title:" Community Growth Expansion Center (Scale Up Existing Services)",description:"Larger facility to handle rapidly increasing demand for current services",priority:"Critical",impact:"Scalable Infrastructure",rationale:`URGENT SCALING NEED: Growing ${J.toFixed(1)}%/month at ${Math.round(ce*100)}% engagement (benchmark: 30-40% excellent). Projections show ${Math.ceil(G.totals.totalUsers*(1+J/100)**6)} users in 6 months = need 2-3x current capacity. EXPANSION FACILITY specifications: (1) Training halls for ${Math.ceil(G.totalBookings*.15)} concurrent sessions, (2) Digital space for ${Math.ceil(G.totals.serviceProviders*.4)} providers, (3) Client matching center for 500+ monthly transactions, (4) Equipment storage eliminating outsourcing. FINANCIAL IMPACT: Expanding now prevents losing 35-45% demand to competitors. ROI: 3-4.5M investment recovers in 18-24 months through booking fees.`,estimatedCost:"3.0M - 4.5M",timeline:"8-12 months",source:"collaborative",confidence:.95}),ne.priorityActions.push({action:"Implement Community Outreach Strategy",description:"Leverage successful patterns from similar growing communities to expand reach",timeline:"Within 2 months",responsible:"Community Expansion Team",priority:"Critical",rationale:"Pattern matching shows similar communities succeeded with proactive outreach",source:"collaborative",confidence:.9})),te<.3&&ce<.5&&ne.communityPrograms.push({title:"Community Engagement Initiative",description:"Based on patterns from similar communities with low participation",targetGroup:"Inactive community members",focus:"Increase platform participation",duration:"3 months pilot",rationale:"Low engagement patterns similar to communities that improved through engagement programs",source:"collaborative",confidence:.75}),ne},L=async G=>{try{console.log(" Fetching AI recommendations...");const ne=await Nr.post("/admin/recommendations",G);if(ne.data.success){const Z=ne.data.data,le={barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]};return["barangayProjects","skillsTraining","communityPrograms","priorityActions"].forEach(J=>{Z[J]&&Array.isArray(Z[J])&&Z[J].forEach(ce=>{ce&&typeof ce=="object"&&ce.title&&le[J].push({...ce,source:"ai-based",confidence:ce.confidence||.85,title:ce.title||"Untitled AI Recommendation",description:ce.description||"No description provided",priority:ce.priority||"Medium"})})}),console.log(" AI recommendations validated:",le),le}return{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]}}catch(ne){return console.error(" AI recommendations failed:",ne),{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]}}},P=(G,ne,Z,le)=>{const J=["barangayProjects","skillsTraining","communityPrograms","priorityActions"],ce={barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]},te={"rule-based":1,"content-based":1.2,collaborative:1.3,"ai-based":1.1},K={ruleBased:0,contentBased:0,collaborative:0,aiBased:0},me=(Fe,he)=>{const Le=Fe.toLowerCase().replace(/[^\w\s]/g,""),$e=he.toLowerCase().replace(/[^\w\s]/g,""),Ne=Le.split(/\s+/).filter(Ae=>Ae.length>2),Te=$e.split(/\s+/).filter(Ae=>Ae.length>2),Ge=Ne.filter(Ae=>Te.includes(Ae)),Y=[...new Set([...Ne,...Te])];return Ge.length/Y.length},we=(Fe,he)=>{const $e={critical:4,high:3,medium:2,low:1}[(he||"medium").toLowerCase()]||2;return Fe.length>=3?Math.min($e+1,4):Fe.length===2?Math.min($e+.5,3.5):$e};return J.forEach(Fe=>{const he=new Map;[...G[Fe]||[],...ne[Fe]||[],...Z[Fe]||[],...le[Fe]||[]].filter(Te=>Te&&Te.title).forEach(Te=>{const Ge=(Te.title||"untitled").toLowerCase().trim();let Y=null,Ae=0;for(const[fe,be]of he.entries()){const Me=me(Te.title,be.representativeTitle);Me>.4&&Me>Ae&&(Ae=Me,Y=fe)}if(Y){const fe=he.get(Y);fe.recommendations.push(Te),fe.sources.add(Te.source);const be=fe.sources.size,Me=te[Te.source]||1;fe.weightedConfidence=(fe.weightedConfidence*(be-1)+(Te.confidence||.7)*Me)/be;const ze=(Te.priority||"medium").toLowerCase(),We=(fe.bestPriority||"medium").toLowerCase(),ut={critical:4,high:3,medium:2,low:1};(ut[ze]||2)>(ut[We]||2)&&(fe.bestPriority=Te.priority)}else he.set(Ge,{representativeTitle:Te.title,recommendations:[Te],sources:new Set([Te.source]),weightedConfidence:(Te.confidence||.7)*(te[Te.source]||1),bestPriority:Te.priority||"medium"})});const $e=Array.from(he.values()).map(Te=>{const Ge=Array.from(Te.sources),Y=Math.min(Te.weightedConfidence/Ge.length*1.2,1),Ae=we(Ge,Te.bestPriority),be={4:"Critical",3:"High",2:"Medium",1:"Low",3.5:"High"}[Math.round(Ae)]||Te.bestPriority;return Ge.forEach(ze=>{K[ze.replace("-","")]=(K[ze.replace("-","")]||0)+1}),{...Te.recommendations.find(ze=>ze.priority===Te.bestPriority)||Te.recommendations[0],priority:be,confidence:Y,sources:Ge,sourceCount:Ge.length,hybridBadge:Ge.length>1?"Hybrid":Ge[0],fusionMetadata:{originalSources:Ge,clusterSize:Te.recommendations.length,weightedConfidence:Te.weightedConfidence,priorityBoost:be!==Te.bestPriority}}}).sort((Te,Ge)=>{const Y={Critical:4,High:3,Medium:2,Low:1},Ae=Y[Te.priority]||2,fe=Y[Ge.priority]||2;return Ae!==fe?fe-Ae:Ge.confidence-Te.confidence});let Ne=8;$e.length>15?Ne=5:$e.length<3&&(Ne=$e.length),ce[Fe]=$e.slice(0,Ne)}),{recommendations:ce,sources:K,metadata:{totalClusters:J.reduce((Fe,he)=>Fe+ce[he].length,0),averageConfidence:J.reduce((Fe,he)=>Fe+ce[he].reduce((Le,$e)=>Le+$e.confidence,0),0)/Math.max(J.reduce((Fe,he)=>Fe+ce[he].length,0),1)}}},D=async()=>{s(!0),g(null);try{console.log(" Fetching analytics data with timeRange:",v);const G=async(Y,Ae=1e4)=>{const fe=new AbortController,be=setTimeout(()=>fe.abort(),Ae);try{const Me=await Nr.get(Y,{signal:fe.signal});return clearTimeout(be),Me}catch(Me){throw clearTimeout(be),Me}},[ne,Z,le,J,ce,te]=await Promise.allSettled([G("/reports/totals"),G("/reports/demographics"),G("/reports/skills"),G("/reports/skilled-per-trade"),G("/reports/most-booked-services"),G(`/reports/totals-over-time?months=${v}`)]),K=Y=>Y.status==="fulfilled"?Y.value.data?.data||Y.value.data||{}:(console.warn("API call failed:",Y.reason?.message||"Unknown error"),{}),me=K(ne),we=K(Z),Fe=K(le),he=K(J),Le=K(ce),$e=K(te);console.log(" Fetched data:",{totals:me,demographics:we,skills:Fe,skilledPerTrade:he,mostBooked:Le,totalsOverTime:$e});const Ne=typeof Le=="object"&&Le!==null?Object.values(Le).filter(Y=>typeof Y=="number").reduce((Y,Ae)=>Y+Ae,0):0,Te=typeof Le=="object"&&Le!==null?Object.entries(Le).filter(([,Y])=>typeof Y=="number").map(([Y,Ae])=>({service:Y,count:Ae})).sort((Y,Ae)=>Ae.count-Y.count).slice(0,10):[],Ge={totals:me,demographics:we,skills:Fe,skilledPerTrade:he,mostBookedServices:Le,totalsOverTime:$e,activeUsers:Math.floor((me?.totalUsers||0)*.7),totalBookings:Ne,popularServices:Te};console.log(" Complete Analytics Data:",Ge),console.log(" Total Users:",Ge.totals?.totalUsers),console.log(" Employment Data:",Ge.demographics?.employment),console.log(" Employment Rate Calc:",Ge.demographics?.employment?.worker,Ge.demographics?.employment?.nonWorker),t(Ge),console.log(" Generating recommendations after data load..."),j(Ge),pi.success("Analytics data loaded successfully!")}catch(G){console.error("Failed to fetch analytics data:",G);const ne=G.response?.data?.message||G.message||"Failed to load analytics data";g(ne),pi.error(ne)}finally{s(!1)}},j=async(G=null)=>{console.log(" Starting Enhanced Hybrid Recommendation Engine...");const ne=G||e;console.log(" Recommendations using data:",ne),a(te=>({...te,isActive:!0}));let Z=null,le=null,J=null,ce=null;try{console.log(" Generating rule-based recommendations..."),Z=q(ne),console.log(" Generating content-based recommendations...");try{le=F(ne),Object.keys(le).some(fe=>Array.isArray(le[fe])&&le[fe].length>0)||(console.warn("Content-based recommendations empty, skipping"),le=null)}catch(Y){console.warn("Content-based recommendations failed:",Y),le=null}console.log(" Generating collaborative recommendations...");try{J=C(ne),Object.keys(J).some(fe=>Array.isArray(J[fe])&&J[fe].length>0)||(console.warn("Collaborative recommendations empty, skipping"),J=null)}catch(Y){console.warn("Collaborative recommendations failed:",Y),J=null}console.log(" Generating AI-based recommendations...");try{const Y=new Promise((be,Me)=>{setTimeout(()=>Me(new Error("AI timeout")),15e3)});ce=await Promise.race([L(ne),Y]),Object.keys(ce).every(be=>ce[be]&&typeof ce[be]=="object"&&Array.isArray(ce[be]))||(console.warn("AI recommendations structure invalid, skipping"),ce=null)}catch(Y){console.warn("AI recommendations failed or timed out:",Y),ce=null}console.log(" Fusing recommendations from available sources...");const te=Z||{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]},K=le||{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]},me=J||{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]},we=ce||{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]};if(!(Z&&Object.values(Z).some(Y=>Array.isArray(Y)&&Y.length>0)))throw new Error("No rule-based recommendations available - critical failure");const he=P(te,K,me,we);if(!Object.keys(he.recommendations).some(Y=>Array.isArray(he.recommendations[Y])&&he.recommendations[Y].length>0)){console.warn("Fusion produced no valid recommendations, using rule-based fallback");const Y=H(te);i(Y),a({isActive:!0,lastGenerated:new Date().toISOString(),recommendationSources:{ruleBased:te.barangayProjects.length+te.skillsTraining.length+te.communityPrograms.length+te.priorityActions.length,contentBased:0,collaborative:0,aiBased:0},fallbackMode:!0}),pi.warning("Recommendation engine used fallback mode due to data issues");return}const Ne=H(he.recommendations),Te={ruleBased:te.barangayProjects.length+te.skillsTraining.length+te.communityPrograms.length+te.priorityActions.length,contentBased:le?K.barangayProjects.length+K.skillsTraining.length+K.communityPrograms.length+K.priorityActions.length:0,collaborative:J?me.barangayProjects.length+me.skillsTraining.length+me.communityPrograms.length+me.priorityActions.length:0,aiBased:ce?we.barangayProjects.length+we.skillsTraining.length+we.communityPrograms.length+we.priorityActions.length:0};i(Ne),a({isActive:!0,lastGenerated:new Date().toISOString(),recommendationSources:Te,fusionMetadata:he.metadata,fallbackMode:!1}),console.log(" Enhanced hybrid recommendations generated successfully!"),console.log(" Source contributions:",Te),console.log(" Fusion metrics:",he.metadata);const Ge=Object.entries(Te).filter(([,Y])=>Y>0).length;pi.success(`Recommendations generated using ${Ge} algorithm sources`)}catch(te){console.error(" Enhanced recommendation generation failed:",te);const me=H(Z||{barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]});i(me),a(we=>({...we,isActive:!1,lastGenerated:new Date().toISOString(),error:te.message,fallbackMode:!0})),pi.error("Recommendation generation failed completely - using emergency fallback")}},q=(G=e)=>{console.log(" Generating rule-based recommendations..."),console.log(" Input data for rule-based:",G);const ne=G.totals?.totalUsers||0,Z=G.totals?.serviceProviders||0,le=G.demographics?.employment?.nonWorker||0,J=G.demographics?.employment?.worker||0,ce=J+le>0?J/(J+le)*100:0,te=G.activeUsers||0,K=G.totalBookings||0,me=G.popularServices?.[0],we=me?.service||"General Services",Fe=me?.count||0,he=Object.keys(G.skills||{}).length,Le=G.totalsOverTime?.values?.length>1?(G.totalsOverTime.values[G.totalsOverTime.values.length-1]-G.totalsOverTime.values[G.totalsOverTime.values.length-2])/Math.max(G.totalsOverTime.values[G.totalsOverTime.values.length-2],1)*100:0,$e=G.demographics?.ageGroups?.["18-35"]?.unemployed||0,Ne=G.demographics?.ageGroups?.["18-35"]?.total||0,Te=Z>0?Math.floor(K/Z):0,Ge={barangayProjects:[],skillsTraining:[],communityPrograms:[],priorityActions:[]};if(K>50){const Y=K>200?"Critical":K>100?"Medium":"Low";Ge.barangayProjects.push({title:"Community Skills Training Space",description:"Renovate existing barangay building or use school/church space for skills training and job matching",priority:Y==="High"&&he<6?"Critical":Y==="High"?"High":"Medium",impact:"Low-cost training venue for skills programs",rationale:`Community has ${K} service requests across ${he} skill areas. Using existing barangay facilities (town hall, multi-purpose building, or school) costs minimal investment (50K-150K for equipment/supplies) vs building new. Can accommodate ${Math.max(20,Math.floor(K/10))} trainees per batch.`,estimatedCost:"50K - 150K (renovation) + 20K/month (operations)",timeline:"1-2 months setup",source:"rule-based",confidence:Y==="High"?.85:Y==="Medium"?.7:.6})}if(ce<70||le>50){const Y=ce<40||le>100?"Critical":"High";Ge.barangayProjects.push({title:"Community Job Matching Program",description:"Designate trained barangay staff to coordinate job placement and skills matching",priority:Y,impact:"Reduce unemployment by matching residents with available services and opportunities",rationale:`EMPLOYMENT FOCUS: ${le} residents unemployed (${ce.toFixed(1)}% employment rate). LOW-COST SOLUTION: Designate 1-2 existing barangay staff as job coordinators. Training cost: 5K. Expected placement rate: 30-50% within 3 months = ${Math.ceil(le*.4)} residents placed. Monthly operational cost: 0 (already salaried staff). Potential monthly earnings added: ${Math.ceil(le*.4*500)} from increased bookings/services. Process 5-10 placements monthly. Staff already in community, trusted by residents. Immediate implementation possible.`,estimatedCost:"5K (training) + staff time",timeline:"1 month setup",source:"rule-based",confidence:Y==="Critical"?.9:.8})}if(Le>15||te>ne*.4){const Y=Le>25?"Critical":Le>15?"High":"Medium";Ge.barangayProjects.push({title:"Community Digital Literacy Sessions",description:"Monthly free training sessions teaching residents how to use online service platforms",priority:Y,impact:"Increases platform adoption and teaches digital skills to the community",rationale:`DIGITAL OPPORTUNITY: Platform growing ${Le.toFixed(1)}%/month but ${Math.max(0,ne-te)} registered users inactive (${(Math.max(0,ne-te)/ne*100).toFixed(0)}% adoption gap). LOW-COST SOLUTION: Monthly 2-hour free sessions at barangay office/school. Cost: 500/month (snacks only). Use existing barangay tablets/phones. 1 trained facilitator can conduct (pay 1K/session = 4K/month). Can reach 30-50 residents/month = 300-600/year. Converting 40-50% to active users = ${Math.ceil(Math.max(0,ne-te)*.45)} new active users. Expected: +150 bookings/month = 75K monthly revenue increase. Monthly cost 4.5K, monthly benefit 75K. ROI: 16:1 within 3 months.`,estimatedCost:"500 - 1K/month",timeline:"Immediate (1 week setup)",source:"rule-based",confidence:Y==="Critical"?.95:.75})}if(Fe>20){const Y=Fe>100?"Critical":Fe>50?"High":"Medium";Ge.skillsTraining.push({title:`${we} Short Course Certification`,description:`2-month weekend training and certification for high-demand ${we} work`,targetAudience:"People wanting to become service providers or improve their skills",duration:"2 months (8 sessions, 1x/week)",expectedParticipants:Math.min(20,Math.floor(Fe/8)),priority:Y,skills:[we,"Quality Assurance","Customer Relations"],rationale:`MARKET DEMAND: ${we} = ${Fe} confirmed bookings with estimated ${Math.ceil(Fe*1.4)} unmet requests monthly. LOW-COST SOLUTION: 2-month program (8 weekend sessions, 2 hours each) at barangay hall. Cost: 4K (8 sessions  500 local trainer payment). Training ${Math.min(20,Math.floor(Fe/8))} new providers: (1) Fills 40-50% of unmet demand = +${Math.ceil(Math.ceil(Fe*1.4)*.45)} monthly bookings, (2) Each trainee earns 1,500/month average = ${Math.ceil(Math.min(20,Math.floor(Fe/8))*1500*12/1e3)}K annual income generated, (3) Program ROI: 4K investment  ${Math.ceil(Math.min(20,Math.floor(Fe/8))*1500*.1*12)}K revenue in 3 months = 15:1 ROI. Weekend format allows working adults to participate.`,source:"rule-based",confidence:Y==="Critical"?.9:Y==="High"?.8:.7})}if(he<10||K<Z*15){const Y=he<5||K<Z*10?"Critical":"High";Ge.skillsTraining.push({title:"Monthly Rotating Skills Training",description:"Different high-demand skills offered monthly, rotating throughout the year",targetAudience:"Unemployed adults and people changing jobs",duration:"2 months per skill (rotating monthly)",expectedParticipants:Math.max(30,Math.floor(le*.2)),priority:Y,skills:["Construction & Carpentry","Electrical & Plumbing","Welding & Fabrication","Automotive Services","Digital Skills","Food Service"],rationale:`SKILLS GAP: Only ${he} areas with ${K} bookings across ${Z} providers. ROTATING PROGRAM: Each month, launch new 2-month skill course. Cost: 5K/course (2K materials + 3K instructor) = 30K/year for 6 courses. Year 1 train ${Math.max(30,Math.floor(le*.2))*6} = ${Math.max(180,Math.floor(le*1.2))} residents. Expected: 40-50% join platform = ${Math.ceil(Math.max(180,Math.floor(le*1.2))*.45)} new providers earning 1K-2K/month = ${Math.ceil(Math.max(180,Math.floor(le*1.2))*.45*1500*12/1e6)}M annual income generated. Year 2: Add 2-3 new skills based on demand. Total program cost 30K/year, generated income ${Math.ceil(Math.max(180,Math.floor(le*1.2))*.45*1500*12/1e6)}M = ROI 100+:1.`,source:"rule-based",confidence:Y==="Critical"?.95:.85})}return Z>0&&Te<10&&Ge.skillsTraining.push({title:"Provider Success Coaching (Peer Mentoring)",description:"Top performers mentor struggling providers through monthly 1-hour coaching sessions",targetAudience:"Service providers below 10 bookings/month and top-tier mentors",duration:"3 months (monthly 1-hour sessions)",expectedParticipants:Math.floor(Z*.6),priority:"Medium",skills:["Profile Optimization","Customer Service Excellence","Booking Strategy","Review Management"],rationale:`PROVIDER UNDERPERFORMANCE: ${Z} providers at ${Te} bookings/month (vs. 20-25 benchmark). PEER MENTORING SOLUTION: Pay top 3-5 performers 1K/month each = 60K/year to mentor struggling providers. Monthly 1-hour coaching sessions on: (1) Optimizing profiles (+50% visibility), (2) Managing customer expectations (+30% retention), (3) Strategic pricing, (4) Handling negative reviews. Cost: 60K/year. Expected results: Mentor struggling ${Math.floor(Z*.6)} providers from ${Te} to 10-12 bookings/month = +${Math.floor(Z*.6)*3} bookings/month = ${Math.floor(Z*.6)*3*500*30/1e3}K monthly revenue increase. ROI: 60K/year  ${Math.floor(Z*.6)*3*500*30/1e3*12}K annual benefit = 30:1 ROI. Local expertise preserved, sustainable growth.`,source:"rule-based",confidence:.75}),(Ne>20||$e>.3)&&Ge.communityPrograms.push({title:"Youth Skills Apprenticeship Program (Peer-Led)",description:"Local service providers mentor young people through 2-month apprenticeships, no formal classroom",targetGroup:"Young people aged 16-30 with little work experience",focus:"Fast job placement through on-the-job learning",duration:"2 months apprenticeships, rotating monthly",estimatedCost:"10K/month (mentor stipends) = 60K/year",expectedOutcome:`${Math.ceil(Ne*.4)} youth trained/year earning 2K-3K/month within 3 months`,rationale:`LOW-COST SOLUTION: Pair ${Ne} young people with successful local providers. 1-month hands-on apprenticeship at provider's workplace. No classroom needed. Cost: 500/month mentor stipend  20 youth = 10K/month. After apprenticeship: 60-70% join platform earning 2K-3K/month. Monthly cost 10K, monthly benefit ${Math.ceil(Ne*.4*2500)} = ROI 2.5:1. Immediate employment, no expensive training center needed.`,source:"rule-based",confidence:Ne>50?.85:.7}),(ne>500||K>100)&&Ge.communityPrograms.push({title:"Monthly Community Skills Marketplace",description:"Free monthly gathering at barangay hall where providers showcase skills and residents find services",targetGroup:"All residents: service providers, job seekers, and service customers",focus:"Direct connections between providers and customers, job placement",duration:"Monthly events (1st Saturday, 2 hours)",estimatedCost:"500-1K/month (refreshments) = 6K-12K/year",expectedOutcome:`${Math.ceil(K*.3)} new bookings/month, ${Math.ceil(ne*.05)} job placements/month`,rationale:`LOW-COST NETWORKING: Monthly marketplace at barangay office. Cost: 500 snacks. Format: Providers pitch (30 min each), residents attend (2 hours). Expected: ${Math.ceil(K*.3)} new service bookings/month = ${Math.ceil(K*.3*500)} revenue. Monthly cost 500, monthly benefit ${Math.ceil(K*.3*500)} = ROI 30:1. Plus ${Math.ceil(ne*.05)} job connections monthly. Requires 1 barangay staff to organize (already salaried). No venue rental.`,source:"rule-based",confidence:ne>1e3?.9:.75}),ce<80&&Ge.communityPrograms.push({title:"Inclusive Skills Training (Women & PWD Focus)",description:"Free 2-month training courses tailored for women and people with disabilities with flexible scheduling",targetGroup:"Women, people with disabilities, and other groups facing employment barriers",focus:"Equal opportunity job training and placement",duration:"2-month courses, rolling enrollment (new cohort monthly)",estimatedCost:"3K/course (2K instructor + 1K materials) = 36K/year",expectedOutcome:`${Math.ceil(le*.15)} women/PWD trained/year, 40% job placement`,rationale:`INCLUSIVE APPROACH: 2-month flexible training (evening/weekend at barangay office) for women & PWD. Cost: 3K/course  12 courses/year = 36K/year. Target ${Math.ceil(le*.15)} women/PWD annually. Expected: 40% secure jobs earning 1K-2K/month = ${Math.ceil(le*.15*.4*1500*12/1e3)}K annual income. Trained instructor from Year 1 can lead (Year 2 cost 24K). Addresses discrimination barriers, builds inclusive economy. Uses barangay office venue (no rental cost).`,source:"rule-based",confidence:ce<60?.85:.7}),(ce<50||le>75)&&Ge.priorityActions.push({action:"Launch Quick Job Matching Program (Week 1)",description:"Designate barangay staff to identify ${Math.ceil(unemployed * 0.3)} jobless residents and match with 20+ available service requests",timeline:"Within 7 days",estimatedCost:"0 (use existing staff)",expectedOutcome:`${Math.ceil(le*.2)} residents placed in jobs within 2 weeks, ${Math.ceil(le*.2*500)} weekly revenue increase`,rationale:`IMMEDIATE QUICK-WIN: ${Math.round(ce)}% employment crisis. Do NOT wait for training programs. Action: This week, 1 barangay staff interviews ${Math.ceil(le*.3)} unemployed residents. Next week, match them with existing 20+ service requests. Expected: ${Math.ceil(le*.2)} placements = ${Math.ceil(le*.2*500)}/week income. Cost: 0 (existing staff). Timeline: 2 weeks to first placements. Then scale to formal Job Matching Program.`,responsible:"Barangay Employment Officer (if existing) or designated staff",priority:"Critical",source:"rule-based",confidence:.95}),(he<8||!we||we==="General Services")&&Ge.priorityActions.push({action:"Quick Community Skills Survey (Week 2-3)",description:"Simple 5-minute survey with ${Math.ceil(totalUsers * 0.2)} residents + ${serviceProviders} providers to identify top 3 high-demand skills",timeline:"Within 21 days",estimatedCost:"2K (survey forms + incentives)",expectedOutcome:"Identify 3-4 high-demand skills to prioritize in training programs",rationale:`CLEAR PRIORITY: System shows only ${he} skill areas = unclear priorities. Action: Week 2, conduct quick survey (barangay hall + SMS/FB). Interview ${Math.ceil(ne*.2)} residents asking 5 questions: (1) What job would you like? (2) What skills do you lack? (3) When can you train? Sample providers asking what they can teach. Cost: 2K forms. Output: Identify 3-4 high-demand skills (e.g., electrical, plumbing, digital). Use results to design Year 1 rotating training. Prevents wasted training on unwanted skills.`,responsible:"Barangay Sanggunian / Community Development Team",priority:"High",source:"rule-based",confidence:.8}),K>0&&Z>0&&Ge.priorityActions.push({action:"Secure Free/Low-Cost Training Partners (Week 3-4)",description:`Identify 1-2 successful ${we} providers willing to teach short courses for 500-1K/session`,timeline:"Within 30 days",estimatedCost:"0 (partnerships only, pay trainers from course budget)",expectedOutcome:"Launch first 2-month ${popularService} course within 6 weeks",rationale:`SUSTAINABLE MODEL: Rather than external consultants (expensive), work with your OWN best providers. Action: Contact top 3 ${we} providers (highest rated/booked). Offer 500/session to teach weekend short courses. Benefit: They earn extra income, courses are authentic/practical, learners get quality training. Cost: 500  8 sessions = 4K/course. Alternative: Barter = Free training for provider in exchange for course (e.g., digital marketing training). Secures sustainability - training continues using local expertise.`,responsible:"Barangay Business and Development Coordinator",priority:"High",source:"rule-based",confidence:Z>50?.9:.75}),(Le>20||te>ne*.5)&&Ge.priorityActions.push({action:"Monthly Digital Literacy Sessions (Ongoing)",description:"Free 2-hour monthly sessions at barangay office teaching residents how to use the platform",timeline:"Start Month 1, continue monthly",estimatedCost:"500/month (snacks) = 6K/year",expectedOutcome:`Convert ${Math.ceil(Math.max(0,ne-te)*.05)} inactive users/month to active, +${Math.ceil(200*500)}/month revenue`,rationale:`GROWTH ENABLEMENT: Users growing ${Le.toFixed(1)}%/month but ${Math.max(0,ne-te)} users inactive. Action: Monthly 2-hour free sessions. Format: Live app walkthrough, Q&A, practice booking. Cost: 500 snacks + 1 staff (already salaried). Can reach 40-50 residents/month. Convert 30-40% to active users = +${Math.ceil(Math.max(0,ne-te)*.05)}/month active. Each new active user books 500 average = ${Math.ceil(200*500)}/month revenue. Monthly cost 500, monthly benefit ${Math.ceil(200*500)} = ROI 8:1.`,responsible:"Community Outreach and Digital Literacy Team",priority:"Medium",source:"rule-based",confidence:Le>30?.9:.75}),Ge},H=G=>{const ne={barangayProjects:[lf,Wx,GU,ZU],skillsTraining:[cf,lf,Wx,YU],communityPrograms:[IB,cf],priorityActions:[cf,Wx,lf]};return Object.keys(G).forEach(Z=>{G[Z]&&Array.isArray(G[Z])&&G[Z].forEach((le,J)=>{const ce=ne[Z]||[Y6];le.icon=ce[J%ce.length]})}),G},ee=()=>{try{const G=window.open("","_blank"),ne=`
        <!DOCTYPE html>
        <html>
        <head>
          <title>SkillConnect - System Recommendations Report</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            .header { text-align: center; margin-bottom: 30px; }
            .section { margin-bottom: 30px; }
            .section h2 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 5px; }
            .recommendation { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
            .priority-critical { border-color: #dc2626; background: #fef2f2; }
            .priority-high { border-color: #ea580c; background: #fff7ed; }
            .priority-medium { border-color: #ca8a04; background: #fefce8; }
            .priority-low { border-color: #16a34a; background: #f0fdf4; }
            .metric { background: #f8fafc; padding: 10px; margin: 10px 0; border-radius: 5px; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>SkillConnect System Recommendations Report</h1>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
            <p>Analysis Period: Last ${v} months</p>
          </div>

          <div class="metric">
            <h3>Key Metrics Summary</h3>
            ${(()=>{const Z=[],le=e.totals.totalUsers?.toLocaleString()||0,J=e.totals.serviceProviders?.toLocaleString()||0,ce=(()=>{const Ne=e.demographics.employment?.worker||0,Te=e.demographics.employment?.nonWorker||0,Ge=Ne+Te;return Ge>0?(Ne/Ge*100).toFixed(1):0})(),te=e.totalBookings.toLocaleString(),K=Object.keys(e.skills||{}).length,me=e.popularServices[0]?.service||"N/A",we=e.popularServices[0]?.count||0,Fe=e.totalsOverTime.values.length>1?Math.round((e.totalsOverTime.values[e.totalsOverTime.values.length-1]-e.totalsOverTime.values[e.totalsOverTime.values.length-2])/(e.totalsOverTime.values[e.totalsOverTime.values.length-2]||1)*100):0,he=e.totals.totalUsers||0,Le=e.totals.serviceProviders||0,$e=me||"various services";return Z.push(`
                  <div class="metric-item">
                    <h4>Total Users: ${le}</h4>
                    <p>The platform has ${he} registered users. There are ${e.activeUsers} active users. Monthly growth is ${Fe>=0?"+"+Fe:Fe}%. The platform serves local community needs with users seeking services and providers offering skills.</p>
                  </div>
                `),Z.push(`
                  <div class="metric-item">
                    <h4>Service Providers: ${J}</h4>
                    <p>The platform has ${Le} registered service providers offering ${Object.keys(e.skilledPerTrade.byRole||{}).length} different types of work. They provide construction, electrical, plumbing, and other skills. ${Math.round(J*100/le)}% of users are service providers, showing good community participation.</p>
                  </div>
                `),Z.push(`
                  <div class="metric-item">
                    <h4>Employment Rate: ${ce}%</h4>
                    <p>${ce}% of people are employed. There are ${(e.demographics.employment?.worker||0).toLocaleString()} workers and ${(e.demographics.employment?.nonWorker||0).toLocaleString()} non-workers. ${ce<50?"Employment is low - need more job training":ce<70?"Jobs available - can improve with training":"Good employment level - keep growing"}. ${Object.entries(e.demographics.ageGroups||{}).sort(([,Ne],[,Te])=>Te-Ne)[0]?.[0]||"working-age"} groups have most employment.</p>
                  </div>
                `),Z.push(`
                  <div class="metric-item">
                    <h4>Total Service Bookings: ${te}</h4>
                    <p>The platform has ${te} completed service bookings across ${K} skill areas. "${$e}" is most popular with ${we} requests, making ${(we/te*100).toFixed(1)}% of all bookings. This shows ${te>le*.5?"very active use":te>le*.25?"good use":"growing use"}. Users need services and providers deliver them successfully.</p>
                  </div>
                `),Z.join("")})()}
          </div>

          <div class="section">
            <h2> Recommended Barangay Projects</h2>
            ${r.barangayProjects.map(Z=>`
              <div class="recommendation priority-${Z.priority.toLowerCase()}">
                <h3>${Z.title}</h3>
                <p><strong>Description:</strong> ${Z.description}</p>
                <p><strong>Priority:</strong> ${Z.priority}</p>
                <p><strong>Impact:</strong> ${Z.impact}</p>
                <p><strong>Rationale:</strong> ${Z.rationale}</p>
                <p><strong>Estimated Cost:</strong> ${Z.estimatedCost}</p>
                <p><strong>Timeline:</strong> ${Z.timeline}</p>
              </div>
            `).join("")}
          </div>

          <div class="section">
            <h2> Skills Training Programs</h2>
            ${r.skillsTraining.map(Z=>`
              <div class="recommendation priority-${Z.priority.toLowerCase()}">
                <h3>${Z.title}</h3>
                <p><strong>Description:</strong> ${Z.description}</p>
                <p><strong>Target Audience:</strong> ${Z.targetAudience}</p>
                <p><strong>Duration:</strong> ${Z.duration}</p>
                <p><strong>Expected Participants:</strong> ${Z.expectedParticipants}</p>
                <p><strong>Priority:</strong> ${Z.priority}</p>
                <p><strong>Skills to Cover:</strong> ${Z.skills.join(", ")}</p>
                <p><strong>Rationale:</strong> ${Z.rationale}</p>
              </div>
            `).join("")}
          </div>

          <div class="section">
            <h2> Community Programs</h2>
            ${r.communityPrograms.map(Z=>`
              <div class="recommendation">
                <h3>${Z.title}</h3>
                <p><strong>Description:</strong> ${Z.description}</p>
                <p><strong>Target Group:</strong> ${Z.targetGroup}</p>
                <p><strong>Focus:</strong> ${Z.focus}</p>
                <p><strong>Duration:</strong> ${Z.duration}</p>
                <p><strong>Rationale:</strong> ${Z.rationale}</p>
              </div>
            `).join("")}
          </div>

          <div class="section">
            <h2> Priority Actions</h2>
            ${r.priorityActions.map(Z=>`
              <div class="recommendation priority-${Z.priority.toLowerCase()}">
                <h3>${Z.action}</h3>
                <p><strong>Description:</strong> ${Z.description}</p>
                <p><strong>Rationale:</strong> ${Z.rationale}</p>
                <p><strong>Timeline:</strong> ${Z.timeline}</p>
                <p><strong>Responsible:</strong> ${Z.responsible}</p>
                <p><strong>Priority:</strong> ${Z.priority}</p>
              </div>
            `).join("")}
          </div>
        </body>
        </html>
      `;G.document.write(ne),G.document.close(),G.print(),pi.success("Recommendations report opened for printing!")}catch(G){console.error("Export failed:",G),pi.error("Failed to export recommendations")}};return c?d.jsxs("div",{className:"analytics-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"System Recommendations"}),d.jsx("p",{className:"header-description",children:"AI-powered insights for barangay development..."})]})}),d.jsx("div",{className:"analytics-card loading-card",children:d.jsx("div",{className:"loading-wrapper",children:d.jsx("div",{className:"loader"})})})]}):p?d.jsxs("div",{className:"analytics-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"System Recommendations"}),d.jsx("p",{className:"header-description",children:"Error loading analytics data"})]})}),d.jsx("div",{className:"analytics-card error-card",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h3",{children:" Error Loading Data"}),d.jsx("p",{children:p}),d.jsxs("button",{onClick:D,className:"retry-btn",children:[d.jsx(pv,{})," Retry"]})]})})]}):d.jsxs("div",{className:"analytics-container",children:[d.jsxs("div",{className:"analytics-header",children:[d.jsxs("div",{children:[d.jsx("h1",{children:" Hybrid Recommendation System"}),d.jsx("p",{className:"header-description",children:"Multi-algorithm approach combining rule-based, content-based, collaborative, and AI recommendations"})]}),d.jsxs("div",{className:"header-actions",children:[d.jsxs("select",{value:v,onChange:G=>B(G.target.value),className:"time-select",children:[d.jsx("option",{value:"6",children:" Last 6 months"}),d.jsx("option",{value:"12",children:" Last 12 months"}),d.jsx("option",{value:"24",children:" Last 24 months"})]}),d.jsxs("button",{onClick:D,className:"refresh-btn",title:"Refresh data",children:[d.jsx(pv,{})," Refresh"]})]})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" Key Insights Driving Recommendations"}),d.jsx("div",{className:"card-subinfo",children:"Data-driven analysis summary"})]}),n.isActive&&d.jsx("div",{className:"hybrid-engine-status",children:d.jsxs("div",{className:"engine-stats",children:[d.jsx("h3",{children:" Hybrid Recommendation Engine Active"}),d.jsxs("p",{className:"engine-meta",children:["Last generated: ",new Date(n.lastGenerated).toLocaleTimeString()," | Sources used: Rule-based (",n.recommendationSources?.ruleBased||0,"), Content-based (",n.recommendationSources?.contentBased||0,"), Collaborative (",n.recommendationSources?.collaborative||0,"), AI-based (",n.recommendationSources?.aiBased||0,")"]})]})}),d.jsxs("div",{className:"metrics-grid",children:[d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon users",children:d.jsx(cf,{})}),d.jsx("h3",{className:"metric-title",children:"Employment Rate"}),d.jsx("p",{className:"metric-value",children:(()=>{const G=e.demographics.employment?.worker||0,ne=e.demographics.employment?.nonWorker||0,Z=G+ne;return Z>0?Math.round(G/Z*100):0})()}),d.jsx("div",{className:"metric-description",children:"Percentage employed"})]}),d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon bookings",children:d.jsx(lf,{})}),d.jsx("h3",{className:"metric-title",children:"Top Service Bookings"}),d.jsx("p",{className:"metric-value",children:e.popularServices[0]?.count||0}),d.jsx("div",{className:"metric-description",children:"Most requested service"})]}),d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon growth",children:d.jsx(Wx,{})}),d.jsx("h3",{className:"metric-title",children:"Monthly growth"}),d.jsx("p",{className:"metric-value",children:e.totalsOverTime.values.length>0?e.totalsOverTime.values[e.totalsOverTime.values.length-1]:0}),d.jsx("div",{className:"metric-description",children:"New users this month"})]}),d.jsxs("div",{className:"metric-card",children:[d.jsx("div",{className:"metric-icon skills",children:d.jsx(IB,{})}),d.jsx("h3",{className:"metric-title",children:"Skills Diversity"}),d.jsx("p",{className:"metric-value",children:Object.keys(e.skills).length}),d.jsx("div",{className:"metric-description",children:"Available skill categories"})]})]})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" Recommended Barangay Projects"}),d.jsx("div",{className:"card-subinfo",children:"Infrastructure and facility development based on community needs"})]}),d.jsx("div",{className:"recommendations-grid",children:r.barangayProjects&&r.barangayProjects.length>0?r.barangayProjects.map((G,ne)=>{const Z=G.icon,le=G.confidence?Math.round(G.confidence*100):0,J={"rule-based":"#3b82f6","content-based":"#8b5cf6",collaborative:"#10b981","ai-based":"#f59e0b",hybrid:"#ef4444"}[G.hybridBadge]||"#6b7280";return d.jsxs("div",{className:`recommendation-card priority-${G.priority.toLowerCase()}`,children:[d.jsxs("div",{className:"recommendation-header",children:[d.jsx(Z,{className:"recommendation-icon"}),d.jsx("div",{className:"recommendation-priority",children:G.priority}),d.jsx("div",{className:"recommendation-source-badge",style:{backgroundColor:J},title:`Source: ${G.hybridBadge||G.source} | Confidence: ${le}%`,children:G.hybridBadge||G.source})]}),d.jsxs("div",{className:"confidence-indicator",children:[d.jsx("div",{className:"confidence-bar",children:d.jsx("div",{className:"confidence-fill",style:{width:`${le}%`,backgroundColor:J}})}),d.jsxs("span",{className:"confidence-text",children:[le,"% confidence"]})]}),d.jsx("h3",{className:"recommendation-title",children:G.title}),d.jsx("p",{className:"recommendation-description",children:G.description}),d.jsxs("div",{className:"recommendation-details",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Impact:"})," ",G.impact]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Cost:"})," ",G.estimatedCost]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Timeline:"})," ",G.timeline]})]}),d.jsxs("div",{className:"recommendation-rationale",children:[d.jsx("strong",{children:"Why this project:"})," ",G.rationale]})]},ne)}):d.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:d.jsx("p",{children:"No barangay project recommendations available yet."})})})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" Skills Training Programs"}),d.jsx("div",{className:"card-subinfo",children:"Education and training initiatives to address skills gaps"})]}),d.jsx("div",{className:"recommendations-grid",children:r.skillsTraining&&r.skillsTraining.length>0?r.skillsTraining.map((G,ne)=>{const Z=G.icon;return d.jsxs("div",{className:`recommendation-card priority-${G.priority.toLowerCase()}`,children:[d.jsxs("div",{className:"recommendation-header",children:[d.jsx(Z,{className:"recommendation-icon"}),d.jsx("div",{className:"recommendation-priority",children:G.priority})]}),d.jsx("h3",{className:"recommendation-title",children:G.title}),d.jsx("p",{className:"recommendation-description",children:G.description}),d.jsxs("div",{className:"recommendation-details",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Target:"})," ",G.targetAudience]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Duration:"})," ",G.duration]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Participants:"})," ",G.expectedParticipants]})]}),d.jsxs("div",{className:"training-skills",children:[d.jsx("strong",{children:"Skills:"})," ",G.skills.join(", ")]}),d.jsxs("div",{className:"recommendation-rationale",children:[d.jsx("strong",{children:"Why this program:"})," ",G.rationale]})]},ne)}):d.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:d.jsx("p",{children:"No skills training recommendations available yet."})})})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" Community Programs"}),d.jsx("div",{className:"card-subinfo",children:"Inclusive programs for different community segments"})]}),d.jsx("div",{className:"recommendations-grid",children:r.communityPrograms&&r.communityPrograms.length>0?r.communityPrograms.map((G,ne)=>{const Z=G.icon;return d.jsxs("div",{className:"recommendation-card",children:[d.jsxs("div",{className:"recommendation-header",children:[d.jsx(Z,{className:"recommendation-icon"}),d.jsx("div",{className:"recommendation-priority",children:"Ongoing"})]}),d.jsx("h3",{className:"recommendation-title",children:G.title}),d.jsx("p",{className:"recommendation-description",children:G.description}),d.jsxs("div",{className:"recommendation-details",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Target Group:"})," ",G.targetGroup]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Focus:"})," ",G.focus]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("strong",{children:"Duration:"})," ",G.duration]})]}),d.jsxs("div",{className:"recommendation-rationale",children:[d.jsx("strong",{children:"Why this program:"})," ",G.rationale]})]},ne)}):d.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:d.jsx("p",{children:"No community programs recommendations available yet."})})})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"card-header",children:[d.jsx("h2",{children:" Priority Actions"}),d.jsx("div",{className:"card-subinfo",children:"Immediate steps to implement recommendations"})]}),d.jsx("div",{className:"priority-actions-list",children:r.priorityActions&&r.priorityActions.length>0?r.priorityActions.map((G,ne)=>{const Z=G.icon;return d.jsxs("div",{className:`priority-action priority-${G.priority.toLowerCase()}`,children:[d.jsxs("div",{className:"action-header",children:[d.jsx(Z,{className:"action-icon"}),d.jsx("div",{className:"action-priority",children:G.priority})]}),d.jsxs("div",{className:"action-content",children:[d.jsx("h3",{className:"action-title",children:G.action}),d.jsx("p",{className:"action-description",children:G.description}),d.jsxs("div",{className:"action-meta",children:[d.jsxs("span",{className:"action-timeline",children:[" ",G.timeline]}),d.jsxs("span",{className:"action-responsible",children:[" ",G.responsible]})]}),d.jsxs("div",{className:"recommendation-rationale",children:[d.jsx("strong",{children:"Why this action:"})," ",G.rationale]})]})]},ne)}):d.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999"},children:d.jsx("p",{children:"No priority actions available yet."})})})]}),d.jsxs("button",{className:"fixed-export-btn",onClick:ee,title:"Export Recommendations Report",children:[d.jsx(F4,{})," Export Recommendations Report"]})]})},XY=()=>{const[e,t]=xe.useState([]),[r,i]=xe.useState([]),[n,a]=xe.useState(!0),[c,s]=xe.useState(""),[p,g]=xe.useState(null);xe.useEffect(()=>{setTimeout(()=>{const D=[{id:1,name:"Plumbing",userCount:156,previousUserCount:142,averageRating:4.7,color:"#FF6384",popularServices:["Pipe Repair","Installation","Maintenance"]},{id:2,name:"Electrical",userCount:132,previousUserCount:125,averageRating:4.8,color:"#36A2EB",popularServices:["Wiring","Appliance Repair","Installation"]},{id:3,name:"Carpentry",userCount:98,previousUserCount:105,averageRating:4.6,color:"#FFCE56",popularServices:["Furniture","Cabinets","Repairs"]},{id:4,name:"Painting",userCount:87,previousUserCount:78,averageRating:4.9,color:"#4BC0C0",popularServices:["Interior","Exterior","Decorative"]},{id:5,name:"Gardening",userCount:76,previousUserCount:82,averageRating:4.5,color:"#9966FF",popularServices:["Lawn Care","Landscaping","Tree Service"]},{id:6,name:"Cleaning",userCount:65,previousUserCount:58,averageRating:4.7,color:"#FF9F40",popularServices:["Deep Clean","Regular","Office"]},{id:7,name:"Appliance Repair",userCount:54,previousUserCount:50,averageRating:4.4,color:"#FF6384",popularServices:["Refrigerator","Washer","Dryer"]},{id:8,name:"Moving",userCount:43,previousUserCount:40,averageRating:4.6,color:"#C9CBCF",popularServices:["Local","Long Distance","Packing"]}],j=D.reduce((H,ee)=>H+ee.userCount,0),q=D.map((H,ee)=>({...H,percentage:(H.userCount/j*100).toFixed(1),rank:ee+1}));t(q),i(q),a(!1)},1e3)},[]),xe.useEffect(()=>{let D=e;c&&(D=D.filter(j=>j.name.toLowerCase().includes(c.toLowerCase())||j.popularServices.some(q=>q.toLowerCase().includes(c.toLowerCase())))),i(D)},[c,e]);const v=()=>{const D=e.reduce((q,H)=>q+H.userCount,0);let j=-90;return e.map(q=>{const H=q.userCount/D*100,ee=H/100*360,G=j,ne=j+ee;return j+=ee,{...q,startAngle:G,endAngle:ne,percentage:H}})},B=(D,j,q,H)=>{const ee=(H-90)*Math.PI/180;return{x:D+q*Math.cos(ee),y:j+q*Math.sin(ee)}},F=(D,j,q,H,ee)=>{const G=B(D,j,q,ee),ne=B(D,j,q,H),Z=ee-H<=180?"0":"1";return["M",D,j,"L",G.x,G.y,"A",q,q,0,Z,0,ne.x,ne.y,"Z"].join(" ")},C=(D,j)=>D>j?"up":D<j?"down":"stable",L=D=>{const j=[],q=Math.floor(D),H=D%1!==0;for(let G=0;G<q;G++)j.push(d.jsx(FaStar,{className:"star filled"},G));H&&j.push(d.jsx(FaStar,{className:"star half"},"half"));const ee=5-Math.ceil(D);for(let G=0;G<ee;G++)j.push(d.jsx(FaStar,{className:"star empty"},`empty-${G}`));return j},P=v();return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
        .skill-categories-container {
          background: #fff;
          border-radius: 10px;
          padding: 20px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
          margin-bottom: 20px;
        }
       
        .page-header {
          display: flex;
          align-items: center;
          margin-bottom: 15px;
        }
       
        .page-title {
          font-size: 1.5rem;
          font-weight: 600;
          color: #333;
          margin: 0;
          display: flex;
          align-items: center;
        }
       
        .page-title .icon {
          margin-right: 10px;
          color: #0a84ff;
        }
       
        .intro-text {
          color: #666;
          font-size: 0.9rem;
          margin-bottom: 25px;
          line-height: 1.5;
        }
       
        .content-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 20px;
        }
       
        .chart-container {
          background: #f9f9f9;
          border-radius: 8px;
          padding: 20px;
          display: flex;
          flex-direction: column;
          align-items: center;
        }
       
        .chart-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          display: flex;
          align-items: center;
        }
       
        .chart-title .icon {
          margin-right: 8px;
          color: #0a84ff;
        }
       
        .pie-chart-container {
          position: relative;
          width: 250px;
          height: 250px;
        }
       
        .pie-chart-svg {
          width: 100%;
          height: 100%;
        }
       
        .pie-segment {
          cursor: pointer;
          transition: transform 0.2s;
        }
       
        .pie-segment:hover {
          transform: scale(1.05);
          filter: brightness(1.1);
        }
       
        .pie-legend {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 10px;
          margin-top: 20px;
        }
       
        .legend-item {
          display: flex;
          align-items: center;
          font-size: 0.8rem;
        }
       
        .legend-color {
          width: 12px;
          height: 12px;
          border-radius: 2px;
          margin-right: 5px;
        }
       
        .stats-container {
          background: #f9f9f9;
          border-radius: 8px;
          padding: 20px;
        }
       
        .stats-title {
          font-size: 1.1rem;
          font-weight: 600;
          color: #333;
          margin: 0 0 20px 0;
          display: flex;
          align-items: center;
        }
       
        .stats-title .icon {
          margin-right: 8px;
          color: #0a84ff;
        }
       
        .stat-item {
          display: flex;
          justify-content: space-between;
          padding: 10px 0;
          border-bottom: 1px solid #eee;
        }
       
        .stat-item:last-child {
          border-bottom: none;
        }
       
        .stat-label {
          font-weight: 500;
          color: #555;
        }
       
        .stat-value {
          font-weight: 600;
          color: #333;
        }
       
        .filters-container {
          display: flex;
          flex-wrap: wrap;
          gap: 15px;
          margin-bottom: 20px;
        }
       
        .search-container {
          flex: 1;
          min-width: 200px;
          position: relative;
        }
       
        .search-input {
          width: 100%;
          padding: 10px 15px 10px 40px;
          border: 1px solid #ddd;
          border-radius: 6px;
          font-size: 0.9rem;
        }
       
        .search-icon {
          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          color: #999;
        }
       
        .data-table-container {
          overflow-x: auto;
        }
       
        .data-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 10px;
        }
       
        .data-table th {
          background: #f1f3f7;
          padding: 12px 15px;
          text-align: left;
          font-weight: 600;
          color: #333;
          font-size: 0.85rem;
          border-bottom: 2px solid #e9ecef;
        }
       
        .data-table td {
          padding: 12px 15px;
          border-bottom: 1px solid #e9ecef;
          font-size: 0.85rem;
          color: #555;
        }
       
        .data-table tr:hover {
          background: #f9f9f9;
        }
       
        .rank-badge {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          font-weight: 600;
          font-size: 0.8rem;
        }
       
        .rank-1 {
          background: #ffd700;
          color: #333;
        }
       
        .rank-2 {
          background: #c0c0c0;
          color: #333;
        }
       
        .rank-3 {
          background: #cd7f32;
          color: #fff;
        }
       
        .rank-default {
          background: #e9ecef;
          color: #555;
        }
       
        .category-info {
          display: flex;
          flex-direction: column;
        }
       
        .category-name {
          font-weight: 600;
          color: #333;
        }
       
        .popular-services {
          font-size: 0.75rem;
          color: #666;
          margin-top: 3px;
        }
       
        .user-count {
          display: flex;
          align-items: center;
        }
       
        .count-value {
          font-weight: 600;
          margin-right: 5px;
        }
       
        .trend {
          display: flex;
          align-items: center;
        }
       
        .trend.up {
          color: #28a745;
        }
       
        .trend.down {
          color: #dc3545;
        }
       
        .trend.stable {
          color: #6c757d;
        }
       
        .percentage-bar {
          display: inline-block;
          height: 6px;
          background: #e9ecef;
          border-radius: 3px;
          width: 50px;
          margin-right: 8px;
          position: relative;
        }
       
        .percentage-fill {
          height: 100%;
          background: #0a84ff;
          border-radius: 3px;
        }
       
        .rating-container {
          display: flex;
          align-items: center;
        }
       
        .star {
          color: #ddd;
          font-size: 0.8rem;
        }
       
        .star.filled {
          color: #ffc107;
        }
       
        .star.half {
          color: #ffc107;
          opacity: 0.7;
        }
       
        .action-buttons {
          display: flex;
          gap: 8px;
        }
       
        .action-btn {
          padding: 6px 10px;
          border: none;
          border-radius: 4px;
          font-size: 0.8rem;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 5px;
          transition: all 0.2s;
        }
       
        .view-btn {
          background: #0a84ff;
          color: white;
        }
       
        .view-btn:hover {
          background: #0077e6;
        }
       
        .loading-container {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 200px;
        }
       
        .spinner {
          width: 40px;
          height: 40px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #0a84ff;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }
       
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
       
        .no-results {
          text-align: center;
          padding: 20px;
          color: #666;
        }
       
        .tooltip {
          position: absolute;
          background: rgba(0, 0, 0, 0.8);
          color: white;
          padding: 8px 12px;
          border-radius: 4px;
          font-size: 0.8rem;
          pointer-events: none;
          z-index: 1000;
        }
       
        @media (max-width: 1024px) {
          .content-grid {
            grid-template-columns: 1fr;
          }
        }
       
        @media (max-width: 768px) {
          .filters-container {
            flex-direction: column;
          }
         
          .search-container {
            min-width: 100%;
          }
         
          .data-table th, .data-table td {
            padding: 8px 10px;
            font-size: 0.75rem;
          }
         
          .pie-chart-container {
            width: 200px;
            height: 200px;
          }
        }
      `}),d.jsxs("div",{className:"skill-categories-container",children:[d.jsx("div",{className:"page-header",children:d.jsxs("h1",{className:"page-title",children:[d.jsx(LB,{className:"icon"}),"Skill Categories"]})}),d.jsxs("p",{className:"intro-text",children:[d.jsx(Z6,{style:{marginRight:"5px",color:"#0a84ff"}}),"This page provides an overview of all skill categories available on the platform. Analyze the distribution of service providers across different categories to understand market trends and identify opportunities for growth."]}),n?d.jsx("div",{className:"loading-container",children:d.jsx("div",{className:"spinner"})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"content-grid",children:[d.jsxs("div",{className:"chart-container",children:[d.jsxs("h2",{className:"chart-title",children:[d.jsx(LB,{className:"icon"}),"Category Distribution"]}),d.jsxs("div",{className:"pie-chart-container",children:[d.jsx("svg",{className:"pie-chart-svg",viewBox:"0 0 250 250",children:P.map(D=>d.jsx("path",{d:F(125,125,100,D.startAngle,D.endAngle),fill:D.color,className:"pie-segment",onMouseEnter:()=>g(D),onMouseLeave:()=>g(null)},D.id))}),p&&d.jsxs("div",{className:"tooltip",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[d.jsx("div",{children:p.name}),d.jsxs("div",{children:[p.userCount," users (",p.percentage,"%)"]})]})]}),d.jsx("div",{className:"pie-legend",children:e.map(D=>d.jsxs("div",{className:"legend-item",children:[d.jsx("div",{className:"legend-color",style:{backgroundColor:D.color}}),d.jsx("span",{children:D.name})]},D.id))})]}),d.jsxs("div",{className:"stats-container",children:[d.jsxs("h2",{className:"stats-title",children:[d.jsx(FaUsers,{className:"icon"}),"Category Statistics"]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Total Categories"}),d.jsx("span",{className:"stat-value",children:e.length})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Total Service Providers"}),d.jsx("span",{className:"stat-value",children:e.reduce((D,j)=>D+j.userCount,0)})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Most Popular Category"}),d.jsx("span",{className:"stat-value",children:e.length>0?e[0].name:"N/A"})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Highest Rated Category"}),d.jsx("span",{className:"stat-value",children:e.length>0?e.reduce((D,j)=>j.averageRating>D.averageRating?j:D).name:"N/A"})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Growing Categories"}),d.jsx("span",{className:"stat-value",children:e.filter(D=>C(D.userCount,D.previousUserCount)==="up").length})]})]})]}),d.jsx("div",{className:"filters-container",children:d.jsxs("div",{className:"search-container",children:[d.jsx(J6,{className:"search-icon"}),d.jsx("input",{type:"text",className:"search-input",placeholder:"Search by category or service...",value:c,onChange:D=>s(D.target.value)})]})}),r.length>0?d.jsx("div",{className:"data-table-container",children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Rank"}),d.jsx("th",{children:"Skill (Category)"}),d.jsx("th",{children:"User Count"}),d.jsx("th",{children:"Percentage"}),d.jsx("th",{children:"Avg. Rating"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:r.map((D,j)=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("span",{className:`rank-badge ${j+1===1?"rank-1":j+1===2?"rank-2":j+1===3?"rank-3":"rank-default"}`,children:j+1})}),d.jsx("td",{children:d.jsxs("div",{className:"category-info",children:[d.jsx("div",{className:"category-name",children:D.name}),d.jsxs("div",{className:"popular-services",children:["Popular: ",D.popularServices.join(", ")]})]})}),d.jsx("td",{children:d.jsxs("div",{className:"user-count",children:[d.jsx("span",{className:"count-value",children:D.userCount}),d.jsxs("div",{className:`trend ${C(D.userCount,D.previousUserCount)}`,children:[C(D.userCount,D.previousUserCount)==="up"&&d.jsx(FaTrendingUp,{}),C(D.userCount,D.previousUserCount)==="down"&&d.jsx(FaTrendingDown,{})]})]})}),d.jsx("td",{children:d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsx("div",{className:"percentage-bar",children:d.jsx("div",{className:"percentage-fill",style:{width:`${D.percentage}%`}})}),D.percentage,"%"]})}),d.jsx("td",{children:d.jsxs("div",{className:"rating-container",children:[L(D.averageRating),d.jsx("span",{style:{marginLeft:"5px",fontSize:"0.8rem"},children:D.averageRating})]})}),d.jsx("td",{children:d.jsx("div",{className:"action-buttons",children:d.jsxs("button",{className:"action-btn view-btn",children:[d.jsx(FaEye,{}),"View"]})})})]},D.id))})]})}):d.jsx("div",{className:"no-results",children:"No categories found matching your criteria."})]})]})]})},ZY=()=>{const e=Wo(),[t,r]=xe.useState("general"),[i,n]=xe.useState(!0),[a,c]=xe.useState(!1),[s,p]=xe.useState({siteName:"SkillConnect4B410",siteDescription:"Connecting skilled workers with community needs",contactEmail:"",contactPhone:"",maintenanceMode:!1,allowRegistrations:!0,maxFileSize:5*1024*1024,allowedFileTypes:["image/jpeg","image/png","image/gif","application/pdf"],notificationSettings:{emailNotifications:!0,pushNotifications:!0,smsNotifications:!1},systemSettings:{timezone:"Asia/Manila",currency:"PHP",language:"en"}}),[g,v]=xe.useState({version:"1.0.0",uptime:"0 days, 0 hours, 0 minutes",lastBackup:"Never",dbSize:"0 MB",activeUsers:0,totalBookings:0,totalUsers:0,serviceProviders:0});xe.useEffect(()=>{B(),F()},[]);const B=async()=>{try{n(!0);const j=await Nr.get("/admin/settings");j.data.success&&j.data.settings&&p(q=>({...q,...j.data.settings}))}catch(j){console.error("Failed to fetch settings:",j),pi.error("Failed to load settings")}finally{n(!1)}},F=async()=>{try{const[j,q]=await Promise.all([Nr.get("/reports/totals").catch(()=>null),Nr.get("/admin/dashboard-metrics").catch(()=>null)]),H=j?.data?.data||j?.data||{},ee=q?.data?.data||q?.data||{};v(G=>({...G,totalUsers:H.totalUsers||0,serviceProviders:H.serviceProviders||0,totalBookings:ee.totalBookings||H.totalBookings||0,activeUsers:H.totalUsers?Math.floor(H.totalUsers*.7):0}))}catch(j){console.error("Failed to fetch system info:",j)}},C=(j,q,H=null)=>{p(H?ee=>({...ee,[H]:{...ee[H],[j]:q}}):ee=>({...ee,[j]:q}))},L=async()=>{c(!0);try{(await Nr.put("/admin/settings",s)).data.success?(pi.success("Settings saved successfully!"),await B()):pi.error("Failed to save settings")}catch(j){console.error("Failed to save settings:",j),pi.error(j.response?.data?.message||"Failed to save settings")}finally{c(!1)}},P=async()=>{try{pi.loading("Creating backup..."),await new Promise(j=>setTimeout(j,2e3)),pi.dismiss(),pi.success("Backup created successfully!")}catch{pi.dismiss(),pi.error("Backup failed")}},D=()=>{if(i)return d.jsxs("div",{className:"settings-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Loading settings..."})]});switch(t){case"general":return d.jsxs("div",{className:"settings-content",children:[d.jsx("h2",{className:"section-title",children:"General Settings"}),d.jsxs("div",{className:"settings-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"siteName",children:"Site Name"}),d.jsx("input",{type:"text",id:"siteName",value:s.siteName,onChange:j=>C("siteName",j.target.value),placeholder:"Enter site name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"siteDescription",children:"Site Description"}),d.jsx("textarea",{id:"siteDescription",rows:"3",value:s.siteDescription,onChange:j=>C("siteDescription",j.target.value),placeholder:"Enter site description"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"contactEmail",children:"Contact Email"}),d.jsx("input",{type:"email",id:"contactEmail",value:s.contactEmail,onChange:j=>C("contactEmail",j.target.value),placeholder:"admin@skillconnect.com"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"contactPhone",children:"Contact Phone"}),d.jsx("input",{type:"text",id:"contactPhone",value:s.contactPhone,onChange:j=>C("contactPhone",j.target.value),placeholder:"+63 XXX XXX XXXX"})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:s.maintenanceMode,onChange:j=>C("maintenanceMode",j.target.checked)}),d.jsx("span",{children:"Maintenance Mode"})]}),d.jsx("p",{className:"form-help",children:"When enabled, the site will display a maintenance message to all users except administrators."})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:s.allowRegistrations,onChange:j=>C("allowRegistrations",j.target.checked)}),d.jsx("span",{children:"Allow New Registrations"})]}),d.jsx("p",{className:"form-help",children:"When disabled, new user registrations will be blocked."})]})]})]});case"notifications":return d.jsxs("div",{className:"settings-content",children:[d.jsx("h2",{className:"section-title",children:"Notification Settings"}),d.jsxs("div",{className:"settings-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:s.notificationSettings?.emailNotifications,onChange:j=>C("emailNotifications",j.target.checked,"notificationSettings")}),d.jsx("span",{children:"Email Notifications"})]}),d.jsx("p",{className:"form-help",children:"Receive important system notifications via email."})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:s.notificationSettings?.pushNotifications,onChange:j=>C("pushNotifications",j.target.checked,"notificationSettings")}),d.jsx("span",{children:"Push Notifications"})]}),d.jsx("p",{className:"form-help",children:"Receive browser push notifications when logged in."})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("label",{className:"checkbox-label",children:[d.jsx("input",{type:"checkbox",checked:s.notificationSettings?.smsNotifications,onChange:j=>C("smsNotifications",j.target.checked,"notificationSettings")}),d.jsx("span",{children:"SMS Notifications"})]}),d.jsx("p",{className:"form-help",children:"Receive critical alerts via SMS message."})]})]})]});case"system":return d.jsxs("div",{className:"settings-content",children:[d.jsx("h2",{className:"section-title",children:"System Settings"}),d.jsxs("div",{className:"settings-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"timezone",children:"Timezone"}),d.jsxs("select",{id:"timezone",value:s.systemSettings?.timezone,onChange:j=>C("timezone",j.target.value,"systemSettings"),children:[d.jsx("option",{value:"Asia/Manila",children:"Asia/Manila (PHT)"}),d.jsx("option",{value:"UTC",children:"UTC"}),d.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),d.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"currency",children:"Currency"}),d.jsxs("select",{id:"currency",value:s.systemSettings?.currency,onChange:j=>C("currency",j.target.value,"systemSettings"),children:[d.jsx("option",{value:"PHP",children:"PHP (Philippine Peso)"}),d.jsx("option",{value:"USD",children:"USD (US Dollar)"}),d.jsx("option",{value:"EUR",children:"EUR (Euro)"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"language",children:"Language"}),d.jsxs("select",{id:"language",value:s.systemSettings?.language,onChange:j=>C("language",j.target.value,"systemSettings"),children:[d.jsx("option",{value:"en",children:"English"}),d.jsx("option",{value:"tl",children:"Tagalog"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),d.jsx("input",{type:"number",id:"maxFileSize",min:"1",max:"50",value:s.maxFileSize?s.maxFileSize/(1024*1024):5,onChange:j=>C("maxFileSize",parseInt(j.target.value)*1024*1024)}),d.jsx("p",{className:"form-help",children:"Maximum file upload size in megabytes."})]})]})]});case"maintenance":return d.jsxs("div",{className:"settings-content",children:[d.jsx("h2",{className:"section-title",children:"System Maintenance"}),d.jsxs("div",{className:"settings-form",children:[d.jsxs("div",{className:"system-info-card",children:[d.jsx("h3",{children:"System Information"}),d.jsxs("div",{className:"info-grid",children:[d.jsxs("div",{className:"info-item",children:[d.jsx("span",{className:"info-label",children:"Version:"}),d.jsx("span",{className:"info-value",children:g.version})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("span",{className:"info-label",children:"Total Users:"}),d.jsx("span",{className:"info-value",children:g.totalUsers.toLocaleString()})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("span",{className:"info-label",children:"Service Providers:"}),d.jsx("span",{className:"info-value",children:g.serviceProviders.toLocaleString()})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("span",{className:"info-label",children:"Active Users:"}),d.jsx("span",{className:"info-value",children:g.activeUsers.toLocaleString()})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("span",{className:"info-label",children:"Total Bookings:"}),d.jsx("span",{className:"info-value",children:g.totalBookings.toLocaleString()})]}),d.jsxs("div",{className:"info-item",children:[d.jsx("span",{className:"info-label",children:"Last Backup:"}),d.jsx("span",{className:"info-value",children:g.lastBackup})]})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsxs("button",{className:"btn btn-secondary",onClick:P,children:[d.jsx(F4,{})," Create Backup Now"]}),d.jsx("p",{className:"form-help",children:"Create a manual backup of the system database."})]})]})]});case"terms":return d.jsxs("div",{className:"settings-content",children:[d.jsx("h2",{className:"section-title",children:"Terms & Policies"}),d.jsxs("div",{className:"policy-container",children:[d.jsxs("div",{className:"policy-section",children:[d.jsx("h3",{children:"Terms of Service"}),d.jsx("p",{children:"By using SkillConnect, you agree to our Terms of Service. These terms govern your use of our platform and services. Please read them carefully before using our services."})]}),d.jsxs("div",{className:"policy-section",children:[d.jsx("h3",{children:"Privacy Policy"}),d.jsx("p",{children:"We are committed to protecting your privacy. Our Privacy Policy explains how we collect, use, and safeguard your personal information when you use our platform."})]}),d.jsxs("div",{className:"policy-section",children:[d.jsx("h3",{children:"Cookie Policy"}),d.jsx("p",{children:"We use cookies to enhance your experience on our platform. Our Cookie Policy explains what cookies are, how we use them, and how you can manage your cookie preferences."})]}),d.jsxs("div",{className:"policy-section",children:[d.jsx("h3",{children:"Refund Policy"}),d.jsx("p",{children:"Our Refund Policy outlines the conditions under which refunds may be issued for services booked through our platform. Please review this policy before making a booking."})]})]})]});case"about":return d.jsxs("div",{className:"settings-content",children:[d.jsx("h2",{className:"section-title",children:"About Us"}),d.jsxs("div",{className:"about-container",children:[d.jsxs("div",{className:"about-section",children:[d.jsx("h3",{children:"Our Mission"}),d.jsx("p",{children:"SkillConnect is dedicated to connecting skilled service providers with community members who need their expertise. Our platform makes it easy to find, book, and review services in your local area."})]}),d.jsxs("div",{className:"about-section",children:[d.jsx("h3",{children:"Our Team"}),d.jsx("p",{children:"Our team consists of passionate developers, designers, and community organizers who believe in the power of local connections and skill sharing."})]}),d.jsxs("div",{className:"about-section",children:[d.jsx("h3",{children:"Contact Information"}),d.jsxs("div",{className:"contact-info",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Email:"})," ",s.contactEmail||"admin@skillconnect.com"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Phone:"})," ",s.contactPhone||"(123) 456-7890"]})]})]}),d.jsxs("div",{className:"about-section",children:[d.jsx("h3",{children:"Version History"}),d.jsx("div",{className:"version-history",children:d.jsxs("div",{className:"version-item",children:[d.jsx("span",{className:"version-number",children:"v1.0.0"}),d.jsx("span",{className:"version-date",children:"Current Version"}),d.jsx("span",{className:"version-desc",children:"Initial release with core functionality"})]})})]})]})]});default:return d.jsx("div",{className:"settings-content",children:"Select a settings section"})}};return d.jsxs("div",{className:"admin-settings-container",children:[d.jsxs("aside",{className:"settings-sidebar",children:[d.jsx("div",{className:"settings-header",children:d.jsxs("h1",{className:"settings-title",children:[d.jsx(NB,{className:"icon"}),"Settings"]})}),d.jsxs("nav",{className:"settings-nav",children:[d.jsxs("div",{className:"nav-section",children:[d.jsx("div",{className:"nav-section-title",children:"Configuration"}),d.jsxs("button",{className:`nav-link ${t==="general"?"active":""}`,onClick:()=>r("general"),children:[d.jsx(NB,{className:"nav-icon"}),"General Settings"]}),d.jsxs("button",{className:`nav-link ${t==="notifications"?"active":""}`,onClick:()=>r("notifications"),children:[d.jsx(VU,{className:"nav-icon"}),"Notifications"]}),d.jsxs("button",{className:`nav-link ${t==="system"?"active":""}`,onClick:()=>r("system"),children:[d.jsx(tO,{className:"nav-icon"}),"System Settings"]}),d.jsxs("button",{className:`nav-link ${t==="maintenance"?"active":""}`,onClick:()=>r("maintenance"),children:[d.jsx(lf,{className:"nav-icon"}),"Maintenance"]})]}),d.jsxs("div",{className:"nav-section",children:[d.jsx("div",{className:"nav-section-title",children:"Information"}),d.jsxs("button",{className:`nav-link ${t==="terms"?"active":""}`,onClick:()=>r("terms"),children:[d.jsx(XU,{className:"nav-icon"}),"Terms & Policies"]}),d.jsxs("button",{className:`nav-link ${t==="about"?"active":""}`,onClick:()=>r("about"),children:[d.jsx(Z6,{className:"nav-icon"}),"About Us"]})]})]})]}),d.jsxs("div",{className:"settings-content-wrapper",children:[d.jsx("div",{className:"settings-header-actions",children:d.jsxs("button",{className:"btn btn-back",onClick:()=>e("/admin/analytics"),children:[d.jsx(K6,{})," Back to Dashboard"]})}),D(),t!=="terms"&&t!=="about"&&d.jsx("div",{className:"settings-actions",children:d.jsx("button",{className:"btn btn-primary",onClick:L,disabled:a,children:a?d.jsxs(d.Fragment,{children:[d.jsx(pv,{className:"spin"})," Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx(eO,{})," Save Settings"]})})})]})]})},YY=()=>{const e=Wo(),[t,r]=xe.useState(""),[i,n]=xe.useState(""),[a,c]=xe.useState(""),[s,p]=xe.useState(null),[g,v]=xe.useState(!1),[B,F]=xe.useState(""),C=P=>{p(P.target.files[0])},L=async P=>{if(P.preventDefault(),F(""),!t||!i||!a){F("Name, email, and password are required.");return}const D=new FormData;D.append("name",t),D.append("email",i),D.append("password",a),s&&D.append("profilePic",s);try{v(!0);const j=await Nr.post("/admin/auth/register",D);console.log(j.data),v(!1),e("/admin/login")}catch(j){v(!1),F(j.response?.data?.message||"Registration failed")}};return d.jsxs("div",{className:"container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"Admin Registration"}),d.jsx("p",{className:"header-description",children:"Register a new admin account"})]})}),B&&d.jsx("div",{className:"card error-message",children:B}),d.jsx("div",{className:"form-container",children:d.jsxs("form",{onSubmit:L,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Name"}),d.jsx("input",{type:"text",value:t,onChange:P=>r(P.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",value:i,onChange:P=>n(P.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Password"}),d.jsx("input",{type:"password",value:a,onChange:P=>c(P.target.value),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Profile Picture (Optional)"}),d.jsx("input",{type:"file",accept:"image/*",onChange:C})]}),d.jsx("div",{className:"actions-section",children:d.jsx("button",{type:"submit",disabled:g,className:"export-btn",children:g?"Registering...":"Register"})})]})})]})};var lI=1252,JY=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],pC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},mC=function(e){JY.indexOf(e)!=-1&&(lI=pC[0]=e)};function eJ(){mC(1252)}var OA=function(e){mC(e)};function cI(){OA(1200),eJ()}function kT(e){for(var t=[],r=0,i=e.length;r<i;++r)t[r]=e.charCodeAt(r);return t}function tJ(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function uI(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Q1=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?tJ(e.slice(2)):t==254&&r==255?uI(e.slice(2)):t==65279?e.slice(1):e},Qy=function(t){return String.fromCharCode(t)},FT=function(t){return String.fromCharCode(t)},kv,fp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function NT(e){for(var t="",r=0,i=0,n=0,a=0,c=0,s=0,p=0,g=0;g<e.length;)r=e.charCodeAt(g++),a=r>>2,i=e.charCodeAt(g++),c=(r&3)<<4|i>>4,n=e.charCodeAt(g++),s=(i&15)<<2|n>>6,p=n&63,isNaN(i)?s=p=64:isNaN(n)&&(p=64),t+=fp.charAt(a)+fp.charAt(c)+fp.charAt(s)+fp.charAt(p);return t}function Fh(e){var t="",r=0,i=0,n=0,a=0,c=0,s=0,p=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var g=0;g<e.length;)a=fp.indexOf(e.charAt(g++)),c=fp.indexOf(e.charAt(g++)),r=a<<2|c>>4,t+=String.fromCharCode(r),s=fp.indexOf(e.charAt(g++)),i=(c&15)<<4|s>>2,s!==64&&(t+=String.fromCharCode(i)),p=fp.indexOf(e.charAt(g++)),n=(s&3)<<6|p,p!==64&&(t+=String.fromCharCode(n));return t}var Kn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),P0=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Bp(e){return Kn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function IT(e){return Kn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var UA=function(t){return Kn?P0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function R0(e){if(Array.isArray(e))return e.map(function(i){return String.fromCharCode(i)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function gC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return gC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ap=Kn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:P0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var i=new Uint8Array(r),n=0;for(t=0,r=0;t<e.length;r+=n,++t)if(n=e[t].length,e[t]instanceof Uint8Array)i.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";i.set(new Uint8Array(e[t]),r)}return i}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function rJ(e){for(var t=[],r=0,i=e.length+250,n=Bp(e.length+255),a=0;a<e.length;++a){var c=e.charCodeAt(a);if(c<128)n[r++]=c;else if(c<2048)n[r++]=192|c>>6&31,n[r++]=128|c&63;else if(c>=55296&&c<57344){c=(c&1023)+64;var s=e.charCodeAt(++a)&1023;n[r++]=240|c>>8&7,n[r++]=128|c>>2&63,n[r++]=128|s>>6&15|(c&3)<<4,n[r++]=128|s&63}else n[r++]=224|c>>12&15,n[r++]=128|c>>6&63,n[r++]=128|c&63;r>i&&(t.push(n.slice(0,r)),r=0,n=Bp(65535),i=65530)}return t.push(n.slice(0,r)),ap(t)}var Bu=/\u0000/g,H1=/[\u0001-\u0006]/g;function ig(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function zA(e,t){var r=""+e;return r.length>=t?r:to("0",t-r.length)+r}function vC(e,t){var r=""+e;return r.length>=t?r:to(" ",t-r.length)+r}function X2(e,t){var r=""+e;return r.length>=t?r:r+to(" ",t-r.length)}function iJ(e,t){var r=""+Math.round(e);return r.length>=t?r:to("0",t-r.length)+r}function nJ(e,t){var r=""+e;return r.length>=t?r:to("0",t-r.length)+r}var LT=Math.pow(2,32);function Dm(e,t){if(e>LT||e<-LT)return iJ(e,t);var r=Math.round(e);return nJ(r,t)}function Z2(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var MT=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Nw=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function sJ(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var dn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},PT={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},aJ={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Y2(e,t,r){for(var i=e<0?-1:1,n=e*i,a=0,c=1,s=0,p=1,g=0,v=0,B=Math.floor(n);g<t&&(B=Math.floor(n),s=B*c+a,v=B*g+p,!(n-B<5e-8));)n=1/(n-B),a=c,c=s,p=g,g=v;if(v>t&&(g>t?(v=p,s=a):(v=g,s=c)),!r)return[0,i*s,v];var F=Math.floor(i*s/v);return[F,i*s-F*v,v]}function d0(e,t,r){if(e>2958465||e<0)return null;var i=e|0,n=Math.floor(86400*(e-i)),a=0,c=[],s={D:i,T:n,u:86400*(e-i)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(s.u)<1e-6&&(s.u=0),t&&t.date1904&&(i+=1462),s.u>.9999&&(s.u=0,++n==86400&&(s.T=n=0,++i,++s.D)),i===60)c=r?[1317,10,29]:[1900,2,29],a=3;else if(i===0)c=r?[1317,8,29]:[1900,1,0],a=6;else{i>60&&--i;var p=new Date(1900,0,1);p.setDate(p.getDate()+i-1),c=[p.getFullYear(),p.getMonth()+1,p.getDate()],a=p.getDay(),i<60&&(a=(a+6)%7),r&&(a=AJ(p,c))}return s.y=c[0],s.m=c[1],s.d=c[2],s.S=n%60,n=Math.floor(n/60),s.M=n%60,n=Math.floor(n/60),s.H=n,s.q=a,s}var hI=new Date(1899,11,31,0,0,0),oJ=hI.getTime(),lJ=new Date(1900,2,1,0,0,0);function AI(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=lJ&&(r+=1440*60*1e3),(r-(oJ+(e.getTimezoneOffset()-hI.getTimezoneOffset())*6e4))/(1440*60*1e3)}function xC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function cJ(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function uJ(e){var t=e<0?12:11,r=xC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function hJ(e){var t=xC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Fv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=uJ(e):t===10?r=e.toFixed(10).substr(0,12):r=hJ(e),xC(cJ(r.toUpperCase()))}function k0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Fv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return oA(14,AI(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function AJ(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function dJ(e,t,r,i){var n="",a=0,c=0,s=r.y,p,g=0;switch(e){case 98:s=r.y+543;case 121:switch(t.length){case 1:case 2:p=s%100,g=2;break;default:p=s%1e4,g=4;break}break;case 109:switch(t.length){case 1:case 2:p=r.m,g=t.length;break;case 3:return Nw[r.m-1][1];case 5:return Nw[r.m-1][0];default:return Nw[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:p=r.d,g=t.length;break;case 3:return MT[r.q][0];default:return MT[r.q][1]}break;case 104:switch(t.length){case 1:case 2:p=1+(r.H+11)%12,g=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:p=r.H,g=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:p=r.M,g=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?zA(r.S,t.length):(i>=2?c=i===3?1e3:100:c=i===1?10:1,a=Math.round(c*(r.S+r.u)),a>=60*c&&(a=0),t==="s"?a===0?"0":""+a/c:(n=zA(a,2+i),t==="ss"?n.substr(0,2):"."+n.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":p=r.D*24+r.H;break;case"[m]":case"[mm]":p=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":p=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}g=t.length===3?1:2;break;case 101:p=s,g=1;break}var v=g>0?zA(p,g):"";return v}function pp(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,i=e.substr(0,r);r!=e.length;r+=t)i+=(i.length>0?",":"")+e.substr(r,t);return i}var dI=/%/g;function fJ(e,t,r){var i=t.replace(dI,""),n=t.length-i.length;return mf(e,i,r*Math.pow(10,2*n))+to("%",n)}function pJ(e,t,r){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return mf(e,t.substr(0,i),r/Math.pow(10,3*(t.length-i)))}function fI(e,t){var r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+fI(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%n;if(a<0&&(a+=n),r=(t/Math.pow(10,a)).toPrecision(i+1+(n+a)%n),r.indexOf("e")===-1){var c=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+a):r+="E+"+(c-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,p,g,v){return p+g+v.substr(0,(n+a)%n)+"."+v.substr(a)+"E"})}else r=t.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var pI=/# (\?+)( ?)\/( ?)(\d+)/;function mJ(e,t,r){var i=parseInt(e[4],10),n=Math.round(t*i),a=Math.floor(n/i),c=n-a*i,s=i;return r+(a===0?"":""+a)+" "+(c===0?to(" ",e[1].length+1+e[4].length):vC(c,e[1].length)+e[2]+"/"+e[3]+zA(s,e[4].length))}function gJ(e,t,r){return r+(t===0?"":""+t)+to(" ",e[1].length+2+e[4].length)}var mI=/^#*0*\.([0#]+)/,gI=/\).*[0#]/,vI=/\(###\) ###\\?-####/;function _u(e){for(var t="",r,i=0;i!=e.length;++i)switch(r=e.charCodeAt(i)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function RT(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function DT(e,t){var r=e-Math.floor(e),i=Math.pow(10,t);return t<(""+Math.round(r*i)).length?0:Math.round(r*i)}function vJ(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function xJ(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Xh(e,t,r){if(e.charCodeAt(0)===40&&!t.match(gI)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Xh("n",i,r):"("+Xh("n",i,-r)+")"}if(t.charCodeAt(t.length-1)===44)return pJ(e,t,r);if(t.indexOf("%")!==-1)return fJ(e,t,r);if(t.indexOf("E")!==-1)return fI(t,r);if(t.charCodeAt(0)===36)return"$"+Xh(e,t.substr(t.charAt(1)==" "?2:1),r);var n,a,c,s,p=Math.abs(r),g=r<0?"-":"";if(t.match(/^00+$/))return g+Dm(p,t.length);if(t.match(/^[#?]+$/))return n=Dm(r,0),n==="0"&&(n=""),n.length>t.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(pI))return mJ(a,p,g);if(t.match(/^#+0+$/))return g+Dm(p,t.length-t.indexOf("0"));if(a=t.match(mI))return n=RT(r,a[1].length).replace(/^([^\.]+)$/,"$1."+_u(a[1])).replace(/\.$/,"."+_u(a[1])).replace(/\.(\d*)$/,function(L,P){return"."+P+to("0",_u(a[1]).length-P.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return g+RT(p,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return g+pp(Dm(p,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Xh(e,t,-r):pp(""+(Math.floor(r)+vJ(r,a[1].length)))+"."+zA(DT(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Xh(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=ig(Xh(e,t.replace(/[\\-]/g,""),r)),c=0,ig(ig(t.replace(/\\/g,"")).replace(/[0#]/g,function(L){return c<n.length?n.charAt(c++):L==="0"?"0":""}));if(t.match(vI))return n=Xh(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var v="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(a[4].length,7),s=Y2(p,Math.pow(10,c)-1,!1),n=""+g,v=mf("n",a[1],s[1]),v.charAt(v.length-1)==" "&&(v=v.substr(0,v.length-1)+"0"),n+=v+a[2]+"/"+a[3],v=X2(s[2],c),v.length<a[4].length&&(v=_u(a[4].substr(a[4].length-v.length))+v),n+=v,n;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(a[1].length,a[4].length),7),s=Y2(p,Math.pow(10,c)-1,!0),g+(s[0]||(s[1]?"":"0"))+" "+(s[1]?vC(s[1],c)+a[2]+"/"+a[3]+X2(s[2],c):to(" ",2*c+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return n=Dm(r,0),t.length<=n.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),c=n.indexOf(".");var B=t.indexOf(".")-c,F=t.length-n.length-B;return _u(t.substr(0,B)+n+t.substr(t.length-F))}if(a=t.match(/^00,000\.([#0]*0)$/))return c=DT(r,a[1].length),r<0?"-"+Xh(e,t,-r):pp(xJ(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(L){return"00,"+(L.length<3?zA(0,3-L.length):"")+L})+"."+zA(c,a[1].length);switch(t){case"###,##0.00":return Xh(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var C=pp(Dm(p,0));return C!=="0"?g+C:"";case"###,###.00":return Xh(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Xh(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function yJ(e,t,r){for(var i=t.length-1;t.charCodeAt(i-1)===44;)--i;return mf(e,t.substr(0,i),r/Math.pow(10,3*(t.length-i)))}function _J(e,t,r){var i=t.replace(dI,""),n=t.length-i.length;return mf(e,i,r*Math.pow(10,2*n))+to("%",n)}function xI(e,t){var r,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+xI(e,-t);var n=e.indexOf(".");n===-1&&(n=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%n;if(a<0&&(a+=n),r=(t/Math.pow(10,a)).toPrecision(i+1+(n+a)%n),!r.match(/[Ee]/)){var c=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(c-r.length+a):r+="E+"+(c-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(s,p,g,v){return p+g+v.substr(0,(n+a)%n)+"."+v.substr(a)+"E"})}else r=t.toExponential(i);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function yd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(gI)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yd("n",i,r):"("+yd("n",i,-r)+")"}if(t.charCodeAt(t.length-1)===44)return yJ(e,t,r);if(t.indexOf("%")!==-1)return _J(e,t,r);if(t.indexOf("E")!==-1)return xI(t,r);if(t.charCodeAt(0)===36)return"$"+yd(e,t.substr(t.charAt(1)==" "?2:1),r);var n,a,c,s,p=Math.abs(r),g=r<0?"-":"";if(t.match(/^00+$/))return g+zA(p,t.length);if(t.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>t.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(pI))return gJ(a,p,g);if(t.match(/^#+0+$/))return g+zA(p,t.length-t.indexOf("0"));if(a=t.match(mI))return n=(""+r).replace(/^([^\.]+)$/,"$1."+_u(a[1])).replace(/\.$/,"."+_u(a[1])),n=n.replace(/\.(\d*)$/,function(L,P){return"."+P+to("0",_u(a[1]).length-P.length)}),t.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return g+(""+p).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return g+pp(""+p);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yd(e,t,-r):pp(""+r)+"."+to("0",a[1].length);if(a=t.match(/^#,#*,#0/))return yd(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return n=ig(yd(e,t.replace(/[\\-]/g,""),r)),c=0,ig(ig(t.replace(/\\/g,"")).replace(/[0#]/g,function(L){return c<n.length?n.charAt(c++):L==="0"?"0":""}));if(t.match(vI))return n=yd(e,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var v="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(a[4].length,7),s=Y2(p,Math.pow(10,c)-1,!1),n=""+g,v=mf("n",a[1],s[1]),v.charAt(v.length-1)==" "&&(v=v.substr(0,v.length-1)+"0"),n+=v+a[2]+"/"+a[3],v=X2(s[2],c),v.length<a[4].length&&(v=_u(a[4].substr(a[4].length-v.length))+v),n+=v,n;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return c=Math.min(Math.max(a[1].length,a[4].length),7),s=Y2(p,Math.pow(10,c)-1,!0),g+(s[0]||(s[1]?"":"0"))+" "+(s[1]?vC(s[1],c)+a[2]+"/"+a[3]+X2(s[2],c):to(" ",2*c+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return n=""+r,t.length<=n.length?n:_u(t.substr(0,t.length-n.length))+n;if(a=t.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),c=n.indexOf(".");var B=t.indexOf(".")-c,F=t.length-n.length-B;return _u(t.substr(0,B)+n+t.substr(t.length-F))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+yd(e,t,-r):pp(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(L){return"00,"+(L.length<3?zA(0,3-L.length):"")+L})+"."+zA(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var C=pp(""+p);return C!=="0"?g+C:"";default:if(t.match(/\.[0#?]*$/))return yd(e,t.slice(0,t.lastIndexOf(".")),r)+_u(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function mf(e,t,r){return(r|0)===r?yd(e,t,r):Xh(e,t,r)}function bJ(e){for(var t=[],r=!1,i=0,n=0;i<e.length;++i)switch(e.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:t[t.length]=e.substr(n,i-n),n=i+1}if(t[t.length]=e.substr(n),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var yI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function wg(e){for(var t=0,r="",i="";t<e.length;)switch(r=e.charAt(t)){case"G":Z2(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(i=r;e.charAt(t++)!=="]"&&t<e.length;)i+=e.charAt(t);if(i.match(yI))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function wJ(e,t,r,i){for(var n=[],a="",c=0,s="",p="t",g,v,B,F="H";c<e.length;)switch(s=e.charAt(c)){case"G":if(!Z2(e,c))throw new Error("unrecognized character "+s+" in "+e);n[n.length]={t:"G",v:"General"},c+=7;break;case'"':for(a="";(B=e.charCodeAt(++c))!==34&&c<e.length;)a+=String.fromCharCode(B);n[n.length]={t:"t",v:a},++c;break;case"\\":var C=e.charAt(++c),L=C==="("||C===")"?C:"t";n[n.length]={t:L,v:C},++c;break;case"_":n[n.length]={t:"t",v:" "},c+=2;break;case"@":n[n.length]={t:"T",v:t},++c;break;case"B":case"b":if(e.charAt(c+1)==="1"||e.charAt(c+1)==="2"){if(g==null&&(g=d0(t,r,e.charAt(c+1)==="2"),g==null))return"";n[n.length]={t:"X",v:e.substr(c,2)},p=s,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":s=s.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||g==null&&(g=d0(t,r),g==null))return"";for(a=s;++c<e.length&&e.charAt(c).toLowerCase()===s;)a+=s;s==="m"&&p.toLowerCase()==="h"&&(s="M"),s==="h"&&(s=F),n[n.length]={t:s,v:a},p=s;break;case"A":case"a":case"":var P={t:s,v:s};if(g==null&&(g=d0(t,r)),e.substr(c,3).toUpperCase()==="A/P"?(g!=null&&(P.v=g.H>=12?"P":"A"),P.t="T",F="h",c+=3):e.substr(c,5).toUpperCase()==="AM/PM"?(g!=null&&(P.v=g.H>=12?"PM":"AM"),P.t="T",c+=5,F="h"):e.substr(c,5).toUpperCase()==="/"?(g!=null&&(P.v=g.H>=12?"":""),P.t="T",c+=5,F="h"):(P.t="t",++c),g==null&&P.t==="T")return"";n[n.length]=P,p=s;break;case"[":for(a=s;e.charAt(c++)!=="]"&&c<e.length;)a+=e.charAt(c);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(yI)){if(g==null&&(g=d0(t,r),g==null))return"";n[n.length]={t:"Z",v:a.toLowerCase()},p=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",wg(e)||(n[n.length]={t:"t",v:a}));break;case".":if(g!=null){for(a=s;++c<e.length&&(s=e.charAt(c))==="0";)a+=s;n[n.length]={t:"s",v:a};break}case"0":case"#":for(a=s;++c<e.length&&"0#?.,E+-%".indexOf(s=e.charAt(c))>-1;)a+=s;n[n.length]={t:"n",v:a};break;case"?":for(a=s;e.charAt(++c)===s;)a+=s;n[n.length]={t:s,v:a},p=s;break;case"*":++c,(e.charAt(c)==" "||e.charAt(c)=="*")&&++c;break;case"(":case")":n[n.length]={t:i===1?"t":s,v:s},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=s;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)a+=e.charAt(c);n[n.length]={t:"D",v:a};break;case" ":n[n.length]={t:s,v:s},++c;break;case"$":n[n.length]={t:"t",v:"$"},++c;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(s)===-1)throw new Error("unrecognized character "+s+" in "+e);n[n.length]={t:"t",v:s},++c;break}var D=0,j=0,q;for(c=n.length-1,p="t";c>=0;--c)switch(n[c].t){case"h":case"H":n[c].t=F,p="h",D<1&&(D=1);break;case"s":(q=n[c].v.match(/\.0+$/))&&(j=Math.max(j,q[0].length-1)),D<3&&(D=3);case"d":case"y":case"M":case"e":p=n[c].t;break;case"m":p==="s"&&(n[c].t="M",D<2&&(D=2));break;case"X":break;case"Z":D<1&&n[c].v.match(/[Hh]/)&&(D=1),D<2&&n[c].v.match(/[Mm]/)&&(D=2),D<3&&n[c].v.match(/[Ss]/)&&(D=3)}switch(D){case 0:break;case 1:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M),g.M>=60&&(g.M=0,++g.H);break;case 2:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M);break}var H="",ee;for(c=0;c<n.length;++c)switch(n[c].t){case"t":case"T":case" ":case"D":break;case"X":n[c].v="",n[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[c].v=dJ(n[c].t.charCodeAt(0),n[c].v,g,j),n[c].t="t";break;case"n":case"?":for(ee=c+1;n[ee]!=null&&((s=n[ee].t)==="?"||s==="D"||(s===" "||s==="t")&&n[ee+1]!=null&&(n[ee+1].t==="?"||n[ee+1].t==="t"&&n[ee+1].v==="/")||n[c].t==="("&&(s===" "||s==="n"||s===")")||s==="t"&&(n[ee].v==="/"||n[ee].v===" "&&n[ee+1]!=null&&n[ee+1].t=="?"));)n[c].v+=n[ee].v,n[ee]={v:"",t:";"},++ee;H+=n[c].v,c=ee-1;break;case"G":n[c].t="t",n[c].v=k0(t,r);break}var G="",ne,Z;if(H.length>0){H.charCodeAt(0)==40?(ne=t<0&&H.charCodeAt(0)===45?-t:t,Z=mf("n",H,ne)):(ne=t<0&&i>1?-t:t,Z=mf("n",H,ne),ne<0&&n[0]&&n[0].t=="t"&&(Z=Z.substr(1),n[0].v="-"+n[0].v)),ee=Z.length-1;var le=n.length;for(c=0;c<n.length;++c)if(n[c]!=null&&n[c].t!="t"&&n[c].v.indexOf(".")>-1){le=c;break}var J=n.length;if(le===n.length&&Z.indexOf("E")===-1){for(c=n.length-1;c>=0;--c)n[c]==null||"n?".indexOf(n[c].t)===-1||(ee>=n[c].v.length-1?(ee-=n[c].v.length,n[c].v=Z.substr(ee+1,n[c].v.length)):ee<0?n[c].v="":(n[c].v=Z.substr(0,ee+1),ee=-1),n[c].t="t",J=c);ee>=0&&J<n.length&&(n[J].v=Z.substr(0,ee+1)+n[J].v)}else if(le!==n.length&&Z.indexOf("E")===-1){for(ee=Z.indexOf(".")-1,c=le;c>=0;--c)if(!(n[c]==null||"n?".indexOf(n[c].t)===-1)){for(v=n[c].v.indexOf(".")>-1&&c===le?n[c].v.indexOf(".")-1:n[c].v.length-1,G=n[c].v.substr(v+1);v>=0;--v)ee>=0&&(n[c].v.charAt(v)==="0"||n[c].v.charAt(v)==="#")&&(G=Z.charAt(ee--)+G);n[c].v=G,n[c].t="t",J=c}for(ee>=0&&J<n.length&&(n[J].v=Z.substr(0,ee+1)+n[J].v),ee=Z.indexOf(".")+1,c=le;c<n.length;++c)if(!(n[c]==null||"n?(".indexOf(n[c].t)===-1&&c!==le)){for(v=n[c].v.indexOf(".")>-1&&c===le?n[c].v.indexOf(".")+1:0,G=n[c].v.substr(0,v);v<n[c].v.length;++v)ee<Z.length&&(G+=Z.charAt(ee++));n[c].v=G,n[c].t="t",J=c}}}for(c=0;c<n.length;++c)n[c]!=null&&"n?".indexOf(n[c].t)>-1&&(ne=i>1&&t<0&&c>0&&n[c-1].v==="-"?-t:t,n[c].v=mf(n[c].t,n[c].v,ne),n[c].t="t");var ce="";for(c=0;c!==n.length;++c)n[c]!=null&&(ce+=n[c].v);return ce}var jT=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function UT(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function CJ(e,t){var r=bJ(e),i=r.length,n=r[i-1].indexOf("@");if(i<4&&n>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var c=r[0].match(jT),s=r[1].match(jT);return UT(t,c)?[i,r[0]]:UT(t,s)?[i,r[1]]:[i,r[c!=null&&s!=null?2:1]]}return[i,a]}function oA(e,t,r){r==null&&(r={});var i="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?i=r.dateNF:i=e;break;case"number":e==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:dn)[e],i==null&&(i=r.table&&r.table[PT[e]]||dn[PT[e]]),i==null&&(i=aJ[e]||"General");break}if(Z2(i,0))return k0(t,r);t instanceof Date&&(t=AI(t,r.date1904));var n=CJ(i,t);if(Z2(n[1]))return k0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return wJ(n[1],t,r,n[0])}function _0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(dn[r]==null){t<0&&(t=r);continue}if(dn[r]==e){t=r;break}}t<0&&(t=391)}return dn[t]=e,t}function _I(){dn=sJ()}var BJ={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},bI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function SJ(e){var t=typeof e=="number"?dn[e]:e;return t=t.replace(bI,"(\\d+)"),new RegExp("^"+t+"$")}function EJ(e,t,r){var i=-1,n=-1,a=-1,c=-1,s=-1,p=-1;(t.match(bI)||[]).forEach(function(B,F){var C=parseInt(r[F+1],10);switch(B.toLowerCase().charAt(0)){case"y":i=C;break;case"d":a=C;break;case"h":c=C;break;case"s":p=C;break;case"m":c>=0?s=C:n=C;break}}),p>=0&&s==-1&&n>=0&&(s=n,n=-1);var g=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);g.length==7&&(g="0"+g),g.length==8&&(g="20"+g);var v=("00"+(c>=0?c:0)).slice(-2)+":"+("00"+(s>=0?s:0)).slice(-2)+":"+("00"+(p>=0?p:0)).slice(-2);return c==-1&&s==-1&&p==-1?g:i==-1&&n==-1&&a==-1?v:g+"T"+v}var TJ=function(){var e={};e.version="1.2.0";function t(){for(var Z=0,le=new Array(256),J=0;J!=256;++J)Z=J,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,le[J]=Z;return typeof Int32Array<"u"?new Int32Array(le):le}var r=t();function i(Z){var le=0,J=0,ce=0,te=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ce=0;ce!=256;++ce)te[ce]=Z[ce];for(ce=0;ce!=256;++ce)for(J=Z[ce],le=256+ce;le<4096;le+=256)J=te[le]=J>>>8^Z[J&255];var K=[];for(ce=1;ce!=16;++ce)K[ce-1]=typeof Int32Array<"u"?te.subarray(ce*256,ce*256+256):te.slice(ce*256,ce*256+256);return K}var n=i(r),a=n[0],c=n[1],s=n[2],p=n[3],g=n[4],v=n[5],B=n[6],F=n[7],C=n[8],L=n[9],P=n[10],D=n[11],j=n[12],q=n[13],H=n[14];function ee(Z,le){for(var J=le^-1,ce=0,te=Z.length;ce<te;)J=J>>>8^r[(J^Z.charCodeAt(ce++))&255];return~J}function G(Z,le){for(var J=le^-1,ce=Z.length-15,te=0;te<ce;)J=H[Z[te++]^J&255]^q[Z[te++]^J>>8&255]^j[Z[te++]^J>>16&255]^D[Z[te++]^J>>>24]^P[Z[te++]]^L[Z[te++]]^C[Z[te++]]^F[Z[te++]]^B[Z[te++]]^v[Z[te++]]^g[Z[te++]]^p[Z[te++]]^s[Z[te++]]^c[Z[te++]]^a[Z[te++]]^r[Z[te++]];for(ce+=15;te<ce;)J=J>>>8^r[(J^Z[te++])&255];return~J}function ne(Z,le){for(var J=le^-1,ce=0,te=Z.length,K=0,me=0;ce<te;)K=Z.charCodeAt(ce++),K<128?J=J>>>8^r[(J^K)&255]:K<2048?(J=J>>>8^r[(J^(192|K>>6&31))&255],J=J>>>8^r[(J^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,me=Z.charCodeAt(ce++)&1023,J=J>>>8^r[(J^(240|K>>8&7))&255],J=J>>>8^r[(J^(128|K>>2&63))&255],J=J>>>8^r[(J^(128|me>>6&15|(K&3)<<4))&255],J=J>>>8^r[(J^(128|me&63))&255]):(J=J>>>8^r[(J^(224|K>>12&15))&255],J=J>>>8^r[(J^(128|K>>6&63))&255],J=J>>>8^r[(J^(128|K&63))&255]);return~J}return e.table=r,e.bstr=ee,e.buf=G,e.str=ne,e}(),Xn=function(){var t={};t.version="1.2.1";function r(De,lt){for(var Ye=De.split("/"),nt=lt.split("/"),Qe=0,st=0,Tt=Math.min(Ye.length,nt.length);Qe<Tt;++Qe){if(st=Ye[Qe].length-nt[Qe].length)return st;if(Ye[Qe]!=nt[Qe])return Ye[Qe]<nt[Qe]?-1:1}return Ye.length-nt.length}function i(De){if(De.charAt(De.length-1)=="/")return De.slice(0,-1).indexOf("/")===-1?De:i(De.slice(0,-1));var lt=De.lastIndexOf("/");return lt===-1?De:De.slice(0,lt+1)}function n(De){if(De.charAt(De.length-1)=="/")return n(De.slice(0,-1));var lt=De.lastIndexOf("/");return lt===-1?De:De.slice(lt+1)}function a(De,lt){typeof lt=="string"&&(lt=new Date(lt));var Ye=lt.getHours();Ye=Ye<<6|lt.getMinutes(),Ye=Ye<<5|lt.getSeconds()>>>1,De.write_shift(2,Ye);var nt=lt.getFullYear()-1980;nt=nt<<4|lt.getMonth()+1,nt=nt<<5|lt.getDate(),De.write_shift(2,nt)}function c(De){var lt=De.read_shift(2)&65535,Ye=De.read_shift(2)&65535,nt=new Date,Qe=Ye&31;Ye>>>=5;var st=Ye&15;Ye>>>=4,nt.setMilliseconds(0),nt.setFullYear(Ye+1980),nt.setMonth(st-1),nt.setDate(Qe);var Tt=lt&31;lt>>>=5;var sr=lt&63;return lt>>>=6,nt.setHours(lt),nt.setMinutes(sr),nt.setSeconds(Tt<<1),nt}function s(De){dc(De,0);for(var lt={},Ye=0;De.l<=De.length-4;){var nt=De.read_shift(2),Qe=De.read_shift(2),st=De.l+Qe,Tt={};switch(nt){case 21589:Ye=De.read_shift(1),Ye&1&&(Tt.mtime=De.read_shift(4)),Qe>5&&(Ye&2&&(Tt.atime=De.read_shift(4)),Ye&4&&(Tt.ctime=De.read_shift(4))),Tt.mtime&&(Tt.mt=new Date(Tt.mtime*1e3));break}De.l=st,lt[nt]=Tt}return lt}var p;function g(){return p||(p={})}function v(De,lt){if(De[0]==80&&De[1]==75)return qt(De,lt);if((De[0]|32)==109&&(De[1]|32)==105)return Yr(De,lt);if(De.length<512)throw new Error("CFB file size "+De.length+" < 512");var Ye=3,nt=512,Qe=0,st=0,Tt=0,sr=0,jt=0,Kt=[],Mt=De.slice(0,512);dc(Mt,0);var Cr=B(Mt);switch(Ye=Cr[0],Ye){case 3:nt=512;break;case 4:nt=4096;break;case 0:if(Cr[1]==0)return qt(De,lt);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ye)}nt!==512&&(Mt=De.slice(0,nt),dc(Mt,28));var Dr=De.slice(0,nt);F(Mt,Ye);var Kr=Mt.read_shift(4,"i");if(Ye===3&&Kr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Kr);Mt.l+=4,Tt=Mt.read_shift(4,"i"),Mt.l+=4,Mt.chk("00100000","Mini Stream Cutoff Size: "),sr=Mt.read_shift(4,"i"),Qe=Mt.read_shift(4,"i"),jt=Mt.read_shift(4,"i"),st=Mt.read_shift(4,"i");for(var Pr=-1,Gr=0;Gr<109&&(Pr=Mt.read_shift(4,"i"),!(Pr<0));++Gr)Kt[Gr]=Pr;var yi=C(De,nt);D(jt,st,yi,nt,Kt);var Fi=q(yi,Tt,Kt,nt);Fi[Tt].name="!Directory",Qe>0&&sr!==me&&(Fi[sr].name="!MiniFAT"),Fi[Kt[0]].name="!FAT",Fi.fat_addrs=Kt,Fi.ssz=nt;var Ni={},_i=[],Qa=[],La=[];H(Tt,Fi,yi,_i,Qe,Ni,Qa,sr),L(Qa,La,_i),_i.shift();var Ma={FileIndex:Qa,FullPaths:La};return lt&&lt.raw&&(Ma.raw={header:Dr,sectors:yi}),Ma}function B(De){if(De[De.l]==80&&De[De.l+1]==75)return[0,0];De.chk(we,"Header Signature: "),De.l+=16;var lt=De.read_shift(2,"u");return[De.read_shift(2,"u"),lt]}function F(De,lt){var Ye=9;switch(De.l+=2,Ye=De.read_shift(2)){case 9:if(lt!=3)throw new Error("Sector Shift: Expected 9 saw "+Ye);break;case 12:if(lt!=4)throw new Error("Sector Shift: Expected 12 saw "+Ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ye)}De.chk("0600","Mini Sector Shift: "),De.chk("000000000000","Reserved: ")}function C(De,lt){for(var Ye=Math.ceil(De.length/lt)-1,nt=[],Qe=1;Qe<Ye;++Qe)nt[Qe-1]=De.slice(Qe*lt,(Qe+1)*lt);return nt[Ye-1]=De.slice(Ye*lt),nt}function L(De,lt,Ye){for(var nt=0,Qe=0,st=0,Tt=0,sr=0,jt=Ye.length,Kt=[],Mt=[];nt<jt;++nt)Kt[nt]=Mt[nt]=nt,lt[nt]=Ye[nt];for(;sr<Mt.length;++sr)nt=Mt[sr],Qe=De[nt].L,st=De[nt].R,Tt=De[nt].C,Kt[nt]===nt&&(Qe!==-1&&Kt[Qe]!==Qe&&(Kt[nt]=Kt[Qe]),st!==-1&&Kt[st]!==st&&(Kt[nt]=Kt[st])),Tt!==-1&&(Kt[Tt]=nt),Qe!==-1&&nt!=Kt[nt]&&(Kt[Qe]=Kt[nt],Mt.lastIndexOf(Qe)<sr&&Mt.push(Qe)),st!==-1&&nt!=Kt[nt]&&(Kt[st]=Kt[nt],Mt.lastIndexOf(st)<sr&&Mt.push(st));for(nt=1;nt<jt;++nt)Kt[nt]===nt&&(st!==-1&&Kt[st]!==st?Kt[nt]=Kt[st]:Qe!==-1&&Kt[Qe]!==Qe&&(Kt[nt]=Kt[Qe]));for(nt=1;nt<jt;++nt)if(De[nt].type!==0){if(sr=nt,sr!=Kt[sr])do sr=Kt[sr],lt[nt]=lt[sr]+"/"+lt[nt];while(sr!==0&&Kt[sr]!==-1&&sr!=Kt[sr]);Kt[nt]=-1}for(lt[0]+="/",nt=1;nt<jt;++nt)De[nt].type!==2&&(lt[nt]+="/")}function P(De,lt,Ye){for(var nt=De.start,Qe=De.size,st=[],Tt=nt;Ye&&Qe>0&&Tt>=0;)st.push(lt.slice(Tt*K,Tt*K+K)),Qe-=K,Tt=l0(Ye,Tt*4);return st.length===0?fl(0):ap(st).slice(0,De.size)}function D(De,lt,Ye,nt,Qe){var st=me;if(De===me){if(lt!==0)throw new Error("DIFAT chain shorter than expected")}else if(De!==-1){var Tt=Ye[De],sr=(nt>>>2)-1;if(!Tt)return;for(var jt=0;jt<sr&&(st=l0(Tt,jt*4))!==me;++jt)Qe.push(st);D(l0(Tt,nt-4),lt-1,Ye,nt,Qe)}}function j(De,lt,Ye,nt,Qe){var st=[],Tt=[];Qe||(Qe=[]);var sr=nt-1,jt=0,Kt=0;for(jt=lt;jt>=0;){Qe[jt]=!0,st[st.length]=jt,Tt.push(De[jt]);var Mt=Ye[Math.floor(jt*4/nt)];if(Kt=jt*4&sr,nt<4+Kt)throw new Error("FAT boundary crossed: "+jt+" 4 "+nt);if(!De[Mt])break;jt=l0(De[Mt],Kt)}return{nodes:st,data:$T([Tt])}}function q(De,lt,Ye,nt){var Qe=De.length,st=[],Tt=[],sr=[],jt=[],Kt=nt-1,Mt=0,Cr=0,Dr=0,Kr=0;for(Mt=0;Mt<Qe;++Mt)if(sr=[],Dr=Mt+lt,Dr>=Qe&&(Dr-=Qe),!Tt[Dr]){jt=[];var Pr=[];for(Cr=Dr;Cr>=0;){Pr[Cr]=!0,Tt[Cr]=!0,sr[sr.length]=Cr,jt.push(De[Cr]);var Gr=Ye[Math.floor(Cr*4/nt)];if(Kr=Cr*4&Kt,nt<4+Kr)throw new Error("FAT boundary crossed: "+Cr+" 4 "+nt);if(!De[Gr]||(Cr=l0(De[Gr],Kr),Pr[Cr]))break}st[Dr]={nodes:sr,data:$T([jt])}}return st}function H(De,lt,Ye,nt,Qe,st,Tt,sr){for(var jt=0,Kt=nt.length?2:0,Mt=lt[De].data,Cr=0,Dr=0,Kr;Cr<Mt.length;Cr+=128){var Pr=Mt.slice(Cr,Cr+128);dc(Pr,64),Dr=Pr.read_shift(2),Kr=CC(Pr,0,Dr-Kt),nt.push(Kr);var Gr={name:Kr,type:Pr.read_shift(1),color:Pr.read_shift(1),L:Pr.read_shift(4,"i"),R:Pr.read_shift(4,"i"),C:Pr.read_shift(4,"i"),clsid:Pr.read_shift(16),state:Pr.read_shift(4,"i"),start:0,size:0},yi=Pr.read_shift(2)+Pr.read_shift(2)+Pr.read_shift(2)+Pr.read_shift(2);yi!==0&&(Gr.ct=ee(Pr,Pr.l-8));var Fi=Pr.read_shift(2)+Pr.read_shift(2)+Pr.read_shift(2)+Pr.read_shift(2);Fi!==0&&(Gr.mt=ee(Pr,Pr.l-8)),Gr.start=Pr.read_shift(4,"i"),Gr.size=Pr.read_shift(4,"i"),Gr.size<0&&Gr.start<0&&(Gr.size=Gr.type=0,Gr.start=me,Gr.name=""),Gr.type===5?(jt=Gr.start,Qe>0&&jt!==me&&(lt[jt].name="!StreamData")):Gr.size>=4096?(Gr.storage="fat",lt[Gr.start]===void 0&&(lt[Gr.start]=j(Ye,Gr.start,lt.fat_addrs,lt.ssz)),lt[Gr.start].name=Gr.name,Gr.content=lt[Gr.start].data.slice(0,Gr.size)):(Gr.storage="minifat",Gr.size<0?Gr.size=0:jt!==me&&Gr.start!==me&&lt[jt]&&(Gr.content=P(Gr,lt[jt].data,(lt[sr]||{}).data))),Gr.content&&dc(Gr.content,0),st[Kr]=Gr,Tt.push(Gr)}}function ee(De,lt){return new Date((Eh(De,lt+4)/1e7*Math.pow(2,32)+Eh(De,lt)/1e7-11644473600)*1e3)}function G(De,lt){return g(),v(p.readFileSync(De),lt)}function ne(De,lt){var Ye=lt&&lt.type;switch(Ye||Kn&&Buffer.isBuffer(De)&&(Ye="buffer"),Ye||"base64"){case"file":return G(De,lt);case"base64":return v(UA(Fh(De)),lt);case"binary":return v(UA(De),lt)}return v(De,lt)}function Z(De,lt){var Ye=lt||{},nt=Ye.root||"Root Entry";if(De.FullPaths||(De.FullPaths=[]),De.FileIndex||(De.FileIndex=[]),De.FullPaths.length!==De.FileIndex.length)throw new Error("inconsistent CFB structure");De.FullPaths.length===0&&(De.FullPaths[0]=nt+"/",De.FileIndex[0]={name:nt,type:5}),Ye.CLSID&&(De.FileIndex[0].clsid=Ye.CLSID),le(De)}function le(De){var lt="Sh33tJ5";if(!Xn.find(De,"/"+lt)){var Ye=fl(4);Ye[0]=55,Ye[1]=Ye[3]=50,Ye[2]=54,De.FileIndex.push({name:lt,type:2,content:Ye,size:4,L:69,R:69,C:69}),De.FullPaths.push(De.FullPaths[0]+lt),J(De)}}function J(De,lt){Z(De);for(var Ye=!1,nt=!1,Qe=De.FullPaths.length-1;Qe>=0;--Qe){var st=De.FileIndex[Qe];switch(st.type){case 0:nt?Ye=!0:(De.FileIndex.pop(),De.FullPaths.pop());break;case 1:case 2:case 5:nt=!0,isNaN(st.R*st.L*st.C)&&(Ye=!0),st.R>-1&&st.L>-1&&st.R==st.L&&(Ye=!0);break;default:Ye=!0;break}}if(!(!Ye&&!lt)){var Tt=new Date(1987,1,19),sr=0,jt=Object.create?Object.create(null):{},Kt=[];for(Qe=0;Qe<De.FullPaths.length;++Qe)jt[De.FullPaths[Qe]]=!0,De.FileIndex[Qe].type!==0&&Kt.push([De.FullPaths[Qe],De.FileIndex[Qe]]);for(Qe=0;Qe<Kt.length;++Qe){var Mt=i(Kt[Qe][0]);nt=jt[Mt],nt||(Kt.push([Mt,{name:n(Mt).replace("/",""),type:1,clsid:he,ct:Tt,mt:Tt,content:null}]),jt[Mt]=!0)}for(Kt.sort(function(Kr,Pr){return r(Kr[0],Pr[0])}),De.FullPaths=[],De.FileIndex=[],Qe=0;Qe<Kt.length;++Qe)De.FullPaths[Qe]=Kt[Qe][0],De.FileIndex[Qe]=Kt[Qe][1];for(Qe=0;Qe<Kt.length;++Qe){var Cr=De.FileIndex[Qe],Dr=De.FullPaths[Qe];if(Cr.name=n(Dr).replace("/",""),Cr.L=Cr.R=Cr.C=-(Cr.color=1),Cr.size=Cr.content?Cr.content.length:0,Cr.start=0,Cr.clsid=Cr.clsid||he,Qe===0)Cr.C=Kt.length>1?1:-1,Cr.size=0,Cr.type=5;else if(Dr.slice(-1)=="/"){for(sr=Qe+1;sr<Kt.length&&i(De.FullPaths[sr])!=Dr;++sr);for(Cr.C=sr>=Kt.length?-1:sr,sr=Qe+1;sr<Kt.length&&i(De.FullPaths[sr])!=i(Dr);++sr);Cr.R=sr>=Kt.length?-1:sr,Cr.type=1}else i(De.FullPaths[Qe+1]||"")==i(Dr)&&(Cr.R=Qe+1),Cr.type=2}}}function ce(De,lt){var Ye=lt||{};if(Ye.fileType=="mad")return on(De,Ye);switch(J(De),Ye.fileType){case"zip":return Fr(De,Ye)}var nt=function(Kr){for(var Pr=0,Gr=0,yi=0;yi<Kr.FileIndex.length;++yi){var Fi=Kr.FileIndex[yi];if(Fi.content){var Ni=Fi.content.length;Ni>0&&(Ni<4096?Pr+=Ni+63>>6:Gr+=Ni+511>>9)}}for(var _i=Kr.FullPaths.length+3>>2,Qa=Pr+7>>3,La=Pr+127>>7,Ma=Qa+Gr+_i+La,ea=Ma+127>>7,xa=ea<=109?0:Math.ceil((ea-109)/127);Ma+ea+xa+127>>7>ea;)xa=++ea<=109?0:Math.ceil((ea-109)/127);var Qs=[1,xa,ea,La,_i,Gr,Pr,0];return Kr.FileIndex[0].size=Pr<<6,Qs[7]=(Kr.FileIndex[0].start=Qs[0]+Qs[1]+Qs[2]+Qs[3]+Qs[4]+Qs[5])+(Qs[6]+7>>3),Qs}(De),Qe=fl(nt[7]<<9),st=0,Tt=0;{for(st=0;st<8;++st)Qe.write_shift(1,Fe[st]);for(st=0;st<8;++st)Qe.write_shift(2,0);for(Qe.write_shift(2,62),Qe.write_shift(2,3),Qe.write_shift(2,65534),Qe.write_shift(2,9),Qe.write_shift(2,6),st=0;st<3;++st)Qe.write_shift(2,0);for(Qe.write_shift(4,0),Qe.write_shift(4,nt[2]),Qe.write_shift(4,nt[0]+nt[1]+nt[2]+nt[3]-1),Qe.write_shift(4,0),Qe.write_shift(4,4096),Qe.write_shift(4,nt[3]?nt[0]+nt[1]+nt[2]-1:me),Qe.write_shift(4,nt[3]),Qe.write_shift(-4,nt[1]?nt[0]-1:me),Qe.write_shift(4,nt[1]),st=0;st<109;++st)Qe.write_shift(-4,st<nt[2]?nt[1]+st:-1)}if(nt[1])for(Tt=0;Tt<nt[1];++Tt){for(;st<236+Tt*127;++st)Qe.write_shift(-4,st<nt[2]?nt[1]+st:-1);Qe.write_shift(-4,Tt===nt[1]-1?me:Tt+1)}var sr=function(Kr){for(Tt+=Kr;st<Tt-1;++st)Qe.write_shift(-4,st+1);Kr&&(++st,Qe.write_shift(-4,me))};for(Tt=st=0,Tt+=nt[1];st<Tt;++st)Qe.write_shift(-4,Le.DIFSECT);for(Tt+=nt[2];st<Tt;++st)Qe.write_shift(-4,Le.FATSECT);sr(nt[3]),sr(nt[4]);for(var jt=0,Kt=0,Mt=De.FileIndex[0];jt<De.FileIndex.length;++jt)Mt=De.FileIndex[jt],Mt.content&&(Kt=Mt.content.length,!(Kt<4096)&&(Mt.start=Tt,sr(Kt+511>>9)));for(sr(nt[6]+7>>3);Qe.l&511;)Qe.write_shift(-4,Le.ENDOFCHAIN);for(Tt=st=0,jt=0;jt<De.FileIndex.length;++jt)Mt=De.FileIndex[jt],Mt.content&&(Kt=Mt.content.length,!(!Kt||Kt>=4096)&&(Mt.start=Tt,sr(Kt+63>>6)));for(;Qe.l&511;)Qe.write_shift(-4,Le.ENDOFCHAIN);for(st=0;st<nt[4]<<2;++st){var Cr=De.FullPaths[st];if(!Cr||Cr.length===0){for(jt=0;jt<17;++jt)Qe.write_shift(4,0);for(jt=0;jt<3;++jt)Qe.write_shift(4,-1);for(jt=0;jt<12;++jt)Qe.write_shift(4,0);continue}Mt=De.FileIndex[st],st===0&&(Mt.start=Mt.size?Mt.start-1:me);var Dr=st===0&&Ye.root||Mt.name;if(Kt=2*(Dr.length+1),Qe.write_shift(64,Dr,"utf16le"),Qe.write_shift(2,Kt),Qe.write_shift(1,Mt.type),Qe.write_shift(1,Mt.color),Qe.write_shift(-4,Mt.L),Qe.write_shift(-4,Mt.R),Qe.write_shift(-4,Mt.C),Mt.clsid)Qe.write_shift(16,Mt.clsid,"hex");else for(jt=0;jt<4;++jt)Qe.write_shift(4,0);Qe.write_shift(4,Mt.state||0),Qe.write_shift(4,0),Qe.write_shift(4,0),Qe.write_shift(4,0),Qe.write_shift(4,0),Qe.write_shift(4,Mt.start),Qe.write_shift(4,Mt.size),Qe.write_shift(4,0)}for(st=1;st<De.FileIndex.length;++st)if(Mt=De.FileIndex[st],Mt.size>=4096)if(Qe.l=Mt.start+1<<9,Kn&&Buffer.isBuffer(Mt.content))Mt.content.copy(Qe,Qe.l,0,Mt.size),Qe.l+=Mt.size+511&-512;else{for(jt=0;jt<Mt.size;++jt)Qe.write_shift(1,Mt.content[jt]);for(;jt&511;++jt)Qe.write_shift(1,0)}for(st=1;st<De.FileIndex.length;++st)if(Mt=De.FileIndex[st],Mt.size>0&&Mt.size<4096)if(Kn&&Buffer.isBuffer(Mt.content))Mt.content.copy(Qe,Qe.l,0,Mt.size),Qe.l+=Mt.size+63&-64;else{for(jt=0;jt<Mt.size;++jt)Qe.write_shift(1,Mt.content[jt]);for(;jt&63;++jt)Qe.write_shift(1,0)}if(Kn)Qe.l=Qe.length;else for(;Qe.l<Qe.length;)Qe.write_shift(1,0);return Qe}function te(De,lt){var Ye=De.FullPaths.map(function(jt){return jt.toUpperCase()}),nt=Ye.map(function(jt){var Kt=jt.split("/");return Kt[Kt.length-(jt.slice(-1)=="/"?2:1)]}),Qe=!1;lt.charCodeAt(0)===47?(Qe=!0,lt=Ye[0].slice(0,-1)+lt):Qe=lt.indexOf("/")!==-1;var st=lt.toUpperCase(),Tt=Qe===!0?Ye.indexOf(st):nt.indexOf(st);if(Tt!==-1)return De.FileIndex[Tt];var sr=!st.match(H1);for(st=st.replace(Bu,""),sr&&(st=st.replace(H1,"!")),Tt=0;Tt<Ye.length;++Tt)if((sr?Ye[Tt].replace(H1,"!"):Ye[Tt]).replace(Bu,"")==st||(sr?nt[Tt].replace(H1,"!"):nt[Tt]).replace(Bu,"")==st)return De.FileIndex[Tt];return null}var K=64,me=-2,we="d0cf11e0a1b11ae1",Fe=[208,207,17,224,161,177,26,225],he="00000000000000000000000000000000",Le={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:me,FREESECT:-1,HEADER_SIGNATURE:we,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:he,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function $e(De,lt,Ye){g();var nt=ce(De,Ye);p.writeFileSync(lt,nt)}function Ne(De){for(var lt=new Array(De.length),Ye=0;Ye<De.length;++Ye)lt[Ye]=String.fromCharCode(De[Ye]);return lt.join("")}function Te(De,lt){var Ye=ce(De,lt);switch(lt&&lt.type||"buffer"){case"file":return g(),p.writeFileSync(lt.filename,Ye),Ye;case"binary":return typeof Ye=="string"?Ye:Ne(Ye);case"base64":return NT(typeof Ye=="string"?Ye:Ne(Ye));case"buffer":if(Kn)return Buffer.isBuffer(Ye)?Ye:P0(Ye);case"array":return typeof Ye=="string"?UA(Ye):Ye}return Ye}var Ge;function Y(De){try{var lt=De.InflateRaw,Ye=new lt;if(Ye._processChunk(new Uint8Array([3,0]),Ye._finishFlushFlag),Ye.bytesRead)Ge=De;else throw new Error("zlib does not expose bytesRead")}catch(nt){console.error("cannot use native zlib: "+(nt.message||nt))}}function Ae(De,lt){if(!Ge)return Gt(De,lt);var Ye=Ge.InflateRaw,nt=new Ye,Qe=nt._processChunk(De.slice(De.l),nt._finishFlushFlag);return De.l+=nt.bytesRead,Qe}function fe(De){return Ge?Ge.deflateRawSync(De):ye(De)}var be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ze=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function We(De){var lt=(De<<1|De<<11)&139536|(De<<5|De<<15)&558144;return(lt>>16|lt>>8|lt)&255}for(var ut=typeof Uint8Array<"u",dt=ut?new Uint8Array(256):[],zt=0;zt<256;++zt)dt[zt]=We(zt);function ve(De,lt){var Ye=dt[De&255];return lt<=8?Ye>>>8-lt:(Ye=Ye<<8|dt[De>>8&255],lt<=16?Ye>>>16-lt:(Ye=Ye<<8|dt[De>>16&255],Ye>>>24-lt))}function Ct(De,lt){var Ye=lt&7,nt=lt>>>3;return(De[nt]|(Ye<=6?0:De[nt+1]<<8))>>>Ye&3}function Pt(De,lt){var Ye=lt&7,nt=lt>>>3;return(De[nt]|(Ye<=5?0:De[nt+1]<<8))>>>Ye&7}function Ve(De,lt){var Ye=lt&7,nt=lt>>>3;return(De[nt]|(Ye<=4?0:De[nt+1]<<8))>>>Ye&15}function lr(De,lt){var Ye=lt&7,nt=lt>>>3;return(De[nt]|(Ye<=3?0:De[nt+1]<<8))>>>Ye&31}function ir(De,lt){var Ye=lt&7,nt=lt>>>3;return(De[nt]|(Ye<=1?0:De[nt+1]<<8))>>>Ye&127}function jr(De,lt,Ye){var nt=lt&7,Qe=lt>>>3,st=(1<<Ye)-1,Tt=De[Qe]>>>nt;return Ye<8-nt||(Tt|=De[Qe+1]<<8-nt,Ye<16-nt)||(Tt|=De[Qe+2]<<16-nt,Ye<24-nt)||(Tt|=De[Qe+3]<<24-nt),Tt&st}function ar(De,lt,Ye){var nt=lt&7,Qe=lt>>>3;return nt<=5?De[Qe]|=(Ye&7)<<nt:(De[Qe]|=Ye<<nt&255,De[Qe+1]=(Ye&7)>>8-nt),lt+3}function Wr(De,lt,Ye){var nt=lt&7,Qe=lt>>>3;return Ye=(Ye&1)<<nt,De[Qe]|=Ye,lt+1}function Lr(De,lt,Ye){var nt=lt&7,Qe=lt>>>3;return Ye<<=nt,De[Qe]|=Ye&255,Ye>>>=8,De[Qe+1]=Ye,lt+8}function Zr(De,lt,Ye){var nt=lt&7,Qe=lt>>>3;return Ye<<=nt,De[Qe]|=Ye&255,Ye>>>=8,De[Qe+1]=Ye&255,De[Qe+2]=Ye>>>8,lt+16}function qr(De,lt){var Ye=De.length,nt=2*Ye>lt?2*Ye:lt+5,Qe=0;if(Ye>=lt)return De;if(Kn){var st=IT(nt);if(De.copy)De.copy(st);else for(;Qe<De.length;++Qe)st[Qe]=De[Qe];return st}else if(ut){var Tt=new Uint8Array(nt);if(Tt.set)Tt.set(De);else for(;Qe<Ye;++Qe)Tt[Qe]=De[Qe];return Tt}return De.length=nt,De}function wi(De){for(var lt=new Array(De),Ye=0;Ye<De;++Ye)lt[Ye]=0;return lt}function Ci(De,lt,Ye){var nt=1,Qe=0,st=0,Tt=0,sr=0,jt=De.length,Kt=ut?new Uint16Array(32):wi(32);for(st=0;st<32;++st)Kt[st]=0;for(st=jt;st<Ye;++st)De[st]=0;jt=De.length;var Mt=ut?new Uint16Array(jt):wi(jt);for(st=0;st<jt;++st)Kt[Qe=De[st]]++,nt<Qe&&(nt=Qe),Mt[st]=0;for(Kt[0]=0,st=1;st<=nt;++st)Kt[st+16]=sr=sr+Kt[st-1]<<1;for(st=0;st<jt;++st)sr=De[st],sr!=0&&(Mt[st]=Kt[sr+16]++);var Cr=0;for(st=0;st<jt;++st)if(Cr=De[st],Cr!=0)for(sr=ve(Mt[st],nt)>>nt-Cr,Tt=(1<<nt+4-Cr)-1;Tt>=0;--Tt)lt[sr|Tt<<Cr]=Cr&15|st<<4;return nt}var $t=ut?new Uint16Array(512):wi(512),Ar=ut?new Uint16Array(32):wi(32);if(!ut){for(var yr=0;yr<512;++yr)$t[yr]=0;for(yr=0;yr<32;++yr)Ar[yr]=0}(function(){for(var De=[],lt=0;lt<32;lt++)De.push(5);Ci(De,Ar,32);var Ye=[];for(lt=0;lt<=143;lt++)Ye.push(8);for(;lt<=255;lt++)Ye.push(9);for(;lt<=279;lt++)Ye.push(7);for(;lt<=287;lt++)Ye.push(8);Ci(Ye,$t,288)})();var it=function(){for(var lt=ut?new Uint8Array(32768):[],Ye=0,nt=0;Ye<ze.length-1;++Ye)for(;nt<ze[Ye+1];++nt)lt[nt]=Ye;for(;nt<32768;++nt)lt[nt]=29;var Qe=ut?new Uint8Array(259):[];for(Ye=0,nt=0;Ye<Me.length-1;++Ye)for(;nt<Me[Ye+1];++nt)Qe[nt]=Ye;function st(sr,jt){for(var Kt=0;Kt<sr.length;){var Mt=Math.min(65535,sr.length-Kt),Cr=Kt+Mt==sr.length;for(jt.write_shift(1,+Cr),jt.write_shift(2,Mt),jt.write_shift(2,~Mt&65535);Mt-- >0;)jt[jt.l++]=sr[Kt++]}return jt.l}function Tt(sr,jt){for(var Kt=0,Mt=0,Cr=ut?new Uint16Array(32768):[];Mt<sr.length;){var Dr=Math.min(65535,sr.length-Mt);if(Dr<10){for(Kt=ar(jt,Kt,+(Mt+Dr==sr.length)),Kt&7&&(Kt+=8-(Kt&7)),jt.l=Kt/8|0,jt.write_shift(2,Dr),jt.write_shift(2,~Dr&65535);Dr-- >0;)jt[jt.l++]=sr[Mt++];Kt=jt.l*8;continue}Kt=ar(jt,Kt,+(Mt+Dr==sr.length)+2);for(var Kr=0;Dr-- >0;){var Pr=sr[Mt];Kr=(Kr<<5^Pr)&32767;var Gr=-1,yi=0;if((Gr=Cr[Kr])&&(Gr|=Mt&-32768,Gr>Mt&&(Gr-=32768),Gr<Mt))for(;sr[Gr+yi]==sr[Mt+yi]&&yi<250;)++yi;if(yi>2){Pr=Qe[yi],Pr<=22?Kt=Lr(jt,Kt,dt[Pr+1]>>1)-1:(Lr(jt,Kt,3),Kt+=5,Lr(jt,Kt,dt[Pr-23]>>5),Kt+=3);var Fi=Pr<8?0:Pr-4>>2;Fi>0&&(Zr(jt,Kt,yi-Me[Pr]),Kt+=Fi),Pr=lt[Mt-Gr],Kt=Lr(jt,Kt,dt[Pr]>>3),Kt-=3;var Ni=Pr<4?0:Pr-2>>1;Ni>0&&(Zr(jt,Kt,Mt-Gr-ze[Pr]),Kt+=Ni);for(var _i=0;_i<yi;++_i)Cr[Kr]=Mt&32767,Kr=(Kr<<5^sr[Mt])&32767,++Mt;Dr-=yi-1}else Pr<=143?Pr=Pr+48:Kt=Wr(jt,Kt,1),Kt=Lr(jt,Kt,dt[Pr]),Cr[Kr]=Mt&32767,++Mt}Kt=Lr(jt,Kt,0)-1}return jt.l=(Kt+7)/8|0,jt.l}return function(jt,Kt){return jt.length<8?st(jt,Kt):Tt(jt,Kt)}}();function ye(De){var lt=fl(50+Math.floor(De.length*1.1)),Ye=it(De,lt);return lt.slice(0,Ye)}var Ce=ut?new Uint16Array(32768):wi(32768),Re=ut?new Uint16Array(32768):wi(32768),Ze=ut?new Uint16Array(128):wi(128),ot=1,vt=1;function Rt(De,lt){var Ye=lr(De,lt)+257;lt+=5;var nt=lr(De,lt)+1;lt+=5;var Qe=Ve(De,lt)+4;lt+=4;for(var st=0,Tt=ut?new Uint8Array(19):wi(19),sr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],jt=1,Kt=ut?new Uint8Array(8):wi(8),Mt=ut?new Uint8Array(8):wi(8),Cr=Tt.length,Dr=0;Dr<Qe;++Dr)Tt[be[Dr]]=st=Pt(De,lt),jt<st&&(jt=st),Kt[st]++,lt+=3;var Kr=0;for(Kt[0]=0,Dr=1;Dr<=jt;++Dr)Mt[Dr]=Kr=Kr+Kt[Dr-1]<<1;for(Dr=0;Dr<Cr;++Dr)(Kr=Tt[Dr])!=0&&(sr[Dr]=Mt[Kr]++);var Pr=0;for(Dr=0;Dr<Cr;++Dr)if(Pr=Tt[Dr],Pr!=0){Kr=dt[sr[Dr]]>>8-Pr;for(var Gr=(1<<7-Pr)-1;Gr>=0;--Gr)Ze[Kr|Gr<<Pr]=Pr&7|Dr<<3}var yi=[];for(jt=1;yi.length<Ye+nt;)switch(Kr=Ze[ir(De,lt)],lt+=Kr&7,Kr>>>=3){case 16:for(st=3+Ct(De,lt),lt+=2,Kr=yi[yi.length-1];st-- >0;)yi.push(Kr);break;case 17:for(st=3+Pt(De,lt),lt+=3;st-- >0;)yi.push(0);break;case 18:for(st=11+ir(De,lt),lt+=7;st-- >0;)yi.push(0);break;default:yi.push(Kr),jt<Kr&&(jt=Kr);break}var Fi=yi.slice(0,Ye),Ni=yi.slice(Ye);for(Dr=Ye;Dr<286;++Dr)Fi[Dr]=0;for(Dr=nt;Dr<30;++Dr)Ni[Dr]=0;return ot=Ci(Fi,Ce,286),vt=Ci(Ni,Re,30),lt}function xt(De,lt){if(De[0]==3&&!(De[1]&3))return[Bp(lt),2];for(var Ye=0,nt=0,Qe=IT(lt||1<<18),st=0,Tt=Qe.length>>>0,sr=0,jt=0;(nt&1)==0;){if(nt=Pt(De,Ye),Ye+=3,nt>>>1)nt>>1==1?(sr=9,jt=5):(Ye=Rt(De,Ye),sr=ot,jt=vt);else{Ye&7&&(Ye+=8-(Ye&7));var Kt=De[Ye>>>3]|De[(Ye>>>3)+1]<<8;if(Ye+=32,Kt>0)for(!lt&&Tt<st+Kt&&(Qe=qr(Qe,st+Kt),Tt=Qe.length);Kt-- >0;)Qe[st++]=De[Ye>>>3],Ye+=8;continue}for(;;){!lt&&Tt<st+32767&&(Qe=qr(Qe,st+32767),Tt=Qe.length);var Mt=jr(De,Ye,sr),Cr=nt>>>1==1?$t[Mt]:Ce[Mt];if(Ye+=Cr&15,Cr>>>=4,(Cr>>>8&255)===0)Qe[st++]=Cr;else{if(Cr==256)break;Cr-=257;var Dr=Cr<8?0:Cr-4>>2;Dr>5&&(Dr=0);var Kr=st+Me[Cr];Dr>0&&(Kr+=jr(De,Ye,Dr),Ye+=Dr),Mt=jr(De,Ye,jt),Cr=nt>>>1==1?Ar[Mt]:Re[Mt],Ye+=Cr&15,Cr>>>=4;var Pr=Cr<4?0:Cr-2>>1,Gr=ze[Cr];for(Pr>0&&(Gr+=jr(De,Ye,Pr),Ye+=Pr),!lt&&Tt<Kr&&(Qe=qr(Qe,Kr+100),Tt=Qe.length);st<Kr;)Qe[st]=Qe[st-Gr],++st}}}return lt?[Qe,Ye+7>>>3]:[Qe.slice(0,st),Ye+7>>>3]}function Gt(De,lt){var Ye=De.slice(De.l||0),nt=xt(Ye,lt);return De.l+=nt[1],nt[0]}function er(De,lt){if(De)typeof console<"u"&&console.error(lt);else throw new Error(lt)}function qt(De,lt){var Ye=De;dc(Ye,0);var nt=[],Qe=[],st={FileIndex:nt,FullPaths:Qe};Z(st,{root:lt.root});for(var Tt=Ye.length-4;(Ye[Tt]!=80||Ye[Tt+1]!=75||Ye[Tt+2]!=5||Ye[Tt+3]!=6)&&Tt>=0;)--Tt;Ye.l=Tt+4,Ye.l+=4;var sr=Ye.read_shift(2);Ye.l+=6;var jt=Ye.read_shift(4);for(Ye.l=jt,Tt=0;Tt<sr;++Tt){Ye.l+=20;var Kt=Ye.read_shift(4),Mt=Ye.read_shift(4),Cr=Ye.read_shift(2),Dr=Ye.read_shift(2),Kr=Ye.read_shift(2);Ye.l+=8;var Pr=Ye.read_shift(4),Gr=s(Ye.slice(Ye.l+Cr,Ye.l+Cr+Dr));Ye.l+=Cr+Dr+Kr;var yi=Ye.l;Ye.l=Pr+4,Mr(Ye,Kt,Mt,st,Gr),Ye.l=yi}return st}function Mr(De,lt,Ye,nt,Qe){De.l+=2;var st=De.read_shift(2),Tt=De.read_shift(2),sr=c(De);if(st&8257)throw new Error("Unsupported ZIP encryption");for(var jt=De.read_shift(4),Kt=De.read_shift(4),Mt=De.read_shift(4),Cr=De.read_shift(2),Dr=De.read_shift(2),Kr="",Pr=0;Pr<Cr;++Pr)Kr+=String.fromCharCode(De[De.l++]);if(Dr){var Gr=s(De.slice(De.l,De.l+Dr));(Gr[21589]||{}).mt&&(sr=Gr[21589].mt),((Qe||{})[21589]||{}).mt&&(sr=Qe[21589].mt)}De.l+=Dr;var yi=De.slice(De.l,De.l+Kt);switch(Tt){case 8:yi=Ae(De,Mt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Tt)}var Fi=!1;st&8&&(jt=De.read_shift(4),jt==134695760&&(jt=De.read_shift(4),Fi=!0),Kt=De.read_shift(4),Mt=De.read_shift(4)),Kt!=lt&&er(Fi,"Bad compressed size: "+lt+" != "+Kt),Mt!=Ye&&er(Fi,"Bad uncompressed size: "+Ye+" != "+Mt),mi(nt,Kr,yi,{unsafe:!0,mt:sr})}function Fr(De,lt){var Ye=lt||{},nt=[],Qe=[],st=fl(1),Tt=Ye.compression?8:0,sr=0,jt=0,Kt=0,Mt=0,Cr=0,Dr=De.FullPaths[0],Kr=Dr,Pr=De.FileIndex[0],Gr=[],yi=0;for(jt=1;jt<De.FullPaths.length;++jt)if(Kr=De.FullPaths[jt].slice(Dr.length),Pr=De.FileIndex[jt],!(!Pr.size||!Pr.content||Kr=="Sh33tJ5")){var Fi=Mt,Ni=fl(Kr.length);for(Kt=0;Kt<Kr.length;++Kt)Ni.write_shift(1,Kr.charCodeAt(Kt)&127);Ni=Ni.slice(0,Ni.l),Gr[Cr]=TJ.buf(Pr.content,0);var _i=Pr.content;Tt==8&&(_i=fe(_i)),st=fl(30),st.write_shift(4,67324752),st.write_shift(2,20),st.write_shift(2,sr),st.write_shift(2,Tt),Pr.mt?a(st,Pr.mt):st.write_shift(4,0),st.write_shift(-4,Gr[Cr]),st.write_shift(4,_i.length),st.write_shift(4,Pr.content.length),st.write_shift(2,Ni.length),st.write_shift(2,0),Mt+=st.length,nt.push(st),Mt+=Ni.length,nt.push(Ni),Mt+=_i.length,nt.push(_i),st=fl(46),st.write_shift(4,33639248),st.write_shift(2,0),st.write_shift(2,20),st.write_shift(2,sr),st.write_shift(2,Tt),st.write_shift(4,0),st.write_shift(-4,Gr[Cr]),st.write_shift(4,_i.length),st.write_shift(4,Pr.content.length),st.write_shift(2,Ni.length),st.write_shift(2,0),st.write_shift(2,0),st.write_shift(2,0),st.write_shift(2,0),st.write_shift(4,0),st.write_shift(4,Fi),yi+=st.l,Qe.push(st),yi+=Ni.length,Qe.push(Ni),++Cr}return st=fl(22),st.write_shift(4,101010256),st.write_shift(2,0),st.write_shift(2,0),st.write_shift(2,Cr),st.write_shift(2,Cr),st.write_shift(4,yi),st.write_shift(4,Mt),st.write_shift(2,0),ap([ap(nt),ap(Qe),st])}var wt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ei(De,lt){if(De.ctype)return De.ctype;var Ye=De.name||"",nt=Ye.match(/\.([^\.]+)$/);return nt&&wt[nt[1]]||lt&&(nt=(Ye=lt).match(/[\.\\]([^\.\\])+$/),nt&&wt[nt[1]])?wt[nt[1]]:"application/octet-stream"}function Ji(De){for(var lt=NT(De),Ye=[],nt=0;nt<lt.length;nt+=76)Ye.push(lt.slice(nt,nt+76));return Ye.join(`\r
`)+`\r
`}function Hr(De){var lt=De.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Kt){var Mt=Kt.charCodeAt(0).toString(16).toUpperCase();return"="+(Mt.length==1?"0"+Mt:Mt)});lt=lt.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),lt.charAt(0)==`
`&&(lt="=0D"+lt.slice(1)),lt=lt.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ye=[],nt=lt.split(`\r
`),Qe=0;Qe<nt.length;++Qe){var st=nt[Qe];if(st.length==0){Ye.push("");continue}for(var Tt=0;Tt<st.length;){var sr=76,jt=st.slice(Tt,Tt+sr);jt.charAt(sr-1)=="="?sr--:jt.charAt(sr-2)=="="?sr-=2:jt.charAt(sr-3)=="="&&(sr-=3),jt=st.slice(Tt,Tt+sr),Tt+=sr,Tt<st.length&&(jt+="="),Ye.push(jt)}}return Ye.join(`\r
`)}function Ri(De){for(var lt=[],Ye=0;Ye<De.length;++Ye){for(var nt=De[Ye];Ye<=De.length&&nt.charAt(nt.length-1)=="=";)nt=nt.slice(0,nt.length-1)+De[++Ye];lt.push(nt)}for(var Qe=0;Qe<lt.length;++Qe)lt[Qe]=lt[Qe].replace(/[=][0-9A-Fa-f]{2}/g,function(st){return String.fromCharCode(parseInt(st.slice(1),16))});return UA(lt.join(`\r
`))}function In(De,lt,Ye){for(var nt="",Qe="",st="",Tt,sr=0;sr<10;++sr){var jt=lt[sr];if(!jt||jt.match(/^\s*$/))break;var Kt=jt.match(/^(.*?):\s*([^\s].*)$/);if(Kt)switch(Kt[1].toLowerCase()){case"content-location":nt=Kt[2].trim();break;case"content-type":st=Kt[2].trim();break;case"content-transfer-encoding":Qe=Kt[2].trim();break}}switch(++sr,Qe.toLowerCase()){case"base64":Tt=UA(Fh(lt.slice(sr).join("")));break;case"quoted-printable":Tt=Ri(lt.slice(sr));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Qe)}var Mt=mi(De,nt.slice(Ye.length),Tt,{unsafe:!0});st&&(Mt.ctype=st)}function Yr(De,lt){if(Ne(De.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ye=lt&&lt.root||"",nt=(Kn&&Buffer.isBuffer(De)?De.toString("binary"):Ne(De)).split(`\r
`),Qe=0,st="";for(Qe=0;Qe<nt.length;++Qe)if(st=nt[Qe],!!/^Content-Location:/i.test(st)&&(st=st.slice(st.indexOf("file")),Ye||(Ye=st.slice(0,st.lastIndexOf("/")+1)),st.slice(0,Ye.length)!=Ye))for(;Ye.length>0&&(Ye=Ye.slice(0,Ye.length-1),Ye=Ye.slice(0,Ye.lastIndexOf("/")+1),st.slice(0,Ye.length)!=Ye););var Tt=(nt[1]||"").match(/boundary="(.*?)"/);if(!Tt)throw new Error("MAD cannot find boundary");var sr="--"+(Tt[1]||""),jt=[],Kt=[],Mt={FileIndex:jt,FullPaths:Kt};Z(Mt);var Cr,Dr=0;for(Qe=0;Qe<nt.length;++Qe){var Kr=nt[Qe];Kr!==sr&&Kr!==sr+"--"||(Dr++&&In(Mt,nt.slice(Cr,Qe),Ye),Cr=Qe)}return Mt}function on(De,lt){var Ye=lt||{},nt=Ye.boundary||"SheetJS";nt="------="+nt;for(var Qe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+nt.slice(2)+'"',"","",""],st=De.FullPaths[0],Tt=st,sr=De.FileIndex[0],jt=1;jt<De.FullPaths.length;++jt)if(Tt=De.FullPaths[jt].slice(st.length),sr=De.FileIndex[jt],!(!sr.size||!sr.content||Tt=="Sh33tJ5")){Tt=Tt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(yi){return"_x"+yi.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(yi){return"_u"+yi.charCodeAt(0).toString(16)+"_"});for(var Kt=sr.content,Mt=Kn&&Buffer.isBuffer(Kt)?Kt.toString("binary"):Ne(Kt),Cr=0,Dr=Math.min(1024,Mt.length),Kr=0,Pr=0;Pr<=Dr;++Pr)(Kr=Mt.charCodeAt(Pr))>=32&&Kr<128&&++Cr;var Gr=Cr>=Dr*4/5;Qe.push(nt),Qe.push("Content-Location: "+(Ye.root||"file:///C:/SheetJS/")+Tt),Qe.push("Content-Transfer-Encoding: "+(Gr?"quoted-printable":"base64")),Qe.push("Content-Type: "+ei(sr,Tt)),Qe.push(""),Qe.push(Gr?Hr(Mt):Ji(Mt))}return Qe.push(nt+`--\r
`),Qe.join(`\r
`)}function $i(De){var lt={};return Z(lt,De),lt}function mi(De,lt,Ye,nt){var Qe=nt&&nt.unsafe;Qe||Z(De);var st=!Qe&&Xn.find(De,lt);if(!st){var Tt=De.FullPaths[0];lt.slice(0,Tt.length)==Tt?Tt=lt:(Tt.slice(-1)!="/"&&(Tt+="/"),Tt=(Tt+lt).replace("//","/")),st={name:n(lt),type:2},De.FileIndex.push(st),De.FullPaths.push(Tt),Qe||Xn.utils.cfb_gc(De)}return st.content=Ye,st.size=Ye?Ye.length:0,nt&&(nt.CLSID&&(st.clsid=nt.CLSID),nt.mt&&(st.mt=nt.mt),nt.ct&&(st.ct=nt.ct)),st}function ln(De,lt){Z(De);var Ye=Xn.find(De,lt);if(Ye){for(var nt=0;nt<De.FileIndex.length;++nt)if(De.FileIndex[nt]==Ye)return De.FileIndex.splice(nt,1),De.FullPaths.splice(nt,1),!0}return!1}function gi(De,lt,Ye){Z(De);var nt=Xn.find(De,lt);if(nt){for(var Qe=0;Qe<De.FileIndex.length;++Qe)if(De.FileIndex[Qe]==nt)return De.FileIndex[Qe].name=n(Ye),De.FullPaths[Qe]=Ye,!0}return!1}function dr(De){J(De,!0)}return t.find=te,t.read=ne,t.parse=v,t.write=Te,t.writeFile=$e,t.utils={cfb_new:$i,cfb_add:mi,cfb_del:ln,cfb_mov:gi,cfb_gc:dr,ReadShift:nv,CheckField:VI,prep_blob:dc,bconcat:ap,use_zlib:Y,_deflateRaw:ye,_inflateRaw:Gt,consts:Le},t}();function kJ(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(i){if(!i.message||!i.message.match(/onstruct/))throw i}throw new Error("Cannot access file "+e)}function Sd(e){for(var t=Object.keys(e),r=[],i=0;i<t.length;++i)Object.prototype.hasOwnProperty.call(e,t[i])&&r.push(t[i]);return r}function yC(e){for(var t=[],r=Sd(e),i=0;i!==r.length;++i)t[e[r[i]]]=r[i];return t}var J2=new Date(1899,11,30,0,0,0);function Su(e,t){var r=e.getTime(),i=J2.getTime()+(e.getTimezoneOffset()-J2.getTimezoneOffset())*6e4;return(r-i)/(1440*60*1e3)}var wI=new Date,FJ=J2.getTime()+(wI.getTimezoneOffset()-J2.getTimezoneOffset())*6e4,OT=wI.getTimezoneOffset();function O_(e){var t=new Date;return t.setTime(e*24*60*60*1e3+FJ),t.getTimezoneOffset()!==OT&&t.setTime(t.getTime()+(t.getTimezoneOffset()-OT)*6e4),t}function NJ(e){var t=0,r=0,i=!1,n=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=n.length;++a)if(n[a]){switch(r=1,a>3&&(i=!0),n[a].slice(n[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[a].slice(n[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(i)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(n[a],10)}return t}var zT=new Date("2017-02-19T19:06:09.000Z"),CI=isNaN(zT.getFullYear())?new Date("2/19/17"):zT,IJ=CI.getFullYear()==2017;function ql(e,t){var r=new Date(e);if(IJ)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(CI.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return e.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var n=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function F0(e,t){if(Kn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return G1(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return G1(uI(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return G1(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return G1(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var i=[],n=0;n!=e.length;++n)i.push(String.fromCharCode(e[n]));return i.join("")}function mc(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=mc(e[r]));return t}function to(e,t){for(var r="";r.length<t;)r+=e;return r}function QA(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,i=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(i))||(i=i.replace(/[(](.*)[)]/,function(n,a){return r=-r,a}),!isNaN(t=Number(i)))?t/r:t}var LJ=["january","february","march","april","may","june","july","august","september","october","november","december"];function ug(e){var t=new Date(e),r=new Date(NaN),i=t.getYear(),n=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var c=e.toLowerCase();if(c.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(c=c.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),c.length>3&&LJ.indexOf(c)==-1)return r}else if(c.match(/[a-z]/))return r;return i<0||i>8099?r:(n>0||a>1)&&i!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var MJ=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,i,n){if(e||typeof i=="string")return r.split(i);for(var a=r.split(i),c=[a[0]],s=1;s<a.length;++s)c.push(n),c.push(a[s]);return c}}();function BI(e){return e?e.content&&e.type?F0(e.content,!0):e.data?Q1(e.data):e.asNodeBuffer&&Kn?Q1(e.asNodeBuffer().toString("binary")):e.asBinary?Q1(e.asBinary()):e._data&&e._data.getContent?Q1(F0(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function SI(e){if(!e)return null;if(e.data)return kT(e.data);if(e.asNodeBuffer&&Kn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?kT(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function PJ(e){return e&&e.name.slice(-4)===".bin"?SI(e):BI(e)}function Yh(e,t){for(var r=e.FullPaths||Sd(e.files),i=t.toLowerCase().replace(/[\/]/g,"\\"),n=i.replace(/\\/g,"/"),a=0;a<r.length;++a){var c=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==c||n==c)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function _C(e,t){var r=Yh(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ho(e,t,r){if(!r)return PJ(_C(e,t));if(!t)return null;try{return Ho(e,t)}catch{return null}}function Th(e,t,r){if(!r)return BI(_C(e,t));if(!t)return null;try{return Th(e,t)}catch{return null}}function RJ(e,t,r){return SI(_C(e,t))}function QT(e){for(var t=e.FullPaths||Sd(e.files),r=[],i=0;i<t.length;++i)t[i].slice(-1)!="/"&&r.push(t[i].replace(/^Root Entry[\/]/,""));return r.sort()}function DJ(e,t,r){if(e.FullPaths){if(typeof r=="string"){var i;return Kn?i=P0(r):i=rJ(r),Xn.utils.cfb_add(e,t,i)}Xn.utils.cfb_add(e,t,r)}else e.file(t,r)}function EI(e,t){switch(t.type){case"base64":return Xn.read(e,{type:"base64"});case"binary":return Xn.read(e,{type:"binary"});case"buffer":case"array":return Xn.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function V1(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var i=e.split("/");i.length!==0;){var n=i.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var TI=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,jJ=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,HT=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,UJ=/<[^>]*>/g,ru=TI.match(HT)?HT:UJ,OJ=/<\w*:/,zJ=/<(\/?)\w+:/;function Yi(e,t,r){for(var i={},n=0,a=0;n!==e.length&&!((a=e.charCodeAt(n))===32||a===10||a===13);++n);if(t||(i[0]=e.slice(0,n)),n===e.length)return i;var c=e.match(jJ),s=0,p="",g=0,v="",B="",F=1;if(c)for(g=0;g!=c.length;++g){for(B=c[g],a=0;a!=B.length&&B.charCodeAt(a)!==61;++a);for(v=B.slice(0,a).trim();B.charCodeAt(a+1)==32;)++a;for(F=(n=B.charCodeAt(a+1))==34||n==39?1:0,p=B.slice(a+1+F,B.length-F),s=0;s!=v.length&&v.charCodeAt(s)!==58;++s);if(s===v.length)v.indexOf("_")>0&&(v=v.slice(0,v.indexOf("_"))),i[v]=p,i[v.toLowerCase()]=p;else{var C=(s===5&&v.slice(0,5)==="xmlns"?"xmlns":"")+v.slice(s+1);if(i[C]&&v.slice(s-3,s)=="ext")continue;i[C]=p,i[C.toLowerCase()]=p}}return i}function Fd(e){return e.replace(zJ,"<$1")}var kI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},QJ=yC(kI),ts=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(i){var n=i+"",a=n.indexOf("<![CDATA[");if(a==-1)return n.replace(e,function(s,p){return kI[s]||String.fromCharCode(parseInt(p,s.indexOf("x")>-1?16:10))||s}).replace(t,function(s,p){return String.fromCharCode(parseInt(p,16))});var c=n.indexOf("]]>");return r(n.slice(0,a))+n.slice(a+9,c)+r(n.slice(c+3))}}(),HJ=/[&<>'"]/g,VJ=/[\u0000-\u001f]/g;function bC(e){var t=e+"";return t.replace(HJ,function(r){return QJ[r]}).replace(/\n/g,"<br/>").replace(VJ,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var VT=function(){var e=/&#(\d+);/g;function t(r,i){return String.fromCharCode(parseInt(i,10))}return function(i){return i.replace(e,t)}}();function Na(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Iw(e){for(var t="",r=0,i=0,n=0,a=0,c=0,s=0;r<e.length;){if(i=e.charCodeAt(r++),i<128){t+=String.fromCharCode(i);continue}if(n=e.charCodeAt(r++),i>191&&i<224){c=(i&31)<<6,c|=n&63,t+=String.fromCharCode(c);continue}if(a=e.charCodeAt(r++),i<240){t+=String.fromCharCode((i&15)<<12|(n&63)<<6|a&63);continue}c=e.charCodeAt(r++),s=((i&7)<<18|(n&63)<<12|(a&63)<<6|c&63)-65536,t+=String.fromCharCode(55296+(s>>>10&1023)),t+=String.fromCharCode(56320+(s&1023))}return t}function GT(e){var t=Bp(2*e.length),r,i,n=1,a=0,c=0,s;for(i=0;i<e.length;i+=n)n=1,(s=e.charCodeAt(i))<128?r=s:s<224?(r=(s&31)*64+(e.charCodeAt(i+1)&63),n=2):s<240?(r=(s&15)*4096+(e.charCodeAt(i+1)&63)*64+(e.charCodeAt(i+2)&63),n=3):(n=4,r=(s&7)*262144+(e.charCodeAt(i+1)&63)*4096+(e.charCodeAt(i+2)&63)*64+(e.charCodeAt(i+3)&63),r-=65536,c=55296+(r>>>10&1023),r=56320+(r&1023)),c!==0&&(t[a++]=c&255,t[a++]=c>>>8,c=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function qT(e){return P0(e,"binary").toString("utf8")}var Hy="foo bar baz",ha=Kn&&(qT(Hy)==Iw(Hy)&&qT||GT(Hy)==Iw(Hy)&&GT)||Iw,G1=Kn?function(e){return P0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,i=0,n=0;r<e.length;)switch(i=e.charCodeAt(r++),!0){case i<128:t.push(String.fromCharCode(i));break;case i<2048:t.push(String.fromCharCode(192+(i>>6))),t.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,n=e.charCodeAt(r++)-56320+(i<<10),t.push(String.fromCharCode(240+(n>>18&7))),t.push(String.fromCharCode(144+(n>>12&63))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)));break;default:t.push(String.fromCharCode(224+(i>>12))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(i&63)))}return t.join("")},Nv=function(){var e={};return function(r,i){var n=r+"|"+(i||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",i||"")}}(),FI=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<e.length;++n)i=i.replace(e[n][0],e[n][1]);return i}}(),GJ=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),qJ=/<\/?(?:vt:)?variant>/g,KJ=/<(?:vt:)([^>]*)>([\s\S]*)</;function KT(e,t){var r=Yi(e),i=e.match(GJ(r.baseType))||[],n=[];if(i.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+i.length+" != "+r.size);return n}return i.forEach(function(a){var c=a.replace(qJ,"").match(KJ);c&&n.push({v:ha(c[2]),t:c[1]})}),n}var WJ=/(^\s|\s$|\n)/;function $J(e){return Sd(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function XJ(e,t,r){return"<"+e+(r!=null?$J(r):"")+(t!=null?(t.match(WJ)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function wC(e){if(Kn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ha(R0(gC(e)));throw new Error("Bad input format: expected Buffer or string")}var Iv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ZJ={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},YJ=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function JJ(e,t){for(var r=1-2*(e[t+7]>>>7),i=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),n=e[t+6]&15,a=5;a>=0;--a)n=n*256+e[t+a];return i==2047?n==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,n+=Math.pow(2,52)),r*Math.pow(2,i-52)*n)}function eee(e,t,r){var i=(t<0||1/t==-1/0?1:0)<<7,n=0,a=0,c=i?-t:t;isFinite(c)?c==0?n=a=0:(n=Math.floor(Math.log(c)/Math.LN2),a=c*Math.pow(2,52-n),n<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?n=-1022:(a-=Math.pow(2,52),n+=1023)):(n=2047,a=isNaN(t)?26985:0);for(var s=0;s<=5;++s,a/=256)e[r+s]=a&255;e[r+6]=(n&15)<<4|a&15,e[r+7]=n>>4|i}var WT=function(e){for(var t=[],r=10240,i=0;i<e[0].length;++i)if(e[0][i])for(var n=0,a=e[0][i].length;n<a;n+=r)t.push.apply(t,e[0][i].slice(n,n+r));return t},$T=Kn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:P0(t)})):WT(e)}:WT,XT=function(e,t,r){for(var i=[],n=t;n<r;n+=2)i.push(String.fromCharCode(df(e,n)));return i.join("").replace(Bu,"")},CC=Kn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Bu,""):XT(e,t,r)}:XT,ZT=function(e,t,r){for(var i=[],n=t;n<t+r;++n)i.push(("0"+e[n].toString(16)).slice(-2));return i.join("")},NI=Kn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):ZT(e,t,r)}:ZT,YT=function(e,t,r){for(var i=[],n=t;n<r;n++)i.push(String.fromCharCode(Qm(e,n)));return i.join("")},Zv=Kn?function(t,r,i){return Buffer.isBuffer(t)?t.toString("utf8",r,i):YT(t,r,i)}:YT,II=function(e,t){var r=Eh(e,t);return r>0?Zv(e,t+4,t+4+r-1):""},LI=II,MI=function(e,t){var r=Eh(e,t);return r>0?Zv(e,t+4,t+4+r-1):""},PI=MI,RI=function(e,t){var r=2*Eh(e,t);return r>0?Zv(e,t+4,t+4+r-1):""},DI=RI,jI=function(t,r){var i=Eh(t,r);return i>0?CC(t,r+4,r+4+i):""},UI=jI,OI=function(e,t){var r=Eh(e,t);return r>0?Zv(e,t+4,t+4+r):""},zI=OI,QI=function(e,t){return JJ(e,t)},e_=QI,HI=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Kn&&(LI=function(t,r){if(!Buffer.isBuffer(t))return II(t,r);var i=t.readUInt32LE(r);return i>0?t.toString("utf8",r+4,r+4+i-1):""},PI=function(t,r){if(!Buffer.isBuffer(t))return MI(t,r);var i=t.readUInt32LE(r);return i>0?t.toString("utf8",r+4,r+4+i-1):""},DI=function(t,r){if(!Buffer.isBuffer(t))return RI(t,r);var i=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+i-1)},UI=function(t,r){if(!Buffer.isBuffer(t))return jI(t,r);var i=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+i)},zI=function(t,r){if(!Buffer.isBuffer(t))return OI(t,r);var i=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+i)},e_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):QI(t,r)},HI=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Qm=function(e,t){return e[t]},df=function(e,t){return e[t+1]*256+e[t]},tee=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Eh=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},l0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},ree=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function nv(e,t){var r="",i,n,a=[],c,s,p,g;switch(t){case"dbcs":if(g=this.l,Kn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(p=0;p<e;++p)r+=String.fromCharCode(df(this,g)),g+=2;e*=2;break;case"utf8":r=Zv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=CC(this,this.l,this.l+e);break;case"wstr":return nv.call(this,e,"dbcs");case"lpstr-ansi":r=LI(this,this.l),e=4+Eh(this,this.l);break;case"lpstr-cp":r=PI(this,this.l),e=4+Eh(this,this.l);break;case"lpwstr":r=DI(this,this.l),e=4+2*Eh(this,this.l);break;case"lpp4":e=4+Eh(this,this.l),r=UI(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Eh(this,this.l),r=zI(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(c=Qm(this,this.l+e++))!==0;)a.push(Qy(c));r=a.join("");break;case"_wstr":for(e=0,r="";(c=df(this,this.l+e))!==0;)a.push(Qy(c)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",g=this.l,p=0;p<e;++p){if(this.lens&&this.lens.indexOf(g)!==-1)return c=Qm(this,g),this.l=g+1,s=nv.call(this,e-p,c?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(Qy(df(this,g))),g+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",g=this.l,p=0;p!=e;++p){if(this.lens&&this.lens.indexOf(g)!==-1)return c=Qm(this,g),this.l=g+1,s=nv.call(this,e-p,c?"dbcs-cont":"sbcs-cont"),a.join("")+s;a.push(Qy(Qm(this,g))),g+=1}r=a.join("");break;default:switch(e){case 1:return i=Qm(this,this.l),this.l++,i;case 2:return i=(t==="i"?tee:df)(this,this.l),this.l+=2,i;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(i=(e>0?l0:ree)(this,this.l),this.l+=4,i):(n=Eh(this,this.l),this.l+=4,n);case 8:case-8:if(t==="f")return e==8?n=e_(this,this.l):n=e_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:r=NI(this,this.l,e);break}}return this.l+=e,r}var iee=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},nee=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},see=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function aee(e,t,r){var i=0,n=0;if(r==="dbcs"){for(n=0;n!=t.length;++n)see(this,t.charCodeAt(n),this.l+2*n);i=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=t.length;++n)this[this.l+n]=t.charCodeAt(n)&255;i=t.length}else if(r==="hex"){for(;n<e;++n)this[this.l++]=parseInt(t.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(n=0;n<Math.min(t.length,e);++n){var c=t.charCodeAt(n);this[this.l++]=c&255,this[this.l++]=c>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:i=1,this[this.l]=t&255;break;case 2:i=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:i=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:i=4,iee(this,t,this.l);break;case 8:if(i=8,r==="f"){eee(this,t,this.l);break}case 16:break;case-4:i=4,nee(this,t,this.l);break}return this.l+=i,this}function VI(e,t){var r=NI(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function dc(e,t){e.l=t,e.read_shift=nv,e.chk=VI,e.write_shift=aee}function tu(e,t){e.l+=t}function fl(e){var t=Bp(e);return dc(t,0),t}function Bf(e,t,r){if(e){var i,n,a;dc(e,e.l||0);for(var c=e.length,s=0,p=0;e.l<c;){s=e.read_shift(1),s&128&&(s=(s&127)+((e.read_shift(1)&127)<<7));var g=a_[s]||a_[65535];for(i=e.read_shift(1),a=i&127,n=1;n<4&&i&128;++n)a+=((i=e.read_shift(1))&127)<<7*n;p=e.l+a;var v=g.f&&g.f(e,a,r);if(e.l=p,t(v,g,s))return}}}function t4(){var e=[],t=Kn?256:2048,r=function(g){var v=fl(g);return dc(v,0),v},i=r(t),n=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&e.push(i),i=null)},a=function(g){return i&&g<i.length-i.l?i:(n(),i=r(Math.max(g+1,t)))},c=function(){return n(),ap(e)},s=function(g){n(),i=g,i.l==null&&(i.l=i.length),a(t)};return{next:a,push:s,end:c,_bufs:e}}function sv(e,t,r){var i=mc(e);if(t.s?(i.cRel&&(i.c+=t.s.c),i.rRel&&(i.r+=t.s.r)):(i.cRel&&(i.c+=t.c),i.rRel&&(i.r+=t.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function JT(e,t,r){var i=mc(e);return i.s=sv(i.s,t.s,r),i.e=sv(i.e,t.s,r),i}function av(e,t){if(e.cRel&&e.c<0)for(e=mc(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=mc(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=an(e);return!e.cRel&&e.cRel!=null&&(r=cee(r)),!e.rRel&&e.rRel!=null&&(r=oee(r)),r}function Lw(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+gl(e.s.c)+":"+(e.e.cRel?"":"$")+gl(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+gc(e.s.r)+":"+(e.e.rRel?"":"$")+gc(e.e.r):av(e.s,t.biff)+":"+av(e.e,t.biff)}function BC(e){return parseInt(lee(e),10)-1}function gc(e){return""+(e+1)}function oee(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function lee(e){return e.replace(/\$(\d+)$/,"$1")}function SC(e){for(var t=uee(e),r=0,i=0;i!==t.length;++i)r=26*r+t.charCodeAt(i)-64;return r-1}function gl(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function cee(e){return e.replace(/^([A-Z])/,"$$$1")}function uee(e){return e.replace(/^\$([A-Z])/,"$1")}function hee(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Cu(e){for(var t=0,r=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);n>=48&&n<=57?t=10*t+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:t-1}}function an(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Cg(e){var t=e.indexOf(":");return t==-1?{s:Cu(e),e:Cu(e)}:{s:Cu(e.slice(0,t)),e:Cu(e.slice(t+1))}}function Zn(e,t){return typeof t>"u"||typeof t=="number"?Zn(e.s,e.e):(typeof e!="string"&&(e=an(e)),typeof t!="string"&&(t=an(t)),e==t?e:e+":"+t)}function ro(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,n=0,a=e.length;for(r=0;i<a&&!((n=e.charCodeAt(i)-64)<1||n>26);++i)r=26*r+n;for(t.s.c=--r,r=0;i<a&&!((n=e.charCodeAt(i)-48)<0||n>9);++i)r=10*r+n;if(t.s.r=--r,i===a||n!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++i,r=0;i!=a&&!((n=e.charCodeAt(i)-64)<1||n>26);++i)r=26*r+n;for(t.e.c=--r,r=0;i!=a&&!((n=e.charCodeAt(i)-48)<0||n>9);++i)r=10*r+n;return t.e.r=--r,t}function ek(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=oA(e.z,r?Su(t):t)}catch{}try{return e.w=oA((e.XF||{}).numFmtId||(r?14:0),r?Su(t):t)}catch{return""+t}}function wf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?U0[e.v]||e.v:t==null?ek(e,e.v):ek(e,t))}function kp(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",i={};return i[r]=e,{SheetNames:[r],Sheets:i}}function GI(e,t,r){var i=r||{},n=e?Array.isArray(e):i.dense,a=e||(n?[]:{}),c=0,s=0;if(a&&i.origin!=null){if(typeof i.origin=="number")c=i.origin;else{var p=typeof i.origin=="string"?Cu(i.origin):i.origin;c=p.r,s=p.c}a["!ref"]||(a["!ref"]="A1:A1")}var g={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var v=ro(a["!ref"]);g.s.c=v.s.c,g.s.r=v.s.r,g.e.c=Math.max(g.e.c,v.e.c),g.e.r=Math.max(g.e.r,v.e.r),c==-1&&(g.e.r=c=v.e.r+1)}for(var B=0;B!=t.length;++B)if(t[B]){if(!Array.isArray(t[B]))throw new Error("aoa_to_sheet expects an array of arrays");for(var F=0;F!=t[B].length;++F)if(!(typeof t[B][F]>"u")){var C={v:t[B][F]},L=c+B,P=s+F;if(g.s.r>L&&(g.s.r=L),g.s.c>P&&(g.s.c=P),g.e.r<L&&(g.e.r=L),g.e.c<P&&(g.e.c=P),t[B][F]&&typeof t[B][F]=="object"&&!Array.isArray(t[B][F])&&!(t[B][F]instanceof Date))C=t[B][F];else if(Array.isArray(C.v)&&(C.f=t[B][F][1],C.v=C.v[0]),C.v===null)if(C.f)C.t="n";else if(i.nullError)C.t="e",C.v=0;else if(i.sheetStubs)C.t="z";else continue;else typeof C.v=="number"?C.t="n":typeof C.v=="boolean"?C.t="b":C.v instanceof Date?(C.z=i.dateNF||dn[14],i.cellDates?(C.t="d",C.w=oA(C.z,Su(C.v))):(C.t="n",C.v=Su(C.v),C.w=oA(C.z,C.v))):C.t="s";if(n)a[L]||(a[L]=[]),a[L][P]&&a[L][P].z&&(C.z=a[L][P].z),a[L][P]=C;else{var D=an({c:P,r:L});a[D]&&a[D].z&&(C.z=a[D].z),a[D]=C}}}return g.s.c<1e7&&(a["!ref"]=Zn(g)),a}function Bg(e,t){return GI(null,e,t)}function Aee(e){return e.read_shift(4,"i")}function Jc(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function dee(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function EC(e,t){var r=e.l,i=e.read_shift(1),n=Jc(e),a=[],c={t:n,h:n};if((i&1)!==0){for(var s=e.read_shift(4),p=0;p!=s;++p)a.push(dee(e));c.r=a}else c.r=[{ich:0,ifnt:0}];return e.l=r+t,c}var fee=EC;function lA(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function D0(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var pee=Jc;function TC(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}var mee=Jc,r4=TC;function kC(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,i=t[0]&2;e.l+=4;var n=i===0?e_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):l0(t,0)>>2;return r?n/100:n}function qI(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var j0=qI;function $c(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function gee(e){var t={},r=e.read_shift(1),i=r>>>1,n=e.read_shift(1),a=e.read_shift(2,"i"),c=e.read_shift(1),s=e.read_shift(1),p=e.read_shift(1);switch(e.l++,i){case 0:t.auto=1;break;case 1:t.index=n;var g=b0[n];g&&(t.rgb=Mv(g));break;case 2:t.rgb=Mv([c,s,p]);break;case 3:t.theme=n;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function vee(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function KI(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},i=e.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function xee(e){return KI(e,1)}function yee(e){return KI(e,2)}var FC=2,eh=3,Vy=11,tk=12,t_=19,Gy=64,_ee=65,bee=71,wee=4108,Cee=4126,Vl=80,WI=81,Bee=[Vl,WI],See={1:{n:"CodePage",t:FC},2:{n:"Category",t:Vl},3:{n:"PresentationFormat",t:Vl},4:{n:"ByteCount",t:eh},5:{n:"LineCount",t:eh},6:{n:"ParagraphCount",t:eh},7:{n:"SlideCount",t:eh},8:{n:"NoteCount",t:eh},9:{n:"HiddenCount",t:eh},10:{n:"MultimediaClipCount",t:eh},11:{n:"ScaleCrop",t:Vy},12:{n:"HeadingPairs",t:wee},13:{n:"TitlesOfParts",t:Cee},14:{n:"Manager",t:Vl},15:{n:"Company",t:Vl},16:{n:"LinksUpToDate",t:Vy},17:{n:"CharacterCount",t:eh},19:{n:"SharedDoc",t:Vy},22:{n:"HyperlinksChanged",t:Vy},23:{n:"AppVersion",t:eh,p:"version"},24:{n:"DigSig",t:_ee},26:{n:"ContentType",t:Vl},27:{n:"ContentStatus",t:Vl},28:{n:"Language",t:Vl},29:{n:"Version",t:Vl},255:{},2147483648:{n:"Locale",t:t_},2147483651:{n:"Behavior",t:t_},1919054434:{}},Eee={1:{n:"CodePage",t:FC},2:{n:"Title",t:Vl},3:{n:"Subject",t:Vl},4:{n:"Author",t:Vl},5:{n:"Keywords",t:Vl},6:{n:"Comments",t:Vl},7:{n:"Template",t:Vl},8:{n:"LastAuthor",t:Vl},9:{n:"RevNumber",t:Vl},10:{n:"EditTime",t:Gy},11:{n:"LastPrinted",t:Gy},12:{n:"CreatedDate",t:Gy},13:{n:"ModifiedDate",t:Gy},14:{n:"PageCount",t:eh},15:{n:"WordCount",t:eh},16:{n:"CharCount",t:eh},17:{n:"Thumbnail",t:bee},18:{n:"Application",t:Vl},19:{n:"DocSecurity",t:eh},255:{},2147483648:{n:"Locale",t:t_},2147483651:{n:"Behavior",t:t_},1919054434:{}},rk={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Tee=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function kee(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Fee=kee([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),b0=mc(Fee),U0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},$I={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ik={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function Nee(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Iee(e){var t=Nee();if(!e||!e.match)return t;var r={};if((e.match(ru)||[]).forEach(function(i){var n=Yi(i);switch(n[0].replace(OJ,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":t[ik[n.ContentType]]!==void 0&&t[ik[n.ContentType]].push(n.PartName);break}}),t.xmlns!==ZJ.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}var Gm={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function i4(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ov(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var i={};return(e.match(ru)||[]).forEach(function(n){var a=Yi(n);if(a[0]==="<Relationship"){var c={};c.Type=a.Type,c.Target=a.Target,c.Id=a.Id,a.TargetMode&&(c.TargetMode=a.TargetMode);var s=a.TargetMode==="External"?a.Target:V1(a.Target,t);r[s]=c,i[a.Id]=c}}),r["!id"]=i,r}var Lee="application/vnd.oasis.opendocument.spreadsheet";function Mee(e,t){for(var r=wC(e),i,n;i=Iv.exec(r);)switch(i[3]){case"manifest":break;case"file-entry":if(n=Yi(i[0],!1),n.path=="/"&&n.type!==Lee)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw i}}var lv=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Pee=function(){for(var e=new Array(lv.length),t=0;t<lv.length;++t){var r=lv[t],i="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return e}();function XI(e){var t={};e=ha(e);for(var r=0;r<lv.length;++r){var i=lv[r],n=e.match(Pee[r]);n!=null&&n.length>0&&(t[i[1]]=ts(n[1])),i[2]==="date"&&t[i[1]]&&(t[i[1]]=ql(t[i[1]]))}return t}var Ree=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function ZI(e,t,r,i){var n=[];if(typeof e=="string")n=KT(e,i);else for(var a=0;a<e.length;++a)n=n.concat(e[a].map(function(v){return{v}}));var c=typeof t=="string"?KT(t,i).map(function(v){return v.v}):t,s=0,p=0;if(c.length>0)for(var g=0;g!==n.length;g+=2){switch(p=+n[g+1].v,n[g].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=p,r.SheetNames=c.slice(s,s+p);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=p,r.DefinedNames=c.slice(s,s+p);break;case"Charts":case"Diagramme":r.Chartsheets=p,r.ChartNames=c.slice(s,s+p);break}s+=p}}function Dee(e,t,r){var i={};return t||(t={}),e=ha(e),Ree.forEach(function(n){var a=(e.match(Nv(n[0]))||[])[1];switch(n[2]){case"string":a&&(t[n[1]]=ts(a));break;case"bool":t[n[1]]=a==="true";break;case"raw":var c=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));c&&c.length>0&&(i[n[1]]=c[1]);break}}),i.HeadingPairs&&i.TitlesOfParts&&ZI(i.HeadingPairs,i.TitlesOfParts,t,r),t}var jee=/<[^>]+>[^<]*/g;function Uee(e,t){var r={},i="",n=e.match(jee);if(n)for(var a=0;a!=n.length;++a){var c=n[a],s=Yi(c);switch(s[0]){case"<?xml":break;case"<Properties":break;case"<property":i=ts(s.name);break;case"</property>":i=null;break;default:if(c.indexOf("<vt:")===0){var p=c.split(">"),g=p[0].slice(4),v=p[1];switch(g){case"lpstr":case"bstr":case"lpwstr":r[i]=ts(v);break;case"bool":r[i]=Na(v);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[i]=parseInt(v,10);break;case"r4":case"r8":case"decimal":r[i]=parseFloat(v);break;case"filetime":case"date":r[i]=ql(v);break;case"cy":case"error":r[i]=ts(v);break;default:if(g.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",c,g,p)}}else if(c.slice(0,2)!=="</"){if(t.WTF)throw new Error(c)}}}return r}var Oee={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Mw;function zee(e,t,r){Mw||(Mw=yC(Oee)),t=Mw[t]||t,e[t]=r}function NC(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function YI(e,t,r){var i=e.l,n=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-i&3;)++e.l;return n}function JI(e,t,r){var i=e.read_shift(0,"lpwstr");return i}function eL(e,t,r){return t===31?JI(e):YI(e,t,r)}function n4(e,t,r){return eL(e,t,r===!1?0:4)}function Qee(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return eL(e,t,0)}function Hee(e){for(var t=e.read_shift(4),r=[],i=0;i!=t;++i){var n=e.l;r[i]=e.read_shift(0,"lpwstr").replace(Bu,""),e.l-n&2&&(e.l+=2)}return r}function Vee(e){for(var t=e.read_shift(4),r=[],i=0;i!=t;++i)r[i]=e.read_shift(0,"lpstr-cp").replace(Bu,"");return r}function Gee(e){var t=e.l,r=r_(e,WI);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var i=r_(e,eh);return[r,i]}function qee(e){for(var t=e.read_shift(4),r=[],i=0;i<t/2;++i)r.push(Gee(e));return r}function nk(e,t){for(var r=e.read_shift(4),i={},n=0;n!=r;++n){var a=e.read_shift(4),c=e.read_shift(4);i[a]=e.read_shift(c,t===1200?"utf16le":"utf8").replace(Bu,"").replace(H1,"!"),t===1200&&c%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),i}function tL(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Kee(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function r_(e,t,r){var i=e.read_shift(2),n,a=r||{};if(e.l+=2,t!==tk&&i!==t&&Bee.indexOf(t)===-1&&!((t&65534)==4126&&(i&65534)==4126))throw new Error("Expected type "+t+" saw "+i);switch(t===tk?i:t){case 2:return n=e.read_shift(2,"i"),a.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i"),n;case 11:return e.read_shift(4)!==0;case 19:return n=e.read_shift(4),n;case 30:return YI(e,i,4).replace(Bu,"");case 31:return JI(e);case 64:return NC(e);case 65:return tL(e);case 71:return Kee(e);case 80:return n4(e,i,!a.raw).replace(Bu,"");case 81:return Qee(e,i).replace(Bu,"");case 4108:return qee(e);case 4126:case 4127:return i==4127?Hee(e):Vee(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+i)}}function sk(e,t){var r=e.l,i=e.read_shift(4),n=e.read_shift(4),a=[],c=0,s=0,p=-1,g={};for(c=0;c!=n;++c){var v=e.read_shift(4),B=e.read_shift(4);a[c]=[v,B+r]}a.sort(function(q,H){return q[1]-H[1]});var F={};for(c=0;c!=n;++c){if(e.l!==a[c][1]){var C=!0;if(c>0&&t)switch(t[a[c-1][0]].t){case 2:e.l+2===a[c][1]&&(e.l+=2,C=!1);break;case 80:e.l<=a[c][1]&&(e.l=a[c][1],C=!1);break;case 4108:e.l<=a[c][1]&&(e.l=a[c][1],C=!1);break}if((!t||c==0)&&e.l<=a[c][1]&&(C=!1,e.l=a[c][1]),C)throw new Error("Read Error: Expected address "+a[c][1]+" at "+e.l+" :"+c)}if(t){var L=t[a[c][0]];if(F[L.n]=r_(e,L.t,{raw:!0}),L.p==="version"&&(F[L.n]=String(F[L.n]>>16)+"."+("0000"+String(F[L.n]&65535)).slice(-4)),L.n=="CodePage")switch(F[L.n]){case 0:F[L.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:OA(s=F[L.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+F[L.n])}}else if(a[c][0]===1){if(s=F.CodePage=r_(e,FC),OA(s),p!==-1){var P=e.l;e.l=a[p][1],g=nk(e,s),e.l=P}}else if(a[c][0]===0){if(s===0){p=c,e.l=a[c+1][1];continue}g=nk(e,s)}else{var D=g[a[c][0]],j;switch(e[e.l]){case 65:e.l+=4,j=tL(e);break;case 30:e.l+=4,j=n4(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,j=n4(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,j=e.read_shift(4,"i");break;case 19:e.l+=4,j=e.read_shift(4);break;case 5:e.l+=4,j=e.read_shift(8,"f");break;case 11:e.l+=4,j=_o(e,4);break;case 64:e.l+=4,j=ql(NC(e));break;default:throw new Error("unparsed value: "+e[e.l])}F[D]=j}}return e.l=r+i,F}function ak(e,t,r){var i=e.content;if(!i)return{};dc(i,0);var n,a,c,s,p=0;i.chk("feff","Byte Order: "),i.read_shift(2);var g=i.read_shift(4),v=i.read_shift(16);if(v!==Xn.utils.consts.HEADER_CLSID&&v!==r)throw new Error("Bad PropertySet CLSID "+v);if(n=i.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(a=i.read_shift(16),s=i.read_shift(4),n===1&&s!==i.l)throw new Error("Length mismatch: "+s+" !== "+i.l);n===2&&(c=i.read_shift(16),p=i.read_shift(4));var B=sk(i,t),F={SystemIdentifier:g};for(var C in B)F[C]=B[C];if(F.FMTID=a,n===1)return F;if(p-i.l==2&&(i.l+=2),i.l!==p)throw new Error("Length mismatch 2: "+i.l+" !== "+p);var L;try{L=sk(i,null)}catch{}for(C in L)F[C]=L[C];return F.FMTID=[a,c],F}function tp(e,t){return e.read_shift(t),null}function Wee(e,t,r){for(var i=[],n=e.l+t;e.l<n;)i.push(r(e,n-e.l));if(n!==e.l)throw new Error("Slurp error");return i}function _o(e,t){return e.read_shift(t)===1}function Vo(e){return e.read_shift(2,"u")}function rL(e,t){return Wee(e,t,Vo)}function $ee(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Yv(e,t,r){var i=e.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var c=i?e.read_shift(i,n):"";return c}function Xee(e){var t=e.read_shift(2),r=e.read_shift(1),i=r&4,n=r&8,a=1+(r&1),c=0,s,p={};n&&(c=e.read_shift(2)),i&&(s=e.read_shift(4));var g=a==2?"dbcs-cont":"sbcs-cont",v=t===0?"":e.read_shift(t,g);return n&&(e.l+=4*c),i&&(e.l+=s),p.t=v,n||(p.raw="<t>"+p.t+"</t>",p.r=p.t),p}function N0(e,t,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var n=e.read_shift(1);return n===0?i=e.read_shift(t,"sbcs-cont"):i=e.read_shift(t,"dbcs-cont"),i}function Jv(e,t,r){var i=e.read_shift(r&&r.biff==2?1:2);return i===0?(e.l++,""):N0(e,i,r)}function O0(e,t,r){if(r.biff>5)return Jv(e,t,r);var i=e.read_shift(1);return i===0?(e.l++,""):e.read_shift(i,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Zee(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Yee(e){var t=e.read_shift(4),r=e.l,i=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(i=!0),e.l=r);var n=e.read_shift((i?t-24:t)>>1,"utf16le").replace(Bu,"");return i&&(e.l+=24),n}function Jee(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var i=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=e.read_shift(4);if(n===0)return r+i.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var c=e.read_shift(a>>1,"utf16le").replace(Bu,"");return r+c}function ete(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Yee(e);case"0303000000000000c000000000000046":return Jee(e);default:throw new Error("Unsupported Moniker "+r)}}function qy(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Bu,""):"";return r}function tte(e,t){var r=e.l+t,i=e.read_shift(4);if(i!==2)throw new Error("Unrecognized streamVersion: "+i);var n=e.read_shift(2);e.l+=2;var a,c,s,p,g="",v,B;n&16&&(a=qy(e,r-e.l)),n&128&&(c=qy(e,r-e.l)),(n&257)===257&&(s=qy(e,r-e.l)),(n&257)===1&&(p=ete(e,r-e.l)),n&8&&(g=qy(e,r-e.l)),n&32&&(v=e.read_shift(16)),n&64&&(B=NC(e)),e.l=r;var F=c||s||p||"";F&&g&&(F+="#"+g),F||(F="#"+g),n&2&&F.charAt(0)=="/"&&F.charAt(1)!="/"&&(F="file://"+F);var C={Target:F};return v&&(C.guid=v),B&&(C.time=B),a&&(C.Tooltip=a),C}function iL(e){var t=e.read_shift(1),r=e.read_shift(1),i=e.read_shift(1),n=e.read_shift(1);return[t,r,i,n]}function nL(e,t){var r=iL(e);return r[3]=0,r}function Nd(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return{r:t,c:r,ixfe:i}}function rte(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function ite(e,t,r){return t===0?"":O0(e,t,r)}function nte(e,t,r){var i=r.biff>8?4:2,n=e.read_shift(i),a=e.read_shift(i,"i"),c=e.read_shift(i,"i");return[n,a,c]}function sL(e){var t=e.read_shift(2),r=kC(e);return[t,r]}function ste(e,t,r){e.l+=4,t-=4;var i=e.l+t,n=Yv(e,t,r),a=e.read_shift(2);if(i-=e.l,a!==i)throw new Error("Malformed AddinUdf: padding = "+i+" != "+a);return e.l+=a,n}function z_(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(2);return{s:{c:i,r:t},e:{c:n,r}}}function aL(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(1),n=e.read_shift(1);return{s:{c:i,r:t},e:{c:n,r}}}var ate=aL;function oL(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2);return e.l+=12,[r,t,i]}function ote(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function lte(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Hc(e){e.l+=2,e.l+=e.read_shift(2)}var cte={0:Hc,4:Hc,5:Hc,6:Hc,7:lte,8:Hc,9:Hc,10:Hc,11:Hc,12:Hc,13:ote,14:Hc,15:Hc,16:Hc,17:Hc,18:Hc,19:Hc,20:Hc,21:oL};function ute(e,t){for(var r=e.l+t,i=[];e.l<r;){var n=e.read_shift(2);e.l-=2;try{i.push(cte[n](e,r-e.l))}catch{return e.l=r,i}}return e.l!=r&&(e.l=r),i}function Ky(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function hte(e,t){return t===0||e.read_shift(2),1200}function Ate(e,t,r){if(r.enc)return e.l+=t,"";var i=e.l,n=O0(e,0,r);return e.read_shift(t+i-e.l),n}function dte(e,t,r){var i=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:i&16,fBelow:i&64,fRight:i&128}}function fte(e,t,r){var i=e.read_shift(4),n=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var c=Yv(e,0,r);return c.length===0&&(c="Sheet1"),{pos:i,hs:n,dt:a,name:c}}function pte(e,t){for(var r=e.l+t,i=e.read_shift(4),n=e.read_shift(4),a=[],c=0;c!=n&&e.l<r;++c)a.push(Xee(e));return a.Count=i,a.Unique=n,a}function mte(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function gte(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var i=e.read_shift(1);return e.l+=3,i&7&&(t.level=i&7),i&32&&(t.hidden=!0),i&64&&(t.hpt=r/20),t}function vte(e){var t=rte(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function xte(e){return e.read_shift(2),e.read_shift(4)}function ok(e,t,r){var i=0;r&&r.biff==2||(i=e.read_shift(2));var n=e.read_shift(2);r&&r.biff==2&&(i=1-(n>>15),n&=32767);var a={Unsynced:i&1,DyZero:(i&2)>>1,ExAsc:(i&4)>>2,ExDsc:(i&8)>>3};return[a,n]}function yte(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),c=e.read_shift(2),s=e.read_shift(2),p=e.read_shift(2),g=e.read_shift(2);return{Pos:[t,r],Dim:[i,n],Flags:a,CurTab:c,FirstTab:s,Selected:p,TabRatio:g}}function _te(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var i=e.read_shift(2);return{RTL:i&64}}function bte(){}function wte(e,t,r){var i={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return i.name=Yv(e,0,r),i}function Cte(e){var t=Nd(e);return t.isst=e.read_shift(4),t}function Bte(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=e.l+t,n=Nd(e);r.biff==2&&e.l++;var a=Jv(e,i-e.l,r);return n.val=a,n}function Ste(e,t,r){var i=e.read_shift(2),n=O0(e,0,r);return[i,n]}var Ete=O0;function lk(e,t,r){var i=e.l+t,n=r.biff==8||!r.biff?4:2,a=e.read_shift(n),c=e.read_shift(n),s=e.read_shift(2),p=e.read_shift(2);return e.l=i,{s:{r:a,c:s},e:{r:c,c:p}}}function Tte(e){var t=e.read_shift(2),r=e.read_shift(2),i=sL(e);return{r:t,c:r,ixfe:i[0],rknum:i[1]}}function kte(e,t){for(var r=e.l+t-2,i=e.read_shift(2),n=e.read_shift(2),a=[];e.l<r;)a.push(sL(e));if(e.l!==r)throw new Error("MulRK read error");var c=e.read_shift(2);if(a.length!=c-n+1)throw new Error("MulRK length mismatch");return{r:i,c:n,C:c,rkrec:a}}function Fte(e,t){for(var r=e.l+t-2,i=e.read_shift(2),n=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var c=e.read_shift(2);if(a.length!=c-n+1)throw new Error("MulBlank length mismatch");return{r:i,c:n,C:c,ixfe:a}}function Nte(e,t,r,i){var n={},a=e.read_shift(4),c=e.read_shift(4),s=e.read_shift(4),p=e.read_shift(2);return n.patternType=Tee[s>>26],i.cellStyles&&(n.alc=a&7,n.fWrap=a>>3&1,n.alcV=a>>4&7,n.fJustLast=a>>7&1,n.trot=a>>8&255,n.cIndent=a>>16&15,n.fShrinkToFit=a>>20&1,n.iReadOrder=a>>22&2,n.fAtrNum=a>>26&1,n.fAtrFnt=a>>27&1,n.fAtrAlc=a>>28&1,n.fAtrBdr=a>>29&1,n.fAtrPat=a>>30&1,n.fAtrProt=a>>31&1,n.dgLeft=c&15,n.dgRight=c>>4&15,n.dgTop=c>>8&15,n.dgBottom=c>>12&15,n.icvLeft=c>>16&127,n.icvRight=c>>23&127,n.grbitDiag=c>>30&3,n.icvTop=s&127,n.icvBottom=s>>7&127,n.icvDiag=s>>14&127,n.dgDiag=s>>21&15,n.icvFore=p&127,n.icvBack=p>>7&127,n.fsxButton=p>>14&1),n}function Ite(e,t,r){var i={};return i.ifnt=e.read_shift(2),i.numFmtId=e.read_shift(2),i.flags=e.read_shift(2),i.fStyle=i.flags>>2&1,t-=6,i.data=Nte(e,t,i.fStyle,r),i}function Lte(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function ck(e,t,r){var i=Nd(e);(r.biff==2||t==9)&&++e.l;var n=$ee(e);return i.val=n,i.t=n===!0||n===!1?"b":"e",i}function Mte(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=Nd(e),n=$c(e);return i.val=n,i}var uk=ite;function Pte(e,t,r){var i=e.l+t,n=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,n];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var c=N0(e,a),s=[];i>e.l;)s.push(Jv(e));return[a,n,c,s]}function hk(e,t,r){var i=e.read_shift(2),n,a={fBuiltIn:i&1,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return r.sbcch===14849&&(n=ste(e,t-2,r)),a.body=n||e.read_shift(t-2),typeof n=="string"&&(a.Name=n),a}var Rte=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Ak(e,t,r){var i=e.l+t,n=e.read_shift(2),a=e.read_shift(1),c=e.read_shift(1),s=e.read_shift(r&&r.biff==2?1:2),p=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),p=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var g=N0(e,c,r);n&32&&(g=Rte[g.charCodeAt(0)]);var v=i-e.l;r&&r.biff==2&&--v;var B=i==e.l||s===0||!(v>0)?[]:gse(e,v,r,s);return{chKey:a,Name:g,itab:p,rgce:B}}function lL(e,t,r){if(r.biff<8)return Dte(e,t,r);for(var i=[],n=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)i.push(nte(e,r.biff>8?12:6,r));if(e.l!=n)throw new Error("Bad ExternSheet: "+e.l+" != "+n);return i}function Dte(e,t,r){e[e.l+1]==3&&e[e.l]++;var i=Yv(e,t,r);return i.charCodeAt(0)==3?i.slice(1):i}function jte(e,t,r){if(r.biff<8){e.l+=t;return}var i=e.read_shift(2),n=e.read_shift(2),a=N0(e,i,r),c=N0(e,n,r);return[a,c]}function Ute(e,t,r){var i=aL(e);e.l++;var n=e.read_shift(1);return t-=8,[vse(e,t,r),n,i]}function dk(e,t,r){var i=ate(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[i,pse(e,t,r)]}function Ote(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,i=e.read_shift(4);return[t,r,i]}function zte(e,t,r){if(!(r.biff<8)){var i=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),c=e.read_shift(2),s=O0(e,0,r);return r.biff<8&&e.read_shift(1),[{r:i,c:n},s,c,a]}}function Qte(e,t,r){return zte(e,t,r)}function Hte(e,t){for(var r=[],i=e.read_shift(2);i--;)r.push(z_(e));return r}function Vte(e,t,r){if(r&&r.biff<8)return qte(e,t,r);var i=oL(e),n=ute(e,t-22,i[1]);return{cmo:i,ft:n}}var Gte={8:function(e,t){var r=e.l+t;e.l+=10;var i=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var n=e.read_shift(1);return e.l+=n,e.l=r,{fmt:i}}};function qte(e,t,r){e.l+=4;var i=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var c=[];return c.push((Gte[i]||tu)(e,t,r)),{cmo:[n,i,a],ft:c}}function Kte(e,t,r){var i=e.l,n="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],c;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:c=Zee(e,6,r);var s=e.read_shift(2);e.read_shift(2),Vo(e,2);var p=e.read_shift(2);e.l+=p;for(var g=1;g<e.lens.length-1;++g){if(e.l-i!=e.lens[g])throw new Error("TxO: bad continue record");var v=e[e.l],B=N0(e,e.lens[g+1]-e.lens[g]-1);if(n+=B,n.length>=(v?s:2*s))break}if(n.length!==s&&n.length!==s*2)throw new Error("cchText: "+s+" != "+n.length);return e.l=i+t,{t:n}}catch{return e.l=i+t,{t:n}}}function Wte(e,t){var r=z_(e);e.l+=16;var i=tte(e,t-24);return[r,i]}function $te(e,t){e.read_shift(2);var r=z_(e),i=e.read_shift((t-10)/2,"dbcs-cont");return i=i.replace(Bu,""),[r,i]}function Xte(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=rk[r]||r,r=e.read_shift(2),t[1]=rk[r]||r,t}function Zte(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nL(e));return r}function Yte(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(nL(e));return r}function Jte(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function cL(e,t,r){if(!r.cellStyles)return tu(e,t);var i=r&&r.biff>=12?4:2,n=e.read_shift(i),a=e.read_shift(i),c=e.read_shift(i),s=e.read_shift(i),p=e.read_shift(2);i==2&&(e.l+=2);var g={s:n,e:a,w:c,ixfe:s,flags:p};return(r.biff>=5||!r.biff)&&(g.level=p>>8&7),g}function ere(e,t){var r={};return t<32||(e.l+=16,r.header=$c(e),r.footer=$c(e),e.l+=2),r}function tre(e,t,r){var i={area:!1};if(r.biff!=5)return e.l+=t,i;var n=e.read_shift(1);return e.l+=3,n&16&&(i.area=!0),i}var rre=Nd,ire=rL,nre=Jv;function sre(e){var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(4),n={fmt:t,env:r,len:i,data:e.slice(e.l,e.l+i)};return e.l+=i,n}function are(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var i=Nd(e);++e.l;var n=O0(e,t-7,r);return i.t="str",i.val=n,i}function ore(e){var t=Nd(e);++e.l;var r=$c(e);return t.t="n",t.val=r,t}function lre(e){var t=Nd(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function cre(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function ure(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function hre(e,t,r){var i=e.l+t,n=Nd(e),a=e.read_shift(2),c=N0(e,a,r);return e.l=i,n.t="str",n.val=c,n}var Are=[2,3,48,49,131,139,140,245],fk=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=yC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(s,p){var g=[],v=Bp(1);switch(p.type){case"base64":v=UA(Fh(s));break;case"binary":v=UA(s);break;case"buffer":case"array":v=s;break}dc(v,0);var B=v.read_shift(1),F=!!(B&136),C=!1,L=!1;switch(B){case 2:break;case 3:break;case 48:C=!0,F=!0;break;case 49:C=!0,F=!0;break;case 131:break;case 139:break;case 140:L=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+B.toString(16))}var P=0,D=521;B==2&&(P=v.read_shift(2)),v.l+=3,B!=2&&(P=v.read_shift(4)),P>1048576&&(P=1e6),B!=2&&(D=v.read_shift(2));var j=v.read_shift(2),q=p.codepage||1252;B!=2&&(v.l+=16,v.read_shift(1),v[v.l]!==0&&(q=e[v[v.l]]),v.l+=1,v.l+=2),L&&(v.l+=36);for(var H=[],ee={},G=Math.min(v.length,B==2?521:D-10-(C?264:0)),ne=L?32:11;v.l<G&&v[v.l]!=13;)switch(ee={},ee.name=kv.utils.decode(q,v.slice(v.l,v.l+ne)).replace(/[\u0000\r\n].*$/g,""),v.l+=ne,ee.type=String.fromCharCode(v.read_shift(1)),B!=2&&!L&&(ee.offset=v.read_shift(4)),ee.len=v.read_shift(1),B==2&&(ee.offset=v.read_shift(2)),ee.dec=v.read_shift(1),ee.name.length&&H.push(ee),B!=2&&(v.l+=L?13:14),ee.type){case"B":(!C||ee.len!=8)&&p.WTF&&console.log("Skipping "+ee.name+":"+ee.type);break;case"G":case"P":p.WTF&&console.log("Skipping "+ee.name+":"+ee.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+ee.type)}if(v[v.l]!==13&&(v.l=D-1),v.read_shift(1)!==13)throw new Error("DBF Terminator not found "+v.l+" "+v[v.l]);v.l=D;var Z=0,le=0;for(g[0]=[],le=0;le!=H.length;++le)g[0][le]=H[le].name;for(;P-- >0;){if(v[v.l]===42){v.l+=j;continue}for(++v.l,g[++Z]=[],le=0,le=0;le!=H.length;++le){var J=v.slice(v.l,v.l+H[le].len);v.l+=H[le].len,dc(J,0);var ce=kv.utils.decode(q,J);switch(H[le].type){case"C":ce.trim().length&&(g[Z][le]=ce.replace(/\s+$/,""));break;case"D":ce.length===8?g[Z][le]=new Date(+ce.slice(0,4),+ce.slice(4,6)-1,+ce.slice(6,8)):g[Z][le]=ce;break;case"F":g[Z][le]=parseFloat(ce.trim());break;case"+":case"I":g[Z][le]=L?J.read_shift(-4,"i")^2147483648:J.read_shift(4,"i");break;case"L":switch(ce.trim().toUpperCase()){case"Y":case"T":g[Z][le]=!0;break;case"N":case"F":g[Z][le]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ce+"|")}break;case"M":if(!F)throw new Error("DBF Unexpected MEMO for type "+B.toString(16));g[Z][le]="##MEMO##"+(L?parseInt(ce.trim(),10):J.read_shift(4));break;case"N":ce=ce.replace(/\u0000/g,"").trim(),ce&&ce!="."&&(g[Z][le]=+ce||0);break;case"@":g[Z][le]=new Date(J.read_shift(-8,"f")-621356832e5);break;case"T":g[Z][le]=new Date((J.read_shift(4)-2440588)*864e5+J.read_shift(4));break;case"Y":g[Z][le]=J.read_shift(4,"i")/1e4+J.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":g[Z][le]=-J.read_shift(-8,"f");break;case"B":if(C&&H[le].len==8){g[Z][le]=J.read_shift(8,"f");break}case"G":case"P":J.l+=H[le].len;break;case"0":if(H[le].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+H[le].type)}}}if(B!=2&&v.l<v.length&&v[v.l++]!=26)throw new Error("DBF EOF Marker missing "+(v.l-1)+" of "+v.length+" "+v[v.l-1].toString(16));return p&&p.sheetRows&&(g=g.slice(0,p.sheetRows)),p.DBF=H,g}function i(s,p){var g=p||{};g.dateNF||(g.dateNF="yyyymmdd");var v=Bg(r(s,g),g);return v["!cols"]=g.DBF.map(function(B){return{wch:B.len,DBF:B}}),delete g.DBF,v}function n(s,p){try{return kp(i(s,p),p)}catch(g){if(p&&p.WTF)throw g}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function c(s,p){var g=p||{};if(+g.codepage>=0&&OA(+g.codepage),g.type=="string")throw new Error("Cannot write DBF to JS string");var v=t4(),B=h4(s,{header:1,raw:!0,cellDates:!0}),F=B[0],C=B.slice(1),L=s["!cols"]||[],P=0,D=0,j=0,q=1;for(P=0;P<F.length;++P){if(((L[P]||{}).DBF||{}).name){F[P]=L[P].DBF.name,++j;continue}if(F[P]!=null){if(++j,typeof F[P]=="number"&&(F[P]=F[P].toString(10)),typeof F[P]!="string")throw new Error("DBF Invalid column name "+F[P]+" |"+typeof F[P]+"|");if(F.indexOf(F[P])!==P){for(D=0;D<1024;++D)if(F.indexOf(F[P]+"_"+D)==-1){F[P]+="_"+D;break}}}}var H=ro(s["!ref"]),ee=[],G=[],ne=[];for(P=0;P<=H.e.c-H.s.c;++P){var Z="",le="",J=0,ce=[];for(D=0;D<C.length;++D)C[D][P]!=null&&ce.push(C[D][P]);if(ce.length==0||F[P]==null){ee[P]="?";continue}for(D=0;D<ce.length;++D){switch(typeof ce[D]){case"number":le="B";break;case"string":le="C";break;case"boolean":le="L";break;case"object":le=ce[D]instanceof Date?"D":"C";break;default:le="C"}J=Math.max(J,String(ce[D]).length),Z=Z&&Z!=le?"C":le}J>250&&(J=250),le=((L[P]||{}).DBF||{}).type,le=="C"&&L[P].DBF.len>J&&(J=L[P].DBF.len),Z=="B"&&le=="N"&&(Z="N",ne[P]=L[P].DBF.dec,J=L[P].DBF.len),G[P]=Z=="C"||le=="N"?J:a[Z]||0,q+=G[P],ee[P]=Z}var te=v.next(32);for(te.write_shift(4,318902576),te.write_shift(4,C.length),te.write_shift(2,296+32*j),te.write_shift(2,q),P=0;P<4;++P)te.write_shift(4,0);for(te.write_shift(4,0|(+t[lI]||3)<<8),P=0,D=0;P<F.length;++P)if(F[P]!=null){var K=v.next(32),me=(F[P].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);K.write_shift(1,me,"sbcs"),K.write_shift(1,ee[P]=="?"?"C":ee[P],"sbcs"),K.write_shift(4,D),K.write_shift(1,G[P]||a[ee[P]]||0),K.write_shift(1,ne[P]||0),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(1,0),K.write_shift(4,0),K.write_shift(4,0),D+=G[P]||a[ee[P]]||0}var we=v.next(264);for(we.write_shift(4,13),P=0;P<65;++P)we.write_shift(4,0);for(P=0;P<C.length;++P){var Fe=v.next(q);for(Fe.write_shift(1,0),D=0;D<F.length;++D)if(F[D]!=null)switch(ee[D]){case"L":Fe.write_shift(1,C[P][D]==null?63:C[P][D]?84:70);break;case"B":Fe.write_shift(8,C[P][D]||0,"f");break;case"N":var he="0";for(typeof C[P][D]=="number"&&(he=C[P][D].toFixed(ne[D]||0)),j=0;j<G[D]-he.length;++j)Fe.write_shift(1,32);Fe.write_shift(1,he,"sbcs");break;case"D":C[P][D]?(Fe.write_shift(4,("0000"+C[P][D].getFullYear()).slice(-4),"sbcs"),Fe.write_shift(2,("00"+(C[P][D].getMonth()+1)).slice(-2),"sbcs"),Fe.write_shift(2,("00"+C[P][D].getDate()).slice(-2),"sbcs")):Fe.write_shift(8,"00000000","sbcs");break;case"C":var Le=String(C[P][D]!=null?C[P][D]:"").slice(0,G[D]);for(Fe.write_shift(1,Le,"sbcs"),j=0;j<G[D]-Le.length;++j)Fe.write_shift(1,32);break}}return v.next(1).write_shift(1,26),v.end()}return{to_workbook:n,to_sheet:i,from_sheet:c}}(),dre=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Sd(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(F,C){var L=e[C];return typeof L=="number"?FT(L):L},i=function(F,C,L){var P=C.charCodeAt(0)-32<<4|L.charCodeAt(0)-48;return P==59?F:FT(P)};e["|"]=254;function n(F,C){switch(C.type){case"base64":return a(Fh(F),C);case"binary":return a(F,C);case"buffer":return a(Kn&&Buffer.isBuffer(F)?F.toString("binary"):R0(F),C);case"array":return a(F0(F),C)}throw new Error("Unrecognized type "+C.type)}function a(F,C){var L=F.split(/[\n\r]+/),P=-1,D=-1,j=0,q=0,H=[],ee=[],G=null,ne={},Z=[],le=[],J=[],ce=0,te;for(+C.codepage>=0&&OA(+C.codepage);j!==L.length;++j){ce=0;var K=L[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(t,r),me=K.replace(/;;/g,"\0").split(";").map(function(be){return be.replace(/\u0000/g,";")}),we=me[0],Fe;if(K.length>0)switch(we){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":me[1].charAt(0)=="P"&&ee.push(K.slice(3).replace(/;;/g,";"));break;case"C":var he=!1,Le=!1,$e=!1,Ne=!1,Te=-1,Ge=-1;for(q=1;q<me.length;++q)switch(me[q].charAt(0)){case"A":break;case"X":D=parseInt(me[q].slice(1))-1,Le=!0;break;case"Y":for(P=parseInt(me[q].slice(1))-1,Le||(D=0),te=H.length;te<=P;++te)H[te]=[];break;case"K":Fe=me[q].slice(1),Fe.charAt(0)==='"'?Fe=Fe.slice(1,Fe.length-1):Fe==="TRUE"?Fe=!0:Fe==="FALSE"?Fe=!1:isNaN(QA(Fe))?isNaN(ug(Fe).getDate())||(Fe=ql(Fe)):(Fe=QA(Fe),G!==null&&wg(G)&&(Fe=O_(Fe))),he=!0;break;case"E":Ne=!0;var Y=ng(me[q].slice(1),{r:P,c:D});H[P][D]=[H[P][D],Y];break;case"S":$e=!0,H[P][D]=[H[P][D],"S5S"];break;case"G":break;case"R":Te=parseInt(me[q].slice(1))-1;break;case"C":Ge=parseInt(me[q].slice(1))-1;break;default:if(C&&C.WTF)throw new Error("SYLK bad record "+K)}if(he&&(H[P][D]&&H[P][D].length==2?H[P][D][0]=Fe:H[P][D]=Fe,G=null),$e){if(Ne)throw new Error("SYLK shared formula cannot have own formula");var Ae=Te>-1&&H[Te][Ge];if(!Ae||!Ae[1])throw new Error("SYLK shared formula cannot find base");H[P][D][1]=xL(Ae[1],{r:P-Te,c:D-Ge})}break;case"F":var fe=0;for(q=1;q<me.length;++q)switch(me[q].charAt(0)){case"X":D=parseInt(me[q].slice(1))-1,++fe;break;case"Y":for(P=parseInt(me[q].slice(1))-1,te=H.length;te<=P;++te)H[te]=[];break;case"M":ce=parseInt(me[q].slice(1))/20;break;case"F":break;case"G":break;case"P":G=ee[parseInt(me[q].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(J=me[q].slice(1).split(" "),te=parseInt(J[0],10);te<=parseInt(J[1],10);++te)ce=parseInt(J[2],10),le[te-1]=ce===0?{hidden:!0}:{wch:ce},hg(le[te-1]);break;case"C":D=parseInt(me[q].slice(1))-1,le[D]||(le[D]={});break;case"R":P=parseInt(me[q].slice(1))-1,Z[P]||(Z[P]={}),ce>0?(Z[P].hpt=ce,Z[P].hpx=Pv(ce)):ce===0&&(Z[P].hidden=!0);break;default:if(C&&C.WTF)throw new Error("SYLK bad record "+K)}fe<1&&(G=null);break;default:if(C&&C.WTF)throw new Error("SYLK bad record "+K)}}return Z.length>0&&(ne["!rows"]=Z),le.length>0&&(ne["!cols"]=le),C&&C.sheetRows&&(H=H.slice(0,C.sheetRows)),[H,ne]}function c(F,C){var L=n(F,C),P=L[0],D=L[1],j=Bg(P,C);return Sd(D).forEach(function(q){j[q]=D[q]}),j}function s(F,C){return kp(c(F,C),C)}function p(F,C,L,P){var D="C;Y"+(L+1)+";X"+(P+1)+";K";switch(F.t){case"n":D+=F.v||0,F.f&&!F.F&&(D+=";E"+Jie(F.f,{r:L,c:P}));break;case"b":D+=F.v?"TRUE":"FALSE";break;case"e":D+=F.w||F.v;break;case"d":D+='"'+(F.w||F.v)+'"';break;case"s":D+='"'+F.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return D}function g(F,C){C.forEach(function(L,P){var D="F;W"+(P+1)+" "+(P+1)+" ";L.hidden?D+="0":(typeof L.width=="number"&&!L.wpx&&(L.wpx=n_(L.width)),typeof L.wpx=="number"&&!L.wch&&(L.wch=s_(L.wpx)),typeof L.wch=="number"&&(D+=Math.round(L.wch))),D.charAt(D.length-1)!=" "&&F.push(D)})}function v(F,C){C.forEach(function(L,P){var D="F;";L.hidden?D+="M0;":L.hpt?D+="M"+20*L.hpt+";":L.hpx&&(D+="M"+20*mL(L.hpx)+";"),D.length>2&&F.push(D+"R"+(P+1))})}function B(F,C){var L=["ID;PWXL;N;E"],P=[],D=ro(F["!ref"]),j,q=Array.isArray(F),H=`\r
`;L.push("P;PGeneral"),L.push("F;P0;DG0G8;M255"),F["!cols"]&&g(L,F["!cols"]),F["!rows"]&&v(L,F["!rows"]),L.push("B;Y"+(D.e.r-D.s.r+1)+";X"+(D.e.c-D.s.c+1)+";D"+[D.s.c,D.s.r,D.e.c,D.e.r].join(" "));for(var ee=D.s.r;ee<=D.e.r;++ee)for(var G=D.s.c;G<=D.e.c;++G){var ne=an({r:ee,c:G});j=q?(F[ee]||[])[G]:F[ne],!(!j||j.v==null&&(!j.f||j.F))&&P.push(p(j,F,ee,G))}return L.join(H)+H+P.join(H)+H+"E"+H}return{to_workbook:s,to_sheet:c,from_sheet:B}}(),fre=function(){function e(a,c){switch(c.type){case"base64":return t(Fh(a),c);case"binary":return t(a,c);case"buffer":return t(Kn&&Buffer.isBuffer(a)?a.toString("binary"):R0(a),c);case"array":return t(F0(a),c)}throw new Error("Unrecognized type "+c.type)}function t(a,c){for(var s=a.split(`
`),p=-1,g=-1,v=0,B=[];v!==s.length;++v){if(s[v].trim()==="BOT"){B[++p]=[],g=0;continue}if(!(p<0)){var F=s[v].trim().split(","),C=F[0],L=F[1];++v;for(var P=s[v]||"";(P.match(/["]/g)||[]).length&1&&v<s.length-1;)P+=`
`+s[++v];switch(P=P.trim(),+C){case-1:if(P==="BOT"){B[++p]=[],g=0;continue}else if(P!=="EOD")throw new Error("Unrecognized DIF special command "+P);break;case 0:P==="TRUE"?B[p][g]=!0:P==="FALSE"?B[p][g]=!1:isNaN(QA(L))?isNaN(ug(L).getDate())?B[p][g]=L:B[p][g]=ql(L):B[p][g]=QA(L),++g;break;case 1:P=P.slice(1,P.length-1),P=P.replace(/""/g,'"'),P&&P.match(/^=".*"$/)&&(P=P.slice(2,-1)),B[p][g++]=P!==""?P:null;break}if(P==="EOD")break}}return c&&c.sheetRows&&(B=B.slice(0,c.sheetRows)),B}function r(a,c){return Bg(e(a,c),c)}function i(a,c){return kp(r(a,c),c)}var n=function(){var a=function(p,g,v,B,F){p.push(g),p.push(v+","+B),p.push('"'+F.replace(/"/g,'""')+'"')},c=function(p,g,v,B){p.push(g+","+v),p.push(g==1?'"'+B.replace(/"/g,'""')+'"':B)};return function(p){var g=[],v=ro(p["!ref"]),B,F=Array.isArray(p);a(g,"TABLE",0,1,"sheetjs"),a(g,"VECTORS",0,v.e.r-v.s.r+1,""),a(g,"TUPLES",0,v.e.c-v.s.c+1,""),a(g,"DATA",0,0,"");for(var C=v.s.r;C<=v.e.r;++C){c(g,-1,0,"BOT");for(var L=v.s.c;L<=v.e.c;++L){var P=an({r:C,c:L});if(B=F?(p[C]||[])[L]:p[P],!B){c(g,1,0,"");continue}switch(B.t){case"n":var D=B.w;!D&&B.v!=null&&(D=B.v),D==null?B.f&&!B.F?c(g,1,0,"="+B.f):c(g,1,0,""):c(g,0,D,"V");break;case"b":c(g,0,B.v?1:0,B.v?"TRUE":"FALSE");break;case"s":c(g,1,0,isNaN(B.v)?B.v:'="'+B.v+'"');break;case"d":B.w||(B.w=oA(B.z||dn[14],Su(ql(B.v)))),c(g,0,B.w,"V");break;default:c(g,1,0,"")}}}c(g,-1,0,"EOD");var j=`\r
`,q=g.join(j);return q}}();return{to_workbook:i,to_sheet:r,from_sheet:n}}(),pre=function(){function e(B){return B.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(B){return B.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(B,F){for(var C=B.split(`
`),L=-1,P=-1,D=0,j=[];D!==C.length;++D){var q=C[D].trim().split(":");if(q[0]==="cell"){var H=Cu(q[1]);if(j.length<=H.r)for(L=j.length;L<=H.r;++L)j[L]||(j[L]=[]);switch(L=H.r,P=H.c,q[2]){case"t":j[L][P]=e(q[3]);break;case"v":j[L][P]=+q[3];break;case"vtf":var ee=q[q.length-1];case"vtc":switch(q[3]){case"nl":j[L][P]=!!+q[4];break;default:j[L][P]=+q[4];break}q[2]=="vtf"&&(j[L][P]=[j[L][P],ee])}}}return F&&F.sheetRows&&(j=j.slice(0,F.sheetRows)),j}function i(B,F){return Bg(r(B,F),F)}function n(B,F){return kp(i(B,F),F)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),c=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),p="--SocialCalcSpreadsheetControlSave--";function g(B){if(!B||!B["!ref"])return"";for(var F=[],C=[],L,P="",D=Cg(B["!ref"]),j=Array.isArray(B),q=D.s.r;q<=D.e.r;++q)for(var H=D.s.c;H<=D.e.c;++H)if(P=an({r:q,c:H}),L=j?(B[q]||[])[H]:B[P],!(!L||L.v==null||L.t==="z")){switch(C=["cell",P,"t"],L.t){case"s":case"str":C.push(t(L.v));break;case"n":L.f?(C[2]="vtf",C[3]="n",C[4]=L.v,C[5]=t(L.f)):(C[2]="v",C[3]=L.v);break;case"b":C[2]="vt"+(L.f?"f":"c"),C[3]="nl",C[4]=L.v?"1":"0",C[5]=t(L.f||(L.v?"TRUE":"FALSE"));break;case"d":var ee=Su(ql(L.v));C[2]="vtc",C[3]="nd",C[4]=""+ee,C[5]=L.w||oA(L.z||dn[14],ee);break;case"e":continue}F.push(C.join(":"))}return F.push("sheet:c:"+(D.e.c-D.s.c+1)+":r:"+(D.e.r-D.s.r+1)+":tvf:1"),F.push("valueformat:1:text-wiki"),F.join(`
`)}function v(B){return[a,c,s,c,g(B),p].join(`
`)}return{to_workbook:n,to_sheet:i,from_sheet:v}}(),Lv=function(){function e(v,B,F,C,L){L.raw?B[F][C]=v:v===""||(v==="TRUE"?B[F][C]=!0:v==="FALSE"?B[F][C]=!1:isNaN(QA(v))?isNaN(ug(v).getDate())?B[F][C]=v:B[F][C]=ql(v):B[F][C]=QA(v))}function t(v,B){var F=B||{},C=[];if(!v||v.length===0)return C;for(var L=v.split(/[\r\n]/),P=L.length-1;P>=0&&L[P].length===0;)--P;for(var D=10,j=0,q=0;q<=P;++q)j=L[q].indexOf(" "),j==-1?j=L[q].length:j++,D=Math.max(D,j);for(q=0;q<=P;++q){C[q]=[];var H=0;for(e(L[q].slice(0,D).trim(),C,q,H,F),H=1;H<=(L[q].length-D)/10+1;++H)e(L[q].slice(D+(H-1)*10,D+H*10).trim(),C,q,H,F)}return F.sheetRows&&(C=C.slice(0,F.sheetRows)),C}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function n(v){for(var B={},F=!1,C=0,L=0;C<v.length;++C)(L=v.charCodeAt(C))==34?F=!F:!F&&L in r&&(B[L]=(B[L]||0)+1);L=[];for(C in B)Object.prototype.hasOwnProperty.call(B,C)&&L.push([B[C],C]);if(!L.length){B=i;for(C in B)Object.prototype.hasOwnProperty.call(B,C)&&L.push([B[C],C])}return L.sort(function(P,D){return P[0]-D[0]||i[P[1]]-i[D[1]]}),r[L.pop()[1]]||44}function a(v,B){var F=B||{},C="",L=F.dense?[]:{},P={s:{c:0,r:0},e:{c:0,r:0}};v.slice(0,4)=="sep="?v.charCodeAt(5)==13&&v.charCodeAt(6)==10?(C=v.charAt(4),v=v.slice(7)):v.charCodeAt(5)==13||v.charCodeAt(5)==10?(C=v.charAt(4),v=v.slice(6)):C=n(v.slice(0,1024)):F&&F.FS?C=F.FS:C=n(v.slice(0,1024));var D=0,j=0,q=0,H=0,ee=0,G=C.charCodeAt(0),ne=!1,Z=0,le=v.charCodeAt(0);v=v.replace(/\r\n/mg,`
`);var J=F.dateNF!=null?SJ(F.dateNF):null;function ce(){var te=v.slice(H,ee),K={};if(te.charAt(0)=='"'&&te.charAt(te.length-1)=='"'&&(te=te.slice(1,-1).replace(/""/g,'"')),te.length===0)K.t="z";else if(F.raw)K.t="s",K.v=te;else if(te.trim().length===0)K.t="s",K.v=te;else if(te.charCodeAt(0)==61)te.charCodeAt(1)==34&&te.charCodeAt(te.length-1)==34?(K.t="s",K.v=te.slice(2,-1).replace(/""/g,'"')):tne(te)?(K.t="n",K.f=te.slice(1)):(K.t="s",K.v=te);else if(te=="TRUE")K.t="b",K.v=!0;else if(te=="FALSE")K.t="b",K.v=!1;else if(!isNaN(q=QA(te)))K.t="n",F.cellText!==!1&&(K.w=te),K.v=q;else if(!isNaN(ug(te).getDate())||J&&te.match(J)){K.z=F.dateNF||dn[14];var me=0;J&&te.match(J)&&(te=EJ(te,F.dateNF,te.match(J)||[]),me=1),F.cellDates?(K.t="d",K.v=ql(te,me)):(K.t="n",K.v=Su(ql(te,me))),F.cellText!==!1&&(K.w=oA(K.z,K.v instanceof Date?Su(K.v):K.v)),F.cellNF||delete K.z}else K.t="s",K.v=te;if(K.t=="z"||(F.dense?(L[D]||(L[D]=[]),L[D][j]=K):L[an({c:j,r:D})]=K),H=ee+1,le=v.charCodeAt(H),P.e.c<j&&(P.e.c=j),P.e.r<D&&(P.e.r=D),Z==G)++j;else if(j=0,++D,F.sheetRows&&F.sheetRows<=D)return!0}e:for(;ee<v.length;++ee)switch(Z=v.charCodeAt(ee)){case 34:le===34&&(ne=!ne);break;case G:case 10:case 13:if(!ne&&ce())break e;break}return ee-H>0&&ce(),L["!ref"]=Zn(P),L}function c(v,B){return!(B&&B.PRN)||B.FS||v.slice(0,4)=="sep="||v.indexOf("	")>=0||v.indexOf(",")>=0||v.indexOf(";")>=0?a(v,B):Bg(t(v,B),B)}function s(v,B){var F="",C=B.type=="string"?[0,0,0,0]:UC(v,B);switch(B.type){case"base64":F=Fh(v);break;case"binary":F=v;break;case"buffer":B.codepage==65001?F=v.toString("utf8"):B.codepage&&typeof kv<"u"||(F=Kn&&Buffer.isBuffer(v)?v.toString("binary"):R0(v));break;case"array":F=F0(v);break;case"string":F=v;break;default:throw new Error("Unrecognized type "+B.type)}return C[0]==239&&C[1]==187&&C[2]==191?F=ha(F.slice(3)):B.type!="string"&&B.type!="buffer"&&B.codepage==65001?F=ha(F):B.type=="binary"&&typeof kv<"u",F.slice(0,19)=="socialcalc:version:"?pre.to_sheet(B.type=="string"?F:ha(F),B):c(F,B)}function p(v,B){return kp(s(v,B),B)}function g(v){for(var B=[],F=ro(v["!ref"]),C,L=Array.isArray(v),P=F.s.r;P<=F.e.r;++P){for(var D=[],j=F.s.c;j<=F.e.c;++j){var q=an({r:P,c:j});if(C=L?(v[P]||[])[j]:v[q],!C||C.v==null){D.push("          ");continue}for(var H=(C.w||(wf(C),C.w)||"").slice(0,10);H.length<10;)H+=" ";D.push(H+(j===0?" ":""))}B.push(D.join(""))}return B.join(`
`)}return{to_workbook:p,to_sheet:s,from_sheet:g}}();function mre(e,t){var r=t||{},i=!!r.WTF;r.WTF=!0;try{var n=dre.to_workbook(e,r);return r.WTF=i,n}catch(a){if(r.WTF=i,!a.message.match(/SYLK bad record ID/)&&i)throw a;return Lv.to_workbook(e,t)}}var cv=function(){function e(Y,Ae,fe){if(Y){dc(Y,Y.l||0);for(var be=fe.Enum||Te;Y.l<Y.length;){var Me=Y.read_shift(2),ze=be[Me]||be[65535],We=Y.read_shift(2),ut=Y.l+We,dt=ze.f&&ze.f(Y,We,fe);if(Y.l=ut,Ae(dt,ze,Me))return}}}function t(Y,Ae){switch(Ae.type){case"base64":return r(UA(Fh(Y)),Ae);case"binary":return r(UA(Y),Ae);case"buffer":case"array":return r(Y,Ae)}throw"Unsupported type "+Ae.type}function r(Y,Ae){if(!Y)return Y;var fe=Ae||{},be=fe.dense?[]:{},Me="Sheet1",ze="",We=0,ut={},dt=[],zt=[],ve={s:{r:0,c:0},e:{r:0,c:0}},Ct=fe.sheetRows||0;if(Y[2]==0&&(Y[3]==8||Y[3]==9)&&Y.length>=16&&Y[14]==5&&Y[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Y[2]==2)fe.Enum=Te,e(Y,function(ir,jr,ar){switch(ar){case 0:fe.vers=ir,ir>=4096&&(fe.qpro=!0);break;case 6:ve=ir;break;case 204:ir&&(ze=ir);break;case 222:ze=ir;break;case 15:case 51:fe.qpro||(ir[1].v=ir[1].v.slice(1));case 13:case 14:case 16:ar==14&&(ir[2]&112)==112&&(ir[2]&15)>1&&(ir[2]&15)<15&&(ir[1].z=fe.dateNF||dn[14],fe.cellDates&&(ir[1].t="d",ir[1].v=O_(ir[1].v))),fe.qpro&&ir[3]>We&&(be["!ref"]=Zn(ve),ut[Me]=be,dt.push(Me),be=fe.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},We=ir[3],Me=ze||"Sheet"+(We+1),ze="");var Wr=fe.dense?(be[ir[0].r]||[])[ir[0].c]:be[an(ir[0])];if(Wr){Wr.t=ir[1].t,Wr.v=ir[1].v,ir[1].z!=null&&(Wr.z=ir[1].z),ir[1].f!=null&&(Wr.f=ir[1].f);break}fe.dense?(be[ir[0].r]||(be[ir[0].r]=[]),be[ir[0].r][ir[0].c]=ir[1]):be[an(ir[0])]=ir[1];break}},fe);else if(Y[2]==26||Y[2]==14)fe.Enum=Ge,Y[2]==14&&(fe.qpro=!0,Y.l=0),e(Y,function(ir,jr,ar){switch(ar){case 204:Me=ir;break;case 22:ir[1].v=ir[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ir[3]>We&&(be["!ref"]=Zn(ve),ut[Me]=be,dt.push(Me),be=fe.dense?[]:{},ve={s:{r:0,c:0},e:{r:0,c:0}},We=ir[3],Me="Sheet"+(We+1)),Ct>0&&ir[0].r>=Ct)break;fe.dense?(be[ir[0].r]||(be[ir[0].r]=[]),be[ir[0].r][ir[0].c]=ir[1]):be[an(ir[0])]=ir[1],ve.e.c<ir[0].c&&(ve.e.c=ir[0].c),ve.e.r<ir[0].r&&(ve.e.r=ir[0].r);break;case 27:ir[14e3]&&(zt[ir[14e3][0]]=ir[14e3][1]);break;case 1537:zt[ir[0]]=ir[1],ir[0]==We&&(Me=ir[1]);break}},fe);else throw new Error("Unrecognized LOTUS BOF "+Y[2]);if(be["!ref"]=Zn(ve),ut[ze||Me]=be,dt.push(ze||Me),!zt.length)return{SheetNames:dt,Sheets:ut};for(var Pt={},Ve=[],lr=0;lr<zt.length;++lr)ut[dt[lr]]?(Ve.push(zt[lr]||dt[lr]),Pt[zt[lr]]=ut[zt[lr]]||ut[dt[lr]]):(Ve.push(zt[lr]),Pt[zt[lr]]={"!ref":"A1"});return{SheetNames:Ve,Sheets:Pt}}function i(Y,Ae){var fe=Ae||{};if(+fe.codepage>=0&&OA(+fe.codepage),fe.type=="string")throw new Error("Cannot write WK1 to JS string");var be=t4(),Me=ro(Y["!ref"]),ze=Array.isArray(Y),We=[];RA(be,0,a(1030)),RA(be,6,p(Me));for(var ut=Math.min(Me.e.r,8191),dt=Me.s.r;dt<=ut;++dt)for(var zt=gc(dt),ve=Me.s.c;ve<=Me.e.c;++ve){dt===Me.s.r&&(We[ve]=gl(ve));var Ct=We[ve]+zt,Pt=ze?(Y[dt]||[])[ve]:Y[Ct];if(!(!Pt||Pt.t=="z"))if(Pt.t=="n")(Pt.v|0)==Pt.v&&Pt.v>=-32768&&Pt.v<=32767?RA(be,13,C(dt,ve,Pt.v)):RA(be,14,P(dt,ve,Pt.v));else{var Ve=wf(Pt);RA(be,15,B(dt,ve,Ve.slice(0,239)))}}return RA(be,1),be.end()}function n(Y,Ae){var fe=Ae||{};if(+fe.codepage>=0&&OA(+fe.codepage),fe.type=="string")throw new Error("Cannot write WK3 to JS string");var be=t4();RA(be,0,c(Y));for(var Me=0,ze=0;Me<Y.SheetNames.length;++Me)(Y.Sheets[Y.SheetNames[Me]]||{})["!ref"]&&RA(be,27,Ne(Y.SheetNames[Me],ze++));var We=0;for(Me=0;Me<Y.SheetNames.length;++Me){var ut=Y.Sheets[Y.SheetNames[Me]];if(!(!ut||!ut["!ref"])){for(var dt=ro(ut["!ref"]),zt=Array.isArray(ut),ve=[],Ct=Math.min(dt.e.r,8191),Pt=dt.s.r;Pt<=Ct;++Pt)for(var Ve=gc(Pt),lr=dt.s.c;lr<=dt.e.c;++lr){Pt===dt.s.r&&(ve[lr]=gl(lr));var ir=ve[lr]+Ve,jr=zt?(ut[Pt]||[])[lr]:ut[ir];if(!(!jr||jr.t=="z"))if(jr.t=="n")RA(be,23,ce(Pt,lr,We,jr.v));else{var ar=wf(jr);RA(be,22,Z(Pt,lr,We,ar.slice(0,239)))}}++We}}return RA(be,1),be.end()}function a(Y){var Ae=fl(2);return Ae.write_shift(2,Y),Ae}function c(Y){var Ae=fl(26);Ae.write_shift(2,4096),Ae.write_shift(2,4),Ae.write_shift(4,0);for(var fe=0,be=0,Me=0,ze=0;ze<Y.SheetNames.length;++ze){var We=Y.SheetNames[ze],ut=Y.Sheets[We];if(!(!ut||!ut["!ref"])){++Me;var dt=Cg(ut["!ref"]);fe<dt.e.r&&(fe=dt.e.r),be<dt.e.c&&(be=dt.e.c)}}return fe>8191&&(fe=8191),Ae.write_shift(2,fe),Ae.write_shift(1,Me),Ae.write_shift(1,be),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(1,1),Ae.write_shift(1,2),Ae.write_shift(4,0),Ae.write_shift(4,0),Ae}function s(Y,Ae,fe){var be={s:{c:0,r:0},e:{c:0,r:0}};return Ae==8&&fe.qpro?(be.s.c=Y.read_shift(1),Y.l++,be.s.r=Y.read_shift(2),be.e.c=Y.read_shift(1),Y.l++,be.e.r=Y.read_shift(2),be):(be.s.c=Y.read_shift(2),be.s.r=Y.read_shift(2),Ae==12&&fe.qpro&&(Y.l+=2),be.e.c=Y.read_shift(2),be.e.r=Y.read_shift(2),Ae==12&&fe.qpro&&(Y.l+=2),be.s.c==65535&&(be.s.c=be.e.c=be.s.r=be.e.r=0),be)}function p(Y){var Ae=fl(8);return Ae.write_shift(2,Y.s.c),Ae.write_shift(2,Y.s.r),Ae.write_shift(2,Y.e.c),Ae.write_shift(2,Y.e.r),Ae}function g(Y,Ae,fe){var be=[{c:0,r:0},{t:"n",v:0},0,0];return fe.qpro&&fe.vers!=20768?(be[0].c=Y.read_shift(1),be[3]=Y.read_shift(1),be[0].r=Y.read_shift(2),Y.l+=2):(be[2]=Y.read_shift(1),be[0].c=Y.read_shift(2),be[0].r=Y.read_shift(2)),be}function v(Y,Ae,fe){var be=Y.l+Ae,Me=g(Y,Ae,fe);if(Me[1].t="s",fe.vers==20768){Y.l++;var ze=Y.read_shift(1);return Me[1].v=Y.read_shift(ze,"utf8"),Me}return fe.qpro&&Y.l++,Me[1].v=Y.read_shift(be-Y.l,"cstr"),Me}function B(Y,Ae,fe){var be=fl(7+fe.length);be.write_shift(1,255),be.write_shift(2,Ae),be.write_shift(2,Y),be.write_shift(1,39);for(var Me=0;Me<be.length;++Me){var ze=fe.charCodeAt(Me);be.write_shift(1,ze>=128?95:ze)}return be.write_shift(1,0),be}function F(Y,Ae,fe){var be=g(Y,Ae,fe);return be[1].v=Y.read_shift(2,"i"),be}function C(Y,Ae,fe){var be=fl(7);return be.write_shift(1,255),be.write_shift(2,Ae),be.write_shift(2,Y),be.write_shift(2,fe,"i"),be}function L(Y,Ae,fe){var be=g(Y,Ae,fe);return be[1].v=Y.read_shift(8,"f"),be}function P(Y,Ae,fe){var be=fl(13);return be.write_shift(1,255),be.write_shift(2,Ae),be.write_shift(2,Y),be.write_shift(8,fe,"f"),be}function D(Y,Ae,fe){var be=Y.l+Ae,Me=g(Y,Ae,fe);if(Me[1].v=Y.read_shift(8,"f"),fe.qpro)Y.l=be;else{var ze=Y.read_shift(2);ee(Y.slice(Y.l,Y.l+ze),Me),Y.l+=ze}return Me}function j(Y,Ae,fe){var be=Ae&32768;return Ae&=-32769,Ae=(be?Y:0)+(Ae>=8192?Ae-16384:Ae),(be?"":"$")+(fe?gl(Ae):gc(Ae))}var q={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},H=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function ee(Y,Ae){dc(Y,0);for(var fe=[],be=0,Me="",ze="",We="",ut="";Y.l<Y.length;){var dt=Y[Y.l++];switch(dt){case 0:fe.push(Y.read_shift(8,"f"));break;case 1:ze=j(Ae[0].c,Y.read_shift(2),!0),Me=j(Ae[0].r,Y.read_shift(2),!1),fe.push(ze+Me);break;case 2:{var zt=j(Ae[0].c,Y.read_shift(2),!0),ve=j(Ae[0].r,Y.read_shift(2),!1);ze=j(Ae[0].c,Y.read_shift(2),!0),Me=j(Ae[0].r,Y.read_shift(2),!1),fe.push(zt+ve+":"+ze+Me)}break;case 3:if(Y.l<Y.length){console.error("WK1 premature formula end");return}break;case 4:fe.push("("+fe.pop()+")");break;case 5:fe.push(Y.read_shift(2));break;case 6:{for(var Ct="";dt=Y[Y.l++];)Ct+=String.fromCharCode(dt);fe.push('"'+Ct.replace(/"/g,'""')+'"')}break;case 8:fe.push("-"+fe.pop());break;case 23:fe.push("+"+fe.pop());break;case 22:fe.push("NOT("+fe.pop()+")");break;case 20:case 21:ut=fe.pop(),We=fe.pop(),fe.push(["AND","OR"][dt-20]+"("+We+","+ut+")");break;default:if(dt<32&&H[dt])ut=fe.pop(),We=fe.pop(),fe.push(We+H[dt]+ut);else if(q[dt]){if(be=q[dt][1],be==69&&(be=Y[Y.l++]),be>fe.length){console.error("WK1 bad formula parse 0x"+dt.toString(16)+":|"+fe.join("|")+"|");return}var Pt=fe.slice(-be);fe.length-=be,fe.push(q[dt][0]+"("+Pt.join(",")+")")}else return dt<=7?console.error("WK1 invalid opcode "+dt.toString(16)):dt<=24?console.error("WK1 unsupported op "+dt.toString(16)):dt<=30?console.error("WK1 invalid opcode "+dt.toString(16)):dt<=115?console.error("WK1 unsupported function opcode "+dt.toString(16)):console.error("WK1 unrecognized opcode "+dt.toString(16))}}fe.length==1?Ae[1].f=""+fe[0]:console.error("WK1 bad formula parse |"+fe.join("|")+"|")}function G(Y){var Ae=[{c:0,r:0},{t:"n",v:0},0];return Ae[0].r=Y.read_shift(2),Ae[3]=Y[Y.l++],Ae[0].c=Y[Y.l++],Ae}function ne(Y,Ae){var fe=G(Y);return fe[1].t="s",fe[1].v=Y.read_shift(Ae-4,"cstr"),fe}function Z(Y,Ae,fe,be){var Me=fl(6+be.length);Me.write_shift(2,Y),Me.write_shift(1,fe),Me.write_shift(1,Ae),Me.write_shift(1,39);for(var ze=0;ze<be.length;++ze){var We=be.charCodeAt(ze);Me.write_shift(1,We>=128?95:We)}return Me.write_shift(1,0),Me}function le(Y,Ae){var fe=G(Y);fe[1].v=Y.read_shift(2);var be=fe[1].v>>1;if(fe[1].v&1)switch(be&7){case 0:be=(be>>3)*5e3;break;case 1:be=(be>>3)*500;break;case 2:be=(be>>3)/20;break;case 3:be=(be>>3)/200;break;case 4:be=(be>>3)/2e3;break;case 5:be=(be>>3)/2e4;break;case 6:be=(be>>3)/16;break;case 7:be=(be>>3)/64;break}return fe[1].v=be,fe}function J(Y,Ae){var fe=G(Y),be=Y.read_shift(4),Me=Y.read_shift(4),ze=Y.read_shift(2);if(ze==65535)return be===0&&Me===3221225472?(fe[1].t="e",fe[1].v=15):be===0&&Me===3489660928?(fe[1].t="e",fe[1].v=42):fe[1].v=0,fe;var We=ze&32768;return ze=(ze&32767)-16446,fe[1].v=(1-We*2)*(Me*Math.pow(2,ze+32)+be*Math.pow(2,ze)),fe}function ce(Y,Ae,fe,be){var Me=fl(14);if(Me.write_shift(2,Y),Me.write_shift(1,fe),Me.write_shift(1,Ae),be==0)return Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(2,65535),Me;var ze=0,We=0,ut=0,dt=0;return be<0&&(ze=1,be=-be),We=Math.log2(be)|0,be/=Math.pow(2,We-31),dt=be>>>0,(dt&2147483648)==0&&(be/=2,++We,dt=be>>>0),be-=dt,dt|=2147483648,dt>>>=0,be*=Math.pow(2,32),ut=be>>>0,Me.write_shift(4,ut),Me.write_shift(4,dt),We+=16383+(ze?32768:0),Me.write_shift(2,We),Me}function te(Y,Ae){var fe=J(Y);return Y.l+=Ae-14,fe}function K(Y,Ae){var fe=G(Y),be=Y.read_shift(4);return fe[1].v=be>>6,fe}function me(Y,Ae){var fe=G(Y),be=Y.read_shift(8,"f");return fe[1].v=be,fe}function we(Y,Ae){var fe=me(Y);return Y.l+=Ae-10,fe}function Fe(Y,Ae){return Y[Y.l+Ae-1]==0?Y.read_shift(Ae,"cstr"):""}function he(Y,Ae){var fe=Y[Y.l++];fe>Ae-1&&(fe=Ae-1);for(var be="";be.length<fe;)be+=String.fromCharCode(Y[Y.l++]);return be}function Le(Y,Ae,fe){if(!(!fe.qpro||Ae<21)){var be=Y.read_shift(1);Y.l+=17,Y.l+=1,Y.l+=2;var Me=Y.read_shift(Ae-21,"cstr");return[be,Me]}}function $e(Y,Ae){for(var fe={},be=Y.l+Ae;Y.l<be;){var Me=Y.read_shift(2);if(Me==14e3){for(fe[Me]=[0,""],fe[Me][0]=Y.read_shift(2);Y[Y.l];)fe[Me][1]+=String.fromCharCode(Y[Y.l]),Y.l++;Y.l++}}return fe}function Ne(Y,Ae){var fe=fl(5+Y.length);fe.write_shift(2,14e3),fe.write_shift(2,Ae);for(var be=0;be<Y.length;++be){var Me=Y.charCodeAt(be);fe[fe.l++]=Me>127?95:Me}return fe[fe.l++]=0,fe}var Te={0:{n:"BOF",f:Vo},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:s},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:F},14:{n:"NUMBER",f:L},15:{n:"LABEL",f:v},16:{n:"FORMULA",f:D},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:v},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Fe},222:{n:"SHEETNAMELP",f:he},65535:{n:""}},Ge={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ne},23:{n:"NUMBER17",f:J},24:{n:"NUMBER18",f:le},25:{n:"FORMULA19",f:te},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:$e},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:K},38:{n:"??"},39:{n:"NUMBER27",f:me},40:{n:"FORMULA28",f:we},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Fe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Le},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:n,to_workbook:t}}();function gre(e){var t={},r=e.match(ru),i=0,n=!1;if(r)for(;i!=r.length;++i){var a=Yi(r[i]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=pC[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(a[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+a[0])}}return t}var vre=function(){var e=Nv("t"),t=Nv("rPr");function r(a){var c=a.match(e);if(!c)return{t:"s",v:""};var s={t:"s",v:ts(c[1])},p=a.match(t);return p&&(s.s=gre(p[1])),s}var i=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(c){return c.replace(i,"").split(n).map(r).filter(function(s){return s.v})}}(),xre=function(){var t=/(\r\n|\n)/g;function r(n,a,c){var s=[];n.u&&s.push("text-decoration: underline;"),n.uval&&s.push("text-underline-style:"+n.uval+";"),n.sz&&s.push("font-size:"+n.sz+"pt;"),n.outline&&s.push("text-effect: outline;"),n.shadow&&s.push("text-shadow: auto;"),a.push('<span style="'+s.join("")+'">'),n.b&&(a.push("<b>"),c.push("</b>")),n.i&&(a.push("<i>"),c.push("</i>")),n.strike&&(a.push("<s>"),c.push("</s>"));var p=n.valign||"";return p=="superscript"||p=="super"?p="sup":p=="subscript"&&(p="sub"),p!=""&&(a.push("<"+p+">"),c.push("</"+p+">")),c.push("</span>"),n}function i(n){var a=[[],n.v,[]];return n.v?(n.s&&r(n.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(i).join("")}}(),yre=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,_re=/<(?:\w+:)?r>/,bre=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function IC(e,t){var r=t?t.cellHTML:!0,i={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=ts(ha(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=ha(e),r&&(i.h=bC(i.t))):e.match(_re)&&(i.r=ha(e),i.t=ts(ha((e.replace(bre,"").match(yre)||[]).join("").replace(ru,""))),r&&(i.h=xre(vre(i.r)))),i):{t:""}}var wre=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Cre=/<(?:\w+:)?(?:si|sstItem)>/g,Bre=/<\/(?:\w+:)?(?:si|sstItem)>/;function Sre(e,t){var r=[],i="";if(!e)return r;var n=e.match(wre);if(n){i=n[2].replace(Cre,"").split(Bre);for(var a=0;a!=i.length;++a){var c=IC(i[a].trim(),t);c!=null&&(r[r.length]=c)}n=Yi(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function Ere(e){return[e.read_shift(4),e.read_shift(4)]}function Tre(e,t){var r=[],i=!1;return Bf(e,function(a,c,s){switch(s){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(c.T,!i||t.WTF)throw new Error("Unexpected record 0x"+s.toString(16))}}),r}function uL(e){for(var t=[],r=e.split(""),i=0;i<r.length;++i)t[i]=r[i].charCodeAt(0);return t}function gf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function kre(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=gf(e,4),t.U=gf(e,4),t.W=gf(e,4),t}function Fre(e){for(var t=e.read_shift(4),r=e.l+t-4,i={},n=e.read_shift(4),a=[];n-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(i.name=e.read_shift(0,"lpp4"),i.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return i}function Nre(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Fre(e));return t}function Ire(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Lre(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=gf(e,4),t.U=gf(e,4),t.W=gf(e,4),t}function Mre(e){var t=Lre(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function hL(e,t){var r=e.l+t,i={};i.Flags=e.read_shift(4)&63,e.l+=4,i.AlgID=e.read_shift(4);var n=!1;switch(i.AlgID){case 26126:case 26127:case 26128:n=i.Flags==36;break;case 26625:n=i.Flags==4;break;case 0:n=i.Flags==16||i.Flags==4||i.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=e.read_shift(4),i.KeySize=e.read_shift(4),i.ProviderType=e.read_shift(4),e.l+=8,i.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,i}function AL(e,t){var r={},i=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,i),e.l=i,r}function Pre(e){var t=gf(e);switch(t.Minor){case 2:return[t.Minor,Rre(e)];case 3:return[t.Minor,Dre()];case 4:return[t.Minor,jre(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Rre(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),i=hL(e,r),n=AL(e,e.length-e.l);return{t:"Std",h:i,v:n}}function Dre(){throw new Error("File is password-protected: ECMA-376 Extensible")}function jre(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),i={};return r.replace(ru,function(a){var c=Yi(a);switch(Fd(c[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(s){i[s]=c[s]});break;case"<dataIntegrity":i.encryptedHmacKey=c.encryptedHmacKey,i.encryptedHmacValue=c.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":i.uri=c.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":i.encs.push(c);break;default:throw c[0]}}),i}function Ure(e,t){var r={},i=r.EncryptionVersionInfo=gf(e,4);if(t-=4,i.Minor!=2)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);r.Flags=e.read_shift(4),t-=4;var n=e.read_shift(4);return t-=4,r.EncryptionHeader=hL(e,n),t-=n,r.EncryptionVerifier=AL(e,t),r}function Ore(e){var t={},r=t.EncryptionVersionInfo=gf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function zre(e){var t=0,r,i=uL(e),n=i.length+1,a,c,s,p,g;for(r=Bp(n),r[0]=i.length,a=1;a!=n;++a)r[a]=i[a-1];for(a=n-1;a>=0;--a)c=r[a],s=(t&16384)===0?0:1,p=t<<1&32767,g=s|p,t=g^c;return t^52811}var dL=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(c){return(c/2|c*128)&255},n=function(c,s){return i(c^s)},a=function(c){for(var s=t[c.length-1],p=104,g=c.length-1;g>=0;--g)for(var v=c[g],B=0;B!=7;++B)v&64&&(s^=r[p]),v*=2,--p;return s};return function(c){for(var s=uL(c),p=a(s),g=s.length,v=Bp(16),B=0;B!=16;++B)v[B]=0;var F,C,L;for((g&1)===1&&(F=p>>8,v[g]=n(e[0],F),--g,F=p&255,C=s[s.length-1],v[g]=n(C,F));g>0;)--g,F=p>>8,v[g]=n(s[g],F),--g,F=p&255,v[g]=n(s[g],F);for(g=15,L=15-s.length;L>0;)F=p>>8,v[g]=n(e[L],F),--g,--L,F=p&255,v[g]=n(s[g],F),--g,--L;return v}}(),Qre=function(e,t,r,i,n){n||(n=t),i||(i=dL(e));var a,c;for(a=0;a!=t.length;++a)c=t[a],c^=i[r],c=(c>>5|c<<3)&255,n[a]=c,++r;return[n,r,i]},Hre=function(e){var t=0,r=dL(e);return function(i){var n=Qre("",i,t,r);return t=n[1],n[0]}};function Vre(e,t,r,i){var n={key:Vo(e),verificationBytes:Vo(e)};return r.password&&(n.verifier=zre(r.password)),i.valid=n.verificationBytes===n.verifier,i.valid&&(i.insitu=Hre(r.password)),n}function Gre(e,t,r){var i=r||{};return i.Info=e.read_shift(2),e.l-=2,i.Info===1?i.Data=Ore(e):i.Data=Ure(e,t),i}function qre(e,t,r){var i={Type:r.biff>=8?e.read_shift(2):0};return i.Type?Gre(e,t-2,i):Vre(e,r.biff>=8?t:t-2,r,i),i}var Kre=function(){function e(n,a){switch(a.type){case"base64":return t(Fh(n),a);case"binary":return t(n,a);case"buffer":return t(Kn&&Buffer.isBuffer(n)?n.toString("binary"):R0(n),a);case"array":return t(F0(n),a)}throw new Error("Unrecognized type "+a.type)}function t(n,a){var c=a||{},s=c.dense?[]:{},p=n.match(/\\trowd.*?\\row\b/g);if(!p.length)throw new Error("RTF missing table");var g={s:{c:0,r:0},e:{c:0,r:p.length-1}};return p.forEach(function(v,B){Array.isArray(s)&&(s[B]=[]);for(var F=/\\\w+\b/g,C=0,L,P=-1;L=F.exec(v);){switch(L[0]){case"\\cell":var D=v.slice(C,F.lastIndex-L[0].length);if(D[0]==" "&&(D=D.slice(1)),++P,D.length){var j={v:D,t:"s"};Array.isArray(s)?s[B][P]=j:s[an({r:B,c:P})]=j}break}C=F.lastIndex}P>g.e.c&&(g.e.c=P)}),s["!ref"]=Zn(g),s}function r(n,a){return kp(e(n,a),a)}function i(n){for(var a=["{\\rtf1\\ansi"],c=ro(n["!ref"]),s,p=Array.isArray(n),g=c.s.r;g<=c.e.r;++g){a.push("\\trowd\\trautofit1");for(var v=c.s.c;v<=c.e.c;++v)a.push("\\cellx"+(v+1));for(a.push("\\pard\\intbl"),v=c.s.c;v<=c.e.c;++v){var B=an({r:g,c:v});s=p?(n[g]||[])[v]:n[B],!(!s||s.v==null&&(!s.f||s.F))&&(a.push(" "+(s.w||(wf(s),s.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:i}}();function Wre(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Mv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function $re(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.max(t,r,i),a=Math.min(t,r,i),c=n-a;if(c===0)return[0,0,t];var s=0,p=0,g=n+a;switch(p=c/(g>1?2-g:g),n){case t:s=((r-i)/c+6)%6;break;case r:s=(i-t)/c+2;break;case i:s=(t-r)/c+4;break}return[s/6,p,g/2]}function Xre(e){var t=e[0],r=e[1],i=e[2],n=r*2*(i<.5?i:1-i),a=i-n/2,c=[a,a,a],s=6*t,p;if(r!==0)switch(s|0){case 0:case 6:p=n*s,c[0]+=n,c[1]+=p;break;case 1:p=n*(2-s),c[0]+=p,c[1]+=n;break;case 2:p=n*(s-2),c[1]+=n,c[2]+=p;break;case 3:p=n*(4-s),c[1]+=p,c[2]+=n;break;case 4:p=n*(s-4),c[2]+=n,c[0]+=p;break;case 5:p=n*(6-s),c[2]+=p,c[0]+=n;break}for(var g=0;g!=3;++g)c[g]=Math.round(c[g]*255);return c}function i_(e,t){if(t===0)return e;var r=$re(Wre(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Mv(Xre(r))}var fL=6,Zre=15,Yre=1,bu=fL;function n_(e){return Math.floor((e+Math.round(128/bu)/256)*bu)}function s_(e){return Math.floor((e-5)/bu*100+.5)/100}function s4(e){return Math.round((e*bu+5)/bu*256)/256}function Pw(e){return s4(s_(n_(e)))}function LC(e){var t=Math.abs(e-Pw(e)),r=bu;if(t>.005)for(bu=Yre;bu<Zre;++bu)Math.abs(e-Pw(e))<=t&&(t=Math.abs(e-Pw(e)),r=bu);bu=r}function hg(e){e.width?(e.wpx=n_(e.width),e.wch=s_(e.wpx),e.MDW=bu):e.wpx?(e.wch=s_(e.wpx),e.width=s4(e.wch),e.MDW=bu):typeof e.wch=="number"&&(e.width=s4(e.wch),e.wpx=n_(e.width),e.MDW=bu),e.customWidth&&delete e.customWidth}var Jre=96,pL=Jre;function mL(e){return e*96/pL}function Pv(e){return e*pL/96}var eie={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function tie(e,t,r,i){t.Borders=[];var n={},a=!1;(e[0].match(ru)||[]).forEach(function(c){var s=Yi(c);switch(Fd(s[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},s.diagonalUp&&(n.diagonalUp=Na(s.diagonalUp)),s.diagonalDown&&(n.diagonalDown=Na(s.diagonalDown)),t.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i&&i.WTF&&!a)throw new Error("unrecognized "+s[0]+" in borders")}})}function rie(e,t,r,i){t.Fills=[];var n={},a=!1;(e[0].match(ru)||[]).forEach(function(c){var s=Yi(c);switch(Fd(s[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},t.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":s.patternType&&(n.patternType=s.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),s.indexed&&(n.bgColor.indexed=parseInt(s.indexed,10)),s.theme&&(n.bgColor.theme=parseInt(s.theme,10)),s.tint&&(n.bgColor.tint=parseFloat(s.tint)),s.rgb&&(n.bgColor.rgb=s.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),s.theme&&(n.fgColor.theme=parseInt(s.theme,10)),s.tint&&(n.fgColor.tint=parseFloat(s.tint)),s.rgb!=null&&(n.fgColor.rgb=s.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i&&i.WTF&&!a)throw new Error("unrecognized "+s[0]+" in fills")}})}function iie(e,t,r,i){t.Fonts=[];var n={},a=!1;(e[0].match(ru)||[]).forEach(function(c){var s=Yi(c);switch(Fd(s[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(n),n={};break;case"<name":s.val&&(n.name=ha(s.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=s.val?Na(s.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=s.val?Na(s.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(s.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=s.val?Na(s.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=s.val?Na(s.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=s.val?Na(s.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=s.val?Na(s.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=s.val?Na(s.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":s.val&&(n.sz=+s.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":s.val&&(n.vertAlign=s.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":s.val&&(n.family=parseInt(s.val,10));break;case"<family/>":case"</family>":break;case"<scheme":s.val&&(n.scheme=s.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(s.val=="1")break;s.codepage=pC[parseInt(s.val,10)];break;case"<color":if(n.color||(n.color={}),s.auto&&(n.color.auto=Na(s.auto)),s.rgb)n.color.rgb=s.rgb.slice(-6);else if(s.indexed){n.color.index=parseInt(s.indexed,10);var p=b0[n.color.index];n.color.index==81&&(p=b0[1]),p||(p=b0[1]),n.color.rgb=p[0].toString(16)+p[1].toString(16)+p[2].toString(16)}else s.theme&&(n.color.theme=parseInt(s.theme,10),s.tint&&(n.color.tint=parseFloat(s.tint)),s.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=i_(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i&&i.WTF&&!a)throw new Error("unrecognized "+s[0]+" in fonts")}})}function nie(e,t,r){t.NumberFmt=[];for(var i=Sd(dn),n=0;n<i.length;++n)t.NumberFmt[i[n]]=dn[i[n]];var a=e[0].match(ru);if(a)for(n=0;n<a.length;++n){var c=Yi(a[n]);switch(Fd(c[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var s=ts(ha(c.formatCode)),p=parseInt(c.numFmtId,10);if(t.NumberFmt[p]=s,p>0){if(p>392){for(p=392;p>60&&t.NumberFmt[p]!=null;--p);t.NumberFmt[p]=s}_0(s,p)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+c[0]+" in numFmts")}}}var Wy=["numFmtId","fillId","fontId","borderId","xfId"],$y=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function sie(e,t,r){t.CellXf=[];var i,n=!1;(e[0].match(ru)||[]).forEach(function(a){var c=Yi(a),s=0;switch(Fd(c[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(i=c,delete i[0],s=0;s<Wy.length;++s)i[Wy[s]]&&(i[Wy[s]]=parseInt(i[Wy[s]],10));for(s=0;s<$y.length;++s)i[$y[s]]&&(i[$y[s]]=Na(i[$y[s]]));if(t.NumberFmt&&i.numFmtId>392){for(s=392;s>60;--s)if(t.NumberFmt[i.numFmtId]==t.NumberFmt[s]){i.numFmtId=s;break}}t.CellXf.push(i);break;case"</xf>":break;case"<alignment":case"<alignment/>":var p={};c.vertical&&(p.vertical=c.vertical),c.horizontal&&(p.horizontal=c.horizontal),c.textRotation!=null&&(p.textRotation=c.textRotation),c.indent&&(p.indent=c.indent),c.wrapText&&(p.wrapText=Na(c.wrapText)),i.alignment=p;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+c[0]+" in cellXfs")}})}var aie=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(s,p,g){var v={};if(!s)return v;s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var B;return(B=s.match(t))&&nie(B,v,g),(B=s.match(n))&&iie(B,v,p,g),(B=s.match(i))&&rie(B,v,p,g),(B=s.match(a))&&tie(B,v,p,g),(B=s.match(r))&&sie(B,v,g),v}}();function oie(e,t){var r=e.read_shift(2),i=Jc(e);return[r,i]}function lie(e,t,r){var i={};i.sz=e.read_shift(2)/20;var n=vee(e);n.fItalic&&(i.italic=1),n.fCondense&&(i.condense=1),n.fExtend&&(i.extend=1),n.fShadow&&(i.shadow=1),n.fOutline&&(i.outline=1),n.fStrikeout&&(i.strike=1);var a=e.read_shift(2);switch(a===700&&(i.bold=1),e.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var c=e.read_shift(1);c!=0&&(i.underline=c);var s=e.read_shift(1);s>0&&(i.family=s);var p=e.read_shift(1);switch(p>0&&(i.charset=p),e.l++,i.color=gee(e),e.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=Jc(e),i}var cie=tu;function uie(e,t){var r=e.l+t,i=e.read_shift(2),n=e.read_shift(2);return e.l=r,{ixfe:i,numFmtId:n}}var hie=tu;function Aie(e,t,r){var i={};i.NumberFmt=[];for(var n in dn)i.NumberFmt[n]=dn[n];i.CellXf=[],i.Fonts=[];var a=[],c=!1;return Bf(e,function(p,g,v){switch(v){case 44:i.NumberFmt[p[0]]=p[1],_0(p[1],p[0]);break;case 43:i.Fonts.push(p),p.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(p.color.rgb=i_(t.themeElements.clrScheme[p.color.theme].rgb,p.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&i.CellXf.push(p);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:a.push(v),c=!0;break;case 38:a.pop(),c=!1;break;default:if(g.T>0)a.push(v);else if(g.T<0)a.pop();else if(!c||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+v.toString(16))}}),i}var die=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function fie(e,t,r){t.themeElements.clrScheme=[];var i={};(e[0].match(ru)||[]).forEach(function(n){var a=Yi(n);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=a.val;break;case"<a:sysClr":i.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[die.indexOf(a[0])]=i,i={}):i.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function pie(){}function mie(){}var gie=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,vie=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,xie=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function yie(e,t,r){t.themeElements={};var i;[["clrScheme",gie,fie],["fontScheme",vie,pie],["fmtScheme",xie,mie]].forEach(function(n){if(!(i=e.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](i,t,r)})}var _ie=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function gL(e,t){(!e||e.length===0)&&(e=bie());var r,i={};if(!(r=e.match(_ie)))throw new Error("themeElements not found in theme");return yie(r[0],i,t),i.raw=e,i}function bie(e,t){var r=[TI];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function wie(e,t,r){var i=e.l+t,n=e.read_shift(4);if(n!==124226){if(!r.cellStyles){e.l=i;return}var a=e.slice(e.l);e.l=i;var c;try{c=EI(a,{type:"array"})}catch{return}var s=Th(c,"theme/theme/theme1.xml",!0);if(s)return gL(s,r)}}function Cie(e){return e.read_shift(4)}function Bie(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Sie(e,4);break;case 2:t.xclrValue=iL(e);break;case 3:t.xclrValue=Cie(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Sie(e,t){return tu(e,t)}function Eie(e,t){return tu(e,t)}function Tie(e){var t=e.read_shift(2),r=e.read_shift(2)-4,i=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=Bie(e);break;case 6:i[1]=Eie(e,r);break;case 14:case 15:i[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return i}function kie(e,t){var r=e.l+t;e.l+=2;var i=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),a=[];n-- >0;)a.push(Tie(e,r-e.l));return{ixfe:i,ext:a}}function Fie(e,t){t.forEach(function(r){r[0]})}function Nie(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jc(e)}}function Iie(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Lie(e){return e.l+=4,e.read_shift(4)!=0}function Mie(e,t,r){var i={Types:[],Cell:[],Value:[]},n=r||{},a=[],c=!1,s=2;return Bf(e,function(p,g,v){switch(v){case 335:i.Types.push({name:p.name});break;case 51:p.forEach(function(B){s==1?i.Cell.push({type:i.Types[B[0]-1].name,index:B[1]}):s==0&&i.Value.push({type:i.Types[B[0]-1].name,index:B[1]})});break;case 337:s=p?1:0;break;case 338:s=2;break;case 35:a.push(v),c=!0;break;case 36:a.pop(),c=!1;break;default:if(!g.T){if(!c||n.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+v.toString(16))}}}),i}function Pie(e,t,r){var i={Types:[],Cell:[],Value:[]};if(!e)return i;var n=!1,a=2,c;return e.replace(ru,function(s){var p=Yi(s);switch(Fd(p[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":i.Types.push({name:p.name});break;case"</metadataType>":break;case"<futureMetadata":for(var g=0;g<i.Types.length;++g)i.Types[g].name==p.name&&(c=i.Types[g]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?i.Cell.push({type:i.Types[p.t-1].name,index:+p.v}):a==0&&i.Value.push({type:i.Types[p.t-1].name,index:+p.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!c)break;c.offsets||(c.offsets=[]),c.offsets.push(+p.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+p[0]+" in metadata")}return s}),i}function Rie(e){var t=[];if(!e)return t;var r=1;return(e.match(ru)||[]).forEach(function(i){var n=Yi(i);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,t.push(n);break}}),t}function Die(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=an(r);var i=e.read_shift(1);return i&2&&(t.l="1"),i&8&&(t.a="1"),t}function jie(e,t,r){var i=[];return Bf(e,function(a,c,s){switch(s){case 63:i.push(a);break;default:if(!c.T)throw new Error("Unexpected record 0x"+s.toString(16))}}),i}function Uie(e,t,r,i){if(!e)return e;var n=i||{},a=!1;Bf(e,function(s,p,g){switch(g){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!p.T){if(!a||n.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}},n)}function Oie(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}function pk(e,t,r,i){var n=Array.isArray(e),a;t.forEach(function(c){var s=Cu(c.ref);if(n?(e[s.r]||(e[s.r]=[]),a=e[s.r][s.c]):a=e[c.ref],!a){a={t:"z"},n?e[s.r][s.c]=a:e[c.ref]=a;var p=ro(e["!ref"]||"BDWGO1000001:A1");p.s.r>s.r&&(p.s.r=s.r),p.e.r<s.r&&(p.e.r=s.r),p.s.c>s.c&&(p.s.c=s.c),p.e.c<s.c&&(p.e.c=s.c);var g=Zn(p);g!==e["!ref"]&&(e["!ref"]=g)}a.c||(a.c=[]);var v={a:c.author,t:c.t,r:c.r,T:r};c.h&&(v.h=c.h);for(var B=a.c.length-1;B>=0;--B){if(!r&&a.c[B].T)return;r&&!a.c[B].T&&a.c.splice(B,1)}if(r&&i){for(B=0;B<i.length;++B)if(v.a==i[B].id){v.a=i[B].name||v.a;break}}a.c.push(v)})}function zie(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],i=[],n=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(c){if(!(c===""||c.trim()==="")){var s=c.match(/<(?:\w+:)?author[^>]*>(.*)/);s&&r.push(s[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(c){if(!(c===""||c.trim()==="")){var s=c.match(/<(?:\w+:)?comment[^>]*>/);if(s){var p=Yi(s[0]),g={author:p.authorId&&r[p.authorId]||"sheetjsghost",ref:p.ref,guid:p.guid},v=Cu(p.ref);if(!(t.sheetRows&&t.sheetRows<=v.r)){var B=c.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),F=!!B&&!!B[1]&&IC(B[1])||{r:"",t:"",h:""};g.r=F.r,F.r=="<t></t>"&&(F.t=F.h=""),g.t=(F.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(g.h=F.h),i.push(g)}}}}),i}function Qie(e,t){var r=[],i=!1,n={},a=0;return e.replace(ru,function(s,p){var g=Yi(s);switch(Fd(g[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:g.personId,guid:g.id,ref:g.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":a=p+s.length;break;case"</text>":n.t=e.slice(a,p).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":i=!0;break;case"</mentions>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+g[0]+" in threaded comments")}return s}),r}function Hie(e,t){var r=[],i=!1;return e.replace(ru,function(a){var c=Yi(a);switch(Fd(c[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:c.displayname,id:c.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return a}),r}function Vie(e){var t={};t.iauthor=e.read_shift(4);var r=j0(e);return t.rfx=r.s,t.ref=an(r.s),e.l+=16,t}var Gie=Jc;function qie(e,t){var r=[],i=[],n={},a=!1;return Bf(e,function(s,p,g){switch(g){case 632:i.push(s);break;case 635:n=s;break;case 637:n.t=s.t,n.h=s.h,n.r=s.r;break;case 636:if(n.author=i[n.iauthor],delete n.iauthor,t.sheetRows&&n.rfx&&t.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!p.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}}),r}var Kie="application/vnd.ms-office.vbaProject";function Wie(e){var t=Xn.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,i){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Xn.utils.cfb_add(t,n,e.FileIndex[i].content)}}),Xn.write(t)}function $ie(){return{"!type":"dialog"}}function Xie(){return{"!type":"dialog"}}function Zie(){return{"!type":"macro"}}function Yie(){return{"!type":"macro"}}var ng=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(i,n,a,c){var s=!1,p=!1;a.length==0?p=!0:a.charAt(0)=="["&&(p=!0,a=a.slice(1,-1)),c.length==0?s=!0:c.charAt(0)=="["&&(s=!0,c=c.slice(1,-1));var g=a.length>0?parseInt(a,10)|0:0,v=c.length>0?parseInt(c,10)|0:0;return s?v+=t.c:--v,p?g+=t.r:--g,n+(s?"":"$")+gl(v)+(p?"":"$")+gc(g)}return function(n,a){return t=a,n.replace(e,r)}}(),vL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Jie=function(){return function(t,r){return t.replace(vL,function(i,n,a,c,s,p){var g=SC(c)-(a?0:r.c),v=BC(p)-(s?0:r.r),B=v==0?"":s?v+1:"["+v+"]",F=g==0?"":a?g+1:"["+g+"]";return n+"R"+B+"C"+F})}}();function xL(e,t){return e.replace(vL,function(r,i,n,a,c,s){return i+(n=="$"?n+a:gl(SC(a)+t.c))+(c=="$"?c+s:gc(BC(s)+t.r))})}function ene(e,t,r){var i=Cg(t),n=i.s,a=Cu(r),c={r:a.r-n.r,c:a.c-n.c};return xL(e,c)}function tne(e){return e.length!=1}function mk(e){return e.replace(/_xlfn\./g,"")}function Qo(e){e.l+=1}function Sp(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function yL(e,t,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return _L(e);r.biff==12&&(i=4)}var n=e.read_shift(i),a=e.read_shift(i),c=Sp(e),s=Sp(e);return{s:{r:n,c:c[0],cRel:c[1],rRel:c[2]},e:{r:a,c:s[0],cRel:s[1],rRel:s[2]}}}function _L(e){var t=Sp(e),r=Sp(e),i=e.read_shift(1),n=e.read_shift(1);return{s:{r:t[0],c:i,cRel:t[1],rRel:t[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function rne(e,t,r){if(r.biff<8)return _L(e);var i=e.read_shift(r.biff==12?4:2),n=e.read_shift(r.biff==12?4:2),a=Sp(e),c=Sp(e);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:n,c:c[0],cRel:c[1],rRel:c[2]}}}function bL(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return ine(e);var i=e.read_shift(r&&r.biff==12?4:2),n=Sp(e);return{r:i,c:n[0],cRel:n[1],rRel:n[2]}}function ine(e){var t=Sp(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function nne(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function sne(e,t,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return ane(e);var n=e.read_shift(i>=12?4:2),a=e.read_shift(2),c=(a&16384)>>14,s=(a&32768)>>15;if(a&=16383,s==1)for(;n>524287;)n-=1048576;if(c==1)for(;a>8191;)a=a-16384;return{r:n,c:a,cRel:c,rRel:s}}function ane(e){var t=e.read_shift(2),r=e.read_shift(1),i=(t&32768)>>15,n=(t&16384)>>14;return t&=16383,i==1&&t>=8192&&(t=t-16384),n==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:n,rRel:i}}function one(e,t,r){var i=(e[e.l++]&96)>>5,n=yL(e,r.biff>=2&&r.biff<=5?6:8,r);return[i,n]}function lne(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var c=yL(e,a,r);return[i,n,c]}function cne(e,t,r){var i=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function une(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[i,n]}function hne(e,t,r){var i=(e[e.l++]&96)>>5,n=rne(e,t-1,r);return[i,n]}function Ane(e,t,r){var i=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[i]}function gk(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function dne(e,t,r){e.l+=2;for(var i=e.read_shift(r&&r.biff==2?1:2),n=[],a=0;a<=i;++a)n.push(e.read_shift(r&&r.biff==2?1:2));return n}function fne(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=2,[i,e.read_shift(r&&r.biff==2?1:2)]}function pne(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=2,[i,e.read_shift(r&&r.biff==2?1:2)]}function mne(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function gne(e,t,r){var i=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[i]}function wL(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function vne(e){return e.read_shift(2),wL(e)}function xne(e){return e.read_shift(2),wL(e)}function yne(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=bL(e,0,r);return[i,n]}function _ne(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=sne(e,0,r);return[i,n]}function bne(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=bL(e,0,r);return[i,n,a]}function wne(e,t,r){var i=(e[e.l]&96)>>5;e.l+=1;var n=e.read_shift(r&&r.biff<=3?1:2);return[Cse[n],SL[n],i]}function Cne(e,t,r){var i=e[e.l++],n=e.read_shift(1),a=r&&r.biff<=3?[i==88?-1:0,e.read_shift(1)]:Bne(e);return[n,(a[0]===0?SL:wse)[a[1]]]}function Bne(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Sne(e,t,r){e.l+=r&&r.biff==2?3:4}function Ene(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var i=e.read_shift(2),n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function Tne(e){return e.l++,U0[e.read_shift(1)]}function kne(e){return e.l++,e.read_shift(2)}function Fne(e){return e.l++,e.read_shift(1)!==0}function Nne(e){return e.l++,$c(e)}function Ine(e,t,r){return e.l++,Yv(e,t-1,r)}function Lne(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=_o(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=U0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=$c(e);break;case 2:r[1]=O0(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Mne(e,t,r){for(var i=e.read_shift(r.biff==12?4:2),n=[],a=0;a!=i;++a)n.push((r.biff==12?j0:z_)(e));return n}function Pne(e,t,r){var i=0,n=0;r.biff==12?(i=e.read_shift(4),n=e.read_shift(4)):(n=1+e.read_shift(1),i=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--n==0&&(n=256));for(var a=0,c=[];a!=i&&(c[a]=[]);++a)for(var s=0;s!=n;++s)c[a][s]=Lne(e,r.biff);return c}function Rne(e,t,r){var i=e.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,a=e.read_shift(n);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[i,0,a]}function Dne(e,t,r){if(r.biff==5)return jne(e);var i=e.read_shift(1)>>>5&3,n=e.read_shift(2),a=e.read_shift(4);return[i,n,a]}function jne(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var i=e.read_shift(2);return e.l+=12,[t,r,i]}function Une(e,t,r){var i=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function One(e,t,r){var i=e.read_shift(1)>>>5&3,n=e.read_shift(r&&r.biff==2?1:2);return[i,n]}function zne(e,t,r){var i=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[i]}function Qne(e,t,r){var i=(e[e.l++]&96)>>5,n=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[i,n]}var Hne=tu,Vne=tu,Gne=tu;function ex(e,t,r){return e.l+=2,[nne(e)]}function MC(e){return e.l+=6,[]}var qne=ex,Kne=MC,Wne=MC,$ne=ex;function CL(e){return e.l+=2,[Vo(e),e.read_shift(2)&1]}var Xne=ex,Zne=CL,Yne=MC,Jne=ex,ese=ex,tse=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function rse(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),i=e.read_shift(4),n=e.read_shift(2),a=e.read_shift(2),c=tse[r>>2&31];return{ixti:t,coltype:r&3,rt:c,idx:i,c:n,C:a}}function ise(e){return e.l+=2,[e.read_shift(4)]}function nse(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function sse(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function ase(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function ose(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function lse(e){return e.l+=4,[0,0]}var vk={1:{n:"PtgExp",f:Ene},2:{n:"PtgTbl",f:Gne},3:{n:"PtgAdd",f:Qo},4:{n:"PtgSub",f:Qo},5:{n:"PtgMul",f:Qo},6:{n:"PtgDiv",f:Qo},7:{n:"PtgPower",f:Qo},8:{n:"PtgConcat",f:Qo},9:{n:"PtgLt",f:Qo},10:{n:"PtgLe",f:Qo},11:{n:"PtgEq",f:Qo},12:{n:"PtgGe",f:Qo},13:{n:"PtgGt",f:Qo},14:{n:"PtgNe",f:Qo},15:{n:"PtgIsect",f:Qo},16:{n:"PtgUnion",f:Qo},17:{n:"PtgRange",f:Qo},18:{n:"PtgUplus",f:Qo},19:{n:"PtgUminus",f:Qo},20:{n:"PtgPercent",f:Qo},21:{n:"PtgParen",f:Qo},22:{n:"PtgMissArg",f:Qo},23:{n:"PtgStr",f:Ine},26:{n:"PtgSheet",f:nse},27:{n:"PtgEndSheet",f:sse},28:{n:"PtgErr",f:Tne},29:{n:"PtgBool",f:Fne},30:{n:"PtgInt",f:kne},31:{n:"PtgNum",f:Nne},32:{n:"PtgArray",f:Ane},33:{n:"PtgFunc",f:wne},34:{n:"PtgFuncVar",f:Cne},35:{n:"PtgName",f:Rne},36:{n:"PtgRef",f:yne},37:{n:"PtgArea",f:one},38:{n:"PtgMemArea",f:Une},39:{n:"PtgMemErr",f:Hne},40:{n:"PtgMemNoMem",f:Vne},41:{n:"PtgMemFunc",f:One},42:{n:"PtgRefErr",f:zne},43:{n:"PtgAreaErr",f:cne},44:{n:"PtgRefN",f:_ne},45:{n:"PtgAreaN",f:hne},46:{n:"PtgMemAreaN",f:ase},47:{n:"PtgMemNoMemN",f:ose},57:{n:"PtgNameX",f:Dne},58:{n:"PtgRef3d",f:bne},59:{n:"PtgArea3d",f:lne},60:{n:"PtgRefErr3d",f:Qne},61:{n:"PtgAreaErr3d",f:une},255:{}},cse={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},use={1:{n:"PtgElfLel",f:CL},2:{n:"PtgElfRw",f:Jne},3:{n:"PtgElfCol",f:qne},6:{n:"PtgElfRwV",f:ese},7:{n:"PtgElfColV",f:$ne},10:{n:"PtgElfRadical",f:Xne},11:{n:"PtgElfRadicalS",f:Yne},13:{n:"PtgElfColS",f:Kne},15:{n:"PtgElfColSV",f:Wne},16:{n:"PtgElfRadicalLel",f:Zne},25:{n:"PtgList",f:rse},29:{n:"PtgSxName",f:ise},255:{}},hse={0:{n:"PtgAttrNoop",f:lse},1:{n:"PtgAttrSemi",f:gne},2:{n:"PtgAttrIf",f:pne},4:{n:"PtgAttrChoose",f:dne},8:{n:"PtgAttrGoto",f:fne},16:{n:"PtgAttrSum",f:Sne},32:{n:"PtgAttrBaxcel",f:gk},33:{n:"PtgAttrBaxcel",f:gk},64:{n:"PtgAttrSpace",f:vne},65:{n:"PtgAttrSpaceSemi",f:xne},128:{n:"PtgAttrIfError",f:mne},255:{}};function tx(e,t,r,i){if(i.biff<8)return tu(e,t);for(var n=e.l+t,a=[],c=0;c!==r.length;++c)switch(r[c][0]){case"PtgArray":r[c][1]=Pne(e,0,i),a.push(r[c][1]);break;case"PtgMemArea":r[c][2]=Mne(e,r[c][1],i),a.push(r[c][2]);break;case"PtgExp":i&&i.biff==12&&(r[c][1][1]=e.read_shift(4),a.push(r[c][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[c][0]}return t=n-e.l,t!==0&&a.push(tu(e,t)),a}function rx(e,t,r){for(var i=e.l+t,n,a,c=[];i!=e.l;)t=i-e.l,a=e[e.l],n=vk[a]||vk[cse[a]],(a===24||a===25)&&(n=(a===24?use:hse)[e[e.l+1]]),!n||!n.f?tu(e,t):c.push([n.n,n.f(e,t,r)]);return c}function Ase(e){for(var t=[],r=0;r<e.length;++r){for(var i=e[r],n=[],a=0;a<i.length;++a){var c=i[a];if(c)switch(c[0]){case 2:n.push('"'+c[1].replace(/"/g,'""')+'"');break;default:n.push(c[1])}else n.push("")}t.push(n.join(","))}return t.join(";")}var dse={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function fse(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function BL(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var i=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!i)return"SH33TJSERR1";var n="";if(r.biff>8)switch(e[i[0]][0]){case 357:return n=i[1]==-1?"#REF":e.SheetNames[i[1]],i[1]==i[2]?n:n+":"+e.SheetNames[i[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[i[0]][0];case 355:default:return"SH33TJSSRC"+e[i[0]][0]}switch(e[i[0]][0][0]){case 1025:return n=i[1]==-1?"#REF":e.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?n:n+":"+e.SheetNames[i[2]];case 14849:return e[i[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[i[0]][0][3]?(n=i[1]==-1?"#REF":e[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?n:n+":"+e[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function xk(e,t,r){var i=BL(e,t,r);return i=="#REF"?i:fse(i,r)}function Kc(e,t,r,i,n){var a=n&&n.biff||8,c={s:{c:0,r:0}},s=[],p,g,v,B=0,F=0,C,L="";if(!e[0]||!e[0][0])return"";for(var P=-1,D="",j=0,q=e[0].length;j<q;++j){var H=e[0][j];switch(H[0]){case"PtgUminus":s.push("-"+s.pop());break;case"PtgUplus":s.push("+"+s.pop());break;case"PtgPercent":s.push(s.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(p=s.pop(),g=s.pop(),P>=0){switch(e[0][P][1][0]){case 0:D=to(" ",e[0][P][1][1]);break;case 1:D=to("\r",e[0][P][1][1]);break;default:if(D="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][P][1][0])}g=g+D,P=-1}s.push(g+dse[H[0]]+p);break;case"PtgIsect":p=s.pop(),g=s.pop(),s.push(g+" "+p);break;case"PtgUnion":p=s.pop(),g=s.pop(),s.push(g+","+p);break;case"PtgRange":p=s.pop(),g=s.pop(),s.push(g+":"+p);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":v=sv(H[1][1],c,n),s.push(av(v,a));break;case"PtgRefN":v=r?sv(H[1][1],r,n):H[1][1],s.push(av(v,a));break;case"PtgRef3d":B=H[1][1],v=sv(H[1][2],c,n),L=xk(i,B,n),s.push(L+"!"+av(v,a));break;case"PtgFunc":case"PtgFuncVar":var ee=H[1][0],G=H[1][1];ee||(ee=0),ee&=127;var ne=ee==0?[]:s.slice(-ee);s.length-=ee,G==="User"&&(G=ne.shift()),s.push(G+"("+ne.join(",")+")");break;case"PtgBool":s.push(H[1]?"TRUE":"FALSE");break;case"PtgInt":s.push(H[1]);break;case"PtgNum":s.push(String(H[1]));break;case"PtgStr":s.push('"'+H[1].replace(/"/g,'""')+'"');break;case"PtgErr":s.push(H[1]);break;case"PtgAreaN":C=JT(H[1][1],r?{s:r}:c,n),s.push(Lw(C,n));break;case"PtgArea":C=JT(H[1][1],c,n),s.push(Lw(C,n));break;case"PtgArea3d":B=H[1][1],C=H[1][2],L=xk(i,B,n),s.push(L+"!"+Lw(C,n));break;case"PtgAttrSum":s.push("SUM("+s.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":F=H[1][2];var Z=(i.names||[])[F-1]||(i[0]||[])[F],le=Z?Z.Name:"SH33TJSNAME"+String(F);le&&le.slice(0,6)=="_xlfn."&&!n.xlfn&&(le=le.slice(6)),s.push(le);break;case"PtgNameX":var J=H[1][1];F=H[1][2];var ce;if(n.biff<=5)J<0&&(J=-J),i[J]&&(ce=i[J][F]);else{var te="";if(((i[J]||[])[0]||[])[0]==14849||(((i[J]||[])[0]||[])[0]==1025?i[J][F]&&i[J][F].itab>0&&(te=i.SheetNames[i[J][F].itab-1]+"!"):te=i.SheetNames[F-1]+"!"),i[J]&&i[J][F])te+=i[J][F].Name;else if(i[0]&&i[0][F])te+=i[0][F].Name;else{var K=(BL(i,J,n)||"").split(";;");K[F-1]?te=K[F-1]:te+="SH33TJSERRX"}s.push(te);break}ce||(ce={Name:"SH33TJSERRY"}),s.push(ce.Name);break;case"PtgParen":var me="(",we=")";if(P>=0){switch(D="",e[0][P][1][0]){case 2:me=to(" ",e[0][P][1][1])+me;break;case 3:me=to("\r",e[0][P][1][1])+me;break;case 4:we=to(" ",e[0][P][1][1])+we;break;case 5:we=to("\r",e[0][P][1][1])+we;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][P][1][0])}P=-1}s.push(me+s.pop()+we);break;case"PtgRefErr":s.push("#REF!");break;case"PtgRefErr3d":s.push("#REF!");break;case"PtgExp":v={c:H[1][1],r:H[1][0]};var Fe={c:r.c,r:r.r};if(i.sharedf[an(v)]){var he=i.sharedf[an(v)];s.push(Kc(he,c,Fe,i,n))}else{var Le=!1;for(p=0;p!=i.arrayf.length;++p)if(g=i.arrayf[p],!(v.c<g[0].s.c||v.c>g[0].e.c)&&!(v.r<g[0].s.r||v.r>g[0].e.r)){s.push(Kc(g[1],c,Fe,i,n)),Le=!0;break}Le||s.push(H[1])}break;case"PtgArray":s.push("{"+Ase(H[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":P=j;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":s.push("");break;case"PtgAreaErr":s.push("#REF!");break;case"PtgAreaErr3d":s.push("#REF!");break;case"PtgList":s.push("Table"+H[1].idx+"[#"+H[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(H));default:throw new Error("Unrecognized Formula Token: "+String(H))}var $e=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&P>=0&&$e.indexOf(e[0][j][0])==-1){H=e[0][P];var Ne=!0;switch(H[1][0]){case 4:Ne=!1;case 0:D=to(" ",H[1][1]);break;case 5:Ne=!1;case 1:D=to("\r",H[1][1]);break;default:if(D="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+H[1][0])}s.push((Ne?D:"")+s.pop()+(Ne?"":D)),P=-1}}if(s.length>1&&n.WTF)throw new Error("bad formula stack");return s[0]}function pse(e,t,r){var i=e.l+t,n=r.biff==2?1:2,a,c=e.read_shift(n);if(c==65535)return[[],tu(e,t-2)];var s=rx(e,c,r);return t!==c+n&&(a=tx(e,t-c-n,s,r)),e.l=i,[s,a]}function mse(e,t,r){var i=e.l+t,n=r.biff==2?1:2,a,c=e.read_shift(n);if(c==65535)return[[],tu(e,t-2)];var s=rx(e,c,r);return t!==c+n&&(a=tx(e,t-c-n,s,r)),e.l=i,[s,a]}function gse(e,t,r,i){var n=e.l+t,a=rx(e,i,r),c;return n!==e.l&&(c=tx(e,n-e.l,a,r)),[a,c]}function vse(e,t,r){var i=e.l+t,n,a=e.read_shift(2),c=rx(e,a,r);return a==65535?[[],tu(e,t-2)]:(t!==a+2&&(n=tx(e,i-a-2,c,r)),[c,n])}function xse(e){var t;if(df(e,e.l+6)!==65535)return[$c(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Rw(e,t,r){var i=e.l+t,n=Nd(e);r.biff==2&&++e.l;var a=xse(e),c=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var s=mse(e,i-e.l,r);return{cell:n,val:a[0],formula:s,shared:c>>3&1,tt:a[1]}}function Q_(e,t,r){var i=e.read_shift(4),n=rx(e,i,r),a=e.read_shift(4),c=a>0?tx(e,a,n,r):null;return[n,c]}var yse=Q_,H_=Q_,_se=Q_,bse=Q_,wse={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},SL={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Cse={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function yk(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Dw(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var uv={},sg={};function hv(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function EL(e,t,r,i,n,a){try{i.cellNF&&(e.z=dn[t])}catch(s){if(i.WTF)throw s}if(!(e.t==="z"&&!i.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=ql(e.v)),(!i||i.cellText!==!1)&&e.t!=="z")try{if(dn[t]==null&&_0(BJ[t]||"General",t),e.t==="e")e.w=e.w||U0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Fv(e.v);else if(e.t==="d"){var c=Su(e.v);(c|0)===c?e.w=c.toString(10):e.w=Fv(c)}else{if(e.v===void 0)return"";e.w=k0(e.v,sg)}else e.t==="d"?e.w=oA(t,Su(e.v),sg):e.w=oA(t,e.v,sg)}catch(s){if(i.WTF)throw s}if(i.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=i_(n.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),i.WTF&&(e.s.fgColor.raw_rgb=n.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=i_(n.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),i.WTF&&(e.s.bgColor.raw_rgb=n.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(s){if(i.WTF&&a.Fills)throw s}}}function Bse(e,t){var r=ro(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Zn(r))}var Sse=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Ese=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Tse=/<(?:\w:)?hyperlink [^>]*>/mg,kse=/"(\w*:\w*)"/,Fse=/<(?:\w:)?col\b[^>]*[\/]?>/g,Nse=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ise=/<(?:\w:)?pageMargins[^>]*\/>/g,TL=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Lse=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Mse=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Pse(e,t,r,i,n,a,c){if(!e)return e;i||(i={"!id":{}});var s=t.dense?[]:{},p={s:{r:2e6,c:2e6},e:{r:0,c:0}},g="",v="",B=e.match(Ese);B?(g=e.slice(0,B.index),v=e.slice(B.index+B[0].length)):g=v=e;var F=g.match(TL);F?PC(F[0],s,n,r):(F=g.match(Lse))&&Rse(F[0],F[1]||"",s,n,r);var C=(g.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(C>0){var L=g.slice(C,C+50).match(kse);L&&Bse(s,L[1])}var P=g.match(Mse);P&&P[1]&&Qse(P[1],n);var D=[];if(t.cellStyles){var j=g.match(Fse);j&&Use(D,j)}B&&Hse(B[1],s,t,p,a,c);var q=v.match(Nse);q&&(s["!autofilter"]=Ose(q[0]));var H=[],ee=v.match(Sse);if(ee)for(C=0;C!=ee.length;++C)H[C]=ro(ee[C].slice(ee[C].indexOf('"')+1));var G=v.match(Tse);G&&Dse(s,G,i);var ne=v.match(Ise);if(ne&&(s["!margins"]=jse(Yi(ne[0]))),!s["!ref"]&&p.e.c>=p.s.c&&p.e.r>=p.s.r&&(s["!ref"]=Zn(p)),t.sheetRows>0&&s["!ref"]){var Z=ro(s["!ref"]);t.sheetRows<=+Z.e.r&&(Z.e.r=t.sheetRows-1,Z.e.r>p.e.r&&(Z.e.r=p.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>p.e.c&&(Z.e.c=p.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),s["!fullref"]=s["!ref"],s["!ref"]=Zn(Z))}return D.length>0&&(s["!cols"]=D),H.length>0&&(s["!merges"]=H),s}function PC(e,t,r,i){var n=Yi(e);r.Sheets[i]||(r.Sheets[i]={}),n.codeName&&(r.Sheets[i].CodeName=ts(ha(n.codeName)))}function Rse(e,t,r,i,n){PC(e.slice(0,e.indexOf(">")),r,i,n)}function Dse(e,t,r){for(var i=Array.isArray(e),n=0;n!=t.length;++n){var a=Yi(ha(t[n]),!0);if(!a.ref)return;var c=((r||{})["!id"]||[])[a.id];c?(a.Target=c.Target,a.location&&(a.Target+="#"+ts(a.location))):(a.Target="#"+ts(a.location),c={Target:a.Target,TargetMode:"Internal"}),a.Rel=c,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var s=ro(a.ref),p=s.s.r;p<=s.e.r;++p)for(var g=s.s.c;g<=s.e.c;++g){var v=an({c:g,r:p});i?(e[p]||(e[p]=[]),e[p][g]||(e[p][g]={t:"z",v:void 0}),e[p][g].l=a):(e[v]||(e[v]={t:"z",v:void 0}),e[v].l=a)}}}function jse(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Use(e,t){for(var r=!1,i=0;i!=t.length;++i){var n=Yi(t[i],!0);n.hidden&&(n.hidden=Na(n.hidden));var a=parseInt(n.min,10)-1,c=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,LC(n.width)),hg(n);a<=c;)e[a++]=mc(n)}}function Ose(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}var zse=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Qse(e,t){t.Views||(t.Views=[{}]),(e.match(zse)||[]).forEach(function(r,i){var n=Yi(r);t.Views[i]||(t.Views[i]={}),+n.zoomScale&&(t.Views[i].zoom=+n.zoomScale),Na(n.rightToLeft)&&(t.Views[i].RTL=!0)})}var Hse=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,a=Nv("v"),c=Nv("f");return function(p,g,v,B,F,C){for(var L=0,P="",D=[],j=[],q=0,H=0,ee=0,G="",ne,Z,le=0,J=0,ce,te,K=0,me=0,we=Array.isArray(C.CellXf),Fe,he=[],Le=[],$e=Array.isArray(g),Ne=[],Te={},Ge=!1,Y=!!v.sheetStubs,Ae=p.split(t),fe=0,be=Ae.length;fe!=be;++fe){P=Ae[fe].trim();var Me=P.length;if(Me!==0){var ze=0;e:for(L=0;L<Me;++L)switch(P[L]){case">":if(P[L-1]!="/"){++L;break e}if(v&&v.cellStyles){if(Z=Yi(P.slice(ze,L),!0),le=Z.r!=null?parseInt(Z.r,10):le+1,J=-1,v.sheetRows&&v.sheetRows<le)continue;Te={},Ge=!1,Z.ht&&(Ge=!0,Te.hpt=parseFloat(Z.ht),Te.hpx=Pv(Te.hpt)),Z.hidden=="1"&&(Ge=!0,Te.hidden=!0),Z.outlineLevel!=null&&(Ge=!0,Te.level=+Z.outlineLevel),Ge&&(Ne[le-1]=Te)}break;case"<":ze=L;break}if(ze>=L)break;if(Z=Yi(P.slice(ze,L),!0),le=Z.r!=null?parseInt(Z.r,10):le+1,J=-1,!(v.sheetRows&&v.sheetRows<le)){B.s.r>le-1&&(B.s.r=le-1),B.e.r<le-1&&(B.e.r=le-1),v&&v.cellStyles&&(Te={},Ge=!1,Z.ht&&(Ge=!0,Te.hpt=parseFloat(Z.ht),Te.hpx=Pv(Te.hpt)),Z.hidden=="1"&&(Ge=!0,Te.hidden=!0),Z.outlineLevel!=null&&(Ge=!0,Te.level=+Z.outlineLevel),Ge&&(Ne[le-1]=Te)),D=P.slice(L).split(e);for(var We=0;We!=D.length&&D[We].trim().charAt(0)=="<";++We);for(D=D.slice(We),L=0;L!=D.length;++L)if(P=D[L].trim(),P.length!==0){if(j=P.match(r),q=L,H=0,ee=0,P="<c "+(P.slice(0,1)=="<"?">":"")+P,j!=null&&j.length===2){for(q=0,G=j[1],H=0;H!=G.length&&!((ee=G.charCodeAt(H)-64)<1||ee>26);++H)q=26*q+ee;--q,J=q}else++J;for(H=0;H!=P.length&&P.charCodeAt(H)!==62;++H);if(++H,Z=Yi(P.slice(0,H),!0),Z.r||(Z.r=an({r:le-1,c:J})),G=P.slice(H),ne={t:""},(j=G.match(a))!=null&&j[1]!==""&&(ne.v=ts(j[1])),v.cellFormula){if((j=G.match(c))!=null&&j[1]!==""){if(ne.f=ts(ha(j[1])).replace(/\r\n/g,`
`),v.xlfn||(ne.f=mk(ne.f)),j[0].indexOf('t="array"')>-1)ne.F=(G.match(n)||[])[1],ne.F.indexOf(":")>-1&&he.push([ro(ne.F),ne.F]);else if(j[0].indexOf('t="shared"')>-1){te=Yi(j[0]);var ut=ts(ha(j[1]));v.xlfn||(ut=mk(ut)),Le[parseInt(te.si,10)]=[te,ut,Z.r]}}else(j=G.match(/<f[^>]*\/>/))&&(te=Yi(j[0]),Le[te.si]&&(ne.f=ene(Le[te.si][1],Le[te.si][2],Z.r)));var dt=Cu(Z.r);for(H=0;H<he.length;++H)dt.r>=he[H][0].s.r&&dt.r<=he[H][0].e.r&&dt.c>=he[H][0].s.c&&dt.c<=he[H][0].e.c&&(ne.F=he[H][1])}if(Z.t==null&&ne.v===void 0)if(ne.f||ne.F)ne.v=0,ne.t="n";else if(Y)ne.t="z";else continue;else ne.t=Z.t||"n";switch(B.s.c>J&&(B.s.c=J),B.e.c<J&&(B.e.c=J),ne.t){case"n":if(ne.v==""||ne.v==null){if(!Y)continue;ne.t="z"}else ne.v=parseFloat(ne.v);break;case"s":if(typeof ne.v>"u"){if(!Y)continue;ne.t="z"}else ce=uv[parseInt(ne.v,10)],ne.v=ce.t,ne.r=ce.r,v.cellHTML&&(ne.h=ce.h);break;case"str":ne.t="s",ne.v=ne.v!=null?ha(ne.v):"",v.cellHTML&&(ne.h=bC(ne.v));break;case"inlineStr":j=G.match(i),ne.t="s",j!=null&&(ce=IC(j[1]))?(ne.v=ce.t,v.cellHTML&&(ne.h=ce.h)):ne.v="";break;case"b":ne.v=Na(ne.v);break;case"d":v.cellDates?ne.v=ql(ne.v,1):(ne.v=Su(ql(ne.v,1)),ne.t="n");break;case"e":(!v||v.cellText!==!1)&&(ne.w=ne.v),ne.v=$I[ne.v];break}if(K=me=0,Fe=null,we&&Z.s!==void 0&&(Fe=C.CellXf[Z.s],Fe!=null&&(Fe.numFmtId!=null&&(K=Fe.numFmtId),v.cellStyles&&Fe.fillId!=null&&(me=Fe.fillId))),EL(ne,K,me,v,F,C),v.cellDates&&we&&ne.t=="n"&&wg(dn[K])&&(ne.t="d",ne.v=O_(ne.v)),Z.cm&&v.xlmeta){var zt=(v.xlmeta.Cell||[])[+Z.cm-1];zt&&zt.type=="XLDAPR"&&(ne.D=!0)}if($e){var ve=Cu(Z.r);g[ve.r]||(g[ve.r]=[]),g[ve.r][ve.c]=ne}else g[Z.r]=ne}}}}Ne.length>0&&(g["!rows"]=Ne)}}();function Vse(e,t){var r={},i=e.l+t;r.r=e.read_shift(4),e.l+=4;var n=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=i,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=n/20),r}var Gse=j0;function qse(){}function Kse(e,t){var r={},i=e[e.l];return++e.l,r.above=!(i&64),r.left=!(i&128),e.l+=18,r.name=pee(e),r}function Wse(e){var t=lA(e);return[t]}function $se(e){var t=D0(e);return[t]}function Xse(e){var t=lA(e),r=e.read_shift(1);return[t,r,"b"]}function Zse(e){var t=D0(e),r=e.read_shift(1);return[t,r,"b"]}function Yse(e){var t=lA(e),r=e.read_shift(1);return[t,r,"e"]}function Jse(e){var t=D0(e),r=e.read_shift(1);return[t,r,"e"]}function eae(e){var t=lA(e),r=e.read_shift(4);return[t,r,"s"]}function tae(e){var t=D0(e),r=e.read_shift(4);return[t,r,"s"]}function rae(e){var t=lA(e),r=$c(e);return[t,r,"n"]}function kL(e){var t=D0(e),r=$c(e);return[t,r,"n"]}function iae(e){var t=lA(e),r=kC(e);return[t,r,"n"]}function nae(e){var t=D0(e),r=kC(e);return[t,r,"n"]}function sae(e){var t=lA(e),r=EC(e);return[t,r,"is"]}function aae(e){var t=lA(e),r=Jc(e);return[t,r,"str"]}function oae(e){var t=D0(e),r=Jc(e);return[t,r,"str"]}function lae(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=e.read_shift(1),c=[n,a,"b"];if(r.cellFormula){e.l+=2;var s=H_(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}function cae(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=e.read_shift(1),c=[n,a,"e"];if(r.cellFormula){e.l+=2;var s=H_(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}function uae(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=$c(e),c=[n,a,"n"];if(r.cellFormula){e.l+=2;var s=H_(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}function hae(e,t,r){var i=e.l+t,n=lA(e);n.r=r["!row"];var a=Jc(e),c=[n,a,"str"];if(r.cellFormula){e.l+=2;var s=H_(e,i-e.l,r);c[3]=Kc(s,null,n,r.supbooks,r)}else e.l=i;return c}var Aae=j0;function dae(e,t){var r=e.l+t,i=j0(e),n=TC(e),a=Jc(e),c=Jc(e),s=Jc(e);e.l=r;var p={rfx:i,relId:n,loc:a,display:s};return c&&(p.Tooltip=c),p}function fae(){}function pae(e,t,r){var i=e.l+t,n=qI(e),a=e.read_shift(1),c=[n];if(c[2]=a,r.cellFormula){var s=yse(e,i-e.l,r);c[1]=s}else e.l=i;return c}function mae(e,t,r){var i=e.l+t,n=j0(e),a=[n];if(r.cellFormula){var c=bse(e,i-e.l,r);a[1]=c,e.l=i}else e.l=i;return a}var gae=["left","right","top","bottom","header","footer"];function vae(e){var t={};return gae.forEach(function(r){t[r]=$c(e)}),t}function xae(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function yae(){}function _ae(){}function bae(e,t,r,i,n,a,c){if(!e)return e;var s=t||{};i||(i={"!id":{}});var p=s.dense?[]:{},g,v={s:{r:2e6,c:2e6},e:{r:0,c:0}},B=!1,F=!1,C,L,P,D,j,q,H,ee,G,ne=[];s.biff=12,s["!row"]=0;var Z=0,le=!1,J=[],ce={},te=s.supbooks||n.supbooks||[[]];if(te.sharedf=ce,te.arrayf=J,te.SheetNames=n.SheetNames||n.Sheets.map(function($e){return $e.name}),!s.supbooks&&(s.supbooks=te,n.Names))for(var K=0;K<n.Names.length;++K)te[0][K+1]=n.Names[K];var me=[],we=[],Fe=!1;a_[16]={n:"BrtShortReal",f:kL};var he;if(Bf(e,function(Ne,Te,Ge){if(!F)switch(Ge){case 148:g=Ne;break;case 0:C=Ne,s.sheetRows&&s.sheetRows<=C.r&&(F=!0),ee=gc(D=C.r),s["!row"]=C.r,(Ne.hidden||Ne.hpt||Ne.level!=null)&&(Ne.hpt&&(Ne.hpx=Pv(Ne.hpt)),we[Ne.r]=Ne);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(L={t:Ne[2]},Ne[2]){case"n":L.v=Ne[1];break;case"s":H=uv[Ne[1]],L.v=H.t,L.r=H.r;break;case"b":L.v=!!Ne[1];break;case"e":L.v=Ne[1],s.cellText!==!1&&(L.w=U0[L.v]);break;case"str":L.t="s",L.v=Ne[1];break;case"is":L.t="s",L.v=Ne[1].t;break}if((P=c.CellXf[Ne[0].iStyleRef])&&EL(L,P.numFmtId,null,s,a,c),j=Ne[0].c==-1?j+1:Ne[0].c,s.dense?(p[D]||(p[D]=[]),p[D][j]=L):p[gl(j)+ee]=L,s.cellFormula){for(le=!1,Z=0;Z<J.length;++Z){var Y=J[Z];C.r>=Y[0].s.r&&C.r<=Y[0].e.r&&j>=Y[0].s.c&&j<=Y[0].e.c&&(L.F=Zn(Y[0]),le=!0)}!le&&Ne.length>3&&(L.f=Ne[3])}if(v.s.r>C.r&&(v.s.r=C.r),v.s.c>j&&(v.s.c=j),v.e.r<C.r&&(v.e.r=C.r),v.e.c<j&&(v.e.c=j),s.cellDates&&P&&L.t=="n"&&wg(dn[P.numFmtId])){var Ae=d0(L.v);Ae&&(L.t="d",L.v=new Date(Ae.y,Ae.m-1,Ae.d,Ae.H,Ae.M,Ae.S,Ae.u))}he&&(he.type=="XLDAPR"&&(L.D=!0),he=void 0);break;case 1:case 12:if(!s.sheetStubs||B)break;L={t:"z",v:void 0},j=Ne[0].c==-1?j+1:Ne[0].c,s.dense?(p[D]||(p[D]=[]),p[D][j]=L):p[gl(j)+ee]=L,v.s.r>C.r&&(v.s.r=C.r),v.s.c>j&&(v.s.c=j),v.e.r<C.r&&(v.e.r=C.r),v.e.c<j&&(v.e.c=j),he&&(he.type=="XLDAPR"&&(L.D=!0),he=void 0);break;case 176:ne.push(Ne);break;case 49:he=((s.xlmeta||{}).Cell||[])[Ne-1];break;case 494:var fe=i["!id"][Ne.relId];for(fe?(Ne.Target=fe.Target,Ne.loc&&(Ne.Target+="#"+Ne.loc),Ne.Rel=fe):Ne.relId==""&&(Ne.Target="#"+Ne.loc),D=Ne.rfx.s.r;D<=Ne.rfx.e.r;++D)for(j=Ne.rfx.s.c;j<=Ne.rfx.e.c;++j)s.dense?(p[D]||(p[D]=[]),p[D][j]||(p[D][j]={t:"z",v:void 0}),p[D][j].l=Ne):(q=an({c:j,r:D}),p[q]||(p[q]={t:"z",v:void 0}),p[q].l=Ne);break;case 426:if(!s.cellFormula)break;J.push(Ne),G=s.dense?p[D][j]:p[gl(j)+ee],G.f=Kc(Ne[1],v,{r:C.r,c:j},te,s),G.F=Zn(Ne[0]);break;case 427:if(!s.cellFormula)break;ce[an(Ne[0].s)]=Ne[1],G=s.dense?p[D][j]:p[gl(j)+ee],G.f=Kc(Ne[1],v,{r:C.r,c:j},te,s);break;case 60:if(!s.cellStyles)break;for(;Ne.e>=Ne.s;)me[Ne.e--]={width:Ne.w/256,hidden:!!(Ne.flags&1),level:Ne.level},Fe||(Fe=!0,LC(Ne.w/256)),hg(me[Ne.e+1]);break;case 161:p["!autofilter"]={ref:Zn(Ne)};break;case 476:p["!margins"]=Ne;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),Ne.name&&(n.Sheets[r].CodeName=Ne.name),(Ne.above||Ne.left)&&(p["!outline"]={above:Ne.above,left:Ne.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),Ne.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:B=!0;break;case 36:B=!1;break;case 37:B=!0;break;case 38:B=!1;break;default:if(!Te.T){if(!B||s.WTF)throw new Error("Unexpected record 0x"+Ge.toString(16))}}},s),delete s.supbooks,delete s["!row"],!p["!ref"]&&(v.s.r<2e6||g&&(g.e.r>0||g.e.c>0||g.s.r>0||g.s.c>0))&&(p["!ref"]=Zn(g||v)),s.sheetRows&&p["!ref"]){var Le=ro(p["!ref"]);s.sheetRows<=+Le.e.r&&(Le.e.r=s.sheetRows-1,Le.e.r>v.e.r&&(Le.e.r=v.e.r),Le.e.r<Le.s.r&&(Le.s.r=Le.e.r),Le.e.c>v.e.c&&(Le.e.c=v.e.c),Le.e.c<Le.s.c&&(Le.s.c=Le.e.c),p["!fullref"]=p["!ref"],p["!ref"]=Zn(Le))}return ne.length>0&&(p["!merges"]=ne),me.length>0&&(p["!cols"]=me),we.length>0&&(p["!rows"]=we),p}function wae(e){var t=[],r=e.match(/^<c:numCache>/),i;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var c=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);c&&(t[+c[1]]=r?+c[2]:c[2])});var n=ts((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){i=a.replace(/<.*?>/g,"")}),[t,n,i]}function Cae(e,t,r,i,n,a){var c=a||{"!type":"chart"};if(!e)return a;var s=0,p=0,g="A",v={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(B){var F=wae(B);v.s.r=v.s.c=0,v.e.c=s,g=gl(s),F[0].forEach(function(C,L){c[g+gc(L)]={t:"n",v:C,z:F[1]},p=L}),v.e.r<p&&(v.e.r=p),++s}),s>0&&(c["!ref"]=Zn(v)),c}function Bae(e,t,r,i,n){if(!e)return e;i||(i={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},c,s=e.match(TL);return s&&PC(s[0],a,n,r),(c=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=c[1]),i["!id"][a["!rel"]]&&(a["!drawel"]=i["!id"][a["!rel"]]),a}function Sae(e,t){e.l+=10;var r=Jc(e);return{name:r}}function Eae(e,t,r,i,n){if(!e)return e;i||(i={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},c=!1;return Bf(e,function(p,g,v){switch(v){case 550:a["!rel"]=p;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),p.name&&(n.Sheets[r].CodeName=p.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:break;case 38:break;default:if(!(g.T>0)){if(!(g.T<0)){if(!c||t.WTF)throw new Error("Unexpected record 0x"+v.toString(16))}}}},t),i["!id"][a["!rel"]]&&(a["!drawel"]=i["!id"][a["!rel"]]),a}var FL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Tae=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],kae=[],Fae=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function _k(e,t){for(var r=0;r!=e.length;++r)for(var i=e[r],n=0;n!=t.length;++n){var a=t[n];if(i[a[0]]==null)i[a[0]]=a[1];else switch(a[2]){case"bool":typeof i[a[0]]=="string"&&(i[a[0]]=Na(i[a[0]]));break;case"int":typeof i[a[0]]=="string"&&(i[a[0]]=parseInt(i[a[0]],10));break}}}function bk(e,t){for(var r=0;r!=t.length;++r){var i=t[r];if(e[i[0]]==null)e[i[0]]=i[1];else switch(i[2]){case"bool":typeof e[i[0]]=="string"&&(e[i[0]]=Na(e[i[0]]));break;case"int":typeof e[i[0]]=="string"&&(e[i[0]]=parseInt(e[i[0]],10));break}}}function NL(e){bk(e.WBProps,FL),bk(e.CalcPr,Fae),_k(e.WBView,Tae),_k(e.Sheets,kae),sg.date1904=Na(e.WBProps.date1904)}var Nae="][*?/\\".split("");function Iae(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Nae.forEach(function(i){if(e.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var Lae=/<\w+:workbook/;function Mae(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,n="xmlns",a={},c=0;if(e.replace(ru,function(p,g){var v=Yi(p);switch(Fd(v[0])){case"<?xml":break;case"<workbook":p.match(Lae)&&(n="xmlns"+p.match(/<(\w+):/)[1]),r.xmlns=v[n];break;case"</workbook>":break;case"<fileVersion":delete v[0],r.AppVersion=v;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":FL.forEach(function(B){if(v[B[0]]!=null)switch(B[2]){case"bool":r.WBProps[B[0]]=Na(v[B[0]]);break;case"int":r.WBProps[B[0]]=parseInt(v[B[0]],10);break;default:r.WBProps[B[0]]=v[B[0]]}}),v.codeName&&(r.WBProps.CodeName=ha(v.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete v[0],r.WBView.push(v);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(v.state){case"hidden":v.Hidden=1;break;case"veryHidden":v.Hidden=2;break;default:v.Hidden=0}delete v.state,v.name=ts(ha(v.name)),delete v[0],r.Sheets.push(v);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":i=!0;break;case"</definedNames>":i=!1;break;case"<definedName":a={},a.Name=ha(v.name),v.comment&&(a.Comment=v.comment),v.localSheetId&&(a.Sheet=+v.localSheetId),Na(v.hidden||"0")&&(a.Hidden=!0),c=g+p.length;break;case"</definedName>":a.Ref=ts(ha(e.slice(c,g))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete v[0],r.CalcPr=v;break;case"<calcPr/>":delete v[0],r.CalcPr=v;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<revisionPtr":break;default:if(!i&&t.WTF)throw new Error("unrecognized "+v[0]+" in workbook")}return p}),YJ.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return NL(r),r}function Pae(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=r4(e),r.name=Jc(e),r}function Rae(e,t){var r={},i=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var n=t>8?Jc(e):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function Dae(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function jae(e,t,r){var i=e.l+t;e.l+=4,e.l+=1;var n=e.read_shift(4),a=mee(e),c=_se(e,0,r),s=TC(e);e.l=i;var p={Name:a,Ptg:c};return n<268435455&&(p.Sheet=n),s&&(p.Comment=s),p}function Uae(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],n=!1;t||(t={}),t.biff=12;var a=[],c=[[]];return c.SheetNames=[],c.XTI=[],a_[16]={n:"BrtFRTArchID$",f:Dae},Bf(e,function(p,g,v){switch(v){case 156:c.SheetNames.push(p.name),r.Sheets.push(p);break;case 153:r.WBProps=p;break;case 39:p.Sheet!=null&&(t.SID=p.Sheet),p.Ref=Kc(p.Ptg,null,null,c,t),delete t.SID,delete p.Ptg,a.push(p);break;case 1036:break;case 357:case 358:case 355:case 667:c[0].length?c.push([v,p]):c[0]=[v,p],c[c.length-1].XTI=[];break;case 362:c.length===0&&(c[0]=[],c[0].XTI=[]),c[c.length-1].XTI=c[c.length-1].XTI.concat(p),c.XTI=c.XTI.concat(p);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:i.push(v),n=!0;break;case 36:i.pop(),n=!1;break;case 37:i.push(v),n=!0;break;case 38:i.pop(),n=!1;break;case 16:break;default:if(!g.T){if(!n||t.WTF&&i[i.length-1]!=37&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+v.toString(16))}}},t),NL(r),r.Names=a,r.supbooks=c,r}function Oae(e,t,r){return t.slice(-4)===".bin"?Uae(e,r):Mae(e,r)}function zae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?bae(e,i,r,n,a,c,s):Pse(e,i,r,n,a,c,s)}function Qae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?Eae(e,i,r,n,a):Bae(e,i,r,n,a)}function Hae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?Zie():Yie()}function Vae(e,t,r,i,n,a,c,s){return t.slice(-4)===".bin"?$ie():Xie()}function Gae(e,t,r,i){return t.slice(-4)===".bin"?Aie(e,r,i):aie(e,r,i)}function qae(e,t,r){return gL(e,r)}function Kae(e,t,r){return t.slice(-4)===".bin"?Tre(e,r):Sre(e,r)}function Wae(e,t,r){return t.slice(-4)===".bin"?qie(e,r):zie(e,r)}function $ae(e,t,r){return t.slice(-4)===".bin"?jie(e):Rie(e)}function Xae(e,t,r,i){return r.slice(-4)===".bin"?Uie(e,t,r,i):void 0}function Zae(e,t,r){return t.slice(-4)===".bin"?Mie(e,t,r):Pie(e,t,r)}var IL=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,LL=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function PA(e,t){var r=e.split(/\s+/),i=[];if(i[0]=r[0],r.length===1)return i;var n=e.match(IL),a,c,s,p;if(n)for(p=0;p!=n.length;++p)a=n[p].match(LL),(c=a[1].indexOf(":"))===-1?i[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?s="xmlns"+a[1].slice(6):s=a[1].slice(c+1),i[s]=a[2].slice(1,a[2].length-1));return i}function Yae(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var i=e.match(IL),n,a,c,s;if(i)for(s=0;s!=i.length;++s)n=i[s].match(LL),(a=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?c="xmlns"+n[1].slice(6):c=n[1].slice(a+1),r[c]=n[2].slice(1,n[2].length-1));return r}var Av;function Jae(e,t){var r=Av[e]||ts(e);return r==="General"?k0(t):oA(r,t)}function eoe(e,t,r,i){var n=i;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=Na(i);break;case"i2":case"int":n=parseInt(i,10);break;case"r4":case"float":n=parseFloat(i);break;case"date":case"dateTime.tz":n=ql(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[ts(t)]=n}function toe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||U0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Fv(e.v):e.w=k0(e.v):e.w=Jae(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var i=Av[t]||t||"General";if(r.cellNF&&(e.z=i),r.cellDates&&e.t=="n"&&wg(i)){var n=d0(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(a){if(r.WTF)throw a}}}function roe(e,t,r){if(r.cellStyles&&t.Interior){var i=t.Interior;i.Pattern&&(i.patternType=eie[i.Pattern]||i.Pattern)}e[t.ID]=t}function ioe(e,t,r,i,n,a,c,s,p,g){var v="General",B=i.StyleID,F={};g=g||{};var C=[],L=0;for(B===void 0&&s&&(B=s.StyleID),B===void 0&&c&&(B=c.StyleID);a[B]!==void 0&&(a[B].nf&&(v=a[B].nf),a[B].Interior&&C.push(a[B].Interior),!!a[B].Parent);)B=a[B].Parent;switch(r.Type){case"Boolean":i.t="b",i.v=Na(e);break;case"String":i.t="s",i.r=VT(ts(e)),i.v=e.indexOf("<")>-1?ts(t||e).replace(/<.*?>/g,""):i.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),i.v=(ql(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),i.v!==i.v?i.v=ts(e):i.v<60&&(i.v=i.v-1),(!v||v=="General")&&(v="yyyy-mm-dd");case"Number":i.v===void 0&&(i.v=+e),i.t||(i.t="n");break;case"Error":i.t="e",i.v=$I[e],g.cellText!==!1&&(i.w=e);break;default:e==""&&t==""?i.t="z":(i.t="s",i.v=VT(t||e));break}if(toe(i,v,g),g.cellFormula!==!1)if(i.Formula){var P=ts(i.Formula);P.charCodeAt(0)==61&&(P=P.slice(1)),i.f=ng(P,n),delete i.Formula,i.ArrayRange=="RC"?i.F=ng("RC:RC",n):i.ArrayRange&&(i.F=ng(i.ArrayRange,n),p.push([ro(i.F),i.F]))}else for(L=0;L<p.length;++L)n.r>=p[L][0].s.r&&n.r<=p[L][0].e.r&&n.c>=p[L][0].s.c&&n.c<=p[L][0].e.c&&(i.F=p[L][1]);g.cellStyles&&(C.forEach(function(D){!F.patternType&&D.patternType&&(F.patternType=D.patternType)}),i.s=F),i.StyleID!==void 0&&(i.ixfe=i.StyleID)}function noe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function jw(e,t){var r=t||{};_I();var i=Q1(wC(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(i=ha(i));var n=i.slice(0,1024).toLowerCase(),a=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var c=mc(r);return c.type="string",Lv.to_workbook(i,c)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(jr){n.indexOf("<"+jr)>=0&&(a=!0)}),a)return doe(i,r);Av={"General Number":"General","General Date":dn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":dn[15],"Short Date":dn[14],"Long Time":dn[19],"Medium Time":dn[18],"Short Time":dn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:dn[2],Standard:dn[4],Percent:dn[10],Scientific:dn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var s,p=[],g,v={},B=[],F=r.dense?[]:{},C="",L={},P={},D=PA('<Data ss:Type="String">'),j=0,q=0,H=0,ee={s:{r:2e6,c:2e6},e:{r:0,c:0}},G={},ne={},Z="",le=0,J=[],ce={},te={},K=0,me=[],we=[],Fe={},he=[],Le,$e=!1,Ne=[],Te=[],Ge={},Y=0,Ae=0,fe={Sheets:[],WBProps:{date1904:!1}},be={};Iv.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"");for(var Me="";s=Iv.exec(i);)switch(s[3]=(Me=s[3]).toLowerCase()){case"data":if(Me=="data"){if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&p.push([s[3],!0]);break}if(p[p.length-1][1])break;s[1]==="/"?ioe(i.slice(j,s.index),Z,D,p[p.length-1][0]=="comment"?Fe:L,{c:q,r:H},G,he[q],P,Ne,r):(Z="",D=PA(s[0]),j=s.index+s[0].length);break;case"cell":if(s[1]==="/")if(we.length>0&&(L.c=we),(!r.sheetRows||r.sheetRows>H)&&L.v!==void 0&&(r.dense?(F[H]||(F[H]=[]),F[H][q]=L):F[gl(q)+gc(H)]=L),L.HRef&&(L.l={Target:ts(L.HRef)},L.HRefScreenTip&&(L.l.Tooltip=L.HRefScreenTip),delete L.HRef,delete L.HRefScreenTip),(L.MergeAcross||L.MergeDown)&&(Y=q+(parseInt(L.MergeAcross,10)|0),Ae=H+(parseInt(L.MergeDown,10)|0),J.push({s:{c:q,r:H},e:{c:Y,r:Ae}})),!r.sheetStubs)L.MergeAcross?q=Y+1:++q;else if(L.MergeAcross||L.MergeDown){for(var ze=q;ze<=Y;++ze)for(var We=H;We<=Ae;++We)(ze>q||We>H)&&(r.dense?(F[We]||(F[We]=[]),F[We][ze]={t:"z"}):F[gl(ze)+gc(We)]={t:"z"});q=Y+1}else++q;else L=Yae(s[0]),L.Index&&(q=+L.Index-1),q<ee.s.c&&(ee.s.c=q),q>ee.e.c&&(ee.e.c=q),s[0].slice(-2)==="/>"&&++q,we=[];break;case"row":s[1]==="/"||s[0].slice(-2)==="/>"?(H<ee.s.r&&(ee.s.r=H),H>ee.e.r&&(ee.e.r=H),s[0].slice(-2)==="/>"&&(P=PA(s[0]),P.Index&&(H=+P.Index-1)),q=0,++H):(P=PA(s[0]),P.Index&&(H=+P.Index-1),Ge={},(P.AutoFitHeight=="0"||P.Height)&&(Ge.hpx=parseInt(P.Height,10),Ge.hpt=mL(Ge.hpx),Te[H]=Ge),P.Hidden=="1"&&(Ge.hidden=!0,Te[H]=Ge));break;case"worksheet":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"));B.push(C),ee.s.r<=ee.e.r&&ee.s.c<=ee.e.c&&(F["!ref"]=Zn(ee),r.sheetRows&&r.sheetRows<=ee.e.r&&(F["!fullref"]=F["!ref"],ee.e.r=r.sheetRows-1,F["!ref"]=Zn(ee))),J.length&&(F["!merges"]=J),he.length>0&&(F["!cols"]=he),Te.length>0&&(F["!rows"]=Te),v[C]=F}else ee={s:{r:2e6,c:2e6},e:{r:0,c:0}},H=q=0,p.push([s[3],!1]),g=PA(s[0]),C=ts(g.Name),F=r.dense?[]:{},J=[],Ne=[],Te=[],be={name:C,Hidden:0},fe.Sheets.push(be);break;case"table":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else{if(s[0].slice(-2)=="/>")break;p.push([s[3],!1]),he=[],$e=!1}break;case"style":s[1]==="/"?roe(G,ne,r):ne=PA(s[0]);break;case"numberformat":ne.nf=ts(PA(s[0]).Format||"General"),Av[ne.nf]&&(ne.nf=Av[ne.nf]);for(var ut=0;ut!=392&&dn[ut]!=ne.nf;++ut);if(ut==392){for(ut=57;ut!=392;++ut)if(dn[ut]==null){_0(ne.nf,ut);break}}break;case"column":if(p[p.length-1][0]!=="table")break;if(Le=PA(s[0]),Le.Hidden&&(Le.hidden=!0,delete Le.Hidden),Le.Width&&(Le.wpx=parseInt(Le.Width,10)),!$e&&Le.wpx>10){$e=!0,bu=fL;for(var dt=0;dt<he.length;++dt)he[dt]&&hg(he[dt])}$e&&hg(Le),he[Le.Index-1||he.length]=Le;for(var zt=0;zt<+Le.Span;++zt)he[he.length]=mc(Le);break;case"namedrange":if(s[1]==="/")break;fe.Names||(fe.Names=[]);var ve=Yi(s[0]),Ct={Name:ve.Name,Ref:ng(ve.RefersTo.slice(1),{r:0,c:0})};fe.Sheets.length>0&&(Ct.Sheet=fe.Sheets.length-1),fe.Names.push(Ct);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(s[0].slice(-2)==="/>")break;s[1]==="/"?Z+=i.slice(le,s.index):le=s.index+s[0].length;break;case"interior":if(!r.cellStyles)break;ne.Interior=PA(s[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(s[0].slice(-2)==="/>")break;s[1]==="/"?zee(ce,Me,i.slice(K,s.index)):K=s.index+s[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else p.push([s[3],!1]);break;case"comment":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"));noe(Fe),we.push(Fe)}else p.push([s[3],!1]),g=PA(s[0]),Fe={a:g.Author};break;case"autofilter":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else if(s[0].charAt(s[0].length-2)!=="/"){var Pt=PA(s[0]);F["!autofilter"]={ref:ng(Pt.Range).replace(/\$/g,"")},p.push([s[3],!0])}break;case"name":break;case"datavalidation":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&p.push([s[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(s[1]==="/"){if((g=p.pop())[0]!==s[3])throw new Error("Bad state: "+g.join("|"))}else s[0].charAt(s[0].length-2)!=="/"&&p.push([s[3],!0]);break;case"null":break;default:if(p.length==0&&s[3]=="document"||p.length==0&&s[3]=="uof")return Tk(i,r);var Ve=!0;switch(p[p.length-1][0]){case"officedocumentsettings":switch(s[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ve=!1}break;case"componentoptions":switch(s[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ve=!1}break;case"excelworkbook":switch(s[3]){case"date1904":fe.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ve=!1}break;case"workbookoptions":switch(s[3]){case"owcversion":break;case"height":break;case"width":break;default:Ve=!1}break;case"worksheetoptions":switch(s[3]){case"visible":if(s[0].slice(-2)!=="/>")if(s[1]==="/")switch(i.slice(K,s.index)){case"SheetHidden":be.Hidden=1;break;case"SheetVeryHidden":be.Hidden=2;break}else K=s.index+s[0].length;break;case"header":F["!margins"]||hv(F["!margins"]={},"xlml"),isNaN(+Yi(s[0]).Margin)||(F["!margins"].header=+Yi(s[0]).Margin);break;case"footer":F["!margins"]||hv(F["!margins"]={},"xlml"),isNaN(+Yi(s[0]).Margin)||(F["!margins"].footer=+Yi(s[0]).Margin);break;case"pagemargins":var lr=Yi(s[0]);F["!margins"]||hv(F["!margins"]={},"xlml"),isNaN(+lr.Top)||(F["!margins"].top=+lr.Top),isNaN(+lr.Left)||(F["!margins"].left=+lr.Left),isNaN(+lr.Right)||(F["!margins"].right=+lr.Right),isNaN(+lr.Bottom)||(F["!margins"].bottom=+lr.Bottom);break;case"displayrighttoleft":fe.Views||(fe.Views=[]),fe.Views[0]||(fe.Views[0]={}),fe.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":F["!outline"]||(F["!outline"]={}),F["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":F["!outline"]||(F["!outline"]={}),F["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ve=!1}break;case"pivottable":case"pivotcache":switch(s[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ve=!1}break;case"pagebreaks":switch(s[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ve=!1}break;case"autofilter":switch(s[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ve=!1}break;case"querytable":switch(s[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ve=!1}break;case"datavalidation":switch(s[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ve=!1}break;case"sorting":case"conditionalformatting":switch(s[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ve=!1}break;case"mapinfo":case"schema":case"data":switch(s[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ve=!1}break;case"smarttags":break;default:Ve=!1;break}if(Ve||s[3].match(/!\[CDATA/))break;if(!p[p.length-1][1])throw"Unrecognized tag: "+s[3]+"|"+p.join("|");if(p[p.length-1][0]==="customdocumentproperties"){if(s[0].slice(-2)==="/>")break;s[1]==="/"?eoe(te,Me,me,i.slice(K,s.index)):(me=s,K=s.index+s[0].length);break}if(r.WTF)throw"Unrecognized tag: "+s[3]+"|"+p.join("|")}var ir={};return!r.bookSheets&&!r.bookProps&&(ir.Sheets=v),ir.SheetNames=B,ir.Workbook=fe,ir.SSF=mc(dn),ir.Props=ce,ir.Custprops=te,ir}function a4(e,t){switch(jC(t=t||{}),t.type||"base64"){case"base64":return jw(Fh(e),t);case"binary":case"buffer":case"file":return jw(e,t);case"array":return jw(R0(e),t)}}function soe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=xee(r),r.length-r.l<=4)return t;var i=r.read_shift(4);if(i==0||i>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(i=r.read_shift(4),i!==1907505652)||(t.UnicodeClipboardFormat=yee(r),i=r.read_shift(4),i==0||i>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var aoe=[60,1084,2066,2165,2175];function ooe(e,t,r,i,n){var a=i,c=[],s=r.slice(r.l,r.l+a);if(n&&n.enc&&n.enc.insitu&&s.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(s)}c.push(s),r.l+=a;for(var p=df(r,r.l),g=o4[p],v=0;g!=null&&aoe.indexOf(p)>-1;)a=df(r,r.l+2),v=r.l+4,p==2066?v+=4:(p==2165||p==2175)&&(v+=12),s=r.slice(v,r.l+4+a),c.push(s),r.l+=4+a,g=o4[p=df(r,r.l)];var B=ap(c);dc(B,0);var F=0;B.lens=[];for(var C=0;C<c.length;++C)B.lens.push(F),F+=c[C].length;if(B.length<i)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+B.length+" < "+i;return t.f(B,B.length,n)}function gd(e,t,r){if(e.t!=="z"&&e.XF){var i=0;try{i=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=dn[i])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||U0[e.v]:i===0||i=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Fv(e.v):e.w=k0(e.v):e.w=oA(i,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&i&&e.t=="n"&&wg(dn[i]||String(i))){var n=d0(e.v);n&&(e.t="d",e.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function Xy(e,t,r){return{v:e,ixfe:t,t:r}}function loe(e,t){var r={opts:{}},i={},n=t.dense?[]:{},a={},c={},s=null,p=[],g="",v={},B,F="",C,L,P,D,j={},q=[],H,ee,G=[],ne=[],Z={Sheets:[],WBProps:{date1904:!1},Views:[{}]},le={},J=function(ye){return ye<8?b0[ye]:ye<64&&ne[ye-8]||b0[ye]},ce=function(ye,Ce,Re){var Ze=Ce.XF.data;if(!(!Ze||!Ze.patternType||!Re||!Re.cellStyles)){Ce.s={},Ce.s.patternType=Ze.patternType;var ot;(ot=Mv(J(Ze.icvFore)))&&(Ce.s.fgColor={rgb:ot}),(ot=Mv(J(Ze.icvBack)))&&(Ce.s.bgColor={rgb:ot})}},te=function(ye,Ce,Re){if(!(Ge>1)&&!(Re.sheetRows&&ye.r>=Re.sheetRows)){if(Re.cellStyles&&Ce.XF&&Ce.XF.data&&ce(ye,Ce,Re),delete Ce.ixfe,delete Ce.XF,B=ye,F=an(ye),(!c||!c.s||!c.e)&&(c={s:{r:0,c:0},e:{r:0,c:0}}),ye.r<c.s.r&&(c.s.r=ye.r),ye.c<c.s.c&&(c.s.c=ye.c),ye.r+1>c.e.r&&(c.e.r=ye.r+1),ye.c+1>c.e.c&&(c.e.c=ye.c+1),Re.cellFormula&&Ce.f){for(var Ze=0;Ze<q.length;++Ze)if(!(q[Ze][0].s.c>ye.c||q[Ze][0].s.r>ye.r)&&!(q[Ze][0].e.c<ye.c||q[Ze][0].e.r<ye.r)){Ce.F=Zn(q[Ze][0]),(q[Ze][0].s.c!=ye.c||q[Ze][0].s.r!=ye.r)&&delete Ce.f,Ce.f&&(Ce.f=""+Kc(q[Ze][1],c,ye,Ne,K));break}}Re.dense?(n[ye.r]||(n[ye.r]=[]),n[ye.r][ye.c]=Ce):n[F]=Ce}},K={enc:!1,sbcch:0,snames:[],sharedf:j,arrayf:q,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(K.password=t.password);var me,we=[],Fe=[],he=[],Le=[],$e=!1,Ne=[];Ne.SheetNames=K.snames,Ne.sharedf=K.sharedf,Ne.arrayf=K.arrayf,Ne.names=[],Ne.XTI=[];var Te=0,Ge=0,Y=0,Ae=[],fe=[],be;K.codepage=1200,OA(1200);for(var Me=!1;e.l<e.length-1;){var ze=e.l,We=e.read_shift(2);if(We===0&&Te===10)break;var ut=e.l===e.length?0:e.read_shift(2),dt=o4[We];if(dt&&dt.f){if(t.bookSheets&&Te===133&&We!==133)break;if(Te=We,dt.r===2||dt.r==12){var zt=e.read_shift(2);if(ut-=2,!K.enc&&zt!==We&&((zt&255)<<8|zt>>8)!==We)throw new Error("rt mismatch: "+zt+"!="+We);dt.r==12&&(e.l+=10,ut-=10)}var ve={};if(We===10?ve=dt.f(e,ut,K):ve=ooe(We,dt,e,ut,K),Ge==0&&[9,521,1033,2057].indexOf(Te)===-1)continue;switch(We){case 34:r.opts.Date1904=Z.WBProps.date1904=ve;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(K.enc||(e.l=0),K.enc=ve,!t.password)throw new Error("File is password-protected");if(ve.valid==null)throw new Error("Encryption scheme unsupported");if(!ve.valid)throw new Error("Password is incorrect");break;case 92:K.lastuser=ve;break;case 66:var Ct=Number(ve);switch(Ct){case 21010:Ct=1200;break;case 32768:Ct=1e4;break;case 32769:Ct=1252;break}OA(K.codepage=Ct),Me=!0;break;case 317:K.rrtabid=ve;break;case 25:K.winlocked=ve;break;case 439:r.opts.RefreshAll=ve;break;case 12:r.opts.CalcCount=ve;break;case 16:r.opts.CalcDelta=ve;break;case 17:r.opts.CalcIter=ve;break;case 13:r.opts.CalcMode=ve;break;case 14:r.opts.CalcPrecision=ve;break;case 95:r.opts.CalcSaveRecalc=ve;break;case 15:K.CalcRefMode=ve;break;case 2211:r.opts.FullCalc=ve;break;case 129:ve.fDialog&&(n["!type"]="dialog"),ve.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),ve.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:G.push(ve);break;case 430:Ne.push([ve]),Ne[Ne.length-1].XTI=[];break;case 35:case 547:Ne[Ne.length-1].push(ve);break;case 24:case 536:be={Name:ve.Name,Ref:Kc(ve.rgce,c,null,Ne,K)},ve.itab>0&&(be.Sheet=ve.itab-1),Ne.names.push(be),Ne[0]||(Ne[0]=[],Ne[0].XTI=[]),Ne[Ne.length-1].push(ve),ve.Name=="_xlnm._FilterDatabase"&&ve.itab>0&&ve.rgce&&ve.rgce[0]&&ve.rgce[0][0]&&ve.rgce[0][0][0]=="PtgArea3d"&&(fe[ve.itab-1]={ref:Zn(ve.rgce[0][0][1][2])});break;case 22:K.ExternCount=ve;break;case 23:Ne.length==0&&(Ne[0]=[],Ne[0].XTI=[]),Ne[Ne.length-1].XTI=Ne[Ne.length-1].XTI.concat(ve),Ne.XTI=Ne.XTI.concat(ve);break;case 2196:if(K.biff<8)break;be!=null&&(be.Comment=ve[1]);break;case 18:n["!protect"]=ve;break;case 19:ve!==0&&K.WTF&&console.error("Password verifier: "+ve);break;case 133:a[ve.pos]=ve,K.snames.push(ve.name);break;case 10:{if(--Ge)break;if(c.e){if(c.e.r>0&&c.e.c>0){if(c.e.r--,c.e.c--,n["!ref"]=Zn(c),t.sheetRows&&t.sheetRows<=c.e.r){var Pt=c.e.r;c.e.r=t.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=Zn(c),c.e.r=Pt}c.e.r++,c.e.c++}we.length>0&&(n["!merges"]=we),Fe.length>0&&(n["!objects"]=Fe),he.length>0&&(n["!cols"]=he),Le.length>0&&(n["!rows"]=Le),Z.Sheets.push(le)}g===""?v=n:i[g]=n,n=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(K.biff===8&&(K.biff={9:2,521:3,1033:4}[We]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ve.BIFFVer]||8),K.biffguess=ve.BIFFVer==0,ve.BIFFVer==0&&ve.dt==4096&&(K.biff=5,Me=!0,OA(K.codepage=28591)),K.biff==8&&ve.BIFFVer==0&&ve.dt==16&&(K.biff=2),Ge++)break;if(n=t.dense?[]:{},K.biff<8&&!Me&&(Me=!0,OA(K.codepage=t.codepage||1252)),K.biff<5||ve.BIFFVer==0&&ve.dt==4096){g===""&&(g="Sheet1"),c={s:{r:0,c:0},e:{r:0,c:0}};var Ve={pos:e.l-ut,name:g};a[Ve.pos]=Ve,K.snames.push(g)}else g=(a[ze]||{name:""}).name;ve.dt==32&&(n["!type"]="chart"),ve.dt==64&&(n["!type"]="macro"),we=[],Fe=[],K.arrayf=q=[],he=[],Le=[],$e=!1,le={Hidden:(a[ze]||{hs:0}).hs,name:g}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(t.dense?(n[ve.r]||[])[ve.c]:n[an({c:ve.c,r:ve.r})])&&++ve.c,H={ixfe:ve.ixfe,XF:G[ve.ixfe]||{},v:ve.val,t:"n"},Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:ve.c,r:ve.r},H,t);break;case 5:case 517:H={ixfe:ve.ixfe,XF:G[ve.ixfe],v:ve.val,t:ve.t},Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:ve.c,r:ve.r},H,t);break;case 638:H={ixfe:ve.ixfe,XF:G[ve.ixfe],v:ve.rknum,t:"n"},Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:ve.c,r:ve.r},H,t);break;case 189:for(var lr=ve.c;lr<=ve.C;++lr){var ir=ve.rkrec[lr-ve.c][0];H={ixfe:ir,XF:G[ir],v:ve.rkrec[lr-ve.c][1],t:"n"},Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:lr,r:ve.r},H,t)}break;case 6:case 518:case 1030:{if(ve.val=="String"){s=ve;break}if(H=Xy(ve.val,ve.cell.ixfe,ve.tt),H.XF=G[H.ixfe],t.cellFormula){var jr=ve.formula;if(jr&&jr[0]&&jr[0][0]&&jr[0][0][0]=="PtgExp"){var ar=jr[0][0][1][0],Wr=jr[0][0][1][1],Lr=an({r:ar,c:Wr});j[Lr]?H.f=""+Kc(ve.formula,c,ve.cell,Ne,K):H.F=((t.dense?(n[ar]||[])[Wr]:n[Lr])||{}).F}else H.f=""+Kc(ve.formula,c,ve.cell,Ne,K)}Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te(ve.cell,H,t),s=ve}break;case 7:case 519:if(s)s.val=ve,H=Xy(ve,s.cell.ixfe,"s"),H.XF=G[H.ixfe],t.cellFormula&&(H.f=""+Kc(s.formula,c,s.cell,Ne,K)),Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te(s.cell,H,t),s=null;else throw new Error("String record expects Formula");break;case 33:case 545:{q.push(ve);var Zr=an(ve[0].s);if(C=t.dense?(n[ve[0].s.r]||[])[ve[0].s.c]:n[Zr],t.cellFormula&&C){if(!s||!Zr||!C)break;C.f=""+Kc(ve[1],c,ve[0],Ne,K),C.F=Zn(ve[0])}}break;case 1212:{if(!t.cellFormula)break;if(F){if(!s)break;j[an(s.cell)]=ve[0],C=t.dense?(n[s.cell.r]||[])[s.cell.c]:n[an(s.cell)],(C||{}).f=""+Kc(ve[0],c,B,Ne,K)}}break;case 253:H=Xy(p[ve.isst].t,ve.ixfe,"s"),p[ve.isst].h&&(H.h=p[ve.isst].h),H.XF=G[H.ixfe],Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:ve.c,r:ve.r},H,t);break;case 513:t.sheetStubs&&(H={ixfe:ve.ixfe,XF:G[ve.ixfe],t:"z"},Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:ve.c,r:ve.r},H,t));break;case 190:if(t.sheetStubs)for(var qr=ve.c;qr<=ve.C;++qr){var wi=ve.ixfe[qr-ve.c];H={ixfe:wi,XF:G[wi],t:"z"},Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:qr,r:ve.r},H,t)}break;case 214:case 516:case 4:H=Xy(ve.val,ve.ixfe,"s"),H.XF=G[H.ixfe],Y>0&&(H.z=Ae[H.ixfe>>8&63]),gd(H,t,r.opts.Date1904),te({c:ve.c,r:ve.r},H,t);break;case 0:case 512:Ge===1&&(c=ve);break;case 252:p=ve;break;case 1054:if(K.biff==4){Ae[Y++]=ve[1];for(var Ci=0;Ci<Y+163&&dn[Ci]!=ve[1];++Ci);Ci>=163&&_0(ve[1],Y+163)}else _0(ve[1],ve[0]);break;case 30:{Ae[Y++]=ve;for(var $t=0;$t<Y+163&&dn[$t]!=ve;++$t);$t>=163&&_0(ve,Y+163)}break;case 229:we=we.concat(ve);break;case 93:Fe[ve.cmo[0]]=K.lastobj=ve;break;case 438:K.lastobj.TxO=ve;break;case 127:K.lastobj.ImData=ve;break;case 440:for(D=ve[0].s.r;D<=ve[0].e.r;++D)for(P=ve[0].s.c;P<=ve[0].e.c;++P)C=t.dense?(n[D]||[])[P]:n[an({c:P,r:D})],C&&(C.l=ve[1]);break;case 2048:for(D=ve[0].s.r;D<=ve[0].e.r;++D)for(P=ve[0].s.c;P<=ve[0].e.c;++P)C=t.dense?(n[D]||[])[P]:n[an({c:P,r:D})],C&&C.l&&(C.l.Tooltip=ve[1]);break;case 28:{if(K.biff<=5&&K.biff>=2)break;C=t.dense?(n[ve[0].r]||[])[ve[0].c]:n[an(ve[0])];var Ar=Fe[ve[2]];C||(t.dense?(n[ve[0].r]||(n[ve[0].r]=[]),C=n[ve[0].r][ve[0].c]={t:"z"}):C=n[an(ve[0])]={t:"z"},c.e.r=Math.max(c.e.r,ve[0].r),c.s.r=Math.min(c.s.r,ve[0].r),c.e.c=Math.max(c.e.c,ve[0].c),c.s.c=Math.min(c.s.c,ve[0].c)),C.c||(C.c=[]),L={a:ve[1],t:Ar.TxO.t},C.c.push(L)}break;case 2173:Fie(G[ve.ixfe],ve.ext);break;case 125:{if(!K.cellStyles)break;for(;ve.e>=ve.s;)he[ve.e--]={width:ve.w/256,level:ve.level||0,hidden:!!(ve.flags&1)},$e||($e=!0,LC(ve.w/256)),hg(he[ve.e+1])}break;case 520:{var yr={};ve.level!=null&&(Le[ve.r]=yr,yr.level=ve.level),ve.hidden&&(Le[ve.r]=yr,yr.hidden=!0),ve.hpt&&(Le[ve.r]=yr,yr.hpt=ve.hpt,yr.hpx=Pv(ve.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||hv(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[We]]=ve;break;case 161:n["!margins"]||hv(n["!margins"]={}),n["!margins"].header=ve.header,n["!margins"].footer=ve.footer;break;case 574:ve.RTL&&(Z.Views[0].RTL=!0);break;case 146:ne=ve;break;case 2198:me=ve;break;case 140:ee=ve;break;case 442:g?le.CodeName=ve||le.name:Z.WBProps.CodeName=ve||"ThisWorkbook";break}}else dt||console.error("Missing Info for XLS Record 0x"+We.toString(16)),e.l+=ut}return r.SheetNames=Sd(a).sort(function(it,ye){return Number(it)-Number(ye)}).map(function(it){return a[it].name}),t.bookSheets||(r.Sheets=i),!r.SheetNames.length&&v["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=v)):r.Preamble=v,r.Sheets&&fe.forEach(function(it,ye){r.Sheets[r.SheetNames[ye]]["!autofilter"]=it}),r.Strings=p,r.SSF=mc(dn),K.enc&&(r.Encryption=K.enc),me&&(r.Themes=me),r.Metadata={},ee!==void 0&&(r.Metadata.Country=ee),Ne.names.length>0&&(Z.Names=Ne.names),r.Workbook=Z,r}var wk={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function coe(e,t,r){var i=Xn.find(e,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var n=ak(i,See,wk.DSI);for(var a in n)t[a]=n[a]}catch(g){if(r.WTF)throw g}var c=Xn.find(e,"/!SummaryInformation");if(c&&c.size>0)try{var s=ak(c,Eee,wk.SI);for(var p in s)t[p]==null&&(t[p]=s[p])}catch(g){if(r.WTF)throw g}t.HeadingPairs&&t.TitlesOfParts&&(ZI(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function ML(e,t){t||(t={}),jC(t),cI(),t.codepage&&mC(t.codepage);var r,i;if(e.FullPaths){if(Xn.find(e,"/encryption"))throw new Error("File is password-protected");r=Xn.find(e,"!CompObj"),i=Xn.find(e,"/Workbook")||Xn.find(e,"/Book")}else{switch(t.type){case"base64":e=UA(Fh(e));break;case"binary":e=UA(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}dc(e,0),i={content:e}}var n,a;if(r&&soe(r),t.bookProps&&!t.bookSheets)n={};else{var c=Kn?"buffer":"array";if(i&&i.content)n=loe(i.content,t);else if((a=Xn.find(e,"PerfectOffice_MAIN"))&&a.content)n=cv.to_workbook(a.content,(t.type=c,t));else if((a=Xn.find(e,"NativeContent_MAIN"))&&a.content)n=cv.to_workbook(a.content,(t.type=c,t));else throw(a=Xn.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Xn.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=Wie(e))}var s={};return e.FullPaths&&coe(e,s,t),n.Props=n.Custprops=s,t.bookFiles&&(n.cfb=e),n}var a_={0:{f:Vse},1:{f:Wse},2:{f:iae},3:{f:Yse},4:{f:Xse},5:{f:rae},6:{f:aae},7:{f:eae},8:{f:hae},9:{f:uae},10:{f:lae},11:{f:cae},12:{f:$se},13:{f:nae},14:{f:Jse},15:{f:Zse},16:{f:kL},17:{f:oae},18:{f:tae},19:{f:EC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:jae},40:{},42:{},43:{f:lie},44:{f:oie},45:{f:cie},46:{f:hie},47:{f:uie},48:{},49:{f:Aee},50:{},51:{f:Iie},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:cL},62:{f:sae},63:{f:Die},64:{f:yae},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:tu,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:xae},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Kse},148:{f:Gse,p:16},151:{f:fae},152:{},153:{f:Rae},154:{},155:{},156:{f:Pae},157:{},158:{},159:{T:1,f:Ere},160:{T:-1},161:{T:1,f:j0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Aae},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Nie},336:{T:-1},337:{f:Lie,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:r4},357:{},358:{},359:{},360:{T:1},361:{},362:{f:lL},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:pae},427:{f:mae},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:vae},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:qse},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:dae},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:r4},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Gie},633:{T:1},634:{T:-1},635:{T:1,f:Vie},636:{T:-1},637:{f:fee},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Sae},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:_ae},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},o4={6:{f:Rw},10:{f:tp},12:{f:Vo},13:{f:Vo},14:{f:_o},15:{f:_o},16:{f:$c},17:{f:_o},18:{f:_o},19:{f:Vo},20:{f:uk},21:{f:uk},23:{f:lL},24:{f:Ak},25:{f:_o},26:{},27:{},28:{f:Qte},29:{},34:{f:_o},35:{f:hk},38:{f:$c},39:{f:$c},40:{f:$c},41:{f:$c},42:{f:_o},43:{f:_o},47:{f:qre},49:{f:wte},51:{f:Vo},60:{},61:{f:yte},64:{f:_o},65:{f:bte},66:{f:Vo},77:{},80:{},81:{},82:{},85:{f:Vo},89:{},90:{},91:{},92:{f:Ate},93:{f:Vte},94:{},95:{f:_o},96:{},97:{},99:{f:_o},125:{f:cL},128:{f:Lte},129:{f:dte},130:{f:Vo},131:{f:_o},132:{f:_o},133:{f:fte},134:{},140:{f:Xte},141:{f:Vo},144:{},146:{f:Yte},151:{},152:{},153:{},154:{},155:{},156:{f:Vo},157:{},158:{},160:{f:ire},161:{f:ere},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:kte},190:{f:Fte},193:{f:tp},197:{},198:{},199:{},200:{},201:{},202:{f:_o},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Vo},220:{},221:{f:_o},222:{},224:{f:Ite},225:{f:hte},226:{f:tp},227:{},229:{f:Hte},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:pte},253:{f:Cte},255:{f:mte},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:rL},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:_o},353:{f:tp},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Pte},431:{f:_o},432:{},433:{},434:{},437:{},438:{f:Kte},439:{f:_o},440:{f:Wte},441:{},442:{f:Jv},443:{},444:{f:Vo},445:{},446:{},448:{f:tp},449:{f:xte,r:2},450:{f:tp},512:{f:lk},513:{f:rre},515:{f:Mte},516:{f:Bte},517:{f:ck},519:{f:nre},520:{f:gte},523:{},545:{f:dk},549:{f:ok},566:{},574:{f:_te},638:{f:Tte},659:{},1048:{},1054:{f:Ste},1084:{},1212:{f:Ute},2048:{f:$te},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ky},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:tp},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Jte,r:12},2173:{f:kie,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:_o,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:jte,r:12},2197:{},2198:{f:wie,r:12},2199:{},2200:{},2201:{},2202:{f:Ote,r:12},2203:{f:tp},2204:{},2205:{},2206:{},2207:{},2211:{f:vte},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Vo},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:tre},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Zte},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:lk},1:{},2:{f:lre},3:{f:ore},4:{f:are},5:{f:ck},7:{f:cre},8:{},9:{f:Ky},11:{},22:{f:Vo},30:{f:Ete},31:{},32:{},33:{f:dk},36:{},37:{f:ok},50:{f:ure},62:{},52:{},67:{},68:{f:Vo},69:{},86:{},126:{},127:{f:sre},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:hre},223:{},234:{},354:{},421:{},518:{f:Rw},521:{f:Ky},536:{f:Ak},547:{f:hk},561:{},579:{},1030:{f:Rw},1033:{f:Ky},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function RA(e,t,r,i){var n=t;if(!isNaN(n)){var a=(r||[]).length||0,c=e.next(4);c.write_shift(2,n),c.write_shift(2,a),a>0&&HI(r)&&e.push(r)}}function Ck(e,t){var r=t||{},i=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var n=e.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),c=n.index,s=a&&a.index||e.length,p=MJ(e.slice(c,s),/(:?<tr[^>]*>)/i,"<tr>"),g=-1,v=0,B=0,F=0,C={s:{r:1e7,c:1e7},e:{r:0,c:0}},L=[];for(c=0;c<p.length;++c){var P=p[c].trim(),D=P.slice(0,3).toLowerCase();if(D=="<tr"){if(++g,r.sheetRows&&r.sheetRows<=g){--g;break}v=0;continue}if(!(D!="<td"&&D!="<th")){var j=P.split(/<\/t[dh]>/i);for(s=0;s<j.length;++s){var q=j[s].trim();if(q.match(/<t[dh]/i)){for(var H=q,ee=0;H.charAt(0)=="<"&&(ee=H.indexOf(">"))>-1;)H=H.slice(ee+1);for(var G=0;G<L.length;++G){var ne=L[G];ne.s.c==v&&ne.s.r<g&&g<=ne.e.r&&(v=ne.e.c+1,G=-1)}var Z=Yi(q.slice(0,q.indexOf(">")));F=Z.colspan?+Z.colspan:1,((B=+Z.rowspan)>1||F>1)&&L.push({s:{r:g,c:v},e:{r:g+(B||1)-1,c:v+F-1}});var le=Z.t||Z["data-t"]||"";if(!H.length){v+=F;continue}if(H=FI(H),C.s.r>g&&(C.s.r=g),C.e.r<g&&(C.e.r=g),C.s.c>v&&(C.s.c=v),C.e.c<v&&(C.e.c=v),!H.length){v+=F;continue}var J={t:"s",v:H};r.raw||!H.trim().length||le=="s"||(H==="TRUE"?J={t:"b",v:!0}:H==="FALSE"?J={t:"b",v:!1}:isNaN(QA(H))?isNaN(ug(H).getDate())||(J={t:"d",v:ql(H)},r.cellDates||(J={t:"n",v:Su(J.v)}),J.z=r.dateNF||dn[14]):J={t:"n",v:QA(H)}),r.dense?(i[g]||(i[g]=[]),i[g][v]=J):i[an({r:g,c:v})]=J,v+=F}}}}return i["!ref"]=Zn(C),L.length&&(i["!merges"]=L),i}function uoe(e,t,r,i){for(var n=e["!merges"]||[],a=[],c=t.s.c;c<=t.e.c;++c){for(var s=0,p=0,g=0;g<n.length;++g)if(!(n[g].s.r>r||n[g].s.c>c)&&!(n[g].e.r<r||n[g].e.c<c)){if(n[g].s.r<r||n[g].s.c<c){s=-1;break}s=n[g].e.r-n[g].s.r+1,p=n[g].e.c-n[g].s.c+1;break}if(!(s<0)){var v=an({r,c}),B=i.dense?(e[r]||[])[c]:e[v],F=B&&B.v!=null&&(B.h||bC(B.w||(wf(B),B.w)||""))||"",C={};s>1&&(C.rowspan=s),p>1&&(C.colspan=p),i.editable?F='<span contenteditable="true">'+F+"</span>":B&&(C["data-t"]=B&&B.t||"z",B.v!=null&&(C["data-v"]=B.v),B.z!=null&&(C["data-z"]=B.z),B.l&&(B.l.Target||"#").charAt(0)!="#"&&(F='<a href="'+B.l.Target+'">'+F+"</a>")),C.id=(i.id||"sjs")+"-"+v,a.push(XJ("td",F,C))}}var L="<tr>";return L+a.join("")+"</tr>"}var hoe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Aoe="</body></html>";function doe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return kp(Ck(r[0],t),t);var i=OC();return r.forEach(function(n,a){zC(i,Ck(n,t),"Sheet"+(a+1))}),i}function foe(e,t,r){var i=[];return i.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function poe(e,t){var r=t||{},i=r.header!=null?r.header:hoe,n=r.footer!=null?r.footer:Aoe,a=[i],c=Cg(e["!ref"]);r.dense=Array.isArray(e),a.push(foe(e,c,r));for(var s=c.s.r;s<=c.e.r;++s)a.push(uoe(e,c,s,r));return a.push("</table>"+n),a.join("")}function PL(e,t,r){var i=r||{},n=0,a=0;if(i.origin!=null)if(typeof i.origin=="number")n=i.origin;else{var c=typeof i.origin=="string"?Cu(i.origin):i.origin;n=c.r,a=c.c}var s=t.getElementsByTagName("tr"),p=Math.min(i.sheetRows||1e7,s.length),g={s:{r:0,c:0},e:{r:n,c:a}};if(e["!ref"]){var v=Cg(e["!ref"]);g.s.r=Math.min(g.s.r,v.s.r),g.s.c=Math.min(g.s.c,v.s.c),g.e.r=Math.max(g.e.r,v.e.r),g.e.c=Math.max(g.e.c,v.e.c),n==-1&&(g.e.r=n=v.e.r+1)}var B=[],F=0,C=e["!rows"]||(e["!rows"]=[]),L=0,P=0,D=0,j=0,q=0,H=0;for(e["!cols"]||(e["!cols"]=[]);L<s.length&&P<p;++L){var ee=s[L];if(Bk(ee)){if(i.display)continue;C[P]={hidden:!0}}var G=ee.children;for(D=j=0;D<G.length;++D){var ne=G[D];if(!(i.display&&Bk(ne))){var Z=ne.hasAttribute("data-v")?ne.getAttribute("data-v"):ne.hasAttribute("v")?ne.getAttribute("v"):FI(ne.innerHTML),le=ne.getAttribute("data-z")||ne.getAttribute("z");for(F=0;F<B.length;++F){var J=B[F];J.s.c==j+a&&J.s.r<P+n&&P+n<=J.e.r&&(j=J.e.c+1-a,F=-1)}H=+ne.getAttribute("colspan")||1,((q=+ne.getAttribute("rowspan")||1)>1||H>1)&&B.push({s:{r:P+n,c:j+a},e:{r:P+n+(q||1)-1,c:j+a+(H||1)-1}});var ce={t:"s",v:Z},te=ne.getAttribute("data-t")||ne.getAttribute("t")||"";Z!=null&&(Z.length==0?ce.t=te||"z":i.raw||Z.trim().length==0||te=="s"||(Z==="TRUE"?ce={t:"b",v:!0}:Z==="FALSE"?ce={t:"b",v:!1}:isNaN(QA(Z))?isNaN(ug(Z).getDate())||(ce={t:"d",v:ql(Z)},i.cellDates||(ce={t:"n",v:Su(ce.v)}),ce.z=i.dateNF||dn[14]):ce={t:"n",v:QA(Z)})),ce.z===void 0&&le!=null&&(ce.z=le);var K="",me=ne.getElementsByTagName("A");if(me&&me.length)for(var we=0;we<me.length&&!(me[we].hasAttribute("href")&&(K=me[we].getAttribute("href"),K.charAt(0)!="#"));++we);K&&K.charAt(0)!="#"&&(ce.l={Target:K}),i.dense?(e[P+n]||(e[P+n]=[]),e[P+n][j+a]=ce):e[an({c:j+a,r:P+n})]=ce,g.e.c<j+a&&(g.e.c=j+a),j+=H}}++P}return B.length&&(e["!merges"]=(e["!merges"]||[]).concat(B)),g.e.r=Math.max(g.e.r,P-1+n),e["!ref"]=Zn(g),P>=p&&(e["!fullref"]=Zn((g.e.r=s.length-L+P-1+n,g))),e}function RL(e,t){var r=t||{},i=r.dense?[]:{};return PL(i,e,t)}function moe(e,t){return kp(RL(e,t),t)}function Bk(e){var t="",r=goe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function goe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function voe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(i,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ts(t.replace(/<[^>]*>/g,""));return[r]}var Sk={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function DL(e,t){var r=t||{},i=wC(e),n=[],a,c,s={name:""},p="",g=0,v,B,F={},C=[],L=r.dense?[]:{},P,D,j={value:""},q="",H=0,ee=[],G=-1,ne=-1,Z={s:{r:1e6,c:1e7},e:{r:0,c:0}},le=0,J={},ce=[],te={},K=0,me=0,we=[],Fe=1,he=1,Le=[],$e={Names:[]},Ne={},Te=["",""],Ge=[],Y={},Ae="",fe=0,be=!1,Me=!1,ze=0;for(Iv.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");P=Iv.exec(i);)switch(P[3]=P[3].replace(/_.*$/,"")){case"table":case"":P[1]==="/"?(Z.e.c>=Z.s.c&&Z.e.r>=Z.s.r?L["!ref"]=Zn(Z):L["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=Z.e.r&&(L["!fullref"]=L["!ref"],Z.e.r=r.sheetRows-1,L["!ref"]=Zn(Z)),ce.length&&(L["!merges"]=ce),we.length&&(L["!rows"]=we),v.name=v.||v.name,typeof JSON<"u"&&JSON.stringify(v),C.push(v.name),F[v.name]=L,Me=!1):P[0].charAt(P[0].length-2)!=="/"&&(v=Yi(P[0],!1),G=ne=-1,Z.s.r=Z.s.c=1e7,Z.e.r=Z.e.c=0,L=r.dense?[]:{},ce=[],we=[],Me=!0);break;case"table-row-group":P[1]==="/"?--le:++le;break;case"table-row":case"":if(P[1]==="/"){G+=Fe,Fe=1;break}if(B=Yi(P[0],!1),B.?G=B.-1:G==-1&&(G=0),Fe=+B["number-rows-repeated"]||1,Fe<10)for(ze=0;ze<Fe;++ze)le>0&&(we[G+ze]={level:le});ne=-1;break;case"covered-table-cell":P[1]!=="/"&&++ne,r.sheetStubs&&(r.dense?(L[G]||(L[G]=[]),L[G][ne]={t:"z"}):L[an({r:G,c:ne})]={t:"z"}),q="",ee=[];break;case"table-cell":case"":if(P[0].charAt(P[0].length-2)==="/")++ne,j=Yi(P[0],!1),he=parseInt(j["number-columns-repeated"]||"1",10),D={t:"z",v:null},j.formula&&r.cellFormula!=!1&&(D.f=yk(ts(j.formula))),(j.||j["value-type"])=="string"&&(D.t="s",D.v=ts(j["string-value"]||""),r.dense?(L[G]||(L[G]=[]),L[G][ne]=D):L[an({r:G,c:ne})]=D),ne+=he-1;else if(P[1]!=="/"){++ne,q="",H=0,ee=[],he=1;var We=Fe?G+Fe-1:G;if(ne>Z.e.c&&(Z.e.c=ne),ne<Z.s.c&&(Z.s.c=ne),G<Z.s.r&&(Z.s.r=G),We>Z.e.r&&(Z.e.r=We),j=Yi(P[0],!1),Ge=[],Y={},D={t:j.||j["value-type"],v:null},r.cellFormula)if(j.formula&&(j.formula=ts(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(K=parseInt(j["number-matrix-rows-spanned"],10)||0,me=parseInt(j["number-matrix-columns-spanned"],10)||0,te={s:{r:G,c:ne},e:{r:G+K-1,c:ne+me-1}},D.F=Zn(te),Le.push([te,D.F])),j.formula)D.f=yk(j.formula);else for(ze=0;ze<Le.length;++ze)G>=Le[ze][0].s.r&&G<=Le[ze][0].e.r&&ne>=Le[ze][0].s.c&&ne<=Le[ze][0].e.c&&(D.F=Le[ze][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(K=parseInt(j["number-rows-spanned"],10)||0,me=parseInt(j["number-columns-spanned"],10)||0,te={s:{r:G,c:ne},e:{r:G+K-1,c:ne+me-1}},ce.push(te)),j["number-columns-repeated"]&&(he=parseInt(j["number-columns-repeated"],10)),D.t){case"boolean":D.t="b",D.v=Na(j["boolean-value"]);break;case"float":D.t="n",D.v=parseFloat(j.value);break;case"percentage":D.t="n",D.v=parseFloat(j.value);break;case"currency":D.t="n",D.v=parseFloat(j.value);break;case"date":D.t="d",D.v=ql(j["date-value"]),r.cellDates||(D.t="n",D.v=Su(D.v)),D.z="m/d/yy";break;case"time":D.t="n",D.v=NJ(j["time-value"])/86400,r.cellDates&&(D.t="d",D.v=O_(D.v)),D.z="HH:MM:SS";break;case"number":D.t="n",D.v=parseFloat(j.);break;default:if(D.t==="string"||D.t==="text"||!D.t)D.t="s",j["string-value"]!=null&&(q=ts(j["string-value"]),ee=[]);else throw new Error("Unsupported value type "+D.t)}}else{if(be=!1,D.t==="s"&&(D.v=q||"",ee.length&&(D.R=ee),be=H==0),Ne.Target&&(D.l=Ne),Ge.length>0&&(D.c=Ge,Ge=[]),q&&r.cellText!==!1&&(D.w=q),be&&(D.t="z",delete D.v),(!be||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=G))for(var ut=0;ut<Fe;++ut){if(he=parseInt(j["number-columns-repeated"]||"1",10),r.dense)for(L[G+ut]||(L[G+ut]=[]),L[G+ut][ne]=ut==0?D:mc(D);--he>0;)L[G+ut][ne+he]=mc(D);else for(L[an({r:G+ut,c:ne})]=D;--he>0;)L[an({r:G+ut,c:ne+he})]=mc(D);Z.e.c<=ne&&(Z.e.c=ne)}he=parseInt(j["number-columns-repeated"]||"1",10),ne+=he-1,he=0,D={},q="",ee=[]}Ne={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(P[1]==="/"){if((a=n.pop())[0]!==P[3])throw"Bad state: "+a}else P[0].charAt(P[0].length-2)!=="/"&&n.push([P[3],!0]);break;case"annotation":if(P[1]==="/"){if((a=n.pop())[0]!==P[3])throw"Bad state: "+a;Y.t=q,ee.length&&(Y.R=ee),Y.a=Ae,Ge.push(Y)}else P[0].charAt(P[0].length-2)!=="/"&&n.push([P[3],!1]);Ae="",fe=0,q="",H=0,ee=[];break;case"creator":P[1]==="/"?Ae=i.slice(fe,P.index):fe=P.index+P[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(P[1]==="/"){if((a=n.pop())[0]!==P[3])throw"Bad state: "+a}else P[0].charAt(P[0].length-2)!=="/"&&n.push([P[3],!1]);q="",H=0,ee=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(P[1]==="/"){if(J[s.name]=p,(a=n.pop())[0]!==P[3])throw"Bad state: "+a}else P[0].charAt(P[0].length-2)!=="/"&&(p="",s=Yi(P[0],!1),n.push([P[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":c=Yi(P[0],!1),p+=Sk[P[3]][c.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":c=Yi(P[0],!1),p+=Sk[P[3]][c.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(P[0].slice(-2)==="/>")break;if(P[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":p+=i.slice(g,P.index);break}else g=P.index+P[0].length;break;case"named-range":c=Yi(P[0],!1),Te=Dw(c["cell-range-address"]);var dt={Name:c.name,Ref:Te[0]+"!"+Te[1]};Me&&(dt.Sheet=C.length),$e.Names.push(dt);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(P[1]==="/"&&(!j||!j["string-value"])){var zt=voe(i.slice(H,P.index));q=(q.length>0?q+`
`:"")+zt[0]}else Yi(P[0],!1),H=P.index+P[0].length;break;case"s":break;case"database-range":if(P[1]==="/")break;try{Te=Dw(Yi(P[0])["target-range-address"]),F[Te[0]]["!autofilter"]={ref:Te[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(P[1]!=="/"){if(Ne=Yi(P[0],!1),!Ne.href)break;Ne.Target=ts(Ne.href),delete Ne.href,Ne.Target.charAt(0)=="#"&&Ne.Target.indexOf(".")>-1?(Te=Dw(Ne.Target.slice(1)),Ne.Target="#"+Te[0]+"!"+Te[1]):Ne.Target.match(/^\.\.[\\\/]/)&&(Ne.Target=Ne.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(P[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(P)}}var ve={Sheets:F,SheetNames:C,Workbook:$e};return r.bookSheets&&delete ve.Sheets,ve}function Ek(e,t){t=t||{},Yh(e,"META-INF/manifest.xml")&&Mee(Ho(e,"META-INF/manifest.xml"),t);var r=Th(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var i=DL(ha(r),t);return Yh(e,"meta.xml")&&(i.Props=XI(Ho(e,"meta.xml"))),i}function Tk(e,t){return DL(e,t)}function RC(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function l4(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ha(R0(e))}function c4(e){var t=e.reduce(function(n,a){return n+a.length},0),r=new Uint8Array(t),i=0;return e.forEach(function(n){r.set(n,i),i+=n.length}),r}function kk(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function xoe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,i=e[t+14]&1,n=t+13;n>=t;--n)i=i*256+e[n];return(e[t+15]&128?-i:i)*Math.pow(10,r-6176)}function Rv(e,t){var r=t?t[0]:0,i=e[r]&127;e:if(e[r++]>=128&&(i|=(e[r]&127)<<7,e[r++]<128||(i|=(e[r]&127)<<14,e[r++]<128)||(i|=(e[r]&127)<<21,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(i+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),i}function vl(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Yc(e){for(var t=[],r=[0];r[0]<e.length;){var i=r[0],n=Rv(e,r),a=n&7;n=Math.floor(n/8);var c=0,s;if(n==0)break;switch(a){case 0:{for(var p=r[0];e[r[0]++]>=128;);s=e.slice(p,r[0])}break;case 5:c=4,s=e.slice(r[0],r[0]+c),r[0]+=c;break;case 1:c=8,s=e.slice(r[0],r[0]+c),r[0]+=c;break;case 2:c=Rv(e,r),s=e.slice(r[0],r[0]+c),r[0]+=c;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(n," at offset ").concat(i))}var g={data:s,type:a};t[n]==null?t[n]=[g]:t[n].push(g)}return t}function DC(e,t){return e?.map(function(r){return t(r.data)})||[]}function yoe(e){for(var t,r=[],i=[0];i[0]<e.length;){var n=Rv(e,i),a=Yc(e.slice(i[0],i[0]+n));i[0]+=n;var c={id:vl(a[1][0].data),messages:[]};a[2].forEach(function(s){var p=Yc(s.data),g=vl(p[3][0].data);c.messages.push({meta:p,data:e.slice(i[0],i[0]+g)}),i[0]+=g}),(t=a[3])!=null&&t[0]&&(c.merge=vl(a[3][0].data)>>>0>0),r.push(c)}return r}function _oe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],i=Rv(t,r),n=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var c=t[r[0]++]>>2;if(c<60)++c;else{var s=c-59;c=t[r[0]],s>1&&(c|=t[r[0]+1]<<8),s>2&&(c|=t[r[0]+2]<<16),s>3&&(c|=t[r[0]+3]<<24),c>>>=0,c++,r[0]+=s}n.push(t.slice(r[0],r[0]+c)),r[0]+=c;continue}else{var p=0,g=0;if(a==1?(g=(t[r[0]]>>2&7)+4,p=(t[r[0]++]&224)<<3,p|=t[r[0]++]):(g=(t[r[0]++]>>2)+1,a==2?(p=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(p=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),n=[c4(n)],p==0)throw new Error("Invalid offset 0");if(p>n[0].length)throw new Error("Invalid offset beyond length");if(g>=p)for(n.push(n[0].slice(-p)),g-=p;g>=n[n.length-1].length;)n.push(n[n.length-1]),g-=n[n.length-1].length;n.push(n[0].slice(-p,-p+g))}}var v=c4(n);if(v.length!=i)throw new Error("Unexpected length: ".concat(v.length," != ").concat(i));return v}function boe(e){for(var t=[],r=0;r<e.length;){var i=e[r++],n=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(_oe(i,e.slice(r,r+n))),r+=n}if(r!==e.length)throw new Error("data is not a valid framed stream!");return c4(t)}function woe(e,t,r,i){var n=RC(e),a=n.getUint32(4,!0),c=(i>1?12:8)+kk(a&(i>1?3470:398))*4,s=-1,p=-1,g=NaN,v=new Date(2001,0,1);a&512&&(s=n.getUint32(c,!0),c+=4),c+=kk(a&(i>1?12288:4096))*4,a&16&&(p=n.getUint32(c,!0),c+=4),a&32&&(g=n.getFloat64(c,!0),c+=8),a&64&&(v.setTime(v.getTime()+n.getFloat64(c,!0)*1e3),c+=8);var B;switch(e[2]){case 0:break;case 2:B={t:"n",v:g};break;case 3:B={t:"s",v:t[p]};break;case 5:B={t:"d",v};break;case 6:B={t:"b",v:g>0};break;case 7:B={t:"n",v:g/86400};break;case 8:B={t:"e",v:0};break;case 9:if(s>-1)B={t:"s",v:r[s]};else if(p>-1)B={t:"s",v:t[p]};else if(!isNaN(g))B={t:"n",v:g};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return B}function Coe(e,t,r){var i=RC(e),n=i.getUint32(8,!0),a=12,c=-1,s=-1,p=NaN,g=NaN,v=new Date(2001,0,1);n&1&&(p=xoe(e,a),a+=16),n&2&&(g=i.getFloat64(a,!0),a+=8),n&4&&(v.setTime(v.getTime()+i.getFloat64(a,!0)*1e3),a+=8),n&8&&(s=i.getUint32(a,!0),a+=4),n&16&&(c=i.getUint32(a,!0),a+=4);var B;switch(e[1]){case 0:break;case 2:B={t:"n",v:p};break;case 3:B={t:"s",v:t[s]};break;case 5:B={t:"d",v};break;case 6:B={t:"b",v:g>0};break;case 7:B={t:"n",v:g/86400};break;case 8:B={t:"e",v:0};break;case 9:if(c>-1)B={t:"s",v:r[c]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)));break;case 10:B={t:"n",v:p};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(n&31," : ").concat(e.slice(0,4)))}return B}function Boe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return woe(e,t,r,e[0]);case 5:return Coe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function _p(e){var t=Yc(e);return Rv(t[1][0].data)}function Fk(e,t){var r=Yc(t.data),i=vl(r[1][0].data),n=r[3],a=[];return(n||[]).forEach(function(c){var s=Yc(c.data),p=vl(s[1][0].data)>>>0;switch(i){case 1:a[p]=l4(s[3][0].data);break;case 8:{var g=e[_p(s[9][0].data)][0],v=Yc(g.data),B=e[_p(v[1][0].data)][0],F=vl(B.meta[1][0].data);if(F!=2001)throw new Error("2000 unexpected reference to ".concat(F));var C=Yc(B.data);a[p]=C[3].map(function(L){return l4(L.data)}).join("")}break}}),a}function Soe(e,t){var r,i,n,a,c,s,p,g,v,B,F,C,L,P,D=Yc(e),j=vl(D[1][0].data)>>>0,q=vl(D[2][0].data)>>>0,H=((i=(r=D[8])==null?void 0:r[0])==null?void 0:i.data)&&vl(D[8][0].data)>0||!1,ee,G;if((a=(n=D[7])==null?void 0:n[0])!=null&&a.data&&t!=0)ee=(s=(c=D[7])==null?void 0:c[0])==null?void 0:s.data,G=(g=(p=D[6])==null?void 0:p[0])==null?void 0:g.data;else if((B=(v=D[4])==null?void 0:v[0])!=null&&B.data&&t!=1)ee=(C=(F=D[4])==null?void 0:F[0])==null?void 0:C.data,G=(P=(L=D[3])==null?void 0:L[0])==null?void 0:P.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var ne=H?4:1,Z=RC(ee),le=[],J=0;J<ee.length/2;++J){var ce=Z.getUint16(J*2,!0);ce<65535&&le.push([J,ce])}if(le.length!=q)throw"Expected ".concat(q," cells, found ").concat(le.length);var te=[];for(J=0;J<le.length-1;++J)te[le[J][0]]=G.subarray(le[J][1]*ne,le[J+1][1]*ne);return le.length>=1&&(te[le[le.length-1][0]]=G.subarray(le[le.length-1][1]*ne)),{R:j,cells:te}}function Eoe(e,t){var r,i=Yc(t.data),n=(r=i?.[7])!=null&&r[0]?vl(i[7][0].data)>>>0>0?1:0:-1,a=DC(i[5],function(c){return Soe(c,n)});return{nrows:vl(i[4][0].data)>>>0,data:a.reduce(function(c,s){return c[s.R]||(c[s.R]=[]),s.cells.forEach(function(p,g){if(c[s.R][g])throw new Error("Duplicate cell r=".concat(s.R," c=").concat(g));c[s.R][g]=p}),c},[])}}function Toe(e,t,r){var i,n=Yc(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(vl(n[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(a.e.c=(vl(n[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=Zn(a);var c=Yc(n[4][0].data),s=Fk(e,e[_p(c[4][0].data)][0]),p=(i=c[17])!=null&&i[0]?Fk(e,e[_p(c[17][0].data)][0]):[],g=Yc(c[3][0].data),v=0;g[1].forEach(function(B){var F=Yc(B.data),C=e[_p(F[2][0].data)][0],L=vl(C.meta[1][0].data);if(L!=6002)throw new Error("6001 unexpected reference to ".concat(L));var P=Eoe(e,C);P.data.forEach(function(D,j){D.forEach(function(q,H){var ee=an({r:v+j,c:H}),G=Boe(q,s,p);G&&(r[ee]=G)})}),v+=P.nrows})}function koe(e,t){var r=Yc(t.data),i={"!ref":"A1"},n=e[_p(r[2][0].data)],a=vl(n[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Toe(e,n[0],i),i}function Foe(e,t){var r,i=Yc(t.data),n={name:(r=i[1])!=null&&r[0]?l4(i[1][0].data):"",sheets:[]},a=DC(i[2],_p);return a.forEach(function(c){e[c].forEach(function(s){var p=vl(s.meta[1][0].data);p==6e3&&n.sheets.push(koe(e,s))})}),n}function Noe(e,t){var r=OC(),i=Yc(t.data),n=DC(i[1],_p);if(n.forEach(function(a){e[a].forEach(function(c){var s=vl(c.meta[1][0].data);if(s==2){var p=Foe(e,c);p.sheets.forEach(function(g,v){zC(r,g,v==0?p.name:p.name+"_"+v,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Uw(e){var t,r,i,n,a={},c=[];if(e.FullPaths.forEach(function(p){if(p.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(p){if(p.name.match(/\.iwa$/)){var g;try{g=boe(p.content)}catch(B){return console.log("?? "+p.content.length+" "+(B.message||B))}var v;try{v=yoe(g)}catch(B){return console.log("## "+(B.message||B))}v.forEach(function(B){a[B.id]=B.messages,c.push(B.id)})}}),!c.length)throw new Error("File has no messages");var s=((n=(i=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:i[1])==null?void 0:n[0].data)&&vl(a[1][0].meta[1][0].data)==1&&a[1][0];if(s||c.forEach(function(p){a[p].forEach(function(g){var v=vl(g.meta[1][0].data)>>>0;if(v==1)if(!s)s=g;else throw new Error("Document has multiple roots")})}),!s)throw new Error("Cannot find Document root");return Noe(a,s)}function Ioe(e){return function(r){for(var i=0;i!=e.length;++i){var n=e[i];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function jC(e){Ioe([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Loe(e){return Gm.WS.indexOf(e)>-1?"sheet":e==Gm.CS?"chart":e==Gm.DS?"dialog":e==Gm.MS?"macro":e&&e.length?e:"sheet"}function Moe(e,t){if(!e)return 0;try{e=t.map(function(i){return i.id||(i.id=i.strRelID),[i.name,e["!id"][i.id].Target,Loe(e["!id"][i.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Poe(e,t,r,i,n,a,c,s,p,g,v,B){try{a[i]=ov(Th(e,r,!0),t);var F=Ho(e,t),C;switch(s){case"sheet":C=zae(F,t,n,p,a[i],g,v,B);break;case"chart":if(C=Qae(F,t,n,p,a[i],g,v,B),!C||!C["!drawel"])break;var L=V1(C["!drawel"].Target,t),P=i4(L),D=Oie(Th(e,L,!0),ov(Th(e,P,!0),L)),j=V1(D,L),q=i4(j);C=Cae(Th(e,j,!0),j,p,ov(Th(e,q,!0),j),g,C);break;case"macro":C=Hae(F,t,n,p,a[i],g,v,B);break;case"dialog":C=Vae(F,t,n,p,a[i],g,v,B);break;default:throw new Error("Unrecognized sheet type "+s)}c[i]=C;var H=[];a&&a[i]&&Sd(a[i]).forEach(function(ee){var G="";if(a[i][ee].Type==Gm.CMNT){G=V1(a[i][ee].Target,t);var ne=Wae(Ho(e,G,!0),G,p);if(!ne||!ne.length)return;pk(C,ne,!1)}a[i][ee].Type==Gm.TCMNT&&(G=V1(a[i][ee].Target,t),H=H.concat(Qie(Ho(e,G,!0),p)))}),H&&H.length&&pk(C,H,!0,p.people||[])}catch(ee){if(p.WTF)throw ee}}function $h(e){return e.charAt(0)=="/"?e.slice(1):e}function Roe(e,t){if(_I(),t=t||{},jC(t),Yh(e,"META-INF/manifest.xml")||Yh(e,"objectdata.xml"))return Ek(e,t);if(Yh(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Uw<"u"){if(e.FileIndex)return Uw(e);var r=Xn.utils.cfb_new();return QT(e).forEach(function(we){DJ(r,we,RJ(e,we))}),Uw(r)}throw new Error("Unsupported NUMBERS file")}if(!Yh(e,"[Content_Types].xml"))throw Yh(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Yh(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var i=QT(e),n=Iee(Th(e,"[Content_Types].xml")),a=!1,c,s;if(n.workbooks.length===0&&(s="xl/workbook.xml",Ho(e,s,!0)&&n.workbooks.push(s)),n.workbooks.length===0){if(s="xl/workbook.bin",!Ho(e,s,!0))throw new Error("Could not find workbook");n.workbooks.push(s),a=!0}n.workbooks[0].slice(-3)=="bin"&&(a=!0);var p={},g={};if(!t.bookSheets&&!t.bookProps){if(uv=[],n.sst)try{uv=Kae(Ho(e,$h(n.sst)),n.sst,t)}catch(we){if(t.WTF)throw we}t.cellStyles&&n.themes.length&&(p=qae(Th(e,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],t)),n.style&&(g=Gae(Ho(e,$h(n.style)),n.style,p,t))}n.links.map(function(we){try{var Fe=ov(Th(e,i4($h(we))),we);return Xae(Ho(e,$h(we)),Fe,we,t)}catch{}});var v=Oae(Ho(e,$h(n.workbooks[0])),n.workbooks[0],t),B={},F="";n.coreprops.length&&(F=Ho(e,$h(n.coreprops[0]),!0),F&&(B=XI(F)),n.extprops.length!==0&&(F=Ho(e,$h(n.extprops[0]),!0),F&&Dee(F,B,t)));var C={};(!t.bookSheets||t.bookProps)&&n.custprops.length!==0&&(F=Th(e,$h(n.custprops[0]),!0),F&&(C=Uee(F,t)));var L={};if((t.bookSheets||t.bookProps)&&(v.Sheets?c=v.Sheets.map(function(Fe){return Fe.name}):B.Worksheets&&B.SheetNames.length>0&&(c=B.SheetNames),t.bookProps&&(L.Props=B,L.Custprops=C),t.bookSheets&&typeof c<"u"&&(L.SheetNames=c),t.bookSheets?L.SheetNames:t.bookProps))return L;c={};var P={};t.bookDeps&&n.calcchain&&(P=$ae(Ho(e,$h(n.calcchain)),n.calcchain));var D=0,j={},q,H;{var ee=v.Sheets;B.Worksheets=ee.length,B.SheetNames=[];for(var G=0;G!=ee.length;++G)B.SheetNames[G]=ee[G].name}var ne=a?"bin":"xml",Z=n.workbooks[0].lastIndexOf("/"),le=(n.workbooks[0].slice(0,Z+1)+"_rels/"+n.workbooks[0].slice(Z+1)+".rels").replace(/^\//,"");Yh(e,le)||(le="xl/_rels/workbook."+ne+".rels");var J=ov(Th(e,le,!0),le.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(t.xlmeta=Zae(Ho(e,$h(n.metadata[0])),n.metadata[0],t)),(n.people||[]).length>=1&&(t.people=Hie(Ho(e,$h(n.people[0])),t)),J&&(J=Moe(J,v.Sheets));var ce=Ho(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(D=0;D!=B.Worksheets;++D){var te="sheet";if(J&&J[D]?(q="xl/"+J[D][1].replace(/[\/]?xl\//,""),Yh(e,q)||(q=J[D][1]),Yh(e,q)||(q=le.replace(/_rels\/.*$/,"")+J[D][1]),te=J[D][2]):(q="xl/worksheets/sheet"+(D+1-ce)+"."+ne,q=q.replace(/sheet0\./,"sheet.")),H=q.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(D!=t.sheets)continue e;break;case"string":if(B.SheetNames[D].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var K=!1,me=0;me!=t.sheets.length;++me)typeof t.sheets[me]=="number"&&t.sheets[me]==D&&(K=1),typeof t.sheets[me]=="string"&&t.sheets[me].toLowerCase()==B.SheetNames[D].toLowerCase()&&(K=1);if(!K)continue e}}Poe(e,q,H,B.SheetNames[D],D,j,c,te,t,v,p,g)}return L={Directory:n,Workbook:v,Props:B,Custprops:C,Deps:P,Sheets:c,SheetNames:B.SheetNames,Strings:uv,Styles:g,Themes:p,SSF:mc(dn)},t&&t.bookFiles&&(e.files?(L.keys=i,L.files=e.files):(L.keys=[],L.files={},e.FullPaths.forEach(function(we,Fe){we=we.replace(/^Root Entry[\/]/,""),L.keys.push(we),L.files[we]=e.FileIndex[Fe]}))),t&&t.bookVBA&&(n.vba.length>0?L.vbaraw=Ho(e,$h(n.vba[0]),!0):n.defaults&&n.defaults.bin===Kie&&(L.vbaraw=Ho(e,"xl/vbaProject.bin",!0))),L}function Doe(e,t){var r=t||{},i="Workbook",n=Xn.find(e,i);try{if(i="/!DataSpaces/Version",n=Xn.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(kre(n.content),i="/!DataSpaces/DataSpaceMap",n=Xn.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);var a=Nre(n.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=Xn.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);var c=Ire(n.content);if(c.length!=1||c[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=Xn.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);Mre(n.content)}catch{}if(i="/EncryptionInfo",n=Xn.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);var s=Pre(n.content);if(i="/EncryptedPackage",n=Xn.find(e,i),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(s[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(s[1],n.content,r.password||"",r);if(s[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(s[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function UC(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Fh(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function joe(e,t){return Xn.find(e,"EncryptedPackage")?Doe(e,t):ML(e,t)}function Uoe(e,t){var r,i=e,n=t||{};return n.type||(n.type=Kn&&Buffer.isBuffer(e)?"buffer":"base64"),r=EI(i,n),Roe(r,n)}function jL(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return a4(e.slice(r),t);default:break e}return Lv.to_workbook(e,t)}function Ooe(e,t){var r="",i=UC(e,t);switch(t.type){case"base64":r=Fh(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=F0(e);break;default:throw new Error("Unrecognized type "+t.type)}return i[0]==239&&i[1]==187&&i[2]==191&&(r=ha(r)),t.type="binary",jL(r,t)}function zoe(e,t){var r=e;return t.type=="base64"&&(r=Fh(r)),r=kv.utils.decode(1200,r.slice(2),"str"),t.type="binary",jL(r,t)}function Qoe(e){return e.match(/[^\x00-\x7F]/)?G1(e):e}function Ow(e,t,r,i){return i?(r.type="string",Lv.to_workbook(e,r)):Lv.to_workbook(t,r)}function u4(e,t){cI();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return u4(new Uint8Array(e),(r=mc(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var i=e,n=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),sg={},r.dateNF&&(sg.dateNF=r.dateNF),r.type||(r.type=Kn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Kn?"buffer":"binary",i=kJ(e),typeof Uint8Array<"u"&&!Kn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,i=Qoe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var c=new ArrayBuffer(3),s=new Uint8Array(c);if(s.foo="bar",!s.foo)return r=mc(r),r.type="array",u4(gC(i),r)}switch((n=UC(i,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return joe(Xn.read(i,r),r);break;case 9:if(n[1]<=8)return ML(i,r);break;case 60:return a4(i,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return mre(i,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return fre.to_workbook(i,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?Uoe(i,r):Ow(e,i,r,a);case 239:return n[3]===60?a4(i,r):Ow(e,i,r,a);case 255:if(n[1]===254)return zoe(i,r);if(n[1]===0&&n[2]===2&&n[3]===0)return cv.to_workbook(i,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return cv.to_workbook(i,r);break;case 3:case 131:case 139:case 140:return fk.to_workbook(i,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return Kre.to_workbook(i,r);break;case 10:case 13:case 32:return Ooe(i,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Are.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?fk.to_workbook(i,r):Ow(e,i,r,a)}function Hoe(e,t,r,i,n,a,c,s){var p=gc(r),g=s.defval,v=s.raw||!Object.prototype.hasOwnProperty.call(s,"raw"),B=!0,F=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(F,"__rowNum__",{value:r,enumerable:!1})}catch{F.__rowNum__=r}else F.__rowNum__=r;if(!c||e[r])for(var C=t.s.c;C<=t.e.c;++C){var L=c?e[r][C]:e[i[C]+p];if(L===void 0||L.t===void 0){if(g===void 0)continue;a[C]!=null&&(F[a[C]]=g);continue}var P=L.v;switch(L.t){case"z":if(P==null)break;continue;case"e":P=P==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+L.t)}if(a[C]!=null){if(P==null)if(L.t=="e"&&P===null)F[a[C]]=null;else if(g!==void 0)F[a[C]]=g;else if(v&&P===null)F[a[C]]=null;else continue;else F[a[C]]=v&&(L.t!=="n"||L.t==="n"&&s.rawNumbers!==!1)?P:wf(L,P,s);P!=null&&(B=!1)}}return{row:F,isempty:B}}function h4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},i=0,n=1,a=[],c=0,s="",p={s:{r:0,c:0},e:{r:0,c:0}},g=t||{},v=g.range!=null?g.range:e["!ref"];switch(g.header===1?i=1:g.header==="A"?i=2:Array.isArray(g.header)?i=3:g.header==null&&(i=0),typeof v){case"string":p=ro(v);break;case"number":p=ro(e["!ref"]),p.s.r=v;break;default:p=v}i>0&&(n=0);var B=gc(p.s.r),F=[],C=[],L=0,P=0,D=Array.isArray(e),j=p.s.r,q=0,H={};D&&!e[j]&&(e[j]=[]);var ee=g.skipHidden&&e["!cols"]||[],G=g.skipHidden&&e["!rows"]||[];for(q=p.s.c;q<=p.e.c;++q)if(!(ee[q]||{}).hidden)switch(F[q]=gl(q),r=D?e[j][q]:e[F[q]+B],i){case 1:a[q]=q-p.s.c;break;case 2:a[q]=F[q];break;case 3:a[q]=g.header[q-p.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),s=c=wf(r,null,g),P=H[c]||0,!P)H[c]=1;else{do s=c+"_"+P++;while(H[s]);H[c]=P,H[s]=1}a[q]=s}for(j=p.s.r+n;j<=p.e.r;++j)if(!(G[j]||{}).hidden){var ne=Hoe(e,p,j,F,i,a,D,g);(ne.isempty===!1||(i===1?g.blankrows!==!1:g.blankrows))&&(C[L++]=ne.row)}return C.length=L,C}var Nk=/"/g;function Voe(e,t,r,i,n,a,c,s){for(var p=!0,g=[],v="",B=gc(r),F=t.s.c;F<=t.e.c;++F)if(i[F]){var C=s.dense?(e[r]||[])[F]:e[i[F]+B];if(C==null)v="";else if(C.v!=null){p=!1,v=""+(s.rawNumbers&&C.t=="n"?C.v:wf(C,null,s));for(var L=0,P=0;L!==v.length;++L)if((P=v.charCodeAt(L))===n||P===a||P===34||s.forceQuotes){v='"'+v.replace(Nk,'""')+'"';break}v=="ID"&&(v='"ID"')}else C.f!=null&&!C.F?(p=!1,v="="+C.f,v.indexOf(",")>=0&&(v='"'+v.replace(Nk,'""')+'"')):v="";g.push(v)}return s.blankrows===!1&&p?null:g.join(c)}function UL(e,t){var r=[],i=t??{};if(e==null||e["!ref"]==null)return"";var n=ro(e["!ref"]),a=i.FS!==void 0?i.FS:",",c=a.charCodeAt(0),s=i.RS!==void 0?i.RS:`
`,p=s.charCodeAt(0),g=new RegExp((a=="|"?"\\|":a)+"+$"),v="",B=[];i.dense=Array.isArray(e);for(var F=i.skipHidden&&e["!cols"]||[],C=i.skipHidden&&e["!rows"]||[],L=n.s.c;L<=n.e.c;++L)(F[L]||{}).hidden||(B[L]=gl(L));for(var P=0,D=n.s.r;D<=n.e.r;++D)(C[D]||{}).hidden||(v=Voe(e,n,D,B,c,p,a,i),v!=null&&(i.strip&&(v=v.replace(g,"")),(v||i.blankrows!==!1)&&r.push((P++?s:"")+v)));return delete i.dense,r.join("")}function Goe(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=UL(e,t);return r}function qoe(e){var t="",r,i="";if(e==null||e["!ref"]==null)return[];var n=ro(e["!ref"]),a="",c=[],s,p=[],g=Array.isArray(e);for(s=n.s.c;s<=n.e.c;++s)c[s]=gl(s);for(var v=n.s.r;v<=n.e.r;++v)for(a=gc(v),s=n.s.c;s<=n.e.c;++s)if(t=c[s]+a,r=g?(e[v]||[])[s]:e[t],i="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;i=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)i=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}p[p.length]=t+"="+i}return p}function OL(e,t,r){var i=r||{},n=+!i.skipHeader,a=e||{},c=0,s=0;if(a&&i.origin!=null)if(typeof i.origin=="number")c=i.origin;else{var p=typeof i.origin=="string"?Cu(i.origin):i.origin;c=p.r,s=p.c}var g,v={s:{c:0,r:0},e:{c:s,r:c+t.length-1+n}};if(a["!ref"]){var B=ro(a["!ref"]);v.e.c=Math.max(v.e.c,B.e.c),v.e.r=Math.max(v.e.r,B.e.r),c==-1&&(c=B.e.r+1,v.e.r=c+t.length-1+n)}else c==-1&&(c=0,v.e.r=t.length-1+n);var F=i.header||[],C=0;t.forEach(function(P,D){Sd(P).forEach(function(j){(C=F.indexOf(j))==-1&&(F[C=F.length]=j);var q=P[j],H="z",ee="",G=an({c:s+C,r:c+D+n});g=Dv(a,G),q&&typeof q=="object"&&!(q instanceof Date)?a[G]=q:(typeof q=="number"?H="n":typeof q=="boolean"?H="b":typeof q=="string"?H="s":q instanceof Date?(H="d",i.cellDates||(H="n",q=Su(q)),ee=i.dateNF||dn[14]):q===null&&i.nullError&&(H="e",q=0),g?(g.t=H,g.v=q,delete g.w,delete g.R,ee&&(g.z=ee)):a[G]=g={t:H,v:q},ee&&(g.z=ee))})}),v.e.c=Math.max(v.e.c,s+F.length-1);var L=gc(c);if(n)for(C=0;C<F.length;++C)a[gl(C+s)+L]={t:"s",v:F[C]};return a["!ref"]=Zn(v),a}function Koe(e,t){return OL(null,e,t)}function Dv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var i=Cu(t);return e[i.r]||(e[i.r]=[]),e[i.r][i.c]||(e[i.r][i.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Dv(e,an(t)):Dv(e,an({r:t,c:r||0}))}function Woe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function OC(){return{SheetNames:[],Sheets:{}}}function zC(e,t,r,i){var n=1;if(!r)for(;n<=65535&&e.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);n=a&&+a[2]||0;var c=a&&a[1]||r;for(++n;n<=65535&&e.SheetNames.indexOf(r=c+n)!=-1;++n);}if(Iae(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function $oe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var i=Woe(e,t);switch(e.Workbook.Sheets[i]||(e.Workbook.Sheets[i]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[i].Hidden=r}function Xoe(e,t){return e.z=t,e}function zL(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Zoe(e,t,r){return zL(e,"#"+t,r)}function Yoe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Joe(e,t,r,i){for(var n=typeof t!="string"?t:ro(t),a=typeof t=="string"?t:Zn(t),c=n.s.r;c<=n.e.r;++c)for(var s=n.s.c;s<=n.e.c;++s){var p=Dv(e,c,s);p.t="n",p.F=a,delete p.v,c==n.s.r&&s==n.s.c&&(p.f=r,i&&(p.D=!0))}return e}var ele={encode_col:gl,encode_row:gc,encode_cell:an,encode_range:Zn,decode_col:SC,decode_row:BC,split_cell:hee,decode_cell:Cu,decode_range:Cg,format_cell:wf,sheet_add_aoa:GI,sheet_add_json:OL,sheet_add_dom:PL,aoa_to_sheet:Bg,json_to_sheet:Koe,table_to_sheet:RL,table_to_book:moe,sheet_to_csv:UL,sheet_to_txt:Goe,sheet_to_json:h4,sheet_to_html:poe,sheet_to_formulae:qoe,sheet_to_row_object_array:h4,sheet_get_cell:Dv,book_new:OC,book_append_sheet:zC,book_set_sheet_visibility:$oe,cell_set_number_format:Xoe,cell_set_hyperlink:zL,cell_set_internal_link:Zoe,cell_add_comment:Yoe,sheet_set_array_formula:Joe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const tle=()=>{const{admin:e,isAuthorized:t,tokenType:r}=io(),[i,n]=xe.useState([]),[a,c]=xe.useState(!0),[s,p]=xe.useState(""),[g,v]=xe.useState(""),[B,F]=xe.useState([]),[C,L]=xe.useState(!1);xe.useEffect(()=>{t!=null&&(t===!1?(c(!1),p("Please login to access this page.")):t&&r==="admin"&&e?P():t&&r!=="admin"?(c(!1),p("Access denied. Admin authentication required.")):(c(!1),p("Loading admin data...")))},[t,r,e]),xe.useEffect(()=>{const j=i.filter(q=>q.name.toLowerCase().includes(g.toLowerCase())||q.address.toLowerCase().includes(g.toLowerCase())||q.phoneNumber.includes(g)||q.email&&q.email.toLowerCase().includes(g.toLowerCase()));F(j)},[i,g]);const P=async()=>{try{c(!0),p("");const j=await Nr.get("/admin/residents");n(j.data.residents)}catch(j){console.error("Failed to fetch residents:",j),p(`Failed to fetch residents: ${j.response?.data?.message||j.message}`)}finally{c(!1)}},D=async j=>{const q=j.target.files[0];if(!q)return;if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(q.type)){pi.error("Please select a valid Excel file (.xls or .xlsx)");return}L(!0);try{const ee=new FileReader;ee.onload=async G=>{try{const ne=new Uint8Array(G.target.result),Z=u4(ne,{type:"array"}),le=Z.SheetNames[0],J=Z.Sheets[le],te=ele.sheet_to_json(J,{header:1}).slice(1).map(me=>({name:me[0]||"",address:me[1]||"",phoneNumber:me[2]||"",email:me[3]||""})).filter(me=>me.name&&me.address&&me.phoneNumber);if(te.length===0){pi.error("No valid resident data found in the Excel file");return}const K=await Nr.post("/admin/residents/import",{residents:te});pi.success(K.data.message),P()}catch(ne){console.error("Error processing Excel file:",ne),pi.error("Error processing Excel file")}finally{L(!1)}},ee.readAsArrayBuffer(q)}catch(ee){console.error("Error reading file:",ee),pi.error("Error reading file"),L(!1)}};return a?d.jsx("div",{className:"user-management-container",children:d.jsx("div",{className:"loading-spinner"})}):s?d.jsxs("div",{className:"user-management-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsx("div",{children:d.jsx("h1",{children:"Error"})})}),d.jsx("div",{className:"content-card",children:d.jsx("p",{className:"empty-state",children:s})})]}):d.jsxs("div",{className:"user-management-container",children:[d.jsx("div",{className:"analytics-header",children:d.jsxs("div",{children:[d.jsx("h1",{children:"Residents List"}),d.jsx("p",{className:"header-description",children:"View Records of the Barangay Residents"})]})}),d.jsxs("div",{className:"content-card",children:[d.jsx("div",{className:"card-header",children:d.jsxs("div",{className:"header-actions",children:[d.jsxs("div",{className:"search-container",children:[d.jsx("input",{type:"text",placeholder:"Search residents by name, address, phone, or email...",value:g,onChange:j=>v(j.target.value),className:"search-input"}),d.jsx("i",{className:"fas fa-search search-icon"})]}),d.jsx("div",{className:"action-buttons",children:d.jsxs("label",{className:"admin-btn secondary import-btn",children:[d.jsx("i",{className:"fas fa-file-excel"}),C?"Importing...":"Import Residents Data from Excel",d.jsx("input",{type:"file",accept:".xls,.xlsx",onChange:D,style:{display:"none"},disabled:C})]})})]})}),d.jsx("div",{className:"table-container",children:d.jsxs("table",{className:"data-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Name"}),d.jsx("th",{children:"Address"}),d.jsx("th",{children:"Phone Number"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Created"})]})}),d.jsx("tbody",{children:B.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:"5",className:"no-data",children:g?"No residents found matching your search":"No residents found"})}):B.map(j=>d.jsxs("tr",{children:[d.jsx("td",{children:j.name}),d.jsx("td",{children:j.address}),d.jsx("td",{children:j.phoneNumber}),d.jsx("td",{children:j.email||"N/A"}),d.jsx("td",{children:new Date(j.createdAt).toLocaleDateString()})]},j._id))})]})}),d.jsx("div",{className:"table-footer",children:d.jsxs("div",{className:"results-info",children:["Showing ",B.length," of ",i.length," residents"]})})]})]})};var y2={exports:{}};var rle=y2.exports,Ik;function ile(){return Ik||(Ik=1,function(e,t){(function(r,i){e.exports=i()})(rle,function(){var r={},i={};function n(c,s,p){if(i[c]=p,c==="index"){var g="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",v={};return i.shared(v),i.index(r,v),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),r}}n("shared",["exports"],function(c){function s(A,l,u,x){return new(u||(u=Promise))(function(b,E){function N(W){try{z(x.next(W))}catch(ie){E(ie)}}function M(W){try{z(x.throw(W))}catch(ie){E(ie)}}function z(W){var ie;W.done?b(W.value):(ie=W.value,ie instanceof u?ie:new u(function(ue){ue(ie)})).then(N,M)}z((x=x.apply(A,l||[])).next())})}function p(A,l){this.x=A,this.y=l}function g(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var v,B;typeof SuppressedError=="function"&&SuppressedError,p.prototype={clone(){return new p(this.x,this.y)},add(A){return this.clone()._add(A)},sub(A){return this.clone()._sub(A)},multByPoint(A){return this.clone()._multByPoint(A)},divByPoint(A){return this.clone()._divByPoint(A)},mult(A){return this.clone()._mult(A)},div(A){return this.clone()._div(A)},rotate(A){return this.clone()._rotate(A)},rotateAround(A,l){return this.clone()._rotateAround(A,l)},matMult(A){return this.clone()._matMult(A)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(A){return this.x===A.x&&this.y===A.y},dist(A){return Math.sqrt(this.distSqr(A))},distSqr(A){const l=A.x-this.x,u=A.y-this.y;return l*l+u*u},angle(){return Math.atan2(this.y,this.x)},angleTo(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith(A){return this.angleWithSep(A.x,A.y)},angleWithSep(A,l){return Math.atan2(this.x*l-this.y*A,this.x*A+this.y*l)},_matMult(A){const l=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=l,this},_add(A){return this.x+=A.x,this.y+=A.y,this},_sub(A){return this.x-=A.x,this.y-=A.y,this},_mult(A){return this.x*=A,this.y*=A,this},_div(A){return this.x/=A,this.y/=A,this},_multByPoint(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint(A){return this.x/=A.x,this.y/=A.y,this},_unit(){return this._div(this.mag()),this},_perp(){const A=this.y;return this.y=this.x,this.x=-A,this},_rotate(A){const l=Math.cos(A),u=Math.sin(A),x=u*this.x+l*this.y;return this.x=l*this.x-u*this.y,this.y=x,this},_rotateAround(A,l){const u=Math.cos(A),x=Math.sin(A),b=l.y+x*(this.x-l.x)+u*(this.y-l.y);return this.x=l.x+u*(this.x-l.x)-x*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:p},p.convert=function(A){if(A instanceof p)return A;if(Array.isArray(A))return new p(+A[0],+A[1]);if(A.x!==void 0&&A.y!==void 0)return new p(+A.x,+A.y);throw new Error("Expected [x, y] or {x, y} point format")};var F=function(){if(B)return v;function A(l,u,x,b){this.cx=3*l,this.bx=3*(x-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=x,this.p2y=b}return B=1,v=A,A.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var x=l,b=0;b<8;b++){var E=this.sampleCurveX(x)-l;if(Math.abs(E)<u)return x;var N=this.sampleCurveDerivativeX(x);if(Math.abs(N)<1e-6)break;x-=E/N}var M=0,z=1;for(x=l,b=0;b<20&&(E=this.sampleCurveX(x),!(Math.abs(E-l)<u));b++)l>E?M=x:z=x,x=.5*(z-M)+M;return x},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},v}(),C=g(F);let L,P;function D(){return L==null&&(L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L}function j(){if(P==null&&(P=!1,D())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let x=0;x<25;x++){const b=4*x;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(x%5,Math.floor(x/5),1,1)}const u=l.getImageData(0,0,5,5).data;for(let x=0;x<100;x++)if(x%4!=3&&u[x]!==x){P=!0;break}}}return P||!1}var q=1e-6,H=typeof Float32Array<"u"?Float32Array:Array;function ee(){var A=new H(9);return H!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function G(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function ne(){var A=new H(3);return H!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function Z(A){var l=A[0],u=A[1],x=A[2];return Math.sqrt(l*l+u*u+x*x)}function le(A,l,u){var x=new H(3);return x[0]=A,x[1]=l,x[2]=u,x}function J(A,l,u){return A[0]=l[0]+u[0],A[1]=l[1]+u[1],A[2]=l[2]+u[2],A}function ce(A,l,u){return A[0]=l[0]*u,A[1]=l[1]*u,A[2]=l[2]*u,A}function te(A,l,u){var x=l[0],b=l[1],E=l[2],N=u[0],M=u[1],z=u[2];return A[0]=b*z-E*M,A[1]=E*N-x*z,A[2]=x*M-b*N,A}var K,me=Z;function we(A,l,u){var x=l[0],b=l[1],E=l[2],N=l[3];return A[0]=u[0]*x+u[4]*b+u[8]*E+u[12]*N,A[1]=u[1]*x+u[5]*b+u[9]*E+u[13]*N,A[2]=u[2]*x+u[6]*b+u[10]*E+u[14]*N,A[3]=u[3]*x+u[7]*b+u[11]*E+u[15]*N,A}function Fe(){var A=new H(4);return H!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}function he(A,l,u,x){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",E=Math.PI/360;l*=E,x*=E,u*=E;var N=Math.sin(l),M=Math.cos(l),z=Math.sin(u),W=Math.cos(u),ie=Math.sin(x),ue=Math.cos(x);switch(b){case"xyz":A[0]=N*W*ue+M*z*ie,A[1]=M*z*ue-N*W*ie,A[2]=M*W*ie+N*z*ue,A[3]=M*W*ue-N*z*ie;break;case"xzy":A[0]=N*W*ue-M*z*ie,A[1]=M*z*ue-N*W*ie,A[2]=M*W*ie+N*z*ue,A[3]=M*W*ue+N*z*ie;break;case"yxz":A[0]=N*W*ue+M*z*ie,A[1]=M*z*ue-N*W*ie,A[2]=M*W*ie-N*z*ue,A[3]=M*W*ue+N*z*ie;break;case"yzx":A[0]=N*W*ue+M*z*ie,A[1]=M*z*ue+N*W*ie,A[2]=M*W*ie-N*z*ue,A[3]=M*W*ue-N*z*ie;break;case"zxy":A[0]=N*W*ue-M*z*ie,A[1]=M*z*ue+N*W*ie,A[2]=M*W*ie+N*z*ue,A[3]=M*W*ue-N*z*ie;break;case"zyx":A[0]=N*W*ue-M*z*ie,A[1]=M*z*ue+N*W*ie,A[2]=M*W*ie-N*z*ue,A[3]=M*W*ue+N*z*ie;break;default:throw new Error("Unknown angle order "+b)}return A}function Le(){var A=new H(2);return H!=Float32Array&&(A[0]=0,A[1]=0),A}function $e(A,l){var u=new H(2);return u[0]=A,u[1]=l,u}ne(),K=new H(4),H!=Float32Array&&(K[0]=0,K[1]=0,K[2]=0,K[3]=0),ne(),le(1,0,0),le(0,1,0),Fe(),Fe(),ee(),Le();const Ne=8192;function Te(A,l,u){return l*(Ne/(A.tileSize*Math.pow(2,u-A.tileID.overscaledZ)))}function Ge(A,l){return(A%l+l)%l}function Y(A,l,u){return A*(1-u)+l*u}function Ae(A){if(A<=0)return 0;if(A>=1)return 1;const l=A*A,u=l*A;return 4*(A<.5?u:3*(A-l)+u-.75)}function fe(A,l,u,x){const b=new C(A,l,u,x);return E=>b.solve(E)}const be=fe(.25,.1,.25,1);function Me(A,l,u){return Math.min(u,Math.max(l,A))}function ze(A,l,u){const x=u-l,b=((A-l)%x+x)%x+l;return b===l?u:b}function We(A,...l){for(const u of l)for(const x in u)A[x]=u[x];return A}let ut=1;function dt(A,l,u){const x={};for(const b in A)x[b]=l.call(this,A[b],b,A);return x}function zt(A,l,u){const x={};for(const b in A)l.call(this,A[b],b,A)&&(x[b]=A[b]);return x}function ve(A){return Array.isArray(A)?A.map(ve):typeof A=="object"&&A?dt(A,ve):A}const Ct={};function Pt(A){Ct[A]||(typeof console<"u"&&console.warn(A),Ct[A]=!0)}function Ve(A,l,u){return(u.y-A.y)*(l.x-A.x)>(l.y-A.y)*(u.x-A.x)}function lr(A){return typeof WorkerGlobalScope<"u"&&A!==void 0&&A instanceof WorkerGlobalScope}let ir=null;function jr(A){if(ir==null){const l=A.navigator?A.navigator.userAgent:null;ir=!!A.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return ir}function ar(A){return typeof ImageBitmap<"u"&&A instanceof ImageBitmap}const Wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Lr(A,l,u,x,b){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const E=new VideoFrame(A,{timestamp:0});try{const N=E?.format;if(!N||!N.startsWith("BGR")&&!N.startsWith("RGB"))throw new Error(`Unrecognized format ${N}`);const M=N.startsWith("BGR"),z=new Uint8ClampedArray(x*b*4);if(yield E.copyTo(z,function(W,ie,ue,_e,Se){const ke=4*Math.max(-ie,0),Ue=(Math.max(0,ue)-ue)*_e*4+ke,et=4*_e,ht=Math.max(0,ie),Lt=Math.max(0,ue);return{rect:{x:ht,y:Lt,width:Math.min(W.width,ie+_e)-ht,height:Math.min(W.height,ue+Se)-Lt},layout:[{offset:Ue,stride:et}]}}(A,l,u,x,b)),M)for(let W=0;W<z.length;W+=4){const ie=z[W];z[W]=z[W+2],z[W+2]=ie}return z}finally{E.close()}})}let Zr,qr;function wi(A,l,u,x){return A.addEventListener(l,u,x),{unsubscribe:()=>{A.removeEventListener(l,u,x)}}}function Ci(A){return A*Math.PI/180}function $t(A){return A/Math.PI*180}const Ar={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},yr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},it="AbortError";function ye(){return new Error(it)}const Ce={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Re(A){return Ce.REGISTERED_PROTOCOLS[A.substring(0,A.indexOf("://"))]}const Ze="global-dispatcher";class ot extends Error{constructor(l,u,x,b){super(`AJAXError: ${u} (${l}): ${x}`),this.status=l,this.statusText=u,this.url=x,this.body=b}}const vt=()=>lr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Rt=function(A,l){if(/:\/\//.test(A.url)&&!/^https?:|^file:/.test(A.url)){const x=Re(A.url);if(x)return x(A,l);if(lr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,targetMapId:Ze},l)}if(!(/^file:/.test(u=A.url)||/^file:/.test(vt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(x,b){return s(this,void 0,void 0,function*(){const E=new Request(x.url,{method:x.method||"GET",body:x.body,credentials:x.credentials,headers:x.headers,cache:x.cache,referrer:vt(),signal:b.signal});let N,M;x.type!=="json"||E.headers.has("Accept")||E.headers.set("Accept","application/json");try{N=yield fetch(E)}catch(W){throw new ot(0,W.message,x.url,new Blob)}if(!N.ok){const W=yield N.blob();throw new ot(N.status,N.statusText,x.url,W)}M=x.type==="arrayBuffer"||x.type==="image"?N.arrayBuffer():x.type==="json"?N.json():N.text();const z=yield M;if(b.signal.aborted)throw ye();return{data:z,cacheControl:N.headers.get("Cache-Control"),expires:N.headers.get("Expires")}})}(A,l);if(lr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:A,mustQueue:!0,targetMapId:Ze},l)}var u;return function(x,b){return new Promise((E,N)=>{var M;const z=new XMLHttpRequest;z.open(x.method||"GET",x.url,!0),x.type!=="arrayBuffer"&&x.type!=="image"||(z.responseType="arraybuffer");for(const W in x.headers)z.setRequestHeader(W,x.headers[W]);x.type==="json"&&(z.responseType="text",!((M=x.headers)===null||M===void 0)&&M.Accept||z.setRequestHeader("Accept","application/json")),z.withCredentials=x.credentials==="include",z.onerror=()=>{N(new Error(z.statusText))},z.onload=()=>{if(!b.signal.aborted)if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let W=z.response;if(x.type==="json")try{W=JSON.parse(z.response)}catch(ie){return void N(ie)}E({data:W,cacheControl:z.getResponseHeader("Cache-Control"),expires:z.getResponseHeader("Expires")})}else{const W=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});N(new ot(z.status,z.statusText,x.url,W))}},b.signal.addEventListener("abort",()=>{z.abort(),N(ye())}),z.send(x.body)})}(A,l)};function xt(A){if(!A||A.indexOf("://")<=0||A.indexOf("data:image/")===0||A.indexOf("blob:")===0)return!0;const l=new URL(A),u=window.location;return l.protocol===u.protocol&&l.host===u.host}function Gt(A,l,u){u[A]&&u[A].indexOf(l)!==-1||(u[A]=u[A]||[],u[A].push(l))}function er(A,l,u){if(u&&u[A]){const x=u[A].indexOf(l);x!==-1&&u[A].splice(x,1)}}class qt{constructor(l,u={}){We(this,u),this.type=l}}class Mr extends qt{constructor(l,u={}){super("error",We({error:l},u))}}class Fr{on(l,u){return this._listeners=this._listeners||{},Gt(l,u,this._listeners),{unsubscribe:()=>{this.off(l,u)}}}off(l,u){return er(l,u,this._listeners),er(l,u,this._oneTimeListeners),this}once(l,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Gt(l,u,this._oneTimeListeners),this):new Promise(x=>this.once(l,x))}fire(l,u){typeof l=="string"&&(l=new qt(l,u||{}));const x=l.type;if(this.listens(x)){l.target=this;const b=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];for(const M of b)M.call(this,l);const E=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];for(const M of E)er(x,M,this._oneTimeListeners),M.call(this,l);const N=this._eventedParent;N&&(We(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),N.fire(l))}else l instanceof Mr&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,u){return this._eventedParent=l,this._eventedParentData=u,this}}var wt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ei=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ji(A,l){const u={};for(const x in A)x!=="ref"&&(u[x]=A[x]);return ei.forEach(x=>{x in l&&(u[x]=l[x])}),u}function Hr(A,l){if(Array.isArray(A)){if(!Array.isArray(l)||A.length!==l.length)return!1;for(let u=0;u<A.length;u++)if(!Hr(A[u],l[u]))return!1;return!0}if(typeof A=="object"&&A!==null&&l!==null){if(typeof l!="object"||Object.keys(A).length!==Object.keys(l).length)return!1;for(const u in A)if(!Hr(A[u],l[u]))return!1;return!0}return A===l}function Ri(A,l){A.push(l)}function In(A,l,u){Ri(u,{command:"addSource",args:[A,l[A]]})}function Yr(A,l,u){Ri(l,{command:"removeSource",args:[A]}),u[A]=!0}function on(A,l,u,x){Yr(A,u,x),In(A,l,u)}function $i(A,l,u){let x;for(x in A[u])if(Object.prototype.hasOwnProperty.call(A[u],x)&&x!=="data"&&!Hr(A[u][x],l[u][x]))return!1;for(x in l[u])if(Object.prototype.hasOwnProperty.call(l[u],x)&&x!=="data"&&!Hr(A[u][x],l[u][x]))return!1;return!0}function mi(A,l,u,x,b,E){A=A||{},l=l||{};for(const N in A)Object.prototype.hasOwnProperty.call(A,N)&&(Hr(A[N],l[N])||u.push({command:E,args:[x,N,l[N],b]}));for(const N in l)Object.prototype.hasOwnProperty.call(l,N)&&!Object.prototype.hasOwnProperty.call(A,N)&&(Hr(A[N],l[N])||u.push({command:E,args:[x,N,l[N],b]}))}function ln(A){return A.id}function gi(A,l){return A[l.id]=l,A}class dr{constructor(l,u,x,b){this.message=(l?`${l}: `:"")+x,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function De(A,...l){for(const u of l)for(const x in u)A[x]=u[x];return A}class lt extends Error{constructor(l,u){super(u),this.message=u,this.key=l}}class Ye{constructor(l,u=[]){this.parent=l,this.bindings={};for(const[x,b]of u)this.bindings[x]=b}concat(l){return new Ye(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const nt={kind:"null"},Qe={kind:"number"},st={kind:"string"},Tt={kind:"boolean"},sr={kind:"color"},jt={kind:"projectionDefinition"},Kt={kind:"object"},Mt={kind:"value"},Cr={kind:"collator"},Dr={kind:"formatted"},Kr={kind:"padding"},Pr={kind:"colorArray"},Gr={kind:"numberArray"},yi={kind:"resolvedImage"},Fi={kind:"variableAnchorOffsetCollection"};function Ni(A,l){return{kind:"array",itemType:A,N:l}}function _i(A){if(A.kind==="array"){const l=_i(A.itemType);return typeof A.N=="number"?`array<${l}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${l}>`}return A.kind}const Qa=[nt,Qe,st,Tt,sr,jt,Dr,Kt,Ni(Mt),Kr,Gr,Pr,yi,Fi];function La(A,l){if(l.kind==="error")return null;if(A.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!La(A.itemType,l.itemType))&&(typeof A.N!="number"||A.N===l.N))return null}else{if(A.kind===l.kind)return null;if(A.kind==="value"){for(const u of Qa)if(!La(u,l))return null}}return`Expected ${_i(A)} but found ${_i(l)} instead.`}function Ma(A,l){return l.some(u=>u.kind===A.kind)}function ea(A,l){return l.some(u=>u==="null"?A===null:u==="array"?Array.isArray(A):u==="object"?A&&!Array.isArray(A)&&typeof A=="object":u===typeof A)}function xa(A,l){return A.kind==="array"&&l.kind==="array"?A.itemType.kind===l.itemType.kind&&typeof A.N=="number":A.kind===l.kind}const Qs=.96422,iu=.82521,no=4/29,rs=6/29,cA=3*rs*rs,$o=rs*rs*rs,oh=Math.PI/180,lh=180/Math.PI;function Xo(A){return(A%=360)<0&&(A+=360),A}function kn([A,l,u,x]){let b,E;const N=ch((.2225045*(A=Pa(A))+.7168786*(l=Pa(l))+.0606169*(u=Pa(u)))/1);A===l&&l===u?b=E=N:(b=ch((.4360747*A+.3850649*l+.1430804*u)/Qs),E=ch((.0139322*A+.0971045*l+.7141733*u)/iu));const M=116*N-16;return[M<0?0:M,500*(b-N),200*(N-E),x]}function Pa(A){return A<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function ch(A){return A>$o?Math.pow(A,1/3):A/cA+no}function Nh([A,l,u,x]){let b=(A+16)/116,E=isNaN(l)?b:b+l/500,N=isNaN(u)?b:b-u/200;return b=1*Zo(b),E=Qs*Zo(E),N=iu*Zo(N),[To(3.1338561*E-1.6168667*b-.4906146*N),To(-.9787684*E+1.9161415*b+.033454*N),To(.0719453*E-.2289914*b+1.4052427*N),x]}function To(A){return(A=A<=.00304?12.92*A:1.055*Math.pow(A,1/2.4)-.055)<0?0:A>1?1:A}function Zo(A){return A>rs?A*A*A:cA*(A-no)}const uA=Object.hasOwn||function(A,l){return Object.prototype.hasOwnProperty.call(A,l)};function Yo(A,l){return uA(A,l)?A[l]:void 0}function vc(A){return parseInt(A.padEnd(2,A),16)/255}function xc(A,l){return ya(l?A/100:A,0,1)}function ya(A,l,u){return Math.min(Math.max(l,A),u)}function Xi(A){return!A.some(Number.isNaN)}const Eu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Aa(A,l,u){return A+u*(l-A)}function Jo(A,l,u){return A.map((x,b)=>Aa(x,l[b],u))}class Ti{constructor(l,u,x,b=1,E=!0){this.r=l,this.g=u,this.b=x,this.a=b,E||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,u,x,b]))}static parse(l){if(l instanceof Ti)return l;if(typeof l!="string")return;const u=function(x){if((x=x.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Yo(Eu,x);if(b){const[N,M,z]=b;return[N/255,M/255,z/255,1]}if(x.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(x)){const N=x.length<6?1:2;let M=1;return[vc(x.slice(M,M+=N)),vc(x.slice(M,M+=N)),vc(x.slice(M,M+=N)),vc(x.slice(M,M+N)||"ff")]}if(x.startsWith("rgb")){const N=x.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(N){const[M,z,W,ie,ue,_e,Se,ke,Ue,et,ht,Lt]=N,yt=[ie||" ",Se||" ",et].join("");if(yt==="  "||yt==="  /"||yt===",,"||yt===",,,"){const Bt=[W,_e,Ue].join(""),Zt=Bt==="%%%"?100:Bt===""?255:0;if(Zt){const nr=[ya(+z/Zt,0,1),ya(+ue/Zt,0,1),ya(+ke/Zt,0,1),ht?xc(+ht,Lt):1];if(Xi(nr))return nr}}return}}const E=x.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[N,M,z,W,ie,ue,_e,Se,ke]=E,Ue=[z||" ",ie||" ",_e].join("");if(Ue==="  "||Ue==="  /"||Ue===",,"||Ue===",,,"){const et=[+M,ya(+W,0,100),ya(+ue,0,100),Se?xc(+Se,ke):1];if(Xi(et))return function([ht,Lt,yt,Bt]){function Zt(nr){const xr=(nr+ht/30)%12,Rr=Lt*Math.min(yt,1-yt);return yt-Rr*Math.max(-1,Math.min(xr-3,9-xr,1))}return ht=Xo(ht),Lt/=100,yt/=100,[Zt(0),Zt(8),Zt(4),Bt]}(et)}}}(l);return u?new Ti(...u,!1):void 0}get rgb(){const{r:l,g:u,b:x,a:b}=this,E=b||1/0;return this.overwriteGetter("rgb",[l/E,u/E,x/E,b])}get hcl(){return this.overwriteGetter("hcl",function(l){const[u,x,b,E]=kn(l),N=Math.sqrt(x*x+b*b);return[Math.round(1e4*N)?Xo(Math.atan2(b,x)*lh):NaN,N,u,E]}(this.rgb))}get lab(){return this.overwriteGetter("lab",kn(this.rgb))}overwriteGetter(l,u){return Object.defineProperty(this,l,{value:u}),u}toString(){const[l,u,x,b]=this.rgb;return`rgba(${[l,u,x].map(E=>Math.round(255*E)).join(",")},${b})`}static interpolate(l,u,x,b="rgb"){switch(b){case"rgb":{const[E,N,M,z]=Jo(l.rgb,u.rgb,x);return new Ti(E,N,M,z,!1)}case"hcl":{const[E,N,M,z]=l.hcl,[W,ie,ue,_e]=u.hcl;let Se,ke;if(isNaN(E)||isNaN(W))isNaN(E)?isNaN(W)?Se=NaN:(Se=W,M!==1&&M!==0||(ke=ie)):(Se=E,ue!==1&&ue!==0||(ke=N));else{let yt=W-E;W>E&&yt>180?yt-=360:W<E&&E-W>180&&(yt+=360),Se=E+x*yt}const[Ue,et,ht,Lt]=function([yt,Bt,Zt,nr]){return yt=isNaN(yt)?0:yt*oh,Nh([Zt,Math.cos(yt)*Bt,Math.sin(yt)*Bt,nr])}([Se,ke??Aa(N,ie,x),Aa(M,ue,x),Aa(z,_e,x)]);return new Ti(Ue,et,ht,Lt,!1)}case"lab":{const[E,N,M,z]=Nh(Jo(l.lab,u.lab,x));return new Ti(E,N,M,z,!1)}}}}Ti.black=new Ti(0,0,0,1),Ti.white=new Ti(1,1,1,1),Ti.transparent=new Ti(0,0,0,0),Ti.red=new Ti(1,0,0,1);class nu{constructor(l,u,x){this.sensitivity=l?u?"variant":"case":u?"accent":"base",this.locale=x,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,u){return this.collator.compare(l,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ha=["bottom","center","top"];class so{constructor(l,u,x,b,E,N){this.text=l,this.image=u,this.scale=x,this.fontStack=b,this.textColor=E,this.verticalAlign=N}}class Ra{constructor(l){this.sections=l}static fromString(l){return new Ra([new so(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof Ra?l:Ra.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class oi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof oi)return l;if(typeof l=="number")return new oi([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const u of l)if(typeof u!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new oi(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,x){return new oi(Jo(l.values,u.values,x))}}class Hs{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Hs)return l;if(typeof l=="number")return new Hs([l]);if(Array.isArray(l)){for(const u of l)if(typeof u!="number")return;return new Hs(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,x){return new Hs(Jo(l.values,u.values,x))}}class ys{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ys)return l;if(typeof l=="string"){const x=Ti.parse(l);return x?new ys([x]):void 0}if(!Array.isArray(l))return;const u=[];for(const x of l){if(typeof x!="string")return;const b=Ti.parse(x);if(!b)return;u.push(b)}return new ys(u)}toString(){return JSON.stringify(this.values)}static interpolate(l,u,x,b="rgb"){const E=[];if(l.values.length!=u.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${u.values.length}), cannot interpolate.`);for(let N=0;N<l.values.length;N++)E.push(Ti.interpolate(l.values[N],u.values[N],x,b));return new ys(E)}}class An extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}const Va=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Yn{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Yn)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let u=0;u<l.length;u+=2){const x=l[u],b=l[u+1];if(typeof x!="string"||!Va.has(x)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new Yn(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,u,x){const b=l.values,E=u.values;if(b.length!==E.length)throw new An(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${u.toString()}`);const N=[];for(let M=0;M<b.length;M+=2){if(b[M]!==E[M])throw new An(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${b[M]}, to[${M}]: ${E[M]}`);N.push(b[M]);const[z,W]=b[M+1],[ie,ue]=E[M+1];N.push([Aa(z,ie,x),Aa(W,ue,x)])}return new Yn(N)}}class Ls{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Ls({name:l,available:!1}):null}}class _a{constructor(l,u,x){this.from=l,this.to=u,this.transition=x}static interpolate(l,u,x){return new _a(l,u,x)}static parse(l){return l instanceof _a?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new _a(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new _a(l.from,l.to,l.transition):typeof l=="string"?new _a(l,l,1):void 0}}function el(A,l,u,x){return typeof A=="number"&&A>=0&&A<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof u=="number"&&u>=0&&u<=255?x===void 0||typeof x=="number"&&x>=0&&x<=1?null:`Invalid rgba value [${[A,l,u,x].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof x=="number"?[A,l,u,x]:[A,l,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _n(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof _a||A instanceof Ti||A instanceof nu||A instanceof Ra||A instanceof oi||A instanceof Hs||A instanceof ys||A instanceof Yn||A instanceof Ls)return!0;if(Array.isArray(A)){for(const l of A)if(!_n(l))return!1;return!0}if(typeof A=="object"){for(const l in A)if(!_n(A[l]))return!1;return!0}return!1}function Fn(A){if(A===null)return nt;if(typeof A=="string")return st;if(typeof A=="boolean")return Tt;if(typeof A=="number")return Qe;if(A instanceof Ti)return sr;if(A instanceof _a)return jt;if(A instanceof nu)return Cr;if(A instanceof Ra)return Dr;if(A instanceof oi)return Kr;if(A instanceof Hs)return Gr;if(A instanceof ys)return Pr;if(A instanceof Yn)return Fi;if(A instanceof Ls)return yi;if(Array.isArray(A)){const l=A.length;let u;for(const x of A){const b=Fn(x);if(u){if(u===b)continue;u=Mt;break}u=b}return Ni(u||Mt,l)}return Kt}function Wi(A){const l=typeof A;return A===null?"":l==="string"||l==="number"||l==="boolean"?String(A):A instanceof Ti||A instanceof _a||A instanceof Ra||A instanceof oi||A instanceof Hs||A instanceof ys||A instanceof Yn||A instanceof Ls?A.toString():JSON.stringify(A)}class di{constructor(l,u){this.type=l,this.value=u}static parse(l,u){if(l.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!_n(l[1]))return u.error("invalid value");const x=l[1];let b=Fn(x);const E=u.expectedType;return b.kind!=="array"||b.N!==0||!E||E.kind!=="array"||typeof E.N=="number"&&E.N!==0||(b=E),new di(b,x)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Vs={string:st,number:Qe,boolean:Tt,object:Kt};class bi{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");let x,b=1;const E=l[0];if(E==="array"){let M,z;if(l.length>2){const W=l[1];if(typeof W!="string"||!(W in Vs)||W==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);M=Vs[W],b++}else M=Mt;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return u.error('The length argument to "array" must be a positive integer literal',2);z=l[2],b++}x=Ni(M,z)}else{if(!Vs[E])throw new Error(`Types doesn't contain name = ${E}`);x=Vs[E]}const N=[];for(;b<l.length;b++){const M=u.parse(l[b],b,Mt);if(!M)return null;N.push(M)}return new bi(x,N)}evaluate(l){for(let u=0;u<this.args.length;u++){const x=this.args[u].evaluate(l);if(!La(this.type,Fn(x)))return x;if(u===this.args.length-1)throw new An(`Expected value to be of type ${_i(this.type)}, but found ${_i(Fn(x))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Kl={"to-boolean":Tt,"to-color":sr,"to-number":Qe,"to-string":st};class _s{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");const x=l[0];if(!Kl[x])throw new Error(`Can't parse ${x} as it is not part of the known types`);if((x==="to-boolean"||x==="to-string")&&l.length!==2)return u.error("Expected one argument.");const b=Kl[x],E=[];for(let N=1;N<l.length;N++){const M=u.parse(l[N],N,Mt);if(!M)return null;E.push(M)}return new _s(b,E)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let u,x;for(const b of this.args){if(u=b.evaluate(l),x=null,u instanceof Ti)return u;if(typeof u=="string"){const E=l.parseColor(u);if(E)return E}else if(Array.isArray(u)&&(x=u.length<3||u.length>4?`Invalid rgba value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:el(u[0],u[1],u[2],u[3]),!x))return new Ti(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new An(x||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const x of this.args){u=x.evaluate(l);const b=oi.parse(u);if(b)return b}throw new An(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"numberArray":{let u;for(const x of this.args){u=x.evaluate(l);const b=Hs.parse(u);if(b)return b}throw new An(`Could not parse numberArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"colorArray":{let u;for(const x of this.args){u=x.evaluate(l);const b=ys.parse(u);if(b)return b}throw new An(`Could not parse colorArray from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const x of this.args){u=x.evaluate(l);const b=Yn.parse(u);if(b)return b}throw new An(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const x of this.args){if(u=x.evaluate(l),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new An(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ra.fromString(Wi(this.args[0].evaluate(l)));case"resolvedImage":return Ls.fromString(Wi(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return Wi(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Wl=["Unknown","Point","LineString","Polygon"];class $l{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let u=this._parseColorCache.get(l);return u||(u=Ti.parse(l),this._parseColorCache.set(l,u)),u}}class xl{constructor(l,u,x=[],b,E=new Ye,N=[]){this.registry=l,this.path=x,this.key=x.map(M=>`[${M}]`).join(""),this.scope=E,this.errors=N,this.expectedType=b,this._isConstant=u}parse(l,u,x,b,E={}){return u?this.concat(u,x,b)._parse(l,E):this._parse(l,E)}_parse(l,u){function x(b,E,N){return N==="assert"?new bi(E,[b]):N==="coerce"?new _s(E,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const E=this.registry[b];if(E){let N=E.parse(l,this);if(!N)return null;if(this.expectedType){const M=this.expectedType,z=N.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||z.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(z.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(z.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(z.kind)||M.kind==="colorArray"&&["value","string","array"].includes(z.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(z.kind))N=x(N,M,u.typeAnnotation||"coerce");else if(this.checkSubtype(M,z))return null}else N=x(N,M,u.typeAnnotation||"assert")}if(!(N instanceof di)&&N.type.kind!=="resolvedImage"&&this._isConstant(N)){const M=new $l;try{N=new di(N.type,N.evaluate(M))}catch(z){return this.error(z.message),null}}return N}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,u,x){const b=typeof l=="number"?this.path.concat(l):this.path,E=x?this.scope.concat(x):this.scope;return new xl(this.registry,this._isConstant,b,u||null,E,this.errors)}error(l,...u){const x=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new lt(x,l))}checkSubtype(l,u){const x=La(l,u);return x&&this.error(x),x}}class ko{constructor(l,u){this.type=u.type,this.bindings=[].concat(l),this.result=u}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const u of this.bindings)l(u[1]);l(this.result)}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const x=[];for(let E=1;E<l.length-1;E+=2){const N=l[E];if(typeof N!="string")return u.error(`Expected string, but found ${typeof N} instead.`,E);if(/[^a-zA-Z0-9_]/.test(N))return u.error("Variable names must contain only alphanumeric characters or '_'.",E);const M=u.parse(l[E+1],E+1);if(!M)return null;x.push([N,M])}const b=u.parse(l[l.length-1],l.length-1,u.expectedType,x);return b?new ko(x,b):null}outputDefined(){return this.result.outputDefined()}}class Fo{constructor(l,u){this.type=u.type,this.name=l,this.boundExpression=u}static parse(l,u){if(l.length!==2||typeof l[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const x=l[1];return u.scope.has(x)?new Fo(x,u.scope.get(x)):u.error(`Unknown variable "${x}". Make sure "${x}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Tu{constructor(l,u,x){this.type=l,this.index=u,this.input=x}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=u.parse(l[1],1,Qe),b=u.parse(l[2],2,Ni(u.expectedType||Mt));return x&&b?new Tu(b.type.itemType,x,b):null}evaluate(l){const u=this.index.evaluate(l),x=this.input.evaluate(l);if(u<0)throw new An(`Array index out of bounds: ${u} < 0.`);if(u>=x.length)throw new An(`Array index out of bounds: ${u} > ${x.length-1}.`);if(u!==Math.floor(u))throw new An(`Array index must be an integer, but found ${u} instead.`);return x[u]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class uh{constructor(l,u){this.type=Tt,this.needle=l,this.haystack=u}static parse(l,u){if(l.length!==3)return u.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const x=u.parse(l[1],1,Mt),b=u.parse(l[2],2,Mt);return x&&b?Ma(x.type,[Tt,st,Qe,nt,Mt])?new uh(x,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${_i(x.type)} instead`):null}evaluate(l){const u=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!x)return!1;if(!ea(u,["boolean","string","number","null"]))throw new An(`Expected first argument to be of type boolean, string, number or null, but found ${_i(Fn(u))} instead.`);if(!ea(x,["string","array"]))throw new An(`Expected second argument to be of type array or string, but found ${_i(Fn(x))} instead.`);return x.indexOf(u)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class ku{constructor(l,u,x){this.type=Qe,this.needle=l,this.haystack=u,this.fromIndex=x}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const x=u.parse(l[1],1,Mt),b=u.parse(l[2],2,Mt);if(!x||!b)return null;if(!Ma(x.type,[Tt,st,Qe,nt,Mt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${_i(x.type)} instead`);if(l.length===4){const E=u.parse(l[3],3,Qe);return E?new ku(x,b,E):null}return new ku(x,b)}evaluate(l){const u=this.needle.evaluate(l),x=this.haystack.evaluate(l);if(!ea(u,["boolean","string","number","null"]))throw new An(`Expected first argument to be of type boolean, string, number or null, but found ${_i(Fn(u))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),ea(x,["string"])){const E=x.indexOf(u,b);return E===-1?-1:[...x.slice(0,E)].length}if(ea(x,["array"]))return x.indexOf(u,b);throw new An(`Expected second argument to be of type array or string, but found ${_i(Fn(x))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ba{constructor(l,u,x,b,E,N){this.inputType=l,this.type=u,this.input=x,this.cases=b,this.outputs=E,this.otherwise=N}static parse(l,u){if(l.length<5)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return u.error("Expected an even number of arguments.");let x,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const E={},N=[];for(let W=2;W<l.length-1;W+=2){let ie=l[W];const ue=l[W+1];Array.isArray(ie)||(ie=[ie]);const _e=u.concat(W);if(ie.length===0)return _e.error("Expected at least one branch label.");for(const ke of ie){if(typeof ke!="number"&&typeof ke!="string")return _e.error("Branch labels must be numbers or strings.");if(typeof ke=="number"&&Math.abs(ke)>Number.MAX_SAFE_INTEGER)return _e.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ke=="number"&&Math.floor(ke)!==ke)return _e.error("Numeric branch labels must be integer values.");if(x){if(_e.checkSubtype(x,Fn(ke)))return null}else x=Fn(ke);if(E[String(ke)]!==void 0)return _e.error("Branch labels must be unique.");E[String(ke)]=N.length}const Se=u.parse(ue,W,b);if(!Se)return null;b=b||Se.type,N.push(Se)}const M=u.parse(l[1],1,Mt);if(!M)return null;const z=u.parse(l[l.length-1],l.length-1,b);return z?M.type.kind!=="value"&&u.concat(1).checkSubtype(x,M.type)?null:new ba(x,b,M,E,N,z):null}evaluate(l){const u=this.input.evaluate(l);return(Fn(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Wn{constructor(l,u,x){this.type=l,this.branches=u,this.otherwise=x}static parse(l,u){if(l.length<4)return u.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return u.error("Expected an odd number of arguments.");let x;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);const b=[];for(let N=1;N<l.length-1;N+=2){const M=u.parse(l[N],N,Tt);if(!M)return null;const z=u.parse(l[N+1],N+1,x);if(!z)return null;b.push([M,z]),x=x||z.type}const E=u.parse(l[l.length-1],l.length-1,x);if(!E)return null;if(!x)throw new Error("Can't infer output type");return new Wn(x,b,E)}evaluate(l){for(const[u,x]of this.branches)if(u.evaluate(l))return x.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[u,x]of this.branches)l(u),l(x);l(this.otherwise)}outputDefined(){return this.branches.every(([l,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class yc{constructor(l,u,x,b){this.type=l,this.input=u,this.beginIndex=x,this.endIndex=b}static parse(l,u){if(l.length<=2||l.length>=5)return u.error(`Expected 2 or 3 arguments, but found ${l.length-1} instead.`);const x=u.parse(l[1],1,Mt),b=u.parse(l[2],2,Qe);if(!x||!b)return null;if(!Ma(x.type,[Ni(Mt),st,Mt]))return u.error(`Expected first argument to be of type array or string, but found ${_i(x.type)} instead`);if(l.length===4){const E=u.parse(l[3],3,Qe);return E?new yc(x.type,x,b,E):null}return new yc(x.type,x,b)}evaluate(l){const u=this.input.evaluate(l),x=this.beginIndex.evaluate(l);let b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),ea(u,["string"]))return[...u].slice(x,b).join("");if(ea(u,["array"]))return u.slice(x,b);throw new An(`Expected first argument to be of type array or string, but found ${_i(Fn(u))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Xl(A,l){const u=A.length-1;let x,b,E=0,N=u,M=0;for(;E<=N;)if(M=Math.floor((E+N)/2),x=A[M],b=A[M+1],x<=l){if(M===u||l<b)return M;E=M+1}else{if(!(x>l))throw new An("Input is not a number.");N=M-1}return 0}class Zl{constructor(l,u,x){this.type=l,this.input=u,this.labels=[],this.outputs=[];for(const[b,E]of x)this.labels.push(b),this.outputs.push(E)}static parse(l,u){if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error("Expected an even number of arguments.");const x=u.parse(l[1],1,Qe);if(!x)return null;const b=[];let E=null;u.expectedType&&u.expectedType.kind!=="value"&&(E=u.expectedType);for(let N=1;N<l.length;N+=2){const M=N===1?-1/0:l[N],z=l[N+1],W=N,ie=N+1;if(typeof M!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(b.length&&b[b.length-1][0]>=M)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);const ue=u.parse(z,ie,E);if(!ue)return null;E=E||ue.type,b.push([M,ue])}return new Zl(E,x,b)}evaluate(l){const u=this.labels,x=this.outputs;if(u.length===1)return x[0].evaluate(l);const b=this.input.evaluate(l);if(b<=u[0])return x[0].evaluate(l);const E=u.length;return b>=u[E-1]?x[E-1].evaluate(l):x[Xl(u,b)].evaluate(l)}eachChild(l){l(this.input);for(const u of this.outputs)l(u)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function re(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Ie,At,Et=function(){if(At)return Ie;function A(l,u,x,b){this.cx=3*l,this.bx=3*(x-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(b-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=u,this.p2x=x,this.p2y=b}return At=1,Ie=A,A.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,u){if(u===void 0&&(u=1e-6),l<0)return 0;if(l>1)return 1;for(var x=l,b=0;b<8;b++){var E=this.sampleCurveX(x)-l;if(Math.abs(E)<u)return x;var N=this.sampleCurveDerivativeX(x);if(Math.abs(N)<1e-6)break;x-=E/N}var M=0,z=1;for(x=l,b=0;b<20&&(E=this.sampleCurveX(x),!(Math.abs(E-l)<u));b++)l>E?M=x:z=x,x=.5*(z-M)+M;return x},solve:function(l,u){return this.sampleCurveY(this.solveCurveX(l,u))}},Ie}(),Ht=re(Et);class cr{constructor(l,u,x,b,E){this.type=l,this.operator=u,this.interpolation=x,this.input=b,this.labels=[],this.outputs=[];for(const[N,M]of E)this.labels.push(N),this.outputs.push(M)}static interpolationFactor(l,u,x,b){let E=0;if(l.name==="exponential")E=Br(u,l.base,x,b);else if(l.name==="linear")E=Br(u,1,x,b);else if(l.name==="cubic-bezier"){const N=l.controlPoints;E=new Ht(N[0],N[1],N[2],N[3]).solve(Br(u,1,x,b))}return E}static parse(l,u){let[x,b,E,...N]=l;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const W=b[1];if(typeof W!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:W}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const W=b.slice(1);if(W.length!==4||W.some(ie=>typeof ie!="number"||ie<0||ie>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:W}}}if(l.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(E=u.parse(E,2,Qe),!E)return null;const M=[];let z=null;x!=="interpolate-hcl"&&x!=="interpolate-lab"||u.expectedType==Pr?u.expectedType&&u.expectedType.kind!=="value"&&(z=u.expectedType):z=sr;for(let W=0;W<N.length;W+=2){const ie=N[W],ue=N[W+1],_e=W+3,Se=W+4;if(typeof ie!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_e);if(M.length&&M[M.length-1][0]>=ie)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_e);const ke=u.parse(ue,Se,z);if(!ke)return null;z=z||ke.type,M.push([ie,ke])}return xa(z,Qe)||xa(z,jt)||xa(z,sr)||xa(z,Kr)||xa(z,Gr)||xa(z,Pr)||xa(z,Fi)||xa(z,Ni(Qe))?new cr(z,x,b,E,M):u.error(`Type ${_i(z)} is not interpolatable.`)}evaluate(l){const u=this.labels,x=this.outputs;if(u.length===1)return x[0].evaluate(l);const b=this.input.evaluate(l);if(b<=u[0])return x[0].evaluate(l);const E=u.length;if(b>=u[E-1])return x[E-1].evaluate(l);const N=Xl(u,b),M=cr.interpolationFactor(this.interpolation,b,u[N],u[N+1]),z=x[N].evaluate(l),W=x[N+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Aa(z,W,M);case"color":return Ti.interpolate(z,W,M);case"padding":return oi.interpolate(z,W,M);case"colorArray":return ys.interpolate(z,W,M);case"numberArray":return Hs.interpolate(z,W,M);case"variableAnchorOffsetCollection":return Yn.interpolate(z,W,M);case"array":return Jo(z,W,M);case"projectionDefinition":return _a.interpolate(z,W,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return Ti.interpolate(z,W,M,"hcl");case"colorArray":return ys.interpolate(z,W,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Ti.interpolate(z,W,M,"lab");case"colorArray":return ys.interpolate(z,W,M,"lab")}}}eachChild(l){l(this.input);for(const u of this.outputs)l(u)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Br(A,l,u,x){const b=x-u,E=A-u;return b===0?0:l===1?E/b:(Math.pow(l,E)-1)/(Math.pow(l,b)-1)}const $r={color:Ti.interpolate,number:Aa,padding:oi.interpolate,numberArray:Hs.interpolate,colorArray:ys.interpolate,variableAnchorOffsetCollection:Yn.interpolate,array:Jo};class ci{constructor(l,u){this.type=l,this.args=u}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");let x=null;const b=u.expectedType;b&&b.kind!=="value"&&(x=b);const E=[];for(const M of l.slice(1)){const z=u.parse(M,1+E.length,x,void 0,{typeAnnotation:"omit"});if(!z)return null;x=x||z.type,E.push(z)}if(!x)throw new Error("No output type");const N=b&&E.some(M=>La(b,M.type));return new ci(N?Mt:x,E)}evaluate(l){let u,x=null,b=0;for(const E of this.args)if(b++,x=E.evaluate(l),x&&x instanceof Ls&&!x.available&&(u||(u=x.name),x=null,b===this.args.length&&(x=u)),x!==null)break;return x}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function ji(A,l){return A==="=="||A==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Qi(A,l,u,x){return x.compare(l,u)===0}function Zi(A,l,u){const x=A!=="=="&&A!=="!=";return class QL{constructor(E,N,M){this.type=Tt,this.lhs=E,this.rhs=N,this.collator=M,this.hasUntypedArgument=E.type.kind==="value"||N.type.kind==="value"}static parse(E,N){if(E.length!==3&&E.length!==4)return N.error("Expected two or three arguments.");const M=E[0];let z=N.parse(E[1],1,Mt);if(!z)return null;if(!ji(M,z.type))return N.concat(1).error(`"${M}" comparisons are not supported for type '${_i(z.type)}'.`);let W=N.parse(E[2],2,Mt);if(!W)return null;if(!ji(M,W.type))return N.concat(2).error(`"${M}" comparisons are not supported for type '${_i(W.type)}'.`);if(z.type.kind!==W.type.kind&&z.type.kind!=="value"&&W.type.kind!=="value")return N.error(`Cannot compare types '${_i(z.type)}' and '${_i(W.type)}'.`);x&&(z.type.kind==="value"&&W.type.kind!=="value"?z=new bi(W.type,[z]):z.type.kind!=="value"&&W.type.kind==="value"&&(W=new bi(z.type,[W])));let ie=null;if(E.length===4){if(z.type.kind!=="string"&&W.type.kind!=="string"&&z.type.kind!=="value"&&W.type.kind!=="value")return N.error("Cannot use collator to compare non-string types.");if(ie=N.parse(E[3],3,Cr),!ie)return null}return new QL(z,W,ie)}evaluate(E){const N=this.lhs.evaluate(E),M=this.rhs.evaluate(E);if(x&&this.hasUntypedArgument){const z=Fn(N),W=Fn(M);if(z.kind!==W.kind||z.kind!=="string"&&z.kind!=="number")throw new An(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${z.kind}, ${W.kind}) instead.`)}if(this.collator&&!x&&this.hasUntypedArgument){const z=Fn(N),W=Fn(M);if(z.kind!=="string"||W.kind!=="string")return l(E,N,M)}return this.collator?u(E,N,M,this.collator.evaluate(E)):l(E,N,M)}eachChild(E){E(this.lhs),E(this.rhs),this.collator&&E(this.collator)}outputDefined(){return!0}}}const Bn=Zi("==",function(A,l,u){return l===u},Qi),Gs=Zi("!=",function(A,l,u){return l!==u},function(A,l,u,x){return!Qi(0,l,u,x)}),Qn=Zi("<",function(A,l,u){return l<u},function(A,l,u,x){return x.compare(l,u)<0}),da=Zi(">",function(A,l,u){return l>u},function(A,l,u,x){return x.compare(l,u)>0}),Ms=Zi("<=",function(A,l,u){return l<=u},function(A,l,u,x){return x.compare(l,u)<=0}),Da=Zi(">=",function(A,l,u){return l>=u},function(A,l,u,x){return x.compare(l,u)>=0});class yl{constructor(l,u,x){this.type=Cr,this.locale=x,this.caseSensitive=l,this.diacriticSensitive=u}static parse(l,u){if(l.length!==2)return u.error("Expected one argument.");const x=l[1];if(typeof x!="object"||Array.isArray(x))return u.error("Collator options argument must be an object.");const b=u.parse(x["case-sensitive"]!==void 0&&x["case-sensitive"],1,Tt);if(!b)return null;const E=u.parse(x["diacritic-sensitive"]!==void 0&&x["diacritic-sensitive"],1,Tt);if(!E)return null;let N=null;return x.locale&&(N=u.parse(x.locale,1,st),!N)?null:new yl(b,E,N)}evaluate(l){return new nu(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class tl{constructor(l,u,x,b,E){this.type=st,this.number=l,this.locale=u,this.currency=x,this.minFractionDigits=b,this.maxFractionDigits=E}static parse(l,u){if(l.length!==3)return u.error("Expected two arguments.");const x=u.parse(l[1],1,Qe);if(!x)return null;const b=l[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let E=null;if(b.locale&&(E=u.parse(b.locale,1,st),!E))return null;let N=null;if(b.currency&&(N=u.parse(b.currency,1,st),!N))return null;let M=null;if(b["min-fraction-digits"]&&(M=u.parse(b["min-fraction-digits"],1,Qe),!M))return null;let z=null;return b["max-fraction-digits"]&&(z=u.parse(b["max-fraction-digits"],1,Qe),!z)?null:new tl(x,E,N,M,z)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class _l{constructor(l){this.type=Dr,this.sections=l}static parse(l,u){if(l.length<2)return u.error("Expected at least one argument.");const x=l[1];if(!Array.isArray(x)&&typeof x=="object")return u.error("First argument must be an image or text section.");const b=[];let E=!1;for(let N=1;N<=l.length-1;++N){const M=l[N];if(E&&typeof M=="object"&&!Array.isArray(M)){E=!1;let z=null;if(M["font-scale"]&&(z=u.parse(M["font-scale"],1,Qe),!z))return null;let W=null;if(M["text-font"]&&(W=u.parse(M["text-font"],1,Ni(st)),!W))return null;let ie=null;if(M["text-color"]&&(ie=u.parse(M["text-color"],1,sr),!ie))return null;let ue=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!Ha.includes(M["vertical-align"]))return u.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(ue=u.parse(M["vertical-align"],1,st),!ue)return null}const _e=b[b.length-1];_e.scale=z,_e.font=W,_e.textColor=ie,_e.verticalAlign=ue}else{const z=u.parse(l[N],1,Mt);if(!z)return null;const W=z.type.kind;if(W!=="string"&&W!=="value"&&W!=="null"&&W!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");E=!0,b.push({content:z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new _l(b)}evaluate(l){return new Ra(this.sections.map(u=>{const x=u.content.evaluate(l);return Fn(x)===yi?new so("",x,null,null,null,u.verticalAlign?u.verticalAlign.evaluate(l):null):new so(Wi(x),null,u.scale?u.scale.evaluate(l):null,u.font?u.font.evaluate(l).join(","):null,u.textColor?u.textColor.evaluate(l):null,u.verticalAlign?u.verticalAlign.evaluate(l):null)}))}eachChild(l){for(const u of this.sections)l(u.content),u.scale&&l(u.scale),u.font&&l(u.font),u.textColor&&l(u.textColor),u.verticalAlign&&l(u.verticalAlign)}outputDefined(){return!1}}class bl{constructor(l){this.type=yi,this.input=l}static parse(l,u){if(l.length!==2)return u.error("Expected two arguments.");const x=u.parse(l[1],1,st);return x?new bl(x):u.error("No image name provided.")}evaluate(l){const u=this.input.evaluate(l),x=Ls.fromString(u);return x&&l.availableImages&&(x.available=l.availableImages.indexOf(u)>-1),x}eachChild(l){l(this.input)}outputDefined(){return!1}}class wl{constructor(l){this.type=Qe,this.input=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);const x=u.parse(l[1],1);return x?x.type.kind!=="array"&&x.type.kind!=="string"&&x.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${_i(x.type)} instead.`):new wl(x):null}evaluate(l){const u=this.input.evaluate(l);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new An(`Expected value to be of type string or array, but found ${_i(Fn(u))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const wa=8192;function su(A,l){const u=(180+A[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(u*b*wa),Math.round(x*b*wa)]}function _c(A,l){const u=Math.pow(2,l.z);return[(b=(A[0]/wa+l.x)/u,360*b-180),(x=(A[1]/wa+l.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*x)*Math.PI/180))-90)];var x,b}function No(A,l){A[0]=Math.min(A[0],l[0]),A[1]=Math.min(A[1],l[1]),A[2]=Math.max(A[2],l[0]),A[3]=Math.max(A[3],l[1])}function Ps(A,l){return!(A[0]<=l[0]||A[2]>=l[2]||A[1]<=l[1]||A[3]>=l[3])}function Fu(A,l,u){const x=A[0]-l[0],b=A[1]-l[1],E=A[0]-u[0],N=A[1]-u[1];return x*N-E*b==0&&x*E<=0&&b*N<=0}function ao(A,l,u,x){return(b=[x[0]-u[0],x[1]-u[1]])[0]*(E=[l[0]-A[0],l[1]-A[1]])[1]-b[1]*E[0]!=0&&!(!au(A,l,u,x)||!au(u,x,A,l));var b,E}function hA(A,l,u){for(const x of u)for(let b=0;b<x.length-1;++b)if(ao(A,l,x[b],x[b+1]))return!0;return!1}function bc(A,l,u=!1){let x=!1;for(const M of l)for(let z=0;z<M.length-1;z++){if(Fu(A,M[z],M[z+1]))return u;(E=M[z])[1]>(b=A)[1]!=(N=M[z+1])[1]>b[1]&&b[0]<(N[0]-E[0])*(b[1]-E[1])/(N[1]-E[1])+E[0]&&(x=!x)}var b,E,N;return x}function Ga(A,l){for(const u of l)if(bc(A,u))return!0;return!1}function Cl(A,l){for(const u of A)if(!bc(u,l))return!1;for(let u=0;u<A.length-1;++u)if(hA(A[u],A[u+1],l))return!1;return!0}function Nu(A,l){for(const u of l)if(Cl(A,u))return!0;return!1}function au(A,l,u,x){const b=x[0]-u[0],E=x[1]-u[1],N=(A[0]-u[0])*E-b*(A[1]-u[1]),M=(l[0]-u[0])*E-b*(l[1]-u[1]);return N>0&&M<0||N<0&&M>0}function Ca(A,l,u){const x=[];for(let b=0;b<A.length;b++){const E=[];for(let N=0;N<A[b].length;N++){const M=su(A[b][N],u);No(l,M),E.push(M)}x.push(E)}return x}function Iu(A,l,u){const x=[];for(let b=0;b<A.length;b++){const E=Ca(A[b],l,u);x.push(E)}return x}function ou(A,l,u,x){if(A[0]<u[0]||A[0]>u[2]){const b=.5*x;let E=A[0]-u[0]>b?-x:u[0]-A[0]>b?x:0;E===0&&(E=A[0]-u[2]>b?-x:u[2]-A[0]>b?x:0),A[0]+=E}No(l,A)}function wc(A,l,u,x){const b=Math.pow(2,x.z)*wa,E=[x.x*wa,x.y*wa],N=[];for(const M of A)for(const z of M){const W=[z.x+E[0],z.y+E[1]];ou(W,l,u,b),N.push(W)}return N}function Cc(A,l,u,x){const b=Math.pow(2,x.z)*wa,E=[x.x*wa,x.y*wa],N=[];for(const z of A){const W=[];for(const ie of z){const ue=[ie.x+E[0],ie.y+E[1]];No(l,ue),W.push(ue)}N.push(W)}if(l[2]-l[0]<=b/2){(M=l)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const z of N)for(const W of z)ou(W,l,u,b)}var M;return N}class oo{constructor(l,u){this.type=Tt,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(_n(l[1])){const x=l[1];if(x.type==="FeatureCollection"){const b=[];for(const E of x.features){const{type:N,coordinates:M}=E.geometry;N==="Polygon"&&b.push(M),N==="MultiPolygon"&&b.push(...M)}if(b.length)return new oo(x,{type:"MultiPolygon",coordinates:b})}else if(x.type==="Feature"){const b=x.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new oo(x,x.geometry)}else if(x.type==="Polygon"||x.type==="MultiPolygon")return new oo(x,x)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(u,x){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],N=u.canonicalID();if(x.type==="Polygon"){const M=Ca(x.coordinates,E,N),z=wc(u.geometry(),b,E,N);if(!Ps(b,E))return!1;for(const W of z)if(!bc(W,M))return!1}if(x.type==="MultiPolygon"){const M=Iu(x.coordinates,E,N),z=wc(u.geometry(),b,E,N);if(!Ps(b,E))return!1;for(const W of z)if(!Ga(W,M))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(u,x){const b=[1/0,1/0,-1/0,-1/0],E=[1/0,1/0,-1/0,-1/0],N=u.canonicalID();if(x.type==="Polygon"){const M=Ca(x.coordinates,E,N),z=Cc(u.geometry(),b,E,N);if(!Ps(b,E))return!1;for(const W of z)if(!Cl(W,M))return!1}if(x.type==="MultiPolygon"){const M=Iu(x.coordinates,E,N),z=Cc(u.geometry(),b,E,N);if(!Ps(b,E))return!1;for(const W of z)if(!Nu(W,M))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let qa=class{constructor(A=[],l=(u,x)=>u<x?-1:u>x?1:0){if(this.data=A,this.length=this.data.length,this.compare=l,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(A){this.data.push(A),this._up(this.length++)}pop(){if(this.length===0)return;const A=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),A}peek(){return this.data[0]}_up(A){const{data:l,compare:u}=this,x=l[A];for(;A>0;){const b=A-1>>1,E=l[b];if(u(x,E)>=0)break;l[A]=E,A=b}l[A]=x}_down(A){const{data:l,compare:u}=this,x=this.length>>1,b=l[A];for(;A<x;){let E=1+(A<<1);const N=E+1;if(N<this.length&&u(l[N],l[E])<0&&(E=N),u(l[E],b)>=0)break;l[A]=l[E],A=E}l[A]=b}};function lo(A,l,u=0,x=A.length-1,b=Yl){for(;x>u;){if(x-u>600){const z=x-u+1,W=l-u+1,ie=Math.log(z),ue=.5*Math.exp(2*ie/3),_e=.5*Math.sqrt(ie*ue*(z-ue)/z)*(W-z/2<0?-1:1);lo(A,l,Math.max(u,Math.floor(l-W*ue/z+_e)),Math.min(x,Math.floor(l+(z-W)*ue/z+_e)),b)}const E=A[l];let N=u,M=x;for(co(A,u,l),b(A[x],E)>0&&co(A,u,x);N<M;){for(co(A,N,M),N++,M--;b(A[N],E)<0;)N++;for(;b(A[M],E)>0;)M--}b(A[u],E)===0?co(A,u,M):(M++,co(A,M,x)),M<=l&&(u=M+1),l<=M&&(x=M-1)}}function co(A,l,u){const x=A[l];A[l]=A[u],A[u]=x}function Yl(A,l){return A<l?-1:A>l?1:0}function Jl(A,l){if(A.length<=1)return[A];const u=[];let x,b;for(const E of A){const N=hh(E);N!==0&&(E.area=Math.abs(N),b===void 0&&(b=N<0),b===N<0?(x&&u.push(x),x=[E]):x.push(E))}if(x&&u.push(x),l>1)for(let E=0;E<u.length;E++)u[E].length<=l||(lo(u[E],l,1,u[E].length-1,AA),u[E]=u[E].slice(0,l));return u}function AA(A,l){return l.area-A.area}function hh(A){let l=0;for(let u,x,b=0,E=A.length,N=E-1;b<E;N=b++)u=A[b],x=A[N],l+=(x.x-u.x)*(u.y+x.y);return l}const bs=1/298.257223563,dA=bs*(2-bs),ws=Math.PI/180;class Ka{constructor(l){const u=6378.137*ws*1e3,x=Math.cos(l*ws),b=1/(1-dA*(1-x*x)),E=Math.sqrt(b);this.kx=u*E*x,this.ky=u*E*b*(1-dA)}distance(l,u){const x=this.wrap(l[0]-u[0])*this.kx,b=(l[1]-u[1])*this.ky;return Math.sqrt(x*x+b*b)}pointOnLine(l,u){let x,b,E,N,M=1/0;for(let z=0;z<l.length-1;z++){let W=l[z][0],ie=l[z][1],ue=this.wrap(l[z+1][0]-W)*this.kx,_e=(l[z+1][1]-ie)*this.ky,Se=0;ue===0&&_e===0||(Se=(this.wrap(u[0]-W)*this.kx*ue+(u[1]-ie)*this.ky*_e)/(ue*ue+_e*_e),Se>1?(W=l[z+1][0],ie=l[z+1][1]):Se>0&&(W+=ue/this.kx*Se,ie+=_e/this.ky*Se)),ue=this.wrap(u[0]-W)*this.kx,_e=(u[1]-ie)*this.ky;const ke=ue*ue+_e*_e;ke<M&&(M=ke,x=W,b=ie,E=z,N=Se)}return{point:[x,b],index:E,t:Math.max(0,Math.min(1,N))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function Lu(A,l){return l[0]-A[0]}function lu(A){return A[1]-A[0]+1}function Io(A,l){return A[1]>=A[0]&&A[1]<l}function Mu(A,l){if(A[0]>A[1])return[null,null];const u=lu(A);if(l){if(u===2)return[A,null];const b=Math.floor(u/2);return[[A[0],A[0]+b],[A[0]+b,A[1]]]}if(u===1)return[A,null];const x=Math.floor(u/2)-1;return[[A[0],A[0]+x],[A[0]+x+1,A[1]]]}function Bl(A,l){if(!Io(l,A.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let x=l[0];x<=l[1];++x)No(u,A[x]);return u}function en(A){const l=[1/0,1/0,-1/0,-1/0];for(const u of A)for(const x of u)No(l,x);return l}function Lo(A){return A[0]!==-1/0&&A[1]!==-1/0&&A[2]!==1/0&&A[3]!==1/0}function ec(A,l,u){if(!Lo(A)||!Lo(l))return NaN;let x=0,b=0;return A[2]<l[0]&&(x=l[0]-A[2]),A[0]>l[2]&&(x=A[0]-l[2]),A[1]>l[3]&&(b=A[1]-l[3]),A[3]<l[1]&&(b=l[1]-A[3]),u.distance([0,0],[x,b])}function Ba(A,l,u){const x=u.pointOnLine(l,A);return u.distance(A,x.point)}function tc(A,l,u,x,b){const E=Math.min(Ba(A,[u,x],b),Ba(l,[u,x],b)),N=Math.min(Ba(u,[A,l],b),Ba(x,[A,l],b));return Math.min(E,N)}function rl(A,l,u,x,b){if(!Io(l,A.length)||!Io(x,u.length))return 1/0;let E=1/0;for(let N=l[0];N<l[1];++N){const M=A[N],z=A[N+1];for(let W=x[0];W<x[1];++W){const ie=u[W],ue=u[W+1];if(ao(M,z,ie,ue))return 0;E=Math.min(E,tc(M,z,ie,ue,b))}}return E}function Wa(A,l,u,x,b){if(!Io(l,A.length)||!Io(x,u.length))return NaN;let E=1/0;for(let N=l[0];N<=l[1];++N)for(let M=x[0];M<=x[1];++M)if(E=Math.min(E,b.distance(A[N],u[M])),E===0)return E;return E}function pn(A,l,u){if(bc(A,l,!0))return 0;let x=1/0;for(const b of l){const E=b[0],N=b[b.length-1];if(E!==N&&(x=Math.min(x,Ba(A,[N,E],u)),x===0))return x;const M=u.pointOnLine(b,A);if(x=Math.min(x,u.distance(A,M.point)),x===0)return x}return x}function Hn(A,l,u,x){if(!Io(l,A.length))return NaN;for(let E=l[0];E<=l[1];++E)if(bc(A[E],u,!0))return 0;let b=1/0;for(let E=l[0];E<l[1];++E){const N=A[E],M=A[E+1];for(const z of u)for(let W=0,ie=z.length,ue=ie-1;W<ie;ue=W++){const _e=z[ue],Se=z[W];if(ao(N,M,_e,Se))return 0;b=Math.min(b,tc(N,M,_e,Se,x))}}return b}function Cs(A,l){for(const u of A)for(const x of u)if(bc(x,l,!0))return!0;return!1}function os(A,l,u,x=1/0){const b=en(A),E=en(l);if(x!==1/0&&ec(b,E,u)>=x)return x;if(Ps(b,E)){if(Cs(A,l))return 0}else if(Cs(l,A))return 0;let N=1/0;for(const M of A)for(let z=0,W=M.length,ie=W-1;z<W;ie=z++){const ue=M[ie],_e=M[z];for(const Se of l)for(let ke=0,Ue=Se.length,et=Ue-1;ke<Ue;et=ke++){const ht=Se[et],Lt=Se[ke];if(ao(ue,_e,ht,Lt))return 0;N=Math.min(N,tc(ue,_e,ht,Lt,u))}}return N}function rc(A,l,u,x,b,E){if(!E)return;const N=ec(Bl(x,E),b,u);N<l&&A.push([N,E,[0,0]])}function cu(A,l,u,x,b,E,N){if(!E||!N)return;const M=ec(Bl(x,E),Bl(b,N),u);M<l&&A.push([M,E,N])}function Bc(A,l,u,x,b=1/0){let E=Math.min(x.distance(A[0],u[0][0]),b);if(E===0)return E;const N=new qa([[0,[0,A.length-1],[0,0]]],Lu),M=en(u);for(;N.length>0;){const z=N.pop();if(z[0]>=E)continue;const W=z[1],ie=l?50:100;if(lu(W)<=ie){if(!Io(W,A.length))return NaN;if(l){const ue=Hn(A,W,u,x);if(isNaN(ue)||ue===0)return ue;E=Math.min(E,ue)}else for(let ue=W[0];ue<=W[1];++ue){const _e=pn(A[ue],u,x);if(E=Math.min(E,_e),E===0)return 0}}else{const ue=Mu(W,l);rc(N,E,x,A,M,ue[0]),rc(N,E,x,A,M,ue[1])}}return E}function Ah(A,l,u,x,b,E=1/0){let N=Math.min(E,b.distance(A[0],u[0]));if(N===0)return N;const M=new qa([[0,[0,A.length-1],[0,u.length-1]]],Lu);for(;M.length>0;){const z=M.pop();if(z[0]>=N)continue;const W=z[1],ie=z[2],ue=l?50:100,_e=x?50:100;if(lu(W)<=ue&&lu(ie)<=_e){if(!Io(W,A.length)&&Io(ie,u.length))return NaN;let Se;if(l&&x)Se=rl(A,W,u,ie,b),N=Math.min(N,Se);else if(l&&!x){const ke=A.slice(W[0],W[1]+1);for(let Ue=ie[0];Ue<=ie[1];++Ue)if(Se=Ba(u[Ue],ke,b),N=Math.min(N,Se),N===0)return N}else if(!l&&x){const ke=u.slice(ie[0],ie[1]+1);for(let Ue=W[0];Ue<=W[1];++Ue)if(Se=Ba(A[Ue],ke,b),N=Math.min(N,Se),N===0)return N}else Se=Wa(A,W,u,ie,b),N=Math.min(N,Se)}else{const Se=Mu(W,l),ke=Mu(ie,x);cu(M,N,b,A,u,Se[0],ke[0]),cu(M,N,b,A,u,Se[0],ke[1]),cu(M,N,b,A,u,Se[1],ke[0]),cu(M,N,b,A,u,Se[1],ke[1])}}return N}function ZA(A){return A.type==="MultiPolygon"?A.coordinates.map(l=>({type:"Polygon",coordinates:l})):A.type==="MultiLineString"?A.coordinates.map(l=>({type:"LineString",coordinates:l})):A.type==="MultiPoint"?A.coordinates.map(l=>({type:"Point",coordinates:l})):[A]}class Pu{constructor(l,u){this.type=Qe,this.geojson=l,this.geometries=u}static parse(l,u){if(l.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(_n(l[1])){const x=l[1];if(x.type==="FeatureCollection")return new Pu(x,x.features.map(b=>ZA(b.geometry)).flat());if(x.type==="Feature")return new Pu(x,ZA(x.geometry));if("type"in x&&"coordinates"in x)return new Pu(x,ZA(x))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(u,x){const b=u.geometry(),E=b.flat().map(z=>_c([z.x,z.y],u.canonical));if(b.length===0)return NaN;const N=new Ka(E[0][1]);let M=1/0;for(const z of x){switch(z.type){case"Point":M=Math.min(M,Ah(E,!1,[z.coordinates],!1,N,M));break;case"LineString":M=Math.min(M,Ah(E,!1,z.coordinates,!0,N,M));break;case"Polygon":M=Math.min(M,Bc(E,!1,z.coordinates,N,M))}if(M===0)return M}return M}(l,this.geometries);if(l.geometryType()==="LineString")return function(u,x){const b=u.geometry(),E=b.flat().map(z=>_c([z.x,z.y],u.canonical));if(b.length===0)return NaN;const N=new Ka(E[0][1]);let M=1/0;for(const z of x){switch(z.type){case"Point":M=Math.min(M,Ah(E,!0,[z.coordinates],!1,N,M));break;case"LineString":M=Math.min(M,Ah(E,!0,z.coordinates,!0,N,M));break;case"Polygon":M=Math.min(M,Bc(E,!0,z.coordinates,N,M))}if(M===0)return M}return M}(l,this.geometries);if(l.geometryType()==="Polygon")return function(u,x){const b=u.geometry();if(b.length===0||b[0].length===0)return NaN;const E=Jl(b,0).map(z=>z.map(W=>W.map(ie=>_c([ie.x,ie.y],u.canonical)))),N=new Ka(E[0][0][0][1]);let M=1/0;for(const z of x)for(const W of E){switch(z.type){case"Point":M=Math.min(M,Bc([z.coordinates],!1,W,N,M));break;case"LineString":M=Math.min(M,Bc(z.coordinates,!0,W,N,M));break;case"Polygon":M=Math.min(M,os(W,z.coordinates,N,M))}if(M===0)return M}return M}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class dh{constructor(l){this.type=Mt,this.key=l}static parse(l,u){if(l.length!==2)return u.error(`Expected 1 argument, but found ${l.length-1} instead.`);const x=l[1];return x==null?u.error("Global state property must be defined."):typeof x!="string"?u.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new dh(x)}evaluate(l){var u;const x=(u=l.globals)===null||u===void 0?void 0:u.globalState;return x&&Object.keys(x).length!==0?Yo(x,this.key):null}eachChild(){}outputDefined(){return!1}}const Ru={"==":Bn,"!=":Gs,">":da,"<":Qn,">=":Da,"<=":Ms,array:bi,at:Tu,boolean:bi,case:Wn,coalesce:ci,collator:yl,format:_l,image:bl,in:uh,"index-of":ku,interpolate:cr,"interpolate-hcl":cr,"interpolate-lab":cr,length:wl,let:ko,literal:di,match:ba,number:bi,"number-format":tl,object:bi,slice:yc,step:Zl,string:bi,"to-boolean":_s,"to-color":_s,"to-number":_s,"to-string":_s,var:Fo,within:oo,distance:Pu,"global-state":dh};class uo{constructor(l,u,x,b){this.name=l,this.type=u,this._evaluate=x,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,u){const x=l[0],b=uo.definitions[x];if(!b)return u.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0);const E=Array.isArray(b)?b[0]:b.type,N=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,M=N.filter(([W])=>!Array.isArray(W)||W.length===l.length-1);let z=null;for(const[W,ie]of M){z=new xl(u.registry,Sc,u.path,null,u.scope);const ue=[];let _e=!1;for(let Se=1;Se<l.length;Se++){const ke=l[Se],Ue=Array.isArray(W)?W[Se-1]:W.type,et=z.parse(ke,1+ue.length,Ue);if(!et){_e=!0;break}ue.push(et)}if(!_e)if(Array.isArray(W)&&W.length!==ue.length)z.error(`Expected ${W.length} arguments, but found ${ue.length} instead.`);else{for(let Se=0;Se<ue.length;Se++){const ke=Array.isArray(W)?W[Se]:W.type,Ue=ue[Se];z.concat(Se+1).checkSubtype(ke,Ue.type)}if(z.errors.length===0)return new uo(x,E,ie,ue)}}if(M.length===1)u.errors.push(...z.errors);else{const W=(M.length?M:N).map(([ue])=>{return _e=ue,Array.isArray(_e)?`(${_e.map(_i).join(", ")})`:`(${_i(_e.type)}...)`;var _e}).join(" | "),ie=[];for(let ue=1;ue<l.length;ue++){const _e=u.parse(l[ue],1+ie.length);if(!_e)return null;ie.push(_i(_e.type))}u.error(`Expected arguments of type ${W}, but found (${ie.join(", ")}) instead.`)}return null}static register(l,u){uo.definitions=u;for(const x in u)l[x]=uo}}function il(A,[l,u,x,b]){l=l.evaluate(A),u=u.evaluate(A),x=x.evaluate(A);const E=b?b.evaluate(A):1,N=el(l,u,x,E);if(N)throw new An(N);return new Ti(l/255,u/255,x/255,E,!1)}function fh(A,l){return A in l}function ho(A,l){const u=l[A];return u===void 0?null:u}function fa(A){return{type:A}}function Sc(A){if(A instanceof Fo)return Sc(A.boundExpression);if(A instanceof uo&&A.name==="error"||A instanceof yl||A instanceof oo||A instanceof Pu||A instanceof dh)return!1;const l=A instanceof _s||A instanceof bi;let u=!0;return A.eachChild(x=>{u=l?u&&Sc(x):u&&x instanceof di}),!!u&&ph(A)&&Du(A,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ph(A){if(A instanceof uo&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof oo||A instanceof Pu)return!1;let l=!0;return A.eachChild(u=>{l&&!ph(u)&&(l=!1)}),l}function uu(A){if(A instanceof uo&&A.name==="feature-state")return!1;let l=!0;return A.eachChild(u=>{l&&!uu(u)&&(l=!1)}),l}function Du(A,l){if(A instanceof uo&&l.indexOf(A.name)>=0)return!1;let u=!0;return A.eachChild(x=>{u&&!Du(x,l)&&(u=!1)}),u}function fA(A){return{result:"success",value:A}}function Sl(A){return{result:"error",value:A}}function hu(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function ju(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Rs(A){return!!A.expression&&A.expression.interpolated}function Ii(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function pa(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)&&Fn(A)===Kt}function Ih(A){return A}function El(A,l){const u=A.stops&&typeof A.stops[0][0]=="object",x=u||!(u||A.property!==void 0),b=A.type||(Rs(l)?"exponential":"interval"),E=function(ie){switch(ie.type){case"color":return Ti.parse;case"padding":return oi.parse;case"numberArray":return Hs.parse;case"colorArray":return ys.parse;default:return null}}(l);if(E&&((A=De({},A)).stops&&(A.stops=A.stops.map(ie=>[ie[0],E(ie[1])])),A.default=E(A.default?A.default:l.default)),A.colorSpace&&(N=A.colorSpace)!=="rgb"&&N!=="hcl"&&N!=="lab")throw new Error(`Unknown color space: "${A.colorSpace}"`);var N;const M=function(ie){switch(ie){case"exponential":return Lh;case"interval":return Tl;case"categorical":return mh;case"identity":return pA;default:throw new Error(`Unknown function type "${ie}"`)}}(b);let z,W;if(b==="categorical"){z=Object.create(null);for(const ie of A.stops)z[ie[0]]=ie[1];W=typeof A.stops[0][0]}if(u){const ie={},ue=[];for(let ke=0;ke<A.stops.length;ke++){const Ue=A.stops[ke],et=Ue[0].zoom;ie[et]===void 0&&(ie[et]={zoom:et,type:A.type,property:A.property,default:A.default,stops:[]},ue.push(et)),ie[et].stops.push([Ue[0].value,Ue[1]])}const _e=[];for(const ke of ue)_e.push([ie[ke].zoom,El(ie[ke],l)]);const Se={name:"linear"};return{kind:"composite",interpolationType:Se,interpolationFactor:cr.interpolationFactor.bind(void 0,Se),zoomStops:_e.map(ke=>ke[0]),evaluate:({zoom:ke},Ue)=>Lh({stops:_e,base:A.base},l,ke).evaluate(ke,Ue)}}if(x){const ie=b==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:ie,interpolationFactor:cr.interpolationFactor.bind(void 0,ie),zoomStops:A.stops.map(ue=>ue[0]),evaluate:({zoom:ue})=>M(A,l,ue,z,W)}}return{kind:"source",evaluate(ie,ue){const _e=ue&&ue.properties?ue.properties[A.property]:void 0;return _e===void 0?Au(A.default,l.default):M(A,l,_e,z,W)}}}function Au(A,l,u){return A!==void 0?A:l!==void 0?l:u!==void 0?u:void 0}function mh(A,l,u,x,b){return Au(typeof u===b?x[u]:void 0,A.default,l.default)}function Tl(A,l,u){if(Ii(u)!=="number")return Au(A.default,l.default);const x=A.stops.length;if(x===1||u<=A.stops[0][0])return A.stops[0][1];if(u>=A.stops[x-1][0])return A.stops[x-1][1];const b=Xl(A.stops.map(E=>E[0]),u);return A.stops[b][1]}function Lh(A,l,u){const x=A.base!==void 0?A.base:1;if(Ii(u)!=="number")return Au(A.default,l.default);const b=A.stops.length;if(b===1||u<=A.stops[0][0])return A.stops[0][1];if(u>=A.stops[b-1][0])return A.stops[b-1][1];const E=Xl(A.stops.map(ie=>ie[0]),u),N=function(ie,ue,_e,Se){const ke=Se-_e,Ue=ie-_e;return ke===0?0:ue===1?Ue/ke:(Math.pow(ue,Ue)-1)/(Math.pow(ue,ke)-1)}(u,x,A.stops[E][0],A.stops[E+1][0]),M=A.stops[E][1],z=A.stops[E+1][1],W=$r[l.type]||Ih;return typeof M.evaluate=="function"?{evaluate(...ie){const ue=M.evaluate.apply(void 0,ie),_e=z.evaluate.apply(void 0,ie);if(ue!==void 0&&_e!==void 0)return W(ue,_e,N,A.colorSpace)}}:W(M,z,N,A.colorSpace)}function pA(A,l,u){switch(l.type){case"color":u=Ti.parse(u);break;case"formatted":u=Ra.fromString(u.toString());break;case"resolvedImage":u=Ls.fromString(u.toString());break;case"padding":u=oi.parse(u);break;case"colorArray":u=ys.parse(u);break;case"numberArray":u=Hs.parse(u);break;default:Ii(u)===l.type||l.type==="enum"&&l.values[u]||(u=void 0)}return Au(u,A.default,l.default)}uo.register(Ru,{error:[{kind:"error"},[st],(A,[l])=>{throw new An(l.evaluate(A))}],typeof:[st,[Mt],(A,[l])=>_i(Fn(l.evaluate(A)))],"to-rgba":[Ni(Qe,4),[sr],(A,[l])=>{const[u,x,b,E]=l.evaluate(A).rgb;return[255*u,255*x,255*b,E]}],rgb:[sr,[Qe,Qe,Qe],il],rgba:[sr,[Qe,Qe,Qe,Qe],il],has:{type:Tt,overloads:[[[st],(A,[l])=>fh(l.evaluate(A),A.properties())],[[st,Kt],(A,[l,u])=>fh(l.evaluate(A),u.evaluate(A))]]},get:{type:Mt,overloads:[[[st],(A,[l])=>ho(l.evaluate(A),A.properties())],[[st,Kt],(A,[l,u])=>ho(l.evaluate(A),u.evaluate(A))]]},"feature-state":[Mt,[st],(A,[l])=>ho(l.evaluate(A),A.featureState||{})],properties:[Kt,[],A=>A.properties()],"geometry-type":[st,[],A=>A.geometryType()],id:[Mt,[],A=>A.id()],zoom:[Qe,[],A=>A.globals.zoom],"heatmap-density":[Qe,[],A=>A.globals.heatmapDensity||0],elevation:[Qe,[],A=>A.globals.elevation||0],"line-progress":[Qe,[],A=>A.globals.lineProgress||0],accumulated:[Mt,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[Qe,fa(Qe),(A,l)=>{let u=0;for(const x of l)u+=x.evaluate(A);return u}],"*":[Qe,fa(Qe),(A,l)=>{let u=1;for(const x of l)u*=x.evaluate(A);return u}],"-":{type:Qe,overloads:[[[Qe,Qe],(A,[l,u])=>l.evaluate(A)-u.evaluate(A)],[[Qe],(A,[l])=>-l.evaluate(A)]]},"/":[Qe,[Qe,Qe],(A,[l,u])=>l.evaluate(A)/u.evaluate(A)],"%":[Qe,[Qe,Qe],(A,[l,u])=>l.evaluate(A)%u.evaluate(A)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(A,[l,u])=>Math.pow(l.evaluate(A),u.evaluate(A))],sqrt:[Qe,[Qe],(A,[l])=>Math.sqrt(l.evaluate(A))],log10:[Qe,[Qe],(A,[l])=>Math.log(l.evaluate(A))/Math.LN10],ln:[Qe,[Qe],(A,[l])=>Math.log(l.evaluate(A))],log2:[Qe,[Qe],(A,[l])=>Math.log(l.evaluate(A))/Math.LN2],sin:[Qe,[Qe],(A,[l])=>Math.sin(l.evaluate(A))],cos:[Qe,[Qe],(A,[l])=>Math.cos(l.evaluate(A))],tan:[Qe,[Qe],(A,[l])=>Math.tan(l.evaluate(A))],asin:[Qe,[Qe],(A,[l])=>Math.asin(l.evaluate(A))],acos:[Qe,[Qe],(A,[l])=>Math.acos(l.evaluate(A))],atan:[Qe,[Qe],(A,[l])=>Math.atan(l.evaluate(A))],min:[Qe,fa(Qe),(A,l)=>Math.min(...l.map(u=>u.evaluate(A)))],max:[Qe,fa(Qe),(A,l)=>Math.max(...l.map(u=>u.evaluate(A)))],abs:[Qe,[Qe],(A,[l])=>Math.abs(l.evaluate(A))],round:[Qe,[Qe],(A,[l])=>{const u=l.evaluate(A);return u<0?-Math.round(-u):Math.round(u)}],floor:[Qe,[Qe],(A,[l])=>Math.floor(l.evaluate(A))],ceil:[Qe,[Qe],(A,[l])=>Math.ceil(l.evaluate(A))],"filter-==":[Tt,[st,Mt],(A,[l,u])=>A.properties()[l.value]===u.value],"filter-id-==":[Tt,[Mt],(A,[l])=>A.id()===l.value],"filter-type-==":[Tt,[st],(A,[l])=>A.geometryType()===l.value],"filter-<":[Tt,[st,Mt],(A,[l,u])=>{const x=A.properties()[l.value],b=u.value;return typeof x==typeof b&&x<b}],"filter-id-<":[Tt,[Mt],(A,[l])=>{const u=A.id(),x=l.value;return typeof u==typeof x&&u<x}],"filter->":[Tt,[st,Mt],(A,[l,u])=>{const x=A.properties()[l.value],b=u.value;return typeof x==typeof b&&x>b}],"filter-id->":[Tt,[Mt],(A,[l])=>{const u=A.id(),x=l.value;return typeof u==typeof x&&u>x}],"filter-<=":[Tt,[st,Mt],(A,[l,u])=>{const x=A.properties()[l.value],b=u.value;return typeof x==typeof b&&x<=b}],"filter-id-<=":[Tt,[Mt],(A,[l])=>{const u=A.id(),x=l.value;return typeof u==typeof x&&u<=x}],"filter->=":[Tt,[st,Mt],(A,[l,u])=>{const x=A.properties()[l.value],b=u.value;return typeof x==typeof b&&x>=b}],"filter-id->=":[Tt,[Mt],(A,[l])=>{const u=A.id(),x=l.value;return typeof u==typeof x&&u>=x}],"filter-has":[Tt,[Mt],(A,[l])=>l.value in A.properties()],"filter-has-id":[Tt,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[Tt,[Ni(st)],(A,[l])=>l.value.indexOf(A.geometryType())>=0],"filter-id-in":[Tt,[Ni(Mt)],(A,[l])=>l.value.indexOf(A.id())>=0],"filter-in-small":[Tt,[st,Ni(Mt)],(A,[l,u])=>u.value.indexOf(A.properties()[l.value])>=0],"filter-in-large":[Tt,[st,Ni(Mt)],(A,[l,u])=>function(x,b,E,N){for(;E<=N;){const M=E+N>>1;if(b[M]===x)return!0;b[M]>x?N=M-1:E=M+1}return!1}(A.properties()[l.value],u.value,0,u.value.length-1)],all:{type:Tt,overloads:[[[Tt,Tt],(A,[l,u])=>l.evaluate(A)&&u.evaluate(A)],[fa(Tt),(A,l)=>{for(const u of l)if(!u.evaluate(A))return!1;return!0}]]},any:{type:Tt,overloads:[[[Tt,Tt],(A,[l,u])=>l.evaluate(A)||u.evaluate(A)],[fa(Tt),(A,l)=>{for(const u of l)if(u.evaluate(A))return!0;return!1}]]},"!":[Tt,[Tt],(A,[l])=>!l.evaluate(A)],"is-supported-script":[Tt,[st],(A,[l])=>{const u=A.globals&&A.globals.isSupportedScript;return!u||u(l.evaluate(A))}],upcase:[st,[st],(A,[l])=>l.evaluate(A).toUpperCase()],downcase:[st,[st],(A,[l])=>l.evaluate(A).toLowerCase()],concat:[st,fa(Mt),(A,l)=>l.map(u=>Wi(u.evaluate(A))).join("")],"resolved-locale":[st,[Cr],(A,[l])=>l.evaluate(A).resolvedLocale()]});class Ec{constructor(l,u,x){this.expression=l,this._warningHistory={},this._evaluator=new $l,this._defaultValue=u?function(b){if(b.type==="color"&&pa(b.default))return new Ti(0,0,0,0);switch(b.type){case"color":return Ti.parse(b.default)||null;case"padding":return oi.parse(b.default)||null;case"numberArray":return Hs.parse(b.default)||null;case"colorArray":return ys.parse(b.default)||null;case"variableAnchorOffsetCollection":return Yn.parse(b.default)||null;case"projectionDefinition":return _a.parse(b.default)||null;default:return b.default===void 0?null:b.default}}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this._globalState=x}evaluateWithoutErrorHandling(l,u,x,b,E,N){return this._globalState&&(l=sl(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=u,this._evaluator.featureState=x,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=N,this.expression.evaluate(this._evaluator)}evaluate(l,u,x,b,E,N){this._globalState&&(l=sl(l,this._globalState)),this._evaluator.globals=l,this._evaluator.feature=u||null,this._evaluator.featureState=x||null,this._evaluator.canonical=b,this._evaluator.availableImages=E||null,this._evaluator.formattedSection=N||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new An(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function kl(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Ru}function du(A,l,u){const x=new xl(Ru,Sc,[],l?function(E){const N={color:sr,string:st,number:Qe,enum:st,boolean:Tt,formatted:Dr,padding:Kr,numberArray:Gr,colorArray:Pr,projectionDefinition:jt,resolvedImage:yi,variableAnchorOffsetCollection:Fi};return E.type==="array"?Ni(N[E.value]||Mt,E.length):N[E.type]}(l):void 0),b=x.parse(A,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return b?fA(new Ec(b,l,u)):Sl(x.errors)}class gh{constructor(l,u,x){this.kind=l,this._styleExpression=u,this.isStateDependent=l!=="constant"&&!uu(u.expression),this.globalStateRefs=nl(u.expression),this._globalState=x}evaluateWithoutErrorHandling(l,u,x,b,E,N){return this._globalState&&(l=sl(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,u,x,b,E,N)}evaluate(l,u,x,b,E,N){return this._globalState&&(l=sl(l,this._globalState)),this._styleExpression.evaluate(l,u,x,b,E,N)}}class Ao{constructor(l,u,x,b,E){this.kind=l,this.zoomStops=x,this._styleExpression=u,this.isStateDependent=l!=="camera"&&!uu(u.expression),this.globalStateRefs=nl(u.expression),this.interpolationType=b,this._globalState=E}evaluateWithoutErrorHandling(l,u,x,b,E,N){return this._globalState&&(l=sl(l,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(l,u,x,b,E,N)}evaluate(l,u,x,b,E,N){return this._globalState&&(l=sl(l,this._globalState)),this._styleExpression.evaluate(l,u,x,b,E,N)}interpolationFactor(l,u,x){return this.interpolationType?cr.interpolationFactor(this.interpolationType,l,u,x):0}}function fo(A,l,u){const x=du(A,l,u);if(x.result==="error")return x;const b=x.value.expression,E=ph(b);if(!E&&!hu(l))return Sl([new lt("","data expressions not supported")]);const N=Du(b,["zoom"]);if(!N&&!ju(l))return Sl([new lt("","zoom expressions not supported")]);const M=Fl(b);return M||N?M instanceof lt?Sl([M]):M instanceof cr&&!Rs(l)?Sl([new lt("",'"interpolate" expressions cannot be used with this property')]):fA(M?new Ao(E?"camera":"composite",x.value,M.labels,M instanceof cr?M.interpolation:void 0,u):new gh(E?"constant":"source",x.value,u)):Sl([new lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Tc{constructor(l,u){this._parameters=l,this._specification=u,De(this,El(this._parameters,this._specification))}static deserialize(l){return new Tc(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Fl(A){let l=null;if(A instanceof ko)l=Fl(A.result);else if(A instanceof ci){for(const u of A.args)if(l=Fl(u),l)break}else(A instanceof Zl||A instanceof cr)&&A.input instanceof uo&&A.input.name==="zoom"&&(l=A);return l instanceof lt||A.eachChild(u=>{const x=Fl(u);x instanceof lt?l=x:!l&&x?l=new lt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&x&&l!==x&&(l=new lt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function nl(A,l=new Set){return A instanceof dh&&l.add(A.key),A.eachChild(u=>{nl(u,l)}),l}function sl(A,l){const{zoom:u,heatmapDensity:x,elevation:b,lineProgress:E,isSupportedScript:N,accumulated:M}=A??{};return{zoom:u,heatmapDensity:x,elevation:b,lineProgress:E,isSupportedScript:N,accumulated:M,globalState:l}}function mA(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const l of A.slice(1))if(!mA(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const gA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fu(A,l){if(A==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};mA(A)||(A=mn(A));const u=du(A,gA,l);if(u.result==="error")throw new Error(u.value.map(x=>`${x.key}: ${x.message}`).join(", "));return{filter:(x,b,E)=>u.value.evaluate(x,b,{},E),needGeometry:Bs(A),getGlobalStateRefs:()=>nl(u.value.expression)}}function ma(A,l){return A<l?-1:A>l?1:0}function Bs(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let l=1;l<A.length;l++)if(Bs(A[l]))return!0;return!1}function mn(A){if(!A)return!0;const l=A[0];return A.length<=1?l!=="any":l==="=="?ic(A[1],A[2],"=="):l==="!="?Nl(ic(A[1],A[2],"==")):l==="<"||l===">"||l==="<="||l===">="?ic(A[1],A[2],l):l==="any"?(u=A.slice(1),["any"].concat(u.map(mn))):l==="all"?["all"].concat(A.slice(1).map(mn)):l==="none"?["all"].concat(A.slice(1).map(mn).map(Nl)):l==="in"?al(A[1],A.slice(2)):l==="!in"?Nl(al(A[1],A.slice(2))):l==="has"?Mh(A[1]):l!=="!has"||Nl(Mh(A[1]));var u}function ic(A,l,u){switch(A){case"$type":return[`filter-type-${u}`,l];case"$id":return[`filter-id-${u}`,l];default:return[`filter-${u}`,A,l]}}function al(A,l){if(l.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(u=>typeof u!=typeof l[0])?["filter-in-large",A,["literal",l.sort(ma)]]:["filter-in-small",A,["literal",l]]}}function Mh(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Nl(A){return["!",A]}function Ph(A){const l=typeof A;if(l==="number"||l==="boolean"||l==="string"||A==null)return JSON.stringify(A);if(Array.isArray(A)){let b="[";for(const E of A)b+=`${Ph(E)},`;return`${b}]`}const u=Object.keys(A).sort();let x="{";for(let b=0;b<u.length;b++)x+=`${JSON.stringify(u[b])}:${Ph(A[u[b]])},`;return`${x}}`}function Il(A){let l="";for(const u of ei)l+=`/${Ph(A[u])}`;return l}function $a(A){const l=A.value;return l?[new dr(A.key,l,"constants have been deprecated as of v8")]:[]}function bn(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Uu(A){if(Array.isArray(A))return A.map(Uu);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const l={};for(const u in A)l[u]=Uu(A[u]);return l}return bn(A)}function ja(A){const l=A.key,u=A.value,x=A.valueSpec||{},b=A.objectElementValidators||{},E=A.style,N=A.styleSpec,M=A.validateSpec;let z=[];const W=Ii(u);if(W!=="object")return[new dr(l,u,`object expected, ${W} found`)];for(const ie in u){const ue=ie.split(".")[0],_e=Yo(x,ue)||x["*"];let Se;if(Yo(b,ue))Se=b[ue];else if(Yo(x,ue))Se=M;else if(b["*"])Se=b["*"];else{if(!x["*"]){z.push(new dr(l,u[ie],`unknown property "${ie}"`));continue}Se=M}z=z.concat(Se({key:(l&&`${l}.`)+ie,value:u[ie],valueSpec:_e,style:E,styleSpec:N,object:u,objectKey:ie,validateSpec:M},u))}for(const ie in x)b[ie]||x[ie].required&&x[ie].default===void 0&&u[ie]===void 0&&z.push(new dr(l,u,`missing required property "${ie}"`));return z}function Ll(A){const l=A.value,u=A.valueSpec,x=A.style,b=A.styleSpec,E=A.key,N=A.arrayElementValidator||A.validateSpec;if(Ii(l)!=="array")return[new dr(E,l,`array expected, ${Ii(l)} found`)];if(u.length&&l.length!==u.length)return[new dr(E,l,`array length ${u.length} expected, length ${l.length} found`)];if(u["min-length"]&&l.length<u["min-length"])return[new dr(E,l,`array length at least ${u["min-length"]} expected, length ${l.length} found`)];let M={type:u.value,values:u.values};b.$version<7&&(M.function=u.function),Ii(u.value)==="object"&&(M=u.value);let z=[];for(let W=0;W<l.length;W++)z=z.concat(N({array:l,arrayIndex:W,value:l[W],valueSpec:M,validateSpec:A.validateSpec,style:x,styleSpec:b,key:`${E}[${W}]`}));return z}function qs(A){const l=A.key,u=A.value,x=A.valueSpec;let b=Ii(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new dr(l,u,`number expected, ${b} found`)]:"minimum"in x&&u<x.minimum?[new dr(l,u,`${u} is less than the minimum value ${x.minimum}`)]:"maximum"in x&&u>x.maximum?[new dr(l,u,`${u} is greater than the maximum value ${x.maximum}`)]:[]}function nc(A){const l=A.valueSpec,u=bn(A.value.type);let x,b,E,N={};const M=u!=="categorical"&&A.value.property===void 0,z=!M,W=Ii(A.value.stops)==="array"&&Ii(A.value.stops[0])==="array"&&Ii(A.value.stops[0][0])==="object",ie=ja({key:A.key,value:A.value,valueSpec:A.styleSpec.function,validateSpec:A.validateSpec,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Se){if(u==="identity")return[new dr(Se.key,Se.value,'identity function may not have a "stops" property')];let ke=[];const Ue=Se.value;return ke=ke.concat(Ll({key:Se.key,value:Ue,valueSpec:Se.valueSpec,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,arrayElementValidator:ue})),Ii(Ue)==="array"&&Ue.length===0&&ke.push(new dr(Se.key,Ue,"array must have at least one stop")),ke},default:function(Se){return Se.validateSpec({key:Se.key,value:Se.value,valueSpec:l,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec})}}});return u==="identity"&&M&&ie.push(new dr(A.key,A.value,'missing required property "property"')),u==="identity"||A.value.stops||ie.push(new dr(A.key,A.value,'missing required property "stops"')),u==="exponential"&&A.valueSpec.expression&&!Rs(A.valueSpec)&&ie.push(new dr(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(z&&!hu(A.valueSpec)?ie.push(new dr(A.key,A.value,"property functions not supported")):M&&!ju(A.valueSpec)&&ie.push(new dr(A.key,A.value,"zoom functions not supported"))),u!=="categorical"&&!W||A.value.property!==void 0||ie.push(new dr(A.key,A.value,'"property" property is required')),ie;function ue(Se){let ke=[];const Ue=Se.value,et=Se.key;if(Ii(Ue)!=="array")return[new dr(et,Ue,`array expected, ${Ii(Ue)} found`)];if(Ue.length!==2)return[new dr(et,Ue,`array length 2 expected, length ${Ue.length} found`)];if(W){if(Ii(Ue[0])!=="object")return[new dr(et,Ue,`object expected, ${Ii(Ue[0])} found`)];if(Ue[0].zoom===void 0)return[new dr(et,Ue,"object stop key must have zoom")];if(Ue[0].value===void 0)return[new dr(et,Ue,"object stop key must have value")];if(E&&E>bn(Ue[0].zoom))return[new dr(et,Ue[0].zoom,"stop zoom values must appear in ascending order")];bn(Ue[0].zoom)!==E&&(E=bn(Ue[0].zoom),b=void 0,N={}),ke=ke.concat(ja({key:`${et}[0]`,value:Ue[0],valueSpec:{zoom:{}},validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec,objectElementValidators:{zoom:qs,value:_e}}))}else ke=ke.concat(_e({key:`${et}[0]`,value:Ue[0],validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec},Ue));return kl(Uu(Ue[1]))?ke.concat([new dr(`${et}[1]`,Ue[1],"expressions are not allowed in function stops.")]):ke.concat(Se.validateSpec({key:`${et}[1]`,value:Ue[1],valueSpec:l,validateSpec:Se.validateSpec,style:Se.style,styleSpec:Se.styleSpec}))}function _e(Se,ke){const Ue=Ii(Se.value),et=bn(Se.value),ht=Se.value!==null?Se.value:ke;if(x){if(Ue!==x)return[new dr(Se.key,ht,`${Ue} stop domain type must match previous stop domain type ${x}`)]}else x=Ue;if(Ue!=="number"&&Ue!=="string"&&Ue!=="boolean")return[new dr(Se.key,ht,"stop domain value must be a number, string, or boolean")];if(Ue!=="number"&&u!=="categorical"){let Lt=`number expected, ${Ue} found`;return hu(l)&&u===void 0&&(Lt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dr(Se.key,ht,Lt)]}return u!=="categorical"||Ue!=="number"||isFinite(et)&&Math.floor(et)===et?u!=="categorical"&&Ue==="number"&&b!==void 0&&et<b?[new dr(Se.key,ht,"stop domain values must appear in ascending order")]:(b=et,u==="categorical"&&et in N?[new dr(Se.key,ht,"stop domain values must be unique")]:(N[et]=!0,[])):[new dr(Se.key,ht,`integer expected, found ${et}`)]}}function Mo(A){const l=(A.expressionContext==="property"?fo:du)(Uu(A.value),A.valueSpec);if(l.result==="error")return l.value.map(x=>new dr(`${A.key}${x.key}`,A.value,x.message));const u=l.value.expression||l.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!u.outputDefined())return[new dr(A.key,A.value,`Invalid data expression for "${A.propertyKey}". Output values must be contained as literals within the expression.`)];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!uu(u))return[new dr(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!uu(u))return[new dr(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!Du(u,["zoom","feature-state"]))return[new dr(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!ph(u))return[new dr(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function po(A){const l=A.key,u=A.value,x=Ii(u);return x!=="string"?[new dr(l,u,`color expected, ${x} found`)]:Ti.parse(String(u))?[]:[new dr(l,u,`color expected, "${u}" found`)]}function Ou(A){const l=A.key,u=A.value,x=A.valueSpec,b=[];return Array.isArray(x.values)?x.values.indexOf(bn(u))===-1&&b.push(new dr(l,u,`expected one of [${x.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(x.values).indexOf(bn(u))===-1&&b.push(new dr(l,u,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function vh(A){return mA(Uu(A.value))?Mo(De({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zu(A)}function zu(A){const l=A.value,u=A.key;if(Ii(l)!=="array")return[new dr(u,l,`array expected, ${Ii(l)} found`)];const x=A.styleSpec;let b,E=[];if(l.length<1)return[new dr(u,l,"filter array must have at least 1 element")];switch(E=E.concat(Ou({key:`${u}[0]`,value:l[0],valueSpec:x.filter_operator,style:A.style,styleSpec:A.styleSpec})),bn(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&bn(l[1])==="$type"&&E.push(new dr(u,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&E.push(new dr(u,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=Ii(l[1]),b!=="string"&&E.push(new dr(`${u}[1]`,l[1],`string expected, ${b} found`)));for(let N=2;N<l.length;N++)b=Ii(l[N]),bn(l[1])==="$type"?E=E.concat(Ou({key:`${u}[${N}]`,value:l[N],valueSpec:x.geometry_type,style:A.style,styleSpec:A.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&E.push(new dr(`${u}[${N}]`,l[N],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let N=1;N<l.length;N++)E=E.concat(zu({key:`${u}[${N}]`,value:l[N],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":b=Ii(l[1]),l.length!==2?E.push(new dr(u,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&E.push(new dr(`${u}[1]`,l[1],`string expected, ${b} found`))}return E}function vA(A,l){const u=A.key,x=A.validateSpec,b=A.style,E=A.styleSpec,N=A.value,M=A.objectKey,z=E[`${l}_${A.layerType}`];if(!z)return[];const W=M.match(/^(.*)-transition$/);if(l==="paint"&&W&&z[W[1]]&&z[W[1]].transition)return x({key:u,value:N,valueSpec:E.transition,style:b,styleSpec:E});const ie=A.valueSpec||z[M];if(!ie)return[new dr(u,N,`unknown property "${M}"`)];let ue;if(Ii(N)==="string"&&hu(ie)&&!ie.tokens&&(ue=/^{([^}]+)}$/.exec(N)))return[new dr(u,N,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ue[1])} }\`.`)];const _e=[];return A.layerType==="symbol"&&(M==="text-field"&&b&&!b.glyphs&&_e.push(new dr(u,N,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&pa(Uu(N))&&bn(N.type)==="identity"&&_e.push(new dr(u,N,'"text-font" does not support identity functions'))),_e.concat(x({key:A.key,value:N,valueSpec:ie,style:b,styleSpec:E,expressionContext:"property",propertyType:l,propertyKey:M}))}function Ml(A){return vA(A,"paint")}function Ks(A){return vA(A,"layout")}function ol(A){let l=[];const u=A.value,x=A.key,b=A.style,E=A.styleSpec;if(Ii(u)!=="object")return[new dr(x,u,`object expected, ${Ii(u)} found`)];u.type||u.ref||l.push(new dr(x,u,'either "type" or "ref" is required'));let N=bn(u.type);const M=bn(u.ref);if(u.id){const z=bn(u.id);for(let W=0;W<A.arrayIndex;W++){const ie=b.layers[W];bn(ie.id)===z&&l.push(new dr(x,u.id,`duplicate layer id "${u.id}", previously used at line ${ie.id.__line__}`))}}if("ref"in u){let z;["type","source","source-layer","filter","layout"].forEach(W=>{W in u&&l.push(new dr(x,u[W],`"${W}" is prohibited for ref layers`))}),b.layers.forEach(W=>{bn(W.id)===M&&(z=W)}),z?z.ref?l.push(new dr(x,u.ref,"ref cannot reference another ref layer")):N=bn(z.type):l.push(new dr(x,u.ref,`ref layer "${M}" not found`))}else if(N!=="background")if(u.source){const z=b.sources&&b.sources[u.source],W=z&&bn(z.type);z?W==="vector"&&N==="raster"?l.push(new dr(x,u.source,`layer "${u.id}" requires a raster source`)):W!=="raster-dem"&&N==="hillshade"||W!=="raster-dem"&&N==="color-relief"?l.push(new dr(x,u.source,`layer "${u.id}" requires a raster-dem source`)):W==="raster"&&N!=="raster"?l.push(new dr(x,u.source,`layer "${u.id}" requires a vector source`)):W!=="vector"||u["source-layer"]?W==="raster-dem"&&N!=="hillshade"&&N!=="color-relief"?l.push(new dr(x,u.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):N!=="line"||!u.paint||!u.paint["line-gradient"]||W==="geojson"&&z.lineMetrics||l.push(new dr(x,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new dr(x,u,`layer "${u.id}" must specify a "source-layer"`)):l.push(new dr(x,u.source,`source "${u.source}" not found`))}else l.push(new dr(x,u,'missing required property "source"'));return l=l.concat(ja({key:x,value:u,valueSpec:E.layer,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":()=>[],type:()=>A.validateSpec({key:`${x}.type`,value:u.type,valueSpec:E.layer.type,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,object:u,objectKey:"type"}),filter:vh,layout:z=>ja({layer:u,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":W=>Ks(De({layerType:N},W))}}),paint:z=>ja({layer:u,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":W=>Ml(De({layerType:N},W))}})}})),l}function kc(A){const l=A.value,u=A.key,x=Ii(l);return x!=="string"?[new dr(u,l,`string expected, ${x} found`)]:[]}const Sf={promoteId:function({key:A,value:l}){if(Ii(l)==="string")return kc({key:A,value:l});{const u=[];for(const x in l)u.push(...kc({key:`${A}.${x}`,value:l[x]}));return u}}};function Id(A){const l=A.value,u=A.key,x=A.styleSpec,b=A.style,E=A.validateSpec;if(!l.type)return[new dr(u,l,'"type" is required')];const N=bn(l.type);let M;switch(N){case"vector":case"raster":return M=ja({key:u,value:l,valueSpec:x[`source_${N.replace("-","_")}`],style:A.style,styleSpec:x,objectElementValidators:Sf,validateSpec:E}),M;case"raster-dem":return M=function(z){var W;const ie=(W=z.sourceName)!==null&&W!==void 0?W:"",ue=z.value,_e=z.styleSpec,Se=_e.source_raster_dem,ke=z.style;let Ue=[];const et=Ii(ue);if(ue===void 0)return Ue;if(et!=="object")return Ue.push(new dr("source_raster_dem",ue,`object expected, ${et} found`)),Ue;const ht=bn(ue.encoding)==="custom",Lt=["redFactor","greenFactor","blueFactor","baseShift"],yt=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const Bt in ue)!ht&&Lt.includes(Bt)?Ue.push(new dr(Bt,ue[Bt],`In "${ie}": "${Bt}" is only valid when "encoding" is set to "custom". ${yt} encoding found`)):Se[Bt]?Ue=Ue.concat(z.validateSpec({key:Bt,value:ue[Bt],valueSpec:Se[Bt],validateSpec:z.validateSpec,style:ke,styleSpec:_e})):Ue.push(new dr(Bt,ue[Bt],`unknown property "${Bt}"`));return Ue}({sourceName:u,value:l,style:A.style,styleSpec:x,validateSpec:E}),M;case"geojson":if(M=ja({key:u,value:l,valueSpec:x.source_geojson,style:b,styleSpec:x,validateSpec:E,objectElementValidators:Sf}),l.cluster)for(const z in l.clusterProperties){const[W,ie]=l.clusterProperties[z],ue=typeof W=="string"?[W,["accumulated"],["get",z]]:W;M.push(...Mo({key:`${u}.${z}.map`,value:ie,expressionContext:"cluster-map"})),M.push(...Mo({key:`${u}.${z}.reduce`,value:ue,expressionContext:"cluster-reduce"}))}return M;case"video":return ja({key:u,value:l,valueSpec:x.source_video,style:b,validateSpec:E,styleSpec:x});case"image":return ja({key:u,value:l,valueSpec:x.source_image,style:b,validateSpec:E,styleSpec:x});case"canvas":return[new dr(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ou({key:`${u}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ef(A){const l=A.value,u=A.styleSpec,x=u.light,b=A.style;let E=[];const N=Ii(l);if(l===void 0)return E;if(N!=="object")return E=E.concat([new dr("light",l,`object expected, ${N} found`)]),E;for(const M in l){const z=M.match(/^(.*)-transition$/);E=E.concat(z&&x[z[1]]&&x[z[1]].transition?A.validateSpec({key:M,value:l[M],valueSpec:u.transition,validateSpec:A.validateSpec,style:b,styleSpec:u}):x[M]?A.validateSpec({key:M,value:l[M],valueSpec:x[M],validateSpec:A.validateSpec,style:b,styleSpec:u}):[new dr(M,l[M],`unknown property "${M}"`)])}return E}function ta(A){const l=A.value,u=A.styleSpec,x=u.sky,b=A.style,E=Ii(l);if(l===void 0)return[];if(E!=="object")return[new dr("sky",l,`object expected, ${E} found`)];let N=[];for(const M in l)N=N.concat(x[M]?A.validateSpec({key:M,value:l[M],valueSpec:x[M],style:b,styleSpec:u}):[new dr(M,l[M],`unknown property "${M}"`)]);return N}function YA(A){const l=A.value,u=A.styleSpec,x=u.terrain,b=A.style;let E=[];const N=Ii(l);if(l===void 0)return E;if(N!=="object")return E=E.concat([new dr("terrain",l,`object expected, ${N} found`)]),E;for(const M in l)E=E.concat(x[M]?A.validateSpec({key:M,value:l[M],valueSpec:x[M],validateSpec:A.validateSpec,style:b,styleSpec:u}):[new dr(M,l[M],`unknown property "${M}"`)]);return E}function Fc(A){let l=[];const u=A.value,x=A.key;if(Array.isArray(u)){const b=[],E=[];for(const N in u)u[N].id&&b.includes(u[N].id)&&l.push(new dr(x,u,`all the sprites' ids must be unique, but ${u[N].id} is duplicated`)),b.push(u[N].id),u[N].url&&E.includes(u[N].url)&&l.push(new dr(x,u,`all the sprites' URLs must be unique, but ${u[N].url} is duplicated`)),E.push(u[N].url),l=l.concat(ja({key:`${x}[${N}]`,value:u[N],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:A.validateSpec}));return l}return kc({key:x,value:u})}function Nc(A){return l=A.value,l&&l.constructor===Object?[]:[new dr(A.key,A.value,`object expected, ${Ii(A.value)} found`)];var l}const Xa={"*":()=>[],array:Ll,boolean:function(A){const l=A.value,u=A.key,x=Ii(l);return x!=="boolean"?[new dr(u,l,`boolean expected, ${x} found`)]:[]},number:qs,color:po,constants:$a,enum:Ou,filter:vh,function:nc,layer:ol,object:ja,source:Id,light:Ef,sky:ta,terrain:YA,projection:function(A){const l=A.value,u=A.styleSpec,x=u.projection,b=A.style,E=Ii(l);if(l===void 0)return[];if(E!=="object")return[new dr("projection",l,`object expected, ${E} found`)];let N=[];for(const M in l)N=N.concat(x[M]?A.validateSpec({key:M,value:l[M],valueSpec:x[M],style:b,styleSpec:u}):[new dr(M,l[M],`unknown property "${M}"`)]);return N},projectionDefinition:function(A){const l=A.key;let u=A.value;u=u instanceof String?u.valueOf():u;const x=Ii(u);return x!=="array"||function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"}(u)||function(b){return!!["interpolate","step","literal"].includes(b[0])}(u)?["array","string"].includes(x)?[]:[new dr(l,u,`projection expected, invalid type "${x}" found`)]:[new dr(l,u,`projection expected, invalid array ${JSON.stringify(u)} found`)]},string:kc,formatted:function(A){return kc(A).length===0?[]:Mo(A)},resolvedImage:function(A){return kc(A).length===0?[]:Mo(A)},padding:function(A){const l=A.key,u=A.value;if(Ii(u)==="array"){if(u.length<1||u.length>4)return[new dr(l,u,`padding requires 1 to 4 values; ${u.length} values found`)];const x={type:"number"};let b=[];for(let E=0;E<u.length;E++)b=b.concat(A.validateSpec({key:`${l}[${E}]`,value:u[E],validateSpec:A.validateSpec,valueSpec:x}));return b}return qs({key:l,value:u,valueSpec:{}})},numberArray:function(A){const l=A.key,u=A.value;if(Ii(u)==="array"){const x={type:"number"};if(u.length<1)return[new dr(l,u,"array length at least 1 expected, length 0 found")];let b=[];for(let E=0;E<u.length;E++)b=b.concat(A.validateSpec({key:`${l}[${E}]`,value:u[E],validateSpec:A.validateSpec,valueSpec:x}));return b}return qs({key:l,value:u,valueSpec:{}})},colorArray:function(A){const l=A.key,u=A.value;if(Ii(u)==="array"){if(u.length<1)return[new dr(l,u,"array length at least 1 expected, length 0 found")];let x=[];for(let b=0;b<u.length;b++)x=x.concat(po({key:`${l}[${b}]`,value:u[b]}));return x}return po({key:l,value:u})},variableAnchorOffsetCollection:function(A){const l=A.key,u=A.value,x=Ii(u),b=A.styleSpec;if(x!=="array"||u.length<1||u.length%2!=0)return[new dr(l,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let E=[];for(let N=0;N<u.length;N+=2)E=E.concat(Ou({key:`${l}[${N}]`,value:u[N],valueSpec:b.layout_symbol["text-anchor"]})),E=E.concat(Ll({key:`${l}[${N+1}]`,value:u[N+1],valueSpec:{length:2,value:"number"},validateSpec:A.validateSpec,style:A.style,styleSpec:b}));return E},sprite:Fc,state:Nc};function Po(A){const l=A.value,u=A.valueSpec,x=A.styleSpec;return A.validateSpec=Po,u.expression&&pa(bn(l))?nc(A):u.expression&&kl(Uu(l))?Mo(A):u.type&&Xa[u.type]?Xa[u.type](A):ja(De({},A,{valueSpec:u.type?x[u.type]:u}))}function sc(A){const l=A.value,u=A.key,x=kc(A);return x.length||(l.indexOf("{fontstack}")===-1&&x.push(new dr(u,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&x.push(new dr(u,l,'"glyphs" url must include a "{range}" token'))),x}function Pl(A,l=wt){let u=[];return u=u.concat(Po({key:"",value:A,valueSpec:l.$root,styleSpec:l,style:A,validateSpec:Po,objectElementValidators:{glyphs:sc,"*":()=>[]}})),A.constants&&(u=u.concat($a({key:"constants",value:A.constants}))),xh(u)}function Rl(A){return function(l){return A(Object.assign({},l,{validateSpec:Po}))}}function xh(A){return[].concat(A).sort((l,u)=>l.line-u.line)}function R(A){return function(...l){return xh(A.apply(this,l))}}Pl.source=R(Rl(Id)),Pl.sprite=R(Rl(Fc)),Pl.glyphs=R(Rl(sc)),Pl.light=R(Rl(Ef)),Pl.sky=R(Rl(ta)),Pl.terrain=R(Rl(YA)),Pl.state=R(Rl(Nc)),Pl.layer=R(Rl(ol)),Pl.filter=R(Rl(vh)),Pl.paintProperty=R(Rl(Ml)),Pl.layoutProperty=R(Rl(Ks));const Q=Pl,ae=Q.light,pe=Q.sky,Pe=Q.paintProperty,Oe=Q.layoutProperty;function Ke(A,l){let u=!1;if(l&&l.length)for(const x of l)A.fire(new Mr(new Error(x.message))),u=!0;return u}class Xe{constructor(l,u,x){const b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const N=new Int32Array(this.arrayBuffer);l=N[0],this.d=(u=N[1])+2*(x=N[2]);for(let z=0;z<this.d*this.d;z++){const W=N[3+z],ie=N[3+z+1];b.push(W===ie?null:N.subarray(W,ie))}const M=N[3+b.length+1];this.keys=N.subarray(N[3+b.length],M),this.bboxes=N.subarray(M),this.insert=this._insertReadonly}else{this.d=u+2*x;for(let N=0;N<this.d*this.d;N++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=l,this.padding=x,this.scale=u/l,this.uid=0;const E=x/u*l;this.min=-E,this.max=l+E}insert(l,u,x,b,E){this._forEachCell(u,x,b,E,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(u),this.bboxes.push(x),this.bboxes.push(b),this.bboxes.push(E)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,u,x,b,E,N){this.cells[E].push(N)}query(l,u,x,b,E){const N=this.min,M=this.max;if(l<=N&&u<=N&&M<=x&&M<=b&&!E)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(l,u,x,b,this._queryCell,z,{},E),z}}_queryCell(l,u,x,b,E,N,M,z){const W=this.cells[E];if(W!==null){const ie=this.keys,ue=this.bboxes;for(let _e=0;_e<W.length;_e++){const Se=W[_e];if(M[Se]===void 0){const ke=4*Se;(z?z(ue[ke+0],ue[ke+1],ue[ke+2],ue[ke+3]):l<=ue[ke+2]&&u<=ue[ke+3]&&x>=ue[ke+0]&&b>=ue[ke+1])?(M[Se]=!0,N.push(ie[Se])):M[Se]=!1}}}}_forEachCell(l,u,x,b,E,N,M,z){const W=this._convertToCellCoord(l),ie=this._convertToCellCoord(u),ue=this._convertToCellCoord(x),_e=this._convertToCellCoord(b);for(let Se=W;Se<=ue;Se++)for(let ke=ie;ke<=_e;ke++){const Ue=this.d*ke+Se;if((!z||z(this._convertFromCellCoord(Se),this._convertFromCellCoord(ke),this._convertFromCellCoord(Se+1),this._convertFromCellCoord(ke+1)))&&E.call(this,l,u,x,b,Ue,N,M,z))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,u=3+this.cells.length+1+1;let x=0;for(let N=0;N<this.cells.length;N++)x+=this.cells[N].length;const b=new Int32Array(u+x+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let E=u;for(let N=0;N<l.length;N++){const M=l[N];b[3+N]=E,b.set(M,E),E+=M.length}return b[3+l.length]=E,b.set(this.keys,E),E+=this.keys.length,b[3+l.length+1]=E,b.set(this.bboxes,E),E+=this.bboxes.length,b.buffer}static serialize(l,u){const x=l.toArrayBuffer();return u&&u.push(x),{buffer:x}}static deserialize(l){return new Xe(l.buffer)}}const rt={};function qe(A,l,u={}){if(rt[A])throw new Error(`${A} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:A,writeable:!1}),rt[A]={klass:l,omit:u.omit||[],shallow:u.shallow||[]}}qe("Object",Object),qe("Set",Set),qe("TransferableGridIndex",Xe),qe("Color",Ti),qe("Error",Error),qe("AJAXError",ot),qe("ResolvedImage",Ls),qe("StylePropertyFunction",Tc),qe("StyleExpression",Ec,{omit:["_evaluator"]}),qe("ZoomDependentExpression",Ao),qe("ZoomConstantExpression",gh),qe("CompoundExpression",uo,{omit:["_evaluate"]});for(const A in Ru)Ru[A]._classRegistryKey||qe(`Expression_${A}`,Ru[A]);function Ft(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Jt(A){return A.$name||A.constructor._classRegistryKey}function ct(A){return!function(l){if(l===null||typeof l!="object")return!1;const u=Jt(l);return!(!u||u==="Object")}(A)&&(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||A instanceof Blob||A instanceof Error||Ft(A)||ar(A)||ArrayBuffer.isView(A)||A instanceof ImageData)}function Dt(A,l){if(ct(A))return(Ft(A)||ar(A))&&l&&l.push(A),ArrayBuffer.isView(A)&&l&&l.push(A.buffer),A instanceof ImageData&&l&&l.push(A.data.buffer),A;if(Array.isArray(A)){const E=[];for(const N of A)E.push(Dt(N,l));return E}if(typeof A!="object")throw new Error("can't serialize object of type "+typeof A);const u=Jt(A);if(!u)throw new Error(`can't serialize object of unregistered class ${A.constructor.name}`);if(!rt[u])throw new Error(`${u} is not registered.`);const{klass:x}=rt[u],b=x.serialize?x.serialize(A,l):{};if(x.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const E in A){if(!A.hasOwnProperty(E)||rt[u].omit.indexOf(E)>=0)continue;const N=A[E];b[E]=rt[u].shallow.indexOf(E)>=0?N:Dt(N,l)}A instanceof Error&&(b.message=A.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(b.$name=u),b}function Qt(A){if(ct(A))return A;if(Array.isArray(A))return A.map(Qt);if(typeof A!="object")throw new Error("can't deserialize object of type "+typeof A);const l=Jt(A)||"Object";if(!rt[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:u}=rt[l];if(!u)throw new Error(`can't deserialize unregistered class ${l}`);if(u.deserialize)return u.deserialize(A);const x=Object.create(u.prototype);for(const b of Object.keys(A)){if(b==="$name")continue;const E=A[b];x[b]=rt[l].shallow.indexOf(b)>=0?E:Qt(E)}return x}class ur{constructor(){this.first=!0}update(l,u){const x=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=x,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=x,!0):(this.lastFloorZoom>x?(this.lastIntegerZoom=x+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<x&&(this.lastIntegerZoom=x,this.lastIntegerZoomTime=u),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=x,!0))}}const It={"Latin-1 Supplement":A=>A>=128&&A<=255,"Hangul Jamo":A=>A>=4352&&A<=4607,Khmer:A=>A>=6016&&A<=6143,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Kanbun:A=>A>=12688&&A<=12703,"CJK Strokes":A=>A>=12736&&A<=12783,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Hangul Syllables":A=>A>=44032&&A<=55215,"Private Use Area":A=>A>=57344&&A<=63743,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519};function fr(A){for(const l of A)if(Ui(l.charCodeAt(0)))return!0;return!1}function mr(A){for(const l of A)if(!hi(l.charCodeAt(0)))return!1;return!0}function Tr(A){const l=A.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(l.join("|"),"u")}const wr=Tr(["Arab","Dupl","Mong","Ougr","Syrc"]);function hi(A){return!wr.test(String.fromCodePoint(A))}const ti=Tr(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ui(A){return!(A!==746&&A!==747&&(A<4352||!(It["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||It["CJK Compatibility"](A)||It["CJK Strokes"](A)||!(!It["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||It["Enclosed CJK Letters and Months"](A)||It["Ideographic Description Characters"](A)||It.Kanbun(A)||It.Katakana(A)&&A!==12540||!(!It["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!It["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||It["Vertical Forms"](A)||It["Yijing Hexagram Symbols"](A)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(A))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(A))||ti.test(String.fromCodePoint(A)))))}function ii(A){return!(Ui(A)||function(l){return!!(It["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||It["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||It["Letterlike Symbols"](l)||It["Number Forms"](l)||It["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||It["Control Pictures"](l)&&l!==9251||It["Optical Character Recognition"](l)||It["Enclosed Alphanumerics"](l)||It["Geometric Shapes"](l)||It["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||It["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||It["CJK Symbols and Punctuation"](l)||It.Katakana(l)||It["Private Use Area"](l)||It["CJK Compatibility Forms"](l)||It["Small Form Variants"](l)||It["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(A))}const cn=Tr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ws(A){return cn.test(String.fromCodePoint(A))}function zi(A,l){return!(!l&&Ws(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||It.Khmer(A))}function ai(A){for(const l of A)if(Ws(l.charCodeAt(0)))return!0;return!1}const Vr=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(A){this.pluginStatus=A.pluginStatus,this.pluginURL=A.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(A){if(Vr.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=A.applyArabicShaping,this.processBidirectionalText=A.processBidirectionalText,this.processStyledBidirectionalText=A.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(A,l){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(A.pluginStatus!=="loading")return this.setState(A),A;const u=A.pluginURL,x=new Promise(E=>{this.loadScriptResolve=E});l(u);const b=new Promise(E=>setTimeout(()=>E(),this.TIMEOUT));if(yield Promise.race([x,b]),this.isParsed()){const E={pluginStatus:"loaded",pluginURL:u};return this.setState(E),E}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${u}`)})}};class Li{constructor(l,u){this.isSupportedScript=Hi,this.zoom=l,u?(this.now=u.now||0,this.fadeDuration=u.fadeDuration||0,this.zoomHistory=u.zoomHistory||new ur,this.transition=u.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ur,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,u=l-Math.floor(l),x=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*x}:{fromScale:.5,toScale:1,t:1-(1-x)*u}}}function Hi(A){return function(l,u){for(const x of l)if(!zi(x.charCodeAt(0),u))return!1;return!0}(A,Vr.getRTLTextPluginStatus()==="loaded")}class qi{constructor(l,u,x){this.property=l,this.value=u,this.expression=function(b,E,N){if(pa(b))return new Tc(b,E);if(kl(b)){const M=fo(b,E,N);if(M.result==="error")throw new Error(M.value.map(z=>`${z.key}: ${z.message}`).join(", "));return M.value}{let M=b;return E.type==="color"&&typeof b=="string"?M=Ti.parse(b):E.type!=="padding"||typeof b!="number"&&!Array.isArray(b)?E.type!=="numberArray"||typeof b!="number"&&!Array.isArray(b)?E.type!=="colorArray"||typeof b!="string"&&!Array.isArray(b)?E.type==="variableAnchorOffsetCollection"&&Array.isArray(b)?M=Yn.parse(b):E.type==="projectionDefinition"&&typeof b=="string"&&(M=_a.parse(b)):M=ys.parse(b):M=Hs.parse(b):M=oi.parse(b),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>M}}}(u===void 0?l.specification.default:u,l.specification,x)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,u,x){return this.property.possiblyEvaluate(this,l,u,x)}}class ni{constructor(l,u){this.property=l,this.value=new qi(l,void 0,u)}transitioned(l,u){return new nn(this.property,this.value,u,We({},l.transition,this.transition),l.now)}untransitioned(){return new nn(this.property,this.value,null,{},0)}}class Vi{constructor(l,u){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues),this._globalState=u}getValue(l){return ve(this._values[l].value.value)}setValue(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new ni(this._values[l].property,this._globalState)),this._values[l].value=new qi(this._values[l].property,u===null?void 0:ve(u),this._globalState)}getTransition(l){return ve(this._values[l].transition)}setTransition(l,u){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new ni(this._values[l].property,this._globalState)),this._values[l].transition=ve(u)||void 0}serialize(){const l={};for(const u of Object.keys(this._values)){const x=this.getValue(u);x!==void 0&&(l[u]=x);const b=this.getTransition(u);b!==void 0&&(l[`${u}-transition`]=b)}return l}transitioned(l,u){const x=new is(this._properties);for(const b of Object.keys(this._values))x._values[b]=this._values[b].transitioned(l,u._values[b]);return x}untransitioned(){const l=new is(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].untransitioned();return l}}class nn{constructor(l,u,x,b,E){this.property=l,this.value=u,this.begin=E+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=x)}possiblyEvaluate(l,u,x){const b=l.now||0,E=this.value.possiblyEvaluate(l,u,x),N=this.prior;if(N){if(b>this.end)return this.prior=null,E;if(this.value.isDataDriven())return this.prior=null,E;if(b<this.begin)return N.possiblyEvaluate(l,u,x);{const M=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(N.possiblyEvaluate(l,u,x),E,Ae(M))}}return E}}class is{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,u,x){const b=new ls(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(l,u,x);return b}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Ss{constructor(l,u){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState=u}hasValue(l){return this._values[l].value!==void 0}getValue(l){return ve(this._values[l].value)}setValue(l,u){this._values[l]=new qi(this._values[l].property,u===null?void 0:ve(u),this._globalState)}serialize(){const l={};for(const u of Object.keys(this._values)){const x=this.getValue(u);x!==void 0&&(l[u]=x)}return l}possiblyEvaluate(l,u,x){const b=new ls(this._properties);for(const E of Object.keys(this._values))b._values[E]=this._values[E].possiblyEvaluate(l,u,x);return b}}class jn{constructor(l,u,x){this.property=l,this.value=u,this.parameters=x}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,u,x,b){return this.property.evaluate(this.value,this.parameters,l,u,x,b)}}class ls{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class kr{constructor(l){this.specification=l}possiblyEvaluate(l,u){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(u)}interpolate(l,u,x){const b=$r[this.specification.type];return b?b(l,u,x):l}}class Or{constructor(l,u){this.specification=l,this.overrides=u}possiblyEvaluate(l,u,x,b){return new jn(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(u,null,{},x,b)}:l.expression,u)}interpolate(l,u,x){if(l.value.kind!=="constant"||u.value.kind!=="constant")return l;if(l.value.value===void 0||u.value.value===void 0)return new jn(this,{kind:"constant",value:void 0},l.parameters);const b=$r[this.specification.type];if(b){const E=b(l.value.value,u.value.value,x);return new jn(this,{kind:"constant",value:E},l.parameters)}return l}evaluate(l,u,x,b,E,N){return l.kind==="constant"?l.value:l.evaluate(u,x,b,E,N)}}class Jn extends Or{possiblyEvaluate(l,u,x,b){if(l.value===void 0)return new jn(this,{kind:"constant",value:void 0},u);if(l.expression.kind==="constant"){const E=l.expression.evaluate(u,null,{},x,b),N=l.property.specification.type==="resolvedImage"&&typeof E!="string"?E.name:E,M=this._calculate(N,N,N,u);return new jn(this,{kind:"constant",value:M},u)}if(l.expression.kind==="camera"){const E=this._calculate(l.expression.evaluate({zoom:u.zoom-1}),l.expression.evaluate({zoom:u.zoom}),l.expression.evaluate({zoom:u.zoom+1}),u);return new jn(this,{kind:"constant",value:E},u)}return new jn(this,l.expression,u)}evaluate(l,u,x,b,E,N){if(l.kind==="source"){const M=l.evaluate(u,x,b,E,N);return this._calculate(M,M,M,u)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(u.zoom)-1},x,b),l.evaluate({zoom:Math.floor(u.zoom)},x,b),l.evaluate({zoom:Math.floor(u.zoom)+1},x,b),u):l.value}_calculate(l,u,x,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:x,to:u}}interpolate(l){return l}}class Mi{constructor(l){this.specification=l}possiblyEvaluate(l,u,x,b){if(l.value!==void 0){if(l.expression.kind==="constant"){const E=l.expression.evaluate(u,null,{},x,b);return this._calculate(E,E,E,u)}return this._calculate(l.expression.evaluate(new Li(Math.floor(u.zoom-1),u)),l.expression.evaluate(new Li(Math.floor(u.zoom),u)),l.expression.evaluate(new Li(Math.floor(u.zoom+1),u)),u)}}_calculate(l,u,x,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:u}:{from:x,to:u}}interpolate(l){return l}}class Ds{constructor(l){this.specification=l}possiblyEvaluate(l,u,x,b){return!!l.expression.evaluate(u,null,{},x,b)}interpolate(){return!1}}class es{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in l){const x=l[u];x.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new qi(x,void 0,void 0),E=this.defaultTransitionablePropertyValues[u]=new ni(x,void 0);this.defaultTransitioningPropertyValues[u]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}qe("DataDrivenProperty",Or),qe("DataConstantProperty",kr),qe("CrossFadedDataDrivenProperty",Jn),qe("CrossFadedProperty",Mi),qe("ColorRampProperty",Ds);const Es="-transition";class cs extends Fr{constructor(l,u,x){if(super(),this.id=l.id,this.type=l.type,this._globalState=x,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=fu(l.filter,x)),u.layout&&(this._unevaluatedLayout=new Ss(u.layout,x)),u.paint)){this._transitionablePaint=new Vi(u.paint,x);for(const b in l.paint)this.setPaintProperty(b,l.paint[b],{validate:!1});for(const b in l.layout)this.setLayoutProperty(b,l.layout[b],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ls(u.paint)}}setFilter(l){this.filter=l,this._featureFilter=fu(l,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){const l=new Set;if(this._unevaluatedLayout)for(const u in this._unevaluatedLayout._values){const x=this._unevaluatedLayout._values[u];for(const b of x.getGlobalStateRefs())l.add(b)}for(const u of this._featureFilter.getGlobalStateRefs())l.add(u);return l}getPaintAffectingGlobalStateRefs(){var l;const u=new globalThis.Map;if(this._transitionablePaint)for(const x in this._transitionablePaint._values){const b=this._transitionablePaint._values[x].value;for(const E of b.getGlobalStateRefs()){const N=(l=u.get(E))!==null&&l!==void 0?l:[];N.push({name:x,value:b.value}),u.set(E,N)}}return u}setLayoutProperty(l,u,x={}){u!=null&&this._validate(Oe,`layers.${this.id}.layout.${l}`,l,u,x)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,u):this.visibility=u)}getPaintProperty(l){return l.endsWith(Es)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,u,x={}){if(u!=null&&this._validate(Pe,`layers.${this.id}.paint.${l}`,l,u,x))return!1;if(l.endsWith(Es))return this._transitionablePaint.setTransition(l.slice(0,-11),u||void 0),!1;{const b=this._transitionablePaint._values[l],E=b.property.specification["property-type"]==="cross-faded-data-driven",N=b.value.isDataDriven(),M=b.value;this._transitionablePaint.setValue(l,u),this._handleSpecialPaintPropertyUpdate(l);const z=this._transitionablePaint._values[l].value;return z.isDataDriven()||N||E||this._handleOverridablePaintPropertyUpdate(l,M,z)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,u,x){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,u){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,u)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),zt(l,(u,x)=>!(u===void 0||x==="layout"&&!Object.keys(u).length||x==="paint"&&!Object.keys(u).length))}_validate(l,u,x,b,E={}){return(!E||E.validate!==!1)&&Ke(this,l.call(Q,{key:u,layerType:this.type,objectKey:x,value:b,styleSpec:wt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const u=this.paint.get(l);if(u instanceof jn&&hu(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}let Sn;var $s={get paint(){return Sn=Sn||new es({"raster-opacity":new kr(wt.paint_raster["raster-opacity"]),"raster-hue-rotate":new kr(wt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kr(wt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kr(wt.paint_raster["raster-brightness-max"]),"raster-saturation":new kr(wt.paint_raster["raster-saturation"]),"raster-contrast":new kr(wt.paint_raster["raster-contrast"]),"raster-resampling":new kr(wt.paint_raster["raster-resampling"]),"raster-fade-duration":new kr(wt.paint_raster["raster-fade-duration"])})}};class mo extends cs{constructor(l,u){super(l,$s,u)}}const Ua={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ln{constructor(l,u){this._structArray=l,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,u){return l._trim(),u&&(l.isTransferred=!0,u.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const u=Object.create(this.prototype);return u.arrayBuffer=l.arrayBuffer,u.length=l.length,u.capacity=l.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function un(A,l=1){let u=0,x=0;return{members:A.map(b=>{const E=Ua[b.type].BYTES_PER_ELEMENT,N=u=ps(u,Math.max(l,E)),M=b.components||1;return x=Math.max(x,E),u+=E*M,{name:b.name,type:b.type,components:M,offset:N}}),size:ps(u,Math.max(x,l)),alignment:l}}function ps(A,l){return Math.ceil(A/l)*l}class wn extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u){const x=this.length;return this.resize(x+1),this.emplace(x,l,u)}emplace(l,u,x){const b=2*l;return this.int16[b+0]=u,this.int16[b+1]=x,l}}wn.prototype.bytesPerElement=4,qe("StructArrayLayout2i4",wn);class ra extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,x)}emplace(l,u,x,b){const E=3*l;return this.int16[E+0]=u,this.int16[E+1]=x,this.int16[E+2]=b,l}}ra.prototype.bytesPerElement=6,qe("StructArrayLayout3i6",ra);class js extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,l,u,x,b)}emplace(l,u,x,b,E){const N=4*l;return this.int16[N+0]=u,this.int16[N+1]=x,this.int16[N+2]=b,this.int16[N+3]=E,l}}js.prototype.bytesPerElement=8,qe("StructArrayLayout4i8",js);class Ro extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N){const M=this.length;return this.resize(M+1),this.emplace(M,l,u,x,b,E,N)}emplace(l,u,x,b,E,N,M){const z=6*l;return this.int16[z+0]=u,this.int16[z+1]=x,this.int16[z+2]=b,this.int16[z+3]=E,this.int16[z+4]=N,this.int16[z+5]=M,l}}Ro.prototype.bytesPerElement=12,qe("StructArrayLayout2i4i12",Ro);class ll extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N){const M=this.length;return this.resize(M+1),this.emplace(M,l,u,x,b,E,N)}emplace(l,u,x,b,E,N,M){const z=4*l,W=8*l;return this.int16[z+0]=u,this.int16[z+1]=x,this.uint8[W+4]=b,this.uint8[W+5]=E,this.uint8[W+6]=N,this.uint8[W+7]=M,l}}ll.prototype.bytesPerElement=8,qe("StructArrayLayout2i4ub8",ll);class ns extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u){const x=this.length;return this.resize(x+1),this.emplace(x,l,u)}emplace(l,u,x){const b=2*l;return this.float32[b+0]=u,this.float32[b+1]=x,l}}ns.prototype.bytesPerElement=8,qe("StructArrayLayout2f8",ns);class ac extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N,M,z,W,ie){const ue=this.length;return this.resize(ue+1),this.emplace(ue,l,u,x,b,E,N,M,z,W,ie)}emplace(l,u,x,b,E,N,M,z,W,ie,ue){const _e=10*l;return this.uint16[_e+0]=u,this.uint16[_e+1]=x,this.uint16[_e+2]=b,this.uint16[_e+3]=E,this.uint16[_e+4]=N,this.uint16[_e+5]=M,this.uint16[_e+6]=z,this.uint16[_e+7]=W,this.uint16[_e+8]=ie,this.uint16[_e+9]=ue,l}}ac.prototype.bytesPerElement=20,qe("StructArrayLayout10ui20",ac);class Rh extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N,M,z){const W=this.length;return this.resize(W+1),this.emplace(W,l,u,x,b,E,N,M,z)}emplace(l,u,x,b,E,N,M,z,W){const ie=8*l;return this.uint16[ie+0]=u,this.uint16[ie+1]=x,this.uint16[ie+2]=b,this.uint16[ie+3]=E,this.uint16[ie+4]=N,this.uint16[ie+5]=M,this.uint16[ie+6]=z,this.uint16[ie+7]=W,l}}Rh.prototype.bytesPerElement=16,qe("StructArrayLayout8ui16",Rh);class Qu extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N,M,z,W,ie,ue,_e){const Se=this.length;return this.resize(Se+1),this.emplace(Se,l,u,x,b,E,N,M,z,W,ie,ue,_e)}emplace(l,u,x,b,E,N,M,z,W,ie,ue,_e,Se){const ke=12*l;return this.int16[ke+0]=u,this.int16[ke+1]=x,this.int16[ke+2]=b,this.int16[ke+3]=E,this.uint16[ke+4]=N,this.uint16[ke+5]=M,this.uint16[ke+6]=z,this.uint16[ke+7]=W,this.int16[ke+8]=ie,this.int16[ke+9]=ue,this.int16[ke+10]=_e,this.int16[ke+11]=Se,l}}Qu.prototype.bytesPerElement=24,qe("StructArrayLayout4i4ui4i24",Qu);class Dl extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,x){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,x)}emplace(l,u,x,b){const E=3*l;return this.float32[E+0]=u,this.float32[E+1]=x,this.float32[E+2]=b,l}}Dl.prototype.bytesPerElement=12,qe("StructArrayLayout3f12",Dl);class JA extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint32[1*l+0]=u,l}}JA.prototype.bytesPerElement=4,qe("StructArrayLayout1ul4",JA);class ed extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N,M,z,W){const ie=this.length;return this.resize(ie+1),this.emplace(ie,l,u,x,b,E,N,M,z,W)}emplace(l,u,x,b,E,N,M,z,W,ie){const ue=10*l,_e=5*l;return this.int16[ue+0]=u,this.int16[ue+1]=x,this.int16[ue+2]=b,this.int16[ue+3]=E,this.int16[ue+4]=N,this.int16[ue+5]=M,this.uint32[_e+3]=z,this.uint16[ue+8]=W,this.uint16[ue+9]=ie,l}}ed.prototype.bytesPerElement=20,qe("StructArrayLayout6i1ul2ui20",ed);class Hu extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N){const M=this.length;return this.resize(M+1),this.emplace(M,l,u,x,b,E,N)}emplace(l,u,x,b,E,N,M){const z=6*l;return this.int16[z+0]=u,this.int16[z+1]=x,this.int16[z+2]=b,this.int16[z+3]=E,this.int16[z+4]=N,this.int16[z+5]=M,l}}Hu.prototype.bytesPerElement=12,qe("StructArrayLayout2i2i2i12",Hu);class oc extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E){const N=this.length;return this.resize(N+1),this.emplace(N,l,u,x,b,E)}emplace(l,u,x,b,E,N){const M=4*l,z=8*l;return this.float32[M+0]=u,this.float32[M+1]=x,this.float32[M+2]=b,this.int16[z+6]=E,this.int16[z+7]=N,l}}oc.prototype.bytesPerElement=16,qe("StructArrayLayout2f1f2i16",oc);class S extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N){const M=this.length;return this.resize(M+1),this.emplace(M,l,u,x,b,E,N)}emplace(l,u,x,b,E,N,M){const z=16*l,W=4*l,ie=8*l;return this.uint8[z+0]=u,this.uint8[z+1]=x,this.float32[W+1]=b,this.float32[W+2]=E,this.int16[ie+6]=N,this.int16[ie+7]=M,l}}S.prototype.bytesPerElement=16,qe("StructArrayLayout2ub2f2i16",S);class o extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,x){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,x)}emplace(l,u,x,b){const E=3*l;return this.uint16[E+0]=u,this.uint16[E+1]=x,this.uint16[E+2]=b,l}}o.prototype.bytesPerElement=6,qe("StructArrayLayout3ui6",o);class f extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht)}emplace(l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht,Lt){const yt=24*l,Bt=12*l,Zt=48*l;return this.int16[yt+0]=u,this.int16[yt+1]=x,this.uint16[yt+2]=b,this.uint16[yt+3]=E,this.uint32[Bt+2]=N,this.uint32[Bt+3]=M,this.uint32[Bt+4]=z,this.uint16[yt+10]=W,this.uint16[yt+11]=ie,this.uint16[yt+12]=ue,this.float32[Bt+7]=_e,this.float32[Bt+8]=Se,this.uint8[Zt+36]=ke,this.uint8[Zt+37]=Ue,this.uint8[Zt+38]=et,this.uint32[Bt+10]=ht,this.int16[yt+22]=Lt,l}}f.prototype.bytesPerElement=48,qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",f);class y extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht,Lt,yt,Bt,Zt,nr,xr,Rr,Ir,Ur,Jr,zr){const Qr=this.length;return this.resize(Qr+1),this.emplace(Qr,l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht,Lt,yt,Bt,Zt,nr,xr,Rr,Ir,Ur,Jr,zr)}emplace(l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht,Lt,yt,Bt,Zt,nr,xr,Rr,Ir,Ur,Jr,zr,Qr){const pr=32*l,Si=16*l;return this.int16[pr+0]=u,this.int16[pr+1]=x,this.int16[pr+2]=b,this.int16[pr+3]=E,this.int16[pr+4]=N,this.int16[pr+5]=M,this.int16[pr+6]=z,this.int16[pr+7]=W,this.uint16[pr+8]=ie,this.uint16[pr+9]=ue,this.uint16[pr+10]=_e,this.uint16[pr+11]=Se,this.uint16[pr+12]=ke,this.uint16[pr+13]=Ue,this.uint16[pr+14]=et,this.uint16[pr+15]=ht,this.uint16[pr+16]=Lt,this.uint16[pr+17]=yt,this.uint16[pr+18]=Bt,this.uint16[pr+19]=Zt,this.uint16[pr+20]=nr,this.uint16[pr+21]=xr,this.uint16[pr+22]=Rr,this.uint32[Si+12]=Ir,this.float32[Si+13]=Ur,this.float32[Si+14]=Jr,this.uint16[pr+30]=zr,this.uint16[pr+31]=Qr,l}}y.prototype.bytesPerElement=64,qe("StructArrayLayout8i15ui1ul2f2ui64",y);class w extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.float32[1*l+0]=u,l}}w.prototype.bytesPerElement=4,qe("StructArrayLayout1f4",w);class T extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,x){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,x)}emplace(l,u,x,b){const E=3*l;return this.uint16[6*l+0]=u,this.float32[E+1]=x,this.float32[E+2]=b,l}}T.prototype.bytesPerElement=12,qe("StructArrayLayout1ui2f12",T);class I extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u,x){const b=this.length;return this.resize(b+1),this.emplace(b,l,u,x)}emplace(l,u,x,b){const E=4*l;return this.uint32[2*l+0]=u,this.uint16[E+2]=x,this.uint16[E+3]=b,l}}I.prototype.bytesPerElement=8,qe("StructArrayLayout1ul2ui8",I);class O extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,u){const x=this.length;return this.resize(x+1),this.emplace(x,l,u)}emplace(l,u,x){const b=2*l;return this.uint16[b+0]=u,this.uint16[b+1]=x,l}}O.prototype.bytesPerElement=4,qe("StructArrayLayout2ui4",O);class V extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const u=this.length;return this.resize(u+1),this.emplace(u,l)}emplace(l,u){return this.uint16[1*l+0]=u,l}}V.prototype.bytesPerElement=2,qe("StructArrayLayout1ui2",V);class se extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,u,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,l,u,x,b)}emplace(l,u,x,b,E){const N=4*l;return this.float32[N+0]=u,this.float32[N+1]=x,this.float32[N+2]=b,this.float32[N+3]=E,l}}se.prototype.bytesPerElement=16,qe("StructArrayLayout4f16",se);class oe extends Ln{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}oe.prototype.size=20;class ge extends ed{get(l){return new oe(this,l)}}qe("CollisionBoxArray",ge);class de extends Ln{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}de.prototype.size=48;class Ee extends f{get(l){return new de(this,l)}}qe("PlacedSymbolArray",Ee);class je extends Ln{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}je.prototype.size=64;class Je extends y{get(l){return new je(this,l)}}qe("SymbolInstanceArray",Je);class tt extends w{getoffsetX(l){return this.float32[1*l+0]}}qe("GlyphOffsetArray",tt);class at extends ra{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}qe("SymbolLineVertexArray",at);class ft extends Ln{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ft.prototype.size=12;class mt extends T{get(l){return new ft(this,l)}}qe("TextAnchorOffsetArray",mt);class pt extends Ln{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}pt.prototype.size=8;class bt extends I{get(l){return new pt(this,l)}}qe("FeatureIndexArray",bt);class St extends wn{}class gt extends wn{}class kt extends wn{}class tr extends Ro{}class Vt extends ll{}class Wt extends ns{}class Xt extends ac{}class Sr extends Rh{}class Er extends Qu{}class gr extends Dl{}class Xr extends JA{}class Bi extends Hu{}class En extends S{}class Nn extends o{}class Mn extends O{}const ss=un([{name:"a_pos",components:2,type:"Int16"}],4),{members:as}=ss;class rn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,u,x,b){const E=this.segments[this.segments.length-1];return l>rn.MAX_VERTEX_ARRAY_LENGTH&&Pt(`Max vertices per segment is ${rn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${rn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!E||E.vertexLength+l>rn.MAX_VERTEX_ARRAY_LENGTH||E.sortKey!==b?this.createNewSegment(u,x,b):E}createNewSegment(l,u,x){const b={vertexOffset:l.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0,vaos:{}};return x!==void 0&&(b.sortKey=x),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,u,x){return this.prepareSegment(0,l,u,x)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const l of this.segments)for(const u in l.vaos)l.vaos[u].destroy()}static simpleSegment(l,u,x,b){return new rn([{vertexOffset:l,primitiveOffset:u,vertexLength:x,primitiveLength:b,vaos:{},sortKey:0}])}}function us(A,l){return 256*(A=Me(Math.floor(A),0,255))+Me(Math.floor(l),0,255)}rn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qe("SegmentVector",rn);const Sa=un([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ia=un([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var na,Za,yh,Ic={exports:{}},Dh={exports:{}},Lc={exports:{}},jh=function(){if(yh)return Ic.exports;yh=1;var A=(na||(na=1,Dh.exports=function(u,x){var b,E,N,M,z,W,ie,ue;for(E=u.length-(b=3&u.length),N=x,z=3432918353,W=461845907,ue=0;ue<E;)ie=255&u.charCodeAt(ue)|(255&u.charCodeAt(++ue))<<8|(255&u.charCodeAt(++ue))<<16|(255&u.charCodeAt(++ue))<<24,++ue,N=27492+(65535&(M=5*(65535&(N=(N^=ie=(65535&(ie=(ie=(65535&ie)*z+(((ie>>>16)*z&65535)<<16)&4294967295)<<15|ie>>>17))*W+(((ie>>>16)*W&65535)<<16)&4294967295)<<13|N>>>19))+((5*(N>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(ie=0,b){case 3:ie^=(255&u.charCodeAt(ue+2))<<16;case 2:ie^=(255&u.charCodeAt(ue+1))<<8;case 1:N^=ie=(65535&(ie=(ie=(65535&(ie^=255&u.charCodeAt(ue)))*z+(((ie>>>16)*z&65535)<<16)&4294967295)<<15|ie>>>17))*W+(((ie>>>16)*W&65535)<<16)&4294967295}return N^=u.length,N=2246822507*(65535&(N^=N>>>16))+((2246822507*(N>>>16)&65535)<<16)&4294967295,N=3266489909*(65535&(N^=N>>>13))+((3266489909*(N>>>16)&65535)<<16)&4294967295,(N^=N>>>16)>>>0}),Dh.exports),l=(Za||(Za=1,Lc.exports=function(u,x){for(var b,E=u.length,N=x^E,M=0;E>=4;)b=1540483477*(65535&(b=255&u.charCodeAt(M)|(255&u.charCodeAt(++M))<<8|(255&u.charCodeAt(++M))<<16|(255&u.charCodeAt(++M))<<24))+((1540483477*(b>>>16)&65535)<<16),N=1540483477*(65535&N)+((1540483477*(N>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),E-=4,++M;switch(E){case 3:N^=(255&u.charCodeAt(M+2))<<16;case 2:N^=(255&u.charCodeAt(M+1))<<8;case 1:N=1540483477*(65535&(N^=255&u.charCodeAt(M)))+((1540483477*(N>>>16)&65535)<<16)}return N=1540483477*(65535&(N^=N>>>13))+((1540483477*(N>>>16)&65535)<<16),(N^=N>>>15)>>>0}),Lc.exports);return Ic.exports=A,Ic.exports.murmur3=A,Ic.exports.murmur2=l,Ic.exports}(),_h=g(jh);class lc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,u,x,b){this.ids.push(Do(l)),this.positions.push(u,x,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Do(l);let x=0,b=this.ids.length-1;for(;x<b;){const N=x+b>>1;this.ids[N]>=u?b=N:x=N+1}const E=[];for(;this.ids[x]===u;)E.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return E}static serialize(l,u){const x=new Float64Array(l.ids),b=new Uint32Array(l.positions);return pu(x,b,0,x.length-1),u&&u.push(x.buffer,b.buffer),{ids:x,positions:b}}static deserialize(l){const u=new lc;return u.ids=l.ids,u.positions=l.positions,u.indexed=!0,u}}function Do(A){const l=+A;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:_h(String(A))}function pu(A,l,u,x){for(;u<x;){const b=A[u+x>>1];let E=u-1,N=x+1;for(;;){do E++;while(A[E]<b);do N--;while(A[N]>b);if(E>=N)break;mu(A,E,N),mu(l,3*E,3*N),mu(l,3*E+1,3*N+1),mu(l,3*E+2,3*N+2)}N-u<x-N?(pu(A,l,u,N),u=N+1):(pu(A,l,N+1,x),x=N)}}function mu(A,l,u){const x=A[l];A[l]=A[u],A[u]=x}qe("FeaturePositionMap",lc);class Ya{constructor(l,u){this.gl=l.gl,this.location=u}}class Xs extends Ya{constructor(l,u){super(l,u),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class $n extends Ya{constructor(l,u){super(l,u),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class sa extends Ya{constructor(l,u){super(l,u),this.current=Ti.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const Ts=new Float32Array(16);function Tf(A){return[us(255*A.r,255*A.g),us(255*A.b,255*A.a)]}class Mc{constructor(l,u,x){this.value=l,this.uniformNames=u.map(b=>`u_${b}`),this.type=x}setUniform(l,u,x){l.set(x.constantOr(this.value))}getBinding(l,u,x){return this.type==="color"?new sa(l,u):new Xs(l,u)}}class cl{constructor(l,u){this.uniformNames=u.map(x=>`u_${x}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=l.tlbr}setConstantDashPositions(l,u){this.dashTo=[0,l.y,l.height,l.width],this.dashFrom=[0,u.y,u.height,u.width]}setUniform(l,u,x,b){let E=null;b==="u_pattern_to"?E=this.patternTo:b==="u_pattern_from"?E=this.patternFrom:b==="u_dasharray_to"?E=this.dashTo:b==="u_dasharray_from"?E=this.dashFrom:b==="u_pixel_ratio_to"?E=this.pixelRatioTo:b==="u_pixel_ratio_from"&&(E=this.pixelRatioFrom),E!==null&&l.set(E)}getBinding(l,u,x){return x.substr(0,9)==="u_pattern"||x.substr(0,12)==="u_dasharray_"?new $n(l,u):new Xs(l,u)}}class hs{constructor(l,u,x,b){this.expression=l,this.type=x,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:x==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(l,u,x){const b=this.paintVertexArray.length,E=this.expression.evaluate(new Li(0,x),u,{},x.canonical,[],x.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,E)}updatePaintArray(l,u,x,b,E){const N=this.expression.evaluate(new Li(0,E),x,b);this._setPaintValue(l,u,N)}_setPaintValue(l,u,x){if(this.type==="color"){const b=Tf(x);for(let E=l;E<u;E++)this.paintVertexArray.emplace(E,b[0],b[1])}else{for(let b=l;b<u;b++)this.paintVertexArray.emplace(b,x);this.maxValue=Math.max(this.maxValue,Math.abs(x))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jl{constructor(l,u,x,b,E,N){this.expression=l,this.uniformNames=u.map(M=>`u_${M}_t`),this.type=x,this.useIntegerZoom=b,this.zoom=E,this.maxValue=0,this.paintVertexAttributes=u.map(M=>({name:`a_${M}`,type:"Float32",components:x==="color"?4:2,offset:0})),this.paintVertexArray=new N}populatePaintArray(l,u,x){const b=this.expression.evaluate(new Li(this.zoom,x),u,{},x.canonical,[],x.formattedSection),E=this.expression.evaluate(new Li(this.zoom+1,x),u,{},x.canonical,[],x.formattedSection),N=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(N,l,b,E)}updatePaintArray(l,u,x,b,E){const N=this.expression.evaluate(new Li(this.zoom,E),x,b),M=this.expression.evaluate(new Li(this.zoom+1,E),x,b);this._setPaintValue(l,u,N,M)}_setPaintValue(l,u,x,b){if(this.type==="color"){const E=Tf(x),N=Tf(b);for(let M=l;M<u;M++)this.paintVertexArray.emplace(M,E[0],E[1],N[0],N[1])}else{for(let E=l;E<u;E++)this.paintVertexArray.emplace(E,x,b);this.maxValue=Math.max(this.maxValue,Math.abs(x),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,u){const x=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=Me(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,u,x){return new Xs(l,u)}}class Vu{constructor(l,u,x,b,E,N){this.expression=l,this.type=u,this.useIntegerZoom=x,this.zoom=b,this.layerId=N,this.zoomInPaintVertexArray=new E,this.zoomOutPaintVertexArray=new E}populatePaintArray(l,u,x){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,this.getPositionIds(u),x)}updatePaintArray(l,u,x,b,E){this._setPaintValues(l,u,this.getPositionIds(x),E)}_setPaintValues(l,u,x,b){const E=this.getPositions(b);if(!E||!x)return;const N=E[x.min],M=E[x.mid],z=E[x.max];if(N&&M&&z)for(let W=l;W<u;W++)this.emplace(this.zoomInPaintVertexArray,W,M,N),this.emplace(this.zoomOutPaintVertexArray,W,M,z)}upload(l){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const u=this.getVertexAttributes();this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,u,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,u,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Gu extends Vu{getPositions(l){return l.imagePositions}getPositionIds(l){return l.patterns&&l.patterns[this.layerId]}getVertexAttributes(){return Sa.members}emplace(l,u,x,b){l.emplace(u,x.tlbr[0],x.tlbr[1],x.tlbr[2],x.tlbr[3],b.tlbr[0],b.tlbr[1],b.tlbr[2],b.tlbr[3],x.pixelRatio,b.pixelRatio)}}class kf extends Vu{getPositions(l){return l.dashPositions}getPositionIds(l){return l.dashes&&l.dashes[this.layerId]}getVertexAttributes(){return ia.members}emplace(l,u,x,b){l.emplace(u,0,x.y,x.height,x.width,0,b.y,b.height,b.width)}}class Ff{constructor(l,u,x){this.binders={},this._buffers=[];const b=[];for(const E in l.paint._values){if(!x(E))continue;const N=l.paint.get(E);if(!(N instanceof jn&&hu(N.property.specification)))continue;const M=td(E,l.type),z=N.value,W=N.property.specification.type,ie=N.property.useIntegerZoom,ue=N.property.specification["property-type"],_e=ue==="cross-faded"||ue==="cross-faded-data-driven";if(z.kind==="constant")this.binders[E]=_e?new cl(z.value,M):new Mc(z.value,M,W),b.push(`/u_${E}`);else if(z.kind==="source"||_e){const Se=Nf(E,W,"source");this.binders[E]=_e?E==="line-dasharray"?new kf(z,W,ie,u,Se,l.id):new Gu(z,W,ie,u,Se,l.id):new hs(z,M,W,Se),b.push(`/a_${E}`)}else{const Se=Nf(E,W,"composite");this.binders[E]=new jl(z,M,W,ie,u,Se),b.push(`/z_${E}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){const u=this.binders[l];return u instanceof hs||u instanceof jl?u.maxValue:0}populatePaintArrays(l,u,x){for(const b in this.binders){const E=this.binders[b];(E instanceof hs||E instanceof jl||E instanceof Vu)&&E.populatePaintArray(l,u,x)}}setConstantPatternPositions(l,u){for(const x in this.binders){const b=this.binders[x];b instanceof cl&&b.setConstantPatternPositions(l,u)}}setConstantDashPositions(l,u){for(const x in this.binders){const b=this.binders[x];b instanceof cl&&b.setConstantDashPositions(l,u)}}updatePaintArrays(l,u,x,b,E){let N=!1;for(const M in l){const z=u.getPositions(M);for(const W of z){const ie=x.feature(W.index);for(const ue in this.binders){const _e=this.binders[ue];if((_e instanceof hs||_e instanceof jl||_e instanceof Vu)&&_e.expression.isStateDependent===!0){const Se=b.paint.get(ue);_e.expression=Se.value,_e.updatePaintArray(W.start,W.end,ie,l[M],E),N=!0}}}}return N}defines(){const l=[];for(const u in this.binders){const x=this.binders[u];(x instanceof Mc||x instanceof cl)&&l.push(...x.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return l}getBinderAttributes(){const l=[];for(const u in this.binders){const x=this.binders[u];if(x instanceof hs||x instanceof jl)for(let b=0;b<x.paintVertexAttributes.length;b++)l.push(x.paintVertexAttributes[b].name);else if(x instanceof Vu){const b=x.getVertexAttributes();for(const E of b)l.push(E.name)}}return l}getBinderUniforms(){const l=[];for(const u in this.binders){const x=this.binders[u];if(x instanceof Mc||x instanceof cl||x instanceof jl)for(const b of x.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,u){const x=[];for(const b in this.binders){const E=this.binders[b];if(E instanceof Mc||E instanceof cl||E instanceof jl){for(const N of E.uniformNames)if(u[N]){const M=E.getBinding(l,u[N],N);x.push({name:N,property:b,binding:M})}}}return x}setUniforms(l,u,x,b){for(const{name:E,property:N,binding:M}of u)this.binders[N].setUniform(M,b,x.get(N),E)}updatePaintBuffers(l){this._buffers=[];for(const u in this.binders){const x=this.binders[u];if(l&&x instanceof Vu){const b=l.fromScale===2?x.zoomInPaintVertexBuffer:x.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(x instanceof hs||x instanceof jl)&&x.paintVertexBuffer&&this._buffers.push(x.paintVertexBuffer)}}upload(l){for(const u in this.binders){const x=this.binders[u];(x instanceof hs||x instanceof jl||x instanceof Vu)&&x.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const u=this.binders[l];(u instanceof hs||u instanceof jl||u instanceof Vu)&&u.destroy()}}}class Ul{constructor(l,u,x=()=>!0){this.programConfigurations={};for(const b of l)this.programConfigurations[b.id]=new Ff(b,u,x);this.needsUpload=!1,this._featureMap=new lc,this._bufferOffset=0}populatePaintArrays(l,u,x,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(l,u,b);u.id!==void 0&&this._featureMap.add(u.id,x,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,u,x,b){for(const E of x)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(l,this._featureMap,u,E,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function td(A,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(`${l}-`,"").replace(/-/g,"_")]}function Nf(A,l,u){const x={color:{source:ns,composite:se},number:{source:w,composite:ns}},b=function(E){return{"line-pattern":{source:Xt,composite:Xt},"fill-pattern":{source:Xt,composite:Xt},"fill-extrusion-pattern":{source:Xt,composite:Xt},"line-dasharray":{source:Sr,composite:Sr}}[E]}(A);return b&&b[u]||x[l][u]}qe("ConstantBinder",Mc),qe("CrossFadedConstantBinder",cl),qe("SourceExpressionBinder",hs),qe("CrossFadedPatternBinder",Gu),qe("CrossFadedDasharrayBinder",kf),qe("CompositeExpressionBinder",jl),qe("ProgramConfiguration",Ff,{omit:["_buffers"]}),qe("ProgramConfigurationSet",Ul);const rd=Math.pow(2,14)-1,Sg=-rd-1;function Uh(A){const l=Ne/A.extent,u=A.loadGeometry();for(let x=0;x<u.length;x++){const b=u[x];for(let E=0;E<b.length;E++){const N=b[E],M=Math.round(N.x*l),z=Math.round(N.y*l);N.x=Me(M,Sg,rd),N.y=Me(z,Sg,rd),(M<N.x||M>N.x+1||z<N.y||z>N.y+1)&&Pt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function id(A,l){return{type:A.type,id:A.id,properties:A.properties,geometry:l?Uh(A):[]}}const z0=-32768;function ix(A,l,u,x,b){A.emplaceBack(z0+8*l+x,z0+8*u+b)}class Q0{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new gt,this.indexArray=new Nn,this.segments=new rn,this.programConfigurations=new Ul(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,x){const b=this.layers[0],E=[];let N=null,M=!1,z=b.type==="heatmap";if(b.type==="circle"){const ie=b;N=ie.layout.get("circle-sort-key"),M=!N.isConstant(),z=z||ie.paint.get("circle-pitch-alignment")==="map"}const W=z?u.subdivisionGranularity.circle:1;for(const{feature:ie,id:ue,index:_e,sourceLayerIndex:Se}of l){const ke=this.layers[0]._featureFilter.needGeometry,Ue=id(ie,ke);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),Ue,x))continue;const et=M?N.evaluate(Ue,{},x):void 0,ht={id:ue,properties:ie.properties,type:ie.type,sourceLayerIndex:Se,index:_e,geometry:ke?Ue.geometry:Uh(ie),patterns:{},sortKey:et};E.push(ht)}M&&E.sort((ie,ue)=>ie.sortKey-ue.sortKey);for(const ie of E){const{geometry:ue,index:_e,sourceLayerIndex:Se}=ie,ke=l[_e].feature;this.addFeature(ie,ue,_e,x,W),u.featureIndex.insert(ke,ue,_e,Se,this.index)}}update(l,u,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:x})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,as),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,u,x,b,E=1){let N;switch(E){case 1:N=[0,7];break;case 3:N=[0,2,5,7];break;case 5:N=[0,1,3,4,6,7];break;case 7:N=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${E}; valid values are 1, 3, 5, 7.`)}const M=N.length;for(const z of u)for(const W of z){const ie=W.x,ue=W.y;if(ie<0||ie>=Ne||ue<0||ue>=Ne)continue;const _e=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,l.sortKey),Se=_e.vertexLength;for(let ke=0;ke<M;ke++)for(let Ue=0;Ue<M;Ue++)ix(this.layoutVertexArray,ie,ue,N[Ue],N[ke]);for(let ke=0;ke<M-1;ke++)for(let Ue=0;Ue<M-1;Ue++){const et=Se+ke*M+Ue,ht=Se+(ke+1)*M+Ue;this.indexArray.emplaceBack(et,ht+1,et+1),this.indexArray.emplaceBack(et,ht,ht+1)}_e.vertexLength+=M*M,_e.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:{},canonical:b})}}function nx(A,l){for(let u=0;u<A.length;u++)if(xA(l,A[u]))return!0;for(let u=0;u<l.length;u++)if(xA(A,l[u]))return!0;return!!H0(A,l)}function Fp(A,l,u){return!!xA(A,l)||!!V0(l,A,u)}function go(A,l){if(A.length===1)return Tg(l,A[0]);for(let u=0;u<l.length;u++){const x=l[u];for(let b=0;b<x.length;b++)if(xA(A,x[b]))return!0}for(let u=0;u<A.length;u++)if(Tg(l,A[u]))return!0;for(let u=0;u<l.length;u++)if(H0(A,l[u]))return!0;return!1}function ul(A,l,u){if(A.length>1){if(H0(A,l))return!0;for(let x=0;x<l.length;x++)if(V0(l[x],A,u))return!0}for(let x=0;x<A.length;x++)if(V0(A[x],l,u))return!0;return!1}function H0(A,l){if(A.length===0||l.length===0)return!1;for(let u=0;u<A.length-1;u++){const x=A[u],b=A[u+1];for(let E=0;E<l.length-1;E++)if(sx(x,b,l[E],l[E+1]))return!0}return!1}function sx(A,l,u,x){return Ve(A,u,x)!==Ve(l,u,x)&&Ve(A,l,u)!==Ve(A,l,x)}function V0(A,l,u){const x=u*u;if(l.length===1)return A.distSqr(l[0])<x;for(let b=1;b<l.length;b++)if(Eg(A,l[b-1],l[b])<x)return!0;return!1}function Eg(A,l,u){const x=l.distSqr(u);if(x===0)return A.distSqr(l);const b=((A.x-l.x)*(u.x-l.x)+(A.y-l.y)*(u.y-l.y))/x;return A.distSqr(b<0?l:b>1?u:u.sub(l)._mult(b)._add(l))}function Tg(A,l){let u,x,b,E=!1;for(let N=0;N<A.length;N++){u=A[N];for(let M=0,z=u.length-1;M<u.length;z=M++)x=u[M],b=u[z],x.y>l.y!=b.y>l.y&&l.x<(b.x-x.x)*(l.y-x.y)/(b.y-x.y)+x.x&&(E=!E)}return E}function xA(A,l){let u=!1;for(let x=0,b=A.length-1;x<A.length;b=x++){const E=A[x],N=A[b];E.y>l.y!=N.y>l.y&&l.x<(N.x-E.x)*(l.y-E.y)/(N.y-E.y)+E.x&&(u=!u)}return u}function kg(A,l,u){const x=u[0],b=u[2];if(A.x<x.x&&l.x<x.x||A.x>b.x&&l.x>b.x||A.y<x.y&&l.y<x.y||A.y>b.y&&l.y>b.y)return!1;const E=Ve(A,l,u[0]);return E!==Ve(A,l,u[1])||E!==Ve(A,l,u[2])||E!==Ve(A,l,u[3])}function Ld(A,l,u){const x=l.paint.get(A).value;return x.kind==="constant"?x.value:u.programConfigurations.get(l.id).getMaxValue(A)}function Np(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Ip(A,l,u,x,b){if(!l[0]&&!l[1])return A;const E=p.convert(l)._mult(b);u==="viewport"&&E._rotate(-x);const N=[];for(let M=0;M<A.length;M++)N.push(A[M].sub(E));return N}function Fg({queryGeometry:A,size:l},u){return Fp(A,u,l)}function Ng({queryGeometry:A,size:l,transform:u,unwrappedTileID:x,getElevation:b},E){return Fp(A,E,l*(u.projectTileCoordinates(E.x,E.y,x,b).signedDistanceFromCamera/u.cameraToCenterDistance))}function Ig({queryGeometry:A,size:l,transform:u,unwrappedTileID:x,getElevation:b},E){const N=u.projectTileCoordinates(E.x,E.y,x,b).signedDistanceFromCamera,M=l*(u.cameraToCenterDistance/N);return Fp(A,If(E,u,x,b),M)}function ax({queryGeometry:A,size:l,transform:u,unwrappedTileID:x,getElevation:b},E){return Fp(A,If(E,u,x,b),l)}function G0({queryGeometry:A,size:l,transform:u,unwrappedTileID:x,getElevation:b,pitchAlignment:E="map",pitchScale:N="map"},M){const z=E==="map"?N==="map"?Fg:Ng:N==="map"?Ig:ax,W={queryGeometry:A,size:l,transform:u,unwrappedTileID:x,getElevation:b};for(const ie of M)for(const ue of ie)if(z(W,ue))return!0;return!1}function If(A,l,u,x){const b=l.projectTileCoordinates(A.x,A.y,u,x).point;return new p((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}let q0,Lg;qe("CircleBucket",Q0,{omit:["layers"]});var Mg={get paint(){return Lg=Lg||new es({"circle-radius":new Or(wt.paint_circle["circle-radius"]),"circle-color":new Or(wt.paint_circle["circle-color"]),"circle-blur":new Or(wt.paint_circle["circle-blur"]),"circle-opacity":new Or(wt.paint_circle["circle-opacity"]),"circle-translate":new kr(wt.paint_circle["circle-translate"]),"circle-translate-anchor":new kr(wt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kr(wt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kr(wt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Or(wt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Or(wt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Or(wt.paint_circle["circle-stroke-opacity"])})},get layout(){return q0=q0||new es({"circle-sort-key":new Or(wt.layout_circle["circle-sort-key"])})}};class ox extends cs{constructor(l,u){super(l,Mg,u)}createBucket(l){return new Q0(l)}queryRadius(l){const u=l;return Ld("circle-radius",this,u)+Ld("circle-stroke-width",this,u)+Np(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:x,geometry:b,transform:E,pixelsToTileUnits:N,unwrappedTileID:M,getElevation:z}){const W=Ip(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-E.bearingInRadians,N),ie=this.paint.get("circle-radius").evaluate(u,x)+this.paint.get("circle-stroke-width").evaluate(u,x),ue=this.paint.get("circle-pitch-scale"),_e=this.paint.get("circle-pitch-alignment");let Se,ke;return _e==="map"?(Se=W,ke=ie*N):(Se=function(Ue,et,ht,Lt){return Ue.map(yt=>If(yt,et,ht,Lt))}(W,E,M,z),ke=ie),G0({queryGeometry:Se,size:ke,transform:E,unwrappedTileID:M,getElevation:z,pitchAlignment:_e,pitchScale:ue},b)}}class Oh extends Q0{}let K0;qe("HeatmapBucket",Oh,{omit:["layers"]});var V_={get paint(){return K0=K0||new es({"heatmap-radius":new Or(wt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Or(wt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kr(wt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ds(wt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kr(wt.paint_heatmap["heatmap-opacity"])})}};function W0(A,{width:l,height:u},x,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*u*x)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*u*x}`)}else b=new Uint8Array(l*u*x);return A.width=l,A.height=u,A.data=b,A}function zh(A,{width:l,height:u},x){if(l===A.width&&u===A.height)return;const b=W0({},{width:l,height:u},x);$0(A,b,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,l),height:Math.min(A.height,u)},x),A.width=l,A.height=u,A.data=b.data}function $0(A,l,u,x,b,E){if(b.width===0||b.height===0)return l;if(b.width>A.width||b.height>A.height||u.x>A.width-b.width||u.y>A.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||x.x>l.width-b.width||x.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const N=A.data,M=l.data;if(N===M)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<b.height;z++){const W=((u.y+z)*A.width+u.x)*E,ie=((x.y+z)*l.width+x.x)*E;for(let ue=0;ue<b.width*E;ue++)M[ie+ue]=N[W+ue]}return l}class nd{constructor(l,u){W0(this,l,1,u)}resize(l){zh(this,l,1)}clone(){return new nd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,x,b,E){$0(l,u,x,b,E,1)}}class vo{constructor(l,u){W0(this,l,4,u)}resize(l){zh(this,l,4)}replace(l,u){u?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,u,x,b,E){$0(l,u,x,b,E,4)}setPixel(l,u,x){const b=4*(l*this.width+u);this.data[b+0]=Math.round(255*x.r/x.a),this.data[b+1]=Math.round(255*x.g/x.a),this.data[b+2]=Math.round(255*x.b/x.a),this.data[b+3]=Math.round(255*x.a)}}function aa(A){const l={},u=A.resolution||256,x=A.clips?A.clips.length:1,b=A.image||new vo({width:u,height:x});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const E=(N,M,z)=>{l[A.evaluationKey]=z;const W=A.expression.evaluate(l);b.setPixel(N/4/u,M/4,W)};if(A.clips)for(let N=0,M=0;N<x;++N,M+=4*u)for(let z=0,W=0;z<u;z++,W+=4){const ie=z/(u-1),{start:ue,end:_e}=A.clips[N];E(M,W,ue*(1-ie)+_e*ie)}else for(let N=0,M=0;N<u;N++,M+=4)E(0,M,N/(u-1));return b}qe("AlphaImage",nd),qe("RGBAImage",vo);const Pg="big-fb";class G_ extends cs{createBucket(l){return new Oh(l)}constructor(l,u){super(l,V_,u),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=aa({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Pg)&&this.heatmapFbos.delete(Pg)}queryRadius(l){return Ld("heatmap-radius",this,l)}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:x,geometry:b,transform:E,pixelsToTileUnits:N,unwrappedTileID:M,getElevation:z}){return G0({queryGeometry:l,size:this.paint.get("heatmap-radius").evaluate(u,x)*N,transform:E,unwrappedTileID:M,getElevation:z},b)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Rg;var Lp={get paint(){return Rg=Rg||new es({"hillshade-illumination-direction":new kr(wt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new kr(wt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new kr(wt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kr(wt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kr(wt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kr(wt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kr(wt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new kr(wt.paint_hillshade["hillshade-method"])})}};class sd extends cs{constructor(l,u){super(l,Lp,u),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,u=this.paint.get("hillshade-illumination-altitude").values,x=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values;const E=Math.max(l.length,u.length,x.length,b.length);l=l.concat(Array(E-l.length).fill(l.at(-1))),u=u.concat(Array(E-u.length).fill(u.at(-1))),x=x.concat(Array(E-x.length).fill(x.at(-1))),b=b.concat(Array(E-b.length).fill(b.at(-1)));const N=u.map(Ci);return{directionRadians:l.map(Ci),altitudeRadians:N,shadowColor:b,highlightColor:x}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Dg;var lx={get paint(){return Dg=Dg||new es({"color-relief-opacity":new kr(wt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ds(wt["paint_color-relief"]["color-relief-color"])})}};class Md{constructor(l,u,x,b){this.context=l,this.format=x,this.texture=l.gl.createTexture(),this.update(u,b)}update(l,u,x){const{width:b,height:E}=l,N=!(this.size&&this.size[0]===b&&this.size[1]===E||x),{context:M}=this,{gl:z}=M;if(this.useMipmap=!!(u&&u.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!u||u.premultiply!==!1)),N)this.size=[b,E],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||ar(l)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,l):z.texImage2D(z.TEXTURE_2D,0,this.format,b,E,0,this.format,z.UNSIGNED_BYTE,l.data);else{const{x:W,y:ie}=x||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||ar(l)?z.texSubImage2D(z.TEXTURE_2D,0,W,ie,z.RGBA,z.UNSIGNED_BYTE,l):z.texSubImage2D(z.TEXTURE_2D,0,W,ie,b,E,z.RGBA,z.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D),M.pixelStoreUnpackFlipY.setDefault(),M.pixelStoreUnpack.setDefault(),M.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,u,x){const{context:b}=this,{gl:E}=b;E.bindTexture(E.TEXTURE_2D,this.texture),x!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(x=E.LINEAR),l!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,l),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,x||l),this.filter=l),u!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,u),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class bh{constructor(l,u,x,b=1,E=1,N=1,M=0){if(this.uid=l,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(x&&!["mapbox","terrarium","custom"].includes(x))return void Pt(`"${x}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const z=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),x){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=E,this.blueFactor=N,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let W=0;W<z;W++)this.data[this._idx(-1,W)]=this.data[this._idx(0,W)],this.data[this._idx(z,W)]=this.data[this._idx(z-1,W)],this.data[this._idx(W,-1)]=this.data[this._idx(W,0)],this.data[this._idx(W,z)]=this.data[this._idx(W,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let W=0;W<z;W++)for(let ie=0;ie<z;ie++){const ue=this.get(W,ie);ue>this.max&&(this.max=ue),ue<this.min&&(this.min=ue)}}get(l,u){const x=new Uint8Array(this.data.buffer),b=4*this._idx(l,u);return this.unpack(x[b],x[b+1],x[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,u){if(l<-1||l>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(l+1)}unpack(l,u,x){return l*this.redFactor+u*this.greenFactor+x*this.blueFactor-this.baseShift}pack(l){return jg(l,this.getUnpackVector())}getPixels(){return new vo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,u,x){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,E=u*this.dim+this.dim,N=x*this.dim,M=x*this.dim+this.dim;switch(u){case-1:b=E-1;break;case 1:E=b+1}switch(x){case-1:N=M-1;break;case 1:M=N+1}const z=-u*this.dim,W=-x*this.dim;for(let ie=N;ie<M;ie++)for(let ue=b;ue<E;ue++)this.data[this._idx(ue,ie)]=l.data[this._idx(ue+z,ie+W)]}}function jg(A,l){const u=l[0],x=l[1],b=l[2],E=l[3],N=Math.min(u,x,b),M=Math.round((A+E)/N);return{r:Math.floor(M*N/u)%256,g:Math.floor(M*N/x)%256,b:Math.floor(M*N/b)%256}}qe("DEMData",bh);class Ug extends cs{constructor(l,u){super(l,lx,u)}_createColorRamp(l){const u={elevationStops:[],colorStops:[]},x=this._transitionablePaint._values["color-relief-color"].value.expression;if(x instanceof gh&&x._styleExpression.expression instanceof cr){this.colorRampExpression=x;const N=x._styleExpression.expression;u.elevationStops=N.labels,u.colorStops=[];for(const M of u.elevationStops)u.colorStops.push(N.evaluate({globals:{elevation:M}}))}if(u.elevationStops.length<1&&(u.elevationStops=[0],u.colorStops=[Ti.transparent]),u.elevationStops.length<2&&(u.elevationStops.push(u.elevationStops[0]+1),u.colorStops.push(u.colorStops[0])),u.elevationStops.length<=l)return u;const b={elevationStops:[],colorStops:[]},E=(u.elevationStops.length-1)/(l-1);for(let N=0;N<u.elevationStops.length-.5;N+=E)b.elevationStops.push(u.elevationStops[Math.round(N)]),b.colorStops.push(u.colorStops[Math.round(N)]);return Pt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,u,x){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const b=this._createColorRamp(u),E=new vo({width:b.colorStops.length,height:1}),N=new vo({width:b.colorStops.length,height:1});for(let M=0;M<b.elevationStops.length;M++){const z=jg(b.elevationStops[M],x);N.setPixel(0,M,new Ti(z.r/255,z.g/255,z.b/255,1)),E.setPixel(0,M,b.colorStops[M])}return this.colorRampTextures={elevationTexture:new Md(l,N,l.gl.RGBA),colorTexture:new Md(l,E,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const cx=un([{name:"a_pos",components:2,type:"Int16"}],4),{members:Og}=cx;function Lf(A,l,u){const x=u.patternDependencies;let b=!1;for(const E of l){const N=E.paint.get(`${A}-pattern`);N.isConstant()||(b=!0);const M=N.constantOr(null);M&&(b=!0,x[M.to]=!0,x[M.from]=!0)}return b}function Mf(A,l,u,x,b){const{zoom:E}=x,N=b.patternDependencies;for(const M of l){const z=M.paint.get(`${A}-pattern`).value;if(z.kind!=="constant"){let W=z.evaluate({zoom:E-1},u,{},b.availableImages),ie=z.evaluate({zoom:E},u,{},b.availableImages),ue=z.evaluate({zoom:E+1},u,{},b.availableImages);W=W&&W.name?W.name:W,ie=ie&&ie.name?ie.name:ie,ue=ue&&ue.name?ue.name:ue,N[W]=!0,N[ie]=!0,N[ue]=!0,u.patterns[M.id]={min:W,mid:ie,max:ue}}}return u}function zg(A,l,u,x,b){let E;if(b===function(N,M,z,W){let ie=0;for(let ue=M,_e=z-W;ue<z;ue+=W)ie+=(N[_e]-N[ue])*(N[ue+1]+N[_e+1]),_e=ue;return ie}(A,l,u,x)>0)for(let N=l;N<u;N+=x)E=ad(N/x|0,A[N],A[N+1],E);else for(let N=u-x;N>=l;N-=x)E=ad(N/x|0,A[N],A[N+1],E);return E&&Uo(E,E.next)&&(Ku(E),E=E.next),E}function cc(A,l){if(!A)return A;l||(l=A);let u,x=A;do if(u=!1,x.steiner||!Uo(x,x.next)&&Ys(x.prev,x,x.next)!==0)x=x.next;else{if(Ku(x),x=l=x.prev,x===x.next)break;u=!0}while(u||x!==l);return l}function Zs(A,l,u,x,b,E,N){if(!A)return;!N&&E&&function(z,W,ie,ue){let _e=z;do _e.z===0&&(_e.z=Ol(_e.x,_e.y,W,ie,ue)),_e.prevZ=_e.prev,_e.nextZ=_e.next,_e=_e.next;while(_e!==z);_e.prevZ.nextZ=null,_e.prevZ=null,function(Se){let ke,Ue=1;do{let et,ht=Se;Se=null;let Lt=null;for(ke=0;ht;){ke++;let yt=ht,Bt=0;for(let nr=0;nr<Ue&&(Bt++,yt=yt.nextZ,yt);nr++);let Zt=Ue;for(;Bt>0||Zt>0&&yt;)Bt!==0&&(Zt===0||!yt||ht.z<=yt.z)?(et=ht,ht=ht.nextZ,Bt--):(et=yt,yt=yt.nextZ,Zt--),Lt?Lt.nextZ=et:Se=et,et.prevZ=Lt,Lt=et;ht=yt}Lt.nextZ=null,Ue*=2}while(ke>1)}(_e)}(A,x,b,E);let M=A;for(;A.prev!==A.next;){const z=A.prev,W=A.next;if(E?ux(A,x,b,E):Qg(A))l.push(z.i,A.i,W.i),Ku(A),A=W.next,M=W.next;else if((A=W)===M){N?N===1?Zs(A=jo(cc(A),l),l,u,x,b,E,2):N===2&&q_(A,l,u,x,b,E):Zs(cc(A),l,u,x,b,E,1);break}}}function Qg(A){const l=A.prev,u=A,x=A.next;if(Ys(l,u,x)>=0)return!1;const b=l.x,E=u.x,N=x.x,M=l.y,z=u.y,W=x.y,ie=Math.min(b,E,N),ue=Math.min(M,z,W),_e=Math.max(b,E,N),Se=Math.max(M,z,W);let ke=x.next;for(;ke!==l;){if(ke.x>=ie&&ke.x<=_e&&ke.y>=ue&&ke.y<=Se&&Pf(b,M,E,z,N,W,ke.x,ke.y)&&Ys(ke.prev,ke,ke.next)>=0)return!1;ke=ke.next}return!0}function ux(A,l,u,x){const b=A.prev,E=A,N=A.next;if(Ys(b,E,N)>=0)return!1;const M=b.x,z=E.x,W=N.x,ie=b.y,ue=E.y,_e=N.y,Se=Math.min(M,z,W),ke=Math.min(ie,ue,_e),Ue=Math.max(M,z,W),et=Math.max(ie,ue,_e),ht=Ol(Se,ke,l,u,x),Lt=Ol(Ue,et,l,u,x);let yt=A.prevZ,Bt=A.nextZ;for(;yt&&yt.z>=ht&&Bt&&Bt.z<=Lt;){if(yt.x>=Se&&yt.x<=Ue&&yt.y>=ke&&yt.y<=et&&yt!==b&&yt!==N&&Pf(M,ie,z,ue,W,_e,yt.x,yt.y)&&Ys(yt.prev,yt,yt.next)>=0||(yt=yt.prevZ,Bt.x>=Se&&Bt.x<=Ue&&Bt.y>=ke&&Bt.y<=et&&Bt!==b&&Bt!==N&&Pf(M,ie,z,ue,W,_e,Bt.x,Bt.y)&&Ys(Bt.prev,Bt,Bt.next)>=0))return!1;Bt=Bt.nextZ}for(;yt&&yt.z>=ht;){if(yt.x>=Se&&yt.x<=Ue&&yt.y>=ke&&yt.y<=et&&yt!==b&&yt!==N&&Pf(M,ie,z,ue,W,_e,yt.x,yt.y)&&Ys(yt.prev,yt,yt.next)>=0)return!1;yt=yt.prevZ}for(;Bt&&Bt.z<=Lt;){if(Bt.x>=Se&&Bt.x<=Ue&&Bt.y>=ke&&Bt.y<=et&&Bt!==b&&Bt!==N&&Pf(M,ie,z,ue,W,_e,Bt.x,Bt.y)&&Ys(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.nextZ}return!0}function jo(A,l){let u=A;do{const x=u.prev,b=u.next.next;!Uo(x,b)&&qu(x,u,u.next,b)&&Rf(x,b)&&Rf(b,x)&&(l.push(x.i,u.i,b.i),Ku(u),Ku(u.next),u=A=b),u=u.next}while(u!==A);return cc(u)}function q_(A,l,u,x,b,E){let N=A;do{let M=N.next.next;for(;M!==N.prev;){if(N.i!==M.i&&K_(N,M)){let z=_A(N,M);return N=cc(N,N.next),z=cc(z,z.next),Zs(N,l,u,x,b,E,0),void Zs(z,l,u,x,b,E,0)}M=M.next}N=N.next}while(N!==A)}function hx(A,l){let u=A.x-l.x;return u===0&&(u=A.y-l.y,u===0)&&(u=(A.next.y-A.y)/(A.next.x-A.x)-(l.next.y-l.y)/(l.next.x-l.x)),u}function Ax(A,l){const u=function(b,E){let N=E;const M=b.x,z=b.y;let W,ie=-1/0;if(Uo(b,N))return N;do{if(Uo(b,N.next))return N.next;if(z<=N.y&&z>=N.next.y&&N.next.y!==N.y){const Ue=N.x+(z-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ue<=M&&Ue>ie&&(ie=Ue,W=N.x<N.next.x?N:N.next,Ue===M))return W}N=N.next}while(N!==E);if(!W)return null;const ue=W,_e=W.x,Se=W.y;let ke=1/0;N=W;do{if(M>=N.x&&N.x>=_e&&M!==N.x&&Hg(z<Se?M:ie,z,_e,Se,z<Se?ie:M,z,N.x,N.y)){const Ue=Math.abs(z-N.y)/(M-N.x);Rf(N,b)&&(Ue<ke||Ue===ke&&(N.x>W.x||N.x===W.x&&oa(W,N)))&&(W=N,ke=Ue)}N=N.next}while(N!==ue);return W}(A,l);if(!u)return l;const x=_A(u,A);return cc(x,x.next),cc(u,u.next)}function oa(A,l){return Ys(A.prev,A,l.prev)<0&&Ys(l.next,A,A.next)<0}function Ol(A,l,u,x,b){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-u)*b|0)|A<<8))|A<<4))|A<<2))|A<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-x)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function yA(A){let l=A,u=A;do(l.x<u.x||l.x===u.x&&l.y<u.y)&&(u=l),l=l.next;while(l!==A);return u}function Hg(A,l,u,x,b,E,N,M){return(b-N)*(l-M)>=(A-N)*(E-M)&&(A-N)*(x-M)>=(u-N)*(l-M)&&(u-N)*(E-M)>=(b-N)*(x-M)}function Pf(A,l,u,x,b,E,N,M){return!(A===N&&l===M)&&Hg(A,l,u,x,b,E,N,M)}function K_(A,l){return A.next.i!==l.i&&A.prev.i!==l.i&&!function(u,x){let b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==x.i&&b.next.i!==x.i&&qu(b,b.next,u,x))return!0;b=b.next}while(b!==u);return!1}(A,l)&&(Rf(A,l)&&Rf(l,A)&&function(u,x){let b=u,E=!1;const N=(u.x+x.x)/2,M=(u.y+x.y)/2;do b.y>M!=b.next.y>M&&b.next.y!==b.y&&N<(b.next.x-b.x)*(M-b.y)/(b.next.y-b.y)+b.x&&(E=!E),b=b.next;while(b!==u);return E}(A,l)&&(Ys(A.prev,A,l.prev)||Ys(A,l.prev,l))||Uo(A,l)&&Ys(A.prev,A,A.next)>0&&Ys(l.prev,l,l.next)>0)}function Ys(A,l,u){return(l.y-A.y)*(u.x-l.x)-(l.x-A.x)*(u.y-l.y)}function Uo(A,l){return A.x===l.x&&A.y===l.y}function qu(A,l,u,x){const b=zl(Ys(A,l,u)),E=zl(Ys(A,l,x)),N=zl(Ys(u,x,A)),M=zl(Ys(u,x,l));return b!==E&&N!==M||!(b!==0||!Mp(A,u,l))||!(E!==0||!Mp(A,x,l))||!(N!==0||!Mp(u,A,x))||!(M!==0||!Mp(u,l,x))}function Mp(A,l,u){return l.x<=Math.max(A.x,u.x)&&l.x>=Math.min(A.x,u.x)&&l.y<=Math.max(A.y,u.y)&&l.y>=Math.min(A.y,u.y)}function zl(A){return A>0?1:A<0?-1:0}function Rf(A,l){return Ys(A.prev,A,A.next)<0?Ys(A,l,A.next)>=0&&Ys(A,A.prev,l)>=0:Ys(A,l,A.prev)<0||Ys(A,A.next,l)<0}function _A(A,l){const u=Pp(A.i,A.x,A.y),x=Pp(l.i,l.x,l.y),b=A.next,E=l.prev;return A.next=l,l.prev=A,u.next=b,b.prev=u,x.next=u,u.prev=x,E.next=x,x.prev=E,x}function ad(A,l,u,x){const b=Pp(A,l,u);return x?(b.next=x.next,b.prev=x,x.next.prev=b,x.next=b):(b.prev=b,b.next=b),b}function Ku(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Pp(A,l,u){return{i:A,x:l,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class od{constructor(l,u){if(u>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=u}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class gu{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}gu.noSubdivision=new gu({fill:new od(0,0),line:new od(0,0),tile:new od(0,0),stencil:new od(0,0),circle:1}),qe("SubdivisionGranularityExpression",od),qe("SubdivisionGranularitySetting",gu);const Pd=-32768,Qh=32767;class Rp{constructor(l,u){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=Ne/l,this._canonical=u}_getKey(l,u){return(l+=32768)<<16|u+32768}_vertexToIndex(l,u){if(l<-32768||u<-32768||l>32767||u>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const x=0|Math.round(l),b=0|Math.round(u),E=this._getKey(x,b);if(this._vertexDictionary.has(E))return this._vertexDictionary.get(E);const N=this._vertexBuffer.length/2;return this._vertexDictionary.set(E,N),this._vertexBuffer.push(x,b),N}_subdivideTrianglesScanline(l){if(this._granularity<2)return function(b,E){const N=[];for(let M=0;M<E.length;M+=3){const z=E[M],W=E[M+1],ie=E[M+2],ue=b[2*z],_e=b[2*z+1];(b[2*W]-ue)*(b[2*ie+1]-_e)-(b[2*W+1]-_e)*(b[2*ie]-ue)>0?(N.push(z),N.push(ie),N.push(W)):(N.push(z),N.push(W),N.push(ie))}return N}(this._vertexBuffer,l);const u=[],x=l.length;for(let b=0;b<x;b+=3){const E=[l[b+0],l[b+1],l[b+2]],N=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]];let M=1/0,z=1/0,W=-1/0,ie=-1/0;for(let Ue=0;Ue<3;Ue++){const et=N[2*Ue],ht=N[2*Ue+1];M=Math.min(M,et),W=Math.max(W,et),z=Math.min(z,ht),ie=Math.max(ie,ht)}if(M===W||z===ie)continue;const ue=Math.floor(M/this._granularityCellSize),_e=Math.ceil(W/this._granularityCellSize),Se=Math.floor(z/this._granularityCellSize),ke=Math.ceil(ie/this._granularityCellSize);if(ue!==_e||Se!==ke)for(let Ue=Se;Ue<ke;Ue++){const et=this._scanlineGenerateVertexRingForCellRow(Ue,N,E);dx(this._vertexBuffer,et,u)}else u.push(...E)}return u}_scanlineGenerateVertexRingForCellRow(l,u,x){const b=l*this._granularityCellSize,E=b+this._granularityCellSize,N=[];for(let M=0;M<3;M++){const z=u[2*M],W=u[2*M+1],ie=u[2*(M+1)%6],ue=u[(2*(M+1)+1)%6],_e=u[2*(M+2)%6],Se=u[(2*(M+2)+1)%6],ke=ie-z,Ue=ue-W,et=ke===0,ht=Ue===0,Lt=(b-W)/Ue,yt=(E-W)/Ue,Bt=Math.min(Lt,yt),Zt=Math.max(Lt,yt);if(!ht&&(Bt>=1||Zt<=0)||ht&&(W<b||W>E)){ue>=b&&ue<=E&&N.push(x[(M+1)%3]);continue}!ht&&Bt>0&&N.push(this._vertexToIndex(z+ke*Bt,W+Ue*Bt));const nr=z+ke*Math.max(Bt,0),xr=z+ke*Math.min(Zt,1);et||this._generateIntraEdgeVertices(N,z,W,ie,ue,nr,xr),!ht&&Zt<1&&N.push(this._vertexToIndex(z+ke*Zt,W+Ue*Zt)),(ht||ue>=b&&ue<=E)&&N.push(x[(M+1)%3]),!ht&&(ue<=b||ue>=E)&&this._generateInterEdgeVertices(N,z,W,ie,ue,_e,Se,xr,b,E)}return N}_generateIntraEdgeVertices(l,u,x,b,E,N,M){const z=b-u,W=E-x,ie=W===0,ue=ie?Math.min(u,b):Math.min(N,M),_e=ie?Math.max(u,b):Math.max(N,M),Se=Math.floor(ue/this._granularityCellSize)+1,ke=Math.ceil(_e/this._granularityCellSize)-1;if(ie?u<b:N<M)for(let Ue=Se;Ue<=ke;Ue++){const et=Ue*this._granularityCellSize;l.push(this._vertexToIndex(et,x+W*(et-u)/z))}else for(let Ue=ke;Ue>=Se;Ue--){const et=Ue*this._granularityCellSize;l.push(this._vertexToIndex(et,x+W*(et-u)/z))}}_generateInterEdgeVertices(l,u,x,b,E,N,M,z,W,ie){const ue=E-x,_e=N-b,Se=M-E,ke=(W-E)/Se,Ue=(ie-E)/Se,et=Math.min(ke,Ue),ht=Math.max(ke,Ue),Lt=b+_e*et;let yt=Math.floor(Math.min(Lt,z)/this._granularityCellSize)+1,Bt=Math.ceil(Math.max(Lt,z)/this._granularityCellSize)-1,Zt=z<Lt;const nr=Se===0;if(nr&&(M===W||M===ie))return;if(nr||et>=1||ht<=0){const Rr=x-M,Ir=N+(u-N)*Math.min((W-M)/Rr,(ie-M)/Rr);yt=Math.floor(Math.min(Ir,z)/this._granularityCellSize)+1,Bt=Math.ceil(Math.max(Ir,z)/this._granularityCellSize)-1,Zt=z<Ir}const xr=ue>0?ie:W;if(Zt)for(let Rr=yt;Rr<=Bt;Rr++)l.push(this._vertexToIndex(Rr*this._granularityCellSize,xr));else for(let Rr=Bt;Rr>=yt;Rr--)l.push(this._vertexToIndex(Rr*this._granularityCellSize,xr))}_generateOutline(l){const u=[];for(const x of l){const b=Wu(x,this._granularity,!0),E=this._pointArrayToIndices(b),N=[];for(let M=1;M<E.length;M++)N.push(E[M-1]),N.push(E[M]);u.push(N)}return u}_handlePoles(l){let u=!1,x=!1;this._canonical&&(this._canonical.y===0&&(u=!0),this._canonical.y===(1<<this._canonical.z)-1&&(x=!0)),(u||x)&&this._fillPoles(l,u,x)}_ensureNoPoleVertices(){const l=this._vertexBuffer;for(let u=0;u<l.length;u+=2){const x=l[u+1];x===Pd&&(l[u+1]=-32767),x===Qh&&(l[u+1]=32766)}}_generatePoleQuad(l,u,x,b,E,N){b>E!=(N===Pd)?(l.push(u),l.push(x),l.push(this._vertexToIndex(b,N)),l.push(x),l.push(this._vertexToIndex(E,N)),l.push(this._vertexToIndex(b,N))):(l.push(x),l.push(u),l.push(this._vertexToIndex(b,N)),l.push(this._vertexToIndex(E,N)),l.push(x),l.push(this._vertexToIndex(b,N)))}_fillPoles(l,u,x){const b=this._vertexBuffer,E=Ne,N=l.length;for(let M=2;M<N;M+=3){const z=l[M-2],W=l[M-1],ie=l[M],ue=b[2*z],_e=b[2*z+1],Se=b[2*W],ke=b[2*W+1],Ue=b[2*ie],et=b[2*ie+1];u&&(_e===0&&ke===0&&this._generatePoleQuad(l,z,W,ue,Se,Pd),ke===0&&et===0&&this._generatePoleQuad(l,W,ie,Se,Ue,Pd),et===0&&_e===0&&this._generatePoleQuad(l,ie,z,Ue,ue,Pd)),x&&(_e===E&&ke===E&&this._generatePoleQuad(l,z,W,ue,Se,Qh),ke===E&&et===E&&this._generatePoleQuad(l,W,ie,Se,Ue,Qh),et===E&&_e===E&&this._generatePoleQuad(l,ie,z,Ue,ue,Qh))}}_initializeVertices(l){for(let u=0;u<l.length;u+=2)this._vertexToIndex(l[u],l[u+1])}subdividePolygonInternal(l,u){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:x,holeIndices:b}=function(M){const z=[],W=[];for(const ie of M)if(ie.length!==0){ie!==M[0]&&z.push(W.length/2);for(let ue=0;ue<ie.length;ue++)W.push(ie[ue].x),W.push(ie[ue].y)}return{flattened:W,holeIndices:z}}(l);let E;this._initializeVertices(x);try{const M=function(W,ie,ue=2){const _e=ie&&ie.length,Se=_e?ie[0]*ue:W.length;let ke=zg(W,0,Se,ue,!0);const Ue=[];if(!ke||ke.next===ke.prev)return Ue;let et,ht,Lt;if(_e&&(ke=function(yt,Bt,Zt,nr){const xr=[];for(let Rr=0,Ir=Bt.length;Rr<Ir;Rr++){const Ur=zg(yt,Bt[Rr]*nr,Rr<Ir-1?Bt[Rr+1]*nr:yt.length,nr,!1);Ur===Ur.next&&(Ur.steiner=!0),xr.push(yA(Ur))}xr.sort(hx);for(let Rr=0;Rr<xr.length;Rr++)Zt=Ax(xr[Rr],Zt);return Zt}(W,ie,ke,ue)),W.length>80*ue){et=W[0],ht=W[1];let yt=et,Bt=ht;for(let Zt=ue;Zt<Se;Zt+=ue){const nr=W[Zt],xr=W[Zt+1];nr<et&&(et=nr),xr<ht&&(ht=xr),nr>yt&&(yt=nr),xr>Bt&&(Bt=xr)}Lt=Math.max(yt-et,Bt-ht),Lt=Lt!==0?32767/Lt:0}return Zs(ke,Ue,ue,et,ht,Lt,0),Ue}(x,b),z=this._convertIndices(x,M);E=this._subdivideTrianglesScanline(z)}catch(M){console.error(M)}let N=[];return u&&(N=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(E),{verticesFlattened:this._vertexBuffer,indicesTriangles:E,indicesLineList:N}}_convertIndices(l,u){const x=[];for(let b=0;b<u.length;b++)x.push(this._vertexToIndex(l[2*u[b]],l[2*u[b]+1]));return x}_pointArrayToIndices(l){const u=[];for(let x=0;x<l.length;x++){const b=l[x];u.push(this._vertexToIndex(b.x,b.y))}return u}}function Df(A,l,u,x=!0){return new Rp(u,l).subdividePolygonInternal(A,x)}function Wu(A,l,u=!1){if(!A||A.length<1)return[];if(A.length<2)return[];const x=A[0],b=A[A.length-1],E=u&&(x.x!==b.x||x.y!==b.y);if(l<2)return E?[...A,A[0]]:[...A];const N=Math.floor(Ne/l),M=[];M.push(new p(A[0].x,A[0].y));const z=A.length,W=E?z:z-1;for(let ie=0;ie<W;ie++){const ue=A[ie],_e=ie<z-1?A[ie+1]:A[0],Se=ue.x,ke=ue.y,Ue=_e.x,et=_e.y,ht=Se!==Ue,Lt=ke!==et;if(!ht&&!Lt)continue;const yt=Ue-Se,Bt=et-ke,Zt=Math.abs(yt),nr=Math.abs(Bt);let xr=Se,Rr=ke;for(;;){const Ur=yt>0?(Math.floor(xr/N)+1)*N:(Math.ceil(xr/N)-1)*N,Jr=Bt>0?(Math.floor(Rr/N)+1)*N:(Math.ceil(Rr/N)-1)*N,zr=Math.abs(xr-Ur),Qr=Math.abs(Rr-Jr),pr=Math.abs(xr-Ue),Si=Math.abs(Rr-et),Pi=ht?zr/Zt:Number.POSITIVE_INFINITY,ui=Lt?Qr/nr:Number.POSITIVE_INFINITY;if((pr<=zr||!ht)&&(Si<=Qr||!Lt))break;if(Pi<ui&&ht||!Lt){xr=Ur,Rr+=Bt*Pi;const ri=new p(xr,Math.round(Rr));M[M.length-1].x===ri.x&&M[M.length-1].y===ri.y||M.push(ri)}else{xr+=yt*ui,Rr=Jr;const ri=new p(Math.round(xr),Rr);M[M.length-1].x===ri.x&&M[M.length-1].y===ri.y||M.push(ri)}}const Ir=new p(Ue,et);M[M.length-1].x===Ir.x&&M[M.length-1].y===Ir.y||M.push(Ir)}return M}function dx(A,l,u){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let x=0,b=A[2*l[0]];for(let z=1;z<l.length;z++){const W=A[2*l[z]];W<b&&(b=W,x=z)}const E=l.length;let N=x,M=(N+1)%E;for(;;){const z=N-1>=0?N-1:E-1,W=(M+1)%E,ie=A[2*l[z]],ue=A[2*l[W]],_e=A[2*l[N]],Se=A[2*l[N]+1],ke=A[2*l[M]+1];let Ue=!1;if(ie<ue)Ue=!0;else if(ie>ue)Ue=!1;else{const et=ke-Se,ht=-(A[2*l[M]]-_e),Lt=Se<ke?1:-1;((ie-_e)*et+(A[2*l[z]+1]-Se)*ht)*Lt>((ue-_e)*et+(A[2*l[W]+1]-Se)*ht)*Lt&&(Ue=!0)}if(Ue){const et=l[z],ht=l[N],Lt=l[M];et!==ht&&et!==Lt&&ht!==Lt&&u.push(Lt,ht,et),N--,N<0&&(N=E-1)}else{const et=l[W],ht=l[N],Lt=l[M];et!==ht&&et!==Lt&&ht!==Lt&&u.push(Lt,ht,et),M++,M>=E&&(M=0)}if(z===W)break}}function Vg(A,l,u,x,b,E,N,M,z){const W=b.length/2,ie=N&&M&&z;if(W<rn.MAX_VERTEX_ARRAY_LENGTH){const ue=l.prepareSegment(W,u,x),_e=ue.vertexLength;for(let Ue=0;Ue<E.length;Ue+=3)x.emplaceBack(_e+E[Ue],_e+E[Ue+1],_e+E[Ue+2]);let Se,ke;ue.vertexLength+=W,ue.primitiveLength+=E.length/3,ie&&(ke=N.prepareSegment(W,u,M),Se=ke.vertexLength,ke.vertexLength+=W);for(let Ue=0;Ue<b.length;Ue+=2)A(b[Ue],b[Ue+1]);if(ie)for(let Ue=0;Ue<z.length;Ue++){const et=z[Ue];for(let ht=1;ht<et.length;ht+=2)M.emplaceBack(Se+et[ht-1],Se+et[ht]);ke.primitiveLength+=et.length/2}}else(function(ue,_e,Se,ke,Ue,et){const ht=[];for(let nr=0;nr<ke.length/2;nr++)ht.push(-1);const Lt={count:0};let yt=0,Bt=ue.getOrCreateLatestSegment(_e,Se),Zt=Bt.vertexLength;for(let nr=2;nr<Ue.length;nr+=3){const xr=Ue[nr-2],Rr=Ue[nr-1],Ir=Ue[nr];let Ur=ht[xr]<yt,Jr=ht[Rr]<yt,zr=ht[Ir]<yt;Bt.vertexLength+((Ur?1:0)+(Jr?1:0)+(zr?1:0))>rn.MAX_VERTEX_ARRAY_LENGTH&&(Bt=ue.createNewSegment(_e,Se),yt=Lt.count,Ur=!0,Jr=!0,zr=!0,Zt=0);const Qr=bA(ht,ke,et,Lt,xr,Ur,Bt),pr=bA(ht,ke,et,Lt,Rr,Jr,Bt),Si=bA(ht,ke,et,Lt,Ir,zr,Bt);Se.emplaceBack(Zt+Qr-yt,Zt+pr-yt,Zt+Si-yt),Bt.primitiveLength++}})(l,u,x,b,E,A),ie&&function(ue,_e,Se,ke,Ue,et){const ht=[];for(let nr=0;nr<ke.length/2;nr++)ht.push(-1);const Lt={count:0};let yt=0,Bt=ue.getOrCreateLatestSegment(_e,Se),Zt=Bt.vertexLength;for(let nr=0;nr<Ue.length;nr++){const xr=Ue[nr];for(let Rr=1;Rr<Ue[nr].length;Rr+=2){const Ir=xr[Rr-1],Ur=xr[Rr];let Jr=ht[Ir]<yt,zr=ht[Ur]<yt;Bt.vertexLength+((Jr?1:0)+(zr?1:0))>rn.MAX_VERTEX_ARRAY_LENGTH&&(Bt=ue.createNewSegment(_e,Se),yt=Lt.count,Jr=!0,zr=!0,Zt=0);const Qr=bA(ht,ke,et,Lt,Ir,Jr,Bt),pr=bA(ht,ke,et,Lt,Ur,zr,Bt);Se.emplaceBack(Zt+Qr-yt,Zt+pr-yt),Bt.primitiveLength++}}}(N,u,M,b,z,A),l.forceNewSegmentOnNextPrepare(),N?.forceNewSegmentOnNextPrepare()}function bA(A,l,u,x,b,E,N){if(E){const M=x.count;return u(l[2*b],l[2*b+1]),A[b]=x.count,x.count++,N.vertexLength++,M}return A[b]}class X0{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new kt,this.indexArray=new Nn,this.indexArray2=new Mn,this.programConfigurations=new Ul(l.layers,l.zoom),this.segments=new rn,this.segments2=new rn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,x){this.hasDependencies=Lf("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),E=!b.isConstant(),N=[];for(const{feature:M,id:z,index:W,sourceLayerIndex:ie}of l){const ue=this.layers[0]._featureFilter.needGeometry,_e=id(M,ue);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),_e,x))continue;const Se=E?b.evaluate(_e,{},x,u.availableImages):void 0,ke={id:z,properties:M.properties,type:M.type,sourceLayerIndex:ie,index:W,geometry:ue?_e.geometry:Uh(M),patterns:{},sortKey:Se};N.push(ke)}E&&N.sort((M,z)=>M.sortKey-z.sortKey);for(const M of N){const{geometry:z,index:W,sourceLayerIndex:ie}=M;if(this.hasDependencies){const ue=Mf("fill",this.layers,M,{zoom:this.zoom},u);this.patternFeatures.push(ue)}else this.addFeature(M,z,W,x,{},u.subdivisionGranularity);u.featureIndex.insert(l[W].feature,z,W,ie,this.index)}}update(l,u,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:x})}addFeatures(l,u,x){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,x,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Og),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,u,x,b,E,N){for(const M of Jl(u,500)){const z=Df(M,b,N.fill.getGranularityForZoomLevel(b.z)),W=this.layoutVertexArray;Vg((ie,ue)=>{W.emplaceBack(ie,ue)},this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles,this.segments2,this.indexArray2,z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:E,canonical:b})}}let Dp,Gg;qe("FillBucket",X0,{omit:["layers","patternFeatures"]});var W_={get paint(){return Gg=Gg||new es({"fill-antialias":new kr(wt.paint_fill["fill-antialias"]),"fill-opacity":new Or(wt.paint_fill["fill-opacity"]),"fill-color":new Or(wt.paint_fill["fill-color"]),"fill-outline-color":new Or(wt.paint_fill["fill-outline-color"]),"fill-translate":new kr(wt.paint_fill["fill-translate"]),"fill-translate-anchor":new kr(wt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jn(wt.paint_fill["fill-pattern"])})},get layout(){return Dp=Dp||new es({"fill-sort-key":new Or(wt.layout_fill["fill-sort-key"])})}};class $_ extends cs{constructor(l,u){super(l,W_,u)}recalculate(l,u){super.recalculate(l,u);const x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new X0(l)}queryRadius(){return Np(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:u,transform:x,pixelsToTileUnits:b}){return go(Ip(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-x.bearingInRadians,b),u)}isTileClipped(){return!0}}const As=un([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Us=un([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Tn}=As;class gn{constructor(l,u,x,b,E){this.properties={},this.extent=x,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=E,l.readFields(ds,this,u)}loadGeometry(){const l=this._pbf;l.pos=this._geometry;const u=l.readVarint()+l.pos,x=[];let b,E=1,N=0,M=0,z=0;for(;l.pos<u;){if(N<=0){const W=l.readVarint();E=7&W,N=W>>3}if(N--,E===1||E===2)M+=l.readSVarint(),z+=l.readSVarint(),E===1&&(b&&x.push(b),b=[]),b&&b.push(new p(M,z));else{if(E!==7)throw new Error(`unknown command ${E}`);b&&b.push(b[0].clone())}}return b&&x.push(b),x}bbox(){const l=this._pbf;l.pos=this._geometry;const u=l.readVarint()+l.pos;let x=1,b=0,E=0,N=0,M=1/0,z=-1/0,W=1/0,ie=-1/0;for(;l.pos<u;){if(b<=0){const ue=l.readVarint();x=7&ue,b=ue>>3}if(b--,x===1||x===2)E+=l.readSVarint(),N+=l.readSVarint(),E<M&&(M=E),E>z&&(z=E),N<W&&(W=N),N>ie&&(ie=N);else if(x!==7)throw new Error(`unknown command ${x}`)}return[M,W,z,ie]}toGeoJSON(l,u,x){const b=this.extent*Math.pow(2,x),E=this.extent*l,N=this.extent*u,M=this.loadGeometry();function z(_e){return[360*(_e.x+E)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(_e.y+N)/b)*Math.PI))-90]}function W(_e){return _e.map(z)}let ie;if(this.type===1){const _e=[];for(const ke of M)_e.push(ke[0]);const Se=W(_e);ie=_e.length===1?{type:"Point",coordinates:Se[0]}:{type:"MultiPoint",coordinates:Se}}else if(this.type===2){const _e=M.map(W);ie=_e.length===1?{type:"LineString",coordinates:_e[0]}:{type:"MultiLineString",coordinates:_e}}else{if(this.type!==3)throw new Error("unknown feature type");{const _e=function(ke){const Ue=ke.length;if(Ue<=1)return[ke];const et=[];let ht,Lt;for(let yt=0;yt<Ue;yt++){const Bt=vu(ke[yt]);Bt!==0&&(Lt===void 0&&(Lt=Bt<0),Lt===Bt<0?(ht&&et.push(ht),ht=[ke[yt]]):ht&&ht.push(ke[yt]))}return ht&&et.push(ht),et}(M),Se=[];for(const ke of _e)Se.push(ke.map(W));ie=Se.length===1?{type:"Polygon",coordinates:Se[0]}:{type:"MultiPolygon",coordinates:Se}}}const ue={type:"Feature",geometry:ie,properties:this.properties};return this.id!=null&&(ue.id=this.id),ue}}function ds(A,l,u){A===1?l.id=u.readVarint():A===2?function(x,b){const E=x.readVarint()+x.pos;for(;x.pos<E;){const N=b._keys[x.readVarint()],M=b._values[x.readVarint()];b.properties[N]=M}}(u,l):A===3?l.type=u.readVarint():A===4&&(l._geometry=u.pos)}function vu(A){let l=0;for(let u,x,b=0,E=A.length,N=E-1;b<E;N=b++)u=A[b],x=A[N],l+=(x.x-u.x)*(u.y+x.y);return l}gn.types=["Unknown","Point","LineString","Polygon"];class wA{constructor(l,u){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(jf,this,u),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];const u=this._pbf.readVarint()+this._pbf.pos;return new gn(this._pbf,u,this.extent,this._keys,this._values)}}function jf(A,l,u){A===15?l.version=u.readVarint():A===1?l.name=u.readString():A===5?l.extent=u.readVarint():A===2?l._features.push(u.pos):A===3?l._keys.push(u.readString()):A===4&&l._values.push(function(x){let b=null;const E=x.readVarint()+x.pos;for(;x.pos<E;){const N=x.readVarint()>>3;b=N===1?x.readString():N===2?x.readFloat():N===3?x.readDouble():N===4?x.readVarint64():N===5?x.readVarint():N===6?x.readSVarint():N===7?x.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b}(u))}class Z0{constructor(l,u){this.layers=l.readFields(CA,{},u)}}function CA(A,l,u){if(A===3){const x=new wA(u,u.readVarint()+u.pos);x.length&&(l[x.name]=x)}}const la=Math.pow(2,13);function $u(A,l,u,x,b,E,N,M){A.emplaceBack(l,u,2*Math.floor(x*la)+N,b*la*2,E*la*2,Math.round(M))}class BA{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.layoutVertexArray=new tr,this.centroidVertexArray=new St,this.indexArray=new Nn,this.programConfigurations=new Ul(l.layers,l.zoom),this.segments=new rn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,x){this.features=[],this.hasDependencies=Lf("fill-extrusion",this.layers,u);for(const{feature:b,id:E,index:N,sourceLayerIndex:M}of l){const z=this.layers[0]._featureFilter.needGeometry,W=id(b,z);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),W,x))continue;const ie={id:E,sourceLayerIndex:M,index:N,geometry:z?W.geometry:Uh(b),properties:b.properties,type:b.type,patterns:{}};this.hasDependencies?this.features.push(Mf("fill-extrusion",this.layers,ie,{zoom:this.zoom},u)):this.addFeature(ie,ie.geometry,N,x,{},u.subdivisionGranularity),u.featureIndex.insert(b,ie.geometry,N,M,this.index,!0)}}addFeatures(l,u,x){for(const b of this.features){const{geometry:E}=b;this.addFeature(b,E,b.index,u,x,l.subdivisionGranularity)}}update(l,u,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:x})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Tn),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Us.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,u,x,b,E,N){for(const M of Jl(u,500)){const z={x:0,y:0,sampleCount:0},W=this.layoutVertexArray.length;this.processPolygon(z,b,l,M,N);const ie=this.layoutVertexArray.length-W,ue=Math.floor(z.x/z.sampleCount),_e=Math.floor(z.y/z.sampleCount);for(let Se=0;Se<ie;Se++)this.centroidVertexArray.emplaceBack(ue,_e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:E,canonical:b})}processPolygon(l,u,x,b,E){if(b.length<1||Rd(b[0]))return;for(const ue of b)ue.length!==0&&qg(l,ue);const N={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=E.fill.getGranularityForZoomLevel(u.z),z=gn.types[x.type]==="Polygon";for(const ue of b){if(ue.length===0||Rd(ue))continue;const _e=Wu(ue,M,z);this._generateSideFaces(_e,N)}if(!z)return;const W=Df(b,u,M,!1),ie=this.layoutVertexArray;Vg((ue,_e)=>{$u(ie,ue,_e,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,W.verticesFlattened,W.indicesTriangles)}_generateSideFaces(l,u){let x=0;for(let b=1;b<l.length;b++){const E=l[b],N=l[b-1];if(Xu(E,N))continue;u.segment.vertexLength+4>rn.MAX_VERTEX_ARRAY_LENGTH&&(u.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=E.sub(N)._perp()._unit(),z=N.dist(E);x+z>32768&&(x=0),$u(this.layoutVertexArray,E.x,E.y,M.x,M.y,0,0,x),$u(this.layoutVertexArray,E.x,E.y,M.x,M.y,0,1,x),x+=z,$u(this.layoutVertexArray,N.x,N.y,M.x,M.y,0,0,x),$u(this.layoutVertexArray,N.x,N.y,M.x,M.y,0,1,x);const W=u.segment.vertexLength;this.indexArray.emplaceBack(W,W+2,W+1),this.indexArray.emplaceBack(W+1,W+2,W+3),u.segment.vertexLength+=4,u.segment.primitiveLength+=2}}}function qg(A,l){for(let u=0;u<l.length;u++){const x=l[u];u===l.length-1&&l[0].x===x.x&&l[0].y===x.y||(A.x+=x.x,A.y+=x.y,A.sampleCount++)}}function Xu(A,l){return A.x===l.x&&(A.x<0||A.x>Ne)||A.y===l.y&&(A.y<0||A.y>Ne)}function Rd(A){return A.every(l=>l.x<0)||A.every(l=>l.x>Ne)||A.every(l=>l.y<0)||A.every(l=>l.y>Ne)}let Uf;qe("FillExtrusionBucket",BA,{omit:["layers","features"]});var Pc={get paint(){return Uf=Uf||new es({"fill-extrusion-opacity":new kr(wt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Or(wt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kr(wt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kr(wt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jn(wt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Or(wt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Or(wt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kr(wt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Kg extends cs{constructor(l,u){super(l,Pc,u)}createBucket(l){return new BA(l)}queryRadius(){return Np(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:x,geometry:b,transform:E,pixelsToTileUnits:N,pixelPosMatrix:M}){const z=Ip(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-E.bearingInRadians,N),W=this.paint.get("fill-extrusion-height").evaluate(u,x),ie=this.paint.get("fill-extrusion-base").evaluate(u,x),ue=function(Se,ke){const Ue=[];for(const et of Se){const ht=[et.x,et.y,0,1];we(ht,ht,ke),Ue.push(new p(ht[0]/ht[3],ht[1]/ht[3]))}return Ue}(z,M),_e=function(Se,ke,Ue,et){const ht=[],Lt=[],yt=et[8]*ke,Bt=et[9]*ke,Zt=et[10]*ke,nr=et[11]*ke,xr=et[8]*Ue,Rr=et[9]*Ue,Ir=et[10]*Ue,Ur=et[11]*Ue;for(const Jr of Se){const zr=[],Qr=[];for(const pr of Jr){const Si=pr.x,Pi=pr.y,ui=et[0]*Si+et[4]*Pi+et[12],ri=et[1]*Si+et[5]*Pi+et[13],hn=et[2]*Si+et[6]*Pi+et[14],gs=et[3]*Si+et[7]*Pi+et[15],ca=hn+Zt,xo=gs+nr,Al=ui+xr,dl=ri+Rr,Ea=hn+Ir,ks=gs+Ur,Ja=new p((ui+yt)/xo,(ri+Bt)/xo);Ja.z=ca/xo,zr.push(Ja);const Ta=new p(Al/ks,dl/ks);Ta.z=Ea/ks,Qr.push(Ta)}ht.push(zr),Lt.push(Qr)}return[ht,Lt]}(b,ie,W,M);return function(Se,ke,Ue){let et=1/0;go(Ue,ke)&&(et=jp(Ue,ke[0]));for(let ht=0;ht<ke.length;ht++){const Lt=ke[ht],yt=Se[ht];for(let Bt=0;Bt<Lt.length-1;Bt++){const Zt=Lt[Bt],nr=[Zt,Lt[Bt+1],yt[Bt+1],yt[Bt],Zt];nx(Ue,nr)&&(et=Math.min(et,jp(Ue,nr)))}}return et!==1/0&&et}(_e[0],_e[1],ue)}}function Dd(A,l){return A.x*l.x+A.y*l.y}function jp(A,l){if(A.length===1){let u=0;const x=l[u++];let b;for(;!b||x.equals(b);)if(b=l[u++],!b)return 1/0;for(;u<l.length;u++){const E=l[u],N=A[0],M=b.sub(x),z=E.sub(x),W=N.sub(x),ie=Dd(M,M),ue=Dd(M,z),_e=Dd(z,z),Se=Dd(W,M),ke=Dd(W,z),Ue=ie*_e-ue*ue,et=(_e*Se-ue*ke)/Ue,ht=(ie*ke-ue*Se)/Ue,Lt=x.z*(1-et-ht)+b.z*et+E.z*ht;if(isFinite(Lt))return Lt}return 1/0}{let u=1/0;for(const x of l)u=Math.min(u,x.z);return u}}const Y0=un([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:ld}=Y0,hl=un([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:cd}=hl,Of=Math.cos(Math.PI/180*37.5),jd=Math.pow(2,14)/.5;class Up{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(u=>u.id),this.index=l.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Vt,this.layoutVertexArray2=new Wt,this.indexArray=new Nn,this.programConfigurations=new Ul(l.layers,l.zoom),this.segments=new rn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(l,u,x){this.hasDependencies=Lf("line",this.layers,u)||this.hasLineDasharray(this.layers);const b=this.layers[0].layout.get("line-sort-key"),E=!b.isConstant(),N=[];for(const{feature:M,id:z,index:W,sourceLayerIndex:ie}of l){const ue=this.layers[0]._featureFilter.needGeometry,_e=id(M,ue);if(!this.layers[0]._featureFilter.filter(new Li(this.zoom),_e,x))continue;const Se=E?b.evaluate(_e,{},x):void 0,ke={id:z,properties:M.properties,type:M.type,sourceLayerIndex:ie,index:W,geometry:ue?_e.geometry:Uh(M),patterns:{},dashes:{},sortKey:Se};N.push(ke)}E&&N.sort((M,z)=>M.sortKey-z.sortKey);for(const M of N){const{geometry:z,index:W,sourceLayerIndex:ie}=M;this.hasDependencies?(Lf("line",this.layers,u)?Mf("line",this.layers,M,{zoom:this.zoom},u):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,M,this.zoom,u),this.patternFeatures.push(M)):this.addFeature(M,z,W,x,{},{},u.subdivisionGranularity),u.featureIndex.insert(l[W].feature,z,W,ie,this.index)}}update(l,u,x,b){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,u,this.stateDependentLayers,{imagePositions:x,dashPositions:b})}addFeatures(l,u,x,b){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,u,x,b,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,cd)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ld),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,u,x,b,E,N,M){const z=this.layers[0].layout,W=z.get("line-join").evaluate(l,{}),ie=z.get("line-cap"),ue=z.get("line-miter-limit"),_e=z.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const Se of u)this.addLine(Se,l,W,ie,ue,_e,b,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,x,{imagePositions:E,dashPositions:N,canonical:b})}addLine(l,u,x,b,E,N,M,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=Wu(l,M?z.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let yt=0;yt<l.length-1;yt++)this.totalDistance+=l[yt].dist(l[yt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const W=gn.types[u.type]==="Polygon";let ie=l.length;for(;ie>=2&&l[ie-1].equals(l[ie-2]);)ie--;let ue=0;for(;ue<ie-1&&l[ue].equals(l[ue+1]);)ue++;if(ie<(W?3:2))return;x==="bevel"&&(E=1.05);const _e=this.overscaling<=16?122880/(512*this.overscaling):0,Se=this.segments.prepareSegment(10*ie,this.layoutVertexArray,this.indexArray);let ke,Ue,et,ht,Lt;this.e1=this.e2=-1,W&&(ke=l[ie-2],Lt=l[ue].sub(ke)._unit()._perp());for(let yt=ue;yt<ie;yt++){if(et=yt===ie-1?W?l[ue+1]:void 0:l[yt+1],et&&l[yt].equals(et))continue;Lt&&(ht=Lt),ke&&(Ue=ke),ke=l[yt],Lt=et?et.sub(ke)._unit()._perp():ht,ht=ht||Lt;let Bt=ht.add(Lt);Bt.x===0&&Bt.y===0||Bt._unit();const Zt=ht.x*Lt.x+ht.y*Lt.y,nr=Bt.x*Lt.x+Bt.y*Lt.y,xr=nr!==0?1/nr:1/0,Rr=2*Math.sqrt(2-2*nr),Ir=nr<Of&&Ue&&et,Ur=ht.x*Lt.y-ht.y*Lt.x>0;if(Ir&&yt>ue){const Qr=ke.dist(Ue);if(Qr>2*_e){const pr=ke.sub(ke.sub(Ue)._mult(_e/Qr)._round());this.updateDistance(Ue,pr),this.addCurrentVertex(pr,ht,0,0,Se),Ue=pr}}const Jr=Ue&&et;let zr=Jr?x:W?"butt":b;if(Jr&&zr==="round"&&(xr<N?zr="miter":xr<=2&&(zr="fakeround")),zr==="miter"&&xr>E&&(zr="bevel"),zr==="bevel"&&(xr>2&&(zr="flipbevel"),xr<E&&(zr="miter")),Ue&&this.updateDistance(Ue,ke),zr==="miter")Bt._mult(xr),this.addCurrentVertex(ke,Bt,0,0,Se);else if(zr==="flipbevel"){if(xr>100)Bt=Lt.mult(-1);else{const Qr=xr*ht.add(Lt).mag()/ht.sub(Lt).mag();Bt._perp()._mult(Qr*(Ur?-1:1))}this.addCurrentVertex(ke,Bt,0,0,Se),this.addCurrentVertex(ke,Bt.mult(-1),0,0,Se)}else if(zr==="bevel"||zr==="fakeround"){const Qr=-Math.sqrt(xr*xr-1),pr=Ur?Qr:0,Si=Ur?0:Qr;if(Ue&&this.addCurrentVertex(ke,ht,pr,Si,Se),zr==="fakeround"){const Pi=Math.round(180*Rr/Math.PI/20);for(let ui=1;ui<Pi;ui++){let ri=ui/Pi;if(ri!==.5){const gs=ri-.5;ri+=ri*gs*(ri-1)*((1.0904+Zt*(Zt*(3.55645-1.43519*Zt)-3.2452))*gs*gs+(.848013+Zt*(.215638*Zt-1.06021)))}const hn=Lt.sub(ht)._mult(ri)._add(ht)._unit()._mult(Ur?-1:1);this.addHalfVertex(ke,hn.x,hn.y,!1,Ur,0,Se)}}et&&this.addCurrentVertex(ke,Lt,-pr,-Si,Se)}else if(zr==="butt")this.addCurrentVertex(ke,Bt,0,0,Se);else if(zr==="square"){const Qr=Ue?1:-1;this.addCurrentVertex(ke,Bt,Qr,Qr,Se)}else zr==="round"&&(Ue&&(this.addCurrentVertex(ke,ht,0,0,Se),this.addCurrentVertex(ke,ht,1,1,Se,!0)),et&&(this.addCurrentVertex(ke,Lt,-1,-1,Se,!0),this.addCurrentVertex(ke,Lt,0,0,Se)));if(Ir&&yt<ie-1){const Qr=ke.dist(et);if(Qr>2*_e){const pr=ke.add(et.sub(ke)._mult(_e/Qr)._round());this.updateDistance(ke,pr),this.addCurrentVertex(pr,Lt,0,0,Se),ke=pr}}}}addCurrentVertex(l,u,x,b,E,N=!1){const M=u.y*b-u.x,z=-u.y-u.x*b;this.addHalfVertex(l,u.x+u.y*x,u.y-u.x*x,N,!1,x,E),this.addHalfVertex(l,M,z,N,!0,-b,E),this.distance>jd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,u,x,b,E,N))}addHalfVertex({x:l,y:u},x,b,E,N,M,z){const W=.5*(this.lineClips?this.scaledDistance*(jd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(E?1:0),(u<<1)+(N?1:0),Math.round(63*x)+128,Math.round(63*b)+128,1+(M===0?0:M<0?-1:1)|(63&W)<<2,W>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ie=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,ie,this.e2),z.primitiveLength++),N?this.e2=ie:this.e1=ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,u){this.distance+=l.dist(u),this.updateScaledDistance()}hasLineDasharray(l){for(const u of l){const x=u.paint.get("line-dasharray");if(x&&!x.isConstant())return!0}return!1}addLineDashDependencies(l,u,x,b){for(const E of l){const N=E.paint.get("line-dasharray");if(!N||N.value.kind==="constant")continue;const M=E.layout.get("line-cap")==="round",z={dasharray:N.value.evaluate({zoom:x-1},u,{}),round:M},W={dasharray:N.value.evaluate({zoom:x},u,{}),round:M},ie={dasharray:N.value.evaluate({zoom:x+1},u,{}),round:M},ue=`${z.dasharray.join(",")},${z.round}`,_e=`${W.dasharray.join(",")},${W.round}`,Se=`${ie.dasharray.join(",")},${ie.round}`;b.dashDependencies[ue]=z,b.dashDependencies[_e]=W,b.dashDependencies[Se]=ie,u.dashes[E.id]={min:ue,mid:_e,max:Se}}}}let J0,Wg;qe("LineBucket",Up,{omit:["layers","patternFeatures"]});var zf={get paint(){return Wg=Wg||new es({"line-opacity":new Or(wt.paint_line["line-opacity"]),"line-color":new Or(wt.paint_line["line-color"]),"line-translate":new kr(wt.paint_line["line-translate"]),"line-translate-anchor":new kr(wt.paint_line["line-translate-anchor"]),"line-width":new Or(wt.paint_line["line-width"]),"line-gap-width":new Or(wt.paint_line["line-gap-width"]),"line-offset":new Or(wt.paint_line["line-offset"]),"line-blur":new Or(wt.paint_line["line-blur"]),"line-dasharray":new Jn(wt.paint_line["line-dasharray"]),"line-pattern":new Jn(wt.paint_line["line-pattern"]),"line-gradient":new Ds(wt.paint_line["line-gradient"])})},get layout(){return J0=J0||new es({"line-cap":new kr(wt.layout_line["line-cap"]),"line-join":new Or(wt.layout_line["line-join"]),"line-miter-limit":new kr(wt.layout_line["line-miter-limit"]),"line-round-limit":new kr(wt.layout_line["line-round-limit"]),"line-sort-key":new Or(wt.layout_line["line-sort-key"])})}};class $g extends Or{possiblyEvaluate(l,u){return u=new Li(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(l,u)}evaluate(l,u,x,b){return u=We({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(l,u,x,b)}}let Ql;class fx extends cs{constructor(l,u){super(l,zf,u),this.gradientVersion=0,Ql||(Ql=new $g(zf.paint.properties["line-width"].specification),Ql.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(x){return x._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof Zl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,u){super.recalculate(l,u),this.paint._values["line-floorwidth"]=Ql.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Up(l)}queryRadius(l){const u=l,x=Rc(Ld("line-width",this,u),Ld("line-gap-width",this,u)),b=Ld("line-offset",this,u);return x/2+Math.abs(b)+Np(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:u,featureState:x,geometry:b,transform:E,pixelsToTileUnits:N}){const M=Ip(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-E.bearingInRadians,N),z=N/2*Rc(this.paint.get("line-width").evaluate(u,x),this.paint.get("line-gap-width").evaluate(u,x)),W=this.paint.get("line-offset").evaluate(u,x);return W&&(b=function(ie,ue){const _e=[];for(let Se=0;Se<ie.length;Se++){const ke=ie[Se],Ue=[];for(let et=0;et<ke.length;et++){const ht=ke[et-1],Lt=ke[et],yt=ke[et+1],Bt=et===0?new p(0,0):Lt.sub(ht)._unit()._perp(),Zt=et===ke.length-1?new p(0,0):yt.sub(Lt)._unit()._perp(),nr=Bt._add(Zt)._unit(),xr=nr.x*Zt.x+nr.y*Zt.y;xr!==0&&nr._mult(1/xr),Ue.push(nr._mult(ue)._add(Lt))}_e.push(Ue)}return _e}(b,W*N)),function(ie,ue,_e){for(let Se=0;Se<ue.length;Se++){const ke=ue[Se];if(ie.length>=3){for(let Ue=0;Ue<ke.length;Ue++)if(xA(ie,ke[Ue]))return!0}if(ul(ie,ke,_e))return!0}return!1}(M,b,z)}isTileClipped(){return!0}}function Rc(A,l){return l>0?l+2*A:A}const px=un([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mx=un([{name:"a_projected_pos",components:3,type:"Float32"}],4);un([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const X_=un([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);un([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const SA=un([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),em=un([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xg(A,l,u){return A.sections.forEach(x=>{x.text=function(b,E,N){const M=E.layout.get("text-transform").evaluate(N,{});return M==="uppercase"?b=b.toLocaleUpperCase():M==="lowercase"&&(b=b.toLocaleLowerCase()),Vr.applyArabicShaping&&(b=Vr.applyArabicShaping(b)),b}(x.text,l,u)}),A}un([{name:"triangle",components:3,type:"Uint16"}]),un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),un([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),un([{type:"Float32",name:"offsetX"}]),un([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),un([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Hh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Oa=24;const tm=4294967296,Zg=1/tm,rm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Op{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,u,x=this.length){for(;this.pos<x;){const b=this.readVarint(),E=b>>3,N=this.pos;this.type=7&b,l(E,u,this),this.pos===N&&this.skip(b)}return u}readMessage(l,u){return this.readFields(l,u,this.readVarint()+this.pos)}readFixed32(){const l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){const l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*tm;return this.pos+=8,l}readSFixed64(){const l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*tm;return this.pos+=8,l}readFloat(){const l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){const l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){const u=this.buf;let x,b;return b=u[this.pos++],x=127&b,b<128?x:(b=u[this.pos++],x|=(127&b)<<7,b<128?x:(b=u[this.pos++],x|=(127&b)<<14,b<128?x:(b=u[this.pos++],x|=(127&b)<<21,b<128?x:(b=u[this.pos],x|=(15&b)<<28,function(E,N,M){const z=M.buf;let W,ie;if(ie=z[M.pos++],W=(112&ie)>>4,ie<128||(ie=z[M.pos++],W|=(127&ie)<<3,ie<128)||(ie=z[M.pos++],W|=(127&ie)<<10,ie<128)||(ie=z[M.pos++],W|=(127&ie)<<17,ie<128)||(ie=z[M.pos++],W|=(127&ie)<<24,ie<128)||(ie=z[M.pos++],W|=(1&ie)<<31,ie<128))return Qf(E,W,N);throw new Error("Expected varint not more than 10 bytes")}(x,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){const l=this.readVarint()+this.pos,u=this.pos;return this.pos=l,l-u>=12&&rm?rm.decode(this.buf.subarray(u,l)):function(x,b,E){let N="",M=b;for(;M<E;){const z=x[M];let W,ie,ue,_e=null,Se=z>239?4:z>223?3:z>191?2:1;if(M+Se>E)break;Se===1?z<128&&(_e=z):Se===2?(W=x[M+1],(192&W)==128&&(_e=(31&z)<<6|63&W,_e<=127&&(_e=null))):Se===3?(W=x[M+1],ie=x[M+2],(192&W)==128&&(192&ie)==128&&(_e=(15&z)<<12|(63&W)<<6|63&ie,(_e<=2047||_e>=55296&&_e<=57343)&&(_e=null))):Se===4&&(W=x[M+1],ie=x[M+2],ue=x[M+3],(192&W)==128&&(192&ie)==128&&(192&ue)==128&&(_e=(15&z)<<18|(63&W)<<12|(63&ie)<<6|63&ue,(_e<=65535||_e>=1114112)&&(_e=null))),_e===null?(_e=65533,Se=1):_e>65535&&(_e-=65536,N+=String.fromCharCode(_e>>>10&1023|55296),_e=56320|1023&_e),N+=String.fromCharCode(_e),M+=Se}return N}(this.buf,u,l)}readBytes(){const l=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,l);return this.pos=l,u}readPackedVarint(l=[],u){const x=this.readPackedEnd();for(;this.pos<x;)l.push(this.readVarint(u));return l}readPackedSVarint(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFloat());return l}readPackedDouble(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){const u=this.readPackedEnd();for(;this.pos<u;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){const u=7&l;if(u===0)for(;this.buf[this.pos++]>127;);else if(u===2)this.pos=this.readVarint()+this.pos;else if(u===5)this.pos+=4;else{if(u!==1)throw new Error(`Unimplemented type: ${u}`);this.pos+=8}}writeTag(l,u){this.writeVarint(l<<3|u)}realloc(l){let u=this.length||16;for(;u<this.pos+l;)u*=2;if(u!==this.length){const x=new Uint8Array(u);x.set(this.buf),this.buf=x,this.dataView=new DataView(x.buffer),this.length=u}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Zg),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Zg),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?function(u,x){let b,E;if(u>=0?(b=u%4294967296|0,E=u/4294967296|0):(b=~(-u%4294967296),E=~(-u/4294967296),4294967295^b?b=b+1|0:(b=0,E=E+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");x.realloc(10),function(N,M,z){z.buf[z.pos++]=127&N|128,N>>>=7,z.buf[z.pos++]=127&N|128,N>>>=7,z.buf[z.pos++]=127&N|128,N>>>=7,z.buf[z.pos++]=127&N|128,z.buf[z.pos]=127&(N>>>=7)}(b,0,x),function(N,M){const z=(7&N)<<4;M.buf[M.pos++]|=z|((N>>>=3)?128:0),N&&(M.buf[M.pos++]=127&N|((N>>>=7)?128:0),N&&(M.buf[M.pos++]=127&N|((N>>>=7)?128:0),N&&(M.buf[M.pos++]=127&N|((N>>>=7)?128:0),N&&(M.buf[M.pos++]=127&N|((N>>>=7)?128:0),N&&(M.buf[M.pos++]=127&N)))))}(E,x)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;const u=this.pos;this.pos=function(b,E,N){for(let M,z,W=0;W<E.length;W++){if(M=E.charCodeAt(W),M>55295&&M<57344){if(!z){M>56319||W+1===E.length?(b[N++]=239,b[N++]=191,b[N++]=189):z=M;continue}if(M<56320){b[N++]=239,b[N++]=191,b[N++]=189,z=M;continue}M=z-55296<<10|M-56320|65536,z=null}else z&&(b[N++]=239,b[N++]=191,b[N++]=189,z=null);M<128?b[N++]=M:(M<2048?b[N++]=M>>6|192:(M<65536?b[N++]=M>>12|224:(b[N++]=M>>18|240,b[N++]=M>>12&63|128),b[N++]=M>>6&63|128),b[N++]=63&M|128)}return N}(this.buf,l,this.pos);const x=this.pos-u;x>=128&&gx(u,x,this),this.pos=u-1,this.writeVarint(x),this.pos+=x}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){const u=l.length;this.writeVarint(u),this.realloc(u);for(let x=0;x<u;x++)this.buf[this.pos++]=l[x]}writeRawMessage(l,u){this.pos++;const x=this.pos;l(u,this);const b=this.pos-x;b>=128&&gx(x,b,this),this.pos=x-1,this.writeVarint(b),this.pos+=b}writeMessage(l,u,x){this.writeTag(l,2),this.writeRawMessage(u,x)}writePackedVarint(l,u){u.length&&this.writeMessage(l,Z_,u)}writePackedSVarint(l,u){u.length&&this.writeMessage(l,vx,u)}writePackedBoolean(l,u){u.length&&this.writeMessage(l,im,u)}writePackedFloat(l,u){u.length&&this.writeMessage(l,xx,u)}writePackedDouble(l,u){u.length&&this.writeMessage(l,Hf,u)}writePackedFixed32(l,u){u.length&&this.writeMessage(l,yx,u)}writePackedSFixed32(l,u){u.length&&this.writeMessage(l,_x,u)}writePackedFixed64(l,u){u.length&&this.writeMessage(l,bx,u)}writePackedSFixed64(l,u){u.length&&this.writeMessage(l,wx,u)}writeBytesField(l,u){this.writeTag(l,2),this.writeBytes(u)}writeFixed32Field(l,u){this.writeTag(l,5),this.writeFixed32(u)}writeSFixed32Field(l,u){this.writeTag(l,5),this.writeSFixed32(u)}writeFixed64Field(l,u){this.writeTag(l,1),this.writeFixed64(u)}writeSFixed64Field(l,u){this.writeTag(l,1),this.writeSFixed64(u)}writeVarintField(l,u){this.writeTag(l,0),this.writeVarint(u)}writeSVarintField(l,u){this.writeTag(l,0),this.writeSVarint(u)}writeStringField(l,u){this.writeTag(l,2),this.writeString(u)}writeFloatField(l,u){this.writeTag(l,5),this.writeFloat(u)}writeDoubleField(l,u){this.writeTag(l,1),this.writeDouble(u)}writeBooleanField(l,u){this.writeVarintField(l,+u)}}function Qf(A,l,u){return u?4294967296*l+(A>>>0):4294967296*(l>>>0)+(A>>>0)}function gx(A,l,u){const x=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));u.realloc(x);for(let b=u.pos-1;b>=A;b--)u.buf[b+x]=u.buf[b]}function Z_(A,l){for(let u=0;u<A.length;u++)l.writeVarint(A[u])}function vx(A,l){for(let u=0;u<A.length;u++)l.writeSVarint(A[u])}function xx(A,l){for(let u=0;u<A.length;u++)l.writeFloat(A[u])}function Hf(A,l){for(let u=0;u<A.length;u++)l.writeDouble(A[u])}function im(A,l){for(let u=0;u<A.length;u++)l.writeBoolean(A[u])}function yx(A,l){for(let u=0;u<A.length;u++)l.writeFixed32(A[u])}function _x(A,l){for(let u=0;u<A.length;u++)l.writeSFixed32(A[u])}function bx(A,l){for(let u=0;u<A.length;u++)l.writeFixed64(A[u])}function wx(A,l){for(let u=0;u<A.length;u++)l.writeSFixed64(A[u])}function Cx(A,l,u){A===1&&u.readMessage(Bx,l)}function Bx(A,l,u){if(A===3){const{id:x,bitmap:b,width:E,height:N,left:M,top:z,advance:W}=u.readMessage(nm,{});l.push({id:x,bitmap:new nd({width:E+6,height:N+6},b),metrics:{width:E,height:N,left:M,top:z,advance:W}})}}function nm(A,l,u){A===1?l.id=u.readVarint():A===2?l.bitmap=u.readBytes():A===3?l.width=u.readVarint():A===4?l.height=u.readVarint():A===5?l.left=u.readSVarint():A===6?l.top=u.readSVarint():A===7&&(l.advance=u.readVarint())}function Yg(A){let l=0,u=0;for(const N of A)l+=N.w*N.h,u=Math.max(u,N.w);A.sort((N,M)=>M.h-N.h);const x=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),u),h:1/0}];let b=0,E=0;for(const N of A)for(let M=x.length-1;M>=0;M--){const z=x[M];if(!(N.w>z.w||N.h>z.h)){if(N.x=z.x,N.y=z.y,E=Math.max(E,N.y+N.h),b=Math.max(b,N.x+N.w),N.w===z.w&&N.h===z.h){const W=x.pop();W&&M<x.length&&(x[M]=W)}else N.h===z.h?(z.x+=N.w,z.w-=N.w):N.w===z.w?(z.y+=N.h,z.h-=N.h):(x.push({x:z.x+N.w,y:z.y,w:z.w-N.w,h:N.h}),z.y+=N.h,z.h-=N.h);break}}return{w:b,h:E,fill:l/(b*E)||0}}class sm{constructor(l,{pixelRatio:u,version:x,stretchX:b,stretchY:E,content:N,textFitWidth:M,textFitHeight:z}){this.paddedRect=l,this.pixelRatio=u,this.stretchX=b,this.stretchY=E,this.content=N,this.version=x,this.textFitWidth=M,this.textFitHeight=z}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ms{constructor(l,u){const x={},b={};this.haveRenderCallbacks=[];const E=[];this.addImages(l,x,E),this.addImages(u,b,E);const{w:N,h:M}=Yg(E),z=new vo({width:N||1,height:M||1});for(const W in l){const ie=l[W],ue=x[W].paddedRect;vo.copy(ie.data,z,{x:0,y:0},{x:ue.x+1,y:ue.y+1},ie.data)}for(const W in u){const ie=u[W],ue=b[W].paddedRect,_e=ue.x+1,Se=ue.y+1,ke=ie.data.width,Ue=ie.data.height;vo.copy(ie.data,z,{x:0,y:0},{x:_e,y:Se},ie.data),vo.copy(ie.data,z,{x:0,y:Ue-1},{x:_e,y:Se-1},{width:ke,height:1}),vo.copy(ie.data,z,{x:0,y:0},{x:_e,y:Se+Ue},{width:ke,height:1}),vo.copy(ie.data,z,{x:ke-1,y:0},{x:_e-1,y:Se},{width:1,height:Ue}),vo.copy(ie.data,z,{x:0,y:0},{x:_e+ke,y:Se},{width:1,height:Ue})}this.image=z,this.iconPositions=x,this.patternPositions=b}addImages(l,u,x){for(const b in l){const E=l[b],N={x:0,y:0,w:E.data.width+2,h:E.data.height+2};x.push(N),u[b]=new sm(N,E),E.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,u){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const x in l.updatedImages)this.patchUpdatedImage(this.iconPositions[x],l.getImage(x),u),this.patchUpdatedImage(this.patternPositions[x],l.getImage(x),u)}patchUpdatedImage(l,u,x){if(!l||!u||l.version===u.version)return;l.version=u.version;const[b,E]=l.tl;x.update(u.data,void 0,{x:b,y:E})}}var Vh;qe("ImagePosition",sm),qe("ImageAtlas",ms),c.ao=void 0,(Vh=c.ao||(c.ao={}))[Vh.none=0]="none",Vh[Vh.horizontal=1]="horizontal",Vh[Vh.vertical=2]="vertical",Vh[Vh.horizontalOnly=3]="horizontalOnly";class zp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,u,x){const b=new zp;return b.scale=l||1,b.fontStack=u,b.verticalAlign=x||"bottom",b}static forImage(l,u){const x=new zp;return x.imageName=l,x.verticalAlign=u||"bottom",x}}class Ud{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,u){const x=new Ud;for(let b=0;b<l.sections.length;b++){const E=l.sections[b];E.image?x.addImageSection(E):x.addTextSection(E,u)}return x}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let u="";for(let x=0;x<l.length;x++){const b=l.charCodeAt(x+1)||null,E=l.charCodeAt(x-1)||null;u+=b&&ii(b)&&!Hh[l[x+1]]||E&&ii(E)&&!Hh[l[x-1]]||!Hh[l[x]]?l[x]:Hh[l[x]]}return u}(this.text)}trim(){let l=0;for(let x=0;x<this.text.length&&om[this.text.charCodeAt(x)];x++)l++;let u=this.text.length;for(let x=this.text.length-1;x>=0&&x>=l&&om[this.text.charCodeAt(x)];x--)u--;this.text=this.text.substring(l,u),this.sectionIndex=this.sectionIndex.slice(l,u)}substring(l,u){const x=new Ud;return x.text=this.text.substring(l,u),x.sectionIndex=this.sectionIndex.slice(l,u),x.sections=this.sections,x}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,u)=>Math.max(l,this.sections[u].scale),0)}getMaxImageSize(l){let u=0,x=0;for(let b=0;b<this.length();b++){const E=this.getSection(b);if(E.imageName){const N=l[E.imageName];if(!N)continue;const M=N.displaySize;u=Math.max(u,M[0]),x=Math.max(x,M[1])}}return{maxImageWidth:u,maxImageHeight:x}}addTextSection(l,u){this.text+=l.text,this.sections.push(zp.forText(l.scale,l.fontStack||u,l.verticalAlign));const x=this.sections.length-1;for(let b=0;b<l.text.length;++b)this.sectionIndex.push(x)}addImageSection(l){const u=l.image?l.image.name:"";if(u.length===0)return void Pt("Can't add FormattedSection with an empty image.");const x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(zp.forImage(u,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Pt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function am(A,l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke){const Ue=Ud.fromFeature(A,b);let et;ue===c.ao.vertical&&Ue.verticalizePunctuation();const{processBidirectionalText:ht,processStyledBidirectionalText:Lt}=Vr;if(ht&&Ue.sections.length===1){et=[];const Zt=ht(Ue.toString(),Zu(Ue,W,E,l,x,Se));for(const nr of Zt){const xr=new Ud;xr.text=nr,xr.sections=Ue.sections;for(let Rr=0;Rr<nr.length;Rr++)xr.sectionIndex.push(0);et.push(xr)}}else if(Lt){et=[];const Zt=Lt(Ue.text,Ue.sectionIndex,Zu(Ue,W,E,l,x,Se));for(const nr of Zt){const xr=new Ud;xr.text=nr[0],xr.sectionIndex=nr[1],xr.sections=Ue.sections,et.push(xr)}}else et=function(Zt,nr){const xr=[],Rr=Zt.text;let Ir=0;for(const Ur of nr)xr.push(Zt.substring(Ir,Ur)),Ir=Ur;return Ir<Rr.length&&xr.push(Zt.substring(Ir,Rr.length)),xr}(Ue,Zu(Ue,W,E,l,x,Se));const yt=[],Bt={positionedLines:yt,text:Ue.toString(),top:ie[1],bottom:ie[1],left:ie[0],right:ie[0],writingMode:ue,iconsInText:!1,verticalizable:!1};return function(Zt,nr,xr,Rr,Ir,Ur,Jr,zr,Qr,pr,Si,Pi){let ui=0,ri=0,hn=0,gs=0;const ca=zr==="right"?1:zr==="left"?0:.5,xo=Oa/Pi;let Al=0;for(const ks of Ir){ks.trim();const Ja=ks.getMaxScale(),Ta={positionedGlyphs:[],lineOffset:0};Zt.positionedLines[Al]=Ta;const h=Ta.positionedGlyphs;let m=0;if(!ks.length()){ri+=Ur,++Al;continue}const _=J_(Rr,ks,xo);for(let U=0;U<ks.length();U++){const X=ks.getSection(U),Be=ks.getSectionIndex(U),He=ks.getCharCode(U),_t=Sx(Qr,Si,He);let Ut;if(X.imageName){if(Zt.iconsInText=!0,X.scale=X.scale*xo,Ut=Tx(X,_t,Ja,_,Rr),!Ut)continue;m=Math.max(m,Ut.imageOffset)}else if(Ut=Ex(X,He,_t,_,nr,xr),!Ut)continue;const{rect:vr,metrics:br,baselineOffset:rr}=Ut;h.push({glyph:He,imageName:X.imageName,x:ui,y:ri+rr+-17,vertical:_t,scale:X.scale,fontStack:X.fontStack,sectionIndex:Be,metrics:br,rect:vr}),_t?(Zt.verticalizable=!0,ui+=(X.imageName?br.advance:Oa)*X.scale+pr):ui+=br.advance*X.scale+pr}h.length!==0&&(hn=Math.max(ui-pr,hn),eb(h,0,h.length-1,ca)),ui=0,Ta.lineOffset=Math.max(m,(Ja-1)*Oa);const k=Ur*Ja+m;ri+=k,gs=Math.max(k,gs),++Al}const{horizontalAlign:dl,verticalAlign:Ea}=zd(Jr);(function(ks,Ja,Ta,h,m,_,k,U,X){const Be=(Ja-Ta)*m;let He=0;He=_!==k?-U*h- -17:-h*X*k+.5*k;for(const _t of ks)for(const Ut of _t.positionedGlyphs)Ut.x+=Be,Ut.y+=He})(Zt.positionedLines,ca,dl,Ea,hn,gs,Ur,ri,Ir.length),Zt.top+=-Ea*ri,Zt.bottom=Zt.top+ri,Zt.left+=-dl*hn,Zt.right=Zt.left+hn}(Bt,l,u,x,et,N,M,z,ue,W,_e,ke),!function(Zt){for(const nr of Zt)if(nr.positionedGlyphs.length!==0)return!1;return!0}(yt)&&Bt}const om={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Y_={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},lm={40:!0};function Od(A,l,u,x,b,E){if(l.imageName){const N=x[l.imageName];return N?N.displaySize[0]*l.scale*Oa/E+b:0}{const N=u[l.fontStack],M=N&&N[A];return M?M.metrics.advance*l.scale+b:0}}function cm(A,l,u,x){const b=Math.pow(A-l,2);return x?A<l?b/2:2*b:b+Math.abs(u)*u}function um(A,l,u){let x=0;return A===10&&(x-=1e4),u&&(x+=150),A!==40&&A!==65288||(x+=50),l!==41&&l!==65289||(x+=50),x}function hm(A,l,u,x,b,E){let N=null,M=cm(l,u,b,E);for(const z of x){const W=cm(l-z.x,u,b,E)+z.badness;W<=M&&(N=z,M=W)}return{index:A,x:l,priorBreak:N,badness:M}}function ud(A){return A?ud(A.priorBreak).concat(A.index):[]}function Zu(A,l,u,x,b,E){if(!A)return[];const N=[],M=function(ue,_e,Se,ke,Ue,et){let ht=0;for(let Lt=0;Lt<ue.length();Lt++){const yt=ue.getSection(Lt);ht+=Od(ue.getCharCode(Lt),yt,ke,Ue,_e,et)}return ht/Math.max(1,Math.ceil(ht/Se))}(A,l,u,x,b,E),z=A.text.indexOf("")>=0;let W=0;for(let ue=0;ue<A.length();ue++){const _e=A.getSection(ue),Se=A.getCharCode(ue);if(om[Se]||(W+=Od(Se,_e,x,b,l,E)),ue<A.length()-1){const ke=!((ie=Se)<11904)&&(!!It["CJK Compatibility Forms"](ie)||!!It["CJK Compatibility"](ie)||!!It["CJK Strokes"](ie)||!!It["CJK Symbols and Punctuation"](ie)||!!It["Enclosed CJK Letters and Months"](ie)||!!It["Halfwidth and Fullwidth Forms"](ie)||!!It["Ideographic Description Characters"](ie)||!!It["Vertical Forms"](ie)||ti.test(String.fromCodePoint(ie)));(Y_[Se]||ke||_e.imageName||ue!==A.length()-2&&lm[A.getCharCode(ue+1)])&&N.push(hm(ue+1,W,M,N,um(Se,A.getCharCode(ue+1),ke&&z),!1))}}var ie;return ud(hm(A.length(),W,M,N,0,!0))}function zd(A){let l=.5,u=.5;switch(A){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:l,verticalAlign:u}}function J_(A,l,u){const x=l.getMaxScale()*Oa,{maxImageWidth:b,maxImageHeight:E}=l.getMaxImageSize(A),N=Math.max(x,E*u);return{verticalLineContentWidth:Math.max(x,b*u),horizontalLineContentHeight:N}}function Jg(A){switch(A){case"top":return 0;case"center":return .5;default:return 1}}function Sx(A,l,u){return!(A===c.ao.horizontal||!l&&!Ui(u)||l&&(om[u]||(x=u,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(x)))));var x}function Ex(A,l,u,x,b,E){const N=E[A.fontStack],M=function(W,ie,ue,_e){if(W&&W.rect)return W;const Se=ie[ue.fontStack],ke=Se&&Se[_e];return ke?{rect:null,metrics:ke.metrics}:null}(N&&N[l],b,A,l);if(M===null)return null;let z;if(u)z=x.verticalLineContentWidth-A.scale*Oa;else{const W=Jg(A.verticalAlign);z=(x.horizontalLineContentHeight-A.scale*Oa)*W}return{rect:M.rect,metrics:M.metrics,baselineOffset:z}}function Tx(A,l,u,x,b){const E=b[A.imageName];if(!E)return null;const N=E.paddedRect,M=E.displaySize,z={width:M[0],height:M[1],left:1,top:-3,advance:l?M[1]:M[0]};let W;if(l)W=x.verticalLineContentWidth-M[1]*A.scale;else{const ie=Jg(A.verticalAlign);W=(x.horizontalLineContentHeight-M[1]*A.scale)*ie}return{rect:N,metrics:z,baselineOffset:W,imageOffset:(l?M[0]:M[1])*A.scale-Oa*u}}function eb(A,l,u,x){if(x===0)return;const b=A[u],E=(A[u].x+b.metrics.advance*b.scale)*x;for(let N=l;N<=u;N++)A[N].x-=E}function e1(A,l,u){const{horizontalAlign:x,verticalAlign:b}=zd(u),E=l[0]-A.displaySize[0]*x,N=l[1]-A.displaySize[1]*b;return{image:A,top:N,bottom:N+A.displaySize[1],left:E,right:E+A.displaySize[0]}}function t1(A){var l,u;let x=A.left,b=A.top,E=A.right-x,N=A.bottom-b;const M=(l=A.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",z=(u=A.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",W=(A.image.content[2]-A.image.content[0])/(A.image.content[3]-A.image.content[1]);if(z==="proportional"){if(M==="stretchOnly"&&E/N<W||M==="proportional"){const ie=Math.ceil(N*W);x*=ie/E,E=ie}}else if(M==="proportional"&&z==="stretchOnly"&&W!==0&&E/N>W){const ie=Math.ceil(E/W);b*=ie/N,N=ie}return{x1:x,y1:b,x2:x+E,y2:b+N}}function r1(A,l,u,x,b,E){const N=A.image;let M;if(N.content){const et=N.content,ht=N.pixelRatio||1;M=[et[0]/ht,et[1]/ht,N.displaySize[0]-et[2]/ht,N.displaySize[1]-et[3]/ht]}const z=l.left*E,W=l.right*E;let ie,ue,_e,Se;u==="width"||u==="both"?(Se=b[0]+z-x[3],ue=b[0]+W+x[1]):(Se=b[0]+(z+W-N.displaySize[0])/2,ue=Se+N.displaySize[0]);const ke=l.top*E,Ue=l.bottom*E;return u==="height"||u==="both"?(ie=b[1]+ke-x[0],_e=b[1]+Ue+x[2]):(ie=b[1]+(ke+Ue-N.displaySize[1])/2,_e=ie+N.displaySize[1]),{image:N,top:ie,right:ue,bottom:_e,left:Se,collisionPadding:M}}const EA=128,Gh=32640;function Am(A,l){const{expression:u}=l;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Li(A+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:x,interpolationType:b}=u;let E=0;for(;E<x.length&&x[E]<=A;)E++;E=Math.max(0,E-1);let N=E;for(;N<x.length&&x[N]<A+1;)N++;N=Math.min(x.length-1,N);const M=x[E],z=x[N];return u.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:z,interpolationType:b}:{kind:"camera",minZoom:M,maxZoom:z,minSize:u.evaluate(new Li(M)),maxSize:u.evaluate(new Li(z)),interpolationType:b}}}function i1(A,l,u){let x="never";const b=A.get(l);return b?x=b:A.get(u)&&(x="always"),x}const tb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hd(A,l,u,x,b,E,N,M,z,W,ie,ue,_e){const Se=M?Math.min(Gh,Math.round(M[0])):0,ke=M?Math.min(Gh,Math.round(M[1])):0;A.emplaceBack(l,u,Math.round(32*x),Math.round(32*b),E,N,(Se<<1)+(z?1:0),ke,16*W,16*ie,256*ue,256*_e)}function n1(A,l,u){A.emplaceBack(l.x,l.y,u),A.emplaceBack(l.x,l.y,u),A.emplaceBack(l.x,l.y,u),A.emplaceBack(l.x,l.y,u)}function kx(A){for(const l of A.sections)if(ai(l.text))return!0;return!1}class vn{constructor(l){this.layoutVertexArray=new Er,this.indexArray=new Nn,this.programConfigurations=l,this.segments=new rn,this.dynamicLayoutVertexArray=new gr,this.opacityVertexArray=new Xr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ee}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,u,x,b){this.isEmpty()||(x&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,px.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,mx.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,tb,!0),this.opacityVertexBuffer.itemSize=1),(x||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}qe("SymbolBuffers",vn);class Qp{constructor(l,u,x){this.layoutVertexArray=new l,this.layoutAttributes=u,this.indexArray=new x,this.segments=new rn,this.collisionVertexArray=new En}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,X_.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}qe("CollisionBuffers",Qp);class TA{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=jr(globalThis)?Math.min(l.overscaling,128):l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(N=>N.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Am(this.zoom,u["text-size"]),this.iconSizeData=Am(this.zoom,u["icon-size"]);const x=this.layers[0].layout,b=x.get("symbol-sort-key"),E=x.get("symbol-z-order");this.canOverlap=i1(x,"text-overlap","text-allow-overlap")!=="never"||i1(x,"icon-overlap","icon-allow-overlap")!=="never"||x.get("text-ignore-placement")||x.get("icon-ignore-placement"),this.sortFeaturesByKey=E!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(E==="viewport-y"||E==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,x.get("symbol-placement")==="point"&&(this.writingModes=x.get("text-writing-mode").map(N=>c.ao[N])),this.stateDependentLayerIds=this.layers.filter(N=>N.isStateDependent()).map(N=>N.id),this.sourceID=l.sourceID}createArrays(){this.text=new vn(new Ul(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new vn(new Ul(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new tt,this.lineVertexArray=new at,this.symbolInstances=new Je,this.textAnchorOffsets=new mt}calculateGlyphDependencies(l,u,x,b,E){for(let N=0;N<l.length;N++)if(u[l.charCodeAt(N)]=!0,(x||b)&&E){const M=Hh[l.charAt(N)];M&&(u[M.charCodeAt(0)]=!0)}}populate(l,u,x){const b=this.layers[0],E=b.layout,N=E.get("text-font"),M=E.get("text-field"),z=E.get("icon-image"),W=(M.value.kind!=="constant"||M.value.value instanceof Ra&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),ie=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,ue=E.get("symbol-sort-key");if(this.features=[],!W&&!ie)return;const _e=u.iconDependencies,Se=u.glyphDependencies,ke=u.availableImages,Ue=new Li(this.zoom);for(const{feature:et,id:ht,index:Lt,sourceLayerIndex:yt}of l){const Bt=b._featureFilter.needGeometry,Zt=id(et,Bt);if(!b._featureFilter.filter(Ue,Zt,x))continue;let nr,xr;if(Bt||(Zt.geometry=Uh(et)),W){const Ir=b.getValueAndResolveTokens("text-field",Zt,x,ke),Ur=Ra.factory(Ir),Jr=this.hasRTLText=this.hasRTLText||kx(Ur);(!Jr||Vr.getRTLTextPluginStatus()==="unavailable"||Jr&&Vr.isParsed())&&(nr=Xg(Ur,b,Zt))}if(ie){const Ir=b.getValueAndResolveTokens("icon-image",Zt,x,ke);xr=Ir instanceof Ls?Ir:Ls.fromString(Ir)}if(!nr&&!xr)continue;const Rr=this.sortFeaturesByKey?ue.evaluate(Zt,{},x):void 0;if(this.features.push({id:ht,text:nr,icon:xr,index:Lt,sourceLayerIndex:yt,geometry:Zt.geometry,properties:et.properties,type:gn.types[et.type],sortKey:Rr}),xr&&(_e[xr.name]=!0),nr){const Ir=N.evaluate(Zt,{},x).join(","),Ur=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(const Jr of nr.sections)if(Jr.image)_e[Jr.image.name]=!0;else{const zr=fr(nr.toString()),Qr=Jr.fontStack||Ir,pr=Se[Qr]=Se[Qr]||{};this.calculateGlyphDependencies(Jr.text,pr,Ur,this.allowVerticalPlacement,zr)}}}E.get("symbol-placement")==="line"&&(this.features=function(et){const ht={},Lt={},yt=[];let Bt=0;function Zt(Ir){yt.push(et[Ir]),Bt++}function nr(Ir,Ur,Jr){const zr=Lt[Ir];return delete Lt[Ir],Lt[Ur]=zr,yt[zr].geometry[0].pop(),yt[zr].geometry[0]=yt[zr].geometry[0].concat(Jr[0]),zr}function xr(Ir,Ur,Jr){const zr=ht[Ur];return delete ht[Ur],ht[Ir]=zr,yt[zr].geometry[0].shift(),yt[zr].geometry[0]=Jr[0].concat(yt[zr].geometry[0]),zr}function Rr(Ir,Ur,Jr){const zr=Jr?Ur[0][Ur[0].length-1]:Ur[0][0];return`${Ir}:${zr.x}:${zr.y}`}for(let Ir=0;Ir<et.length;Ir++){const Ur=et[Ir],Jr=Ur.geometry,zr=Ur.text?Ur.text.toString():null;if(!zr){Zt(Ir);continue}const Qr=Rr(zr,Jr),pr=Rr(zr,Jr,!0);if(Qr in Lt&&pr in ht&&Lt[Qr]!==ht[pr]){const Si=xr(Qr,pr,Jr),Pi=nr(Qr,pr,yt[Si].geometry);delete ht[Qr],delete Lt[pr],Lt[Rr(zr,yt[Pi].geometry,!0)]=Pi,yt[Si].geometry=null}else Qr in Lt?nr(Qr,pr,Jr):pr in ht?xr(Qr,pr,Jr):(Zt(Ir),ht[Qr]=Bt-1,Lt[pr]=Bt-1)}return yt.filter(Ir=>Ir.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((et,ht)=>et.sortKey-ht.sortKey)}update(l,u,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:x}),this.icon.programConfigurations.updatePaintArrays(l,u,this.layers,{imagePositions:x}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,u){const x=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(u[l.segment+1]),E=l.dist(u[l.segment]);const N={};for(let M=l.segment+1;M<u.length;M++)N[M]={x:u[M].x,y:u[M].y,tileUnitDistanceFromAnchor:b},M<u.length-1&&(b+=u[M+1].dist(u[M]));for(let M=l.segment||0;M>=0;M--)N[M]={x:u[M].x,y:u[M].y,tileUnitDistanceFromAnchor:E},M>0&&(E+=u[M-1].dist(u[M]));for(let M=0;M<u.length;M++){const z=N[M];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:x,lineLength:this.lineVertexArray.length-x}}addSymbols(l,u,x,b,E,N,M,z,W,ie,ue,_e){const Se=l.indexArray,ke=l.layoutVertexArray,Ue=l.segments.prepareSegment(4*u.length,ke,Se,this.canOverlap?N.sortKey:void 0),et=this.glyphOffsetArray.length,ht=Ue.vertexLength,Lt=this.allowVerticalPlacement&&M===c.ao.vertical?Math.PI/2:0,yt=N.text&&N.text.sections;for(let Bt=0;Bt<u.length;Bt++){const{tl:Zt,tr:nr,bl:xr,br:Rr,tex:Ir,pixelOffsetTL:Ur,pixelOffsetBR:Jr,minFontScaleX:zr,minFontScaleY:Qr,glyphOffset:pr,isSDF:Si,sectionIndex:Pi}=u[Bt],ui=Ue.vertexLength,ri=pr[1];hd(ke,z.x,z.y,Zt.x,ri+Zt.y,Ir.x,Ir.y,x,Si,Ur.x,Ur.y,zr,Qr),hd(ke,z.x,z.y,nr.x,ri+nr.y,Ir.x+Ir.w,Ir.y,x,Si,Jr.x,Ur.y,zr,Qr),hd(ke,z.x,z.y,xr.x,ri+xr.y,Ir.x,Ir.y+Ir.h,x,Si,Ur.x,Jr.y,zr,Qr),hd(ke,z.x,z.y,Rr.x,ri+Rr.y,Ir.x+Ir.w,Ir.y+Ir.h,x,Si,Jr.x,Jr.y,zr,Qr),n1(l.dynamicLayoutVertexArray,z,Lt),Se.emplaceBack(ui,ui+2,ui+1),Se.emplaceBack(ui+1,ui+2,ui+3),Ue.vertexLength+=4,Ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pr[0]),Bt!==u.length-1&&Pi===u[Bt+1].sectionIndex||l.programConfigurations.populatePaintArrays(ke.length,N,N.index,{imagePositions:{},canonical:_e,formattedSection:yt&&yt[Pi]})}l.placedSymbolArray.emplaceBack(z.x,z.y,et,this.glyphOffsetArray.length-et,ht,W,ie,z.segment,x?x[0]:0,x?x[1]:0,b[0],b[1],M,0,!1,0,ue)}_addCollisionDebugVertex(l,u,x,b,E,N){return u.emplaceBack(0,0),l.emplaceBack(x.x,x.y,b,E,Math.round(N.x),Math.round(N.y))}addCollisionDebugVertices(l,u,x,b,E,N,M){const z=E.segments.prepareSegment(4,E.layoutVertexArray,E.indexArray),W=z.vertexLength,ie=E.layoutVertexArray,ue=E.collisionVertexArray,_e=M.anchorX,Se=M.anchorY;this._addCollisionDebugVertex(ie,ue,N,_e,Se,new p(l,u)),this._addCollisionDebugVertex(ie,ue,N,_e,Se,new p(x,u)),this._addCollisionDebugVertex(ie,ue,N,_e,Se,new p(x,b)),this._addCollisionDebugVertex(ie,ue,N,_e,Se,new p(l,b)),z.vertexLength+=4;const ke=E.indexArray;ke.emplaceBack(W,W+1),ke.emplaceBack(W+1,W+2),ke.emplaceBack(W+2,W+3),ke.emplaceBack(W+3,W),z.primitiveLength+=4}addDebugCollisionBoxes(l,u,x,b){for(let E=l;E<u;E++){const N=this.collisionBoxArray.get(E);this.addCollisionDebugVertices(N.x1,N.y1,N.x2,N.y2,b?this.textCollisionBox:this.iconCollisionBox,N.anchorPoint,x)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Qp(Bi,SA.members,Mn),this.iconCollisionBox=new Qp(Bi,SA.members,Mn);for(let l=0;l<this.symbolInstances.length;l++){const u=this.symbolInstances.get(l);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(l,u,x,b,E,N,M,z,W){const ie={};for(let ue=u;ue<x;ue++){const _e=l.get(ue);ie.textBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.textFeatureIndex=_e.featureIndex;break}for(let ue=b;ue<E;ue++){const _e=l.get(ue);ie.verticalTextBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.verticalTextFeatureIndex=_e.featureIndex;break}for(let ue=N;ue<M;ue++){const _e=l.get(ue);ie.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.iconFeatureIndex=_e.featureIndex;break}for(let ue=z;ue<W;ue++){const _e=l.get(ue);ie.verticalIconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},ie.verticalIconFeatureIndex=_e.featureIndex;break}return ie}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const x=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,x.textBoxStartIndex,x.textBoxEndIndex,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,u){const x=l.placedSymbolArray.get(u),b=x.vertexStartIndex+4*x.numGlyphs;for(let E=x.vertexStartIndex;E<b;E+=4)l.indexArray.emplaceBack(E,E+2,E+1),l.indexArray.emplaceBack(E+1,E+2,E+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(l),x=Math.cos(l),b=[],E=[],N=[];for(let M=0;M<this.symbolInstances.length;++M){N.push(M);const z=this.symbolInstances.get(M);b.push(0|Math.round(u*z.anchorX+x*z.anchorY)),E.push(z.featureIndex)}return N.sort((M,z)=>b[M]-b[z]||E[z]-E[M]),N}addToSortKeyRanges(l,u){const x=this.sortKeyRanges[this.sortKeyRanges.length-1];x&&x.sortKey===u?x.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const x=this.symbolInstances.get(u);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach((b,E,N)=>{b>=0&&N.indexOf(b)===E&&this.addIndicesForPlacedSymbol(this.text,b)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let dm,s1;qe("SymbolBucket",TA,{omit:["layers","collisionBoxArray","features","compareText"]}),TA.MAX_GLYPHS=65535,TA.addDynamicAttributes=n1;var Hp={get paint(){return s1=s1||new es({"icon-opacity":new Or(wt.paint_symbol["icon-opacity"]),"icon-color":new Or(wt.paint_symbol["icon-color"]),"icon-halo-color":new Or(wt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Or(wt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Or(wt.paint_symbol["icon-halo-blur"]),"icon-translate":new kr(wt.paint_symbol["icon-translate"]),"icon-translate-anchor":new kr(wt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Or(wt.paint_symbol["text-opacity"]),"text-color":new Or(wt.paint_symbol["text-color"],{runtimeType:sr,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new Or(wt.paint_symbol["text-halo-color"]),"text-halo-width":new Or(wt.paint_symbol["text-halo-width"]),"text-halo-blur":new Or(wt.paint_symbol["text-halo-blur"]),"text-translate":new kr(wt.paint_symbol["text-translate"]),"text-translate-anchor":new kr(wt.paint_symbol["text-translate-anchor"])})},get layout(){return dm=dm||new es({"symbol-placement":new kr(wt.layout_symbol["symbol-placement"]),"symbol-spacing":new kr(wt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kr(wt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Or(wt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kr(wt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kr(wt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new kr(wt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new kr(wt.layout_symbol["icon-ignore-placement"]),"icon-optional":new kr(wt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kr(wt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Or(wt.layout_symbol["icon-size"]),"icon-text-fit":new kr(wt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kr(wt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Or(wt.layout_symbol["icon-image"]),"icon-rotate":new Or(wt.layout_symbol["icon-rotate"]),"icon-padding":new Or(wt.layout_symbol["icon-padding"]),"icon-keep-upright":new kr(wt.layout_symbol["icon-keep-upright"]),"icon-offset":new Or(wt.layout_symbol["icon-offset"]),"icon-anchor":new Or(wt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kr(wt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kr(wt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kr(wt.layout_symbol["text-rotation-alignment"]),"text-field":new Or(wt.layout_symbol["text-field"]),"text-font":new Or(wt.layout_symbol["text-font"]),"text-size":new Or(wt.layout_symbol["text-size"]),"text-max-width":new Or(wt.layout_symbol["text-max-width"]),"text-line-height":new kr(wt.layout_symbol["text-line-height"]),"text-letter-spacing":new Or(wt.layout_symbol["text-letter-spacing"]),"text-justify":new Or(wt.layout_symbol["text-justify"]),"text-radial-offset":new Or(wt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kr(wt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Or(wt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Or(wt.layout_symbol["text-anchor"]),"text-max-angle":new kr(wt.layout_symbol["text-max-angle"]),"text-writing-mode":new kr(wt.layout_symbol["text-writing-mode"]),"text-rotate":new Or(wt.layout_symbol["text-rotate"]),"text-padding":new kr(wt.layout_symbol["text-padding"]),"text-keep-upright":new kr(wt.layout_symbol["text-keep-upright"]),"text-transform":new Or(wt.layout_symbol["text-transform"]),"text-offset":new Or(wt.layout_symbol["text-offset"]),"text-allow-overlap":new kr(wt.layout_symbol["text-allow-overlap"]),"text-overlap":new kr(wt.layout_symbol["text-overlap"]),"text-ignore-placement":new kr(wt.layout_symbol["text-ignore-placement"]),"text-optional":new kr(wt.layout_symbol["text-optional"])})}};class Vf{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:nt,this.defaultValue=l}evaluate(l){if(l.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(l.formattedSection))return u.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qe("FormatSectionOverride",Vf,{omit:["defaultValue"]});class Qd extends cs{constructor(l,u){super(l,Hp,u)}recalculate(l,u){if(super.recalculate(l,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const x=this.layout.get("text-writing-mode");if(x){const b=[];for(const E of x)b.indexOf(E)<0&&b.push(E);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,u,x,b){const E=this.layout.get(l).evaluate(u,{},x,b),N=this._unevaluatedLayout._values[l];return N.isDataDriven()||kl(N.value)||!E?E:function(M,z){return z.replace(/{([^{}]+)}/g,(W,ie)=>M&&ie in M?String(M[ie]):"")}(u.properties,E)}createBucket(l){return new TA(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of Hp.paint.overridableProperties){if(!Qd.hasPaintOverride(this.layout,l))continue;const u=this.paint.get(l),x=new Vf(u),b=new Ec(x,u.property.specification);let E=null;E=u.value.kind==="constant"||u.value.kind==="source"?new gh("source",b):new Ao("composite",b,u.value.zoomStops),this.paint._values[l]=new jn(u.property,E,u.parameters)}}_handleOverridablePaintPropertyUpdate(l,u,x){return!(!this.layout||u.isDataDriven()||x.isDataDriven())&&Qd.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,u){const x=l.get("text-field"),b=Hp.paint.properties[u];let E=!1;const N=M=>{for(const z of M)if(b.overrides&&b.overrides.hasOverride(z))return void(E=!0)};if(x.value.kind==="constant"&&x.value.value instanceof Ra)N(x.value.value.sections);else if(x.value.kind==="source"||x.value.kind==="composite"){const M=W=>{E||(W instanceof di&&Fn(W.value)===Dr?N(W.value.sections):W instanceof _l?N(W.sections):W.eachChild(M))},z=x.value;z._styleExpression&&M(z._styleExpression.expression)}return E}}let Hd;var Fx={get paint(){return Hd=Hd||new es({"background-color":new kr(wt.paint_background["background-color"]),"background-pattern":new Mi(wt.paint_background["background-pattern"]),"background-opacity":new kr(wt.paint_background["background-opacity"])})}};class rb extends cs{constructor(l,u){super(l,Fx,u)}}class ib extends cs{constructor(l,u){super(l,{},u),this.onAdd=x=>{this.implementation.onAdd&&this.implementation.onAdd(x,x.painter.context.gl)},this.onRemove=x=>{this.implementation.onRemove&&this.implementation.onRemove(x,x.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Nx{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ix={once:!0},Gf=63710088e-1;class Pn{constructor(l,u){if(isNaN(l)||isNaN(u))throw new Error(`Invalid LngLat object: (${l}, ${u})`);if(this.lng=+l,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pn(ze(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const u=Math.PI/180,x=this.lat*u,b=l.lat*u,E=Math.sin(x)*Math.sin(b)+Math.cos(x)*Math.cos(b)*Math.cos((l.lng-this.lng)*u);return Gf*Math.acos(Math.min(E,1))}static convert(l){if(l instanceof Pn)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Pn(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Pn(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const fm=2*Math.PI*Gf;function Oo(A){return fm*Math.cos(A*Math.PI/180)}function Lx(A){return(180+A)/360}function pm(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function mm(A,l){return A/Oo(l)}function qf(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function a1(A,l){return A*Oo(qf(l))}class Kf{constructor(l,u,x=0){this.x=+l,this.y=+u,this.z=+x}static fromLngLat(l,u=0){const x=Pn.convert(l);return new Kf(Lx(x.lng),pm(x.lat),mm(u,x.lat))}toLngLat(){return new Pn(360*this.x-180,qf(this.y))}toAltitude(){return a1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/fm*(l=qf(this.y),1/Math.cos(l*Math.PI/180));var l}}function gm(A,l,u){var x=2*Math.PI*6378137/256/Math.pow(2,u);return[A*x-2*Math.PI*6378137/2,l*x-2*Math.PI*6378137/2]}class Vp{constructor(l,u,x){if(!function(b,E,N){return!(b<0||b>25||N<0||N>=Math.pow(2,b)||E<0||E>=Math.pow(2,b))}(l,u,x))throw new Error(`x=${u}, y=${x}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=u,this.y=x,this.key=Wf(0,l,l,u,x)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,u,x){const b=(N=this.y,M=this.z,z=gm(256*(E=this.x),256*(N=Math.pow(2,M)-N-1),M),W=gm(256*(E+1),256*(N+1),M),z[0]+","+z[1]+","+W[0]+","+W[1]);var E,N,M,z,W;const ie=function(ue,_e,Se){let ke,Ue="";for(let et=ue;et>0;et--)ke=1<<et-1,Ue+=(_e&ke?1:0)+(Se&ke?2:0);return Ue}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(x==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,ie).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){const u=this.z-l.z;return u>0&&l.x===this.x>>u&&l.y===this.y>>u}getTilePoint(l){const u=Math.pow(2,this.z);return new p((l.x*u-this.x)*Ne,(l.y*u-this.y)*Ne)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mx{constructor(l,u){this.wrap=l,this.canonical=u,this.key=Wf(l,u.z,u.z,u.x,u.y)}}class Dc{constructor(l,u,x,b,E){if(this.terrainRttPosMatrix32f=null,l<x)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${x}`);this.overscaledZ=l,this.wrap=u,this.canonical=new Vp(x,+b,+E),this.key=Wf(u,l,x,b,E)}clone(){return new Dc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-l;return l>this.canonical.z?new Dc(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Dc(l,this.wrap,l,this.canonical.x>>u,this.canonical.y>>u)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(l,u){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const x=this.canonical.z-l;return l>this.canonical.z?Wf(this.wrap*+u,l,this.canonical.z,this.canonical.x,this.canonical.y):Wf(this.wrap*+u,l,l,this.canonical.x>>x,this.canonical.y>>x)}isChildOf(l){if(l.wrap!==this.wrap||this.overscaledZ-l.overscaledZ<=0)return!1;if(l.overscaledZ===0)return this.overscaledZ>0;const u=this.canonical.z-l.canonical.z;return!(u<0)&&l.canonical.x===this.canonical.x>>u&&l.canonical.y===this.canonical.y>>u}children(l){if(this.overscaledZ>=l)return[new Dc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,x=2*this.canonical.x,b=2*this.canonical.y;return[new Dc(u,this.wrap,u,x,b),new Dc(u,this.wrap,u,x+1,b),new Dc(u,this.wrap,u,x,b+1),new Dc(u,this.wrap,u,x+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Dc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Dc(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new Kf(l.x-this.wrap,l.y))}}function Wf(A,l,u,x,b){(A*=2)<0&&(A=-1*A-1);const E=1<<u;return(E*E*A+E*b+x).toString(36)+u.toString(36)+l.toString(36)}function $f(A,l){return l?A.properties[l]:A.id}qe("CanonicalTileID",Vp),qe("OverscaledTileID",Dc,{omit:["terrainRttPosMatrix32f"]});class Vd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){const u=new Vd;return u.extend(l(new p(this.minX,this.minY))),u.extend(l(new p(this.maxX,this.minY))),u.extend(l(new p(this.minX,this.maxY))),u.extend(l(new p(this.maxX,this.maxY))),u}static fromPoints(l){const u=new Vd;for(const x of l)u.extend(x);return u}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class Px{constructor(l){this._stringToNumber={},this._numberToString=[];for(let u=0;u<l.length;u++){const x=l[u];this._stringToNumber[x]=u,this._numberToString[u]=x}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class kA{constructor(l,u,x,b,E){this.type="Feature",this._vectorTileFeature=l,l._z=u,l._x=x,l._y=b,this.properties=l.properties,this.id=E}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(l[u]=this[u]);return l}}class o1{constructor(l,u){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Xe(Ne,16,0),this.grid3D=new Xe(Ne,16,0),this.featureIndexArray=new bt,this.promoteId=u}insert(l,u,x,b,E,N){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(x,b,E);const z=N?this.grid3D:this.grid;for(let W=0;W<u.length;W++){const ie=u[W],ue=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<ie.length;_e++){const Se=ie[_e];ue[0]=Math.min(ue[0],Se.x),ue[1]=Math.min(ue[1],Se.y),ue[2]=Math.max(ue[2],Se.x),ue[3]=Math.max(ue[3],Se.y)}ue[0]<Ne&&ue[1]<Ne&&ue[2]>=0&&ue[3]>=0&&z.insert(M,ue[0],ue[1],ue[2],ue[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Z0(new Op(this.rawTileData)).layers,this.sourceLayerCoder=new Px(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,u,x,b){this.loadVTLayers();const E=l.params,N=Ne/l.tileSize/l.scale,M=fu(E.filter,E.globalState),z=l.queryGeometry,W=l.queryPadding*N,ie=Vd.fromPoints(z),ue=this.grid.query(ie.minX-W,ie.minY-W,ie.maxX+W,ie.maxY+W),_e=Vd.fromPoints(l.cameraQueryGeometry).expandBy(W),Se=this.grid3D.query(_e.minX,_e.minY,_e.maxX,_e.maxY,(et,ht,Lt,yt)=>function(Bt,Zt,nr,xr,Rr){for(const Ur of Bt)if(Zt<=Ur.x&&nr<=Ur.y&&xr>=Ur.x&&Rr>=Ur.y)return!0;const Ir=[new p(Zt,nr),new p(Zt,Rr),new p(xr,Rr),new p(xr,nr)];if(Bt.length>2){for(const Ur of Ir)if(xA(Bt,Ur))return!0}for(let Ur=0;Ur<Bt.length-1;Ur++)if(kg(Bt[Ur],Bt[Ur+1],Ir))return!0;return!1}(l.cameraQueryGeometry,et-W,ht-W,Lt+W,yt+W));for(const et of Se)ue.push(et);ue.sort(nb);const ke={};let Ue;for(let et=0;et<ue.length;et++){const ht=ue[et];if(ht===Ue)continue;Ue=ht;const Lt=this.featureIndexArray.get(ht);let yt=null;this.loadMatchingFeature(ke,Lt.bucketIndex,Lt.sourceLayerIndex,Lt.featureIndex,M,E.layers,E.availableImages,u,x,b,(Bt,Zt,nr)=>(yt||(yt=Uh(Bt)),Zt.queryIntersectsFeature({queryGeometry:z,feature:Bt,featureState:nr,geometry:yt,zoom:this.z,transform:l.transform,pixelsToTileUnits:N,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation})))}return ke}loadMatchingFeature(l,u,x,b,E,N,M,z,W,ie,ue){const _e=this.bucketLayerIDs[u];if(N&&!_e.some(et=>N.has(et)))return;const Se=this.sourceLayerCoder.decode(x),ke=this.vtLayers[Se].feature(b);if(E.needGeometry){const et=id(ke,!0);if(!E.filter(new Li(this.tileID.overscaledZ),et,this.tileID.canonical))return}else if(!E.filter(new Li(this.tileID.overscaledZ),ke))return;const Ue=this.getId(ke,Se);for(let et=0;et<_e.length;et++){const ht=_e[et];if(N&&!N.has(ht))continue;const Lt=z[ht];if(!Lt)continue;let yt={};Ue&&ie&&(yt=ie.getState(Lt.sourceLayer||"_geojsonTileLayer",Ue));const Bt=We({},W[ht]);Bt.paint=vm(Bt.paint,Lt.paint,ke,yt,M),Bt.layout=vm(Bt.layout,Lt.layout,ke,yt,M);const Zt=!ue||ue(ke,Lt,yt);if(!Zt)continue;const nr=new kA(ke,this.z,this.x,this.y,Ue);nr.layer=Bt;let xr=l[ht];xr===void 0&&(xr=l[ht]=[]),xr.push({featureIndex:b,feature:nr,intersectionZ:Zt})}}lookupSymbolFeatures(l,u,x,b,E,N,M,z){const W={};this.loadVTLayers();const ie=fu(E.filterSpec,E.globalState);for(const ue of l)this.loadMatchingFeature(W,x,b,ue,ie,N,M,z,u);return W}hasLayer(l){for(const u of this.bucketLayerIDs)for(const x of u)if(l===x)return!0;return!1}getId(l,u){var x;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&(!((x=l.properties)===null||x===void 0)&&x.cluster)&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function vm(A,l,u,x,b){return dt(A,(E,N)=>{const M=l instanceof ls?l.get(N):null;return M&&M.evaluate?M.evaluate(u,x,b):M})}function nb(A,l){return l-A}function Rx(A,l,u,x,b){const E=[];for(let N=0;N<A.length;N++){const M=A[N];let z;for(let W=0;W<M.length-1;W++){let ie=M[W],ue=M[W+1];ie.x<l&&ue.x<l||(ie.x<l?ie=new p(l,ie.y+(l-ie.x)/(ue.x-ie.x)*(ue.y-ie.y))._round():ue.x<l&&(ue=new p(l,ie.y+(l-ie.x)/(ue.x-ie.x)*(ue.y-ie.y))._round()),ie.y<u&&ue.y<u||(ie.y<u?ie=new p(ie.x+(u-ie.y)/(ue.y-ie.y)*(ue.x-ie.x),u)._round():ue.y<u&&(ue=new p(ie.x+(u-ie.y)/(ue.y-ie.y)*(ue.x-ie.x),u)._round()),ie.x>=x&&ue.x>=x||(ie.x>=x?ie=new p(x,ie.y+(x-ie.x)/(ue.x-ie.x)*(ue.y-ie.y))._round():ue.x>=x&&(ue=new p(x,ie.y+(x-ie.x)/(ue.x-ie.x)*(ue.y-ie.y))._round()),ie.y>=b&&ue.y>=b||(ie.y>=b?ie=new p(ie.x+(b-ie.y)/(ue.y-ie.y)*(ue.x-ie.x),b)._round():ue.y>=b&&(ue=new p(ie.x+(b-ie.y)/(ue.y-ie.y)*(ue.x-ie.x),b)._round()),z&&ie.equals(z[z.length-1])||(z=[ie],E.push(z)),z.push(ue)))))}}return E}qe("FeatureIndex",o1,{omit:["rawTileData","sourceLayerCoder"]});class qh extends p{constructor(l,u,x,b){super(l,u),this.angle=x,b!==void 0&&(this.segment=b)}clone(){return new qh(this.x,this.y,this.angle,this.segment)}}function Dx(A,l,u,x,b){if(l.segment===void 0||u===0)return!0;let E=l,N=l.segment+1,M=0;for(;M>-u/2;){if(N--,N<0)return!1;M-=A[N].dist(E),E=A[N]}M+=A[N].dist(A[N+1]),N++;const z=[];let W=0;for(;M<u/2;){const ie=A[N],ue=A[N+1];if(!ue)return!1;let _e=A[N-1].angleTo(ie)-ie.angleTo(ue);for(_e=Math.abs((_e+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:M,angleDelta:_e}),W+=_e;M-z[0].distance>x;)W-=z.shift().angleDelta;if(W>b)return!1;N++,M+=ie.dist(ue)}return!0}function Yu(A){let l=0;for(let u=0;u<A.length-1;u++)l+=A[u].dist(A[u+1]);return l}function xm(A,l,u){return A?.6*l*u:0}function l1(A,l){return Math.max(A?A.right-A.left:0,l?l.right-l.left:0)}function jx(A,l,u,x,b,E){const N=xm(u,b,E),M=l1(u,x)*E;let z=0;const W=Yu(A)/2;for(let ie=0;ie<A.length-1;ie++){const ue=A[ie],_e=A[ie+1],Se=ue.dist(_e);if(z+Se>W){const ke=(W-z)/Se,Ue=$r.number(ue.x,_e.x,ke),et=$r.number(ue.y,_e.y,ke),ht=new qh(Ue,et,_e.angleTo(ue),ie);return ht._round(),!N||Dx(A,ht,M,N,l)?ht:void 0}z+=Se}}function Gp(A,l,u,x,b,E,N,M,z){const W=xm(x,E,N),ie=l1(x,b),ue=ie*N,_e=A[0].x===0||A[0].x===z||A[0].y===0||A[0].y===z;return l-ue<l/4&&(l=ue+l/4),xu(A,_e?l/2*M%l:(ie/2+2*E)*N*M%l,l,W,u,ue,_e,!1,z)}function xu(A,l,u,x,b,E,N,M,z){const W=E/2,ie=Yu(A);let ue=0,_e=l-u,Se=[];for(let ke=0;ke<A.length-1;ke++){const Ue=A[ke],et=A[ke+1],ht=Ue.dist(et),Lt=et.angleTo(Ue);for(;_e+u<ue+ht;){_e+=u;const yt=(_e-ue)/ht,Bt=$r.number(Ue.x,et.x,yt),Zt=$r.number(Ue.y,et.y,yt);if(Bt>=0&&Bt<z&&Zt>=0&&Zt<z&&_e-W>=0&&_e+W<=ie){const nr=new qh(Bt,Zt,Lt,ke);nr._round(),x&&!Dx(A,nr,E,x,b)||Se.push(nr)}}ue+=ht}return M||Se.length||N||(Se=xu(A,ue/2,u,x,b,E,N,!0,z)),Se}function c1(A,l,u,x){const b=[],E=A.image,N=E.pixelRatio,M=E.paddedRect.w-2,z=E.paddedRect.h-2;let W={x1:A.left,y1:A.top,x2:A.right,y2:A.bottom};const ie=E.stretchX||[[0,M]],ue=E.stretchY||[[0,z]],_e=(pr,Si)=>pr+Si[1]-Si[0],Se=ie.reduce(_e,0),ke=ue.reduce(_e,0),Ue=M-Se,et=z-ke;let ht=0,Lt=Se,yt=0,Bt=ke,Zt=0,nr=Ue,xr=0,Rr=et;if(E.content&&x){const pr=E.content,Si=pr[2]-pr[0],Pi=pr[3]-pr[1];(E.textFitWidth||E.textFitHeight)&&(W=t1(A)),ht=Gd(ie,0,pr[0]),yt=Gd(ue,0,pr[1]),Lt=Gd(ie,pr[0],pr[2]),Bt=Gd(ue,pr[1],pr[3]),Zt=pr[0]-ht,xr=pr[1]-yt,nr=Si-Lt,Rr=Pi-Bt}const Ir=W.x1,Ur=W.y1,Jr=W.x2-Ir,zr=W.y2-Ur,Qr=(pr,Si,Pi,ui)=>{const ri=ym(pr.stretch-ht,Lt,Jr,Ir),hn=_m(pr.fixed-Zt,nr,pr.stretch,Se),gs=ym(Si.stretch-yt,Bt,zr,Ur),ca=_m(Si.fixed-xr,Rr,Si.stretch,ke),xo=ym(Pi.stretch-ht,Lt,Jr,Ir),Al=_m(Pi.fixed-Zt,nr,Pi.stretch,Se),dl=ym(ui.stretch-yt,Bt,zr,Ur),Ea=_m(ui.fixed-xr,Rr,ui.stretch,ke),ks=new p(ri,gs),Ja=new p(xo,gs),Ta=new p(xo,dl),h=new p(ri,dl),m=new p(hn/N,ca/N),_=new p(Al/N,Ea/N),k=l*Math.PI/180;if(k){const Be=Math.sin(k),He=Math.cos(k),_t=[He,-Be,Be,He];ks._matMult(_t),Ja._matMult(_t),h._matMult(_t),Ta._matMult(_t)}const U=pr.stretch+pr.fixed,X=Si.stretch+Si.fixed;return{tl:ks,tr:Ja,bl:h,br:Ta,tex:{x:E.paddedRect.x+1+U,y:E.paddedRect.y+1+X,w:Pi.stretch+Pi.fixed-U,h:ui.stretch+ui.fixed-X},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:m,pixelOffsetBR:_,minFontScaleX:nr/N/Jr,minFontScaleY:Rr/N/zr,isSDF:u}};if(x&&(E.stretchX||E.stretchY)){const pr=Kh(ie,Ue,Se),Si=Kh(ue,et,ke);for(let Pi=0;Pi<pr.length-1;Pi++){const ui=pr[Pi],ri=pr[Pi+1];for(let hn=0;hn<Si.length-1;hn++)b.push(Qr(ui,Si[hn],ri,Si[hn+1]))}}else b.push(Qr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:z+1}));return b}function Gd(A,l,u){let x=0;for(const b of A)x+=Math.max(l,Math.min(u,b[1]))-Math.max(l,Math.min(u,b[0]));return x}function Kh(A,l,u){const x=[{fixed:-1,stretch:0}];for(const[b,E]of A){const N=x[x.length-1];x.push({fixed:b-N.stretch,stretch:N.stretch}),x.push({fixed:b-N.stretch,stretch:N.stretch+(E-b)})}return x.push({fixed:l+1,stretch:u}),x}function ym(A,l,u,x){return A/l*u+x}function _m(A,l,u,x){return A-l*u/x}qe("Anchor",qh);class FA{constructor(l,u,x,b,E,N,M,z,W,ie){var ue;if(this.boxStartIndex=l.length,W){let _e=N.top,Se=N.bottom;const ke=N.collisionPadding;ke&&(_e-=ke[1],Se+=ke[3]);let Ue=Se-_e;Ue>0&&(Ue=Math.max(10,Ue),this.circleDiameter=Ue)}else{const _e=!((ue=N.image)===null||ue===void 0)&&ue.content&&(N.image.textFitWidth||N.image.textFitHeight)?t1(N):{x1:N.left,y1:N.top,x2:N.right,y2:N.bottom};_e.y1=_e.y1*M-z[0],_e.y2=_e.y2*M+z[2],_e.x1=_e.x1*M-z[3],_e.x2=_e.x2*M+z[1];const Se=N.collisionPadding;if(Se&&(_e.x1-=Se[0]*M,_e.y1-=Se[1]*M,_e.x2+=Se[2]*M,_e.y2+=Se[3]*M),ie){const ke=new p(_e.x1,_e.y1),Ue=new p(_e.x2,_e.y1),et=new p(_e.x1,_e.y2),ht=new p(_e.x2,_e.y2),Lt=ie*Math.PI/180;ke._rotate(Lt),Ue._rotate(Lt),et._rotate(Lt),ht._rotate(Lt),_e.x1=Math.min(ke.x,Ue.x,et.x,ht.x),_e.x2=Math.max(ke.x,Ue.x,et.x,ht.x),_e.y1=Math.min(ke.y,Ue.y,et.y,ht.y),_e.y2=Math.max(ke.y,Ue.y,et.y,ht.y)}l.emplaceBack(u.x,u.y,_e.x1,_e.y1,_e.x2,_e.y2,x,b,E)}this.boxEndIndex=l.length}}class Ux{constructor(l=[],u=(x,b)=>x<b?-1:x>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=u,this.length>0)for(let x=(this.length>>1)-1;x>=0;x--)this._down(x)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:u,compare:x}=this,b=u[l];for(;l>0;){const E=l-1>>1,N=u[E];if(x(b,N)>=0)break;u[l]=N,l=E}u[l]=b}_down(l){const{data:u,compare:x}=this,b=this.length>>1,E=u[l];for(;l<b;){let N=1+(l<<1);const M=N+1;if(M<this.length&&x(u[M],u[N])<0&&(N=M),x(u[N],E)>=0)break;u[l]=u[N],l=N}u[l]=E}}function sb(A,l=1,u=!1){const x=Vd.fromPoints(A[0]),b=Math.min(x.width(),x.height());let E=b/2;const N=new Ux([],ab),{minX:M,minY:z,maxX:W,maxY:ie}=x;if(b===0)return new p(M,z);for(let Se=M;Se<W;Se+=b)for(let ke=z;ke<ie;ke+=b)N.push(new Xf(Se+E,ke+E,E,A));let ue=function(Se){let ke=0,Ue=0,et=0;const ht=Se[0];for(let Lt=0,yt=ht.length,Bt=yt-1;Lt<yt;Bt=Lt++){const Zt=ht[Lt],nr=ht[Bt],xr=Zt.x*nr.y-nr.x*Zt.y;Ue+=(Zt.x+nr.x)*xr,et+=(Zt.y+nr.y)*xr,ke+=3*xr}return new Xf(Ue/ke,et/ke,0,Se)}(A),_e=N.length;for(;N.length;){const Se=N.pop();(Se.d>ue.d||!ue.d)&&(ue=Se,u&&console.log("found best %d after %d probes",Math.round(1e4*Se.d)/1e4,_e)),Se.max-ue.d<=l||(E=Se.h/2,N.push(new Xf(Se.p.x-E,Se.p.y-E,E,A)),N.push(new Xf(Se.p.x+E,Se.p.y-E,E,A)),N.push(new Xf(Se.p.x-E,Se.p.y+E,E,A)),N.push(new Xf(Se.p.x+E,Se.p.y+E,E,A)),_e+=4)}return u&&(console.log(`num probes: ${_e}`),console.log(`best distance: ${ue.d}`)),ue.p}function ab(A,l){return l.max-A.max}function Xf(A,l,u,x){this.p=new p(A,l),this.h=u,this.d=function(b,E){let N=!1,M=1/0;for(let z=0;z<E.length;z++){const W=E[z];for(let ie=0,ue=W.length,_e=ue-1;ie<ue;_e=ie++){const Se=W[ie],ke=W[_e];Se.y>b.y!=ke.y>b.y&&b.x<(ke.x-Se.x)*(b.y-Se.y)/(ke.y-Se.y)+Se.x&&(N=!N),M=Math.min(M,Eg(b,Se,ke))}}return(N?1:-1)*Math.sqrt(M)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}var zo;c.aE=void 0,(zo=c.aE||(c.aE={}))[zo.center=1]="center",zo[zo.left=2]="left",zo[zo.right=3]="right",zo[zo.top=4]="top",zo[zo.bottom=5]="bottom",zo[zo["top-left"]=6]="top-left",zo[zo["top-right"]=7]="top-right",zo[zo["bottom-left"]=8]="bottom-left",zo[zo["bottom-right"]=9]="bottom-right";const u1=Number.POSITIVE_INFINITY;function Ox(A,l){return l[1]!==u1?function(u,x,b){let E=0,N=0;switch(x=Math.abs(x),b=Math.abs(b),u){case"top-right":case"top-left":case"top":N=b-7;break;case"bottom-right":case"bottom-left":case"bottom":N=7-b}switch(u){case"top-right":case"bottom-right":case"right":E=-x;break;case"top-left":case"bottom-left":case"left":E=x}return[E,N]}(A,l[0],l[1]):function(u,x){let b=0,E=0;x<0&&(x=0);const N=x/Math.SQRT2;switch(u){case"top-right":case"top-left":E=N-7;break;case"bottom-right":case"bottom-left":E=7-N;break;case"bottom":E=7-x;break;case"top":E=x-7}switch(u){case"top-right":case"bottom-right":b=-N;break;case"top-left":case"bottom-left":b=N;break;case"left":b=x;break;case"right":b=-x}return[b,E]}(A,l[0])}function zx(A,l,u){var x;const b=A.layout,E=(x=b.get("text-variable-anchor-offset"))===null||x===void 0?void 0:x.evaluate(l,{},u);if(E){const M=E.values,z=[];for(let W=0;W<M.length;W+=2){const ie=z[W]=M[W],ue=M[W+1].map(_e=>_e*Oa);ie.startsWith("top")?ue[1]-=7:ie.startsWith("bottom")&&(ue[1]+=7),z[W+1]=ue}return new Yn(z)}const N=b.get("text-variable-anchor");if(N){let M;M=A._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},u)*Oa,u1]:b.get("text-offset").evaluate(l,{},u).map(W=>W*Oa);const z=[];for(const W of N)z.push(W,Ox(W,M));return new Yn(z)}return null}function bm(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zf(A,l,u,x,b,E,N,M,z,W,ie,ue){let _e=E.textMaxSize.evaluate(l,{});_e===void 0&&(_e=N);const Se=A.layers[0].layout,ke=Se.get("icon-offset").evaluate(l,{},ie),Ue=h1(u.horizontal),et=N/24,ht=A.tilePixelRatio*et,Lt=A.tilePixelRatio*_e/24,yt=A.tilePixelRatio*M,Bt=A.tilePixelRatio*Se.get("symbol-spacing"),Zt=Se.get("text-padding")*A.tilePixelRatio,nr=function(Pi,ui,ri,hn=1){const gs=Pi.get("icon-padding").evaluate(ui,{},ri),ca=gs&&gs.values;return[ca[0]*hn,ca[1]*hn,ca[2]*hn,ca[3]*hn]}(Se,l,ie,A.tilePixelRatio),xr=Se.get("text-max-angle")/180*Math.PI,Rr=Se.get("text-rotation-alignment")!=="viewport"&&Se.get("symbol-placement")!=="point",Ir=Se.get("icon-rotation-alignment")==="map"&&Se.get("symbol-placement")!=="point",Ur=Se.get("symbol-placement"),Jr=Bt/2,zr=Se.get("icon-text-fit");let Qr;x&&zr!=="none"&&(A.allowVerticalPlacement&&u.vertical&&(Qr=r1(x,u.vertical,zr,Se.get("icon-text-fit-padding"),ke,et)),Ue&&(x=r1(x,Ue,zr,Se.get("icon-text-fit-padding"),ke,et)));const pr=ie?ue.line.getGranularityForZoomLevel(ie.z):1,Si=(Pi,ui)=>{ui.x<0||ui.x>=Ne||ui.y<0||ui.y>=Ne||function(ri,hn,gs,ca,xo,Al,dl,Ea,ks,Ja,Ta,h,m,_,k,U,X,Be,He,_t,Ut,vr,br,rr,or){const Di=ri.addToLineVertexArray(hn,gs);let Ei,Vn,Ot,Nt,Yt=0,_r=0,Ai=0,xn=0,xi=-1,Oi=-1;const Os={};let Gn=_h("");if(ri.allowVerticalPlacement&&ca.vertical){const uc=Ea.layout.get("text-rotate").evaluate(Ut,{},rr)+90;Ot=new FA(ks,hn,Ja,Ta,h,ca.vertical,m,_,k,uc),dl&&(Nt=new FA(ks,hn,Ja,Ta,h,dl,X,Be,k,uc))}if(xo){const uc=Ea.layout.get("icon-rotate").evaluate(Ut,{}),wh=Ea.layout.get("icon-text-fit")!=="none",Zp=c1(xo,uc,br,wh),LA=dl?c1(dl,uc,br,wh):void 0;Vn=new FA(ks,hn,Ja,Ta,h,xo,X,Be,!1,uc),Yt=4*Zp.length;const Yp=ri.iconSizeData;let Ad=null;Yp.kind==="source"?(Ad=[EA*Ea.layout.get("icon-size").evaluate(Ut,{})],Ad[0]>Gh&&Pt(`${ri.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Yp.kind==="composite"&&(Ad=[EA*vr.compositeIconSizes[0].evaluate(Ut,{},rr),EA*vr.compositeIconSizes[1].evaluate(Ut,{},rr)],(Ad[0]>Gh||Ad[1]>Gh)&&Pt(`${ri.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ri.addSymbols(ri.icon,Zp,Ad,_t,He,Ut,c.ao.none,hn,Di.lineStartIndex,Di.lineLength,-1,rr),xi=ri.icon.placedSymbolArray.length-1,LA&&(_r=4*LA.length,ri.addSymbols(ri.icon,LA,Ad,_t,He,Ut,c.ao.vertical,hn,Di.lineStartIndex,Di.lineLength,-1,rr),Oi=ri.icon.placedSymbolArray.length-1)}const NA=Object.keys(ca.horizontal);for(const uc of NA){const wh=ca.horizontal[uc];if(!Ei){Gn=_h(wh.text);const LA=Ea.layout.get("text-rotate").evaluate(Ut,{},rr);Ei=new FA(ks,hn,Ja,Ta,h,wh,m,_,k,LA)}const Zp=wh.positionedLines.length===1;if(Ai+=Yf(ri,hn,wh,Al,Ea,k,Ut,U,Di,ca.vertical?c.ao.horizontal:c.ao.horizontalOnly,Zp?NA:[uc],Os,xi,vr,rr),Zp)break}ca.vertical&&(xn+=Yf(ri,hn,ca.vertical,Al,Ea,k,Ut,U,Di,c.ao.vertical,["vertical"],Os,Oi,vr,rr));const cb=Ei?Ei.boxStartIndex:ri.collisionBoxArray.length,GL=Ei?Ei.boxEndIndex:ri.collisionBoxArray.length,qL=Ot?Ot.boxStartIndex:ri.collisionBoxArray.length,KL=Ot?Ot.boxEndIndex:ri.collisionBoxArray.length,WL=Vn?Vn.boxStartIndex:ri.collisionBoxArray.length,$L=Vn?Vn.boxEndIndex:ri.collisionBoxArray.length,XL=Nt?Nt.boxStartIndex:ri.collisionBoxArray.length,ZL=Nt?Nt.boxEndIndex:ri.collisionBoxArray.length;let IA=-1;const Qx=(uc,wh)=>uc&&uc.circleDiameter?Math.max(uc.circleDiameter,wh):wh;IA=Qx(Ei,IA),IA=Qx(Ot,IA),IA=Qx(Vn,IA),IA=Qx(Nt,IA);const HC=IA>-1?1:0;HC&&(IA*=or/Oa),ri.glyphOffsetArray.length>=TA.MAX_GLYPHS&&Pt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ut.sortKey!==void 0&&ri.addToSortKeyRanges(ri.symbolInstances.length,Ut.sortKey);const YL=zx(Ea,Ut,rr),[JL,eM]=function(uc,wh){const Zp=uc.length,LA=wh?.values;if(LA?.length>0)for(let Yp=0;Yp<LA.length;Yp+=2){const Ad=LA[Yp+1];uc.emplaceBack(c.aE[LA[Yp]],Ad[0],Ad[1])}return[Zp,uc.length]}(ri.textAnchorOffsets,YL);ri.symbolInstances.emplaceBack(hn.x,hn.y,Os.right>=0?Os.right:-1,Os.center>=0?Os.center:-1,Os.left>=0?Os.left:-1,Os.vertical||-1,xi,Oi,Gn,cb,GL,qL,KL,WL,$L,XL,ZL,Ja,Ai,xn,Yt,_r,HC,0,m,IA,JL,eM)}(A,ui,Pi,u,x,b,Qr,A.layers[0],A.collisionBoxArray,l.index,l.sourceLayerIndex,A.index,ht,[Zt,Zt,Zt,Zt],Rr,z,yt,nr,Ir,ke,l,E,W,ie,N)};if(Ur==="line")for(const Pi of Rx(l.geometry,0,0,Ne,Ne)){const ui=Wu(Pi,pr),ri=Gp(ui,Bt,xr,u.vertical||Ue,x,24,Lt,A.overscaling,Ne);for(const hn of ri)Ue&&ob(A,Ue.text,Jr,hn)||Si(ui,hn)}else if(Ur==="line-center"){for(const Pi of l.geometry)if(Pi.length>1){const ui=Wu(Pi,pr),ri=jx(ui,xr,u.vertical||Ue,x,24,Lt);ri&&Si(ui,ri)}}else if(l.type==="Polygon")for(const Pi of Jl(l.geometry,0)){const ui=sb(Pi,16);Si(Wu(Pi[0],pr,!0),new qh(ui.x,ui.y,0))}else if(l.type==="LineString")for(const Pi of l.geometry){const ui=Wu(Pi,pr);Si(ui,new qh(ui[0].x,ui[0].y,0))}else if(l.type==="Point")for(const Pi of l.geometry)for(const ui of Pi)Si([ui],new qh(ui.x,ui.y,0))}function Yf(A,l,u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke){const Ue=function(Lt,yt,Bt,Zt,nr,xr,Rr,Ir){const Ur=Zt.layout.get("text-rotate").evaluate(xr,{})*Math.PI/180,Jr=[];for(const zr of yt.positionedLines)for(const Qr of zr.positionedGlyphs){if(!Qr.rect)continue;const pr=Qr.rect||{};let Si=4,Pi=!0,ui=1,ri=0;const hn=(nr||Ir)&&Qr.vertical,gs=Qr.metrics.advance*Qr.scale/2;if(Ir&&yt.verticalizable&&(ri=zr.lineOffset/2-(Qr.imageName?-(Oa-Qr.metrics.width*Qr.scale)/2:(Qr.scale-1)*Oa)),Qr.imageName){const Be=Rr[Qr.imageName];Pi=Be.sdf,ui=Be.pixelRatio,Si=1/ui}const ca=nr?[Qr.x+gs,Qr.y]:[0,0];let xo=nr?[0,0]:[Qr.x+gs+Bt[0],Qr.y+Bt[1]-ri],Al=[0,0];hn&&(Al=xo,xo=[0,0]);const dl=Qr.metrics.isDoubleResolution?2:1,Ea=(Qr.metrics.left-Si)*Qr.scale-gs+xo[0],ks=(-Qr.metrics.top-Si)*Qr.scale+xo[1],Ja=Ea+pr.w/dl*Qr.scale/ui,Ta=ks+pr.h/dl*Qr.scale/ui,h=new p(Ea,ks),m=new p(Ja,ks),_=new p(Ea,Ta),k=new p(Ja,Ta);if(hn){const Be=new p(-gs,gs- -17),He=-Math.PI/2,_t=12-gs,Ut=new p(22-_t,-(Qr.imageName?_t:0)),vr=new p(...Al);h._rotateAround(He,Be)._add(Ut)._add(vr),m._rotateAround(He,Be)._add(Ut)._add(vr),_._rotateAround(He,Be)._add(Ut)._add(vr),k._rotateAround(He,Be)._add(Ut)._add(vr)}if(Ur){const Be=Math.sin(Ur),He=Math.cos(Ur),_t=[He,-Be,Be,He];h._matMult(_t),m._matMult(_t),_._matMult(_t),k._matMult(_t)}const U=new p(0,0),X=new p(0,0);Jr.push({tl:h,tr:m,bl:_,br:k,tex:pr,writingMode:yt.writingMode,glyphOffset:ca,sectionIndex:Qr.sectionIndex,isSDF:Pi,pixelOffsetTL:U,pixelOffsetBR:X,minFontScaleX:0,minFontScaleY:0})}return Jr}(0,u,M,b,E,N,x,A.allowVerticalPlacement),et=A.textSizeData;let ht=null;et.kind==="source"?(ht=[EA*b.layout.get("text-size").evaluate(N,{})],ht[0]>Gh&&Pt(`${A.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):et.kind==="composite"&&(ht=[EA*Se.compositeTextSizes[0].evaluate(N,{},ke),EA*Se.compositeTextSizes[1].evaluate(N,{},ke)],(ht[0]>Gh||ht[1]>Gh)&&Pt(`${A.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),A.addSymbols(A.text,Ue,ht,M,E,N,W,l,z.lineStartIndex,z.lineLength,_e,ke);for(const Lt of ie)ue[Lt]=A.text.placedSymbolArray.length-1;return 4*Ue.length}function h1(A){for(const l in A)return A[l];return null}function ob(A,l,u,x){const b=A.compareText;if(l in b){const E=b[l];for(let N=E.length-1;N>=0;N--)if(x.dist(E[N])<u)return!0}else b[l]=[];return b[l].push(x),!1}const qd=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Kd{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,x]=new Uint8Array(l,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=x>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const E=qd[15&x];if(!E)throw new Error("Unrecognized array type.");const[N]=new Uint16Array(l,2,1),[M]=new Uint32Array(l,4,1);return new Kd(M,N,E,l)}constructor(l,u=64,x=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=x,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const E=qd.indexOf(this.ArrayType),N=2*l*this.ArrayType.BYTES_PER_ELEMENT,M=l*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-M%8)%8;if(E<0)throw new Error(`Unexpected typed array class: ${x}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+M+z,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+N+M+z),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+M+z,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+E]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=l)}add(l,u){const x=this._pos>>1;return this.ids[x]=x,this.coords[this._pos++]=l,this.coords[this._pos++]=u,x}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return wm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,u,x,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:E,coords:N,nodeSize:M}=this,z=[0,E.length-1,0],W=[];for(;z.length;){const ie=z.pop()||0,ue=z.pop()||0,_e=z.pop()||0;if(ue-_e<=M){for(let et=_e;et<=ue;et++){const ht=N[2*et],Lt=N[2*et+1];ht>=l&&ht<=x&&Lt>=u&&Lt<=b&&W.push(E[et])}continue}const Se=_e+ue>>1,ke=N[2*Se],Ue=N[2*Se+1];ke>=l&&ke<=x&&Ue>=u&&Ue<=b&&W.push(E[Se]),(ie===0?l<=ke:u<=Ue)&&(z.push(_e),z.push(Se-1),z.push(1-ie)),(ie===0?x>=ke:b>=Ue)&&(z.push(Se+1),z.push(ue),z.push(1-ie))}return W}within(l,u,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:E,nodeSize:N}=this,M=[0,b.length-1,0],z=[],W=x*x;for(;M.length;){const ie=M.pop()||0,ue=M.pop()||0,_e=M.pop()||0;if(ue-_e<=N){for(let et=_e;et<=ue;et++)Wp(E[2*et],E[2*et+1],l,u)<=W&&z.push(b[et]);continue}const Se=_e+ue>>1,ke=E[2*Se],Ue=E[2*Se+1];Wp(ke,Ue,l,u)<=W&&z.push(b[Se]),(ie===0?l-x<=ke:u-x<=Ue)&&(M.push(_e),M.push(Se-1),M.push(1-ie)),(ie===0?l+x>=ke:u+x>=Ue)&&(M.push(Se+1),M.push(ue),M.push(1-ie))}return z}}function wm(A,l,u,x,b,E){if(b-x<=u)return;const N=x+b>>1;qp(A,l,N,x,b,E),wm(A,l,u,x,N-1,1-E),wm(A,l,u,N+1,b,1-E)}function qp(A,l,u,x,b,E){for(;b>x;){if(b-x>600){const W=b-x+1,ie=u-x+1,ue=Math.log(W),_e=.5*Math.exp(2*ue/3),Se=.5*Math.sqrt(ue*_e*(W-_e)/W)*(ie-W/2<0?-1:1);qp(A,l,u,Math.max(x,Math.floor(u-ie*_e/W+Se)),Math.min(b,Math.floor(u+(W-ie)*_e/W+Se)),E)}const N=l[2*u+E];let M=x,z=b;for(Wd(A,l,x,u),l[2*b+E]>N&&Wd(A,l,x,b);M<z;){for(Wd(A,l,M,z),M++,z--;l[2*M+E]<N;)M++;for(;l[2*z+E]>N;)z--}l[2*x+E]===N?Wd(A,l,x,z):(z++,Wd(A,l,z,b)),z<=u&&(x=z+1),u<=z&&(b=z-1)}}function Wd(A,l,u,x){Kp(A,u,x),Kp(l,2*u,2*x),Kp(l,2*u+1,2*x+1)}function Kp(A,l,u){const x=A[l];A[l]=A[u],A[u]=x}function Wp(A,l,u,x){const b=A-u,E=l-x;return b*b+E*E}var Cm;c.cx=void 0,(Cm=c.cx||(c.cx={})).create="create",Cm.load="load",Cm.fullLoad="fullLoad";let $p=null,Xp=[];const Bm=1e3/60,$d="loadTime",A1="fullLoadTime",lb={mark(A){performance.mark(A)},frame(A){const l=A;$p!=null&&Xp.push(l-$p),$p=l},clearMetrics(){$p=null,Xp=[],performance.clearMeasures($d),performance.clearMeasures(A1);for(const A in c.cx)performance.clearMarks(c.cx[A])},getPerformanceMetrics(){performance.measure($d,c.cx.create,c.cx.load),performance.measure(A1,c.cx.create,c.cx.fullLoad);const A=performance.getEntriesByName($d)[0].duration,l=performance.getEntriesByName(A1)[0].duration,u=Xp.length,x=1/(Xp.reduce((E,N)=>E+N,0)/u/1e3),b=Xp.filter(E=>E>Bm).reduce((E,N)=>E+(N-Bm)/Bm,0);return{loadTime:A,fullLoadTime:l,fps:x,percentDroppedFrames:b/(u+b)*100,totalFrames:u}}};c.$=Ne,c.A=H,c.B=function([A,l,u]){return l+=90,l*=Math.PI/180,u*=Math.PI/180,{x:A*Math.cos(l)*Math.sin(u),y:A*Math.sin(l)*Math.sin(u),z:A*Math.cos(u)}},c.C=$r,c.D=kr,c.E=Fr,c.F=Li,c.G=pe,c.H=jr,c.I=sm,c.J=class{constructor(A,l){this.target=A,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Nx(()=>this.process()),this.subscription=wi(this.target,"message",u=>this.receive(u),!1),this.globalScope=lr(self)?A:window}registerMessageHandler(A,l){this.messageHandlers[A]=l}sendAsync(A,l){return new Promise((u,x)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10),E=l?wi(l.signal,"abort",()=>{E?.unsubscribe(),delete this.resolveRejects[b];const z={id:b,type:"<cancel>",origin:location.origin,targetMapId:A.targetMapId,sourceMapId:this.mapId};this.target.postMessage(z)},Ix):null;this.resolveRejects[b]={resolve:z=>{E?.unsubscribe(),u(z)},reject:z=>{E?.unsubscribe(),x(z)}};const N=[],M=Object.assign(Object.assign({},A),{id:b,sourceMapId:this.mapId,origin:location.origin,data:Dt(A.data,N)});this.target.postMessage(M,{transfer:N})})}receive(A){const l=A.data,u=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[u];const x=this.abortControllers[u];return delete this.abortControllers[u],void(x&&x.abort())}if(lr(self)||l.mustQueue)return this.tasks[u]=l,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,l)}}process(){if(this.taskQueue.length===0)return;const A=this.taskQueue.shift(),l=this.tasks[A];delete this.tasks[A],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(A,l)}processTask(A,l){return s(this,void 0,void 0,function*(){if(l.type==="<response>"){const b=this.resolveRejects[A];return delete this.resolveRejects[A],b?void(l.error?b.reject(Qt(l.error)):b.resolve(Qt(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(A,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=Qt(l.data),x=new AbortController;this.abortControllers[A]=x;try{const b=yield this.messageHandlers[l.type](l.sourceMapId,u,x);this.completeTask(A,null,b)}catch(b){this.completeTask(A,b)}})}completeTask(A,l,u){const x=[];delete this.abortControllers[A];const b={id:A,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Dt(l):null,data:Dt(u,x)};this.target.postMessage(b,{transfer:x})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=Ze,c.L=function(){var A=new H(16);return H!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},c.M=function(A,l,u){var x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue=u[0],et=u[1],ht=u[2];return l===A?(A[12]=l[0]*Ue+l[4]*et+l[8]*ht+l[12],A[13]=l[1]*Ue+l[5]*et+l[9]*ht+l[13],A[14]=l[2]*Ue+l[6]*et+l[10]*ht+l[14],A[15]=l[3]*Ue+l[7]*et+l[11]*ht+l[15]):(b=l[1],E=l[2],N=l[3],M=l[4],z=l[5],W=l[6],ie=l[7],ue=l[8],_e=l[9],Se=l[10],ke=l[11],A[0]=x=l[0],A[1]=b,A[2]=E,A[3]=N,A[4]=M,A[5]=z,A[6]=W,A[7]=ie,A[8]=ue,A[9]=_e,A[10]=Se,A[11]=ke,A[12]=x*Ue+M*et+ue*ht+l[12],A[13]=b*Ue+z*et+_e*ht+l[13],A[14]=E*Ue+W*et+Se*ht+l[14],A[15]=N*Ue+ie*et+ke*ht+l[15]),A},c.N=function(A,l,u){var x=u[0],b=u[1],E=u[2];return A[0]=l[0]*x,A[1]=l[1]*x,A[2]=l[2]*x,A[3]=l[3]*x,A[4]=l[4]*b,A[5]=l[5]*b,A[6]=l[6]*b,A[7]=l[7]*b,A[8]=l[8]*E,A[9]=l[9]*E,A[10]=l[10]*E,A[11]=l[11]*E,A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15],A},c.O=function(A,l,u){var x=l[0],b=l[1],E=l[2],N=l[3],M=l[4],z=l[5],W=l[6],ie=l[7],ue=l[8],_e=l[9],Se=l[10],ke=l[11],Ue=l[12],et=l[13],ht=l[14],Lt=l[15],yt=u[0],Bt=u[1],Zt=u[2],nr=u[3];return A[0]=yt*x+Bt*M+Zt*ue+nr*Ue,A[1]=yt*b+Bt*z+Zt*_e+nr*et,A[2]=yt*E+Bt*W+Zt*Se+nr*ht,A[3]=yt*N+Bt*ie+Zt*ke+nr*Lt,A[4]=(yt=u[4])*x+(Bt=u[5])*M+(Zt=u[6])*ue+(nr=u[7])*Ue,A[5]=yt*b+Bt*z+Zt*_e+nr*et,A[6]=yt*E+Bt*W+Zt*Se+nr*ht,A[7]=yt*N+Bt*ie+Zt*ke+nr*Lt,A[8]=(yt=u[8])*x+(Bt=u[9])*M+(Zt=u[10])*ue+(nr=u[11])*Ue,A[9]=yt*b+Bt*z+Zt*_e+nr*et,A[10]=yt*E+Bt*W+Zt*Se+nr*ht,A[11]=yt*N+Bt*ie+Zt*ke+nr*Lt,A[12]=(yt=u[12])*x+(Bt=u[13])*M+(Zt=u[14])*ue+(nr=u[15])*Ue,A[13]=yt*b+Bt*z+Zt*_e+nr*et,A[14]=yt*E+Bt*W+Zt*Se+nr*ht,A[15]=yt*N+Bt*ie+Zt*ke+nr*Lt,A},c.P=p,c.Q=function(A,l){const u={};for(let x=0;x<l.length;x++){const b=l[x];b in A&&(u[b]=A[b])}return u},c.R=vo,c.S=Pn,c.T=Md,c.U=pm,c.V=Lx,c.W=D,c.X=j,c.Y=Lr,c.Z=Dc,c._=s,c.a=Ce,c.a$=me,c.a0=function(A,l){var u,x,b,E,N;if(!A)return l??{};if(!l)return A;let M=Object.assign({},A);if(l.removeAll&&(M={removeAll:!0}),l.remove){const z=new Set(l.remove);M.add&&(M.add=M.add.filter(ie=>!z.has(ie.id))),M.update&&(M.update=M.update.filter(ie=>!z.has(ie.id)));const W=new Set(((u=A.add)!==null&&u!==void 0?u:[]).map(ie=>ie.id));l.remove=l.remove.filter(ie=>!W.has(ie))}if(l.remove){const z=new Set(M.remove?M.remove.concat(l.remove):l.remove);M.remove=Array.from(z.values())}if(l.add){const z=M.add?M.add.concat(l.add):l.add,W=new Map(z.map(ie=>[ie.id,ie]));M.add=Array.from(W.values())}if(l.update){const z=new Map((x=M.update)===null||x===void 0?void 0:x.map(W=>[W.id,W]));for(const W of l.update){const ie=(b=z.get(W.id))!==null&&b!==void 0?b:{id:W.id};W.newGeometry&&(ie.newGeometry=W.newGeometry),W.addOrUpdateProperties&&(ie.addOrUpdateProperties=((E=ie.addOrUpdateProperties)!==null&&E!==void 0?E:[]).concat(W.addOrUpdateProperties)),W.removeProperties&&(ie.removeProperties=((N=ie.removeProperties)!==null&&N!==void 0?N:[]).concat(W.removeProperties)),W.removeAllProperties&&(ie.removeAllProperties=!0),z.set(W.id,ie)}M.update=Array.from(z.values())}return M.remove&&M.add&&(M.remove=M.remove.filter(z=>M.add.findIndex(W=>W.id===z)===-1)),M},c.a1=Kf,c.a2=Vd,c.a3=25,c.a4=Vp,c.a5=A=>{const l=window.document.createElement("video");return l.muted=!0,new Promise(u=>{l.onloadstart=()=>{u(l)};for(const x of A){const b=window.document.createElement("source");xt(x)||(l.crossOrigin="Anonymous"),b.src=x,l.appendChild(b)}})},c.a6=dr,c.a7=function(){return ut++},c.a8=ge,c.a9=TA,c.aA=function(A){let l=1/0,u=1/0,x=-1/0,b=-1/0;for(const E of A)l=Math.min(l,E.x),u=Math.min(u,E.y),x=Math.max(x,E.x),b=Math.max(b,E.y);return[l,u,x,b]},c.aB=Oa,c.aC=Te,c.aD=function(A,l,u,x,b=!1){if(!u[0]&&!u[1])return[0,0];const E=b?x==="map"?-A.bearingInRadians:0:x==="viewport"?A.bearingInRadians:0;if(E){const N=Math.sin(E),M=Math.cos(E);u=[u[0]*M-u[1]*N,u[0]*N+u[1]*M]}return[b?u[0]:Te(l,u[0],A.zoom),b?u[1]:Te(l,u[1],A.zoom)]},c.aF=i1,c.aG=bm,c.aH=zd,c.aI=Kd,c.aJ=un,c.aK=gu,c.aL=St,c.aM=rn,c.aN=Nn,c.aO=ze,c.aP=$t,c.aQ=a1,c.aR=ce,c.aS=J,c.aT=function(A){var l=new H(3);return l[0]=A[0],l[1]=A[1],l[2]=A[2],l},c.aU=function(A,l,u){return A[0]=l[0]-u[0],A[1]=l[1]-u[1],A[2]=l[2]-u[2],A},c.aV=function(A,l){var u=l[0],x=l[1],b=l[2],E=u*u+x*x+b*b;return E>0&&(E=1/Math.sqrt(E)),A[0]=l[0]*E,A[1]=l[1]*E,A[2]=l[2]*E,A},c.aW=te,c.aX=function(A,l){return A[0]*l[0]+A[1]*l[1]+A[2]*l[2]},c.aY=function(A,l,u){return A[0]=l[0]*u[0],A[1]=l[1]*u[1],A[2]=l[2]*u[2],A[3]=l[3]*u[3],A},c.aZ=Z,c.a_=function(A,l,u){const x=l[0]*u[0]+l[1]*u[1]+l[2]*u[2];return x===0?null:(-(A[0]*u[0]+A[1]*u[1]+A[2]*u[2])-u[3])/x},c.aa=fu,c.ab=id,c.ac=kA,c.ad=function(A){const l={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,x,b,E)=>{const N=b||E;return l[x]=!N||N.toLowerCase(),""}),l["max-age"]){const u=parseInt(l["max-age"],10);isNaN(u)?delete l["max-age"]:l["max-age"]=u}return l},c.ae=Ci,c.af=function(A){return Math.pow(2,A)},c.ag=G,c.ah=Me,c.ai=85.051129,c.aj=mm,c.ak=function(A){return Math.log(A)/Math.LN2},c.al=function(A){var l=A[0],u=A[1];return l*l+u*u},c.am=function(A){if(!A.length)return new Set;const l=Math.max(...A.map(z=>z.canonical.z));let u=1/0,x=-1/0,b=1/0,E=-1/0;const N=[];for(const z of A){const{x:W,y:ie,z:ue}=z.canonical,_e=Math.pow(2,l-ue),Se=W*_e,ke=ie*_e;N.push({id:z,x:Se,y:ke}),Se<u&&(u=Se),Se>x&&(x=Se),ke<b&&(b=ke),ke>E&&(E=ke)}const M=new Set;for(const z of N)z.x!==u&&z.x!==x&&z.y!==b&&z.y!==E||M.add(z.id);return M},c.an=function(A,l){let u=0,x=0;if(A.kind==="constant")x=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:b,minZoom:E,maxZoom:N}=A,M=b?Me(cr.interpolationFactor(b,l,E,N),0,1):0;A.kind==="camera"?x=$r.number(A.minSize,A.maxSize,M):u=M}return{uSizeT:u,uSize:x}},c.ap=function(A,{uSize:l,uSizeT:u},{lowerSize:x,upperSize:b}){return A.kind==="source"?x/EA:A.kind==="composite"?$r.number(x/EA,b/EA,u):l},c.aq=function(A,l){var u=l[0],x=l[1],b=l[2],E=l[3],N=l[4],M=l[5],z=l[6],W=l[7],ie=l[8],ue=l[9],_e=l[10],Se=l[11],ke=l[12],Ue=l[13],et=l[14],ht=l[15],Lt=u*M-x*N,yt=u*z-b*N,Bt=u*W-E*N,Zt=x*z-b*M,nr=x*W-E*M,xr=b*W-E*z,Rr=ie*Ue-ue*ke,Ir=ie*et-_e*ke,Ur=ie*ht-Se*ke,Jr=ue*et-_e*Ue,zr=ue*ht-Se*Ue,Qr=_e*ht-Se*et,pr=Lt*Qr-yt*zr+Bt*Jr+Zt*Ur-nr*Ir+xr*Rr;return pr?(A[0]=(M*Qr-z*zr+W*Jr)*(pr=1/pr),A[1]=(b*zr-x*Qr-E*Jr)*pr,A[2]=(Ue*xr-et*nr+ht*Zt)*pr,A[3]=(_e*nr-ue*xr-Se*Zt)*pr,A[4]=(z*Ur-N*Qr-W*Ir)*pr,A[5]=(u*Qr-b*Ur+E*Ir)*pr,A[6]=(et*Bt-ke*xr-ht*yt)*pr,A[7]=(ie*xr-_e*Bt+Se*yt)*pr,A[8]=(N*zr-M*Ur+W*Rr)*pr,A[9]=(x*Ur-u*zr-E*Rr)*pr,A[10]=(ke*nr-Ue*Bt+ht*Lt)*pr,A[11]=(ue*Bt-ie*nr-Se*Lt)*pr,A[12]=(M*Ir-N*Jr-z*Rr)*pr,A[13]=(u*Jr-x*Ir+b*Rr)*pr,A[14]=(Ue*yt-ke*Zt-et*Lt)*pr,A[15]=(ie*Zt-ue*yt+_e*Lt)*pr,A):null},c.ar=Le,c.as=function(A){var l=A[0],u=A[1];return Math.sqrt(l*l+u*u)},c.at=function(A){return A[0]=0,A[1]=0,A},c.au=function(A,l,u){return A[0]=l[0]*u,A[1]=l[1]*u,A},c.av=n1,c.aw=we,c.ax=function(A,l,u,x){const b=l.y-A.y,E=l.x-A.x,N=x.y-u.y,M=x.x-u.x,z=N*E-M*b;if(z===0)return null;const W=(M*(A.y-u.y)-N*(A.x-u.x))/z;return new p(A.x+W*E,A.y+W*b)},c.ay=Rx,c.az=nx,c.b=ar,c.b$=class extends Ya{constructor(A,l){super(A,l),this.current=new Array}set(A){if(A!=this.current){this.current=A;const l=new Float32Array(A);this.gl.uniform1fv(this.location,l)}}},c.b0=function(A,l,u){return A[0]=l[0]*u,A[1]=l[1]*u,A[2]=l[2]*u,A[3]=l[3]*u,A},c.b1=function(A,l){return A[0]*l[0]+A[1]*l[1]+A[2]*l[2]+A[3]},c.b2=Mx,c.b3=Wf,c.b4=function(A,l,u,x,b){var E=1/Math.tan(l/2);if(A[0]=E/u,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=E,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,b!=null&&b!==1/0){var N=1/(x-b);A[10]=(b+x)*N,A[14]=2*b*x*N}else A[10]=-1,A[14]=-2*x;return A},c.b5=function(A){var l=new H(16);return l[0]=A[0],l[1]=A[1],l[2]=A[2],l[3]=A[3],l[4]=A[4],l[5]=A[5],l[6]=A[6],l[7]=A[7],l[8]=A[8],l[9]=A[9],l[10]=A[10],l[11]=A[11],l[12]=A[12],l[13]=A[13],l[14]=A[14],l[15]=A[15],l},c.b6=function(A,l,u){var x=Math.sin(u),b=Math.cos(u),E=l[0],N=l[1],M=l[2],z=l[3],W=l[4],ie=l[5],ue=l[6],_e=l[7];return l!==A&&(A[8]=l[8],A[9]=l[9],A[10]=l[10],A[11]=l[11],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15]),A[0]=E*b+W*x,A[1]=N*b+ie*x,A[2]=M*b+ue*x,A[3]=z*b+_e*x,A[4]=W*b-E*x,A[5]=ie*b-N*x,A[6]=ue*b-M*x,A[7]=_e*b-z*x,A},c.b7=function(A,l,u){var x=Math.sin(u),b=Math.cos(u),E=l[4],N=l[5],M=l[6],z=l[7],W=l[8],ie=l[9],ue=l[10],_e=l[11];return l!==A&&(A[0]=l[0],A[1]=l[1],A[2]=l[2],A[3]=l[3],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15]),A[4]=E*b+W*x,A[5]=N*b+ie*x,A[6]=M*b+ue*x,A[7]=z*b+_e*x,A[8]=W*b-E*x,A[9]=ie*b-N*x,A[10]=ue*b-M*x,A[11]=_e*b-z*x,A},c.b8=function(){const A=new Float32Array(16);return G(A),A},c.b9=function(){const A=new Float64Array(16);return G(A),A},c.bA=function(A,l){const u=Ge(A,360),x=Ge(l,360),b=x-u,E=x>u?b-360:b+360;return Math.abs(b)<Math.abs(E)?b:E},c.bB=function(A){return A[0]=0,A[1]=0,A[2]=0,A},c.bC=function(A,l,u,x){const b=Math.sqrt(A*A+l*l),E=Math.sqrt(u*u+x*x);A/=b,l/=b,u/=E,x/=E;const N=Math.acos(A*u+l*x);return-l*u+A*x>0?N:-N},c.bD=function(A,l){const u=Ge(A,2*Math.PI),x=Ge(l,2*Math.PI);return Math.min(Math.abs(u-x),Math.abs(u-x+2*Math.PI),Math.abs(u-x-2*Math.PI))},c.bE=function(){const A={},l=wt.$version;for(const u in wt.$root){const x=wt.$root[u];if(x.required){let b=null;b=u==="version"?l:x.type==="array"?[]:{},b!=null&&(A[u]=b)}}return A},c.bF=ur,c.bG=vt,c.bH=function A(l,u){if(Array.isArray(l)){if(!Array.isArray(u)||l.length!==u.length)return!1;for(let x=0;x<l.length;x++)if(!A(l[x],u[x]))return!1;return!0}if(typeof l=="object"&&l!==null&&u!==null){if(typeof u!="object"||Object.keys(l).length!==Object.keys(u).length)return!1;for(const x in l)if(!A(l[x],u[x]))return!1;return!0}return l===u},c.bI=function(A){A=A.slice();const l=Object.create(null);for(let u=0;u<A.length;u++)l[A[u].id]=A[u];for(let u=0;u<A.length;u++)"ref"in A[u]&&(A[u]=Ji(A[u],l[A[u].ref]));return A},c.bJ=function(A,l){if(A.type==="custom")return new ib(A,l);switch(A.type){case"background":return new rb(A,l);case"circle":return new ox(A,l);case"color-relief":return new Ug(A,l);case"fill":return new $_(A,l);case"fill-extrusion":return new Kg(A,l);case"heatmap":return new G_(A,l);case"hillshade":return new sd(A,l);case"line":return new fx(A,l);case"raster":return new mo(A,l);case"symbol":return new Qd(A,l)}},c.bK=A=>A.type==="raster",c.bL=ve,c.bM=function(A,l){if(!A)return[{command:"setStyle",args:[l]}];let u=[];try{if(!Hr(A.version,l.version))return[{command:"setStyle",args:[l]}];Hr(A.center,l.center)||u.push({command:"setCenter",args:[l.center]}),Hr(A.state,l.state)||u.push({command:"setGlobalState",args:[l.state]}),Hr(A.centerAltitude,l.centerAltitude)||u.push({command:"setCenterAltitude",args:[l.centerAltitude]}),Hr(A.zoom,l.zoom)||u.push({command:"setZoom",args:[l.zoom]}),Hr(A.bearing,l.bearing)||u.push({command:"setBearing",args:[l.bearing]}),Hr(A.pitch,l.pitch)||u.push({command:"setPitch",args:[l.pitch]}),Hr(A.roll,l.roll)||u.push({command:"setRoll",args:[l.roll]}),Hr(A.sprite,l.sprite)||u.push({command:"setSprite",args:[l.sprite]}),Hr(A.glyphs,l.glyphs)||u.push({command:"setGlyphs",args:[l.glyphs]}),Hr(A.transition,l.transition)||u.push({command:"setTransition",args:[l.transition]}),Hr(A.light,l.light)||u.push({command:"setLight",args:[l.light]}),Hr(A.terrain,l.terrain)||u.push({command:"setTerrain",args:[l.terrain]}),Hr(A.sky,l.sky)||u.push({command:"setSky",args:[l.sky]}),Hr(A.projection,l.projection)||u.push({command:"setProjection",args:[l.projection]});const x={},b=[];(function(N,M,z,W){let ie;for(ie in M=M||{},N=N||{})Object.prototype.hasOwnProperty.call(N,ie)&&(Object.prototype.hasOwnProperty.call(M,ie)||Yr(ie,z,W));for(ie in M)Object.prototype.hasOwnProperty.call(M,ie)&&(Object.prototype.hasOwnProperty.call(N,ie)?Hr(N[ie],M[ie])||(N[ie].type==="geojson"&&M[ie].type==="geojson"&&$i(N,M,ie)?Ri(z,{command:"setGeoJSONSourceData",args:[ie,M[ie].data]}):on(ie,M,z,W)):In(ie,M,z))})(A.sources,l.sources,b,x);const E=[];A.layers&&A.layers.forEach(N=>{"source"in N&&x[N.source]?u.push({command:"removeLayer",args:[N.id]}):E.push(N)}),u=u.concat(b),function(N,M,z){M=M||[];const W=(N=N||[]).map(ln),ie=M.map(ln),ue=N.reduce(gi,{}),_e=M.reduce(gi,{}),Se=W.slice(),ke=Object.create(null);let Ue,et,ht,Lt,yt;for(let Bt=0,Zt=0;Bt<W.length;Bt++)Ue=W[Bt],Object.prototype.hasOwnProperty.call(_e,Ue)?Zt++:(Ri(z,{command:"removeLayer",args:[Ue]}),Se.splice(Se.indexOf(Ue,Zt),1));for(let Bt=0,Zt=0;Bt<ie.length;Bt++)Ue=ie[ie.length-1-Bt],Se[Se.length-1-Bt]!==Ue&&(Object.prototype.hasOwnProperty.call(ue,Ue)?(Ri(z,{command:"removeLayer",args:[Ue]}),Se.splice(Se.lastIndexOf(Ue,Se.length-Zt),1)):Zt++,Lt=Se[Se.length-Bt],Ri(z,{command:"addLayer",args:[_e[Ue],Lt]}),Se.splice(Se.length-Bt,0,Ue),ke[Ue]=!0);for(let Bt=0;Bt<ie.length;Bt++)if(Ue=ie[Bt],et=ue[Ue],ht=_e[Ue],!ke[Ue]&&!Hr(et,ht))if(Hr(et.source,ht.source)&&Hr(et["source-layer"],ht["source-layer"])&&Hr(et.type,ht.type)){for(yt in mi(et.layout,ht.layout,z,Ue,null,"setLayoutProperty"),mi(et.paint,ht.paint,z,Ue,null,"setPaintProperty"),Hr(et.filter,ht.filter)||Ri(z,{command:"setFilter",args:[Ue,ht.filter]}),Hr(et.minzoom,ht.minzoom)&&Hr(et.maxzoom,ht.maxzoom)||Ri(z,{command:"setLayerZoomRange",args:[Ue,ht.minzoom,ht.maxzoom]}),et)Object.prototype.hasOwnProperty.call(et,yt)&&yt!=="layout"&&yt!=="paint"&&yt!=="filter"&&yt!=="metadata"&&yt!=="minzoom"&&yt!=="maxzoom"&&(yt.indexOf("paint.")===0?mi(et[yt],ht[yt],z,Ue,yt.slice(6),"setPaintProperty"):Hr(et[yt],ht[yt])||Ri(z,{command:"setLayerProperty",args:[Ue,yt,ht[yt]]}));for(yt in ht)Object.prototype.hasOwnProperty.call(ht,yt)&&!Object.prototype.hasOwnProperty.call(et,yt)&&yt!=="layout"&&yt!=="paint"&&yt!=="filter"&&yt!=="metadata"&&yt!=="minzoom"&&yt!=="maxzoom"&&(yt.indexOf("paint.")===0?mi(et[yt],ht[yt],z,Ue,yt.slice(6),"setPaintProperty"):Hr(et[yt],ht[yt])||Ri(z,{command:"setLayerProperty",args:[Ue,yt,ht[yt]]}))}else Ri(z,{command:"removeLayer",args:[Ue]}),Lt=Se[Se.lastIndexOf(Ue)+1],Ri(z,{command:"addLayer",args:[ht,Lt]})}(E,l.layers,u)}catch(x){console.warn("Unable to compute style diff:",x),u=[{command:"setStyle",args:[l]}]}return u},c.bN=function(A){const l=[],u=A.id;return u===void 0&&l.push({message:`layers.${u}: missing required property "id"`}),A.render===void 0&&l.push({message:`layers.${u}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&l.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),l},c.bO=dt,c.bP=zt,c.bQ=class extends Ya{constructor(A,l){super(A,l),this.current=0}set(A){this.current!==A&&(this.current=A,this.gl.uniform1i(this.location,A))}},c.bR=sa,c.bS=class extends Ya{constructor(A,l){super(A,l),this.current=Ts}set(A){if(A[12]!==this.current[12]||A[0]!==this.current[0])return this.current=A,void this.gl.uniformMatrix4fv(this.location,!1,A);for(let l=1;l<16;l++)if(A[l]!==this.current[l]){this.current=A,this.gl.uniformMatrix4fv(this.location,!1,A);break}}},c.bT=$n,c.bU=class extends Ya{constructor(A,l){super(A,l),this.current=[0,0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]&&A[2]===this.current[2]||(this.current=A,this.gl.uniform3f(this.location,A[0],A[1],A[2]))}},c.bV=class extends Ya{constructor(A,l){super(A,l),this.current=[0,0]}set(A){A[0]===this.current[0]&&A[1]===this.current[1]||(this.current=A,this.gl.uniform2f(this.location,A[0],A[1]))}},c.bW=ee,c.bX=function(A,l){var u=Math.sin(l),x=Math.cos(l);return A[0]=x,A[1]=u,A[2]=0,A[3]=-u,A[4]=x,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},c.bY=function(A,l,u){var x=l[0],b=l[1],E=l[2];return A[0]=x*u[0]+b*u[3]+E*u[6],A[1]=x*u[1]+b*u[4]+E*u[7],A[2]=x*u[2]+b*u[5]+E*u[8],A},c.bZ=function(A,l,u,x,b,E,N){var M=1/(l-u),z=1/(x-b),W=1/(E-N);return A[0]=-2*M,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*z,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*W,A[11]=0,A[12]=(l+u)*M,A[13]=(b+x)*z,A[14]=(N+E)*W,A[15]=1,A},c.b_=class extends Ya{constructor(A,l){super(A,l),this.current=new Array}set(A){if(A!=this.current){this.current=A;const l=new Float32Array(4*A.length);for(let u=0;u<A.length;u++)l[4*u]=A[u].r,l[4*u+1]=A[u].g,l[4*u+2]=A[u].b,l[4*u+3]=A[u].a;this.gl.uniform4fv(this.location,l)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(A,l,u){const x=new Float64Array(4);return he(x,A,l-90,u),x},c.bc=function(A,l,u,x){var b,E,N,M,z,W=l[0],ie=l[1],ue=l[2],_e=l[3],Se=u[0],ke=u[1],Ue=u[2],et=u[3];return(E=W*Se+ie*ke+ue*Ue+_e*et)<0&&(E=-E,Se=-Se,ke=-ke,Ue=-Ue,et=-et),1-E>q?(b=Math.acos(E),N=Math.sin(b),M=Math.sin((1-x)*b)/N,z=Math.sin(x*b)/N):(M=1-x,z=x),A[0]=M*W+z*Se,A[1]=M*ie+z*ke,A[2]=M*ue+z*Ue,A[3]=M*_e+z*et,A},c.bd=function(A){const l=new Float64Array(9);var u,x,b,E,N,M,z,W,ie,ue,_e,Se,ke,Ue,et,ht,Lt,yt;ue=(b=(x=A)[0])*(z=b+b),_e=(E=x[1])*z,ke=(N=x[2])*z,Ue=N*(W=E+E),ht=(M=x[3])*z,Lt=M*W,yt=M*(ie=N+N),(u=l)[0]=1-(Se=E*W)-(et=N*ie),u[3]=_e-yt,u[6]=ke+Lt,u[1]=_e+yt,u[4]=1-ue-et,u[7]=Ue-ht,u[2]=ke-Lt,u[5]=Ue+ht,u[8]=1-ue-Se;const Bt=$t(-Math.asin(Me(l[2],-1,1)));let Zt,nr;return Math.hypot(l[5],l[8])<.001?(Zt=0,nr=-$t(Math.atan2(l[3],l[4]))):(Zt=$t(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),nr=$t(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:Zt,pitch:Bt+90,bearing:nr}},c.be=function(A,l){return A.roll==l.roll&&A.pitch==l.pitch&&A.bearing==l.bearing},c.bf=Ti,c.bg=Xs,c.bh=Pd,c.bi=Qh,c.bj=od,c.bk=Y,c.bl=Ae,c.bm=_a,c.bn=function(A,l,u,x,b){return Y(x,b,Me((A-l)/(u-l),0,1))},c.bo=Ge,c.bp=function(){return new Float64Array(3)},c.bq=function(A,l,u,x){return A[0]=l[0]+u[0]*x,A[1]=l[1]+u[1]*x,A[2]=l[2]+u[2]*x,A},c.br=he,c.bs=function(A,l,u){var x=u[0],b=u[1],E=u[2],N=u[3],M=l[0],z=l[1],W=l[2],ie=b*W-E*z,ue=E*M-x*W,_e=x*z-b*M;return A[0]=M+N*(ie+=ie)+b*(_e+=_e)-E*(ue+=ue),A[1]=z+N*ue+E*ie-x*_e,A[2]=W+N*_e+x*ue-b*ie,A},c.bt=function(A,l,u){const x=(b=[A[0],A[1],A[2],l[0],l[1],l[2],u[0],u[1],u[2]])[0]*((ie=b[8])*(N=b[4])-(M=b[5])*(W=b[7]))+b[1]*(-ie*(E=b[3])+M*(z=b[6]))+b[2]*(W*E-N*z);var b,E,N,M,z,W,ie;if(x===0)return null;const ue=te([],[l[0],l[1],l[2]],[u[0],u[1],u[2]]),_e=te([],[u[0],u[1],u[2]],[A[0],A[1],A[2]]),Se=te([],[A[0],A[1],A[2]],[l[0],l[1],l[2]]),ke=ce([],ue,-A[3]);return J(ke,ke,ce([],_e,-l[3])),J(ke,ke,ce([],Se,-u[3])),ce(ke,ke,1/x),ke},c.bu=Gf,c.bv=function(){return new Float64Array(4)},c.bw=function(A,l,u,x){var b=[],E=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],E[0]=b[0]*Math.cos(x)-b[1]*Math.sin(x),E[1]=b[0]*Math.sin(x)+b[1]*Math.cos(x),E[2]=b[2],A[0]=E[0]+u[0],A[1]=E[1]+u[1],A[2]=E[2]+u[2],A},c.bx=function(A,l,u,x){var b=[],E=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],E[0]=b[0],E[1]=b[1]*Math.cos(x)-b[2]*Math.sin(x),E[2]=b[1]*Math.sin(x)+b[2]*Math.cos(x),A[0]=E[0]+u[0],A[1]=E[1]+u[1],A[2]=E[2]+u[2],A},c.by=function(A,l,u,x){var b=[],E=[];return b[0]=l[0]-u[0],b[1]=l[1]-u[1],b[2]=l[2]-u[2],E[0]=b[2]*Math.sin(x)+b[0]*Math.cos(x),E[1]=b[1],E[2]=b[2]*Math.cos(x)-b[0]*Math.sin(x),A[0]=E[0]+u[0],A[1]=E[1]+u[1],A[2]=E[2]+u[2],A},c.bz=function(A,l,u){var x=Math.sin(u),b=Math.cos(u),E=l[0],N=l[1],M=l[2],z=l[3],W=l[8],ie=l[9],ue=l[10],_e=l[11];return l!==A&&(A[4]=l[4],A[5]=l[5],A[6]=l[6],A[7]=l[7],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15]),A[0]=E*b-W*x,A[1]=N*b-ie*x,A[2]=M*b-ue*x,A[3]=z*b-_e*x,A[8]=E*x+W*b,A[9]=N*x+ie*b,A[10]=M*x+ue*b,A[11]=z*x+_e*b,A},c.c=ye,c.c0=class extends oc{},c.c1=em,c.c2=class extends o{},c.c3=Pg,c.c4=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},c.c5=aa,c.c6=function(A,l,u){var x=l[0],b=l[1],E=l[2],N=u[3]*x+u[7]*b+u[11]*E+u[15];return A[0]=(u[0]*x+u[4]*b+u[8]*E+u[12])/(N=N||1),A[1]=(u[1]*x+u[5]*b+u[9]*E+u[13])/N,A[2]=(u[2]*x+u[6]*b+u[10]*E+u[14])/N,A},c.c7=class extends js{},c.c8=class extends V{},c.c9=function(A,l){return A[0]===l[0]&&A[1]===l[1]&&A[2]===l[2]&&A[3]===l[3]&&A[4]===l[4]&&A[5]===l[5]&&A[6]===l[6]&&A[7]===l[7]&&A[8]===l[8]&&A[9]===l[9]&&A[10]===l[10]&&A[11]===l[11]&&A[12]===l[12]&&A[13]===l[13]&&A[14]===l[14]&&A[15]===l[15]},c.cA=function(A,l){Ce.REGISTERED_PROTOCOLS[A]=l},c.cB=function(A){delete Ce.REGISTERED_PROTOCOLS[A]},c.cC=function(A,l){const u={};for(let b=0;b<A.length;b++){const E=l&&l[A[b].id]||Il(A[b]);l&&(l[A[b].id]=E);let N=u[E];N||(N=u[E]=[]),N.push(A[b])}const x=[];for(const b in u)x.push(u[b]);return x},c.cD=qe,c.cE=Px,c.cF=o1,c.cG=ms,c.cH=function(A){A.bucket.createArrays(),A.bucket.tilePixelRatio=Ne/(512*A.bucket.overscaling),A.bucket.compareText={},A.bucket.iconsNeedLinear=!1;const l=A.bucket.layers[0],u=l.layout,x=l._unevaluatedLayout._values,b={layoutIconSize:x["icon-size"].possiblyEvaluate(new Li(A.bucket.zoom+1),A.canonical),layoutTextSize:x["text-size"].possiblyEvaluate(new Li(A.bucket.zoom+1),A.canonical),textMaxSize:x["text-size"].possiblyEvaluate(new Li(18))};if(A.bucket.textSizeData.kind==="composite"){const{minZoom:W,maxZoom:ie}=A.bucket.textSizeData;b.compositeTextSizes=[x["text-size"].possiblyEvaluate(new Li(W),A.canonical),x["text-size"].possiblyEvaluate(new Li(ie),A.canonical)]}if(A.bucket.iconSizeData.kind==="composite"){const{minZoom:W,maxZoom:ie}=A.bucket.iconSizeData;b.compositeIconSizes=[x["icon-size"].possiblyEvaluate(new Li(W),A.canonical),x["icon-size"].possiblyEvaluate(new Li(ie),A.canonical)]}const E=u.get("text-line-height")*Oa,N=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",M=u.get("text-keep-upright"),z=u.get("text-size");for(const W of A.bucket.features){const ie=u.get("text-font").evaluate(W,{},A.canonical).join(","),ue=z.evaluate(W,{},A.canonical),_e=b.layoutTextSize.evaluate(W,{},A.canonical),Se=b.layoutIconSize.evaluate(W,{},A.canonical),ke={horizontal:{},vertical:void 0},Ue=W.text;let et,ht=[0,0];if(Ue){const Bt=Ue.toString(),Zt=u.get("text-letter-spacing").evaluate(W,{},A.canonical)*Oa,nr=mr(Bt)?Zt:0,xr=u.get("text-anchor").evaluate(W,{},A.canonical),Rr=zx(l,W,A.canonical);if(!Rr){const zr=u.get("text-radial-offset").evaluate(W,{},A.canonical);ht=zr?Ox(xr,[zr*Oa,u1]):u.get("text-offset").evaluate(W,{},A.canonical).map(Qr=>Qr*Oa)}let Ir=N?"center":u.get("text-justify").evaluate(W,{},A.canonical);const Ur=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(W,{},A.canonical)*Oa:1/0,Jr=()=>{A.bucket.allowVerticalPlacement&&fr(Bt)&&(ke.vertical=am(Ue,A.glyphMap,A.glyphPositions,A.imagePositions,ie,Ur,E,xr,"left",nr,ht,c.ao.vertical,!0,_e,ue))};if(!N&&Rr){const zr=new Set;if(Ir==="auto")for(let pr=0;pr<Rr.values.length;pr+=2)zr.add(bm(Rr.values[pr]));else zr.add(Ir);let Qr=!1;for(const pr of zr)if(!ke.horizontal[pr])if(Qr)ke.horizontal[pr]=ke.horizontal[0];else{const Si=am(Ue,A.glyphMap,A.glyphPositions,A.imagePositions,ie,Ur,E,"center",pr,nr,ht,c.ao.horizontal,!1,_e,ue);Si&&(ke.horizontal[pr]=Si,Qr=Si.positionedLines.length===1)}Jr()}else{Ir==="auto"&&(Ir=bm(xr));const zr=am(Ue,A.glyphMap,A.glyphPositions,A.imagePositions,ie,Ur,E,xr,Ir,nr,ht,c.ao.horizontal,!1,_e,ue);zr&&(ke.horizontal[Ir]=zr),Jr(),fr(Bt)&&N&&M&&(ke.vertical=am(Ue,A.glyphMap,A.glyphPositions,A.imagePositions,ie,Ur,E,xr,Ir,nr,ht,c.ao.vertical,!1,_e,ue))}}let Lt=!1;if(W.icon&&W.icon.name){const Bt=A.imageMap[W.icon.name];Bt&&(et=e1(A.imagePositions[W.icon.name],u.get("icon-offset").evaluate(W,{},A.canonical),u.get("icon-anchor").evaluate(W,{},A.canonical)),Lt=!!Bt.sdf,A.bucket.sdfIcons===void 0?A.bucket.sdfIcons=Lt:A.bucket.sdfIcons!==Lt&&Pt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Bt.pixelRatio!==A.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(A.bucket.iconsNeedLinear=!0))}const yt=h1(ke.horizontal)||ke.vertical;A.bucket.iconsInText=!!yt&&yt.iconsInText,(yt||et)&&Zf(A.bucket,W,ke,et,A.imageMap,b,_e,Se,ht,Lt,A.canonical,A.subdivisionGranularity)}A.showCollisionBoxes&&A.bucket.generateCollisionDebugBuffers()},c.cI=X0,c.cJ=BA,c.cK=Up,c.cL=Z0,c.cM=Op,c.cN=class{constructor(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let A=performance.getEntriesByName(this._marks.measure);return A.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),A=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),A}},c.cO=function(A,l,u,x,b){return s(this,void 0,void 0,function*(){if(j())try{return yield Lr(A,l,u,x,b)}catch{}return function(E,N,M,z,W){const ie=E.width,ue=E.height;Zr&&qr||(Zr=new OffscreenCanvas(ie,ue),qr=Zr.getContext("2d",{willReadFrequently:!0})),Zr.width=ie,Zr.height=ue,qr.drawImage(E,0,0,ie,ue);const _e=qr.getImageData(N,M,z,W);return qr.clearRect(0,0,ie,ue),_e.data}(A,l,u,x,b)})},c.cP=bh,c.cQ=g,c.cR=wA,c.cS=gn,c.cT=du,c.cU=function(A,l){const u=new Map;if(A!=null)if(A.type==="Feature")u.set($f(A,l),A);else for(const x of A.features)u.set($f(x,l),x);return u},c.cV=function(A,l){if(A==null)return!0;if(A.type==="Feature")return $f(A,l)!=null;if(A.type==="FeatureCollection"){const u=new Set;for(const x of A.features){const b=$f(x,l);if(b==null||u.has(b))return!1;u.add(b)}return!0}return!1},c.cW=function(A,l,u){var x,b,E,N;if(l.removeAll&&A.clear(),l.remove)for(const M of l.remove)A.delete(M);if(l.add)for(const M of l.add){const z=$f(M,u);z!=null&&A.set(z,M)}if(l.update)for(const M of l.update){let z=A.get(M.id);if(z==null)continue;const W=!M.removeAllProperties&&(((x=M.removeProperties)===null||x===void 0?void 0:x.length)>0||((b=M.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((M.newGeometry||M.removeAllProperties||W)&&(z=Object.assign({},z),A.set(M.id,z),W&&(z.properties=Object.assign({},z.properties))),M.newGeometry&&(z.geometry=M.newGeometry),M.removeAllProperties)z.properties={};else if(((E=M.removeProperties)===null||E===void 0?void 0:E.length)>0)for(const ie of M.removeProperties)Object.prototype.hasOwnProperty.call(z.properties,ie)&&delete z.properties[ie];if(((N=M.addOrUpdateProperties)===null||N===void 0?void 0:N.length)>0)for(const{key:ie,value:ue}of M.addOrUpdateProperties)z.properties[ie]=ue}},c.cX=Vr,c.ca=function(A,l){var u=A[0],x=A[1],b=A[2],E=A[3],N=A[4],M=A[5],z=A[6],W=A[7],ie=A[8],ue=A[9],_e=A[10],Se=A[11],ke=A[12],Ue=A[13],et=A[14],ht=A[15],Lt=l[0],yt=l[1],Bt=l[2],Zt=l[3],nr=l[4],xr=l[5],Rr=l[6],Ir=l[7],Ur=l[8],Jr=l[9],zr=l[10],Qr=l[11],pr=l[12],Si=l[13],Pi=l[14],ui=l[15];return Math.abs(u-Lt)<=q*Math.max(1,Math.abs(u),Math.abs(Lt))&&Math.abs(x-yt)<=q*Math.max(1,Math.abs(x),Math.abs(yt))&&Math.abs(b-Bt)<=q*Math.max(1,Math.abs(b),Math.abs(Bt))&&Math.abs(E-Zt)<=q*Math.max(1,Math.abs(E),Math.abs(Zt))&&Math.abs(N-nr)<=q*Math.max(1,Math.abs(N),Math.abs(nr))&&Math.abs(M-xr)<=q*Math.max(1,Math.abs(M),Math.abs(xr))&&Math.abs(z-Rr)<=q*Math.max(1,Math.abs(z),Math.abs(Rr))&&Math.abs(W-Ir)<=q*Math.max(1,Math.abs(W),Math.abs(Ir))&&Math.abs(ie-Ur)<=q*Math.max(1,Math.abs(ie),Math.abs(Ur))&&Math.abs(ue-Jr)<=q*Math.max(1,Math.abs(ue),Math.abs(Jr))&&Math.abs(_e-zr)<=q*Math.max(1,Math.abs(_e),Math.abs(zr))&&Math.abs(Se-Qr)<=q*Math.max(1,Math.abs(Se),Math.abs(Qr))&&Math.abs(ke-pr)<=q*Math.max(1,Math.abs(ke),Math.abs(pr))&&Math.abs(Ue-Si)<=q*Math.max(1,Math.abs(Ue),Math.abs(Si))&&Math.abs(et-Pi)<=q*Math.max(1,Math.abs(et),Math.abs(Pi))&&Math.abs(ht-ui)<=q*Math.max(1,Math.abs(ht),Math.abs(ui))},c.cb=function(A,l){return A[0]=l[0],A[1]=l[1],A[2]=l[2],A[3]=l[3],A[4]=l[4],A[5]=l[5],A[6]=l[6],A[7]=l[7],A[8]=l[8],A[9]=l[9],A[10]=l[10],A[11]=l[11],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15],A},c.cc=A=>A.type==="symbol",c.cd=A=>A.type==="circle",c.ce=A=>A.type==="heatmap",c.cf=A=>A.type==="line",c.cg=A=>A.type==="fill",c.ch=A=>A.type==="fill-extrusion",c.ci=A=>A.type==="hillshade",c.cj=A=>A.type==="color-relief",c.ck=A=>A.type==="background",c.cl=A=>A.type==="custom",c.cm=fe,c.cn=function(A,l,u){const x=$e(l.x-u.x,l.y-u.y),b=$e(A.x-u.x,A.y-u.y);var E,N;return $t(Math.atan2(x[0]*b[1]-x[1]*b[0],(E=x)[0]*(N=b)[0]+E[1]*N[1]))},c.co=be,c.cp=function(A,l){return yr[l]&&(A instanceof MouseEvent||A instanceof WheelEvent)},c.cq=function(A,l){return Ar[l]&&"touches"in A},c.cr=function(A){return Ar[A]||yr[A]},c.cs=function(A,l,u){var x=l[0],b=l[1];return A[0]=u[0]*x+u[4]*b+u[12],A[1]=u[1]*x+u[5]*b+u[13],A},c.ct=function(A,l){const{x:u,y:x}=Kf.fromLngLat(l);return!(A<0||A>25||x<0||x>=1||u<0||u>=1)},c.cu=function(A,l){return A[0]=l[0],A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=l[1],A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=l[2],A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A},c.cv=class extends ra{},c.cw=lb,c.cy=function(A){return A.message===it},c.cz=ot,c.d=xt,c.e=We,c.f=A=>s(void 0,void 0,void 0,function*(){if(A.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(A)],{type:"image/png"});try{return createImageBitmap(l)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=Re,c.h=A=>new Promise((l,u)=>{const x=new Image;x.onload=()=>{l(x),URL.revokeObjectURL(x.src),x.onload=null,window.requestAnimationFrame(()=>{x.src=Wr})},x.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(A)],{type:"image/png"});x.src=A.byteLength?URL.createObjectURL(b):Wr}),c.i=lr,c.j=(A,l)=>Rt(We(A,{type:"json"}),l),c.k=Mr,c.l=qt,c.m=Rt,c.n=(A,l)=>Rt(We(A,{type:"arrayBuffer"}),l),c.o=function(A){return new Op(A).readFields(Cx,[])},c.p=Yg,c.q=nd,c.r=es,c.s=wi,c.t=Vi,c.u=It,c.v=wt,c.w=Pt,c.x=ae,c.y=Ke,c.z=Q}),n("worker",["./shared"],function(c){class s{constructor(ye,Ce){this.keyCache={},ye&&this.replace(ye,Ce)}replace(ye,Ce){this._layerConfigs={},this._layers={},this.update(ye,[],Ce)}update(ye,Ce,Re){for(const ot of ye){this._layerConfigs[ot.id]=ot;const vt=this._layers[ot.id]=c.bJ(ot,Re);vt._featureFilter=c.aa(vt.filter,Re),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(const ot of Ce)delete this.keyCache[ot],delete this._layerConfigs[ot],delete this._layers[ot];this.familiesBySource={};const Ze=c.cC(Object.values(this._layerConfigs),this.keyCache);for(const ot of Ze){const vt=ot.map(Mr=>this._layers[Mr.id]),Rt=vt[0];if(Rt.visibility==="none")continue;const xt=Rt.source||"";let Gt=this.familiesBySource[xt];Gt||(Gt=this.familiesBySource[xt]={});const er=Rt.sourceLayer||"_geojsonTileLayer";let qt=Gt[er];qt||(qt=Gt[er]=[]),qt.push(vt)}}}class p{constructor(ye){const Ce={},Re=[];for(const Rt in ye){const xt=ye[Rt],Gt=Ce[Rt]={};for(const er in xt){const qt=xt[+er];if(!qt||qt.bitmap.width===0||qt.bitmap.height===0)continue;const Mr={x:0,y:0,w:qt.bitmap.width+2,h:qt.bitmap.height+2};Re.push(Mr),Gt[er]={rect:Mr,metrics:qt.metrics}}}const{w:Ze,h:ot}=c.p(Re),vt=new c.q({width:Ze||1,height:ot||1});for(const Rt in ye){const xt=ye[Rt];for(const Gt in xt){const er=xt[+Gt];if(!er||er.bitmap.width===0||er.bitmap.height===0)continue;const qt=Ce[Rt][Gt].rect;c.q.copy(er.bitmap,vt,{x:0,y:0},{x:qt.x+1,y:qt.y+1},er.bitmap)}}this.image=vt,this.positions=Ce}}c.cD("GlyphAtlas",p);class g{constructor(ye){this.tileID=new c.Z(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.uid=ye.uid,this.zoom=ye.zoom,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ye.showCollisionBoxes,this.collectResourceTiming=!!ye.collectResourceTiming,this.returnDependencies=!!ye.returnDependencies,this.promoteId=ye.promoteId,this.inFlightDependencies=[]}parse(ye,Ce,Re,Ze,ot){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=ye,this.collisionBoxArray=new c.a8;const vt=new c.cE(Object.keys(ye.layers).sort()),Rt=new c.cF(this.tileID,this.promoteId);Rt.bucketLayerIDs=[];const xt={},Gt={featureIndex:Rt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Re,subdivisionGranularity:ot},er=Ce.familiesBySource[this.source];for(const gi in er){const dr=ye.layers[gi];if(!dr)continue;dr.version===1&&c.w(`Vector tile source "${this.source}" layer "${gi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const De=vt.encode(gi),lt=[];for(let Ye=0;Ye<dr.length;Ye++){const nt=dr.feature(Ye),Qe=Rt.getId(nt,gi);lt.push({feature:nt,id:Qe,index:Ye,sourceLayerIndex:De})}for(const Ye of er[gi]){const nt=Ye[0];nt.source!==this.source&&c.w(`layer.source = ${nt.source} does not equal this.source = ${this.source}`),nt.minzoom&&this.zoom<Math.floor(nt.minzoom)||nt.maxzoom&&this.zoom>=nt.maxzoom||nt.visibility!=="none"&&(v(Ye,this.zoom,Re),(xt[nt.id]=nt.createBucket({index:Rt.bucketLayerIDs.length,layers:Ye,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:De,sourceID:this.source})).populate(lt,Gt,this.tileID.canonical),Rt.bucketLayerIDs.push(Ye.map(Qe=>Qe.id)))}}const qt=c.bO(Gt.glyphDependencies,gi=>Object.keys(gi).map(Number));this.inFlightDependencies.forEach(gi=>gi?.abort()),this.inFlightDependencies=[];let Mr=Promise.resolve({});if(Object.keys(qt).length){const gi=new AbortController;this.inFlightDependencies.push(gi),Mr=Ze.sendAsync({type:"GG",data:{stacks:qt,source:this.source,tileID:this.tileID,type:"glyphs"}},gi)}const Fr=Object.keys(Gt.iconDependencies);let wt=Promise.resolve({});if(Fr.length){const gi=new AbortController;this.inFlightDependencies.push(gi),wt=Ze.sendAsync({type:"GI",data:{icons:Fr,source:this.source,tileID:this.tileID,type:"icons"}},gi)}const ei=Object.keys(Gt.patternDependencies);let Ji=Promise.resolve({});if(ei.length){const gi=new AbortController;this.inFlightDependencies.push(gi),Ji=Ze.sendAsync({type:"GI",data:{icons:ei,source:this.source,tileID:this.tileID,type:"patterns"}},gi)}const Hr=Gt.dashDependencies;let Ri=Promise.resolve({});if(Object.keys(Hr).length){const gi=new AbortController;this.inFlightDependencies.push(gi),Ri=Ze.sendAsync({type:"GDA",data:{dashes:Hr}},gi)}const[In,Yr,on,$i]=yield Promise.all([Mr,wt,Ji,Ri]),mi=new p(In),ln=new c.cG(Yr,on);for(const gi in xt){const dr=xt[gi];dr instanceof c.a9?(v(dr.layers,this.zoom,Re),c.cH({bucket:dr,glyphMap:In,glyphPositions:mi.positions,imageMap:Yr,imagePositions:ln.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Gt.subdivisionGranularity})):dr.hasDependencies&&(dr instanceof c.cI||dr instanceof c.cJ||dr instanceof c.cK)&&(v(dr.layers,this.zoom,Re),dr.addFeatures(Gt,this.tileID.canonical,ln.patternPositions,$i))}return this.status="done",{buckets:Object.values(xt).filter(gi=>!gi.isEmpty()),featureIndex:Rt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mi.image,imageAtlas:ln,dashPositions:$i,glyphMap:this.returnDependencies?In:null,iconMap:this.returnDependencies?Yr:null,glyphPositions:this.returnDependencies?mi.positions:null}})}}function v(it,ye,Ce){const Re=new c.F(ye);for(const Ze of it)Ze.recalculate(Re,Ce)}class B{constructor(ye,Ce,Re){this.actor=ye,this.layerIndex=Ce,this.availableImages=Re,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ye,Ce){return c._(this,void 0,void 0,function*(){const Re=yield c.n(ye.request,Ce);try{return{vectorTile:new c.cL(new c.cM(Re.data)),rawData:Re.data,cacheControl:Re.cacheControl,expires:Re.expires}}catch(Ze){const ot=new Uint8Array(Re.data);let vt=`Unable to parse the tile at ${ye.request.url}, `;throw vt+=ot[0]===31&&ot[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ze.message}`,new Error(vt)}})}loadTile(ye){return c._(this,void 0,void 0,function*(){const Ce=ye.uid,Re=!!(ye&&ye.request&&ye.request.collectResourceTiming)&&new c.cN(ye.request),Ze=new g(ye);this.loading[Ce]=Ze;const ot=new AbortController;Ze.abort=ot;try{const vt=yield this.loadVectorTile(ye,ot);if(delete this.loading[Ce],!vt)return null;const Rt=vt.rawData,xt={};vt.expires&&(xt.expires=vt.expires),vt.cacheControl&&(xt.cacheControl=vt.cacheControl);const Gt={};if(Re){const qt=Re.finish();qt&&(Gt.resourceTiming=JSON.parse(JSON.stringify(qt)))}Ze.vectorTile=vt.vectorTile;const er=Ze.parse(vt.vectorTile,this.layerIndex,this.availableImages,this.actor,ye.subdivisionGranularity);this.loaded[Ce]=Ze,this.fetching[Ce]={rawTileData:Rt,cacheControl:xt,resourceTiming:Gt};try{const qt=yield er;return c.e({rawTileData:Rt.slice(0)},qt,xt,Gt)}finally{delete this.fetching[Ce]}}catch(vt){throw delete this.loading[Ce],Ze.status="done",this.loaded[Ce]=Ze,vt}})}reloadTile(ye){return c._(this,void 0,void 0,function*(){const Ce=ye.uid;if(!this.loaded||!this.loaded[Ce])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Re=this.loaded[Ce];if(Re.showCollisionBoxes=ye.showCollisionBoxes,Re.status==="parsing"){const Ze=yield Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,ye.subdivisionGranularity);let ot;if(this.fetching[Ce]){const{rawTileData:vt,cacheControl:Rt,resourceTiming:xt}=this.fetching[Ce];delete this.fetching[Ce],ot=c.e({rawTileData:vt.slice(0)},Ze,Rt,xt)}else ot=Ze;return ot}if(Re.status==="done"&&Re.vectorTile)return Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,ye.subdivisionGranularity)})}abortTile(ye){return c._(this,void 0,void 0,function*(){const Ce=this.loading,Re=ye.uid;Ce&&Ce[Re]&&Ce[Re].abort&&(Ce[Re].abort.abort(),delete Ce[Re])})}removeTile(ye){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ye.uid]&&delete this.loaded[ye.uid]})}}class F{constructor(){this.loaded={}}loadTile(ye){return c._(this,void 0,void 0,function*(){const{uid:Ce,encoding:Re,rawImageData:Ze,redFactor:ot,greenFactor:vt,blueFactor:Rt,baseShift:xt}=ye,Gt=Ze.width+2,er=Ze.height+2,qt=c.b(Ze)?new c.R({width:Gt,height:er},yield c.cO(Ze,-1,-1,Gt,er)):Ze,Mr=new c.cP(Ce,qt,Re,ot,vt,Rt,xt);return this.loaded=this.loaded||{},this.loaded[Ce]=Mr,Mr})}removeTile(ye){const Ce=this.loaded,Re=ye.uid;Ce&&Ce[Re]&&delete Ce[Re]}}var C,L,P=function(){if(L)return C;function it(Ce,Re){if(Ce.length!==0){ye(Ce[0],Re);for(var Ze=1;Ze<Ce.length;Ze++)ye(Ce[Ze],!Re)}}function ye(Ce,Re){for(var Ze=0,ot=0,vt=0,Rt=Ce.length,xt=Rt-1;vt<Rt;xt=vt++){var Gt=(Ce[vt][0]-Ce[xt][0])*(Ce[xt][1]+Ce[vt][1]),er=Ze+Gt;ot+=Math.abs(Ze)>=Math.abs(Gt)?Ze-er+Gt:Gt-er+Ze,Ze=er}Ze+ot>=0!=!!Re&&Ce.reverse()}return L=1,C=function Ce(Re,Ze){var ot,vt=Re&&Re.type;if(vt==="FeatureCollection")for(ot=0;ot<Re.features.length;ot++)Ce(Re.features[ot],Ze);else if(vt==="GeometryCollection")for(ot=0;ot<Re.geometries.length;ot++)Ce(Re.geometries[ot],Ze);else if(vt==="Feature")Ce(Re.geometry,Ze);else if(vt==="Polygon")it(Re.coordinates,Ze);else if(vt==="MultiPolygon")for(ot=0;ot<Re.coordinates.length;ot++)it(Re.coordinates[ot],Ze);return Re}}(),D=c.cQ(P);class j extends c.cS{constructor(ye,Ce){super(new c.cM,0,Ce,[],[]),this.feature=ye,this.type=ye.type,this.properties=ye.tags?ye.tags:{},"id"in ye&&(typeof ye.id=="string"?this.id=parseInt(ye.id,10):typeof ye.id!="number"||isNaN(ye.id)||(this.id=ye.id))}loadGeometry(){const ye=[],Ce=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const Re of Ce){const Ze=[];for(const ot of Re)Ze.push(new c.P(ot[0],ot[1]));ye.push(Ze)}return ye}}class q extends c.cR{constructor(ye,Ce){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=Ce?Ce.version:1,this.extent=Ce?Ce.extent:4096,this.length=ye.length,this.features=ye}feature(ye){return new j(this.features[ye],this.extent)}}function H(it,ye){ye.writeVarintField(15,it.version||1),ye.writeStringField(1,it.name||""),ye.writeVarintField(5,it.extent||4096);const Ce={keys:[],values:[],keycache:{},valuecache:{}};for(let ot=0;ot<it.length;ot++)Ce.feature=it.feature(ot),ye.writeMessage(2,ee,Ce);const Re=Ce.keys;for(const ot of Re)ye.writeStringField(3,ot);const Ze=Ce.values;for(const ot of Ze)ye.writeMessage(4,J,ot)}function ee(it,ye){if(!it.feature)return;const Ce=it.feature;Ce.id!==void 0&&ye.writeVarintField(1,Ce.id),ye.writeMessage(2,G,it),ye.writeVarintField(3,Ce.type),ye.writeMessage(4,le,Ce)}function G(it,ye){for(const Ce in it.feature?.properties){let Re=it.feature.properties[Ce],Ze=it.keycache[Ce];if(Re===null)continue;Ze===void 0&&(it.keys.push(Ce),Ze=it.keys.length-1,it.keycache[Ce]=Ze),ye.writeVarint(Ze),typeof Re!="string"&&typeof Re!="boolean"&&typeof Re!="number"&&(Re=JSON.stringify(Re));const ot=typeof Re+":"+Re;let vt=it.valuecache[ot];vt===void 0&&(it.values.push(Re),vt=it.values.length-1,it.valuecache[ot]=vt),ye.writeVarint(vt)}}function ne(it,ye){return(ye<<3)+(7&it)}function Z(it){return it<<1^it>>31}function le(it,ye){const Ce=it.loadGeometry(),Re=it.type;let Ze=0,ot=0;for(const vt of Ce){let Rt=1;Re===1&&(Rt=vt.length),ye.writeVarint(ne(1,Rt));const xt=Re===3?vt.length-1:vt.length;for(let Gt=0;Gt<xt;Gt++){Gt===1&&Re!==1&&ye.writeVarint(ne(2,xt-1));const er=vt[Gt].x-Ze,qt=vt[Gt].y-ot;ye.writeVarint(Z(er)),ye.writeVarint(Z(qt)),Ze+=er,ot+=qt}it.type===3&&ye.writeVarint(ne(7,1))}}function J(it,ye){const Ce=typeof it;Ce==="string"?ye.writeStringField(1,it):Ce==="boolean"?ye.writeBooleanField(7,it):Ce==="number"&&(it%1!=0?ye.writeDoubleField(3,it):it<0?ye.writeSVarintField(6,it):ye.writeVarintField(5,it))}const ce={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:it=>it},te=Math.fround||(K=new Float32Array(1),it=>(K[0]=+it,K[0]));var K;class me{constructor(ye){this.options=Object.assign(Object.create(ce),ye),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ye){const{log:Ce,minZoom:Re,maxZoom:Ze}=this.options;Ce&&console.time("total time");const ot=`prepare ${ye.length} points`;Ce&&console.time(ot),this.points=ye;const vt=[];for(let xt=0;xt<ye.length;xt++){const Gt=ye[xt];if(!Gt.geometry)continue;const[er,qt]=Gt.geometry.coordinates,Mr=te(he(er)),Fr=te(Le(qt));vt.push(Mr,Fr,1/0,xt,-1,1),this.options.reduce&&vt.push(0)}let Rt=this.trees[Ze+1]=this._createTree(vt);Ce&&console.timeEnd(ot);for(let xt=Ze;xt>=Re;xt--){const Gt=+Date.now();Rt=this.trees[xt]=this._createTree(this._cluster(Rt,xt)),Ce&&console.log("z%d: %d clusters in %dms",xt,Rt.numItems,+Date.now()-Gt)}return Ce&&console.timeEnd("total time"),this}getClusters(ye,Ce){let Re=((ye[0]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,ye[1]));let ot=ye[2]===180?180:((ye[2]+180)%360+360)%360-180;const vt=Math.max(-90,Math.min(90,ye[3]));if(ye[2]-ye[0]>=360)Re=-180,ot=180;else if(Re>ot){const qt=this.getClusters([Re,Ze,180,vt],Ce),Mr=this.getClusters([-180,Ze,ot,vt],Ce);return qt.concat(Mr)}const Rt=this.trees[this._limitZoom(Ce)],xt=Rt.range(he(Re),Le(vt),he(ot),Le(Ze)),Gt=Rt.data,er=[];for(const qt of xt){const Mr=this.stride*qt;er.push(Gt[Mr+5]>1?we(Gt,Mr,this.clusterProps):this.points[Gt[Mr+3]])}return er}getChildren(ye){const Ce=this._getOriginId(ye),Re=this._getOriginZoom(ye),Ze="No cluster with the specified id.",ot=this.trees[Re];if(!ot)throw new Error(Ze);const vt=ot.data;if(Ce*this.stride>=vt.length)throw new Error(Ze);const Rt=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),xt=ot.within(vt[Ce*this.stride],vt[Ce*this.stride+1],Rt),Gt=[];for(const er of xt){const qt=er*this.stride;vt[qt+4]===ye&&Gt.push(vt[qt+5]>1?we(vt,qt,this.clusterProps):this.points[vt[qt+3]])}if(Gt.length===0)throw new Error(Ze);return Gt}getLeaves(ye,Ce,Re){const Ze=[];return this._appendLeaves(Ze,ye,Ce=Ce||10,Re=Re||0,0),Ze}getTile(ye,Ce,Re){const Ze=this.trees[this._limitZoom(ye)],ot=Math.pow(2,ye),{extent:vt,radius:Rt}=this.options,xt=Rt/vt,Gt=(Re-xt)/ot,er=(Re+1+xt)/ot,qt={features:[]};return this._addTileFeatures(Ze.range((Ce-xt)/ot,Gt,(Ce+1+xt)/ot,er),Ze.data,Ce,Re,ot,qt),Ce===0&&this._addTileFeatures(Ze.range(1-xt/ot,Gt,1,er),Ze.data,ot,Re,ot,qt),Ce===ot-1&&this._addTileFeatures(Ze.range(0,Gt,xt/ot,er),Ze.data,-1,Re,ot,qt),qt.features.length?qt:null}getClusterExpansionZoom(ye){let Ce=this._getOriginZoom(ye)-1;for(;Ce<=this.options.maxZoom;){const Re=this.getChildren(ye);if(Ce++,Re.length!==1)break;ye=Re[0].properties.cluster_id}return Ce}_appendLeaves(ye,Ce,Re,Ze,ot){const vt=this.getChildren(Ce);for(const Rt of vt){const xt=Rt.properties;if(xt&&xt.cluster?ot+xt.point_count<=Ze?ot+=xt.point_count:ot=this._appendLeaves(ye,xt.cluster_id,Re,Ze,ot):ot<Ze?ot++:ye.push(Rt),ye.length===Re)break}return ot}_createTree(ye){const Ce=new c.aI(ye.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Re=0;Re<ye.length;Re+=this.stride)Ce.add(ye[Re],ye[Re+1]);return Ce.finish(),Ce.data=ye,Ce}_addTileFeatures(ye,Ce,Re,Ze,ot,vt){for(const Rt of ye){const xt=Rt*this.stride,Gt=Ce[xt+5]>1;let er,qt,Mr;if(Gt)er=Fe(Ce,xt,this.clusterProps),qt=Ce[xt],Mr=Ce[xt+1];else{const ei=this.points[Ce[xt+3]];er=ei.properties;const[Ji,Hr]=ei.geometry.coordinates;qt=he(Ji),Mr=Le(Hr)}const Fr={type:1,geometry:[[Math.round(this.options.extent*(qt*ot-Re)),Math.round(this.options.extent*(Mr*ot-Ze))]],tags:er};let wt;wt=Gt||this.options.generateId?Ce[xt+3]:this.points[Ce[xt+3]].id,wt!==void 0&&(Fr.id=wt),vt.features.push(Fr)}}_limitZoom(ye){return Math.max(this.options.minZoom,Math.min(Math.floor(+ye),this.options.maxZoom+1))}_cluster(ye,Ce){const{radius:Re,extent:Ze,reduce:ot,minPoints:vt}=this.options,Rt=Re/(Ze*Math.pow(2,Ce)),xt=ye.data,Gt=[],er=this.stride;for(let qt=0;qt<xt.length;qt+=er){if(xt[qt+2]<=Ce)continue;xt[qt+2]=Ce;const Mr=xt[qt],Fr=xt[qt+1],wt=ye.within(xt[qt],xt[qt+1],Rt),ei=xt[qt+5];let Ji=ei;for(const Hr of wt){const Ri=Hr*er;xt[Ri+2]>Ce&&(Ji+=xt[Ri+5])}if(Ji>ei&&Ji>=vt){let Hr,Ri=Mr*ei,In=Fr*ei,Yr=-1;const on=(qt/er<<5)+(Ce+1)+this.points.length;for(const $i of wt){const mi=$i*er;if(xt[mi+2]<=Ce)continue;xt[mi+2]=Ce;const ln=xt[mi+5];Ri+=xt[mi]*ln,In+=xt[mi+1]*ln,xt[mi+4]=on,ot&&(Hr||(Hr=this._map(xt,qt,!0),Yr=this.clusterProps.length,this.clusterProps.push(Hr)),ot(Hr,this._map(xt,mi)))}xt[qt+4]=on,Gt.push(Ri/Ji,In/Ji,1/0,on,-1,Ji),ot&&Gt.push(Yr)}else{for(let Hr=0;Hr<er;Hr++)Gt.push(xt[qt+Hr]);if(Ji>1)for(const Hr of wt){const Ri=Hr*er;if(!(xt[Ri+2]<=Ce)){xt[Ri+2]=Ce;for(let In=0;In<er;In++)Gt.push(xt[Ri+In])}}}}return Gt}_getOriginId(ye){return ye-this.points.length>>5}_getOriginZoom(ye){return(ye-this.points.length)%32}_map(ye,Ce,Re){if(ye[Ce+5]>1){const vt=this.clusterProps[ye[Ce+6]];return Re?Object.assign({},vt):vt}const Ze=this.points[ye[Ce+3]].properties,ot=this.options.map(Ze);return Re&&ot===Ze?Object.assign({},ot):ot}}function we(it,ye,Ce){return{type:"Feature",id:it[ye+3],properties:Fe(it,ye,Ce),geometry:{type:"Point",coordinates:[(Re=it[ye],360*(Re-.5)),$e(it[ye+1])]}};var Re}function Fe(it,ye,Ce){const Re=it[ye+5],Ze=Re>=1e4?`${Math.round(Re/1e3)}k`:Re>=1e3?Math.round(Re/100)/10+"k":Re,ot=it[ye+6],vt=ot===-1?{}:Object.assign({},Ce[ot]);return Object.assign(vt,{cluster:!0,cluster_id:it[ye+3],point_count:Re,point_count_abbreviated:Ze})}function he(it){return it/360+.5}function Le(it){const ye=Math.sin(it*Math.PI/180),Ce=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function $e(it){const ye=(180-360*it)*Math.PI/180;return 360*Math.atan(Math.exp(ye))/Math.PI-90}function Ne(it,ye,Ce,Re){let Ze=Re;const ot=ye+(Ce-ye>>1);let vt,Rt=Ce-ye;const xt=it[ye],Gt=it[ye+1],er=it[Ce],qt=it[Ce+1];for(let Mr=ye+3;Mr<Ce;Mr+=3){const Fr=Te(it[Mr],it[Mr+1],xt,Gt,er,qt);if(Fr>Ze)vt=Mr,Ze=Fr;else if(Fr===Ze){const wt=Math.abs(Mr-ot);wt<Rt&&(vt=Mr,Rt=wt)}}Ze>Re&&(vt-ye>3&&Ne(it,ye,vt,Re),it[vt+2]=Ze,Ce-vt>3&&Ne(it,vt,Ce,Re))}function Te(it,ye,Ce,Re,Ze,ot){let vt=Ze-Ce,Rt=ot-Re;if(vt!==0||Rt!==0){const xt=((it-Ce)*vt+(ye-Re)*Rt)/(vt*vt+Rt*Rt);xt>1?(Ce=Ze,Re=ot):xt>0&&(Ce+=vt*xt,Re+=Rt*xt)}return vt=it-Ce,Rt=ye-Re,vt*vt+Rt*Rt}function Ge(it,ye,Ce,Re){const Ze={id:it??null,type:ye,geometry:Ce,tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Y(Ze,Ce);else if(ye==="Polygon")Y(Ze,Ce[0]);else if(ye==="MultiLineString")for(const ot of Ce)Y(Ze,ot);else if(ye==="MultiPolygon")for(const ot of Ce)Y(Ze,ot[0]);return Ze}function Y(it,ye){for(let Ce=0;Ce<ye.length;Ce+=3)it.minX=Math.min(it.minX,ye[Ce]),it.minY=Math.min(it.minY,ye[Ce+1]),it.maxX=Math.max(it.maxX,ye[Ce]),it.maxY=Math.max(it.maxY,ye[Ce+1])}function Ae(it,ye,Ce,Re){if(!ye.geometry)return;const Ze=ye.geometry.coordinates;if(Ze&&Ze.length===0)return;const ot=ye.geometry.type,vt=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2);let Rt=[],xt=ye.id;if(Ce.promoteId?xt=ye.properties[Ce.promoteId]:Ce.generateId&&(xt=Re||0),ot==="Point")fe(Ze,Rt);else if(ot==="MultiPoint")for(const Gt of Ze)fe(Gt,Rt);else if(ot==="LineString")be(Ze,Rt,vt,!1);else if(ot==="MultiLineString"){if(Ce.lineMetrics){for(const Gt of Ze)Rt=[],be(Gt,Rt,vt,!1),it.push(Ge(xt,"LineString",Rt,ye.properties));return}Me(Ze,Rt,vt,!1)}else if(ot==="Polygon")Me(Ze,Rt,vt,!0);else{if(ot!=="MultiPolygon"){if(ot==="GeometryCollection"){for(const Gt of ye.geometry.geometries)Ae(it,{id:xt,geometry:Gt,properties:ye.properties},Ce,Re);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Gt of Ze){const er=[];Me(Gt,er,vt,!0),Rt.push(er)}}it.push(Ge(xt,ot,Rt,ye.properties))}function fe(it,ye){ye.push(ze(it[0]),We(it[1]),0)}function be(it,ye,Ce,Re){let Ze,ot,vt=0;for(let xt=0;xt<it.length;xt++){const Gt=ze(it[xt][0]),er=We(it[xt][1]);ye.push(Gt,er,0),xt>0&&(vt+=Re?(Ze*er-Gt*ot)/2:Math.sqrt(Math.pow(Gt-Ze,2)+Math.pow(er-ot,2))),Ze=Gt,ot=er}const Rt=ye.length-3;ye[2]=1,Ne(ye,0,Rt,Ce),ye[Rt+2]=1,ye.size=Math.abs(vt),ye.start=0,ye.end=ye.size}function Me(it,ye,Ce,Re){for(let Ze=0;Ze<it.length;Ze++){const ot=[];be(it[Ze],ot,Ce,Re),ye.push(ot)}}function ze(it){return it/360+.5}function We(it){const ye=Math.sin(it*Math.PI/180),Ce=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function ut(it,ye,Ce,Re,Ze,ot,vt,Rt){if(Re/=ye,ot>=(Ce/=ye)&&vt<Re)return it;if(vt<Ce||ot>=Re)return null;const xt=[];for(const Gt of it){const er=Gt.geometry;let qt=Gt.type;const Mr=Ze===0?Gt.minX:Gt.minY,Fr=Ze===0?Gt.maxX:Gt.maxY;if(Mr>=Ce&&Fr<Re){xt.push(Gt);continue}if(Fr<Ce||Mr>=Re)continue;let wt=[];if(qt==="Point"||qt==="MultiPoint")dt(er,wt,Ce,Re,Ze);else if(qt==="LineString")zt(er,wt,Ce,Re,Ze,!1,Rt.lineMetrics);else if(qt==="MultiLineString")Ct(er,wt,Ce,Re,Ze,!1);else if(qt==="Polygon")Ct(er,wt,Ce,Re,Ze,!0);else if(qt==="MultiPolygon")for(const ei of er){const Ji=[];Ct(ei,Ji,Ce,Re,Ze,!0),Ji.length&&wt.push(Ji)}if(wt.length){if(Rt.lineMetrics&&qt==="LineString"){for(const ei of wt)xt.push(Ge(Gt.id,qt,ei,Gt.tags));continue}qt!=="LineString"&&qt!=="MultiLineString"||(wt.length===1?(qt="LineString",wt=wt[0]):qt="MultiLineString"),qt!=="Point"&&qt!=="MultiPoint"||(qt=wt.length===3?"Point":"MultiPoint"),xt.push(Ge(Gt.id,qt,wt,Gt.tags))}}return xt.length?xt:null}function dt(it,ye,Ce,Re,Ze){for(let ot=0;ot<it.length;ot+=3){const vt=it[ot+Ze];vt>=Ce&&vt<=Re&&Pt(ye,it[ot],it[ot+1],it[ot+2])}}function zt(it,ye,Ce,Re,Ze,ot,vt){let Rt=ve(it);const xt=Ze===0?Ve:lr;let Gt,er,qt=it.start;for(let Ji=0;Ji<it.length-3;Ji+=3){const Hr=it[Ji],Ri=it[Ji+1],In=it[Ji+2],Yr=it[Ji+3],on=it[Ji+4],$i=Ze===0?Hr:Ri,mi=Ze===0?Yr:on;let ln=!1;vt&&(Gt=Math.sqrt(Math.pow(Hr-Yr,2)+Math.pow(Ri-on,2))),$i<Ce?mi>Ce&&(er=xt(Rt,Hr,Ri,Yr,on,Ce),vt&&(Rt.start=qt+Gt*er)):$i>Re?mi<Re&&(er=xt(Rt,Hr,Ri,Yr,on,Re),vt&&(Rt.start=qt+Gt*er)):Pt(Rt,Hr,Ri,In),mi<Ce&&$i>=Ce&&(er=xt(Rt,Hr,Ri,Yr,on,Ce),ln=!0),mi>Re&&$i<=Re&&(er=xt(Rt,Hr,Ri,Yr,on,Re),ln=!0),!ot&&ln&&(vt&&(Rt.end=qt+Gt*er),ye.push(Rt),Rt=ve(it)),vt&&(qt+=Gt)}let Mr=it.length-3;const Fr=it[Mr],wt=it[Mr+1],ei=Ze===0?Fr:wt;ei>=Ce&&ei<=Re&&Pt(Rt,Fr,wt,it[Mr+2]),Mr=Rt.length-3,ot&&Mr>=3&&(Rt[Mr]!==Rt[0]||Rt[Mr+1]!==Rt[1])&&Pt(Rt,Rt[0],Rt[1],Rt[2]),Rt.length&&ye.push(Rt)}function ve(it){const ye=[];return ye.size=it.size,ye.start=it.start,ye.end=it.end,ye}function Ct(it,ye,Ce,Re,Ze,ot){for(const vt of it)zt(vt,ye,Ce,Re,Ze,ot,!1)}function Pt(it,ye,Ce,Re){it.push(ye,Ce,Re)}function Ve(it,ye,Ce,Re,Ze,ot){const vt=(ot-ye)/(Re-ye);return Pt(it,ot,Ce+(Ze-Ce)*vt,1),vt}function lr(it,ye,Ce,Re,Ze,ot){const vt=(ot-Ce)/(Ze-Ce);return Pt(it,ye+(Re-ye)*vt,ot,1),vt}function ir(it,ye){const Ce=[];for(let Re=0;Re<it.length;Re++){const Ze=it[Re],ot=Ze.type;let vt;if(ot==="Point"||ot==="MultiPoint"||ot==="LineString")vt=jr(Ze.geometry,ye);else if(ot==="MultiLineString"||ot==="Polygon"){vt=[];for(const Rt of Ze.geometry)vt.push(jr(Rt,ye))}else if(ot==="MultiPolygon"){vt=[];for(const Rt of Ze.geometry){const xt=[];for(const Gt of Rt)xt.push(jr(Gt,ye));vt.push(xt)}}Ce.push(Ge(Ze.id,ot,vt,Ze.tags))}return Ce}function jr(it,ye){const Ce=[];Ce.size=it.size,it.start!==void 0&&(Ce.start=it.start,Ce.end=it.end);for(let Re=0;Re<it.length;Re+=3)Ce.push(it[Re]+ye,it[Re+1],it[Re+2]);return Ce}function ar(it,ye){if(it.transformed)return it;const Ce=1<<it.z,Re=it.x,Ze=it.y;for(const ot of it.features){const vt=ot.geometry,Rt=ot.type;if(ot.geometry=[],Rt===1)for(let xt=0;xt<vt.length;xt+=2)ot.geometry.push(Wr(vt[xt],vt[xt+1],ye,Ce,Re,Ze));else for(let xt=0;xt<vt.length;xt++){const Gt=[];for(let er=0;er<vt[xt].length;er+=2)Gt.push(Wr(vt[xt][er],vt[xt][er+1],ye,Ce,Re,Ze));ot.geometry.push(Gt)}}return it.transformed=!0,it}function Wr(it,ye,Ce,Re,Ze,ot){return[Math.round(Ce*(it*Re-Ze)),Math.round(Ce*(ye*Re-ot))]}function Lr(it,ye,Ce,Re,Ze){const ot=ye===Ze.maxZoom?0:Ze.tolerance/((1<<ye)*Ze.extent),vt={features:[],numPoints:0,numSimplified:0,numFeatures:it.length,source:null,x:Ce,y:Re,z:ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Rt of it)Zr(vt,Rt,ot,Ze);return vt}function Zr(it,ye,Ce,Re){const Ze=ye.geometry,ot=ye.type,vt=[];if(it.minX=Math.min(it.minX,ye.minX),it.minY=Math.min(it.minY,ye.minY),it.maxX=Math.max(it.maxX,ye.maxX),it.maxY=Math.max(it.maxY,ye.maxY),ot==="Point"||ot==="MultiPoint")for(let Rt=0;Rt<Ze.length;Rt+=3)vt.push(Ze[Rt],Ze[Rt+1]),it.numPoints++,it.numSimplified++;else if(ot==="LineString")qr(vt,Ze,it,Ce,!1,!1);else if(ot==="MultiLineString"||ot==="Polygon")for(let Rt=0;Rt<Ze.length;Rt++)qr(vt,Ze[Rt],it,Ce,ot==="Polygon",Rt===0);else if(ot==="MultiPolygon")for(let Rt=0;Rt<Ze.length;Rt++){const xt=Ze[Rt];for(let Gt=0;Gt<xt.length;Gt++)qr(vt,xt[Gt],it,Ce,!0,Gt===0)}if(vt.length){let Rt=ye.tags||null;if(ot==="LineString"&&Re.lineMetrics){Rt={};for(const Gt in ye.tags)Rt[Gt]=ye.tags[Gt];Rt.mapbox_clip_start=Ze.start/Ze.size,Rt.mapbox_clip_end=Ze.end/Ze.size}const xt={geometry:vt,type:ot==="Polygon"||ot==="MultiPolygon"?3:ot==="LineString"||ot==="MultiLineString"?2:1,tags:Rt};ye.id!==null&&(xt.id=ye.id),it.features.push(xt)}}function qr(it,ye,Ce,Re,Ze,ot){const vt=Re*Re;if(Re>0&&ye.size<(Ze?vt:Re))return void(Ce.numPoints+=ye.length/3);const Rt=[];for(let xt=0;xt<ye.length;xt+=3)(Re===0||ye[xt+2]>vt)&&(Ce.numSimplified++,Rt.push(ye[xt],ye[xt+1])),Ce.numPoints++;Ze&&function(xt,Gt){let er=0;for(let qt=0,Mr=xt.length,Fr=Mr-2;qt<Mr;Fr=qt,qt+=2)er+=(xt[qt]-xt[Fr])*(xt[qt+1]+xt[Fr+1]);if(er>0===Gt)for(let qt=0,Mr=xt.length;qt<Mr/2;qt+=2){const Fr=xt[qt],wt=xt[qt+1];xt[qt]=xt[Mr-2-qt],xt[qt+1]=xt[Mr-1-qt],xt[Mr-2-qt]=Fr,xt[Mr-1-qt]=wt}}(Rt,ot),it.push(Rt)}const wi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ci{constructor(ye,Ce){const Re=(Ce=this.options=function(ot,vt){for(const Rt in vt)ot[Rt]=vt[Rt];return ot}(Object.create(wi),Ce)).debug;if(Re&&console.time("preprocess data"),Ce.maxZoom<0||Ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ce.promoteId&&Ce.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ze=function(ot,vt){const Rt=[];if(ot.type==="FeatureCollection")for(let xt=0;xt<ot.features.length;xt++)Ae(Rt,ot.features[xt],vt,xt);else Ae(Rt,ot.type==="Feature"?ot:{geometry:ot},vt);return Rt}(ye,Ce);this.tiles={},this.tileCoords=[],Re&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ce.indexMaxZoom,Ce.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ze=function(ot,vt){const Rt=vt.buffer/vt.extent;let xt=ot;const Gt=ut(ot,1,-1-Rt,Rt,0,-1,2,vt),er=ut(ot,1,1-Rt,2+Rt,0,-1,2,vt);return(Gt||er)&&(xt=ut(ot,1,-Rt,1+Rt,0,-1,2,vt)||[],Gt&&(xt=ir(Gt,1).concat(xt)),er&&(xt=xt.concat(ir(er,-1)))),xt}(Ze,Ce),Ze.length&&this.splitTile(Ze,0,0,0),Re&&(Ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ye,Ce,Re,Ze,ot,vt,Rt){const xt=[ye,Ce,Re,Ze],Gt=this.options,er=Gt.debug;for(;xt.length;){Ze=xt.pop(),Re=xt.pop(),Ce=xt.pop(),ye=xt.pop();const qt=1<<Ce,Mr=$t(Ce,Re,Ze);let Fr=this.tiles[Mr];if(!Fr&&(er>1&&console.time("creation"),Fr=this.tiles[Mr]=Lr(ye,Ce,Re,Ze,Gt),this.tileCoords.push({z:Ce,x:Re,y:Ze}),er)){er>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ce,Re,Ze,Fr.numFeatures,Fr.numPoints,Fr.numSimplified),console.timeEnd("creation"));const ln=`z${Ce}`;this.stats[ln]=(this.stats[ln]||0)+1,this.total++}if(Fr.source=ye,ot==null){if(Ce===Gt.indexMaxZoom||Fr.numPoints<=Gt.indexMaxPoints)continue}else{if(Ce===Gt.maxZoom||Ce===ot)continue;if(ot!=null){const ln=ot-Ce;if(Re!==vt>>ln||Ze!==Rt>>ln)continue}}if(Fr.source=null,ye.length===0)continue;er>1&&console.time("clipping");const wt=.5*Gt.buffer/Gt.extent,ei=.5-wt,Ji=.5+wt,Hr=1+wt;let Ri=null,In=null,Yr=null,on=null,$i=ut(ye,qt,Re-wt,Re+Ji,0,Fr.minX,Fr.maxX,Gt),mi=ut(ye,qt,Re+ei,Re+Hr,0,Fr.minX,Fr.maxX,Gt);ye=null,$i&&(Ri=ut($i,qt,Ze-wt,Ze+Ji,1,Fr.minY,Fr.maxY,Gt),In=ut($i,qt,Ze+ei,Ze+Hr,1,Fr.minY,Fr.maxY,Gt),$i=null),mi&&(Yr=ut(mi,qt,Ze-wt,Ze+Ji,1,Fr.minY,Fr.maxY,Gt),on=ut(mi,qt,Ze+ei,Ze+Hr,1,Fr.minY,Fr.maxY,Gt),mi=null),er>1&&console.timeEnd("clipping"),xt.push(Ri||[],Ce+1,2*Re,2*Ze),xt.push(In||[],Ce+1,2*Re,2*Ze+1),xt.push(Yr||[],Ce+1,2*Re+1,2*Ze),xt.push(on||[],Ce+1,2*Re+1,2*Ze+1)}}getTile(ye,Ce,Re){ye=+ye,Ce=+Ce,Re=+Re;const Ze=this.options,{extent:ot,debug:vt}=Ze;if(ye<0||ye>24)return null;const Rt=1<<ye,xt=$t(ye,Ce=Ce+Rt&Rt-1,Re);if(this.tiles[xt])return ar(this.tiles[xt],ot);vt>1&&console.log("drilling down to z%d-%d-%d",ye,Ce,Re);let Gt,er=ye,qt=Ce,Mr=Re;for(;!Gt&&er>0;)er--,qt>>=1,Mr>>=1,Gt=this.tiles[$t(er,qt,Mr)];return Gt&&Gt.source?(vt>1&&(console.log("found parent tile z%d-%d-%d",er,qt,Mr),console.time("drilling down")),this.splitTile(Gt.source,er,qt,Mr,ye,Ce,Re),vt>1&&console.timeEnd("drilling down"),this.tiles[xt]?ar(this.tiles[xt],ot):null):null}}function $t(it,ye,Ce){return 32*((1<<it)*Ce+ye)+it}class Ar extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ye,Ce){return c._(this,void 0,void 0,function*(){const Re=ye.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ze=this._geoJSONIndex.getTile(Re.z,Re.x,Re.y);if(!Ze)return null;const ot=new q(Ze.features,{version:2,extent:c.$});let vt=function(Rt){const xt=new c.cM;return function(Gt,er){for(const qt in Gt.layers)er.writeMessage(3,H,Gt.layers[qt])}(Rt,xt),xt.finish()}(ot);return vt.byteOffset===0&&vt.byteLength===vt.buffer.byteLength||(vt=new Uint8Array(vt)),{vectorTile:ot,rawData:vt.buffer}})}loadData(ye){return c._(this,void 0,void 0,function*(){var Ce;(Ce=this._pendingRequest)===null||Ce===void 0||Ce.abort();const Re=!!(ye&&ye.request&&ye.request.collectResourceTiming)&&new c.cN(ye.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ye,this._pendingRequest);const Ze=yield this._pendingData;this._geoJSONIndex=ye.cluster?new me(function({superclusterOptions:vt,clusterProperties:Rt}){if(!Rt||!vt)return vt;const xt={},Gt={},er={accumulated:null,zoom:0},qt={properties:null},Mr=Object.keys(Rt);for(const Fr of Mr){const[wt,ei]=Rt[Fr],Ji=c.cT(ei),Hr=c.cT(typeof wt=="string"?[wt,["accumulated"],["get",Fr]]:wt);xt[Fr]=Ji.value,Gt[Fr]=Hr.value}return vt.map=Fr=>{qt.properties=Fr;const wt={};for(const ei of Mr)wt[ei]=xt[ei].evaluate(er,qt);return wt},vt.reduce=(Fr,wt)=>{qt.properties=wt;for(const ei of Mr)er.accumulated=Fr[ei],Fr[ei]=Gt[ei].evaluate(er,qt)},vt}(ye)).load(Ze.features):function(vt,Rt){return new Ci(vt,Rt)}(Ze,ye.geojsonVtOptions),this.loaded={};const ot={data:Ze};if(Re){const vt=Re.finish();vt&&(ot.resourceTiming={},ot.resourceTiming[ye.source]=JSON.parse(JSON.stringify(vt)))}return ot}catch(Ze){if(delete this._pendingRequest,c.cy(Ze))return{abandoned:!0};throw Ze}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ye){const Ce=this.loaded;return Ce&&Ce[ye.uid]?super.reloadTile(ye):this.loadTile(ye)}loadAndProcessGeoJSON(ye,Ce){return c._(this,void 0,void 0,function*(){let Re=yield this.loadGeoJSON(ye,Ce);if(delete this._pendingRequest,typeof Re!="object")throw new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`);if(D(Re,!0),ye.filter){const Ze=c.cT(ye.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ze.result==="error")throw new Error(Ze.value.map(vt=>`${vt.key}: ${vt.message}`).join(", "));Re={type:"FeatureCollection",features:Re.features.filter(vt=>Ze.value.evaluate({zoom:0},vt))}}return Re})}loadGeoJSON(ye,Ce){return c._(this,void 0,void 0,function*(){const{promoteId:Re}=ye;if(ye.request){const Ze=yield c.j(ye.request,Ce);return this._dataUpdateable=c.cV(Ze.data,Re)?c.cU(Ze.data,Re):void 0,Ze.data}if(typeof ye.data=="string")try{const Ze=JSON.parse(ye.data);return this._dataUpdateable=c.cV(Ze,Re)?c.cU(Ze,Re):void 0,Ze}catch{throw new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`)}if(!ye.dataDiff)throw new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ye.source}`);return c.cW(this._dataUpdateable,ye.dataDiff,Re),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ye){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ye){return this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId)}getClusterChildren(ye){return this._geoJSONIndex.getChildren(ye.clusterId)}getClusterLeaves(ye){return this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset)}}class yr{constructor(ye){this.self=ye,this.actor=new c.J(ye),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(Ce,Re)=>{if(this.externalWorkerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.externalWorkerSourceTypes[Ce]=Re},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=Ce=>{c.cX.setMethods(Ce)},this.actor.registerMessageHandler("LDT",(Ce,Re)=>this._getDEMWorkerSource(Ce,Re.source).loadTile(Re)),this.actor.registerMessageHandler("RDT",(Ce,Re)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Ce,Re.source).removeTile(Re)})),this.actor.registerMessageHandler("GCEZ",(Ce,Re)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(Ce,Re.type,Re.source).getClusterExpansionZoom(Re)})),this.actor.registerMessageHandler("GCC",(Ce,Re)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(Ce,Re.type,Re.source).getClusterChildren(Re)})),this.actor.registerMessageHandler("GCL",(Ce,Re)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(Ce,Re.type,Re.source).getClusterLeaves(Re)})),this.actor.registerMessageHandler("LD",(Ce,Re)=>this._getWorkerSource(Ce,Re.type,Re.source).loadData(Re)),this.actor.registerMessageHandler("GD",(Ce,Re)=>this._getWorkerSource(Ce,Re.type,Re.source).getData()),this.actor.registerMessageHandler("LT",(Ce,Re)=>this._getWorkerSource(Ce,Re.type,Re.source).loadTile(Re)),this.actor.registerMessageHandler("RT",(Ce,Re)=>this._getWorkerSource(Ce,Re.type,Re.source).reloadTile(Re)),this.actor.registerMessageHandler("AT",(Ce,Re)=>this._getWorkerSource(Ce,Re.type,Re.source).abortTile(Re)),this.actor.registerMessageHandler("RMT",(Ce,Re)=>this._getWorkerSource(Ce,Re.type,Re.source).removeTile(Re)),this.actor.registerMessageHandler("RS",(Ce,Re)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[Ce]||!this.workerSources[Ce][Re.type]||!this.workerSources[Ce][Re.type][Re.source])return;const Ze=this.workerSources[Ce][Re.type][Re.source];delete this.workerSources[Ce][Re.type][Re.source],Ze.removeSource!==void 0&&Ze.removeSource(Re)})),this.actor.registerMessageHandler("RM",Ce=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[Ce],delete this.availableImages[Ce],delete this.workerSources[Ce],delete this.demWorkerSources[Ce],this.globalStates.delete(Ce)})),this.actor.registerMessageHandler("SR",(Ce,Re)=>c._(this,void 0,void 0,function*(){this.referrer=Re})),this.actor.registerMessageHandler("SRPS",(Ce,Re)=>this._syncRTLPluginState(Ce,Re)),this.actor.registerMessageHandler("IS",(Ce,Re)=>c._(this,void 0,void 0,function*(){this.self.importScripts(Re)})),this.actor.registerMessageHandler("SI",(Ce,Re)=>this._setImages(Ce,Re)),this.actor.registerMessageHandler("UL",(Ce,Re)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(Ce).update(Re.layers,Re.removedIds,this._getGlobalState(Ce))})),this.actor.registerMessageHandler("UGS",(Ce,Re)=>c._(this,void 0,void 0,function*(){const Ze=this._getGlobalState(Ce);for(const ot in Re)Ze[ot]=Re[ot]})),this.actor.registerMessageHandler("SL",(Ce,Re)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(Ce).replace(Re,this._getGlobalState(Ce))}))}_getGlobalState(ye){let Ce=this.globalStates.get(ye);return Ce||(Ce={},this.globalStates.set(ye,Ce)),Ce}_setImages(ye,Ce){return c._(this,void 0,void 0,function*(){this.availableImages[ye]=Ce;for(const Re in this.workerSources[ye]){const Ze=this.workerSources[ye][Re];for(const ot in Ze)Ze[ot].availableImages=Ce}})}_syncRTLPluginState(ye,Ce){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(Ce,this.self.importScripts)})}_getAvailableImages(ye){let Ce=this.availableImages[ye];return Ce||(Ce=[]),Ce}_getLayerIndex(ye){let Ce=this.layerIndexes[ye];return Ce||(Ce=this.layerIndexes[ye]=new s),Ce}_getWorkerSource(ye,Ce,Re){if(this.workerSources[ye]||(this.workerSources[ye]={}),this.workerSources[ye][Ce]||(this.workerSources[ye][Ce]={}),!this.workerSources[ye][Ce][Re]){const Ze={sendAsync:(ot,vt)=>(ot.targetMapId=ye,this.actor.sendAsync(ot,vt))};switch(Ce){case"vector":this.workerSources[ye][Ce][Re]=new B(Ze,this._getLayerIndex(ye),this._getAvailableImages(ye));break;case"geojson":this.workerSources[ye][Ce][Re]=new Ar(Ze,this._getLayerIndex(ye),this._getAvailableImages(ye));break;default:this.workerSources[ye][Ce][Re]=new this.externalWorkerSourceTypes[Ce](Ze,this._getLayerIndex(ye),this._getAvailableImages(ye))}}return this.workerSources[ye][Ce][Re]}_getDEMWorkerSource(ye,Ce){return this.demWorkerSources[ye]||(this.demWorkerSources[ye]={}),this.demWorkerSources[ye][Ce]||(this.demWorkerSources[ye][Ce]=new F),this.demWorkerSources[ye][Ce]}}return c.i(self)&&(self.worker=new yr(self)),yr}),n("index",["exports","./shared"],function(c,s){var p="5.9.0";function g(){var S=new s.A(4);return s.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let v,B;const F={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(S,o,f){const y=requestAnimationFrame(T=>{w(),o(T)}),{unsubscribe:w}=s.s(S.signal,"abort",()=>{w(),cancelAnimationFrame(y),f(s.c())},!1)},frameAsync(S){return new Promise((o,f)=>{this.frame(S,o,f)})},getImageData(S,o=0){return this.getImageCanvasContext(S).getImageData(-o,-o,S.width+2*o,S.height+2*o)},getImageCanvasContext(S){const o=window.document.createElement("canvas"),f=o.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return o.width=S.width,o.height=S.height,f.drawImage(S,0,0,S.width,S.height),f},resolveURL:S=>(v||(v=document.createElement("a")),v.href=S,v.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class C{static testProp(o){if(!C.docStyle)return o[0];for(let f=0;f<o.length;f++)if(o[f]in C.docStyle)return o[f];return o[0]}static create(o,f,y){const w=window.document.createElement(o);return f!==void 0&&(w.className=f),y&&y.appendChild(w),w}static createNS(o,f){return window.document.createElementNS(o,f)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(o,f){o.style[C.transformProp]=f}static addEventListener(o,f,y,w={}){o.addEventListener(f,y,"passive"in w?w:w.capture)}static removeEventListener(o,f,y,w={}){o.removeEventListener(f,y,"passive"in w?w:w.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(o){const f=o.getBoundingClientRect();return{x:f.width/o.offsetWidth||1,y:f.height/o.offsetHeight||1,boundingClientRect:f}}static getPoint(o,f,y){const w=f.boundingClientRect;return new s.P((y.clientX-w.left)/f.x-o.clientLeft,(y.clientY-w.top)/f.y-o.clientTop)}static mousePos(o,f){const y=C.getScale(o);return C.getPoint(o,y,f)}static touchPos(o,f){const y=[],w=C.getScale(o);for(let T=0;T<f.length;T++)y.push(C.getPoint(o,w,f[T]));return y}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}static sanitize(o){const f=new DOMParser().parseFromString(o,"text/html").body||document.createElement("body"),y=f.querySelectorAll("script");for(const w of y)w.remove();return C.clean(f),f.innerHTML}static isPossiblyDangerous(o,f){const y=f.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(o)||!y.includes("javascript:")&&!y.includes("data:"))||!!o.startsWith("on")||void 0}static clean(o){const f=o.children;for(const y of f)C.removeAttributes(y),C.clean(y)}static removeAttributes(o){for(const{name:f,value:y}of o.attributes)C.isPossiblyDangerous(f,y)&&o.removeAttribute(f)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);const L={supported:!1,testSupport:function(S){!j&&D&&(q?H(S):P=S)}};let P,D,j=!1,q=!1;function H(S){const o=S.createTexture();S.bindTexture(S.TEXTURE_2D,o);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,D),S.isContextLost())return;L.supported=!0}catch{}S.deleteTexture(o),j=!0}var ee;typeof document<"u"&&(D=document.createElement("img"),D.onload=()=>{P&&H(P),P=null,q=!0},D.onerror=()=>{j=!0,P=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(S){let o,f,y,w;S.resetRequestQueue=()=>{o=[],f=0,y=0,w={}},S.addThrottleControl=V=>{const se=y++;return w[se]=V,se},S.removeThrottleControl=V=>{delete w[V],I()},S.getImage=(V,se,oe=!0)=>new Promise((ge,de)=>{L.supported&&(V.headers||(V.headers={}),V.headers.accept="image/webp,*/*"),s.e(V,{type:"image"}),o.push({abortController:se,requestParameters:V,supportImageRefresh:oe,state:"queued",onError:Ee=>{de(Ee)},onSuccess:Ee=>{ge(Ee)}}),I()});const T=V=>s._(this,void 0,void 0,function*(){V.state="running";const{requestParameters:se,supportImageRefresh:oe,onError:ge,onSuccess:de,abortController:Ee}=V,je=oe===!1&&!s.i(self)&&!s.g(se.url)&&(!se.headers||Object.keys(se.headers).reduce((at,ft)=>at&&ft==="accept",!0));f++;const Je=je?O(se,Ee):s.m(se,Ee);try{const at=yield Je;delete V.abortController,V.state="completed",at.data instanceof HTMLImageElement||s.b(at.data)?de(at):at.data&&de({data:yield(tt=at.data,typeof createImageBitmap=="function"?s.f(tt):s.h(tt)),cacheControl:at.cacheControl,expires:at.expires})}catch(at){delete V.abortController,ge(at)}finally{f--,I()}var tt}),I=()=>{const V=(()=>{for(const se of Object.keys(w))if(w[se]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let se=f;se<V&&o.length>0;se++){const oe=o.shift();oe.abortController.signal.aborted?se--:T(oe)}},O=(V,se)=>new Promise((oe,ge)=>{const de=new Image,Ee=V.url,je=V.credentials;je&&je==="include"?de.crossOrigin="use-credentials":(je&&je==="same-origin"||!s.d(Ee))&&(de.crossOrigin="anonymous"),se.signal.addEventListener("abort",()=>{de.src="",ge(s.c())}),de.fetchPriority="high",de.onload=()=>{de.onerror=de.onload=null,oe({data:de})},de.onerror=()=>{de.onerror=de.onload=null,se.signal.aborted||ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},de.src=Ee})}(ee||(ee={})),ee.resetRequestQueue();class G{constructor(o){this._transformRequestFn=o??null}transformRequest(o,f){return this._transformRequestFn&&this._transformRequestFn(o,f)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function ne(S){const o=[];if(typeof S=="string")o.push({id:"default",url:S});else if(S&&S.length>0){const f=[];for(const{id:y,url:w}of S){const T=`${y}${w}`;f.indexOf(T)===-1&&(f.push(T),o.push({id:y,url:w}))}}return o}function Z(S,o,f){try{const y=new URL(S);return y.pathname+=`${o}${f}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function le(S){const{userImage:o}=S;return!!(o&&o.render&&o.render())&&(S.data.replace(new Uint8Array(o.data.buffer)),!0)}class J extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:f,promiseResolve:y}of this.requestors)y(this._getImagesForIds(f));this.requestors=[]}}getImage(o){const f=this.images[o];if(f&&!f.data&&f.spriteData){const y=f.spriteData;f.data=new s.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),f.spriteData=null}return f}addImage(o,f){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,f)&&(this.images[o]=f)}_validate(o,f){let y=!0;const w=f.data||f.spriteData;return this._validateStretch(f.stretchX,w&&w.width)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchX" value`))),y=!1),this._validateStretch(f.stretchY,w&&w.height)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "stretchY" value`))),y=!1),this._validateContent(f.content,f)||(this.fire(new s.k(new Error(`Image "${o}" has invalid "content" value`))),y=!1),y}_validateStretch(o,f){if(!o)return!0;let y=0;for(const w of o){if(w[0]<y||w[1]<w[0]||f<w[1])return!1;y=w[1]}return!0}_validateContent(o,f){if(!o)return!0;if(o.length!==4)return!1;const y=f.spriteData,w=y&&y.width||f.data.width,T=y&&y.height||f.data.height;return!(o[0]<0||w<o[0]||o[1]<0||T<o[1]||o[2]<0||w<o[2]||o[3]<0||T<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,f,y=!0){const w=this.getImage(o);if(y&&(w.data.width!==f.data.width||w.data.height!==f.data.height))throw new Error(`size mismatch between old image (${w.data.width}x${w.data.height}) and new image (${f.data.width}x${f.data.height}).`);f.version=w.version+1,this.images[o]=f,this.updatedImages[o]=!0}removeImage(o){const f=this.images[o];delete this.images[o],delete this.patterns[o],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((f,y)=>{let w=!0;if(!this.isLoaded())for(const T of o)this.images[T]||(w=!1);this.isLoaded()||w?f(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:f})})}_getImagesForIds(o){const f={};for(const y of o){let w=this.getImage(y);w||(this.fire(new s.l("styleimagemissing",{id:y})),w=this.getImage(y)),w?f[y]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,textFitWidth:w.textFitWidth,textFitHeight:w.textFitHeight,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:s.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return f}getPixelSize(){const{width:o,height:f}=this.atlasImage;return{width:o,height:f}}getPattern(o){const f=this.patterns[o],y=this.getImage(o);if(!y)return null;if(f&&f.position.version===y.version)return f.position;if(f)f.position.version=y.version;else{const w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},T=new s.I(w,y);this.patterns[o]={bin:w,position:T}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const f=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(o,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const T in this.patterns)o.push(this.patterns[T].bin);const{w:f,h:y}=s.p(o),w=this.atlasImage;w.resize({width:f||1,height:y||1});for(const T in this.patterns){const{bin:I}=this.patterns[T],O=I.x+1,V=I.y+1,se=this.getImage(T).data,oe=se.width,ge=se.height;s.R.copy(se,w,{x:0,y:0},{x:O,y:V},{width:oe,height:ge}),s.R.copy(se,w,{x:0,y:ge-1},{x:O,y:V-1},{width:oe,height:1}),s.R.copy(se,w,{x:0,y:0},{x:O,y:V+ge},{width:oe,height:1}),s.R.copy(se,w,{x:oe-1,y:0},{x:O-1,y:V},{width:1,height:ge}),s.R.copy(se,w,{x:0,y:0},{x:O+oe,y:V},{width:1,height:ge})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const f of o){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const y=this.getImage(f);y||s.w(`Image with ID: "${f}" was not found`),le(y)&&this.updateImage(f,y)}}}const ce=1e20;function te(S,o,f,y,w,T,I,O,V){for(let se=o;se<o+y;se++)K(S,f*T+se,T,w,I,O,V);for(let se=f;se<f+w;se++)K(S,se*T+o,1,y,I,O,V)}function K(S,o,f,y,w,T,I){T[0]=0,I[0]=-ce,I[1]=ce,w[0]=S[o];for(let O=1,V=0,se=0;O<y;O++){w[O]=S[o+O*f];const oe=O*O;do{const ge=T[V];se=(w[O]-w[ge]+oe-ge*ge)/(O-ge)/2}while(se<=I[V]&&--V>-1);V++,T[V]=O,I[V]=se,I[V+1]=ce}for(let O=0,V=0;O<y;O++){for(;I[V+1]<O;)V++;const se=T[V],oe=O-se;S[o+O*f]=w[se]+oe*oe}}class me{constructor(o,f,y){this.requestManager=o,this.localIdeographFontFamily=f,this.entries={},this.lang=y}setURL(o){this.url=o}getGlyphs(o){return s._(this,void 0,void 0,function*(){const f=[];for(const T in o)for(const I of o[T])f.push(this._getAndCacheGlyphsPromise(T,I));const y=yield Promise.all(f),w={};for(const{stack:T,id:I,glyph:O}of y)w[T]||(w[T]={}),w[T][I]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return w})}_getAndCacheGlyphsPromise(o,f){return s._(this,void 0,void 0,function*(){let y=this.entries[o];y||(y=this.entries[o]={glyphs:{},requests:{},ranges:{}});let w=y.glyphs[f];if(w!==void 0)return{stack:o,id:f,glyph:w};if(w=this._tinySDF(y,o,f),w)return y.glyphs[f]=w,{stack:o,id:f,glyph:w};const T=Math.floor(f/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(y.ranges[T])return{stack:o,id:f,glyph:w};if(!this.url)throw new Error("glyphsUrl is not set");if(!y.requests[T]){const O=me.loadGlyphRange(o,T,this.url,this.requestManager);y.requests[T]=O}const I=yield y.requests[T];for(const O in I)this._doesCharSupportLocalGlyph(+O)||(y.glyphs[+O]=I[+O]);return y.ranges[T]=!0,{stack:o,id:f,glyph:I[f]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(o))||s.u["CJK Unified Ideographs"](o)||s.u["Hangul Syllables"](o)||s.u.Hiragana(o)||s.u.Katakana(o)||s.u["CJK Symbols and Punctuation"](o)||s.u["Halfwidth and Fullwidth Forms"](o))}_tinySDF(o,f,y){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(y))return;let T=o.tinySDF;if(!T){let O="400";/bold/i.test(f)?O="900":/medium/i.test(f)?O="500":/light/i.test(f)&&(O="200"),T=o.tinySDF=new me.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:w,fontWeight:O})}const I=T.draw(String.fromCharCode(y));return{id:y,bitmap:new s.q({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}me.loadGlyphRange=function(S,o,f,y){return s._(this,void 0,void 0,function*(){const w=256*o,T=w+255,I=y.transformRequest(f.replace("{fontstack}",S).replace("{range}",`${w}-${T}`),"Glyphs"),O=yield s.n(I,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${o}, ${w}-${T}`);const V={};for(const se of s.o(O.data))V[se.id]=se;return V})},me.TinySDF=class{constructor({fontSize:S=24,buffer:o=3,radius:f=8,cutoff:y=.25,fontFamily:w="sans-serif",fontWeight:T="normal",fontStyle:I="normal",lang:O=null}={}){this.buffer=o,this.cutoff=y,this.radius=f,this.lang=O;const V=this.size=S+4*o,se=this._createCanvas(V),oe=this.ctx=se.getContext("2d",{willReadFrequently:!0});oe.font=`${I} ${T} ${S}px ${w}`,oe.textBaseline="alphabetic",oe.textAlign="left",oe.fillStyle="black",this.gridOuter=new Float64Array(V*V),this.gridInner=new Float64Array(V*V),this.f=new Float64Array(V),this.z=new Float64Array(V+1),this.v=new Uint16Array(V)}_createCanvas(S){const o=document.createElement("canvas");return o.width=o.height=S,o}draw(S){const{width:o,actualBoundingBoxAscent:f,actualBoundingBoxDescent:y,actualBoundingBoxLeft:w,actualBoundingBoxRight:T}=this.ctx.measureText(S),I=Math.ceil(f),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-w))),V=Math.min(this.size-this.buffer,I+Math.ceil(y)),se=O+2*this.buffer,oe=V+2*this.buffer,ge=Math.max(se*oe,0),de=new Uint8ClampedArray(ge),Ee={data:de,width:se,height:oe,glyphWidth:O,glyphHeight:V,glyphTop:I,glyphLeft:0,glyphAdvance:o};if(O===0||V===0)return Ee;const{ctx:je,buffer:Je,gridInner:tt,gridOuter:at}=this;this.lang&&(je.lang=this.lang),je.clearRect(Je,Je,O,V),je.fillText(S,Je,Je+I);const ft=je.getImageData(Je,Je,O,V);at.fill(ce,0,ge),tt.fill(0,0,ge);for(let mt=0;mt<V;mt++)for(let pt=0;pt<O;pt++){const bt=ft.data[4*(mt*O+pt)+3]/255;if(bt===0)continue;const St=(mt+Je)*se+pt+Je;if(bt===1)at[St]=0,tt[St]=ce;else{const gt=.5-bt;at[St]=gt>0?gt*gt:0,tt[St]=gt<0?gt*gt:0}}te(at,0,0,se,oe,se,this.f,this.v,this.z),te(tt,Je,Je,O,V,se,this.f,this.v,this.z);for(let mt=0;mt<ge;mt++){const pt=Math.sqrt(at[mt])-Math.sqrt(tt[mt]);de[mt]=Math.round(255-255*(pt/this.radius+this.cutoff))}return Ee}};class we{constructor(){this.specification=s.v.light.position}possiblyEvaluate(o,f){return s.B(o.expression.evaluate(f))}interpolate(o,f,y){return{x:s.C.number(o.x,f.x,y),y:s.C.number(o.y,f.y,y),z:s.C.number(o.z,f.z,y)}}}let Fe;class he extends s.E{constructor(o){super(),Fe=Fe||new s.r({anchor:new s.D(s.v.light.anchor),position:new we,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.t(Fe,void 0),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,f={}){if(!this._validate(s.x,o,f))for(const y in o){const w=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),w):this._transitionable.setValue(y,w)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,y){return(!y||y.validate!==!1)&&s.y(this,o.call(s.z,{value:f,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Le=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class $e extends s.E{constructor(o){super(),this._transitionable=new s.t(Le,void 0),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0))}setSky(o,f={}){if(!this._validate(s.G,o,f)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in o){const w=o[y];y.endsWith("-transition")?this._transitionable.setTransition(y.slice(0,-11),w):this._transitionable.setValue(y,w)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,f,y={}){return y?.validate!==!1&&s.y(this,o.call(s.z,s.e({value:f,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class Ne{constructor(o,f){this.width=o,this.height=f,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,f){const y=o.join(",")+String(f);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(o,f)),this.dashEntry[y]}getDashRanges(o,f,y){const w=[];let T=o.length%2==1?-o[o.length-1]*y:0,I=o[0]*y,O=!0;w.push({left:T,right:I,isDash:O,zeroLength:o[0]===0});let V=o[0];for(let se=1;se<o.length;se++){O=!O;const oe=o[se];T=V*y,V+=oe,I=V*y,w.push({left:T,right:I,isDash:O,zeroLength:oe===0})}return w}addRoundDash(o,f,y){const w=f/2;for(let T=-y;T<=y;T++){const I=this.width*(this.nextRow+y+T);let O=0,V=o[O];for(let se=0;se<this.width;se++){se/V.right>1&&(V=o[++O]);const oe=Math.abs(se-V.left),ge=Math.abs(se-V.right),de=Math.min(oe,ge);let Ee;const je=T/y*(w+1);if(V.isDash){const Je=w-Math.abs(je);Ee=Math.sqrt(de*de+Je*Je)}else Ee=w-Math.sqrt(de*de+je*je);this.data[I+se]=Math.max(0,Math.min(255,Ee+128))}}}addRegularDash(o){for(let O=o.length-1;O>=0;--O){const V=o[O],se=o[O+1];V.zeroLength?o.splice(O,1):se&&se.isDash===V.isDash&&(se.left=V.left,o.splice(O,1))}const f=o[0],y=o[o.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const w=this.width*this.nextRow;let T=0,I=o[T];for(let O=0;O<this.width;O++){O/I.right>1&&(I=o[++T]);const V=Math.abs(O-I.left),se=Math.abs(O-I.right),oe=Math.min(V,se);this.data[w+O]=Math.max(0,Math.min(255,(I.isDash?oe:-oe)+128))}}addDash(o,f){const y=f?7:0,w=2*y+1;if(this.nextRow+w>this.height)return s.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<o.length;O++)T+=o[O];if(T!==0){const O=this.width/T,V=this.getDashRanges(o,this.width,O);f?this.addRoundDash(V,O,y):this.addRegularDash(V)}const I={y:this.nextRow+y,height:2*y,width:T};return this.nextRow+=w,this.dirty=!0,I}bind(o){const f=o.gl;this.texture?(f.bindTexture(f.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,f.texSubImage2D(f.TEXTURE_2D,0,0,0,this.width,this.height,f.ALPHA,f.UNSIGNED_BYTE,this.data))):(this.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,this.texture),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.ALPHA,this.width,this.height,0,f.ALPHA,f.UNSIGNED_BYTE,this.data))}}const Te="maplibre_preloaded_worker_pool";class Ge{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Te]}numActive(){return Object.keys(this.active).length}}const Y=Math.floor(F.hardwareConcurrency/2);let Ae,fe;function be(){return Ae||(Ae=new Ge),Ae}Ge.workerCount=s.H(globalThis)?Math.max(Math.min(Y,3),1):1;class Me{constructor(o,f){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=f;const y=this.workerPool.acquire(f);for(let w=0;w<y.length;w++){const T=new s.J(y[w],f);T.name=`Worker ${w}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,f){const y=[];for(const w of this.actors)y.push(w.sendAsync({type:o,data:f}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(f=>{f.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,f){for(const y of this.actors)y.registerMessageHandler(o,f)}}function ze(){return fe||(fe=new Me(be(),s.K),fe.registerMessageHandler("GR",(S,o,f)=>s.m(o,f))),fe}function We(S,o){const f=s.L();return s.M(f,f,[1,1,0]),s.N(f,f,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?s.O(f,f,S.calculatePosMatrix(o.toUnwrapped())):f}function ut(S,o,f,y,w,T,I){var O;const V=function(de,Ee,je){if(de)for(const Je of de){const tt=Ee[Je];if(tt&&tt.source===je&&tt.type==="fill-extrusion")return!0}else for(const Je in Ee){const tt=Ee[Je];if(tt.source===je&&tt.type==="fill-extrusion")return!0}return!1}((O=w?.layers)!==null&&O!==void 0?O:null,o,S.id),se=T.maxPitchScaleFactor(),oe=S.tilesIn(y,se,V);oe.sort(dt);const ge=[];for(const de of oe)ge.push({wrappedTileID:de.tileID.wrapped().key,queryResults:de.tile.queryRenderedFeatures(o,f,S._state,de.queryGeometry,de.cameraQueryGeometry,de.scale,w,T,se,We(S.transform,de.tileID),I?(Ee,je)=>I(de.tileID,Ee,je):void 0)});return function(de,Ee){for(const je in de)for(const Je of de[je])zt(Je,Ee);return de}(function(de){const Ee={},je={};for(const Je of de){const tt=Je.queryResults,at=Je.wrappedTileID,ft=je[at]=je[at]||{};for(const mt in tt){const pt=tt[mt],bt=ft[mt]=ft[mt]||{},St=Ee[mt]=Ee[mt]||[];for(const gt of pt)bt[gt.featureIndex]||(bt[gt.featureIndex]=!0,St.push(gt))}}return Ee}(ge),S)}function dt(S,o){const f=S.tileID,y=o.tileID;return f.overscaledZ-y.overscaledZ||f.canonical.y-y.canonical.y||f.wrap-y.wrap||f.canonical.x-y.canonical.x}function zt(S,o){const f=S.feature,y=o.getFeatureState(f.layer["source-layer"],f.id);f.source=f.layer.source,f.layer["source-layer"]&&(f.sourceLayer=f.layer["source-layer"]),f.state=y}function ve(S,o,f){return s._(this,void 0,void 0,function*(){let y=S;if(S.url?y=(yield s.j(o.transformRequest(S.url,"Source"),f)).data:yield F.frameAsync(f),!y)return null;const w=s.Q(s.e(y,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(w.vectorLayerIds=y.vector_layers.map(T=>T.id)),w})}class Ct{constructor(o,f){o&&(f?this.setSouthWest(o).setNorthEast(f):Array.isArray(o)&&(o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}setSouthWest(o){return this._sw=o instanceof s.S?new s.S(o.lng,o.lat):s.S.convert(o),this}extend(o){const f=this._sw,y=this._ne;let w,T;if(o instanceof s.S)w=o,T=o;else{if(!(o instanceof Ct))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Ct.convert(o)):this.extend(s.S.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(s.S.convert(o)):this;if(w=o._sw,T=o._ne,!w||!T)return this}return f||y?(f.lng=Math.min(w.lng,f.lng),f.lat=Math.min(w.lat,f.lat),y.lng=Math.max(T.lng,y.lng),y.lat=Math.max(T.lat,y.lat)):(this._sw=new s.S(w.lng,w.lat),this._ne=new s.S(T.lng,T.lat)),this}getCenter(){return new s.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.S(this.getWest(),this.getNorth())}getSouthEast(){return new s.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:f,lat:y}=s.S.convert(o);let w=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&w}static convert(o){return o instanceof Ct?o:o&&new Ct(o)}static fromLngLat(o,f=0){const y=360*f/40075017,w=y/Math.cos(Math.PI/180*o.lat);return new Ct(new s.S(o.lng-w,o.lat-y),new s.S(o.lng+w,o.lat+y))}adjustAntiMeridian(){const o=new s.S(this._sw.lng,this._sw.lat),f=new s.S(this._ne.lng,this._ne.lat);return new Ct(o,o.lng>f.lng?new s.S(f.lng+360,f.lat):f)}}class Pt{constructor(o,f,y){this.bounds=Ct.convert(this.validateBounds(o)),this.minzoom=f||0,this.maxzoom=y||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const f=Math.pow(2,o.z),y=Math.floor(s.V(this.bounds.getWest())*f),w=Math.floor(s.U(this.bounds.getNorth())*f),T=Math.ceil(s.V(this.bounds.getEast())*f),I=Math.ceil(s.U(this.bounds.getSouth())*f);return o.x>=y&&o.x<T&&o.y>=w&&o.y<I}}class Ve extends s.E{constructor(o,f,y,w){if(super(),this.id=o,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.Q(f,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield ve(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(s.e(this,o),o.bounds&&(this.tileBounds=new Pt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(f,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};y.request.collectResourceTiming=this._collectResourceTiming;let w="RT";if(o.actor&&o.state!=="expired"){if(o.state==="loading")return new Promise((T,I)=>{o.reloadPromise={resolve:T,reject:I}})}else o.actor=this.dispatcher.getActor(),w="LT";o.abortController=new AbortController;try{const T=yield o.actor.sendAsync({type:w,data:y},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,T)}catch(T){if(delete o.abortController,o.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,f){if(f&&f.resourceTiming&&(o.resourceTiming=f.resourceTiming),f&&this.map._refreshExpiredTiles&&o.setExpiryData(f),o.loadVectorData(f,this.map.painter),o.reloadPromise){const y=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(y.resolve).catch(y.reject)}}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class lr extends s.E{constructor(o,f,y,w){super(),this.id=o,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},f),s.e(this,s.Q(f,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(o=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const f=yield ve(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,f&&(s.e(this,f),f.bounds&&(this.tileBounds=new Pt(f.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:o})))}catch(f){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(f))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load(!0)}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return s.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{const y=yield ee.getImage(this.map._requestManager.transformRequest(f,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&o.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const w=this.map.painter.context,T=w.gl,I=y.data;o.texture=this.map.painter.getTileTexture(I.width),o.texture?o.texture.update(I,{useMipmap:!0}):(o.texture=new s.T(w,I,T.RGBA,{useMipmap:!0}),o.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(y){if(delete o.abortController,o.aborted)o.state="unloaded";else if(y)throw o.state="errored",y}})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class ir extends lr{constructor(o,f,y,w){super(o,f,y,w),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox",this.redFactor=f.redFactor,this.greenFactor=f.greenFactor,this.blueFactor=f.blueFactor,this.baseShift=f.baseShift}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(f,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{const w=yield ee.getImage(y,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(w&&w.data){const T=w.data;this.map._refreshExpiredTiles&&(w.cacheControl||w.expires)&&o.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const I=s.b(T)&&s.W()?T:yield this.readImageNow(T),O={type:this.type,uid:o.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||o.state==="expired"){o.actor=this.dispatcher.getActor();const V=yield o.actor.sendAsync({type:"LDT",data:O});o.dem=V,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(w){if(delete o.abortController,o.aborted)o.state="unloaded";else if(w)throw o.state="errored",w}})}readImageNow(o){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.X()){const f=o.width+2,y=o.height+2;try{return new s.R({width:f,height:y},yield s.Y(o,-1,-1,f,y))}catch{}}return F.getImageData(o,1)})}_getNeighboringTiles(o){const f=o.canonical,y=Math.pow(2,f.z),w=(f.x-1+y)%y,T=f.x===0?o.wrap-1:o.wrap,I=(f.x+1+y)%y,O=f.x+1===y?o.wrap+1:o.wrap,V={};return V[new s.Z(o.overscaledZ,T,f.z,w,f.y).key]={backfilled:!1},V[new s.Z(o.overscaledZ,O,f.z,I,f.y).key]={backfilled:!1},f.y>0&&(V[new s.Z(o.overscaledZ,T,f.z,w,f.y-1).key]={backfilled:!1},V[new s.Z(o.overscaledZ,o.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},V[new s.Z(o.overscaledZ,O,f.z,I,f.y-1).key]={backfilled:!1}),f.y+1<y&&(V[new s.Z(o.overscaledZ,T,f.z,w,f.y+1).key]={backfilled:!1},V[new s.Z(o.overscaledZ,o.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},V[new s.Z(o.overscaledZ,O,f.z,I,f.y+1).key]={backfilled:!1}),V}unloadTile(o){return s._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class jr extends s.E{constructor(o,f,y,w){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:f.data},this.actor=y.getActor(),this.setEventedParent(w),this._data=f.data,this._options=s.e({},f),this._collectResourceTiming=f.collectResourceTiming,f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId,f.clusterMaxZoom!==void 0&&this.maxzoom<=f.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${f.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(f.buffer!==void 0?f.buffer:128),tolerance:this._pixelsToTileUnits(f.tolerance!==void 0?f.tolerance:.375),extent:s.$,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(f.clusterMaxZoom),minPoints:Math.max(2,f.clusterMinPoints||2),extent:s.$,radius:this._pixelsToTileUnits(f.clusterRadius||50),log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(o){return o*(s.$/this.tileSize)}_getClusterMaxZoom(o){const f=o?Math.round(o):this.maxzoom-1;return Number.isInteger(o)||o===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${o}" rounded to "${f}"`),f}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._pendingWorkerUpdate={data:o},this._updateWorkerData(),this}updateData(o){return this._pendingWorkerUpdate.diff=s.a0(this._pendingWorkerUpdate.diff,o),this._updateWorkerData(),this}getData(){return s._(this,void 0,void 0,function*(){const o=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}getCoordinatesFromGeometry(o){return o.type==="GeometryCollection"?o.geometries.map(f=>f.coordinates).flat(1/0):o.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const o=new Ct,f=yield this.getData();let y;switch(f.type){case"FeatureCollection":y=f.features.map(w=>this.getCoordinatesFromGeometry(w.geometry)).flat(1/0);break;case"Feature":y=this.getCoordinatesFromGeometry(f.geometry);break;default:y=this.getCoordinatesFromGeometry(f)}if(y.length==0)return o;for(let w=0;w<y.length-1;w+=2)o.extend([y[w],y[w+1]]);return o})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(o.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(o.clusterRadius)),o.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(o.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,f,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:f,offset:y}})}_updateWorkerData(){return s._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:o,diff:f}=this._pendingWorkerUpdate;if(!o&&!f)return void s.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const y=s.e({type:this.type},this.workerOptions);o?(typeof o=="string"?(y.request=this.map._requestManager.transformRequest(F.resolveURL(o),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(o),this._pendingWorkerUpdate.data=void 0):f&&(y.dataDiff=f,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:y});if(this._isUpdatingWorker=!1,this._removed||w.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));this._data=w.data;let T=null;w.resourceTiming&&w.resourceTiming[this.id]&&(T=w.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&s.e(I,{resourceTiming:T}),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))}catch(w){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(w))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(o){return s._(this,void 0,void 0,function*(){const f=o.actor?"RT":"LT";o.actor=this.actor;const y={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};o.abortController=new AbortController;const w=yield this.actor.sendAsync({type:f,data:y},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(w,this.map.painter,f==="RT")})}abortTile(o){return s._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return s._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ar extends s.E{constructor(o,f,y,w){super(),this.flippedWindingOrder=!1,this.id=o,this.dispatcher=y,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=f}load(o){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const f=yield ee.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,f&&f.data&&(this.image=f.data,o&&(this.coordinates=o),this._finishLoading())}catch(f){this._request=null,this._loaded=!0,this.fire(new s.k(f))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;const f=o.map(s.a1.fromLngLat);var y;return this.tileID=function(w){const T=s.a2.fromPoints(w),I=T.width(),O=T.height(),V=Math.max(I,O),se=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),oe=Math.pow(2,se);return new s.a4(se,Math.floor((T.minX+T.maxX)/2*oe),Math.floor((T.minY+T.maxY)/2*oe))}(f),this.terrainTileRanges=this._getOverlappingTileRanges(f),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=f.map(w=>this.tileID.getTilePoint(w)._round()),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,f=o.gl;this.texture||(this.texture=new s.T(o,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(o){const{minX:f,minY:y,maxX:w,maxY:T}=s.a2.fromPoints(o),I={};for(let O=0;O<=s.a3;O++){const V=Math.pow(2,O),se=Math.floor(f*V),oe=Math.floor(y*V),ge=Math.floor(w*V),de=Math.floor(T*V);I[O]={minTileX:se,minTileY:oe,maxTileX:ge,maxTileY:de}}return I}}class Wr extends ar{constructor(o,f,y,w){super(o,f,y,w),this.roundZoom=!0,this.type="video",this.options=f}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const o=this.options;this.urls=[];for(const f of o.urls)this.urls.push(this.map._requestManager.transformRequest(f,"Source").url);try{const f=yield s.a5(this.urls);if(this._loaded=!0,!f)return;this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(f){this.fire(new s.k(f))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const f=this.video.seekable;o<f.start(0)||o>f.end(0)?this.fire(new s.k(new s.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${f.start(0)} and ${f.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const o=this.map.painter.context,f=o.gl;this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(o,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Lr extends ar{constructor(o,f,y,w){super(o,f,y,w),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(I=>typeof I!="number"))||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new s.k(new s.a6(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a6(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a6(`sources.${o}`,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const f=this.map.painter.context,y=f.gl;this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(f,this.canvas,y.RGBA,{premultiply:!0});let w=!1;for(const T in this.tiles){const I=this.tiles[T];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,w=!0)}w&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const Zr={},qr=S=>{switch(S){case"geojson":return jr;case"image":return ar;case"raster":return lr;case"raster-dem":return ir;case"vector":return Ve;case"video":return Wr;case"canvas":return Lr}return Zr[S]},wi="RTLPluginLoaded";class Ci extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ze()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(f=>{throw this.status="error",f})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return s._(this,arguments,void 0,function*(f,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=F.resolveURL(f),!this.url)throw new Error(`requested url ${f} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(wi))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let $t=null;function Ar(){return $t||($t=new Ci),$t}var yr,it;(function(S){S[S.Base=0]="Base",S[S.Parent=1]="Parent"})(yr||(yr={})),function(S){S[S.Departing=0]="Departing",S[S.Incoming=1]="Incoming"}(it||(it={}));class ye{constructor(o,f){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=o,this.uid=s.a7(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(o){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(o||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:o,fadingDirection:f,fadingParentID:y,fadeEndTime:w}){this.resetFadeLogic(),this.fadingRole=o,this.fadingDirection=f,this.fadingParentID=y,this.fadeEndTime=w}setSelfFadeLogic(o){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=o}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=F.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,f,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(w,T){const I={};if(!T)return I;for(const O of w){const V=O.layerIds.map(se=>T.getLayer(se)).filter(Boolean);if(V.length!==0){O.layers=V,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(se=>V.filter(oe=>oe.id===se)[0]));for(const se of V)I[se.id]=O}}return I}(o.buckets,f?.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const T=this.buckets[w];if(T instanceof s.a9){if(this.hasSymbolBuckets=!0,!y)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const T=this.buckets[w];if(T instanceof s.a9&&T.hasRTLText){this.hasRTLText=!0,Ar().lazyLoad();break}}this.queryPadding=0;for(const w in this.buckets){const T=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(w).queryRadius(T))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),this.dashPositions=o.dashPositions}else this.collisionBoxArray=new s.a8}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const y in this.buckets){const w=this.buckets[y];w.uploadPending()&&w.upload(o)}const f=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(o,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(o,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,f,y,w,T,I,O,V,se,oe,ge){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:T,scale:I,tileSize:this.tileSize,pixelPosMatrix:oe,transform:V,params:O,queryPadding:this.queryPadding*se,getElevation:ge},o,f,y):{}}querySourceFeatures(o,f){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const w=y.loadVTLayers(),T=f&&f.sourceLayer?f.sourceLayer:"",I=w._geojsonTileLayer||w[T];if(!I)return;const O=s.aa(f?.filter,f?.globalState),{z:V,x:se,y:oe}=this.tileID.canonical,ge={z:V,x:se,y:oe};for(let de=0;de<I.length;de++){const Ee=I.feature(de);if(O.needGeometry){const tt=s.ab(Ee,!0);if(!O.filter(new s.F(this.tileID.overscaledZ),tt,this.tileID.canonical))continue}else if(!O.filter(new s.F(this.tileID.overscaledZ),Ee))continue;const je=y.getId(Ee,T),Je=new s.ac(Ee,V,se,oe,je);Je.tile=ge,o.push(Je)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const f=this.expirationTime;if(o.cacheControl){const y=s.ad(o.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const y=Date.now();let w=!1;if(this.expirationTime>y)w=!1;else if(f)if(this.expirationTime<f)w=!0;else{const T=this.expirationTime-f;T?this.expirationTime=y+Math.max(T,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(o,f){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(o).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!f.style.hasLayer(w))continue;const T=this.buckets[w],I=T.layers[0].sourceLayer||"_geojsonTileLayer",O=y[I],V=o[I];if(!O||!V||Object.keys(V).length===0)continue;T.update(V,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const se=f&&f.style&&f.style.getLayer(w);se&&(this.queryPadding=Math.max(this.queryPadding,se.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(o){this.symbolFadeHoldUntil=F.now()+o}setDependencies(o,f){const y={};for(const w of f)y[w]=!0;this.dependencies[o]=y}hasDependency(o,f){for(const y of o){const w=this.dependencies[y];if(w){for(const T of f)if(w[T])return!0}}return!1}}class Ce{constructor(o,f){this.max=o,this.onRemove=f,this.reset()}reset(){for(const o in this.data)for(const f of this.data[o])f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value);return this.data={},this.order=[],this}add(o,f,y){const w=o.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const T={value:f,timeout:void 0};if(y!==void 0&&(T.timeout=setTimeout(()=>{this.remove(o,T)},y)),this.data[w].push(T),this.order.push(w),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const f=this.data[o].shift();return f.timeout&&clearTimeout(f.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),f.value}getByKey(o){const f=this.data[o];return f?f[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,f){if(!this.has(o))return this;const y=o.wrapped().key,w=f===void 0?0:this.data[y].indexOf(f),T=this.data[y][w];return this.data[y].splice(w,1),T.timeout&&clearTimeout(T.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(T.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const f=this._getAndRemoveByKey(this.order[0]);f&&this.onRemove(f)}return this}filter(o){const f=[];for(const y in this.data)for(const w of this.data[y])o(w.value)||f.push(w);for(const y of f)this.remove(y.value.tileID,y)}}class Re{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,f,y){const w=String(f);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][w]=this.stateChanges[o][w]||{},s.e(this.stateChanges[o][w],y),this.deletedStates[o]===null){this.deletedStates[o]={};for(const T in this.state[o])T!==w&&(this.deletedStates[o][T]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][w]===null){this.deletedStates[o][w]={};for(const T in this.state[o][w])y[T]||(this.deletedStates[o][w][T]=null)}else for(const T in y)this.deletedStates[o]&&this.deletedStates[o][w]&&this.deletedStates[o][w][T]===null&&delete this.deletedStates[o][w][T]}removeFeatureState(o,f,y){if(this.deletedStates[o]===null)return;const w=String(f);if(this.deletedStates[o]=this.deletedStates[o]||{},y&&f!==void 0)this.deletedStates[o][w]!==null&&(this.deletedStates[o][w]=this.deletedStates[o][w]||{},this.deletedStates[o][w][y]=null);else if(f!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][w])for(y in this.deletedStates[o][w]={},this.stateChanges[o][w])this.deletedStates[o][w][y]=null;else this.deletedStates[o][w]=null;else this.deletedStates[o]=null}getState(o,f){const y=String(f),w=s.e({},(this.state[o]||{})[y],(this.stateChanges[o]||{})[y]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){const T=this.deletedStates[o][f];if(T===null)return{};for(const I in T)delete w[I]}return w}initializeTileState(o,f){o.setFeatureState(this.state,f)}coalesceChanges(o,f){const y={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const T={};for(const I in this.stateChanges[w])this.state[w][I]||(this.state[w][I]={}),s.e(this.state[w][I],this.stateChanges[w][I]),T[I]=this.state[w][I];y[w]=T}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const T={};if(this.deletedStates[w]===null)for(const I in this.state[w])T[I]={},this.state[w][I]={};else for(const I in this.deletedStates[w]){if(this.deletedStates[w][I]===null)this.state[w][I]={};else for(const O of Object.keys(this.deletedStates[w][I]))delete this.state[w][I][O];T[I]=this.state[w][I]}y[w]=y[w]||{},s.e(y[w],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const w in o)o[w].setFeatureState(y,f)}}const Ze=89.25;function ot(S,o){const f=s.ah(o.lat,-s.ai,s.ai);return new s.P(s.V(o.lng)*S,s.U(f)*S)}function vt(S,o){return new s.a1(o.x/S,o.y/S).toLngLat()}function Rt(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(s.ae(90-S.pitch)),Math.tan(s.ae(Ze-S.pitch)))}function xt(S,o){const f=S.canonical,y=o/s.af(f.z),w=f.x+Math.pow(2,f.z)*S.wrap,T=s.ag(new Float64Array(16));return s.M(T,T,[w*y,f.y*y,0]),s.N(T,T,[y/s.$,y/s.$,1]),T}function Gt(S,o,f,y,w){const T=s.a1.fromLngLat(S,o),I=w*s.aj(1,S.lat),O=I*Math.cos(s.ae(f)),V=Math.sqrt(I*I-O*O),se=V*Math.sin(s.ae(-y)),oe=V*Math.cos(s.ae(-y));return new s.a1(T.x+se,T.y+oe,T.z+O)}function er(S,o,f){const y=o.intersectsFrustum(S);if(!f||y===0)return y;const w=o.intersectsPlane(f);return w===0?0:y===2&&w===2?2:1}function qt(S,o,f){let y=0;const w=(f-o)/10;for(let T=0;T<10;T++)y+=w*Math.pow(Math.cos(o+(T+.5)/10*(f-o)),S);return y}function Mr(S,o){return function(f,y,w,T,I){const O=2*((S-1)/s.ak(Math.cos(s.ae(Ze-I))/Math.cos(s.ae(Ze)))-1),V=Math.acos(w/T),se=2*qt(O-1,0,s.ae(I/2)),oe=Math.min(s.ae(Ze),V+s.ae(I/2)),ge=qt(O-1,Math.min(oe,V-s.ae(I/2)),oe),de=Math.atan(y/w),Ee=Math.hypot(y,w);let je=f;return je+=s.ak(T/Ee/Math.max(.5,Math.cos(s.ae(I/2)))),je+=O*s.ak(Math.cos(de))/2,je-=s.ak(Math.max(1,ge/se/o))/2,je}}const Fr=Mr(9.314,3);function wt(S,o){const f=(o.roundZoom?Math.round:Math.floor)(S.zoom+s.ak(S.tileSize/o.tileSize));return Math.max(0,f)}function ei(S,o){const f=S.getCameraFrustum(),y=S.getClippingPlane(),w=S.screenPointToMercatorCoordinate(S.getCameraPoint()),T=s.a1.fromLngLat(S.center,S.elevation);w.z=T.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;const I=S.getCoveringTilesDetailsProvider(),O=I.allowVariableZoom(S,o),V=wt(S,o),se=o.minzoom||0,oe=o.maxzoom!==void 0?o.maxzoom:S.maxZoom,ge=Math.min(Math.max(0,V),oe),de=Math.pow(2,ge),Ee=[de*w.x,de*w.y,0],je=[de*T.x,de*T.y,0],Je=Math.hypot(T.x-w.x,T.y-w.y),tt=Math.abs(T.z-w.z),at=Math.hypot(Je,tt),ft=bt=>({zoom:0,x:0,y:0,wrap:bt,fullyVisible:!1}),mt=[],pt=[];if(S.renderWorldCopies&&I.allowWorldCopies())for(let bt=1;bt<=3;bt++)mt.push(ft(-bt)),mt.push(ft(bt));for(mt.push(ft(0));mt.length>0;){const bt=mt.pop(),St=bt.x,gt=bt.y;let kt=bt.fullyVisible;const tr={x:St,y:gt,z:bt.zoom},Vt=I.getTileBoundingVolume(tr,bt.wrap,S.elevation,o);if(!kt){const Er=er(f,Vt,y);if(Er===0)continue;kt=Er===2}const Wt=I.distanceToTile2d(w.x,w.y,tr,Vt);let Xt=V;O&&(Xt=(o.calculateTileZoom||Fr)(S.zoom+s.ak(S.tileSize/o.tileSize),Wt,tt,at,S.fov)),Xt=(o.roundZoom?Math.round:Math.floor)(Xt),Xt=Math.max(0,Xt);const Sr=Math.min(Xt,oe);if(bt.wrap=I.getWrap(T,tr,bt.wrap),bt.zoom>=Sr){if(bt.zoom<se)continue;const Er=ge-bt.zoom,gr=Ee[0]-.5-(St<<Er),Xr=Ee[1]-.5-(gt<<Er),Bi=o.reparseOverscaled?Math.max(bt.zoom,Xt):bt.zoom;pt.push({tileID:new s.Z(bt.zoom===oe?Bi:bt.zoom,bt.wrap,bt.zoom,St,gt),distanceSq:s.al([je[0]-.5-St,je[1]-.5-gt]),tileDistanceToCamera:Math.sqrt(gr*gr+Xr*Xr)})}else for(let Er=0;Er<4;Er++)mt.push({zoom:bt.zoom+1,x:(St<<1)+Er%2,y:(gt<<1)+(Er>>1),wrap:bt.wrap,fullyVisible:kt})}return pt.sort((bt,St)=>bt.distanceSq-St.distanceSq).map(bt=>bt.tileID)}const Ji=s.a2.fromPoints([new s.P(0,0),new s.P(s.$,s.$)]);class Hr extends s.E{constructor(o,f,y){super(),this.id=o,this.dispatcher=y,this.on("data",w=>this._dataHandler(w)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((w,T,I,O)=>{const V=new(qr(T.type))(w,T,I,O);if(V.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${V.id}`);return V})(o,f,y,this),this._tiles={},this._cache=new Ce(0,w=>this._unloadTile(w)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Re,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const f=this._tiles[o];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,f,y){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,f,y)}catch(w){o.state="errored",w.status!==404?this._source.fire(new s.k(w,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new s.l("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const f in this._tiles){const y=this._tiles[f];y.upload(o),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(Ri).map(o=>o.key)}getRenderableIds(o){const f=[];for(const y in this._tiles)this._isIdRenderable(y,o)&&f.push(this._tiles[y]);return o?f.sort((y,w)=>{const T=y.tileID,I=w.tileID,O=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),V=new s.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-I.overscaledZ||V.y-O.y||V.x-O.x}).map(y=>y.tileID.key):f.map(y=>y.tileID).sort(Ri).map(y=>y.key)}hasRenderableParent(o){const f=o.overscaledZ-1;if(f>=this._source.minzoom){const y=this._getLoadedTile(o.scaledTo(f));if(y)return this._isIdRenderable(y.tileID.key)}return!1}_isIdRenderable(o,f=!1){var y;return(y=this._tiles[o])===null||y===void 0?void 0:y.isRenderable(f)}reload(o){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const f in this._tiles)o?this._reloadTile(f,"expired"):this._tiles[f].state!=="errored"&&this._reloadTile(f,"reloading")}}_reloadTile(o,f){return s._(this,void 0,void 0,function*(){const y=this._tiles[o];y&&(y.state!=="loading"&&(y.state=f),yield this._loadTile(y,o,f))})}_tileLoaded(o,f,y){o.timeAdded=F.now(),y==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(f,o),this.getSource().type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const f=this.getRenderableIds();for(let w=0;w<f.length;w++){const T=f[w];if(o.neighboringTiles&&o.neighboringTiles[T]){const I=this.getTileByID(T);y(o,I),y(I,o)}}function y(w,T){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let I=T.tileID.canonical.x-w.tileID.canonical.x;const O=T.tileID.canonical.y-w.tileID.canonical.y,V=Math.pow(2,w.tileID.canonical.z),se=T.tileID.key;I===0&&O===0||Math.abs(O)>1||(Math.abs(I)>1&&(Math.abs(I+V)===1?I+=V:Math.abs(I-V)===1&&(I-=V)),T.dem&&w.dem&&(w.dem.backfillBorder(T.dem,I,O),w.neighboringTiles&&w.neighboringTiles[se]&&(w.neighboringTiles[se].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,f){const y=Object.values(o),w=this._getLoadedDescendents(y),T={};for(const I of y){const O=w[I.key];if(!O?.length){T[I.key]=I;continue}const V=I.overscaledZ+Hr.maxUnderzooming,se=O.filter(de=>de.tileID.overscaledZ<=V);if(!se.length){T[I.key]=I;continue}const oe=Math.min(...se.map(de=>de.tileID.overscaledZ)),ge=se.filter(de=>de.tileID.overscaledZ===oe).map(de=>de.tileID);for(const de of ge)f[de.key]=de;this._areDescendentsComplete(ge,oe,I.overscaledZ)||(T[I.key]=I)}return T}_getLoadedDescendents(o){var f;const y={};for(const w in this._tiles){const T=this._tiles[w];if(T.hasData())for(const I of o)T.tileID.isChildOf(I)&&(y[f=I.key]||(y[f]=[])).push(T)}return y}_areDescendentsComplete(o,f,y){return o.length===1&&o[0].isOverscaled()?o[0].overscaledZ===f:Math.pow(4,f-y)===o.length}_getLoadedTile(o){const f=this._tiles[o.key];return f?.hasData()?f:null}updateCacheSize(o){const f=Math.ceil(o.width/this._source.tileSize)+1,y=Math.ceil(o.height/this._source.tileSize)+1,w=Math.floor(f*y*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(T)}handleWrapJump(o){const f=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,f){const y={};for(const w in this._tiles){const T=this._tiles[w];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+f),y[T.tileID.key]=T}this._tiles=y;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(o,f){if(!this._sourceLoaded||this._paused)return;let y;this.transform=o,this.terrain=f,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new s.Z(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(y=ei(o,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:f,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter(V=>this._source.hasTile(V)))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const w=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,w&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=wt(o,this._source),I=this._updateRetainedTiles(y,T),O=In(this._source.type);O&&this._rasterFadeDuration>0&&!f&&this._updateFadingTiles(y,I),O?this._cleanUpRasterTiles(I):this._cleanUpVectorTiles(I)}_cleanUpRasterTiles(o){for(const f in this._tiles)o[f]||this._removeTile(f)}_cleanUpVectorTiles(o){for(const f in this._tiles){const y=this._tiles[f];o[f]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(f):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(f)}}_addTerrainIdealTiles(o){const f=[];for(const y of o)if(y.canonical.z>this._source.minzoom){const w=y.scaledTo(y.canonical.z-1);f.push(w);const T=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));f.push(T)}return o.concat(f)}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForSymbolFade()&&this._removeTile(o)}_updateRetainedTiles(o,f){var y;const w={},T={},I=Math.max(f-Hr.maxOverzooming,this._source.minzoom);let O={};for(const V of o){const se=this._addTile(V);w[V.key]=V,se.hasData()||(O[V.key]=V)}O=this._retainLoadedChildren(O,w);for(const V in O){const se=O[V];let oe=this._tiles[V],ge=oe?.wasRequested();for(let de=se.overscaledZ-1;de>=I;--de){const Ee=se.scaledTo(de);if(T[Ee.key])break;if(T[Ee.key]=!0,oe=this.getTile(Ee),!oe&&ge&&(oe=this._addTile(Ee)),oe){const je=oe.hasData();if((je||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||ge)&&(w[Ee.key]=Ee),ge=oe.wasRequested(),je)break}}}return w}_updateFadingTiles(o,f){const y=F.now(),w=s.am(o);for(const T of o){const I=this._tiles[T.key];I.fadingDirection!==it.Departing&&I.fadeOpacity!==0||I.resetFadeLogic(),this._updateFadingAncestor(I,f,y)||this._updateFadingDescendents(I,f,y)||this._updateFadingEdge(I,w,y)||I.resetFadeLogic()}}_updateFadingAncestor(o,f,y){if(!o.hasData())return!1;const{tileID:w,fadingRole:T,fadingDirection:I,fadingParentID:O}=o;if(T===yr.Base&&I===it.Incoming&&O)return f[O.key]=O,!0;const V=Math.max(w.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let se=w.overscaledZ-1;se>=V;se--){const oe=w.scaledTo(se),ge=this._getLoadedTile(oe);if(ge)return o.setCrossFadeLogic({fadingRole:yr.Base,fadingDirection:it.Incoming,fadingParentID:ge.tileID,fadeEndTime:y+this._rasterFadeDuration}),ge.setCrossFadeLogic({fadingRole:yr.Parent,fadingDirection:it.Departing,fadeEndTime:y+this._rasterFadeDuration}),f[oe.key]=oe,!0}return!1}_updateFadingDescendents(o,f,y){if(!o.hasData())return!1;const w=o.tileID.children(this._source.maxzoom);let T=this._updateFadingChildren(o,w,f,y);if(T)return!0;for(const I of w){const O=I.children(this._source.maxzoom);this._updateFadingChildren(o,O,f,y)&&(T=!0)}return T}_updateFadingChildren(o,f,y,w){if(f[0].overscaledZ>=this._source.maxzoom)return!1;let T=!1;for(const I of f){const O=this._getLoadedTile(I);if(!O)continue;const{fadingRole:V,fadingDirection:se,fadingParentID:oe}=O;V===yr.Base&&se===it.Departing&&oe||(O.setCrossFadeLogic({fadingRole:yr.Base,fadingDirection:it.Departing,fadingParentID:o.tileID,fadeEndTime:w+this._rasterFadeDuration}),o.setCrossFadeLogic({fadingRole:yr.Parent,fadingDirection:it.Incoming,fadeEndTime:w+this._rasterFadeDuration})),y[I.key]=I,T=!0}return T}_updateFadingEdge(o,f,y){const w=o.tileID;return!!o.selfFading||!o.hasData()&&!!f.has(w)&&(o.setSelfFadeLogic(y+this._rasterFadeDuration),!0)}_addTile(o){let f=this._tiles[o.key];if(f)return f;f=this._cache.getAndRemove(o),f&&(f.resetFadeLogic(),this._setTileReloadTimer(o.key,f),f.tileID=o,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,f)));const y=f;return f||(f=new ye(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(f,o.key,f.state)),f.uses++,this._tiles[o.key]=f,y||this._source.fire(new s.l("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f}_setTileReloadTimer(o,f){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const y=f.getExpiryTimeout();y&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},y))}refreshTiles(o){for(const f in this._tiles)(this._isIdRenderable(f)||this._tiles[f].state=="errored")&&o.some(y=>y.equals(this._tiles[f].tileID.canonical))&&this._reloadTile(f,"expired")}_removeTile(o){const f=this._tiles[o];f&&(f.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))}_dataHandler(o){o.dataType==="source"&&(o.sourceDataType!=="metadata"?o.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(o.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,f,y){const w=[],T=this.transform;if(!T)return w;const I=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=y?T.getCameraQueryGeometry(o):o,V=Ee=>T.screenPointToMercatorCoordinate(Ee,this.terrain),se=this.transformBbox(o,V,!I),oe=this.transformBbox(O,V,!I),ge=this.getIds(),de=s.a2.fromPoints(oe);for(let Ee=0;Ee<ge.length;Ee++){const je=this._tiles[ge[Ee]];if(je.holdingForSymbolFade())continue;const Je=I?[je.tileID]:[je.tileID.unwrapTo(-1),je.tileID.unwrapTo(0)],tt=Math.pow(2,T.zoom-je.tileID.overscaledZ),at=f*je.queryPadding*s.$/je.tileSize/tt;for(const ft of Je){const mt=de.map(pt=>ft.getTilePoint(new s.a1(pt.x,pt.y)));if(mt.expandBy(at),mt.intersects(Ji)){const pt=se.map(St=>ft.getTilePoint(St)),bt=oe.map(St=>ft.getTilePoint(St));w.push({tile:je,tileID:I?ft:ft.unwrapTo(0),queryGeometry:pt,cameraQueryGeometry:bt,scale:tt})}}}return w}transformBbox(o,f,y){let w=o.map(f);if(y){const T=s.a2.fromPoints(o);T.shrinkBy(.001*Math.min(T.width(),T.height()));const I=T.map(f);s.a2.fromPoints(w).covers(I)||(w=w.map(O=>O.x>.5?new s.a1(O.x-1,O.y,O.z):O))}return w}getVisibleCoordinates(o){const f=this.getRenderableIds(o).map(y=>this._tiles[y].tileID);return this.transform&&this.transform.populateCache(f),f}hasTransition(){if(this._source.hasTransition())return!0;if(In(this._source.type)&&this._rasterFadeDuration>0){const o=F.now();for(const f in this._tiles)if(this._tiles[f].fadeEndTime>=o)return!0}return!1}setRasterFadeDuration(o){this._rasterFadeDuration=o}setFeatureState(o,f,y){this._state.updateState(o=o||"_geojsonTileLayer",f,y)}removeFeatureState(o,f,y){this._state.removeFeatureState(o=o||"_geojsonTileLayer",f,y)}getFeatureState(o,f){return this._state.getState(o=o||"_geojsonTileLayer",f)}setDependencies(o,f,y){const w=this._tiles[o];w&&w.setDependencies(f,y)}reloadTilesForDependencies(o,f){for(const y in this._tiles)this._tiles[y].hasDependency(o,f)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(o,f))}}function Ri(S,o){const f=Math.abs(2*S.wrap)-+(S.wrap<0),y=Math.abs(2*o.wrap)-+(o.wrap<0);return S.overscaledZ-o.overscaledZ||y-f||o.canonical.y-S.canonical.y||o.canonical.x-S.canonical.x}function In(S){return S==="raster"||S==="image"||S==="video"}Hr.maxOverzooming=10,Hr.maxUnderzooming=3;class Yr{constructor(o,f){this.reset(o,f)}reset(o,f){this.points=o||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=s.ah(o,0,1);let f=1,y=this._distances[f];const w=o*this.paddedLength+this.padding;for(;y<w&&f<this._distances.length;)y=this._distances[++f];const T=f-1,I=this._distances[T],O=y-I,V=O>0?(w-I)/O:0;return this.points[T].mult(1-V).add(this.points[f].mult(V))}}function on(S,o){let f=!0;return S==="always"||S!=="never"&&o!=="never"||(f=!1),f}class $i{constructor(o,f,y){const w=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(o/y),this.yCellCount=Math.ceil(f/y);for(let I=0;I<this.xCellCount*this.yCellCount;I++)w.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=f,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,f,y,w,T){this._forEachCell(f,y,w,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(T)}insertCircle(o,f,y,w){this._forEachCell(f-w,y-w,f+w,y+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(f),this.circles.push(y),this.circles.push(w)}_insertBoxCell(o,f,y,w,T,I){this.boxCells[T].push(I)}_insertCircleCell(o,f,y,w,T,I){this.circleCells[T].push(I)}_query(o,f,y,w,T,I,O){if(y<0||o>this.width||w<0||f>this.height)return[];const V=[];if(o<=0&&f<=0&&this.width<=y&&this.height<=w){if(T)return[{key:null,x1:o,y1:f,x2:y,y2:w}];for(let se=0;se<this.boxKeys.length;se++)V.push({key:this.boxKeys[se],x1:this.bboxes[4*se],y1:this.bboxes[4*se+1],x2:this.bboxes[4*se+2],y2:this.bboxes[4*se+3]});for(let se=0;se<this.circleKeys.length;se++){const oe=this.circles[3*se],ge=this.circles[3*se+1],de=this.circles[3*se+2];V.push({key:this.circleKeys[se],x1:oe-de,y1:ge-de,x2:oe+de,y2:ge+de})}}else this._forEachCell(o,f,y,w,this._queryCell,V,{hitTest:T,overlapMode:I,seenUids:{box:{},circle:{}}},O);return V}query(o,f,y,w){return this._query(o,f,y,w,!1,null)}hitTest(o,f,y,w,T,I){return this._query(o,f,y,w,!0,T,I).length>0}hitTestCircle(o,f,y,w,T){const I=o-y,O=o+y,V=f-y,se=f+y;if(O<0||I>this.width||se<0||V>this.height)return!1;const oe=[];return this._forEachCell(I,V,O,se,this._queryCellCircle,oe,{hitTest:!0,overlapMode:w,circle:{x:o,y:f,radius:y},seenUids:{box:{},circle:{}}},T),oe.length>0}_queryCell(o,f,y,w,T,I,O,V){const{seenUids:se,hitTest:oe,overlapMode:ge}=O,de=this.boxCells[T];if(de!==null){const je=this.bboxes;for(const Je of de)if(!se.box[Je]){se.box[Je]=!0;const tt=4*Je,at=this.boxKeys[Je];if(o<=je[tt+2]&&f<=je[tt+3]&&y>=je[tt+0]&&w>=je[tt+1]&&(!V||V(at))&&(!oe||!on(ge,at.overlapMode))&&(I.push({key:at,x1:je[tt],y1:je[tt+1],x2:je[tt+2],y2:je[tt+3]}),oe))return!0}}const Ee=this.circleCells[T];if(Ee!==null){const je=this.circles;for(const Je of Ee)if(!se.circle[Je]){se.circle[Je]=!0;const tt=3*Je,at=this.circleKeys[Je];if(this._circleAndRectCollide(je[tt],je[tt+1],je[tt+2],o,f,y,w)&&(!V||V(at))&&(!oe||!on(ge,at.overlapMode))){const ft=je[tt],mt=je[tt+1],pt=je[tt+2];if(I.push({key:at,x1:ft-pt,y1:mt-pt,x2:ft+pt,y2:mt+pt}),oe)return!0}}}return!1}_queryCellCircle(o,f,y,w,T,I,O,V){const{circle:se,seenUids:oe,overlapMode:ge}=O,de=this.boxCells[T];if(de!==null){const je=this.bboxes;for(const Je of de)if(!oe.box[Je]){oe.box[Je]=!0;const tt=4*Je,at=this.boxKeys[Je];if(this._circleAndRectCollide(se.x,se.y,se.radius,je[tt+0],je[tt+1],je[tt+2],je[tt+3])&&(!V||V(at))&&!on(ge,at.overlapMode))return I.push(!0),!0}}const Ee=this.circleCells[T];if(Ee!==null){const je=this.circles;for(const Je of Ee)if(!oe.circle[Je]){oe.circle[Je]=!0;const tt=3*Je,at=this.circleKeys[Je];if(this._circlesCollide(je[tt],je[tt+1],je[tt+2],se.x,se.y,se.radius)&&(!V||V(at))&&!on(ge,at.overlapMode))return I.push(!0),!0}}}_forEachCell(o,f,y,w,T,I,O,V){const se=this._convertToXCellCoord(o),oe=this._convertToYCellCoord(f),ge=this._convertToXCellCoord(y),de=this._convertToYCellCoord(w);for(let Ee=se;Ee<=ge;Ee++)for(let je=oe;je<=de;je++)if(T.call(this,o,f,y,w,this.xCellCount*je+Ee,I,O,V))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,f,y,w,T,I){const O=w-o,V=T-f,se=y+I;return se*se>O*O+V*V}_circleAndRectCollide(o,f,y,w,T,I,O){const V=(I-w)/2,se=Math.abs(o-(w+V));if(se>V+y)return!1;const oe=(O-T)/2,ge=Math.abs(f-(T+oe));if(ge>oe+y)return!1;if(se<=V||ge<=oe)return!0;const de=se-V,Ee=ge-oe;return de*de+Ee*Ee<=y*y}}function mi(S,o,f){const y=s.L();if(!S){const{vecSouth:ge,vecEast:de}=gi(o),Ee=g();Ee[0]=de[0],Ee[1]=de[1],Ee[2]=ge[0],Ee[3]=ge[1],w=Ee,(oe=(I=(T=Ee)[0])*(se=T[3])-(V=T[2])*(O=T[1]))&&(w[0]=se*(oe=1/oe),w[1]=-O*oe,w[2]=-V*oe,w[3]=I*oe),y[0]=Ee[0],y[1]=Ee[1],y[4]=Ee[2],y[5]=Ee[3]}var w,T,I,O,V,se,oe;return s.N(y,y,[1/f,1/f,1]),y}function ln(S,o,f,y){if(S){const w=s.L();if(!o){const{vecSouth:T,vecEast:I}=gi(f);w[0]=I[0],w[1]=I[1],w[4]=T[0],w[5]=T[1]}return s.N(w,w,[y,y,1]),w}return f.pixelsToClipSpaceMatrix}function gi(S){const o=Math.cos(S.rollInRadians),f=Math.sin(S.rollInRadians),y=Math.cos(S.pitchInRadians),w=Math.cos(S.bearingInRadians),T=Math.sin(S.bearingInRadians),I=s.ar();I[0]=-w*y*f-T*o,I[1]=-T*y*f+w*o;const O=s.as(I);O<1e-9?s.at(I):s.au(I,I,1/O);const V=s.ar();V[0]=w*y*o-T*f,V[1]=T*y*o+w*f;const se=s.as(V);return se<1e-9?s.at(V):s.au(V,V,1/se),{vecEast:V,vecSouth:I}}function dr(S,o,f,y){let w;y?(w=[S,o,y(S,o),1],s.aw(w,w,f)):(w=[S,o,0,1],yi(w,w,f));const T=w[3];return{point:new s.P(w[0]/T,w[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function De(S,o){return .5+S/o*.5}function lt(S,o){return S.x>=-o[0]&&S.x<=o[0]&&S.y>=-o[1]&&S.y<=o[1]}function Ye(S,o,f,y,w,T,I,O,V,se,oe,ge,de){const Ee=f?S.textSizeData:S.iconSizeData,je=s.an(Ee,o.transform.zoom),Je=[256/o.width*2+1,256/o.height*2+1],tt=f?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;tt.clear();const at=S.lineVertexArray,ft=f?S.text.placedSymbolArray:S.icon.placedSymbolArray,mt=o.transform.width/o.transform.height;let pt=!1;for(let bt=0;bt<ft.length;bt++){const St=ft.get(bt);if(St.hidden||St.writingMode===s.ao.vertical&&!pt){Gr(St.numGlyphs,tt);continue}pt=!1;const gt=new s.P(St.anchorX,St.anchorY),kt={getElevation:de,pitchedLabelPlaneMatrix:y,lineVertexArray:at,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:o.transform,tileAnchorPoint:gt,unwrappedTileID:V,width:se,height:oe,translation:ge},tr=Mt(St.anchorX,St.anchorY,kt);if(!lt(tr.point,Je)){Gr(St.numGlyphs,tt);continue}const Vt=De(o.transform.cameraToCenterDistance,tr.signedDistanceFromCamera),Wt=s.ap(Ee,je,St),Xt=T?Wt*o.transform.getPitchedTextCorrection(St.anchorX,St.anchorY,V)/Vt:Wt*Vt,Sr=st({projectionContext:kt,pitchedLabelPlaneMatrixInverse:w,symbol:St,fontSize:Xt,flip:!1,keepUpright:I,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:tt,aspectRatio:mt,rotateToLine:O});pt=Sr.useVertical,(Sr.notEnoughRoom||pt||Sr.needsFlipping&&st({projectionContext:kt,pitchedLabelPlaneMatrixInverse:w,symbol:St,fontSize:Xt,flip:!0,keepUpright:I,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:tt,aspectRatio:mt,rotateToLine:O}).notEnoughRoom)&&Gr(St.numGlyphs,tt)}f?S.text.dynamicLayoutVertexBuffer.updateData(tt):S.icon.dynamicLayoutVertexBuffer.updateData(tt)}function nt(S,o,f,y,w,T,I,O){const V=T.glyphStartIndex+T.numGlyphs,se=T.lineStartIndex,oe=T.lineStartIndex+T.lineLength,ge=o.getoffsetX(T.glyphStartIndex),de=o.getoffsetX(V-1),Ee=Kr(S*ge,f,y,w,T.segment,se,oe,O,I);if(!Ee)return null;const je=Kr(S*de,f,y,w,T.segment,se,oe,O,I);return je?O.projectionCache.anyProjectionOccluded?null:{first:Ee,last:je}:null}function Qe(S,o,f,y){return S===s.ao.horizontal&&Math.abs(f.y-o.y)>Math.abs(f.x-o.x)*y?{useVertical:!0}:(S===s.ao.vertical?o.y<f.y:o.x>f.x)?{needsFlipping:!0}:null}function st(S){const{projectionContext:o,pitchedLabelPlaneMatrixInverse:f,symbol:y,fontSize:w,flip:T,keepUpright:I,glyphOffsetArray:O,dynamicLayoutVertexArray:V,aspectRatio:se,rotateToLine:oe}=S,ge=w/24,de=y.lineOffsetX*ge,Ee=y.lineOffsetY*ge;let je;if(y.numGlyphs>1){const Je=y.glyphStartIndex+y.numGlyphs,tt=y.lineStartIndex,at=y.lineStartIndex+y.lineLength,ft=nt(ge,O,de,Ee,T,y,oe,o);if(!ft)return{notEnoughRoom:!0};const mt=Kt(ft.first.point.x,ft.first.point.y,o,f),pt=Kt(ft.last.point.x,ft.last.point.y,o,f);if(I&&!T){const bt=Qe(y.writingMode,mt,pt,se);if(bt)return bt}je=[ft.first];for(let bt=y.glyphStartIndex+1;bt<Je-1;bt++){const St=Kr(ge*O.getoffsetX(bt),de,Ee,T,y.segment,tt,at,o,oe);if(!St)return{notEnoughRoom:!0};je.push(St)}je.push(ft.last)}else{if(I&&!T){const tt=jt(o.tileAnchorPoint.x,o.tileAnchorPoint.y,o).point,at=y.lineStartIndex+y.segment+1,ft=new s.P(o.lineVertexArray.getx(at),o.lineVertexArray.gety(at)),mt=jt(ft.x,ft.y,o),pt=mt.signedDistanceFromCamera>0?mt.point:Tt(o.tileAnchorPoint,ft,tt,1,o),bt=Kt(tt.x,tt.y,o,f),St=Kt(pt.x,pt.y,o,f),gt=Qe(y.writingMode,bt,St,se);if(gt)return gt}const Je=Kr(ge*O.getoffsetX(y.glyphStartIndex),de,Ee,T,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,o,oe);if(!Je||o.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};je=[Je]}for(const Je of je)s.av(V,Je.point,Je.angle);return{}}function Tt(S,o,f,y,w){const T=S.add(S.sub(o)._unit()),I=jt(T.x,T.y,w).point,O=f.sub(I);return f.add(O._mult(y/O.mag()))}function sr(S,o,f){const y=o.projectionCache;if(y.projections[S])return y.projections[S];const w=new s.P(o.lineVertexArray.getx(S),o.lineVertexArray.gety(S)),T=jt(w.x,w.y,o);if(T.signedDistanceFromCamera>0)return y.projections[S]=T.point,y.anyProjectionOccluded=y.anyProjectionOccluded||T.isOccluded,T.point;const I=S-f.direction;return Tt(f.distanceFromAnchor===0?o.tileAnchorPoint:new s.P(o.lineVertexArray.getx(I),o.lineVertexArray.gety(I)),w,f.previousVertex,f.absOffsetX-f.distanceFromAnchor+1,o)}function jt(S,o,f){const y=S+f.translation[0],w=o+f.translation[1];let T;return f.pitchWithMap?(T=dr(y,w,f.pitchedLabelPlaneMatrix,f.getElevation),T.isOccluded=!1):(T=f.transform.projectTileCoordinates(y,w,f.unwrappedTileID,f.getElevation),T.point.x=(.5*T.point.x+.5)*f.width,T.point.y=(.5*-T.point.y+.5)*f.height),T}function Kt(S,o,f,y){if(f.pitchWithMap){const w=[S,o,0,1];return s.aw(w,w,y),f.transform.projectTileCoordinates(w[0]/w[3],w[1]/w[3],f.unwrappedTileID,f.getElevation).point}return{x:S/f.width*2-1,y:1-o/f.height*2}}function Mt(S,o,f){return f.transform.projectTileCoordinates(S,o,f.unwrappedTileID,f.getElevation)}function Cr(S,o,f){return S._unit()._perp()._mult(o*f)}function Dr(S,o,f,y,w,T,I,O,V){if(O.projectionCache.offsets[S])return O.projectionCache.offsets[S];const se=f.add(o);if(S+V.direction<y||S+V.direction>=w)return O.projectionCache.offsets[S]=se,se;const oe=sr(S+V.direction,O,V),ge=Cr(oe.sub(f),I,V.direction),de=f.add(ge),Ee=oe.add(ge);return O.projectionCache.offsets[S]=s.ax(T,se,de,Ee)||se,O.projectionCache.offsets[S]}function Kr(S,o,f,y,w,T,I,O,V){const se=y?S-o:S+o;let oe=se>0?1:-1,ge=0;y&&(oe*=-1,ge=Math.PI),oe<0&&(ge+=Math.PI);let de,Ee=oe>0?T+w:T+w+1;O.projectionCache.cachedAnchorPoint?de=O.projectionCache.cachedAnchorPoint:(de=jt(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=de);let je,Je,tt=de,at=de,ft=0,mt=0;const pt=Math.abs(se),bt=[];let St;for(;ft+mt<=pt;){if(Ee+=oe,Ee<T||Ee>=I)return null;ft+=mt,at=tt,Je=je;const tr={absOffsetX:pt,direction:oe,distanceFromAnchor:ft,previousVertex:at};if(tt=sr(Ee,O,tr),f===0)bt.push(at),St=tt.sub(at);else{let Vt;const Wt=tt.sub(at);Vt=Wt.mag()===0?Cr(sr(Ee+oe,O,tr).sub(tt),f,oe):Cr(Wt,f,oe),Je||(Je=at.add(Vt)),je=Dr(Ee,Vt,tt,T,I,Je,f,O,tr),bt.push(Je),St=je.sub(Je)}mt=St.mag()}const gt=St._mult((pt-ft)/mt)._add(Je||at),kt=ge+Math.atan2(tt.y-at.y,tt.x-at.x);return bt.push(gt),{point:gt,angle:V?kt:0,path:bt}}const Pr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gr(S,o){for(let f=0;f<S;f++){const y=o.length;o.resize(y+4),o.float32.set(Pr,3*y)}}function yi(S,o,f){const y=o[0],w=o[1];return S[0]=f[0]*y+f[4]*w+f[12],S[1]=f[1]*y+f[5]*w+f[13],S[3]=f[3]*y+f[7]*w+f[15],S}const Fi=100;class Ni{constructor(o,f=new $i(o.width+200,o.height+200,25),y=new $i(o.width+200,o.height+200,25)){this.transform=o,this.grid=f,this.ignoredGrid=y,this.pitchFactor=Math.cos(o.pitch*Math.PI/180)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Fi,this.screenBottomBoundary=o.height+Fi,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,f,y,w,T,I,O,V,se,oe,ge,de){const Ee=this.projectAndGetPerspectiveRatio(o.anchorPointX+V[0],o.anchorPointY+V[1],T,oe,de),je=y*Ee.perspectiveRatio;let Je;if(I||O)Je=this._projectCollisionBox(o,je,w,T,I,O,V,Ee,oe,ge,de);else{const St=Ee.x+(ge?ge.x*je:0),gt=Ee.y+(ge?ge.y*je:0);Je={allPointsOccluded:!1,box:[St+o.x1*je,gt+o.y1*je,St+o.x2*je,gt+o.y2*je]}}const[tt,at,ft,mt]=Je.box,pt=I?Je.allPointsOccluded:Ee.isOccluded;let bt=pt;return bt||(bt=Ee.perspectiveRatio<this.perspectiveRatioCutoff),bt||(bt=!this.isInsideGrid(tt,at,ft,mt)),bt||f!=="always"&&this.grid.hitTest(tt,at,ft,mt,f,se)?{box:[tt,at,ft,mt],placeable:!1,offscreen:!1,occluded:pt}:{box:[tt,at,ft,mt],placeable:!0,offscreen:this.isOffscreen(tt,at,ft,mt),occluded:pt}}placeCollisionCircles(o,f,y,w,T,I,O,V,se,oe,ge,de,Ee,je){const Je=[],tt=new s.P(f.anchorX,f.anchorY),at=this.getPerspectiveRatio(tt.x,tt.y,I,je),ft=(se?T*this.transform.getPitchedTextCorrection(f.anchorX,f.anchorY,I)/at:T*at)/s.aB,mt={getElevation:je,pitchedLabelPlaneMatrix:O,lineVertexArray:y,pitchWithMap:se,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:tt,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:Ee},pt=nt(ft,w,f.lineOffsetX*ft,f.lineOffsetY*ft,!1,f,!1,mt);let bt=!1,St=!1,gt=!0;if(pt){const kt=.5*ge*at+de,tr=new s.P(-100,-100),Vt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Wt=new Yr,Xt=pt.first,Sr=pt.last;let Er=[];for(let Bi=Xt.path.length-1;Bi>=1;Bi--)Er.push(Xt.path[Bi]);for(let Bi=1;Bi<Sr.path.length;Bi++)Er.push(Sr.path[Bi]);const gr=2.5*kt;if(se){const Bi=this.projectPathToScreenSpace(Er,mt);Er=Bi.some(En=>En.signedDistanceFromCamera<=0)?[]:Bi.map(En=>En.point)}let Xr=[];if(Er.length>0){const Bi=Er[0].clone(),En=Er[0].clone();for(let Nn=1;Nn<Er.length;Nn++)Bi.x=Math.min(Bi.x,Er[Nn].x),Bi.y=Math.min(Bi.y,Er[Nn].y),En.x=Math.max(En.x,Er[Nn].x),En.y=Math.max(En.y,Er[Nn].y);Xr=Bi.x>=tr.x&&En.x<=Vt.x&&Bi.y>=tr.y&&En.y<=Vt.y?[Er]:En.x<tr.x||Bi.x>Vt.x||En.y<tr.y||Bi.y>Vt.y?[]:s.ay([Er],tr.x,tr.y,Vt.x,Vt.y)}for(const Bi of Xr){Wt.reset(Bi,.25*kt);let En=0;En=Wt.length<=.5*kt?1:Math.ceil(Wt.paddedLength/gr)+1;for(let Nn=0;Nn<En;Nn++){const Mn=Nn/Math.max(En-1,1),ss=Wt.lerp(Mn),as=ss.x+Fi,rn=ss.y+Fi;Je.push(as,rn,kt,0);const us=as-kt,Sa=rn-kt,ia=as+kt,na=rn+kt;if(gt=gt&&this.isOffscreen(us,Sa,ia,na),St=St||this.isInsideGrid(us,Sa,ia,na),o!=="always"&&this.grid.hitTestCircle(as,rn,kt,o,oe)&&(bt=!0,!V))return{circles:[],offscreen:!1,collisionDetected:bt}}}}return{circles:!V&&bt||!St||at<this.perspectiveRatioCutoff?[]:Je,offscreen:gt,collisionDetected:bt}}projectPathToScreenSpace(o,f){const y=function(w,T){const I=s.L();return s.aq(I,T.pitchedLabelPlaneMatrix),w.map(O=>{const V=dr(O.x,O.y,I,T.getElevation),se=T.transform.projectTileCoordinates(V.point.x,V.point.y,T.unwrappedTileID,T.getElevation);return se.point.x=(.5*se.point.x+.5)*T.width,se.point.y=(.5*-se.point.y+.5)*T.height,se})}(o,f);return function(w){let T=0,I=0,O=0,V=0;for(let se=0;se<w.length;se++)w[se].isOccluded?(O=se+1,V=0):(V++,V>I&&(I=V,T=O));return w.slice(T,T+I)}(y)}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[],y=new s.a2;for(const ge of o){const de=new s.P(ge.x+Fi,ge.y+Fi);y.extend(de),f.push(de)}const{minX:w,minY:T,maxX:I,maxY:O}=y,V=this.grid.query(w,T,I,O).concat(this.ignoredGrid.query(w,T,I,O)),se={},oe={};for(const ge of V){const de=ge.key;if(se[de.bucketInstanceId]===void 0&&(se[de.bucketInstanceId]={}),se[de.bucketInstanceId][de.featureIndex])continue;const Ee=[new s.P(ge.x1,ge.y1),new s.P(ge.x2,ge.y1),new s.P(ge.x2,ge.y2),new s.P(ge.x1,ge.y2)];s.az(f,Ee)&&(se[de.bucketInstanceId][de.featureIndex]=!0,oe[de.bucketInstanceId]===void 0&&(oe[de.bucketInstanceId]=[]),oe[de.bucketInstanceId].push(de.featureIndex))}return oe}insertCollisionBox(o,f,y,w,T,I){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:T,collisionGroupID:I,overlapMode:f},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,f,y,w,T,I){const O=y?this.ignoredGrid:this.grid,V={bucketInstanceId:w,featureIndex:T,collisionGroupID:I,overlapMode:f};for(let se=0;se<o.length;se+=4)O.insertCircle(V,o[se],o[se+1],o[se+2])}projectAndGetPerspectiveRatio(o,f,y,w,T){if(T){let I;w?(I=[o,f,w(o,f),1],s.aw(I,I,T)):(I=[o,f,0,1],yi(I,I,T));const O=I[3];return{x:(I[0]/O+1)/2*this.transform.width+Fi,y:(-I[1]/O+1)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const I=this.transform.projectTileCoordinates(o,f,y,w);return{x:(I.point.x+1)/2*this.transform.width+Fi,y:(1-I.point.y)/2*this.transform.height+Fi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5,isOccluded:I.isOccluded,signedDistanceFromCamera:I.signedDistanceFromCamera}}}getPerspectiveRatio(o,f,y,w){const T=this.transform.projectTileCoordinates(o,f,y,w);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(o,f,y,w){return y<Fi||o>=this.screenRightBoundary||w<Fi||f>this.screenBottomBoundary}isInsideGrid(o,f,y,w){return y>=0&&o<this.gridRightBoundary&&w>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const o=s.ag([]);return s.M(o,o,[-100,-100,0]),o}_projectCollisionBox(o,f,y,w,T,I,O,V,se,oe,ge){let de=1,Ee=0,je=0,Je=1;const tt=o.anchorPointX+O[0],at=o.anchorPointY+O[1];if(I&&!T){const Er=this.projectAndGetPerspectiveRatio(tt+1,at,w,se,ge),gr=Er.x-V.x,Xr=Math.atan((Er.y-V.y)/gr)+(gr<0?Math.PI:0),Bi=Math.sin(Xr),En=Math.cos(Xr);de=En,Ee=Bi,je=-Bi,Je=En}else if(!I&&T){const Er=gi(this.transform);de=Er.vecEast[0],Ee=Er.vecEast[1],je=Er.vecSouth[0],Je=Er.vecSouth[1]}let ft=V.x,mt=V.y,pt=f;T&&(ft=tt,mt=at,pt=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),pt*=this.transform.getPitchedTextCorrection(tt,at,w),oe||(pt*=s.ah(.5+V.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),oe&&(ft+=de*oe.x*pt+je*oe.y*pt,mt+=Ee*oe.x*pt+Je*oe.y*pt);const bt=o.x1*pt,St=o.x2*pt,gt=(bt+St)/2,kt=o.y1*pt,tr=o.y2*pt,Vt=(kt+tr)/2,Wt=[{offsetX:bt,offsetY:kt},{offsetX:gt,offsetY:kt},{offsetX:St,offsetY:kt},{offsetX:St,offsetY:Vt},{offsetX:St,offsetY:tr},{offsetX:gt,offsetY:tr},{offsetX:bt,offsetY:tr},{offsetX:bt,offsetY:Vt}];let Xt=[];for(const{offsetX:Er,offsetY:gr}of Wt)Xt.push(new s.P(ft+de*Er+je*gr,mt+Ee*Er+Je*gr));let Sr=!1;if(T){const Er=Xt.map(gr=>this.projectAndGetPerspectiveRatio(gr.x,gr.y,w,se,ge));Sr=Er.some(gr=>!gr.isOccluded),Xt=Er.map(gr=>new s.P(gr.x,gr.y))}else Sr=!0;return{box:s.aA(Xt),allPointsOccluded:!Sr}}}class _i{constructor(o,f,y,w){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?f:-f))):w&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Qa{constructor(o,f,y,w,T){this.text=new _i(o?o.text:null,f,y,T),this.icon=new _i(o?o.icon:null,f,w,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class La{constructor(o,f,y){this.text=o,this.icon=f,this.skipFade=y}}class Ma{constructor(o,f,y,w,T){this.bucketInstanceId=o,this.featureIndex=f,this.sourceLayerIndex=y,this.bucketIndex=w,this.tileID=T}}class ea{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const f=++this.maxGroupID;this.collisionGroups[o]={ID:f,predicate:y=>y.collisionGroupID===f}}return this.collisionGroups[o]}}function xa(S,o,f,y,w){const{horizontalAlign:T,verticalAlign:I}=s.aH(S);return new s.P(-(T-.5)*o+y[0]*w,-(I-.5)*f+y[1]*w)}class Qs{constructor(o,f,y,w,T){this.transform=o.clone(),this.terrain=f,this.collisionIndex=new Ni(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ea(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){const f=this.terrain;return f?(y,w)=>f.getElevation(o,y,w):null}getBucketParts(o,f,y,w){const T=y.getBucket(f),I=y.latestFeatureIndex;if(!T||!I||f.id!==T.layerIds[0])return;const O=y.collisionBoxArray,V=T.layers[0].layout,se=T.layers[0].paint,oe=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),ge=y.tileSize/s.$,de=y.tileID.toUnwrapped(),Ee=V.get("text-rotation-alignment")==="map",je=s.aC(y,1,this.transform.zoom),Je=s.aD(this.collisionIndex.transform,y,se.get("text-translate"),se.get("text-translate-anchor")),tt=s.aD(this.collisionIndex.transform,y,se.get("icon-translate"),se.get("icon-translate-anchor")),at=mi(Ee,this.transform,je);this.retainedQueryData[T.bucketInstanceId]=new Ma(T.bucketInstanceId,I,T.sourceLayerIndex,T.index,y.tileID);const ft={bucket:T,layout:V,translationText:Je,translationIcon:tt,unwrappedTileID:de,pitchedLabelPlaneMatrix:at,scale:oe,textPixelRatio:ge,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:s.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(w)for(const mt of T.sortKeyRanges){const{sortKey:pt,symbolInstanceStart:bt,symbolInstanceEnd:St}=mt;o.push({sortKey:pt,symbolInstanceStart:bt,symbolInstanceEnd:St,parameters:ft})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:ft})}attemptAnchorPlacement(o,f,y,w,T,I,O,V,se,oe,ge,de,Ee,je,Je,tt,at,ft,mt,pt){const bt=s.aE[o.textAnchor],St=[o.textOffset0,o.textOffset1],gt=xa(bt,y,w,St,T),kt=this.collisionIndex.placeCollisionBox(f,de,V,se,oe,O,I,tt,ge.predicate,mt,gt,pt);if((!ft||this.collisionIndex.placeCollisionBox(ft,de,V,se,oe,O,I,at,ge.predicate,mt,gt,pt).placeable)&&kt.placeable){let tr;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ee.crossTileID]&&this.prevPlacement.placements[Ee.crossTileID]&&this.prevPlacement.placements[Ee.crossTileID].text&&(tr=this.prevPlacement.variableOffsets[Ee.crossTileID].anchor),Ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ee.crossTileID]={textOffset:St,width:y,height:w,anchor:bt,textBoxScale:T,prevAnchor:tr},this.markUsedJustification(je,bt,Ee,Je),je.allowVerticalPlacement&&(this.markUsedOrientation(je,Je,Ee),this.placedOrientations[Ee.crossTileID]=Je),{shift:gt,placedGlyphBoxes:kt}}}placeLayerBucketPart(o,f,y){const{bucket:w,layout:T,translationText:I,translationIcon:O,unwrappedTileID:V,pitchedLabelPlaneMatrix:se,textPixelRatio:oe,holdingForFade:ge,collisionBoxArray:de,partiallyEvaluatedTextSize:Ee,collisionGroup:je}=o.parameters,Je=T.get("text-optional"),tt=T.get("icon-optional"),at=s.aF(T,"text-overlap","text-allow-overlap"),ft=at==="always",mt=s.aF(T,"icon-overlap","icon-allow-overlap"),pt=mt==="always",bt=T.get("text-rotation-alignment")==="map",St=T.get("text-pitch-alignment")==="map",gt=T.get("icon-text-fit")!=="none",kt=T.get("symbol-z-order")==="viewport-y",tr=ft&&(pt||!w.hasIconData()||tt),Vt=pt&&(ft||!w.hasTextData()||Je);!w.collisionArrays&&de&&w.deserializeCollisionBoxes(de);const Wt=this.retainedQueryData[w.bucketInstanceId].tileID,Xt=this._getTerrainElevationFunc(Wt),Sr=this.transform.getFastPathSimpleProjectionMatrix(Wt),Er=(gr,Xr,Bi)=>{var En,Nn;if(f[gr.crossTileID])return;if(ge)return void(this.placements[gr.crossTileID]=new La(!1,!1,!1));let Mn=!1,ss=!1,as=!0,rn=null,us={box:null,placeable:!1,offscreen:null,occluded:!1},Sa={placeable:!1},ia=null,na=null,Za=null,yh=0,Ic=0,Dh=0;Xr.textFeatureIndex?yh=Xr.textFeatureIndex:gr.useRuntimeCollisionCircles&&(yh=gr.featureIndex),Xr.verticalTextFeatureIndex&&(Ic=Xr.verticalTextFeatureIndex);const Lc=Xr.textBox;if(Lc){const Do=Xs=>{let $n=s.ao.horizontal;if(w.allowVerticalPlacement&&!Xs&&this.prevPlacement){const sa=this.prevPlacement.placedOrientations[gr.crossTileID];sa&&(this.placedOrientations[gr.crossTileID]=sa,$n=sa,this.markUsedOrientation(w,$n,gr))}return $n},pu=(Xs,$n)=>{if(w.allowVerticalPlacement&&gr.numVerticalGlyphVertices>0&&Xr.verticalTextBox){for(const sa of w.writingModes)if(sa===s.ao.vertical?(us=$n(),Sa=us):us=Xs(),us&&us.placeable)break}else us=Xs()},mu=gr.textAnchorOffsetStartIndex,Ya=gr.textAnchorOffsetEndIndex;if(Ya===mu){const Xs=($n,sa)=>{const Ts=this.collisionIndex.placeCollisionBox($n,at,oe,Wt,V,St,bt,I,je.predicate,Xt,void 0,Sr);return Ts&&Ts.placeable&&(this.markUsedOrientation(w,sa,gr),this.placedOrientations[gr.crossTileID]=sa),Ts};pu(()=>Xs(Lc,s.ao.horizontal),()=>{const $n=Xr.verticalTextBox;return w.allowVerticalPlacement&&gr.numVerticalGlyphVertices>0&&$n?Xs($n,s.ao.vertical):{box:null,offscreen:null}}),Do(us&&us.placeable)}else{let Xs=s.aE[(Nn=(En=this.prevPlacement)===null||En===void 0?void 0:En.variableOffsets[gr.crossTileID])===null||Nn===void 0?void 0:Nn.anchor];const $n=(Ts,Tf,Mc)=>{const cl=Ts.x2-Ts.x1,hs=Ts.y2-Ts.y1,jl=gr.textBoxScale,Vu=gt&&mt==="never"?Tf:null;let Gu=null,kf=at==="never"?1:2,Ff="never";Xs&&kf++;for(let Ul=0;Ul<kf;Ul++){for(let td=mu;td<Ya;td++){const Nf=w.textAnchorOffsets.get(td);if(Xs&&Nf.textAnchor!==Xs)continue;const rd=this.attemptAnchorPlacement(Nf,Ts,cl,hs,jl,bt,St,oe,Wt,V,je,Ff,gr,w,Mc,I,O,Vu,Xt);if(rd&&(Gu=rd.placedGlyphBoxes,Gu&&Gu.placeable))return Mn=!0,rn=rd.shift,Gu}Xs?Xs=null:Ff=at}return y&&!Gu&&(Gu={box:this.collisionIndex.placeCollisionBox(Lc,"always",oe,Wt,V,St,bt,I,je.predicate,Xt,void 0,Sr).box,offscreen:!1,placeable:!1,occluded:!1}),Gu};pu(()=>$n(Lc,Xr.iconBox,s.ao.horizontal),()=>{const Ts=Xr.verticalTextBox;return w.allowVerticalPlacement&&(!us||!us.placeable)&&gr.numVerticalGlyphVertices>0&&Ts?$n(Ts,Xr.verticalIconBox,s.ao.vertical):{box:null,occluded:!0,offscreen:null}}),us&&(Mn=us.placeable,as=us.offscreen);const sa=Do(us&&us.placeable);if(!Mn&&this.prevPlacement){const Ts=this.prevPlacement.variableOffsets[gr.crossTileID];Ts&&(this.variableOffsets[gr.crossTileID]=Ts,this.markUsedJustification(w,Ts.anchor,gr,sa))}}}if(ia=us,Mn=ia&&ia.placeable,as=ia&&ia.offscreen,gr.useRuntimeCollisionCircles&&gr.centerJustifiedTextSymbolIndex>=0){const Do=w.text.placedSymbolArray.get(gr.centerJustifiedTextSymbolIndex),pu=s.ap(w.textSizeData,Ee,Do),mu=T.get("text-padding");na=this.collisionIndex.placeCollisionCircles(at,Do,w.lineVertexArray,w.glyphOffsetArray,pu,V,se,y,St,je.predicate,gr.collisionCircleDiameter,mu,I,Xt),na.circles.length&&na.collisionDetected&&!y&&s.w("Collisions detected, but collision boxes are not shown"),Mn=ft||na.circles.length>0&&!na.collisionDetected,as=as&&na.offscreen}if(Xr.iconFeatureIndex&&(Dh=Xr.iconFeatureIndex),Xr.iconBox){const Do=pu=>this.collisionIndex.placeCollisionBox(pu,mt,oe,Wt,V,St,bt,O,je.predicate,Xt,gt&&rn?rn:void 0,Sr);Sa&&Sa.placeable&&Xr.verticalIconBox?(Za=Do(Xr.verticalIconBox),ss=Za.placeable):(Za=Do(Xr.iconBox),ss=Za.placeable),as=as&&Za.offscreen}const jh=Je||gr.numHorizontalGlyphVertices===0&&gr.numVerticalGlyphVertices===0,_h=tt||gr.numIconVertices===0;jh||_h?_h?jh||(ss=ss&&Mn):Mn=ss&&Mn:ss=Mn=ss&&Mn;const lc=ss&&Za.placeable;if(Mn&&ia.placeable&&this.collisionIndex.insertCollisionBox(ia.box,at,T.get("text-ignore-placement"),w.bucketInstanceId,Sa&&Sa.placeable&&Ic?Ic:yh,je.ID),lc&&this.collisionIndex.insertCollisionBox(Za.box,mt,T.get("icon-ignore-placement"),w.bucketInstanceId,Dh,je.ID),na&&Mn&&this.collisionIndex.insertCollisionCircles(na.circles,at,T.get("text-ignore-placement"),w.bucketInstanceId,yh,je.ID),y&&this.storeCollisionData(w.bucketInstanceId,Bi,Xr,ia,Za,na),gr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[gr.crossTileID]=new La((Mn||tr)&&!ia?.occluded,(ss||Vt)&&!Za?.occluded,as||w.justReloaded),f[gr.crossTileID]=!0};if(kt){if(o.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const gr=w.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Xr=gr.length-1;Xr>=0;--Xr){const Bi=gr[Xr];Er(w.symbolInstances.get(Bi),w.collisionArrays[Bi],Bi)}}else for(let gr=o.symbolInstanceStart;gr<o.symbolInstanceEnd;gr++)Er(w.symbolInstances.get(gr),w.collisionArrays[gr],gr);w.justReloaded=!1}storeCollisionData(o,f,y,w,T,I){if(y.textBox||y.iconBox){let O,V;this.collisionBoxArrays.has(o)?O=this.collisionBoxArrays.get(o):(O=new Map,this.collisionBoxArrays.set(o,O)),O.has(f)?V=O.get(f):(V={text:null,icon:null},O.set(f,V)),y.textBox&&(V.text=w.box),y.iconBox&&(V.icon=T.box)}if(I){let O=this.collisionCircleArrays[o];O===void 0&&(O=this.collisionCircleArrays[o]=[]);for(let V=0;V<I.circles.length;V+=4)O.push(I.circles[V+0]-Fi),O.push(I.circles[V+1]-Fi),O.push(I.circles[V+2]),O.push(I.collisionDetected?1:0)}}markUsedJustification(o,f,y,w){let T;T=w===s.ao.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[s.aG(f)];const I=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const O of I)O>=0&&(o.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:y.crossTileID)}markUsedOrientation(o,f,y){const w=f===s.ao.horizontal||f===s.ao.horizontalOnly?f:0,T=f===s.ao.vertical?f:0,I=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const O of I)o.text.placedSymbolArray.get(O).placedOrientation=w;y.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let y=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const w=f?f.symbolFadeChange(o):1,T=f?f.opacities:{},I=f?f.variableOffsets:{},O=f?f.placedOrientations:{};for(const V in this.placements){const se=this.placements[V],oe=T[V];oe?(this.opacities[V]=new Qa(oe,w,se.text,se.icon),y=y||se.text!==oe.text.placed||se.icon!==oe.icon.placed):(this.opacities[V]=new Qa(null,w,se.text,se.icon,se.skipFade),y=y||se.text||se.icon)}for(const V in T){const se=T[V];if(!this.opacities[V]){const oe=new Qa(se,w,!1,!1);oe.isHidden()||(this.opacities[V]=oe,y=y||se.text.placed||se.icon.placed)}}for(const V in I)this.variableOffsets[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.variableOffsets[V]=I[V]);for(const V in O)this.placedOrientations[V]||!this.opacities[V]||this.opacities[V].isHidden()||(this.placedOrientations[V]=O[V]);if(f&&f.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:o)}updateLayerOpacities(o,f){const y={};for(const w of f){const T=w.getBucket(o);T&&w.latestFeatureIndex&&o.id===T.layerIds[0]&&this.updateBucketOpacities(T,w.tileID,y,w.collisionBoxArray)}}updateBucketOpacities(o,f,y,w){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const T=o.layers[0],I=T.layout,O=new Qa(null,0,!1,!1,!0),V=I.get("text-allow-overlap"),se=I.get("icon-allow-overlap"),oe=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ge=I.get("text-rotation-alignment")==="map",de=I.get("text-pitch-alignment")==="map",Ee=I.get("icon-text-fit")!=="none",je=new Qa(null,0,V&&(se||!o.hasIconData()||I.get("icon-optional")),se&&(V||!o.hasTextData()||I.get("text-optional")),!0);!o.collisionArrays&&w&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(w);const Je=(at,ft,mt)=>{for(let pt=0;pt<ft/4;pt++)at.opacityVertexArray.emplaceBack(mt);at.hasVisibleVertices=at.hasVisibleVertices||mt!==Pa},tt=this.collisionBoxArrays.get(o.bucketInstanceId);for(let at=0;at<o.symbolInstances.length;at++){const ft=o.symbolInstances.get(at),{numHorizontalGlyphVertices:mt,numVerticalGlyphVertices:pt,crossTileID:bt}=ft;let St=this.opacities[bt];y[bt]?St=O:St||(St=je,this.opacities[bt]=St),y[bt]=!0;const gt=ft.numIconVertices>0,kt=this.placedOrientations[ft.crossTileID],tr=kt===s.ao.vertical,Vt=kt===s.ao.horizontal||kt===s.ao.horizontalOnly;if(mt>0||pt>0){const Xt=kn(St.text);Je(o.text,mt,tr?Pa:Xt),Je(o.text,pt,Vt?Pa:Xt);const Sr=St.text.isHidden();[ft.rightJustifiedTextSymbolIndex,ft.centerJustifiedTextSymbolIndex,ft.leftJustifiedTextSymbolIndex].forEach(Xr=>{Xr>=0&&(o.text.placedSymbolArray.get(Xr).hidden=Sr||tr?1:0)}),ft.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(ft.verticalPlacedTextSymbolIndex).hidden=Sr||Vt?1:0);const Er=this.variableOffsets[ft.crossTileID];Er&&this.markUsedJustification(o,Er.anchor,ft,kt);const gr=this.placedOrientations[ft.crossTileID];gr&&(this.markUsedJustification(o,"left",ft,gr),this.markUsedOrientation(o,gr,ft))}if(gt){const Xt=kn(St.icon),Sr=!(Ee&&ft.verticalPlacedIconSymbolIndex&&tr);ft.placedIconSymbolIndex>=0&&(Je(o.icon,ft.numIconVertices,Sr?Xt:Pa),o.icon.placedSymbolArray.get(ft.placedIconSymbolIndex).hidden=St.icon.isHidden()),ft.verticalPlacedIconSymbolIndex>=0&&(Je(o.icon,ft.numVerticalIconVertices,Sr?Pa:Xt),o.icon.placedSymbolArray.get(ft.verticalPlacedIconSymbolIndex).hidden=St.icon.isHidden())}const Wt=tt&&tt.has(at)?tt.get(at):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Xt=o.collisionArrays[at];if(Xt){let Sr=new s.P(0,0);if(Xt.textBox||Xt.verticalTextBox){let Er=!0;if(oe){const gr=this.variableOffsets[bt];gr?(Sr=xa(gr.anchor,gr.width,gr.height,gr.textOffset,gr.textBoxScale),ge&&Sr._rotate(de?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Er=!1}if(Xt.textBox||Xt.verticalTextBox){let gr;Xt.textBox&&(gr=tr),Xt.verticalTextBox&&(gr=Vt),iu(o.textCollisionBox.collisionVertexArray,St.text.placed,!Er||gr,Wt.text,Sr.x,Sr.y)}}if(Xt.iconBox||Xt.verticalIconBox){const Er=!!(!Vt&&Xt.verticalIconBox);let gr;Xt.iconBox&&(gr=Er),Xt.verticalIconBox&&(gr=!Er),iu(o.iconCollisionBox.collisionVertexArray,St.icon.placed,gr,Wt.icon,Ee?Sr.x:0,Ee?Sr.y:0)}}}}if(o.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);o.bucketInstanceId in this.collisionCircleArrays&&(o.collisionCircleArray=this.collisionCircleArrays[o.bucketInstanceId],delete this.collisionCircleArrays[o.bucketInstanceId])}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,f){const y=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*y>o}setStale(){this.stale=!0}}function iu(S,o,f,y,w,T){y&&y.length!==0||(y=[0,0,0,0]);const I=y[0]-Fi,O=y[1]-Fi,V=y[2]-Fi,se=y[3]-Fi;S.emplaceBack(o?1:0,f?1:0,w||0,T||0,I,O),S.emplaceBack(o?1:0,f?1:0,w||0,T||0,V,O),S.emplaceBack(o?1:0,f?1:0,w||0,T||0,V,se),S.emplaceBack(o?1:0,f?1:0,w||0,T||0,I,se)}const no=Math.pow(2,25),rs=Math.pow(2,24),cA=Math.pow(2,17),$o=Math.pow(2,16),oh=Math.pow(2,9),lh=Math.pow(2,8),Xo=Math.pow(2,1);function kn(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;const o=S.placed?1:0,f=Math.floor(127*S.opacity);return f*no+o*rs+f*cA+o*$o+f*oh+o*lh+f*Xo+o}const Pa=0;class ch{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,f,y,w,T){const I=this._bucketParts;for(;this._currentTileIndex<o.length;)if(f.getBucketParts(I,w,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((O,V)=>O.sortKey-V.sortKey));this._currentPartIndex<I.length;)if(f.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,T())return!0;return!1}}class Nh{constructor(o,f,y,w,T,I,O,V){this.placement=new Qs(o,f,I,O,V),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(o,f,y){const w=F.now(),T=()=>!this._forceFullPlacement&&F.now()-w>2;for(;this._currentPlacementIndex>=0;){const I=f[o[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=O)&&(!I.maxzoom||I.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new ch(I)),this._inProgressLayer.continuePlacement(y[I.source],this.placement,this._showCollisionBoxes,I,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const To=512/s.$/2;class Zo{constructor(o,f,y){this.tileID=o,this.bucketInstanceId=y,this._symbolsByKey={};const w=new Map;for(let T=0;T<f.length;T++){const I=f.get(T),O=I.key,V=w.get(O);V?V.push(I):w.set(O,[I])}for(const[T,I]of w){const O={positions:I.map(V=>({x:Math.floor(V.anchorX*To),y:Math.floor(V.anchorY*To)})),crossTileIDs:I.map(V=>V.crossTileID)};if(O.positions.length>128){const V=new s.aI(O.positions.length,16,Uint16Array);for(const{x:se,y:oe}of O.positions)V.add(se,oe);V.finish(),delete O.positions,O.index=V}this._symbolsByKey[T]=O}}getScaledCoordinates(o,f){const{x:y,y:w,z:T}=this.tileID.canonical,{x:I,y:O,z:V}=f.canonical,se=To/Math.pow(2,V-T),oe=(O*s.$+o.anchorY)*se,ge=w*s.$*To;return{x:Math.floor((I*s.$+o.anchorX)*se-y*s.$*To),y:Math.floor(oe-ge)}}findMatches(o,f,y){const w=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let T=0;T<o.length;T++){const I=o.get(T);if(I.crossTileID)continue;const O=this._symbolsByKey[I.key];if(!O)continue;const V=this.getScaledCoordinates(I,f);if(O.index){const se=O.index.range(V.x-w,V.y-w,V.x+w,V.y+w).sort();for(const oe of se){const ge=O.crossTileIDs[oe];if(!y[ge]){y[ge]=!0,I.crossTileID=ge;break}}}else if(O.positions)for(let se=0;se<O.positions.length;se++){const oe=O.positions[se],ge=O.crossTileIDs[se];if(Math.abs(oe.x-V.x)<=w&&Math.abs(oe.y-V.y)<=w&&!y[ge]){y[ge]=!0,I.crossTileID=ge;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class uA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Yo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const f=Math.round((o-this.lng)/360);if(f!==0)for(const y in this.indexes){const w=this.indexes[y],T={};for(const I in w){const O=w[I];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+f),T[O.tileID.key]=O}this.indexes[y]=T}this.lng=o}addBucket(o,f,y){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let T=0;T<f.symbolInstances.length;T++)f.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const w=this.usedCrossTileIDs[o.overscaledZ];for(const T in this.indexes){const I=this.indexes[T];if(Number(T)>o.overscaledZ)for(const O in I){const V=I[O];V.tileID.isChildOf(o)&&V.findMatches(f.symbolInstances,o,w)}else{const O=I[o.scaledTo(Number(T)).key];O&&O.findMatches(f.symbolInstances,o,w)}}for(let T=0;T<f.symbolInstances.length;T++){const I=f.symbolInstances.get(T);I.crossTileID||(I.crossTileID=y.generate(),w[I.crossTileID]=!0)}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Zo(o,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(o,f){for(const y of f.getCrossTileIDsLists())for(const w of y)delete this.usedCrossTileIDs[o][w]}removeStaleBuckets(o){let f=!1;for(const y in this.indexes){const w=this.indexes[y];for(const T in w)o[w[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,w[T]),delete w[T],f=!0)}return f}}class vc{constructor(){this.layerIndexes={},this.crossTileIDs=new uA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,f,y){let w=this.layerIndexes[o.id];w===void 0&&(w=this.layerIndexes[o.id]=new Yo);let T=!1;const I={};w.handleWrapJump(y);for(const O of f){const V=O.getBucket(o);V&&o.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(O.tileID,V,this.crossTileIDs)&&(T=!0),I[V.bucketInstanceId]=!0)}return w.removeStaleBuckets(I)&&(T=!0),T}pruneUnusedLayers(o){const f={};o.forEach(y=>{f[y]=!0});for(const y in this.layerIndexes)f[y]||delete this.layerIndexes[y]}}var xc="void main() {fragColor=vec4(1.0);}";const ya={prelude:Xi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Xi("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Xi("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Xi(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Xi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Xi(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Xi(xc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Xi(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Xi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Xi("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xi("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Xi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Xi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Xi(xc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Xi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Xi(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Xi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Xi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Xi(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Xi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Xi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xi(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Xi(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Xi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Xi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Xi(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Xi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Xi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Xi(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Xi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Xi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Xi("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Xi("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Xi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Xi("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Xi(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Xi("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Xi(S,o){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=o.match(/in ([\w]+) ([\w]+)/g),w=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=T?T.concat(w):w,O={};return{fragmentSource:S=S.replace(f,(V,se,oe,ge,de)=>(O[de]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${de}
in ${oe} ${ge} ${de};
#else
uniform ${oe} ${ge} u_${de};
#endif
`:`
#ifdef HAS_UNIFORM_u_${de}
    ${oe} ${ge} ${de} = u_${de};
#endif
`)),vertexSource:o=o.replace(f,(V,se,oe,ge,de)=>{const Ee=ge==="float"?"vec2":"vec4",je=de.match(/color/)?"color":Ee;return O[de]?se==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
in ${oe} ${Ee} a_${de};
out ${oe} ${ge} ${de};
#else
uniform ${oe} ${ge} u_${de};
#endif
`:je==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = a_${de};
#else
    ${oe} ${ge} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = unpack_mix_${je}(a_${de}, u_${de}_t);
#else
    ${oe} ${ge} ${de} = u_${de};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
in ${oe} ${Ee} a_${de};
#else
uniform ${oe} ${ge} u_${de};
#endif
`:je==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${oe} ${ge} ${de} = a_${de};
#else
    ${oe} ${ge} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${oe} ${ge} ${de} = unpack_mix_${je}(a_${de}, u_${de}_t);
#else
    ${oe} ${ge} ${de} = u_${de};
#endif
`}),staticAttributes:y,staticUniforms:I}}class Eu{constructor(o,f,y){this.vertexBuffer=o,this.indexBuffer=f,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Aa=s.aJ([{name:"a_pos",type:"Int16",components:2}]);const Jo="#define PROJECTION_MERCATOR",Ti="mercator";class nu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ti}get shaderDefine(){return Jo}get shaderPreludeCode(){return ya.projectionMercator}get vertexShaderPreludeCode(){return ya.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(o){}getMeshFromTileID(o,f,y,w,T){if(this._cachedMesh)return this._cachedMesh;const I=new s.aL;I.emplaceBack(0,0),I.emplaceBack(s.$,0),I.emplaceBack(0,s.$),I.emplaceBack(s.$,s.$);const O=o.createVertexBuffer(I,Aa.members),V=s.aM.simpleSegment(0,0,4,2),se=new s.aN;se.emplaceBack(1,0,2),se.emplaceBack(1,2,3);const oe=o.createIndexBuffer(se);return this._cachedMesh=new Eu(O,oe,V),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(o){}}class Ha{constructor(o=0,f=0,y=0,w=0){if(isNaN(o)||o<0||isNaN(f)||f<0||isNaN(y)||y<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=f,this.left=y,this.right=w}interpolate(o,f,y){return f.top!=null&&o.top!=null&&(this.top=s.C.number(o.top,f.top,y)),f.bottom!=null&&o.bottom!=null&&(this.bottom=s.C.number(o.bottom,f.bottom,y)),f.left!=null&&o.left!=null&&(this.left=s.C.number(o.left,f.left,y)),f.right!=null&&o.right!=null&&(this.right=s.C.number(o.right,f.right,y)),this}getCenter(o,f){const y=s.ah((this.left+o-this.right)/2,0,o),w=s.ah((this.top+f-this.bottom)/2,0,f);return new s.P(y,w)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new Ha(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function so(S,o){if(!S.renderWorldCopies||S.lngRange)return;const f=o.lng-S.center.lng;o.lng+=f>180?-360:f<-180?360:0}function Ra(S){return Math.max(0,Math.floor(S))}class oi{constructor(o,f,y,w,T,I){this._callbacks=o,this._tileSize=512,this._renderWorldCopies=I===void 0||!!I,this._minZoom=f||0,this._maxZoom=y||22,this._minPitch=w??0,this._maxPitch=T??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ra(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ha,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(o,f,y){this._latRange=o.latRange,this._lngRange=o.lngRange,this._width=o.width,this._height=o.height,this._center=o.center,this._elevation=o.elevation,this._minElevationForCurrentTile=o.minElevationForCurrentTile,this._zoom=o.zoom,this._tileZoom=Ra(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=o.bearingInRadians,this._fovInRadians=o.fovInRadians,this._pitchInRadians=o.pitchInRadians,this._rollInRadians=o.rollInRadians,this._unmodified=o.unmodified,this._edgeInsets=new Ha(o.padding.top,o.padding.bottom,o.padding.left,o.padding.right),this._minZoom=o.minZoom,this._maxZoom=o.maxZoom,this._minPitch=o.minPitch,this._maxPitch=o.maxPitch,this._renderWorldCopies=o.renderWorldCopies,this._cameraToCenterDistance=o.cameraToCenterDistance,this._nearZ=o.nearZ,this._farZ=o.farZ,this._autoCalculateNearFarZ=!y&&o.autoCalculateNearFarZ,f&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(o){this._minElevationForCurrentTile=o}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(o){this._minZoom!==o&&(this._minZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(o){this._minPitch!==o&&(this._minPitch=o,this.setPitch(Math.max(this.pitch,o)))}get maxPitch(){return this._maxPitch}setMaxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.setPitch(Math.min(this.pitch,o)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(o){const f=s.aO(o,-180,180)*Math.PI/180;var y,w,T,I,O,V,se,oe,ge;this._bearingInRadians!==f&&(this._unmodified=!1,this._bearingInRadians=f,this._calcMatrices(),this._rotationMatrix=g(),y=this._rotationMatrix,T=-this._bearingInRadians,I=(w=this._rotationMatrix)[0],O=w[1],V=w[2],se=w[3],oe=Math.sin(T),ge=Math.cos(T),y[0]=I*ge+V*oe,y[1]=O*ge+se*oe,y[2]=I*-oe+V*ge,y[3]=O*-oe+se*ge)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(o){const f=s.ah(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==f&&(this._unmodified=!1,this._pitchInRadians=f,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(o){const f=o/180*Math.PI;this._rollInRadians!==f&&(this._unmodified=!1,this._rollInRadians=f,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aP(this._fovInRadians)}setFov(o){o=s.ah(o,.1,150),this.fov!==o&&(this._unmodified=!1,this._fovInRadians=s.ae(o),this._calcMatrices())}get zoom(){return this._zoom}setZoom(o){const f=this.getConstrained(this._center,o).zoom;this._zoom!==f&&(this._unmodified=!1,this._zoom=f,this._tileZoom=Math.max(0,Math.floor(f)),this._scale=s.af(f),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(o,f){this._autoCalculateNearFarZ=!1,this._nearZ=o,this._farZ=f,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,f,y){this._unmodified=!1,this._edgeInsets.interpolate(o,f,y),this._constrain(),this._calcMatrices()}resize(o,f,y=!0){this._width=o,this._height=f,y&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ct([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(o){o?(this._lngRange=[o.getWest(),o.getEast()],this._latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-s.ai,s.ai])}getConstrained(o,f){return this._callbacks.getConstrained(o,f)}getCameraQueryGeometry(o,f){if(f.length===1)return[f[0],o];{const{minX:y,minY:w,maxX:T,maxY:I}=s.a2.fromPoints(f).extend(o);return[new s.P(y,w),new s.P(T,w),new s.P(T,I),new s.P(y,I),new s.P(y,w)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const o=this._unmodified,{center:f,zoom:y}=this.getConstrained(this.center,this.zoom);this.setCenter(f),this.setZoom(y),this._unmodified=o,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let o=s.ag(new Float64Array(16));s.N(o,o,[this._width/2,-this._height/2,1]),s.M(o,o,[1,-1,0]),this._clipSpaceToPixelsMatrix=o,o=s.ag(new Float64Array(16)),s.N(o,o,[1,-1,1]),s.M(o,o,[-1,-1,0]),s.N(o,o,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=o,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(o,f,y,w){const T=y!==void 0?y:this.bearing,I=w=w!==void 0?w:this.pitch,O=s.a1.fromLngLat(o,f),V=-Math.cos(s.ae(I)),se=Math.sin(s.ae(I)),oe=se*Math.sin(s.ae(T)),ge=-se*Math.cos(s.ae(T));let de=this.elevation;const Ee=f-de;let je;V*Ee>=0||Math.abs(V)<.1?(je=1e4,de=f+je*V):je=-Ee/V;let Je,tt,at=s.aQ(1,O.y),ft=0;do{if(ft+=1,ft>10)break;tt=je/at,Je=new s.a1(O.x+oe*tt,O.y+ge*tt),at=1/Je.meterInMercatorCoordinateUnits()}while(Math.abs(je-tt*at)>1e-12);return{center:Je.toLngLat(),elevation:de,zoom:s.ak(this.height/2/Math.tan(this.fovInRadians/2)/tt/this.tileSize)}}recalculateZoomAndCenter(o){if(this.elevation-o==0)return;const f=s.aj(1,this.center.lat)*this.worldSize,y=this.cameraToCenterDistance/f,w=s.a1.fromLngLat(this.center,this.elevation),T=Gt(this.center,this.elevation,this.pitch,this.bearing,y);this._elevation=o;const I=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),s.aQ(T.z,w.y),this.bearing,this.pitch);this._elevation=I.elevation,this._center=I.center,this.setZoom(I.zoom)}getCameraPoint(){const o=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(o*Math.sin(this.rollInRadians),o*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Gt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/o).toLngLat()}getMercatorTileCoordinates(o){if(!o)return[0,0,1,1];const f=o.canonical.z>=0?1<<o.canonical.z:Math.pow(2,o.canonical.z);return[o.canonical.x/f,o.canonical.y/f,1/f/s.$,1/f/s.$]}}class Hs{constructor(o,f){this.min=o,this.max=f,this.center=s.aR([],s.aS([],this.min,this.max),.5)}quadrant(o){const f=[o%2==0,o<2],y=s.aT(this.min),w=s.aT(this.max);for(let T=0;T<f.length;T++)y[T]=f[T]?this.min[T]:this.center[T],w[T]=f[T]?this.center[T]:this.max[T];return w[2]=this.max[2],new Hs(y,w)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersectsFrustum(o){let f=!0;for(let y=0;y<o.planes.length;y++){const w=this.intersectsPlane(o.planes[y]);if(w===0)return 0;w===1&&(f=!1)}return f?2:o.aabb.min[0]>this.max[0]||o.aabb.min[1]>this.max[1]||o.aabb.min[2]>this.max[2]||o.aabb.max[0]<this.min[0]||o.aabb.max[1]<this.min[1]||o.aabb.max[2]<this.min[2]?0:1}intersectsPlane(o){let f=o[3],y=o[3];for(let w=0;w<3;w++)o[w]>0?(f+=o[w]*this.min[w],y+=o[w]*this.max[w]):(y+=o[w]*this.min[w],f+=o[w]*this.max[w]);return f>=0?2:y<0?0:1}}class ys{distanceToTile2d(o,f,y,w){const T=w.distanceX([o,f]),I=w.distanceY([o,f]);return Math.hypot(T,I)}getWrap(o,f,y){return y}getTileBoundingVolume(o,f,y,w){var T,I;let O=0,V=0;if(w?.terrain){const oe=new s.Z(o.z,f,o.z,o.x,o.y),ge=w.terrain.getMinMaxElevation(oe);O=(T=ge.minElevation)!==null&&T!==void 0?T:Math.min(0,y),V=(I=ge.maxElevation)!==null&&I!==void 0?I:Math.max(0,y)}const se=1<<o.z;return new Hs([f+o.x/se,o.y/se,O],[f+(o.x+1)/se,(o.y+1)/se,V])}allowVariableZoom(o,f){const y=o.fov*(Math.abs(Math.cos(o.rollInRadians))*o.height+Math.abs(Math.sin(o.rollInRadians))*o.width)/o.height,w=s.ah(78.5-y/2,0,60);return!!f.terrain||o.pitch>w}allowWorldCopies(){return!0}prepareNextFrame(){}}class An{constructor(o,f,y){this.points=o,this.planes=f,this.aabb=y}static fromInvProjectionMatrix(o,f=1,y=0,w,T){const I=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,y),V=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(de=>function(Ee,je,Je,tt){const at=s.aw([],Ee,je),ft=1/at[3]/Je*tt;return s.aY(at,at,[ft,ft,1/at[3],ft])}(de,o,f,O));w&&function(de,Ee,je,Je){const tt=Je?4:0,at=Je?0:4;let ft=0;const mt=[],pt=[];for(let gt=0;gt<4;gt++){const kt=s.aU([],de[gt+at],de[gt+tt]),tr=s.aZ(kt);s.aR(kt,kt,1/tr),mt.push(tr),pt.push(kt)}for(let gt=0;gt<4;gt++){const kt=s.a_(de[gt+tt],pt[gt],je);ft=kt!==null&&kt>=0?Math.max(ft,kt):Math.max(ft,mt[gt])}const bt=function(gt,kt){const tr=s.aU([],gt[kt[0]],gt[kt[1]]),Vt=s.aU([],gt[kt[2]],gt[kt[1]]),Wt=[0,0,0,0];return s.aV(Wt,s.aW([],tr,Vt)),Wt[3]=-s.aX(Wt,gt[kt[0]]),Wt}(de,Ee),St=function(gt,kt){const tr=s.a$(gt),Vt=s.b0([],gt,1/tr),Wt=s.aU([],kt,s.aR([],Vt,s.aX(kt,Vt))),Xt=s.a$(Wt);if(Xt>0){const Sr=Math.sqrt(1-Vt[3]*Vt[3]),Er=s.aR([],Vt,-Vt[3]),gr=s.aS([],Er,s.aR([],Wt,Sr/Xt));return s.b1(kt,gr)}return null}(je,bt);if(St!==null){const gt=St/s.aX(pt[0],bt);ft=Math.min(ft,gt)}for(let gt=0;gt<4;gt++){const kt=Math.min(ft,mt[gt]);de[gt+at]=[de[gt+tt][0]+pt[gt][0]*kt,de[gt+tt][1]+pt[gt][1]*kt,de[gt+tt][2]+pt[gt][2]*kt,1]}}(V,I[0],w,T);const se=I.map(de=>{const Ee=s.aU([],V[de[0]],V[de[1]]),je=s.aU([],V[de[2]],V[de[1]]),Je=s.aV([],s.aW([],Ee,je)),tt=-s.aX(Je,V[de[1]]);return Je.concat(tt)}),oe=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ge=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const de of V)for(let Ee=0;Ee<3;Ee++)oe[Ee]=Math.min(oe[Ee],de[Ee]),ge[Ee]=Math.max(ge[Ee],de[Ee]);return new An(V,se,new Hs(oe,ge))}}class Va{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,f,y){return this._helper.interpolatePadding(o,f,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,f,y=!0){this._helper.resize(o,f,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,f){this._helper.overrideNearFarZ(o,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o,f){}constructor(o,f,y,w,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new oi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(I,O)=>this.getConstrained(I,O)},o,f,y,w,T),this._coveringTilesDetailsProvider=new ys}clone(){const o=new Va;return o.apply(this),o}apply(o,f,y){this._helper.apply(o,f,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(o){const f=[new s.b2(0,o)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new s.P(0,0)),w=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),I=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),O=Math.floor(Math.min(y.x,w.x,T.x,I.x)),V=Math.floor(Math.max(y.x,w.x,T.x,I.x)),se=1;for(let oe=O-se;oe<=V+se;oe++)oe!==0&&f.push(new s.b2(oe,o))}return f}getCameraFrustum(){return An.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){const f=this.screenPointToLocation(this.centerPoint,o),y=o?o.getElevationForLngLatZoom(f,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(o,f){const y=s.aj(this.elevation,this.center.lat),w=this.screenPointToMercatorCoordinateAtZ(f,y),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),I=s.a1.fromLngLat(o),O=new s.a1(I.x-(w.x-T.x),I.y-(w.y-T.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(o,f){return f?this.coordinatePoint(s.a1.fromLngLat(o),f.getElevationForLngLatZoom(o,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.a1.fromLngLat(o))}screenPointToLocation(o,f){var y;return(y=this.screenPointToMercatorCoordinate(o,f))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(o,f){if(f){const y=f.pointCoordinate(o);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(o)}screenPointToMercatorCoordinateAtZ(o,f){const y=f||0,w=[o.x,o.y,0,1],T=[o.x,o.y,1,1];s.aw(w,w,this._pixelMatrixInverse),s.aw(T,T,this._pixelMatrixInverse);const I=w[3],O=T[3],V=w[1]/I,se=T[1]/O,oe=w[2]/I,ge=T[2]/O,de=oe===ge?0:(y-oe)/(ge-oe);return new s.a1(s.C.number(w[0]/I,T[0]/O,de)/this.worldSize,s.C.number(V,se,de)/this.worldSize,y)}coordinatePoint(o,f=0,y=this._pixelMatrix){const w=[o.x*this.worldSize,o.y*this.worldSize,f,1];return s.aw(w,w,y),new s.P(w[0]/w[3],w[1]/w[3])}getBounds(){const o=Math.max(0,this._helper._height/2-Rt(this));return new Ct().extend(this.screenPointToLocation(new s.P(0,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,o))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(o,f){return f?f.pointCoordinate(o)!=null:o.y>this.height/2-Rt(this)}calculatePosMatrix(o,f=!1,y){var w;const T=(w=o.key)!==null&&w!==void 0?w:s.b3(o.wrap,o.canonical.z,o.canonical.z,o.canonical.x,o.canonical.y),I=f?this._alignedPosMatrixCache:this._posMatrixCache;if(I.has(T)){const se=I.get(T);return y?se.f32:se.f64}const O=xt(o,this.worldSize);s.O(O,f?this._alignedProjMatrix:this._viewProjMatrix,O);const V={f64:O,f32:new Float32Array(O)};return I.set(T,V),y?V.f32:V.f64}calculateFogMatrix(o){const f=o.key,y=this._fogMatrixCacheF32;if(y.has(f))return y.get(f);const w=xt(o,this.worldSize);return s.O(w,this._fogMatrix,w),y.set(f,new Float32Array(w)),y.get(f)}getConstrained(o,f){f=s.ah(+f,this.minZoom,this.maxZoom);const y={center:new s.S(o.lng,o.lat),zoom:f};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const mt=179.9999999999;w=[-mt,mt]}const T=this.tileSize*s.af(y.zoom);let I=0,O=T,V=0,se=T,oe=0,ge=0;const{x:de,y:Ee}=this.size;if(this._helper._latRange){const mt=this._helper._latRange;I=s.U(mt[1])*T,O=s.U(mt[0])*T,O-I<Ee&&(oe=Ee/(O-I))}w&&(V=s.aO(s.V(w[0])*T,0,T),se=s.aO(s.V(w[1])*T,0,T),se<V&&(se+=T),se-V<de&&(ge=de/(se-V)));const{x:je,y:Je}=ot(T,o);let tt,at;const ft=Math.max(ge||0,oe||0);if(ft){const mt=new s.P(ge?(se+V)/2:je,oe?(O+I)/2:Je);return y.center=vt(T,mt).wrap(),y.zoom+=s.ak(ft),y}if(this._helper._latRange){const mt=Ee/2;Je-mt<I&&(at=I+mt),Je+mt>O&&(at=O-mt)}if(w){const mt=(V+se)/2;let pt=je;this._helper._renderWorldCopies&&(pt=s.aO(je,mt-T/2,mt+T/2));const bt=de/2;pt-bt<V&&(tt=V+bt),pt+bt>se&&(tt=se-bt)}if(tt!==void 0||at!==void 0){const mt=new s.P(tt??je,at??Je);y.center=vt(T,mt).wrap()}return y}calculateCenterFromCameraLngLatAlt(o,f,y,w){return this._helper.calculateCenterFromCameraLngLatAlt(o,f,y,w)}_calculateNearFarZIfNeeded(o,f,y){if(!this._helper.autoCalculateNearFarZ)return;const w=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=o-w*this._helper._pixelPerMeter/Math.cos(f),I=w<0?T:o,O=Math.PI/2+this.pitchInRadians,V=s.ae(this.fov)*(Math.abs(Math.cos(s.ae(this.roll)))*this.height+Math.abs(Math.sin(s.ae(this.roll)))*this.width)/this.height*(.5+y.y/this.height),se=Math.sin(V)*I/Math.sin(s.ah(Math.PI-O-V,.01,Math.PI-.01)),oe=Rt(this),ge=Math.atan(oe/this._helper.cameraToCenterDistance),de=s.ae(.75),Ee=ge>de?2*ge*(.5+y.y/(2*oe)):de,je=Math.sin(Ee)*I/Math.sin(s.ah(Math.PI-O-Ee,.01,Math.PI-.01)),Je=Math.min(se,je);this._helper._farZ=1.01*(Math.cos(Math.PI/2-f)*Je+I),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const o=this.centerOffset,f=ot(this.worldSize,this.center),y=f.x,w=f.y;this._helper._pixelPerMeter=s.aj(1,this.center.lat)*this.worldSize;const T=s.ae(Math.min(this.pitch,Ze)),I=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(I,T,o),O=new Float64Array(16),s.b4(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aq(this._invProjMatrix,O),O[8]=2*-o.x/this._helper._width,O[9]=2*o.y/this._helper._height,this._projectionMatrix=s.b5(O),s.N(O,O,[1,-1,1]),s.M(O,O,[0,0,-this._helper.cameraToCenterDistance]),s.b6(O,O,-this.rollInRadians),s.b7(O,O,this.pitchInRadians),s.b6(O,O,-this.bearingInRadians),s.M(O,O,[-y,-w,0]),this._mercatorMatrix=s.N([],O,[this.worldSize,this.worldSize,this.worldSize]),s.N(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),s.M(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=s.aq([],O);const V=[0,0,-1,1];s.aw(V,V,this._invViewProjMatrix),this._cameraPosition=[V[0]/V[3],V[1]/V[3],V[2]/V[3]],this._fogMatrix=new Float64Array(16),s.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,I,this._helper._farZ),this._fogMatrix[8]=2*-o.x/this.width,this._fogMatrix[9]=2*o.y/this.height,s.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.M(this._fogMatrix,this._fogMatrix,[-y,-w,0]),s.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const se=this._helper._width%2/2,oe=this._helper._height%2/2,ge=Math.cos(this.bearingInRadians),de=Math.sin(-this.bearingInRadians),Ee=y-Math.round(y)+ge*se+de*oe,je=w-Math.round(w)+ge*oe+de*se,Je=new Float64Array(O);if(s.M(Je,Je,[Ee>.5?Ee-1:Ee,je>.5?je-1:je,0]),this._alignedProjMatrix=Je,O=s.aq(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const o=this.screenPointToMercatorCoordinate(new s.P(0,0)),f=[o.x*this.worldSize,o.y*this.worldSize,0,1];return s.aw(f,f,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const o=s.aj(1,this.center.lat)*this.worldSize;return Gt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/o).toLngLat()}lngLatToCameraDepth(o,f){const y=s.a1.fromLngLat(o),w=[y.x*this.worldSize,y.y*this.worldSize,f,1];return s.aw(w,w,this._viewProjMatrix),w[2]/w[3]}getProjectionData(o){const{overscaledTileID:f,aligned:y,applyTerrainMatrix:w}=o,T=this._helper.getMercatorTileCoordinates(f),I=f?this.calculatePosMatrix(f,y,!0):null;let O;return O=f&&f.terrainRttPosMatrix32f&&w?f.terrainRttPosMatrix32f:I||s.b8(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(o){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(o,f,y){return 1}transformLightDirection(o){return s.aT(o)}getRayDirectionFromPixel(o){throw new Error("Not implemented.")}projectTileCoordinates(o,f,y,w){const T=this.calculatePosMatrix(y);let I;w?(I=[o,f,w(o,f),1],s.aw(I,I,T)):(I=[o,f,0,1],yi(I,I,T));const O=I[3];return{point:new s.P(I[0]/O,I[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(o){for(const f of o)this.calculatePosMatrix(f)}getMatrixForModel(o,f){const y=s.a1.fromLngLat(o,f),w=y.meterInMercatorCoordinateUnits(),T=s.b9();return s.M(T,T,[y.x,y.y,y.z]),s.b6(T,T,Math.PI),s.b7(T,T,Math.PI/2),s.N(T,T,[-w,w,w]),T}getProjectionDataForCustomLayer(o=!0){const f=new s.Z(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:f,applyGlobeMatrix:o}),w=xt(f,this.worldSize);s.O(w,this._viewProjMatrix,w),y.tileMercatorCoords=[0,0,1,1];const T=[s.$,s.$,this.worldSize/this._helper.pixelsPerMeter],I=s.ba();return s.N(I,w,T),y.fallbackMatrix=I,y.mainMatrix=I,y}getFastPathSimpleProjectionMatrix(o){return this.calculatePosMatrix(o)}}function Yn(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ls(S){if(S.useSlerp)if(S.k<1){const o=s.bb(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),f=s.bb(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),y=new Float64Array(4);s.bc(y,o,f,S.k);const w=s.bd(y);S.tr.setRoll(w.roll),S.tr.setPitch(w.pitch),S.tr.setBearing(w.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);else S.tr.setRoll(s.C.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(s.C.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(s.C.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function _a(S,o,f,y,w){const T=w.padding,I=ot(w.worldSize,f.getNorthWest()),O=ot(w.worldSize,f.getNorthEast()),V=ot(w.worldSize,f.getSouthEast()),se=ot(w.worldSize,f.getSouthWest()),oe=s.ae(-y),ge=I.rotate(oe),de=O.rotate(oe),Ee=V.rotate(oe),je=se.rotate(oe),Je=new s.P(Math.max(ge.x,de.x,je.x,Ee.x),Math.max(ge.y,de.y,je.y,Ee.y)),tt=new s.P(Math.min(ge.x,de.x,je.x,Ee.x),Math.min(ge.y,de.y,je.y,Ee.y)),at=Je.sub(tt),ft=(w.width-(T.left+T.right+o.left+o.right))/at.x,mt=(w.height-(T.top+T.bottom+o.top+o.bottom))/at.y;if(mt<0||ft<0)return void Yn();const pt=Math.min(s.ak(w.scale*Math.min(ft,mt)),S.maxZoom),bt=s.P.convert(S.offset),St=new s.P((o.left-o.right)/2,(o.top-o.bottom)/2).rotate(s.ae(y)),gt=bt.add(St).mult(w.scale/s.af(pt));return{center:vt(w.worldSize,I.add(V).div(2).sub(gt)),zoom:pt,bearing:y}}class el{get useGlobeControls(){return!1}handlePanInertia(o,f){const y=o.mag(),w=Math.abs(Rt(f));return{easingOffset:o.mult(Math.min(.75*w/y,1)),easingCenter:f.center}}handleMapControlsRollPitchBearingZoom(o,f){o.bearingDelta&&f.setBearing(f.bearing+o.bearingDelta),o.pitchDelta&&f.setPitch(f.pitch+o.pitchDelta),o.rollDelta&&f.setRoll(f.roll+o.rollDelta),o.zoomDelta&&f.setZoom(f.zoom+o.zoomDelta)}handleMapControlsPan(o,f,y){o.around.distSqr(f.centerPoint)<.01||f.setLocationAtPoint(y,o.around)}cameraForBoxAndBearing(o,f,y,w,T){return _a(o,f,y,w,T)}handleJumpToCenterZoom(o,f){o.zoom!==(f.zoom!==void 0?+f.zoom:o.zoom)&&o.setZoom(+f.zoom),f.center!==void 0&&o.setCenter(s.S.convert(f.center))}handleEaseTo(o,f){const y=o.zoom,w=o.padding,T={roll:o.roll,pitch:o.pitch,bearing:o.bearing},I={roll:f.roll===void 0?o.roll:f.roll,pitch:f.pitch===void 0?o.pitch:f.pitch,bearing:f.bearing===void 0?o.bearing:f.bearing},O=f.zoom!==void 0,V=!o.isPaddingEqual(f.padding);let se=!1;const oe=O?+f.zoom:o.zoom;let ge=o.centerPoint.add(f.offsetAsPoint);const de=o.screenPointToLocation(ge),{center:Ee,zoom:je}=o.getConstrained(s.S.convert(f.center||de),oe??y);so(o,Ee);const Je=ot(o.worldSize,de),tt=ot(o.worldSize,Ee).sub(Je),at=s.af(je-y);return se=je!==y,{easeFunc:ft=>{if(se&&o.setZoom(s.C.number(y,je,ft)),s.be(T,I)||Ls({startEulerAngles:T,endEulerAngles:I,tr:o,k:ft,useSlerp:T.roll!=I.roll}),V&&(o.interpolatePadding(w,f.padding,ft),ge=o.centerPoint.add(f.offsetAsPoint)),f.around)o.setLocationAtPoint(f.around,f.aroundPoint);else{const mt=s.af(o.zoom-y),pt=je>y?Math.min(2,at):Math.max(.5,at),bt=Math.pow(pt,1-ft),St=vt(o.worldSize,Je.add(tt.mult(ft*bt)).mult(mt));o.setLocationAtPoint(o.renderWorldCopies?St.wrap():St,ge)}},isZooming:se,elevationCenter:Ee}}handleFlyTo(o,f){const y=f.zoom!==void 0,w=o.zoom,T=o.getConstrained(s.S.convert(f.center||f.locationAtOffset),y?+f.zoom:w),I=T.center,O=T.zoom;so(o,I);const V=ot(o.worldSize,f.locationAtOffset),se=ot(o.worldSize,I).sub(V),oe=se.mag(),ge=s.af(O-w);let de;if(f.minZoom!==void 0){const Ee=Math.min(+f.minZoom,w,O),je=o.getConstrained(I,Ee).zoom;de=s.af(je-w)}return{easeFunc:(Ee,je,Je,tt)=>{o.setZoom(Ee===1?O:w+s.ak(je));const at=Ee===1?I:vt(o.worldSize,V.add(se.mult(Je)).mult(je));o.setLocationAtPoint(o.renderWorldCopies?at.wrap():at,tt)},scaleOfZoom:ge,targetCenter:I,scaleOfMinZoom:de,pixelPathLength:oe}}}class _n{constructor(o,f,y){this.blendFunction=o,this.blendColor=f,this.mask=y}}_n.Replace=[1,0],_n.disabled=new _n(_n.Replace,s.bf.transparent,[!1,!1,!1,!1]),_n.unblended=new _n(_n.Replace,s.bf.transparent,[!0,!0,!0,!0]),_n.alphaBlended=new _n([1,771],s.bf.transparent,[!0,!0,!0,!0]);const Fn=2305;class Wi{constructor(o,f,y){this.enable=o,this.mode=f,this.frontFace=y}}Wi.disabled=new Wi(!1,1029,Fn),Wi.backCCW=new Wi(!0,1029,Fn),Wi.frontCCW=new Wi(!0,1028,Fn);class di{constructor(o,f,y){this.func=o,this.mask=f,this.range=y}}di.ReadOnly=!1,di.ReadWrite=!0,di.disabled=new di(519,di.ReadOnly,[0,1]);const Vs=7680;class bi{constructor(o,f,y,w,T,I){this.test=o,this.ref=f,this.mask=y,this.fail=w,this.depthFail=T,this.pass=I}}bi.disabled=new bi({func:519,mask:0},0,0,Vs,Vs,Vs);const Kl=new WeakMap;function _s(S){var o;if(Kl.has(S))return Kl.get(S);{const f=(o=S.getParameter(S.VERSION))===null||o===void 0?void 0:o.startsWith("WebGL 2.0");return Kl.set(S,f),f}}class Wl{get awaitingQuery(){return!!this._readbackQueue}constructor(o){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=o;const f=o.context,y=f.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const w=new s.aL;w.emplaceBack(-1,-1),w.emplaceBack(2,-1),w.emplaceBack(-1,2);const T=new s.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Eu(f.createVertexBuffer(w,Aa.members),f.createIndexBuffer(T),s.aM.simpleSegment(0,0,w.length,T.length)),this._resultBuffer=new Uint8Array(4),f.activeTexture.set(y.TEXTURE1);const I=y.createTexture();y.bindTexture(y.TEXTURE_2D,I),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=f.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(I),_s(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const o=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),o.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(o,f){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(o,f),this._updateCount++,this._measuredError}_bindFramebuffer(){const o=this._cachedRenderContext.context,f=o.gl;o.activeTexture.set(f.TEXTURE1),f.bindTexture(f.TEXTURE_2D,this._fbo.colorAttachment.get()),o.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(o,f){const y=this._cachedRenderContext.context,w=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:s.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,w.TRIANGLES,di.disabled,bi.disabled,_n.unblended,Wi.disabled,((T,I)=>({u_input:T,u_output_expected:I}))(o,f),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&_s(w)){w.bindBuffer(w.PIXEL_PACK_BUFFER,this._pbo),w.readBuffer(w.COLOR_ATTACHMENT0),w.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),w.bindBuffer(w.PIXEL_PACK_BUFFER,null);const T=w.fenceSync(w.SYNC_GPU_COMMANDS_COMPLETE,0);w.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const o=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&_s(o)){const f=o.clientWaitSync(this._readbackQueue.sync,0,0);if(f===o.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(f===o.TIMEOUT_EXPIRED)return;o.bindBuffer(o.PIXEL_PACK_BUFFER,this._pbo),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),o.bindBuffer(o.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),o.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Wl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(o){let f=0;return f+=o[0]/256,f+=o[1]/65536,f+=o[2]/16777216,o[3]<127&&(f=-f),f/128}}const $l=s.$/128;function xl(S,o){const f=S.granularity!==void 0?Math.max(S.granularity,1):1,y=f+(S.generateBorders?2:0),w=f+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),T=y+1,I=w+1,O=S.generateBorders?-1:0,V=S.generateBorders||S.extendToNorthPole?-1:0,se=f+(S.generateBorders?1:0),oe=f+(S.generateBorders||S.extendToSouthPole?1:0),ge=T*I,de=y*w*6,Ee=T*I>65536;if(Ee&&o==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const je=Ee||o==="32bit",Je=new Int16Array(2*ge);let tt=0;for(let mt=V;mt<=oe;mt++)for(let pt=O;pt<=se;pt++){let bt=pt/f*s.$;pt===-1&&(bt=-$l),pt===f+1&&(bt=s.$+$l);let St=mt/f*s.$;mt===-1&&(St=S.extendToNorthPole?s.bh:-$l),mt===f+1&&(St=S.extendToSouthPole?s.bi:s.$+$l),Je[tt++]=bt,Je[tt++]=St}const at=je?new Uint32Array(de):new Uint16Array(de);let ft=0;for(let mt=0;mt<w;mt++)for(let pt=0;pt<y;pt++){const bt=pt+1+mt*T,St=pt+(mt+1)*T,gt=pt+1+(mt+1)*T;at[ft++]=pt+mt*T,at[ft++]=St,at[ft++]=bt,at[ft++]=bt,at[ft++]=St,at[ft++]=gt}return{vertices:Je.buffer.slice(0),indices:at.buffer.slice(0),uses32bitIndices:je}}const ko=new s.aK({fill:new s.bj(128,2),line:new s.bj(512,0),tile:new s.bj(128,32),stencil:new s.bj(128,1),circle:3});class Fo{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return ya.projectionGlobe}get vertexShaderPreludeCode(){return ya.projectionMercator.vertexSource}get subdivisionGranularity(){return ko}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(o){this._errorMeasurement||(this._errorMeasurement=new Wl(o));const f=s.U(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-f*Math.PI*2))-.5*Math.PI,w=this._errorMeasurement.updateErrorLoop(f,y),T=F.now();w!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=w,this._errorMeasurementLastChangeTime=T);const I=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bl(I))}_getMeshKey(o){return`${o.granularity.toString(36)}_${o.generateBorders?"b":""}${o.extendToNorthPole?"n":""}${o.extendToSouthPole?"s":""}`}getMeshFromTileID(o,f,y,w,T){const I=(T==="stencil"?ko.stencil:ko.tile).getGranularityForZoomLevel(f.z);return this._getMesh(o,{granularity:I,generateBorders:y,extendToNorthPole:f.y===0&&w,extendToSouthPole:f.y===(1<<f.z)-1&&w})}_getMesh(o,f){const y=this._getMeshKey(f);if(y in this._tileMeshCache)return this._tileMeshCache[y];const w=function(T,I){const O=xl(I,"16bit"),V=s.aL.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),se=s.aN.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Eu(T.createVertexBuffer(V,Aa.members),T.createIndexBuffer(se),s.aM.simpleSegment(0,0,V.length,se.length))}(o,f);return this._tileMeshCache[y]=w,w}recalculate(o){}hasTransition(){const o=F.now();let f=!1;return f=f||(o-this._errorMeasurementLastChangeTime)/1e3<.7,f=f||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,f}setErrorQueryLatitudeDegrees(o){this._errorQueryLatitudeDegrees=o}}const Tu=new s.r({type:new s.D(s.v.projection.type)});class uh extends s.E{constructor(o){super(),this._transitionable=new s.t(Tu,void 0),this.setProjection(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0)),this._mercatorProjection=new nu,this._verticalPerspectiveProjection=new Fo}get transitionState(){const o=this.properties.get("type");if(typeof o=="string"&&o==="mercator")return 0;if(typeof o=="string"&&o==="vertical-perspective")return 1;if(o instanceof s.bm){if(o.from==="vertical-perspective"&&o.to==="mercator")return 1-o.transition;if(o.from==="mercator"&&o.to==="vertical-perspective")return o.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(o){this._mercatorProjection.updateGPUdependent(o),this._verticalPerspectiveProjection.updateGPUdependent(o)}getMeshFromTileID(o,f,y,w,T){return this.currentProjection.getMeshFromTileID(o,f,y,w,T)}setProjection(o){this._transitionable.setValue("type",o?.type||"mercator")}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}setErrorQueryLatitudeDegrees(o){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(o),this._mercatorProjection.setErrorQueryLatitudeDegrees(o)}}function ku(S){const o=yc(S.worldSize,S.center.lat);return 2*Math.PI*o}function ba(S,o,f,y,w){const T=1/(1<<w),I=o/s.$*T+y*T,O=s.bo((S/s.$*T+f*T)*Math.PI*2+Math.PI,2*Math.PI),V=2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI,se=Math.cos(V),oe=new Float64Array(3);return oe[0]=Math.sin(O)*se,oe[1]=Math.sin(V),oe[2]=Math.cos(O)*se,oe}function Wn(S){return function(o,f){const y=Math.cos(f),w=new Float64Array(3);return w[0]=Math.sin(o)*y,w[1]=Math.sin(f),w[2]=Math.cos(o)*y,w}(S.lng*Math.PI/180,S.lat*Math.PI/180)}function yc(S,o){return S/(2*Math.PI)/Math.cos(o*Math.PI/180)}function Xl(S){const o=Math.asin(S[1])/Math.PI*180,f=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(f>1e-6){const y=S[0]/f,w=Math.acos(S[2]/f),T=(y>0?w:-w)/Math.PI*180;return new s.S(s.aO(T,-180,180),o)}return new s.S(0,o)}function Zl(S){return Math.cos(S*Math.PI/180)}function re(S,o){const f=Zl(S),y=Zl(o);return s.ak(y/f)}function Ie(S,o){const f=S.rotate(o.bearingInRadians),y=o.zoom+re(o.center.lat,0),w=s.bk(1/Zl(o.center.lat),1/Zl(Math.min(Math.abs(o.center.lat),60)),s.bn(y,7,3,0,1)),T=360/ku({worldSize:o.worldSize,center:{lat:o.center.lat}});return new s.S(o.center.lng-f.x*T*w,s.ah(o.center.lat+f.y*T,-s.ai,s.ai))}function At(S){const o=.5*S,f=Math.sin(o),y=Math.cos(o);return Math.log(f+y)-Math.log(y-f)}function Et(S,o,f,y){const w=S.lat+f*y;if(Math.abs(f)>1){const T=(Math.sign(S.lat+f)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,I=Math.abs(S.lat+f)*Math.PI/180,O=At(T+y*(I-T)),V=At(T),se=At(I);return new s.S(S.lng+o*((O-V)/(se-V)),w)}return new s.S(S.lng+o*y,w)}class Ht{constructor(o){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=o}swapBuffers(){if(!this._hadAnyChanges)return;const o=this._cachePrevious;this._cachePrevious=this._cache,this._cache=o,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(o,f,y,w){const T=`${o.z}_${o.x}_${o.y}_${w?.terrain?"t":""}`,I=this._cache.get(T);if(I)return I;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const V=this._boundingVolumeFactory(o,f,y,w);return this._cache.set(T,V),this._hadAnyChanges=!0,V}}class cr{constructor(o,f,y,w){this.min=y,this.max=w,this.points=o,this.planes=f}static fromAabb(o,f){const y=[];for(let w=0;w<8;w++)y.push([1&~w?o[0]:f[0],(w>>1&1)==1?f[1]:o[1],(w>>2&1)==1?f[2]:o[2]]);return new cr(y,[[-1,0,0,f[0]],[1,0,0,-o[0]],[0,-1,0,f[1]],[0,1,0,-o[1]],[0,0,-1,f[2]],[0,0,1,-o[2]]],o,f)}static fromCenterSizeAngles(o,f,y){const w=s.br([],y[0],y[1],y[2]),T=s.bs([],[f[0],0,0],w),I=s.bs([],[0,f[1],0],w),O=s.bs([],[0,0,f[2]],w),V=[...o],se=[...o];for(let ge=0;ge<8;ge++)for(let de=0;de<3;de++){const Ee=o[de]+T[de]*(1&~ge?-1:1)+I[de]*((ge>>1&1)==1?1:-1)+O[de]*((ge>>2&1)==1?1:-1);V[de]=Math.min(V[de],Ee),se[de]=Math.max(se[de],Ee)}const oe=[];for(let ge=0;ge<8;ge++){const de=[...o];s.aS(de,de,s.aR([],T,1&~ge?-1:1)),s.aS(de,de,s.aR([],I,(ge>>1&1)==1?1:-1)),s.aS(de,de,s.aR([],O,(ge>>2&1)==1?1:-1)),oe.push(de)}return new cr(oe,[[...T,-s.aX(T,oe[0])],[...I,-s.aX(I,oe[0])],[...O,-s.aX(O,oe[0])],[-T[0],-T[1],-T[2],-s.aX(T,oe[7])],[-I[0],-I[1],-I[2],-s.aX(I,oe[7])],[-O[0],-O[1],-O[2],-s.aX(O,oe[7])]],V,se)}intersectsFrustum(o){let f=!0;const y=this.points.length,w=this.planes.length,T=o.planes.length,I=o.points.length;for(let O=0;O<T;O++){const V=o.planes[O];let se=0;for(let oe=0;oe<y;oe++){const ge=this.points[oe];V[0]*ge[0]+V[1]*ge[1]+V[2]*ge[2]+V[3]>=0&&se++}if(se===0)return 0;se<y&&(f=!1)}if(f)return 2;for(let O=0;O<w;O++){const V=this.planes[O];let se=0;for(let oe=0;oe<I;oe++){const ge=o.points[oe];V[0]*ge[0]+V[1]*ge[1]+V[2]*ge[2]+V[3]>=0&&se++}if(se===0)return 0}return 1}intersectsPlane(o){const f=this.points.length;let y=0;for(let w=0;w<f;w++){const T=this.points[w];o[0]*T[0]+o[1]*T[1]+o[2]*T[2]+o[3]>=0&&y++}return y===f?2:y===0?0:1}}function Br(S,o,f){const y=S-o;return y<0?-y:Math.max(0,y-f)}function $r(S,o,f,y,w){const T=S-f;let I;return I=T<0?Math.min(-T,1+T-w):T>1?Math.min(Math.max(T-w,0),1-T):0,Math.max(I,Br(o,y,w))}class ci{constructor(){this._boundingVolumeCache=new Ht(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(o,f,y,w){const T=1<<y.z,I=1/T,O=y.x/T,V=y.y/T;let se=2;return se=Math.min(se,$r(o,f,O,V,I)),se=Math.min(se,$r(o,f,O+.5,-V-I,I)),se=Math.min(se,$r(o,f,O+.5,2-V-I,I)),se}getWrap(o,f,y){const w=1<<f.z,T=1/w,I=f.x/w,O=Br(o.x,I,T),V=Br(o.x,I-1,T),se=Br(o.x,I+1,T),oe=Math.min(O,V,se);return oe===se?1:oe===V?-1:0}allowVariableZoom(o,f){return wt(o,f)>4}allowWorldCopies(){return!1}getTileBoundingVolume(o,f,y,w){return this._boundingVolumeCache.getTileBoundingVolume(o,f,y,w)}_computeTileBoundingVolume(o,f,y,w){var T,I;let O=0,V=0;if(w?.terrain){const se=new s.Z(o.z,f,o.z,o.x,o.y),oe=w.terrain.getMinMaxElevation(se);O=(T=oe.minElevation)!==null&&T!==void 0?T:Math.min(0,y),V=(I=oe.maxElevation)!==null&&I!==void 0?I:Math.max(0,y)}if(O/=s.bu,V/=s.bu,O+=1,V+=1,o.z<=0)return cr.fromAabb([-V,-V,-V],[V,V,V]);if(o.z===1)return cr.fromAabb([o.x===0?-V:0,o.y===0?0:-V,-V],[o.x===0?0:V,o.y===0?V:0,V]);{const se=[ba(0,0,o.x,o.y,o.z),ba(s.$,0,o.x,o.y,o.z),ba(s.$,s.$,o.x,o.y,o.z),ba(0,s.$,o.x,o.y,o.z)],oe=[];for(const Wt of se)oe.push(s.aR([],Wt,V));if(V!==O)for(const Wt of se)oe.push(s.aR([],Wt,O));o.y===0&&oe.push([0,1,0]),o.y===(1<<o.z)-1&&oe.push([0,-1,0]);const ge=[1,1,1],de=[-1,-1,-1];for(const Wt of oe)for(let Xt=0;Xt<3;Xt++)ge[Xt]=Math.min(ge[Xt],Wt[Xt]),de[Xt]=Math.max(de[Xt],Wt[Xt]);const Ee=ba(s.$/2,s.$/2,o.x,o.y,o.z),je=s.aW([],[0,1,0],Ee);s.aV(je,je);const Je=s.aW([],Ee,je);s.aV(Je,Je);const tt=s.aW([],se[2],se[1]);s.aV(tt,tt);const at=s.aW([],se[0],se[3]);s.aV(at,at),oe.push(s.aR([],Ee,V)),o.y>=(1<<o.z)/2&&oe.push(s.aR([],ba(s.$/2,0,o.x,o.y,o.z),V)),o.y<(1<<o.z)/2&&oe.push(s.aR([],ba(s.$/2,s.$,o.x,o.y,o.z),V));const ft=ji(Ee,oe),mt=ji(Je,oe),pt=[-Ee[0],-Ee[1],-Ee[2],ft.max],bt=[Ee[0],Ee[1],Ee[2],-ft.min],St=[-Je[0],-Je[1],-Je[2],mt.max],gt=[Je[0],Je[1],Je[2],-mt.min],kt=[...tt,0],tr=[...at,0],Vt=[];return o.y===0?Vt.push(s.bt(tr,kt,pt),s.bt(tr,kt,bt)):Vt.push(s.bt(St,kt,pt),s.bt(St,kt,bt),s.bt(St,tr,pt),s.bt(St,tr,bt)),o.y===(1<<o.z)-1?Vt.push(s.bt(tr,kt,pt),s.bt(tr,kt,bt)):Vt.push(s.bt(gt,kt,pt),s.bt(gt,kt,bt),s.bt(gt,tr,pt),s.bt(gt,tr,bt)),new cr(Vt,[pt,bt,St,gt,kt,tr],ge,de)}}}function ji(S,o){let f=1/0,y=-1/0;for(const w of o){const T=s.aX(S,w);f=Math.min(f,T),y=Math.max(y,T)}return{min:f,max:y}}class Qi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,f,y){return this._helper.interpolatePadding(o,f,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,f){this._helper.resize(o,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,f){this._helper.overrideNearFarZ(o,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o){}constructor(){this._cachedClippingPlane=s.bv(),this._projectionMatrix=s.b9(),this._globeViewProjMatrix32f=s.b8(),this._globeViewProjMatrixNoCorrection=s.b9(),this._globeViewProjMatrixNoCorrectionInverted=s.b9(),this._globeProjMatrixInverted=s.b9(),this._cameraPosition=s.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new oi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,f)=>this.getConstrained(o,f)}),this._coveringTilesDetailsProvider=new ci}clone(){const o=new Qi;return o.apply(this),o}apply(o,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(o)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const o=s.bp();return o[0]=this._cameraPosition[0],o[1]=this._cameraPosition[1],o[2]=this._cameraPosition[2],o}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(o){const{overscaledTileID:f,applyGlobeMatrix:y}=o,w=this._helper.getMercatorTileCoordinates(f);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:w,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(o){const f=this.pitchInRadians,y=this.cameraToCenterDistance/o,w=Math.sin(f)*y,T=Math.cos(f)*y+1,I=1/Math.sqrt(w*w+T*T)*1;let O=-w,V=T;const se=Math.sqrt(O*O+V*V);O/=se,V/=se;const oe=[0,O,V];s.bw(oe,oe,[0,0,0],-this.bearingInRadians),s.bx(oe,oe,[0,0,0],-1*this.center.lat*Math.PI/180),s.by(oe,oe,[0,0,0],this.center.lng*Math.PI/180);const ge=1/s.aZ(oe);return s.aR(oe,oe,ge),[...oe,-I*ge]}isLocationOccluded(o){return!this.isSurfacePointVisible(Wn(o))}transformLightDirection(o){const f=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,w=Math.cos(y),T=[Math.sin(f)*w,Math.sin(y),Math.cos(f)*w],I=[T[2],0,-T[0]],O=[0,0,0];s.aW(O,I,T),s.aV(I,I),s.aV(O,O);const V=[0,0,0];return s.aV(V,[I[0]*o[0]+O[0]*o[1]+T[0]*o[2],I[1]*o[0]+O[1]*o[1]+T[1]*o[2],I[2]*o[0]+O[2]*o[1]+T[2]*o[2]]),V}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(o,f,y){const w=function(O,V,se){const oe=1/(1<<se.z);return new s.a1(O/s.$*oe+se.x*oe,V/s.$*oe+se.y*oe)}(o,f,y.canonical),T=(I=w.y,[s.bo(w.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI]);var I;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(o,f,y,w){const T=y.canonical,I=ba(o,f,T.x,T.y,T.z),O=1+(w?w(o,f):0)/s.bu,V=[I[0]*O,I[1]*O,I[2]*O,1];s.aw(V,V,this._globeViewProjMatrixNoCorrection);const se=this._cachedClippingPlane,oe=se[0]*I[0]+se[1]*I[1]+se[2]*I[2]+se[3]<0;return{point:new s.P(V[0]/V[3],V[1]/V[3]),signedDistanceFromCamera:V[3],isOccluded:oe}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const o=yc(this.worldSize,this.center.lat),f=s.ba(),y=s.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*o),s.b4(f,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const w=this.centerOffset;f[8]=2*-w.x/this._helper._width,f[9]=2*w.y/this._helper._height,this._projectionMatrix=s.b5(f),this._globeProjMatrixInverted=s.ba(),s.aq(this._globeProjMatrixInverted,f),s.M(f,f,[0,0,-this.cameraToCenterDistance]),s.b6(f,f,this.rollInRadians),s.b7(f,f,-this.pitchInRadians),s.b6(f,f,this.bearingInRadians),s.M(f,f,[0,0,-o]);const T=s.bp();T[0]=o,T[1]=o,T[2]=o,s.b7(y,f,this.center.lat*Math.PI/180),s.bz(y,y,-this.center.lng*Math.PI/180),s.N(y,y,T),this._globeViewProjMatrixNoCorrection=y,s.b7(f,f,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bz(f,f,-this.center.lng*Math.PI/180),s.N(f,f,T),this._globeViewProjMatrix32f=new Float32Array(f),this._globeViewProjMatrixNoCorrectionInverted=s.ba(),s.aq(this._globeViewProjMatrixNoCorrectionInverted,y);const I=s.bp();this._cameraPosition=s.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/o,s.bw(this._cameraPosition,this._cameraPosition,I,-this.rollInRadians),s.bx(this._cameraPosition,this._cameraPosition,I,this.pitchInRadians),s.bw(this._cameraPosition,this._cameraPosition,I,-this.bearingInRadians),s.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bx(this._cameraPosition,this._cameraPosition,I,-this.center.lat*Math.PI/180),s.by(this._cameraPosition,this._cameraPosition,I,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(o);const O=s.b5(this._globeViewProjMatrixNoCorrectionInverted);s.N(O,O,[1,1,-1]),this._cachedFrustum=An.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(o){s.w("calculateFogMatrix is not supported on globe projection.");const f=s.ba();return s.ag(f),f}getVisibleUnwrappedCoordinates(o){return[new s.b2(0,o)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){o&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,f){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=Wn(o);s.aR(y,y,1+f/s.bu);const w=s.bv();return s.aw(w,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),w[2]/w[3]}populateCache(o){}getBounds(){const o=.5*this.width,f=.5*this.height,y=[new s.P(0,0),new s.P(o,0),new s.P(this.width,0),new s.P(this.width,f),new s.P(this.width,this.height),new s.P(o,this.height),new s.P(0,this.height),new s.P(0,f)],w=[];for(const ge of y)w.push(this.unprojectScreenPoint(ge));let T=0,I=0,O=0,V=0;const se=this.center;for(const ge of w){const de=s.bA(se.lng,ge.lng),Ee=s.bA(se.lat,ge.lat);de<I&&(I=de),de>T&&(T=de),Ee<V&&(V=Ee),Ee>O&&(O=Ee)}const oe=[se.lng+I,se.lat+V,se.lng+T,se.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(oe[3]=90,oe[0]=-180,oe[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(oe[1]=-90,oe[0]=-180,oe[2]=180),new Ct(oe)}getConstrained(o,f){const y=s.ah(o.lat,-s.ai,s.ai),w=s.ah(+f,this.minZoom+re(0,y),this.maxZoom);return{center:new s.S(o.lng,y),zoom:w}}calculateCenterFromCameraLngLatAlt(o,f,y,w){return this._helper.calculateCenterFromCameraLngLatAlt(o,f,y,w)}setLocationAtPoint(o,f){const y=Wn(this.unprojectScreenPoint(f)),w=Wn(o),T=s.bp();s.bB(T);const I=s.bp();s.by(I,y,T,-this.center.lng*Math.PI/180),s.bx(I,I,T,this.center.lat*Math.PI/180);const O=w[0]*w[0]+w[2]*w[2],V=I[0]*I[0];if(O<V)return;const se=Math.sqrt(O-V),oe=-se,ge=s.bC(w[0],w[2],I[0],se),de=s.bC(w[0],w[2],I[0],oe),Ee=s.bp();s.by(Ee,w,T,-ge);const je=s.bC(Ee[1],Ee[2],I[1],I[2]),Je=s.bp();s.by(Je,w,T,-de);const tt=s.bC(Je[1],Je[2],I[1],I[2]),at=.5*Math.PI,ft=je>=-at&&je<=at,mt=tt>=-at&&tt<=at;let pt,bt;if(ft&&mt){const tr=this.center.lng*Math.PI/180,Vt=this.center.lat*Math.PI/180;s.bD(ge,tr)+s.bD(je,Vt)<s.bD(de,tr)+s.bD(tt,Vt)?(pt=ge,bt=je):(pt=de,bt=tt)}else if(ft)pt=ge,bt=je;else{if(!mt)return;pt=de,bt=tt}const St=pt/Math.PI*180,gt=bt/Math.PI*180,kt=this.center.lat;this.setCenter(new s.S(St,s.ah(gt,-90,90))),this.setZoom(this.zoom+re(kt,this.center.lat))}locationToScreenPoint(o,f){const y=Wn(o);if(f){const w=f.getElevationForLngLatZoom(o,this._helper._tileZoom);s.aR(y,y,1+w/s.bu)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(o){const f=s.bv();return s.aw(f,[...o,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],new s.P((.5*f[0]+.5)*this.width,(.5*-f[1]+.5)*this.height)}screenPointToMercatorCoordinate(o,f){if(f){const y=f.pointCoordinate(o);if(y)return y}return s.a1.fromLngLat(this.unprojectScreenPoint(o))}screenPointToLocation(o,f){var y;return(y=this.screenPointToMercatorCoordinate(o,f))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(o,f){const y=this._cameraPosition,w=this.getRayDirectionFromPixel(o);return!!this.rayPlanetIntersection(y,w)}getRayDirectionFromPixel(o){const f=s.bv();f[0]=o.x/this.width*2-1,f[1]=-1*(o.y/this.height*2-1),f[2]=1,f[3]=1,s.aw(f,f,this._globeViewProjMatrixNoCorrectionInverted),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3];const y=s.bp();y[0]=f[0]-this._cameraPosition[0],y[1]=f[1]-this._cameraPosition[1],y[2]=f[2]-this._cameraPosition[2];const w=s.bp();return s.aV(w,y),w}isSurfacePointVisible(o){const f=this._cachedClippingPlane;return f[0]*o[0]+f[1]*o[1]+f[2]*o[2]+f[3]>=0}isSurfacePointOnScreen(o){if(!this.isSurfacePointVisible(o))return!1;const f=s.bv();return s.aw(f,[...o,1],this._globeViewProjMatrixNoCorrection),f[0]/=f[3],f[1]/=f[3],f[2]/=f[3],f[0]>-1&&f[0]<1&&f[1]>-1&&f[1]<1&&f[2]>-1&&f[2]<1}rayPlanetIntersection(o,f){const y=s.aX(o,f),w=s.bp(),T=s.bp();s.aR(T,f,y),s.aU(w,o,T);const I=1-s.aX(w,w);if(I<0)return null;const O=s.aX(o,o)-1,V=-y+(y<0?1:-1)*Math.sqrt(I),se=O/V,oe=V;return{tMin:Math.min(se,oe),tMax:Math.max(se,oe)}}unprojectScreenPoint(o){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(o),w=this.rayPlanetIntersection(f,y);if(w){const oe=s.bp();s.aS(oe,f,[y[0]*w.tMin,y[1]*w.tMin,y[2]*w.tMin]);const ge=s.bp();return s.aV(ge,oe),Xl(ge)}const T=this._cachedClippingPlane,I=T[0]*y[0]+T[1]*y[1]+T[2]*y[2],O=-s.b1(T,f)/I,V=s.bp();if(O>0)s.aS(V,f,[y[0]*O,y[1]*O,y[2]*O]);else{const oe=s.bp();s.aS(oe,f,[2*y[0],2*y[1],2*y[2]]);const ge=s.b1(this._cachedClippingPlane,oe);s.aU(V,oe,[this._cachedClippingPlane[0]*ge,this._cachedClippingPlane[1]*ge,this._cachedClippingPlane[2]*ge])}const se=function(oe){const ge=s.bp();return ge[0]=oe[0]*-oe[3],ge[1]=oe[1]*-oe[3],ge[2]=oe[2]*-oe[3],{center:ge,radius:Math.sqrt(1-oe[3]*oe[3])}}(T);return Xl(function(oe,ge,de){const Ee=s.bp();s.aU(Ee,de,oe);const je=s.bp();return s.bq(je,oe,Ee,ge/s.a$(Ee)),je}(se.center,se.radius,V))}getMatrixForModel(o,f){const y=s.S.convert(o),w=1/s.bu,T=s.b9();return s.bz(T,T,y.lng/180*Math.PI),s.b7(T,T,-y.lat/180*Math.PI),s.M(T,T,[0,0,1+f/s.bu]),s.b7(T,T,.5*Math.PI),s.N(T,T,[w,w,w]),T}getProjectionDataForCustomLayer(o=!0){const f=this.getProjectionData({overscaledTileID:new s.Z(0,0,0,0,0),applyGlobeMatrix:o});return f.tileMercatorCoords=[0,0,1,1],f}getFastPathSimpleProjectionMatrix(o){}}class Zi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,f,y){return this._helper.interpolatePadding(o,f,y)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,f,y=!0){this._helper.resize(o,f,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,f){this._helper.overrideNearFarZ(o,f)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(o,f){this._globeness=o,this._globeLatitudeErrorCorrectionRadians=f,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new oi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,f)=>this.getConstrained(o,f)}),this._globeness=1,this._mercatorTransform=new Va,this._verticalPerspectiveTransform=new Qi}clone(){const o=new Zi;return o._globeness=this._globeness,o._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,o.apply(this),o}apply(o){this._helper.apply(o),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(o){const f=this._mercatorTransform.getProjectionData(o),y=this._verticalPerspectiveTransform.getProjectionData(o);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:f.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:o.applyGlobeMatrix?this._globeness:0,fallbackMatrix:f.fallbackMatrix}}isLocationOccluded(o){return this.currentTransform.isLocationOccluded(o)}transformLightDirection(o){return this.currentTransform.transformLightDirection(o)}getPixelScale(){return s.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(o,f,y){const w=this._mercatorTransform.getPitchedTextCorrection(o,f,y),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(o,f,y);return s.bk(w,T,this._globeness)}projectTileCoordinates(o,f,y,w){return this.currentTransform.projectTileCoordinates(o,f,y,w)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(o){return this.currentTransform.calculateFogMatrix(o)}getVisibleUnwrappedCoordinates(o){return this.currentTransform.getVisibleUnwrappedCoordinates(o)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(o){this._mercatorTransform.recalculateZoomAndCenter(o),this._verticalPerspectiveTransform.recalculateZoomAndCenter(o)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,f){return this.currentTransform.lngLatToCameraDepth(o,f)}populateCache(o){this._mercatorTransform.populateCache(o),this._verticalPerspectiveTransform.populateCache(o)}getBounds(){return this.currentTransform.getBounds()}getConstrained(o,f){return this.currentTransform.getConstrained(o,f)}calculateCenterFromCameraLngLatAlt(o,f,y,w){return this._helper.calculateCenterFromCameraLngLatAlt(o,f,y,w)}setLocationAtPoint(o,f){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(o,f),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(o,f),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(o,f){return this.currentTransform.locationToScreenPoint(o,f)}screenPointToMercatorCoordinate(o,f){return this.currentTransform.screenPointToMercatorCoordinate(o,f)}screenPointToLocation(o,f){return this.currentTransform.screenPointToLocation(o,f)}isPointOnMapSurface(o,f){return this.currentTransform.isPointOnMapSurface(o,f)}getRayDirectionFromPixel(o){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(o)}getMatrixForModel(o,f){return this.currentTransform.getMatrixForModel(o,f)}getProjectionDataForCustomLayer(o=!0){const f=this._mercatorTransform.getProjectionDataForCustomLayer(o);if(!this.isGlobeRendering)return f;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(o);return y.fallbackMatrix=f.mainMatrix,y}getFastPathSimpleProjectionMatrix(o){return this.currentTransform.getFastPathSimpleProjectionMatrix(o)}}class Bn{get useGlobeControls(){return!0}handlePanInertia(o,f){const y=Ie(o,f);return Math.abs(y.lng-f.center.lng)>180&&(y.lng=f.center.lng+179.5*Math.sign(y.lng-f.center.lng)),{easingCenter:y,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(o,f){const y=o.around,w=f.screenPointToLocation(y);o.bearingDelta&&f.setBearing(f.bearing+o.bearingDelta),o.pitchDelta&&f.setPitch(f.pitch+o.pitchDelta),o.rollDelta&&f.setRoll(f.roll+o.rollDelta);const T=f.zoom;o.zoomDelta&&f.setZoom(f.zoom+o.zoomDelta);const I=f.zoom-T;if(I===0)return;const O=s.bA(f.center.lng,w.lng),V=O/(Math.abs(O/180)+1),se=s.bA(f.center.lat,w.lat),oe=f.getRayDirectionFromPixel(y),ge=f.cameraPosition,de=-1*s.aX(ge,oe),Ee=s.bp();s.aS(Ee,ge,[oe[0]*de,oe[1]*de,oe[2]*de]);const je=s.aZ(Ee)-1,Je=Math.exp(.5*-Math.max(je-.3,0)),tt=yc(f.worldSize,f.center.lat)/Math.min(f.width,f.height),at=s.bn(tt,.9,.5,1,.25),ft=(1-s.af(-I))*Math.min(Je,at),mt=f.center.lat,pt=f.zoom,bt=new s.S(f.center.lng+V*ft,s.ah(f.center.lat+se*ft,-s.ai,s.ai));f.setLocationAtPoint(w,y);const St=f.center,gt=s.bn(Math.abs(O),45,85,0,1),kt=s.bn(tt,.75,.35,0,1),tr=Math.pow(Math.max(gt,kt),.25),Vt=s.bA(St.lng,bt.lng),Wt=s.bA(St.lat,bt.lat);f.setCenter(new s.S(St.lng+Vt*tr,St.lat+Wt*tr).wrap()),f.setZoom(pt+re(mt,f.center.lat))}handleMapControlsPan(o,f,y){if(!o.panDelta)return;const w=f.center.lat,T=f.zoom;f.setCenter(Ie(o.panDelta,f).wrap()),f.setZoom(T+re(w,f.center.lat))}cameraForBoxAndBearing(o,f,y,w,T){const I=_a(o,f,y,w,T),O=f.left/T.width*2-1,V=(T.width-f.right)/T.width*2-1,se=f.top/T.height*-2+1,oe=(T.height-f.bottom)/T.height*-2+1,ge=s.bA(y.getWest(),y.getEast())<0,de=ge?y.getEast():y.getWest(),Ee=ge?y.getWest():y.getEast(),je=Math.max(y.getNorth(),y.getSouth()),Je=Math.min(y.getNorth(),y.getSouth()),tt=de+.5*s.bA(de,Ee),at=je+.5*s.bA(je,Je),ft=T.clone();ft.setCenter(I.center),ft.setBearing(I.bearing),ft.setPitch(0),ft.setRoll(0),ft.setZoom(I.zoom);const mt=ft.modelViewProjectionMatrix,pt=[Wn(y.getNorthWest()),Wn(y.getNorthEast()),Wn(y.getSouthWest()),Wn(y.getSouthEast()),Wn(new s.S(Ee,at)),Wn(new s.S(de,at)),Wn(new s.S(tt,je)),Wn(new s.S(tt,Je))],bt=Wn(I.center);let St=Number.POSITIVE_INFINITY;for(const gt of pt)O<0&&(St=Bn.getLesserNonNegativeNonNull(St,Bn.solveVectorScale(gt,bt,mt,"x",O))),V>0&&(St=Bn.getLesserNonNegativeNonNull(St,Bn.solveVectorScale(gt,bt,mt,"x",V))),se>0&&(St=Bn.getLesserNonNegativeNonNull(St,Bn.solveVectorScale(gt,bt,mt,"y",se))),oe<0&&(St=Bn.getLesserNonNegativeNonNull(St,Bn.solveVectorScale(gt,bt,mt,"y",oe)));if(Number.isFinite(St)&&St!==0)return I.zoom=ft.zoom+s.ak(St),I;Yn()}handleJumpToCenterZoom(o,f){const y=o.center.lat,w=o.getConstrained(f.center?s.S.convert(f.center):o.center,o.zoom).center;o.setCenter(w.wrap());const T=f.zoom!==void 0?+f.zoom:o.zoom+re(y,w.lat);o.zoom!==T&&o.setZoom(T)}handleEaseTo(o,f){const y=o.zoom,w=o.center,T=o.padding,I={roll:o.roll,pitch:o.pitch,bearing:o.bearing},O={roll:f.roll===void 0?o.roll:f.roll,pitch:f.pitch===void 0?o.pitch:f.pitch,bearing:f.bearing===void 0?o.bearing:f.bearing},V=f.zoom!==void 0,se=!o.isPaddingEqual(f.padding);let oe=!1;const ge=f.center?s.S.convert(f.center):w,de=o.getConstrained(ge,y).center;so(o,de);const Ee=o.clone();Ee.setCenter(de),Ee.setZoom(V?+f.zoom:y+re(w.lat,ge.lat)),Ee.setBearing(f.bearing);const je=new s.P(s.ah(o.centerPoint.x+f.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+f.offsetAsPoint.y,0,o.height));Ee.setLocationAtPoint(de,je);const Je=(f.offset&&f.offsetAsPoint.mag())>0?Ee.center:de,tt=V?+f.zoom:y+re(w.lat,Je.lat),at=y+re(w.lat,0),ft=tt+re(Je.lat,0),mt=s.bA(w.lng,Je.lng),pt=s.bA(w.lat,Je.lat),bt=s.af(ft-at);return oe=tt!==y,{easeFunc:St=>{if(s.be(I,O)||Ls({startEulerAngles:I,endEulerAngles:O,tr:o,k:St,useSlerp:I.roll!=O.roll}),se&&o.interpolatePadding(T,f.padding,St),f.around)s.w("Easing around a point is not supported under globe projection."),o.setLocationAtPoint(f.around,f.aroundPoint);else{const gt=ft>at?Math.min(2,bt):Math.max(.5,bt),kt=Math.pow(gt,1-St),tr=Et(w,mt,pt,St*kt);o.setCenter(tr.wrap())}if(oe){const gt=s.C.number(at,ft,St)+re(0,o.center.lat);o.setZoom(gt)}},isZooming:oe,elevationCenter:Je}}handleFlyTo(o,f){const y=f.zoom!==void 0,w=o.center,T=o.zoom,I=o.padding,O=!o.isPaddingEqual(f.padding),V=o.getConstrained(s.S.convert(f.center||f.locationAtOffset),T).center,se=y?+f.zoom:o.zoom+re(o.center.lat,V.lat),oe=o.clone();oe.setCenter(V),oe.setZoom(se),oe.setBearing(f.bearing);const ge=new s.P(s.ah(o.centerPoint.x+f.offsetAsPoint.x,0,o.width),s.ah(o.centerPoint.y+f.offsetAsPoint.y,0,o.height));oe.setLocationAtPoint(V,ge);const de=oe.center;so(o,de);const Ee=function(pt,bt,St){const gt=Wn(bt),kt=Wn(St),tr=s.aX(gt,kt),Vt=Math.acos(tr),Wt=ku(pt);return Vt/(2*Math.PI)*Wt}(o,w,de),je=T+re(w.lat,0),Je=se+re(de.lat,0),tt=s.af(Je-je);let at;if(typeof f.minZoom=="number"){const pt=+f.minZoom+re(de.lat,0),bt=Math.min(pt,je,Je)+re(0,de.lat),St=o.getConstrained(de,bt).zoom+re(de.lat,0);at=s.af(St-je)}const ft=s.bA(w.lng,de.lng),mt=s.bA(w.lat,de.lat);return{easeFunc:(pt,bt,St,gt)=>{const kt=Et(w,ft,mt,St);O&&o.interpolatePadding(I,f.padding,pt);const tr=pt===1?de:kt;o.setCenter(tr.wrap());const Vt=je+s.ak(bt);o.setZoom(pt===1?se:Vt+re(0,tr.lat))},scaleOfZoom:tt,targetCenter:de,scaleOfMinZoom:at,pixelPathLength:Ee}}static solveVectorScale(o,f,y,w,T){const I=w==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],O=[y[3],y[7],y[11],y[15]],V=o[0]*I[0]+o[1]*I[1]+o[2]*I[2],se=o[0]*O[0]+o[1]*O[1]+o[2]*O[2],oe=f[0]*I[0]+f[1]*I[1]+f[2]*I[2],ge=f[0]*O[0]+f[1]*O[1]+f[2]*O[2];return oe+T*se===V+T*ge||O[3]*(V-oe)+I[3]*(ge-se)+V*ge==oe*se?null:(oe+I[3]-T*ge-T*O[3])/(oe-V-T*ge+T*se)}static getLesserNonNegativeNonNull(o,f){return f!==null&&f>=0&&f<o?f:o}}class Gs{constructor(o){this._globe=o,this._mercatorCameraHelper=new el,this._verticalPerspectiveCameraHelper=new Bn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(o,f){return this.currentHelper.handlePanInertia(o,f)}handleMapControlsRollPitchBearingZoom(o,f){return this.currentHelper.handleMapControlsRollPitchBearingZoom(o,f)}handleMapControlsPan(o,f,y){this.currentHelper.handleMapControlsPan(o,f,y)}cameraForBoxAndBearing(o,f,y,w,T){return this.currentHelper.cameraForBoxAndBearing(o,f,y,w,T)}handleJumpToCenterZoom(o,f){this.currentHelper.handleJumpToCenterZoom(o,f)}handleEaseTo(o,f){return this.currentHelper.handleEaseTo(o,f)}handleFlyTo(o,f){return this.currentHelper.handleFlyTo(o,f)}}const Qn=(S,o)=>s.y(S,o&&o.filter(f=>f.identifier!=="source.canvas")),da=s.bE();class Ms extends s.E{constructor(o,f={}){var y,w;super(),this._rtlPluginLoaded=()=>{for(const I in this.sourceCaches){const O=this.sourceCaches[I].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[I].reload()}},this.map=o,this.dispatcher=new Me(be(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(I,O)=>this.getGlyphs(I,O)),this.dispatcher.registerMessageHandler("GI",(I,O)=>this.getImages(I,O)),this.dispatcher.registerMessageHandler("GDA",(I,O)=>this.getDashes(I,O)),this.imageManager=new J,this.imageManager.setEventedParent(this);const T=((y=o._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((w=document.documentElement)===null||w===void 0?void 0:w.lang)||void 0;this.glyphManager=new me(o._requestManager,f.localIdeographFontFamily,T),this.lineAtlas=new Ne(256,512),this.crossTileSymbolIndex=new vc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",s.bG()),Ar().on(wi,this._rtlPluginLoaded),this.on("data",I=>{if(I.dataType!=="source"||I.sourceDataType!=="metadata")return;const O=this.sourceCaches[I.sourceId];if(!O)return;const V=O.getSource();if(V&&V.vectorLayerIds)for(const se in this._layers){const oe=this._layers[se];oe.source===V.id&&this._validateLayer(oe)}})}setGlobalStateProperty(o,f){var y,w,T;this._checkLoaded();const I=f===null?(T=(w=(y=this.stylesheet.state)===null||y===void 0?void 0:y[o])===null||w===void 0?void 0:w.default)!==null&&T!==void 0?T:null:f;if(s.bH(I,this._globalState[o]))return this;this._globalState[o]=I,this._applyGlobalStateChanges([o])}getGlobalState(){return this._globalState}setGlobalState(o){this._checkLoaded();const f=[];for(const y in o)!s.bH(this._globalState[y],o[y].default)&&(f.push(y),this._globalState[y]=o[y].default);this._applyGlobalStateChanges(f)}_applyGlobalStateChanges(o){if(o.length===0)return;const f=new Set,y={};for(const w of o){y[w]=this._globalState[w];for(const T in this._layers){const I=this._layers[T],O=I.getLayoutAffectingGlobalStateRefs(),V=I.getPaintAffectingGlobalStateRefs();if(O.has(w)&&f.add(I.source),V.has(w))for(const{name:se,value:oe}of V.get(w))this._updatePaintProperty(I,se,oe)}}this.dispatcher.broadcast("UGS",y);for(const w in this.sourceCaches)f.has(w)&&(this._reloadSource(w),this._changed=!0)}loadURL(o,f={},y){this.fire(new s.l("dataloading",{dataType:"style"})),f.validate=typeof f.validate!="boolean"||f.validate;const w=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;s.j(w,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,f,y)}).catch(I=>{this._loadStyleRequest=null,I&&!T.signal.aborted&&this.fire(new s.k(I))})}loadJSON(o,f={},y){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,F.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,f.validate=f.validate!==!1,this._load(o,f,y)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(da,{validate:!1})}_load(o,f,y){var w,T;let I=f.transformStyle?f.transformStyle(y,o):o;if(!f.validate||!Qn(this,s.z(I))){I=Object.assign({},I),this._loaded=!0,this.stylesheet=I;for(const O in I.sources)this.addSource(O,I.sources[O],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new he(this.stylesheet.light),this._setProjectionInternal(((w=this.stylesheet.projection)===null||w===void 0?void 0:w.type)||"mercator"),this.sky=new $e(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var o,f,y;const w=s.bI(this.stylesheet.layers);this.setGlobalState((o=this.stylesheet.state)!==null&&o!==void 0?o:null),this.dispatcher.broadcast("SL",w),this._order=w.map(T=>T.id),this._layers={},this._serializedLayers=null;for(const T of w){const I=s.bJ(T,this._globalState);if(I.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=I,s.bK(I)&&this.sourceCaches[I.source]){const O=(y=(f=T.paint)===null||f===void 0?void 0:f["raster-fade-duration"])!==null&&y!==void 0?y:I.paint.get("raster-fade-duration");this.sourceCaches[I.source].setRasterFadeDuration(O)}}}_loadSprite(o,f=!1,y=void 0){let w;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,I,O,V){return s._(this,void 0,void 0,function*(){const se=ne(T),oe=O>1?"@2x":"",ge={},de={};for(const{id:Ee,url:je}of se){const Je=I.transformRequest(Z(je,oe,".json"),"SpriteJSON");ge[Ee]=s.j(Je,V);const tt=I.transformRequest(Z(je,oe,".png"),"SpriteImage");de[Ee]=ee.getImage(tt,V)}return yield Promise.all([...Object.values(ge),...Object.values(de)]),function(Ee,je){return s._(this,void 0,void 0,function*(){const Je={};for(const tt in Ee){Je[tt]={};const at=F.getImageCanvasContext((yield je[tt]).data),ft=(yield Ee[tt]).data;for(const mt in ft){const{width:pt,height:bt,x:St,y:gt,sdf:kt,pixelRatio:tr,stretchX:Vt,stretchY:Wt,content:Xt,textFitWidth:Sr,textFitHeight:Er}=ft[mt];Je[tt][mt]={data:null,pixelRatio:tr,sdf:kt,stretchX:Vt,stretchY:Wt,content:Xt,textFitWidth:Sr,textFitHeight:Er,spriteData:{width:pt,height:bt,x:St,y:gt,context:at}}}}return Je})}(ge,de)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(const I in T){this._spritesImagesIds[I]=[];const O=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(V=>!(V in T)):[];for(const V of O)this.imageManager.removeImage(V),this._changedImages[V]=!0;for(const V in T[I]){const se=I==="default"?V:`${I}:${V}`;this._spritesImagesIds[I].push(se),se in this.imageManager.images?this.imageManager.updateImage(se,T[I][V],!1):this.imageManager.addImage(se,T[I][V]),f&&(this._changedImages[se]=!0)}}}).catch(T=>{this._spriteRequest=null,w=T,this.fire(new s.k(w))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),f&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),y&&y(w)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(o){const f=this.sourceCaches[o.source];if(!f)return;const y=o.sourceLayer;if(!y)return;const w=f.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.k(new Error(`Source layer "${y}" does not exist on source "${w.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,f=!1){const y=this._serializedAllLayers();if(!o||o.length===0)return Object.values(f?s.bL(y):y);const w=[];for(const T of o)if(y[T]){const I=f?s.bL(y[T]):y[T];w.push(I)}return w}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const f=Object.keys(this._layers);for(const y of f){const w=this._layers[y];w.type!=="custom"&&(o[y]=w.serialize())}return o}hasTransitions(){var o,f,y;if(!((o=this.light)===null||o===void 0)&&o.hasTransition()||!((f=this.sky)===null||f===void 0)&&f.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(const w in this._layers)if(this._layers[w].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const f=this._changed;if(f){const w=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(w.length||T.length)&&this._updateWorkerLayers(w,T);for(const I in this._updatedSources){const O=this._updatedSources[I];if(O==="reload")this._reloadSource(I);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}const y={};for(const w in this.sourceCaches){const T=this.sourceCaches[w];y[w]=T.used,T.used=!1}for(const w of this._order){const T=this._layers[w];T.recalculate(o,this._availableImages),!T.isHidden(o.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const w in y){const T=this.sourceCaches[w];!!y[w]!=!!T.used&&T.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(o),this.sky.recalculate(o),this.projection.recalculate(o),this.z=o.zoom,f&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,f){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,f={}){var y;this._checkLoaded();const w=this.serialize();if(o=f.transformStyle?f.transformStyle(w,o):o,((y=f.validate)===null||y===void 0||y)&&Qn(this,s.z(o)))return!1;(o=s.bL(o)).layers=s.bI(o.layers);const T=s.bM(w,o),I=this._getOperationsToPerform(T);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const O of I.operations)O();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){const f=[],y=[];for(const w of o)switch(w.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":f.push(()=>this.addLayer.apply(this,w.args));break;case"removeLayer":f.push(()=>this.removeLayer.apply(this,w.args));break;case"setPaintProperty":f.push(()=>this.setPaintProperty.apply(this,w.args));break;case"setLayoutProperty":f.push(()=>this.setLayoutProperty.apply(this,w.args));break;case"setFilter":f.push(()=>this.setFilter.apply(this,w.args));break;case"addSource":f.push(()=>this.addSource.apply(this,w.args));break;case"removeSource":f.push(()=>this.removeSource.apply(this,w.args));break;case"setLayerZoomRange":f.push(()=>this.setLayerZoomRange.apply(this,w.args));break;case"setLight":f.push(()=>this.setLight.apply(this,w.args));break;case"setGeoJSONSourceData":f.push(()=>this.setGeoJSONSourceData.apply(this,w.args));break;case"setGlyphs":f.push(()=>this.setGlyphs.apply(this,w.args));break;case"setSprite":f.push(()=>this.setSprite.apply(this,w.args));break;case"setTerrain":f.push(()=>this.map.setTerrain.apply(this,w.args));break;case"setSky":f.push(()=>this.setSky.apply(this,w.args));break;case"setProjection":this.setProjection.apply(this,w.args);break;case"setGlobalState":f.push(()=>this.setGlobalState.apply(this,w.args));break;case"setTransition":f.push(()=>{});break;default:y.push(w.command)}return{operations:f,unimplemented:y}}addImage(o,f){if(this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,f),this._afterImageUpdated(o)}updateImage(o,f){this.imageManager.updateImage(o,f)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new s.k(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,f,y={}){if(this._checkLoaded(),this.sourceCaches[o]!==void 0)throw new Error(`Source "${o}" already exists.`);if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(s.z.source,`sources.${o}`,f,null,y))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const w=this.sourceCaches[o]=new Hr(o,f,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:w.loaded(),source:w.serialize(),sourceId:o})),w.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===o)return this.fire(new s.k(new Error(`Source "${o}" cannot be removed while layer "${y}" is using it.`)));const f=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],f.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),f.setEventedParent(null),f.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,f){if(this._checkLoaded(),this.sourceCaches[o]===void 0)throw new Error(`There is no source with this ID=${o}`);const y=this.sourceCaches[o].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(f),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,f,y={}){this._checkLoaded();const w=o.id;if(this.getLayer(w))return void this.fire(new s.k(new Error(`Layer "${w}" already exists on this map.`)));let T;if(o.type==="custom"){if(Qn(this,s.bN(o)))return;T=s.bJ(o,this._globalState)}else{if("source"in o&&typeof o.source=="object"&&(this.addSource(w,o.source),o=s.bL(o),o=s.e(o,{source:w})),this._validate(s.z.layer,`layers.${w}`,o,{arrayIndex:-1},y))return;T=s.bJ(o,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:w}})}const I=f?this._order.indexOf(f):this._order.length;if(f&&I===-1)this.fire(new s.k(new Error(`Cannot add layer "${w}" before non-existing layer "${f}".`)));else{if(this._order.splice(I,0,w),this._layerOrderChanged=!0,this._layers[w]=T,this._removedLayers[w]&&T.source&&T.type!=="custom"){const O=this._removedLayers[w];delete this._removedLayers[w],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(o,f){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new s.k(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===f)return;const y=this._order.indexOf(o);this._order.splice(y,1);const w=f?this._order.indexOf(f):this._order.length;f&&w===-1?this.fire(new s.k(new Error(`Cannot move layer "${o}" before non-existing layer "${f}".`))):(this._order.splice(w,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const f=this._layers[o];if(!f)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${o}".`)));f.setEventedParent(null);const y=this._order.indexOf(o);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=f,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],f.onRemove&&f.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,f,y){this._checkLoaded();const w=this.getLayer(o);w?w.minzoom===f&&w.maxzoom===y||(f!=null&&(w.minzoom=f),y!=null&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,f,y={}){this._checkLoaded();const w=this.getLayer(o);if(w){if(!s.bH(w.filter,f))return f==null?(w.setFilter(void 0),void this._updateLayer(w)):void(this._validate(s.z.filter,`layers.${w.id}.filter`,f,null,y)||(w.setFilter(s.bL(f)),this._updateLayer(w)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return s.bL(this.getLayer(o).filter)}setLayoutProperty(o,f,y,w={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getLayoutProperty(f),y)||(T.setLayoutProperty(f,y,w),this._updateLayer(T)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,f){const y=this.getLayer(o);if(y)return y.getLayoutProperty(f);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,f,y,w={}){this._checkLoaded();const T=this.getLayer(o);T?s.bH(T.getPaintProperty(f),y)||this._updatePaintProperty(T,f,y,w):this.fire(new s.k(new Error(`Cannot style non-existing layer "${o}".`)))}_updatePaintProperty(o,f,y,w={}){o.setPaintProperty(f,y,w)&&this._updateLayer(o),s.bK(o)&&f==="raster-fade-duration"&&this.sourceCaches[o.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[o.id]=!0,this._serializedLayers=null}getPaintProperty(o,f){return this.getLayer(o).getPaintProperty(f)}setFeatureState(o,f){this._checkLoaded();const y=o.source,w=o.sourceLayer,T=this.sourceCaches[y];if(T===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const I=T.getSource().type;I==="geojson"&&w?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||w?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(w,o.id,f)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,f){this._checkLoaded();const y=o.source,w=this.sourceCaches[y];if(w===void 0)return void this.fire(new s.k(new Error(`The source '${y}' does not exist in the map's style.`)));const T=w.getSource().type,I=T==="vector"?o.sourceLayer:void 0;T!=="vector"||I?f&&typeof o.id!="string"&&typeof o.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(I,o.id,f):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const f=o.source,y=o.sourceLayer,w=this.sourceCaches[f];if(w!==void 0)return w.getSource().type!=="vector"||y?(o.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),w.getFeatureState(y,o.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=s.bO(this.sourceCaches,T=>T.serialize()),f=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,w=this.stylesheet;return s.bP({version:w.version,name:w.name,metadata:w.metadata,light:w.light,sky:w.sky,center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch,sprite:w.sprite,glyphs:w.glyphs,transition:w.transition,projection:w.projection,sources:o,layers:f,terrain:y},T=>T!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&this.sourceCaches[o.source].getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const f=I=>this._layers[I].type==="fill-extrusion",y={},w=[];for(let I=this._order.length-1;I>=0;I--){const O=this._order[I];if(f(O)){y[O]=I;for(const V of o){const se=V[O];if(se)for(const oe of se)w.push(oe)}}}w.sort((I,O)=>O.intersectionZ-I.intersectionZ);const T=[];for(let I=this._order.length-1;I>=0;I--){const O=this._order[I];if(f(O))for(let V=w.length-1;V>=0;V--){const se=w[V].feature;if(y[se.layer.id]<I)break;T.push(se),w.pop()}else for(const V of o){const se=V[O];if(se)for(const oe of se)T.push(oe.feature)}}return T}queryRenderedFeatures(o,f,y){f&&f.filter&&this._validate(s.z.filter,"queryRenderedFeatures.filter",f.filter,null,f);const w={};if(f&&f.layers){if(!(Array.isArray(f.layers)||f.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const se of f.layers){const oe=this._layers[se];if(!oe)return this.fire(new s.k(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];w[oe.source]=!0}}const T=[];f.availableImages=this._availableImages;const I=this._serializedAllLayers(),O=f.layers instanceof Set?f.layers:Array.isArray(f.layers)?new Set(f.layers):null,V=Object.assign(Object.assign({},f),{layers:O,globalState:this._globalState});for(const se in this.sourceCaches)f.layers&&!w[se]||T.push(ut(this.sourceCaches[se],this._layers,I,o,V,y,this.map.terrain?(oe,ge,de)=>this.map.terrain.getElevation(oe,ge,de):void 0));return this.placement&&T.push(function(se,oe,ge,de,Ee,je,Je){const tt={},at=je.queryRenderedSymbols(de),ft=[];for(const mt of Object.keys(at).map(Number))ft.push(Je[mt]);ft.sort(dt);for(const mt of ft){const pt=mt.featureIndex.lookupSymbolFeatures(at[mt.bucketInstanceId],oe,mt.bucketIndex,mt.sourceLayerIndex,{filterSpec:Ee.filter,globalState:Ee.globalState},Ee.layers,Ee.availableImages,se);for(const bt in pt){const St=tt[bt]=tt[bt]||[],gt=pt[bt];gt.sort((kt,tr)=>{const Vt=mt.featureSortOrder;if(Vt){const Wt=Vt.indexOf(kt.featureIndex);return Vt.indexOf(tr.featureIndex)-Wt}return tr.featureIndex-kt.featureIndex});for(const kt of gt)St.push(kt)}}return function(mt,pt,bt){for(const St in mt)for(const gt of mt[St])zt(gt,bt[pt[St].source]);return mt}(tt,se,ge)}(this._layers,I,this.sourceCaches,o,V,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(o,f){f?.filter&&this._validate(s.z.filter,"querySourceFeatures.filter",f.filter,null,f);const y=this.sourceCaches[o];return y?function(w,T){const I=w.getRenderableIds().map(se=>w.getTileByID(se)),O=[],V={};for(let se=0;se<I.length;se++){const oe=I[se],ge=oe.tileID.canonical.key;V[ge]||(V[ge]=!0,oe.querySourceFeatures(O,T))}return O}(y,f?Object.assign(Object.assign({},f),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(o,f={}){this._checkLoaded();const y=this.light.getLight();let w=!1;for(const I in o)if(!s.bH(o[I],y[I])){w=!0;break}if(!w)return;const T={now:F.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,f),this.light.updateTransitions(T)}getProjection(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.projection}setProjection(o){if(this._checkLoaded(),this.projection){if(this.projection.name===o.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=o,this._setProjectionInternal(o.type)}getSky(){var o;return(o=this.stylesheet)===null||o===void 0?void 0:o.sky}setSky(o,f={}){this._checkLoaded();const y=this.getSky();let w=!1;if(!o&&!y)return;if(o&&!y)w=!0;else if(!o&&y)w=!0;else for(const I in o)if(!s.bH(o[I],y[I])){w=!0;break}if(!w)return;const T={now:F.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,f),this.sky.updateTransitions(T)}_setProjectionInternal(o){const f=function(y){if(Array.isArray(y)){const w=new uh({type:y});return{projection:w,transform:new Zi,cameraHelper:new Gs(w)}}switch(y){case"mercator":return{projection:new nu,transform:new Va,cameraHelper:new el};case"globe":{const w=new uh({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:w,transform:new Zi,cameraHelper:new Gs(w)}}case"vertical-perspective":return{projection:new Fo,transform:new Qi,cameraHelper:new Bn};default:return s.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new nu,transform:new Va,cameraHelper:new el}}}(o);this.projection=f.projection,this.map.migrateProjection(f.transform,f.cameraHelper);for(const y in this.sourceCaches)this.sourceCaches[y].reload()}_validate(o,f,y,w,T={}){return(!T||T.validate!==!1)&&Qn(this,o.call(s.z,s.e({key:f,style:this.serialize(),value:y,styleSpec:s.v},w)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ar().off(wi,this._rtlPluginLoaded);for(const f in this._layers)this._layers[f].setEventedParent(null);for(const f in this.sourceCaches){const y=this.sourceCaches[f];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const f in this.sourceCaches)this.sourceCaches[f].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,f,y,w,T=!1){let I=!1,O=!1;const V={};for(const se of this._order){const oe=this._layers[se];if(oe.type!=="symbol")continue;if(!V[oe.source]){const de=this.sourceCaches[oe.source];V[oe.source]=de.getRenderableIds(!0).map(Ee=>de.getTileByID(Ee)).sort((Ee,je)=>je.tileID.overscaledZ-Ee.tileID.overscaledZ||(Ee.tileID.isLessThan(je.tileID)?-1:1))}const ge=this.crossTileSymbolIndex.addLayer(oe,V[oe.source],o.center.lng);I=I||ge}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(F.now(),o.zoom))&&(this.pauseablePlacement=new Nh(o,this.map.terrain,this._order,T,f,y,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,V),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(F.now()),O=!0),I&&this.pauseablePlacement.placement.setStale()),O||I)for(const se of this._order){const oe=this._layers[se];oe.type==="symbol"&&this.placement.updateLayerOpacities(oe,V[oe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(F.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,f){return s._(this,void 0,void 0,function*(){const y=yield this.imageManager.getImages(f.icons);this._updateTilesForChangedImages();const w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,f.icons),y})}getGlyphs(o,f){return s._(this,void 0,void 0,function*(){const y=yield this.glyphManager.getGlyphs(f.stacks),w=this.sourceCaches[f.source];return w&&w.setDependencies(f.tileID.key,f.type,[""]),y})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,f={}){this._checkLoaded(),o&&this._validate(s.z.glyphs,"glyphs",o,null,f)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}getDashes(o,f){return s._(this,void 0,void 0,function*(){const y={};for(const[w,T]of Object.entries(f.dashes))y[w]=this.lineAtlas.getDash(T.dasharray,T.round);return y})}addSprite(o,f,y={},w){this._checkLoaded();const T=[{id:o,url:f}],I=[...ne(this.stylesheet.sprite),...T];this._validate(s.z.sprite,"sprite",I,null,y)||(this.stylesheet.sprite=I,this._loadSprite(T,!0,w))}removeSprite(o){this._checkLoaded();const f=ne(this.stylesheet.sprite);if(f.find(y=>y.id===o)){if(this._spritesImagesIds[o])for(const y of this._spritesImagesIds[o])this.imageManager.removeImage(y),this._changedImages[y]=!0;f.splice(f.findIndex(y=>y.id===o),1),this.stylesheet.sprite=f.length>0?f:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(o,f={},y){this._checkLoaded(),o&&this._validate(s.z.sprite,"sprite",o,null,f)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,y):(this._unloadSprite(),y&&y(null)))}}var Da=s.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class yl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,f,y,w,T,I,O,V,se){this.context=o;let oe=this.boundPaintVertexBuffers.length!==w.length;for(let ge=0;!oe&&ge<w.length;ge++)this.boundPaintVertexBuffers[ge]!==w[ge]&&(oe=!0);!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==y||oe||this.boundIndexBuffer!==T||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==V||this.boundDynamicVertexBuffer3!==se?this.freshBind(f,y,w,T,I,O,V,se):(o.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),V&&V.bind(),se&&se.bind())}freshBind(o,f,y,w,T,I,O,V){const se=o.numAttributes,oe=this.context,ge=oe.gl;this.vao&&this.destroy(),this.vao=oe.createVertexArray(),oe.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=w,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=V,f.enableAttributes(ge,o);for(const de of y)de.enableAttributes(ge,o);I&&I.enableAttributes(ge,o),O&&O.enableAttributes(ge,o),V&&V.enableAttributes(ge,o),f.bind(),f.setVertexAttribPointers(ge,o,T);for(const de of y)de.bind(),de.setVertexAttribPointers(ge,o,T);I&&(I.bind(),I.setVertexAttribPointers(ge,o,T)),w&&w.bind(),O&&(O.bind(),O.setVertexAttribPointers(ge,o,T)),V&&(V.bind(),V.setVertexAttribPointers(ge,o,T)),oe.currentNumAttributes=se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const tl=(S,o,f,y,w)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:o,u_fog_color:f?f.properties.get("fog-color"):s.bf.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?0:f?f.calculateFogBlendOpacity(y):0,u_horizon_color:f?f.properties.get("horizon-color"):s.bf.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1,u_is_globe_mode:w?1:0}),_l={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function bl(S){const o=[];for(let f=0;f<S.length;f++){if(S[f]===null)continue;const y=S[f].split(" ");o.push(y.pop())}return o}class wl{constructor(o,f,y,w,T,I,O,V,se=[]){const oe=o.gl;this.program=oe.createProgram();const ge=bl(f.staticAttributes),de=y?y.getBinderAttributes():[],Ee=ge.concat(de),je=ya.prelude.staticUniforms?bl(ya.prelude.staticUniforms):[],Je=O.staticUniforms?bl(O.staticUniforms):[],tt=f.staticUniforms?bl(f.staticUniforms):[],at=y?y.getBinderUniforms():[],ft=je.concat(Je).concat(tt).concat(at),mt=[];for(const Vt of ft)mt.indexOf(Vt)<0&&mt.push(Vt);const pt=y?y.defines():[];_s(oe)&&pt.unshift("#version 300 es"),T&&pt.push("#define OVERDRAW_INSPECTOR;"),I&&pt.push("#define TERRAIN3D;"),V&&pt.push(V),se&&pt.push(...se);let bt=pt.concat(ya.prelude.fragmentSource,O.fragmentSource,f.fragmentSource).join(`
`),St=pt.concat(ya.prelude.vertexSource,O.vertexSource,f.vertexSource).join(`
`);_s(oe)||(bt=function(Vt){return Vt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(bt),St=function(Vt){return Vt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(St));const gt=oe.createShader(oe.FRAGMENT_SHADER);if(oe.isContextLost())return void(this.failedToCreate=!0);if(oe.shaderSource(gt,bt),oe.compileShader(gt),!oe.getShaderParameter(gt,oe.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${oe.getShaderInfoLog(gt)}`);oe.attachShader(this.program,gt);const kt=oe.createShader(oe.VERTEX_SHADER);if(oe.isContextLost())return void(this.failedToCreate=!0);if(oe.shaderSource(kt,St),oe.compileShader(kt),!oe.getShaderParameter(kt,oe.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${oe.getShaderInfoLog(kt)}`);oe.attachShader(this.program,kt),this.attributes={};const tr={};this.numAttributes=Ee.length;for(let Vt=0;Vt<this.numAttributes;Vt++)Ee[Vt]&&(oe.bindAttribLocation(this.program,Vt,Ee[Vt]),this.attributes[Ee[Vt]]=Vt);if(oe.linkProgram(this.program),!oe.getProgramParameter(this.program,oe.LINK_STATUS))throw new Error(`Program failed to link: ${oe.getProgramInfoLog(this.program)}`);oe.deleteShader(kt),oe.deleteShader(gt);for(let Vt=0;Vt<mt.length;Vt++){const Wt=mt[Vt];if(Wt&&!tr[Wt]){const Xt=oe.getUniformLocation(this.program,Wt);Xt&&(tr[Wt]=Xt)}}this.fixedUniforms=w(o,tr),this.terrainUniforms=((Vt,Wt)=>({u_depth:new s.bQ(Vt,Wt.u_depth),u_terrain:new s.bQ(Vt,Wt.u_terrain),u_terrain_dim:new s.bg(Vt,Wt.u_terrain_dim),u_terrain_matrix:new s.bS(Vt,Wt.u_terrain_matrix),u_terrain_unpack:new s.bT(Vt,Wt.u_terrain_unpack),u_terrain_exaggeration:new s.bg(Vt,Wt.u_terrain_exaggeration)}))(o,tr),this.projectionUniforms=((Vt,Wt)=>({u_projection_matrix:new s.bS(Vt,Wt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bT(Vt,Wt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bT(Vt,Wt.u_projection_clipping_plane),u_projection_transition:new s.bg(Vt,Wt.u_projection_transition),u_projection_fallback_matrix:new s.bS(Vt,Wt.u_projection_fallback_matrix)}))(o,tr),this.binderUniforms=y?y.getUniforms(o,tr):[]}draw(o,f,y,w,T,I,O,V,se,oe,ge,de,Ee,je,Je,tt,at,ft,mt){const pt=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(y),o.setStencilMode(w),o.setColorMode(T),o.setCullFace(I),V){o.activeTexture.set(pt.TEXTURE2),pt.bindTexture(pt.TEXTURE_2D,V.depthTexture),o.activeTexture.set(pt.TEXTURE3),pt.bindTexture(pt.TEXTURE_2D,V.texture);for(const St in this.terrainUniforms)this.terrainUniforms[St].set(V[St])}if(se)for(const St in se)this.projectionUniforms[_l[St]].set(se[St]);if(O)for(const St in this.fixedUniforms)this.fixedUniforms[St].set(O[St]);tt&&tt.setUniforms(o,this.binderUniforms,je,{zoom:Je});let bt=0;switch(f){case pt.LINES:bt=2;break;case pt.TRIANGLES:bt=3;break;case pt.LINE_STRIP:bt=1}for(const St of Ee.get()){const gt=St.vaos||(St.vaos={});(gt[oe]||(gt[oe]=new yl)).bind(o,this,ge,tt?tt.getPaintVertexBuffers():[],de,St.vertexOffset,at,ft,mt),pt.drawElements(f,St.primitiveLength*bt,pt.UNSIGNED_SHORT,St.primitiveOffset*bt*2)}}}function wa(S,o,f){const y=1/s.aC(f,1,o.transform.tileZoom),w=Math.pow(2,f.tileID.overscaledZ),T=f.tileSize*Math.pow(2,o.transform.tileZoom)/w,I=T*(f.tileID.canonical.x+f.tileID.wrap*w),O=T*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[y,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[I>>16,O>>16],u_pixel_coord_lower:[65535&I,65535&O]}}const su=(S,o,f,y)=>{const w=S.style.light,T=w.properties.get("position"),I=[T.x,T.y,T.z],O=s.bW();w.properties.get("anchor")==="viewport"&&s.bX(O,S.transform.bearingInRadians),s.bY(I,I,O);const V=S.transform.transformLightDirection(I),se=w.properties.get("color");return{u_lightpos:I,u_lightpos_globe:V,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+o,u_opacity:f,u_fill_translate:y}},_c=(S,o,f,y,w,T,I)=>s.e(su(S,o,f,y),wa(T,S,I),{u_height_factor:-Math.pow(2,w.overscaledZ)/I.tileSize/8}),No=(S,o,f,y)=>s.e(wa(o,S,f),{u_fill_translate:y}),Ps=(S,o)=>({u_world:S,u_fill_translate:o}),Fu=(S,o,f,y,w)=>s.e(No(S,o,f,w),{u_world:y}),ao=(S,o,f,y,w)=>{const T=S.transform;let I,O,V=0;if(f.paint.get("circle-pitch-alignment")==="map"){const se=s.aC(o,1,T.zoom);I=!0,O=[se,se],V=se/(s.$*Math.pow(2,o.tileID.overscaledZ))*2*Math.PI*w}else I=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+I,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:V,u_translate:y}},hA=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),bc=S=>({u_viewport_size:[S.width,S.height]}),Ga=(S,o=1)=>({u_color:S,u_overlay:0,u_overlay_scale:o}),Cl=(S,o,f,y)=>{const w=s.aC(S,1,o)/(s.$*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:s.aC(S,1,o),u_intensity:f,u_globe_extrude_scale:w}},Nu=(S,o,f,y)=>{const w=s.L();s.bZ(w,0,S.width,S.height,0,0,1);const T=S.context.gl;return{u_matrix:w,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:f,u_color_ramp:y,u_opacity:o.paint.get("heatmap-opacity")}},au=(S,o,f)=>{const y=f.paint.get("hillshade-accent-color");let w;switch(f.paint.get("hillshade-method")){case"basic":w=4;break;case"combined":w=1;break;case"igor":w=2;break;case"multidirectional":w=3;break;default:w=0}const T=f.getIlluminationProperties();for(let I=0;I<T.directionRadians.length;I++)f.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[I]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:Iu(0,o.tileID),u_exaggeration:f.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:y,u_method:w,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},Ca=(S,o)=>{const f=o.stride,y=s.L();return s.bZ(y,0,s.$,-s.$,0,0,1),s.M(y,y,[0,-s.$,0]),{u_matrix:y,u_image:1,u_dimension:[f,f],u_zoom:S.overscaledZ,u_unpack:o.getUnpackVector()}};function Iu(S,o){const f=Math.pow(2,o.canonical.z),y=o.canonical.y;return[new s.a1(0,y/f).toLngLat().lat,new s.a1(0,(y+1)/f).toLngLat().lat]}const ou=(S,o,f=0)=>({u_image:0,u_unpack:o.getUnpackVector(),u_dimension:[o.stride,o.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:f,u_opacity:S.paint.get("color-relief-opacity")}),wc=(S,o,f,y)=>{const w=S.transform;return{u_translation:Yl(S,o,f),u_ratio:y/s.aC(o,1,w.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Cc=(S,o,f,y,w)=>s.e(wc(S,o,f,y),{u_image:0,u_image_height:w}),oo=(S,o,f,y,w)=>{const T=S.transform,I=co(o,T);return{u_translation:Yl(S,o,f),u_texsize:o.imageAtlasTexture.size,u_ratio:y/s.aC(o,1,T.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[I,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},qa=(S,o,f,y,w)=>{const T=co(o,S.transform);return s.e(wc(S,o,f,y),{u_tileratio:T,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image:0,u_mix:w.t,u_lineatlas_width:S.lineAtlas.width,u_lineatlas_height:S.lineAtlas.height})},lo=(S,o,f,y,w,T)=>{const I=co(o,S.transform);return s.e(wc(S,o,f,y),{u_image:0,u_image_height:T,u_tileratio:I,u_crossfade_from:w.fromScale,u_crossfade_to:w.toScale,u_image_dash:1,u_mix:w.t,u_lineatlas_width:S.lineAtlas.width,u_lineatlas_height:S.lineAtlas.height})};function co(S,o){return 1/s.aC(S,1,o.tileZoom)}function Yl(S,o,f){return s.aD(S.transform,o,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}const Jl=(S,o,f,y,w)=>{return{u_tl_parent:S,u_scale_parent:o,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(I=y.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(T=y.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:AA(y.paint.get("raster-hue-rotate")),u_coords_top:[w[0].x,w[0].y,w[1].x,w[1].y],u_coords_bottom:[w[3].x,w[3].y,w[2].x,w[2].y]};var T,I};function AA(S){S*=Math.PI/180;const o=Math.sin(S),f=Math.cos(S);return[(2*f+1)/3,(-Math.sqrt(3)*o-f+1)/3,(Math.sqrt(3)*o-f+1)/3]}const hh=(S,o,f,y,w,T,I,O,V,se,oe,ge,de)=>{const Ee=I.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Ee.cameraToCenterDistance,u_pitch:Ee.pitch/360*2*Math.PI,u_rotate_symbol:+f,u_aspect_ratio:Ee.width/Ee.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:V,u_is_text:+oe,u_pitch_with_map:+y,u_is_along_line:w,u_is_variable_anchor:T,u_texsize:ge,u_texture:0,u_translation:se,u_pitched_scale:de}},bs=(S,o,f,y,w,T,I,O,V,se,oe,ge,de,Ee)=>{const je=I.transform;return s.e(hh(S,o,f,y,w,T,I,O,V,se,oe,ge,Ee),{u_gamma_scale:y?Math.cos(je.pitch*Math.PI/180)*je.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:1})},dA=(S,o,f,y,w,T,I,O,V,se,oe,ge,de)=>s.e(bs(S,o,f,y,w,T,I,O,V,se,!0,oe,0,de),{u_texsize_icon:ge,u_texture_icon:1}),ws=(S,o)=>({u_opacity:S,u_color:o}),Ka=(S,o,f,y,w)=>s.e(function(T,I,O,V){const se=O.imageManager.getPattern(T.from.toString()),oe=O.imageManager.getPattern(T.to.toString()),{width:ge,height:de}=O.imageManager.getPixelSize(),Ee=Math.pow(2,V.tileID.overscaledZ),je=V.tileSize*Math.pow(2,O.transform.tileZoom)/Ee,Je=je*(V.tileID.canonical.x+V.tileID.wrap*Ee),tt=je*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:oe.tl,u_pattern_br_b:oe.br,u_texsize:[ge,de],u_mix:I.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:oe.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/s.aC(V,1,O.transform.tileZoom),u_pixel_coord_upper:[Je>>16,tt>>16],u_pixel_coord_lower:[65535&Je,65535&tt]}}(f,w,o,y),{u_opacity:S}),Lu=(S,o)=>{},lu={fillExtrusion:(S,o)=>({u_lightpos:new s.bU(S,o.u_lightpos),u_lightpos_globe:new s.bU(S,o.u_lightpos_globe),u_lightintensity:new s.bg(S,o.u_lightintensity),u_lightcolor:new s.bU(S,o.u_lightcolor),u_vertical_gradient:new s.bg(S,o.u_vertical_gradient),u_opacity:new s.bg(S,o.u_opacity),u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillExtrusionPattern:(S,o)=>({u_lightpos:new s.bU(S,o.u_lightpos),u_lightpos_globe:new s.bU(S,o.u_lightpos_globe),u_lightintensity:new s.bg(S,o.u_lightintensity),u_lightcolor:new s.bU(S,o.u_lightcolor),u_vertical_gradient:new s.bg(S,o.u_vertical_gradient),u_height_factor:new s.bg(S,o.u_height_factor),u_opacity:new s.bg(S,o.u_opacity),u_fill_translate:new s.bV(S,o.u_fill_translate),u_image:new s.bQ(S,o.u_image),u_texsize:new s.bV(S,o.u_texsize),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade)}),fill:(S,o)=>({u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillPattern:(S,o)=>({u_image:new s.bQ(S,o.u_image),u_texsize:new s.bV(S,o.u_texsize),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade),u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillOutline:(S,o)=>({u_world:new s.bV(S,o.u_world),u_fill_translate:new s.bV(S,o.u_fill_translate)}),fillOutlinePattern:(S,o)=>({u_world:new s.bV(S,o.u_world),u_image:new s.bQ(S,o.u_image),u_texsize:new s.bV(S,o.u_texsize),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade),u_fill_translate:new s.bV(S,o.u_fill_translate)}),circle:(S,o)=>({u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_scale_with_map:new s.bQ(S,o.u_scale_with_map),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_extrude_scale:new s.bV(S,o.u_extrude_scale),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_globe_extrude_scale:new s.bg(S,o.u_globe_extrude_scale),u_translate:new s.bV(S,o.u_translate)}),collisionBox:(S,o)=>({u_pixel_extrude_scale:new s.bV(S,o.u_pixel_extrude_scale)}),collisionCircle:(S,o)=>({u_viewport_size:new s.bV(S,o.u_viewport_size)}),debug:(S,o)=>({u_color:new s.bR(S,o.u_color),u_overlay:new s.bQ(S,o.u_overlay),u_overlay_scale:new s.bg(S,o.u_overlay_scale)}),depth:Lu,clippingMask:Lu,heatmap:(S,o)=>({u_extrude_scale:new s.bg(S,o.u_extrude_scale),u_intensity:new s.bg(S,o.u_intensity),u_globe_extrude_scale:new s.bg(S,o.u_globe_extrude_scale)}),heatmapTexture:(S,o)=>({u_matrix:new s.bS(S,o.u_matrix),u_world:new s.bV(S,o.u_world),u_image:new s.bQ(S,o.u_image),u_color_ramp:new s.bQ(S,o.u_color_ramp),u_opacity:new s.bg(S,o.u_opacity)}),hillshade:(S,o)=>({u_image:new s.bQ(S,o.u_image),u_latrange:new s.bV(S,o.u_latrange),u_exaggeration:new s.bg(S,o.u_exaggeration),u_altitudes:new s.b$(S,o.u_altitudes),u_azimuths:new s.b$(S,o.u_azimuths),u_accent:new s.bR(S,o.u_accent),u_method:new s.bQ(S,o.u_method),u_shadows:new s.b_(S,o.u_shadows),u_highlights:new s.b_(S,o.u_highlights)}),hillshadePrepare:(S,o)=>({u_matrix:new s.bS(S,o.u_matrix),u_image:new s.bQ(S,o.u_image),u_dimension:new s.bV(S,o.u_dimension),u_zoom:new s.bg(S,o.u_zoom),u_unpack:new s.bT(S,o.u_unpack)}),colorRelief:(S,o)=>({u_image:new s.bQ(S,o.u_image),u_unpack:new s.bT(S,o.u_unpack),u_dimension:new s.bV(S,o.u_dimension),u_elevation_stops:new s.bQ(S,o.u_elevation_stops),u_color_stops:new s.bQ(S,o.u_color_stops),u_color_ramp_size:new s.bQ(S,o.u_color_ramp_size),u_opacity:new s.bg(S,o.u_opacity)}),line:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels)}),lineGradient:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_image:new s.bQ(S,o.u_image),u_image_height:new s.bg(S,o.u_image_height)}),linePattern:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_texsize:new s.bV(S,o.u_texsize),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_image:new s.bQ(S,o.u_image),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_scale:new s.bU(S,o.u_scale),u_fade:new s.bg(S,o.u_fade)}),lineSDF:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_image:new s.bQ(S,o.u_image),u_mix:new s.bg(S,o.u_mix),u_tileratio:new s.bg(S,o.u_tileratio),u_crossfade_from:new s.bg(S,o.u_crossfade_from),u_crossfade_to:new s.bg(S,o.u_crossfade_to),u_lineatlas_width:new s.bg(S,o.u_lineatlas_width),u_lineatlas_height:new s.bg(S,o.u_lineatlas_height)}),lineGradientSDF:(S,o)=>({u_translation:new s.bV(S,o.u_translation),u_ratio:new s.bg(S,o.u_ratio),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_units_to_pixels:new s.bV(S,o.u_units_to_pixels),u_image:new s.bQ(S,o.u_image),u_image_height:new s.bg(S,o.u_image_height),u_tileratio:new s.bg(S,o.u_tileratio),u_crossfade_from:new s.bg(S,o.u_crossfade_from),u_crossfade_to:new s.bg(S,o.u_crossfade_to),u_image_dash:new s.bQ(S,o.u_image_dash),u_mix:new s.bg(S,o.u_mix),u_lineatlas_width:new s.bg(S,o.u_lineatlas_width),u_lineatlas_height:new s.bg(S,o.u_lineatlas_height)}),raster:(S,o)=>({u_tl_parent:new s.bV(S,o.u_tl_parent),u_scale_parent:new s.bg(S,o.u_scale_parent),u_buffer_scale:new s.bg(S,o.u_buffer_scale),u_fade_t:new s.bg(S,o.u_fade_t),u_opacity:new s.bg(S,o.u_opacity),u_image0:new s.bQ(S,o.u_image0),u_image1:new s.bQ(S,o.u_image1),u_brightness_low:new s.bg(S,o.u_brightness_low),u_brightness_high:new s.bg(S,o.u_brightness_high),u_saturation_factor:new s.bg(S,o.u_saturation_factor),u_contrast_factor:new s.bg(S,o.u_contrast_factor),u_spin_weights:new s.bU(S,o.u_spin_weights),u_coords_top:new s.bT(S,o.u_coords_top),u_coords_bottom:new s.bT(S,o.u_coords_bottom)}),symbolIcon:(S,o)=>({u_is_size_zoom_constant:new s.bQ(S,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(S,o.u_is_size_feature_constant),u_size_t:new s.bg(S,o.u_size_t),u_size:new s.bg(S,o.u_size),u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_pitch:new s.bg(S,o.u_pitch),u_rotate_symbol:new s.bQ(S,o.u_rotate_symbol),u_aspect_ratio:new s.bg(S,o.u_aspect_ratio),u_fade_change:new s.bg(S,o.u_fade_change),u_label_plane_matrix:new s.bS(S,o.u_label_plane_matrix),u_coord_matrix:new s.bS(S,o.u_coord_matrix),u_is_text:new s.bQ(S,o.u_is_text),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_is_along_line:new s.bQ(S,o.u_is_along_line),u_is_variable_anchor:new s.bQ(S,o.u_is_variable_anchor),u_texsize:new s.bV(S,o.u_texsize),u_texture:new s.bQ(S,o.u_texture),u_translation:new s.bV(S,o.u_translation),u_pitched_scale:new s.bg(S,o.u_pitched_scale)}),symbolSDF:(S,o)=>({u_is_size_zoom_constant:new s.bQ(S,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(S,o.u_is_size_feature_constant),u_size_t:new s.bg(S,o.u_size_t),u_size:new s.bg(S,o.u_size),u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_pitch:new s.bg(S,o.u_pitch),u_rotate_symbol:new s.bQ(S,o.u_rotate_symbol),u_aspect_ratio:new s.bg(S,o.u_aspect_ratio),u_fade_change:new s.bg(S,o.u_fade_change),u_label_plane_matrix:new s.bS(S,o.u_label_plane_matrix),u_coord_matrix:new s.bS(S,o.u_coord_matrix),u_is_text:new s.bQ(S,o.u_is_text),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_is_along_line:new s.bQ(S,o.u_is_along_line),u_is_variable_anchor:new s.bQ(S,o.u_is_variable_anchor),u_texsize:new s.bV(S,o.u_texsize),u_texture:new s.bQ(S,o.u_texture),u_gamma_scale:new s.bg(S,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_is_halo:new s.bQ(S,o.u_is_halo),u_translation:new s.bV(S,o.u_translation),u_pitched_scale:new s.bg(S,o.u_pitched_scale)}),symbolTextAndIcon:(S,o)=>({u_is_size_zoom_constant:new s.bQ(S,o.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(S,o.u_is_size_feature_constant),u_size_t:new s.bg(S,o.u_size_t),u_size:new s.bg(S,o.u_size),u_camera_to_center_distance:new s.bg(S,o.u_camera_to_center_distance),u_pitch:new s.bg(S,o.u_pitch),u_rotate_symbol:new s.bQ(S,o.u_rotate_symbol),u_aspect_ratio:new s.bg(S,o.u_aspect_ratio),u_fade_change:new s.bg(S,o.u_fade_change),u_label_plane_matrix:new s.bS(S,o.u_label_plane_matrix),u_coord_matrix:new s.bS(S,o.u_coord_matrix),u_is_text:new s.bQ(S,o.u_is_text),u_pitch_with_map:new s.bQ(S,o.u_pitch_with_map),u_is_along_line:new s.bQ(S,o.u_is_along_line),u_is_variable_anchor:new s.bQ(S,o.u_is_variable_anchor),u_texsize:new s.bV(S,o.u_texsize),u_texsize_icon:new s.bV(S,o.u_texsize_icon),u_texture:new s.bQ(S,o.u_texture),u_texture_icon:new s.bQ(S,o.u_texture_icon),u_gamma_scale:new s.bg(S,o.u_gamma_scale),u_device_pixel_ratio:new s.bg(S,o.u_device_pixel_ratio),u_is_halo:new s.bQ(S,o.u_is_halo),u_translation:new s.bV(S,o.u_translation),u_pitched_scale:new s.bg(S,o.u_pitched_scale)}),background:(S,o)=>({u_opacity:new s.bg(S,o.u_opacity),u_color:new s.bR(S,o.u_color)}),backgroundPattern:(S,o)=>({u_opacity:new s.bg(S,o.u_opacity),u_image:new s.bQ(S,o.u_image),u_pattern_tl_a:new s.bV(S,o.u_pattern_tl_a),u_pattern_br_a:new s.bV(S,o.u_pattern_br_a),u_pattern_tl_b:new s.bV(S,o.u_pattern_tl_b),u_pattern_br_b:new s.bV(S,o.u_pattern_br_b),u_texsize:new s.bV(S,o.u_texsize),u_mix:new s.bg(S,o.u_mix),u_pattern_size_a:new s.bV(S,o.u_pattern_size_a),u_pattern_size_b:new s.bV(S,o.u_pattern_size_b),u_scale_a:new s.bg(S,o.u_scale_a),u_scale_b:new s.bg(S,o.u_scale_b),u_pixel_coord_upper:new s.bV(S,o.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(S,o.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bg(S,o.u_tile_units_to_pixels)}),terrain:(S,o)=>({u_texture:new s.bQ(S,o.u_texture),u_ele_delta:new s.bg(S,o.u_ele_delta),u_fog_matrix:new s.bS(S,o.u_fog_matrix),u_fog_color:new s.bR(S,o.u_fog_color),u_fog_ground_blend:new s.bg(S,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bg(S,o.u_fog_ground_blend_opacity),u_horizon_color:new s.bR(S,o.u_horizon_color),u_horizon_fog_blend:new s.bg(S,o.u_horizon_fog_blend),u_is_globe_mode:new s.bg(S,o.u_is_globe_mode)}),terrainDepth:(S,o)=>({u_ele_delta:new s.bg(S,o.u_ele_delta)}),terrainCoords:(S,o)=>({u_texture:new s.bQ(S,o.u_texture),u_terrain_coords_id:new s.bg(S,o.u_terrain_coords_id),u_ele_delta:new s.bg(S,o.u_ele_delta)}),projectionErrorMeasurement:(S,o)=>({u_input:new s.bg(S,o.u_input),u_output_expected:new s.bg(S,o.u_output_expected)}),atmosphere:(S,o)=>({u_sun_pos:new s.bU(S,o.u_sun_pos),u_atmosphere_blend:new s.bg(S,o.u_atmosphere_blend),u_globe_position:new s.bU(S,o.u_globe_position),u_globe_radius:new s.bg(S,o.u_globe_radius),u_inv_proj_matrix:new s.bS(S,o.u_inv_proj_matrix)}),sky:(S,o)=>({u_sky_color:new s.bR(S,o.u_sky_color),u_horizon_color:new s.bR(S,o.u_horizon_color),u_horizon:new s.bV(S,o.u_horizon),u_horizon_normal:new s.bV(S,o.u_horizon_normal),u_sky_horizon_blend:new s.bg(S,o.u_sky_horizon_blend),u_sky_blend:new s.bg(S,o.u_sky_blend)})};class Io{constructor(o,f,y){this.context=o;const w=o.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const f=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Bl{constructor(o,f,y,w){this.length=f.length,this.attributes=y,this.itemSize=f.bytesPerElement,this.dynamicDraw=w,this.context=o;const T=o.gl;this.buffer=T.createBuffer(),o.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete f.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,f){for(let y=0;y<this.attributes.length;y++){const w=f.attributes[this.attributes[y].name];w!==void 0&&o.enableVertexAttribArray(w)}}setVertexAttribPointers(o,f,y){for(let w=0;w<this.attributes.length;w++){const T=this.attributes[w],I=f.attributes[T.name];I!==void 0&&o.vertexAttribPointer(I,T.components,o[Mu[T.type]],!1,this.itemSize,T.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class en{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lo extends en{getDefault(){return s.bf.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class ec extends en{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class Ba extends en{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class tc extends en{getDefault(){return[!0,!0,!0,!0]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class rl extends en{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Wa extends en{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class pn extends en{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const f=this.current;(o.func!==f.func||o.ref!==f.ref||o.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Hn extends en{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Cs extends en{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=o,this.dirty=!1}}class os extends en{getDefault(){return[0,1]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class rc extends en{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=o,this.dirty=!1}}class cu extends en{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Bc extends en{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.BLEND):f.disable(f.BLEND),this.current=o,this.dirty=!1}}class Ah extends en{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class ZA extends en{getDefault(){return s.bf.transparent}set(o){const f=this.current;(o.r!==f.r||o.g!==f.g||o.b!==f.b||o.a!==f.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Pu extends en{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class dh extends en{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;o?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=o,this.dirty=!1}}class Ru extends en{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class uo extends en{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class il extends en{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class fh extends en{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class ho extends en{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const f=this.current;(o[0]!==f[0]||o[1]!==f[1]||o[2]!==f[2]||o[3]!==f[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class fa extends en{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Sc extends en{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ph extends en{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class uu extends en{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Du extends en{getDefault(){return null}set(o){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class fA extends en{getDefault(){return null}set(o){var f;if(o===this.current&&!this.dirty)return;const y=this.gl;_s(y)?y.bindVertexArray(o):(f=y.getExtension("OES_vertex_array_object"))===null||f===void 0||f.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class Sl extends en{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class hu extends en{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class ju extends en{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class Rs extends en{constructor(o,f){super(o),this.context=o,this.parent=f}getDefault(){return null}}class Ii extends Rs{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class pa extends Rs{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Ih extends Rs{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,o),this.current=o,this.dirty=!1}}const El="Framebuffer is not complete";class Au{constructor(o,f,y,w,T){this.context=o,this.width=f,this.height=y;const I=o.gl,O=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new Ii(o,O),w)this.depthAttachment=T?new Ih(o,O):new pa(o,O);else if(T)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error(El)}destroy(){const o=this.context.gl,f=this.colorAttachment.get();if(f&&o.deleteTexture(f),this.depthAttachment){const y=this.depthAttachment.get();y&&o.deleteRenderbuffer(y)}o.deleteFramebuffer(this.framebuffer)}}class mh{constructor(o){var f,y;if(this.gl=o,this.clearColor=new Lo(this),this.clearDepth=new ec(this),this.clearStencil=new Ba(this),this.colorMask=new tc(this),this.depthMask=new rl(this),this.stencilMask=new Wa(this),this.stencilFunc=new pn(this),this.stencilOp=new Hn(this),this.stencilTest=new Cs(this),this.depthRange=new os(this),this.depthTest=new rc(this),this.depthFunc=new cu(this),this.blend=new Bc(this),this.blendFunc=new Ah(this),this.blendColor=new ZA(this),this.blendEquation=new Pu(this),this.cullFace=new dh(this),this.cullFaceSide=new Ru(this),this.frontFace=new uo(this),this.program=new il(this),this.activeTexture=new fh(this),this.viewport=new ho(this),this.bindFramebuffer=new fa(this),this.bindRenderbuffer=new Sc(this),this.bindTexture=new ph(this),this.bindVertexBuffer=new uu(this),this.bindElementBuffer=new Du(this),this.bindVertexArray=new fA(this),this.pixelStoreUnpack=new Sl(this),this.pixelStoreUnpackPremultiplyAlpha=new hu(this),this.pixelStoreUnpackFlipY=new ju(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),_s(o)){this.HALF_FLOAT=o.HALF_FLOAT;const w=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(f=o.RGBA16F)!==null&&f!==void 0?f:w?.RGBA16F_EXT,this.RGB16F=(y=o.RGB16F)!==null&&y!==void 0?y:w?.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const w=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=w?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,f){return new Io(this,o,f)}createVertexBuffer(o,f,y){return new Bl(this,o,f,y)}createRenderbuffer(o,f,y){const w=this.gl,T=w.createRenderbuffer();return this.bindRenderbuffer.set(T),w.renderbufferStorage(w.RENDERBUFFER,o,f,y),this.bindRenderbuffer.set(null),T}createFramebuffer(o,f,y,w){return new Au(this,o,f,y,w)}clear({color:o,depth:f,stencil:y}){const w=this.gl;let T=0;o&&(T|=w.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(T|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),y!==void 0&&(T|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),w.clear(T)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){s.bH(o.blendFunction,_n.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return _s(this.gl)?this.gl.createVertexArray():(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var f;return _s(this.gl)?this.gl.deleteVertexArray(o):(f=this.gl.getExtension("OES_vertex_array_object"))===null||f===void 0?void 0:f.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}let Tl;function Lh(S,o,f,y,w){const T=S.context,I=S.transform,O=T.gl,V=S.useProgram("collisionBox"),se=[];let oe=0,ge=0;for(let at=0;at<y.length;at++){const ft=y[at],mt=o.getTile(ft).getBucket(f);if(!mt)continue;const pt=w?mt.textCollisionBox:mt.iconCollisionBox,bt=mt.collisionCircleArray;bt.length>0&&(se.push({circleArray:bt,circleOffset:ge,coord:ft}),oe+=bt.length/4,ge=oe),pt&&V.draw(T,O.LINES,di.disabled,bi.disabled,S.colorModeForRenderPass(),Wi.disabled,hA(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(ft),I.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,null,S.transform.zoom,null,null,pt.collisionVertexBuffer)}if(!w||!se.length)return;const de=S.useProgram("collisionCircle"),Ee=new s.c0;Ee.resize(4*oe),Ee._trim();let je=0;for(const at of se)for(let ft=0;ft<at.circleArray.length/4;ft++){const mt=4*ft,pt=at.circleArray[mt+0],bt=at.circleArray[mt+1],St=at.circleArray[mt+2],gt=at.circleArray[mt+3];Ee.emplace(je++,pt,bt,St,gt,0),Ee.emplace(je++,pt,bt,St,gt,1),Ee.emplace(je++,pt,bt,St,gt,2),Ee.emplace(je++,pt,bt,St,gt,3)}(!Tl||Tl.length<2*oe)&&(Tl=function(at){const ft=2*at,mt=new s.c2;mt.resize(ft),mt._trim();for(let pt=0;pt<ft;pt++){const bt=6*pt;mt.uint16[bt+0]=4*pt+0,mt.uint16[bt+1]=4*pt+1,mt.uint16[bt+2]=4*pt+2,mt.uint16[bt+3]=4*pt+2,mt.uint16[bt+4]=4*pt+3,mt.uint16[bt+5]=4*pt+0}return mt}(oe));const Je=T.createIndexBuffer(Tl,!0),tt=T.createVertexBuffer(Ee,s.c1.members,!0);for(const at of se){const ft=bc(S.transform);de.draw(T,O.TRIANGLES,di.disabled,bi.disabled,S.colorModeForRenderPass(),Wi.disabled,ft,S.style.map.terrain&&S.style.map.terrain.getTerrainData(at.coord),null,f.id,tt,Je,s.aM.simpleSegment(0,2*at.circleOffset,at.circleArray.length,at.circleArray.length/2),null,S.transform.zoom,null,null,null)}tt.destroy(),Je.destroy()}const pA=s.ag(new Float32Array(16));function Ec(S,o,f,y,w,T){const{horizontalAlign:I,verticalAlign:O}=s.aH(S);return new s.P((-(I-.5)*o/w+y[0])*T,(-(O-.5)*f/w+y[1])*T)}function kl(S,o,f,y,w,T){const I=o.tileAnchorPoint.add(new s.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let O=y.mult(T);f||(O=O.rotate(-w));const V=I.add(O);return dr(V.x,V.y,o.pitchedLabelPlaneMatrix,o.getElevation).point}if(f){const O=jt(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(S),V=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return S.add(y.rotate(V))}return S.add(y)}function du(S,o,f,y,w,T,I,O,V,se,oe,ge){const de=S.text.placedSymbolArray,Ee=S.text.dynamicLayoutVertexArray,je=S.icon.dynamicLayoutVertexArray,Je={};Ee.clear();for(let tt=0;tt<de.length;tt++){const at=de.get(tt),ft=at.hidden||!at.crossTileID||S.allowVerticalPlacement&&!at.placedOrientation?null:y[at.crossTileID];if(ft){const mt=new s.P(at.anchorX,at.anchorY),pt={getElevation:ge,width:w.width,height:w.height,pitchedLabelPlaneMatrix:T,pitchWithMap:f,transform:w,tileAnchorPoint:mt,translation:se,unwrappedTileID:oe},bt=f?Mt(mt.x,mt.y,pt):jt(mt.x,mt.y,pt),St=De(w.cameraToCenterDistance,bt.signedDistanceFromCamera);let gt=s.ap(S.textSizeData,O,at)*St/s.aB;f&&(gt*=S.tilePixelRatio/I);const{width:kt,height:tr,anchor:Vt,textOffset:Wt,textBoxScale:Xt}=ft,Sr=Ec(Vt,kt,tr,Wt,Xt,gt),Er=w.getPitchedTextCorrection(mt.x+se[0],mt.y+se[1],oe),gr=kl(bt.point,pt,o,Sr,-w.bearingInRadians,Er),Xr=S.allowVerticalPlacement&&at.placedOrientation===s.ao.vertical?Math.PI/2:0;for(let Bi=0;Bi<at.numGlyphs;Bi++)s.av(Ee,gr,Xr);V&&at.associatedIconIndex>=0&&(Je[at.associatedIconIndex]={shiftedAnchor:gr,angle:Xr})}else Gr(at.numGlyphs,Ee)}if(V){je.clear();const tt=S.icon.placedSymbolArray;for(let at=0;at<tt.length;at++){const ft=tt.get(at);if(ft.hidden)Gr(ft.numGlyphs,je);else{const mt=Je[at];if(mt)for(let pt=0;pt<ft.numGlyphs;pt++)s.av(je,mt.shiftedAnchor,mt.angle);else Gr(ft.numGlyphs,je)}}S.icon.dynamicLayoutVertexBuffer.updateData(je)}S.text.dynamicLayoutVertexBuffer.updateData(Ee)}function gh(S,o,f){return f.iconsInText&&o?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function Ao(S,o,f,y,w,T,I,O,V,se,oe,ge,de){const Ee=S.context,je=Ee.gl,Je=S.transform,tt=O==="map",at=V==="map",ft=O!=="viewport"&&f.layout.get("symbol-placement")!=="point",mt=tt&&!at&&!ft,pt=!f.layout.get("symbol-sort-key").isConstant();let bt=!1;const St=S.getDepthModeForSublayer(0,di.ReadOnly),gt=f._unevaluatedLayout.hasValue("text-variable-anchor")||f._unevaluatedLayout.hasValue("text-variable-anchor-offset"),kt=[],tr=Je.getCircleRadiusCorrection();for(const Vt of y){const Wt=o.getTile(Vt),Xt=Wt.getBucket(f);if(!Xt)continue;const Sr=w?Xt.text:Xt.icon;if(!Sr||!Sr.segments.get().length||!Sr.hasVisibleVertices)continue;const Er=Sr.programConfigurations.get(f.id),gr=w||Xt.sdfIcons,Xr=w?Xt.textSizeData:Xt.iconSizeData,Bi=at||Je.pitch!==0,En=S.useProgram(gh(gr,w,Xt),Er),Nn=s.an(Xr,Je.zoom),Mn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Vt);let ss,as,rn,us,Sa=[0,0],ia=null;if(w)as=Wt.glyphAtlasTexture,rn=je.LINEAR,ss=Wt.glyphAtlasTexture.size,Xt.iconsInText&&(Sa=Wt.imageAtlasTexture.size,ia=Wt.imageAtlasTexture,us=Bi||S.options.rotating||S.options.zooming||Xr.kind==="composite"||Xr.kind==="camera"?je.LINEAR:je.NEAREST);else{const Xs=f.layout.get("icon-size").constantOr(0)!==1||Xt.iconsNeedLinear;as=Wt.imageAtlasTexture,rn=gr||S.options.rotating||S.options.zooming||Xs||Bi?je.LINEAR:je.NEAREST,ss=Wt.imageAtlasTexture.size}const na=s.aC(Wt,1,S.transform.zoom),Za=mi(tt,S.transform,na),yh=s.L();s.aq(yh,Za);const Ic=ln(at,tt,S.transform,na),Dh=s.aD(Je,Wt,T,I),Lc=Je.getProjectionData({overscaledTileID:Vt,applyGlobeMatrix:!de,applyTerrainMatrix:!0}),jh=gt&&Xt.hasTextData(),_h=f.layout.get("icon-text-fit")!=="none"&&jh&&Xt.hasIconData();if(ft){const Xs=S.style.map.terrain?(sa,Ts)=>S.style.map.terrain.getElevation(Vt,sa,Ts):null,$n=f.layout.get("text-rotation-alignment")==="map";Ye(Xt,S,w,Za,yh,at,se,$n,Vt.toUnwrapped(),Je.width,Je.height,Dh,Xs)}const lc=w&&gt||_h,Do=ft||lc?pA:at?Za:S.transform.clipSpaceToPixelsMatrix,pu=gr&&f.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let mu;mu=gr?Xt.iconsInText?dA(Xr.kind,Nn,mt,at,ft,lc,S,Do,Ic,Dh,ss,Sa,tr):bs(Xr.kind,Nn,mt,at,ft,lc,S,Do,Ic,Dh,w,ss,0,tr):hh(Xr.kind,Nn,mt,at,ft,lc,S,Do,Ic,Dh,w,ss,tr);const Ya={program:En,buffers:Sr,uniformValues:mu,projectionData:Lc,atlasTexture:as,atlasTextureIcon:ia,atlasInterpolation:rn,atlasInterpolationIcon:us,isSDF:gr,hasHalo:pu};if(pt&&Xt.canOverlap){bt=!0;const Xs=Sr.segments.get();for(const $n of Xs)kt.push({segments:new s.aM([$n]),sortKey:$n.sortKey,state:Ya,terrainData:Mn})}else kt.push({segments:Sr.segments,sortKey:0,state:Ya,terrainData:Mn})}bt&&kt.sort((Vt,Wt)=>Vt.sortKey-Wt.sortKey);for(const Vt of kt){const Wt=Vt.state;if(Ee.activeTexture.set(je.TEXTURE0),Wt.atlasTexture.bind(Wt.atlasInterpolation,je.CLAMP_TO_EDGE),Wt.atlasTextureIcon&&(Ee.activeTexture.set(je.TEXTURE1),Wt.atlasTextureIcon&&Wt.atlasTextureIcon.bind(Wt.atlasInterpolationIcon,je.CLAMP_TO_EDGE)),Wt.isSDF){const Xt=Wt.uniformValues;Wt.hasHalo&&(Xt.u_is_halo=1,fo(Wt.buffers,Vt.segments,f,S,Wt.program,St,oe,ge,Xt,Wt.projectionData,Vt.terrainData)),Xt.u_is_halo=0}fo(Wt.buffers,Vt.segments,f,S,Wt.program,St,oe,ge,Wt.uniformValues,Wt.projectionData,Vt.terrainData)}}function fo(S,o,f,y,w,T,I,O,V,se,oe){const ge=y.context;w.draw(ge,ge.gl.TRIANGLES,T,I,O,Wi.backCCW,V,oe,se,f.id,S.layoutVertexBuffer,S.indexBuffer,o,f.paint,y.transform.zoom,S.programConfigurations.get(f.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function Tc(S,o,f,y,w){const T=S.context,I=T.gl,O=bi.disabled,V=new _n([I.ONE,I.ONE],s.bf.transparent,[!0,!0,!0,!0]),se=o.getBucket(f);if(!se)return;const oe=y.key;let ge=f.heatmapFbos.get(oe);ge||(ge=nl(T,o.tileSize,o.tileSize),f.heatmapFbos.set(oe,ge)),T.bindFramebuffer.set(ge.framebuffer),T.viewport.set([0,0,o.tileSize,o.tileSize]),T.clear({color:s.bf.transparent});const de=se.programConfigurations.get(f.id),Ee=S.useProgram("heatmap",de,!w),je=S.transform.getProjectionData({overscaledTileID:o.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=S.style.map.terrain.getTerrainData(y);Ee.draw(T,I.TRIANGLES,di.disabled,O,V,Wi.disabled,Cl(o,S.transform.zoom,f.paint.get("heatmap-intensity"),1),Je,je,f.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,f.paint,S.transform.zoom,de)}function Fl(S,o,f,y,w){const T=S.context,I=T.gl,O=S.transform;T.setColorMode(S.colorModeForRenderPass());const V=sl(T,o),se=f.key,oe=o.heatmapFbos.get(se);if(!oe)return;T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,oe.colorAttachment.get()),T.activeTexture.set(I.TEXTURE1),V.bind(I.LINEAR,I.CLAMP_TO_EDGE);const ge=O.getProjectionData({overscaledTileID:f,applyTerrainMatrix:w,applyGlobeMatrix:!y});S.useProgram("heatmapTexture").draw(T,I.TRIANGLES,di.disabled,bi.disabled,S.colorModeForRenderPass(),Wi.disabled,Nu(S,o,0,1),null,ge,o.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,o.paint,O.zoom),oe.destroy(),o.heatmapFbos.delete(se)}function nl(S,o,f){var y,w;const T=S.gl,I=T.createTexture();T.bindTexture(T.TEXTURE_2D,I),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(y=S.HALF_FLOAT)!==null&&y!==void 0?y:T.UNSIGNED_BYTE,V=(w=S.RGBA16F)!==null&&w!==void 0?w:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,V,o,f,0,T.RGBA,O,null);const se=S.createFramebuffer(o,f,!1,!1);return se.colorAttachment.set(I),se}function sl(S,o){return o.colorRampTexture||(o.colorRampTexture=new s.T(S,o.colorRamp,S.gl.RGBA)),o.colorRampTexture}function mA(S,o,f,y,w,T,I,O){let V=256;if(w.stepInterpolant){const se=o.getSource().maxzoom,oe=I.canonical.z===se?Math.ceil(1<<S.transform.maxZoom-I.canonical.z):1;V=s.ah(s.c4(T.maxLineLength/s.$*1024*oe),256,f.maxTextureSize)}return O.gradient=s.c5({expression:w.gradientExpression(),evaluationKey:"lineProgress",resolution:V,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new s.T(f,O.gradient,y.RGBA),O.version=w.gradientVersion,O.texture}function gA(S,o,f,y,w){S.activeTexture.set(o.TEXTURE0),f.imageAtlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),y.updatePaintBuffers(w)}function fu(S,o,f,y,w,T){(w||S.lineAtlas.dirty)&&(o.activeTexture.set(f.TEXTURE0),S.lineAtlas.bind(o)),y.updatePaintBuffers(T)}function ma(S,o,f,y,w,T,I){const O=T.gradients[w.id];let V=O.texture;w.gradientVersion!==O.version&&(V=mA(S,o,f,y,w,T,I,O)),f.activeTexture.set(y.TEXTURE0),V.bind(w.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function Bs(S,o,f,y,w,T,I,O,V){const se=T.gradients[w.id];let oe=se.texture;w.gradientVersion!==se.version&&(oe=mA(S,o,f,y,w,T,I,se)),f.activeTexture.set(y.TEXTURE0),oe.bind(w.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),f.activeTexture.set(y.TEXTURE1),S.lineAtlas.bind(f),O.updatePaintBuffers(V)}function mn(S,o,f,y,w){if(!f||!y||!y.imageAtlas)return;const T=y.imageAtlas.patternPositions;let I=T[f.to.toString()],O=T[f.from.toString()];if(!I&&O&&(I=O),!O&&I&&(O=I),!I||!O){const V=w.getPaintProperty(o);I=T[V],O=T[V]}I&&O&&S.setConstantPatternPositions(I,O)}function ic(S,o,f,y,w,T,I,O){const V=S.context.gl,se="fill-pattern",oe=f.paint.get(se),ge=oe&&oe.constantOr(1),de=f.getCrossfadeParameters();let Ee,je,Je,tt,at;const ft=S.transform,mt=f.paint.get("fill-translate"),pt=f.paint.get("fill-translate-anchor");I?(je=ge&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ee=V.LINES):(je=ge?"fillPattern":"fill",Ee=V.TRIANGLES);const bt=oe.constantOr(null);for(const St of y){const gt=o.getTile(St);if(ge&&!gt.patternsLoaded())continue;const kt=gt.getBucket(f);if(!kt)continue;const tr=kt.programConfigurations.get(f.id),Vt=S.useProgram(je,tr),Wt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(St);ge&&(S.context.activeTexture.set(V.TEXTURE0),gt.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),tr.updatePaintBuffers(de)),mn(tr,se,bt,gt,f);const Xt=ft.getProjectionData({overscaledTileID:St,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Sr=s.aD(ft,gt,mt,pt);if(I){tt=kt.indexBuffer2,at=kt.segments2;const gr=[V.drawingBufferWidth,V.drawingBufferHeight];Je=je==="fillOutlinePattern"&&ge?Fu(S,de,gt,gr,Sr):Ps(gr,Sr)}else tt=kt.indexBuffer,at=kt.segments,Je=ge?No(S,de,gt,Sr):{u_fill_translate:Sr};const Er=S.stencilModeForClipping(St);Vt.draw(S.context,Ee,w,Er,T,Wi.backCCW,Je,Wt,Xt,f.id,kt.layoutVertexBuffer,tt,at,f.paint,S.transform.zoom,tr)}}function al(S,o,f,y,w,T,I,O){const V=S.context,se=V.gl,oe="fill-extrusion-pattern",ge=f.paint.get(oe),de=ge.constantOr(1),Ee=f.getCrossfadeParameters(),je=f.paint.get("fill-extrusion-opacity"),Je=ge.constantOr(null),tt=S.transform;for(const at of y){const ft=o.getTile(at),mt=ft.getBucket(f);if(!mt)continue;const pt=S.style.map.terrain&&S.style.map.terrain.getTerrainData(at),bt=mt.programConfigurations.get(f.id),St=S.useProgram(de?"fillExtrusionPattern":"fillExtrusion",bt);de&&(S.context.activeTexture.set(se.TEXTURE0),ft.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),bt.updatePaintBuffers(Ee));const gt=tt.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!O,applyTerrainMatrix:!0});mn(bt,oe,Je,ft,f);const kt=s.aD(tt,ft,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),tr=f.paint.get("fill-extrusion-vertical-gradient"),Vt=de?_c(S,tr,je,kt,at,Ee,ft):su(S,tr,je,kt);St.draw(V,V.gl.TRIANGLES,w,T,I,Wi.backCCW,Vt,pt,gt,f.id,mt.layoutVertexBuffer,mt.indexBuffer,mt.segments,f.paint,S.transform.zoom,bt,S.style.map.terrain&&mt.centroidVertexBuffer)}}function Mh(S,o,f,y,w,T,I,O,V){var se;const oe=S.style.projection,ge=S.context,de=S.transform,Ee=ge.gl,je=[`#define NUM_ILLUMINATION_SOURCES ${f.paint.get("hillshade-highlight-color").values.length}`],Je=S.useProgram("hillshade",null,!1,je),tt=!S.options.moving;for(const at of y){const ft=o.getTile(at),mt=ft.fbo;if(!mt)continue;const pt=oe.getMeshFromTileID(ge,at.canonical,O,!0,"raster"),bt=(se=S.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(at);ge.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,mt.colorAttachment.get());const St=de.getProjectionData({overscaledTileID:at,aligned:tt,applyGlobeMatrix:!V,applyTerrainMatrix:!0});Je.draw(ge,Ee.TRIANGLES,T,w[at.overscaledZ],I,Wi.backCCW,au(S,ft,f),bt,St,f.id,pt.vertexBuffer,pt.indexBuffer,pt.segments)}}function Nl(S,o,f,y,w,T,I,O,V){var se;const oe=S.style.projection,ge=S.context,de=S.transform,Ee=ge.gl,je=S.useProgram("colorRelief"),Je=!S.options.moving;let tt=!0,at=0;for(const ft of y){const mt=o.getTile(ft),pt=mt.dem;if(tt){const Vt=Ee.getParameter(Ee.MAX_TEXTURE_SIZE),{elevationTexture:Wt,colorTexture:Xt}=f.getColorRampTextures(ge,Vt,pt.getUnpackVector());ge.activeTexture.set(Ee.TEXTURE1),Wt.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE),ge.activeTexture.set(Ee.TEXTURE4),Xt.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),tt=!1,at=Wt.size[0]}if(!pt||!pt.data)continue;const bt=pt.stride,St=pt.getPixels();if(ge.activeTexture.set(Ee.TEXTURE0),ge.pixelStoreUnpackPremultiplyAlpha.set(!1),mt.demTexture=mt.demTexture||S.getTileTexture(bt),mt.demTexture){const Vt=mt.demTexture;Vt.update(St,{premultiply:!1}),Vt.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}else mt.demTexture=new s.T(ge,St,Ee.RGBA,{premultiply:!1}),mt.demTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE);const gt=oe.getMeshFromTileID(ge,ft.canonical,O,!0,"raster"),kt=(se=S.style.map.terrain)===null||se===void 0?void 0:se.getTerrainData(ft),tr=de.getProjectionData({overscaledTileID:ft,aligned:Je,applyGlobeMatrix:!V,applyTerrainMatrix:!0});je.draw(ge,Ee.TRIANGLES,T,w[ft.overscaledZ],I,Wi.backCCW,ou(f,mt.dem,at),kt,tr,f.id,gt.vertexBuffer,gt.indexBuffer,gt.segments)}}const Ph=[new s.P(0,0),new s.P(s.$,0),new s.P(s.$,s.$),new s.P(0,s.$)];function Il(S,o,f,y,w,T,I,O,V=!1,se=!1){const oe=y[y.length-1].overscaledZ,ge=S.context,de=ge.gl,Ee=S.useProgram("raster"),je=S.transform,Je=S.style.projection,tt=S.colorModeForRenderPass(),at=!S.options.moving,ft=f.paint.get("raster-opacity"),mt=f.paint.get("raster-resampling"),pt=f.paint.get("raster-fade-duration"),bt=!!S.style.map.terrain;for(const St of y){const gt=S.getDepthModeForSublayer(St.overscaledZ-oe,ft===1?di.ReadWrite:di.ReadOnly,de.LESS),kt=o.getTile(St),tr=mt==="nearest"?de.NEAREST:de.LINEAR;ge.activeTexture.set(de.TEXTURE0),kt.texture.bind(tr,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(de.TEXTURE1);const{parentTile:Vt,parentScaleBy:Wt,parentTopLeft:Xt,fadeValues:Sr}=$a(kt,o,pt,bt);kt.fadeOpacity=Sr.tileOpacity,Vt?(Vt.fadeOpacity=Sr.parentTileOpacity,Vt.texture.bind(tr,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST)):kt.texture.bind(tr,de.CLAMP_TO_EDGE,de.LINEAR_MIPMAP_NEAREST),kt.texture.useMipmap&&ge.extTextureFilterAnisotropic&&S.transform.pitch>20&&de.texParameterf(de.TEXTURE_2D,ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ge.extTextureFilterAnisotropicMax);const Er=S.style.map.terrain&&S.style.map.terrain.getTerrainData(St),gr=je.getProjectionData({overscaledTileID:St,aligned:at,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),Xr=Jl(Xt,Wt,Sr.fadeMix,f,O),Bi=Je.getMeshFromTileID(ge,St.canonical,T,I,"raster");Ee.draw(ge,de.TRIANGLES,gt,w?w[St.overscaledZ]:bi.disabled,tt,V?Wi.frontCCW:Wi.backCCW,Xr,Er,gr,f.id,Bi.vertexBuffer,Bi.indexBuffer,Bi.segments)}}function $a(S,o,f,y){const w={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(f===0||y)return w;if(S.fadingParentID){const T=o._getLoadedTile(S.fadingParentID);if(!T)return w;const I=Math.pow(2,T.tileID.overscaledZ-S.tileID.overscaledZ),O=[S.tileID.canonical.x*I%1,S.tileID.canonical.y*I%1],V=function(se,oe,ge){const de=F.now(),Ee=(de-oe.timeAdded)/ge,je=se.fadingDirection===it.Incoming,Je=s.ah((de-se.timeAdded)/ge,0,1),tt=s.ah(1-Ee,0,1),at=je?Je:tt;return{tileOpacity:at,parentTileOpacity:je?tt:Je,fadeMix:{opacity:1,mix:1-at}}}(S,T,f);return{parentTile:T,parentScaleBy:I,parentTopLeft:O,fadeValues:V}}if(S.selfFading){const T=function(I,O){const V=F.now(),se=s.ah((V-I.timeAdded)/O,0,1);return{tileOpacity:se,fadeMix:{opacity:se,mix:0}}}(S,f);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return w}const bn=new s.bf(1,0,0,1),Uu=new s.bf(0,1,0,1),ja=new s.bf(0,0,1,1),Ll=new s.bf(1,0,1,1),qs=new s.bf(0,1,1,1);function nc(S,o,f,y){po(S,0,o+f/2,S.transform.width,f,y)}function Mo(S,o,f,y){po(S,o-f/2,0,f,S.transform.height,y)}function po(S,o,f,y,w,T){const I=S.context,O=I.gl;O.enable(O.SCISSOR_TEST),O.scissor(o*S.pixelRatio,f*S.pixelRatio,y*S.pixelRatio,w*S.pixelRatio),I.clear({color:T}),O.disable(O.SCISSOR_TEST)}function Ou(S,o,f){const y=S.context,w=y.gl,T=S.useProgram("debug"),I=di.disabled,O=bi.disabled,V=S.colorModeForRenderPass(),se="$debug",oe=S.style.map.terrain&&S.style.map.terrain.getTerrainData(f);y.activeTexture.set(w.TEXTURE0);const ge=o.getTileByID(f.key).latestRawTileData,de=Math.floor((ge&&ge.byteLength||0)/1024),Ee=o.getTile(f).tileSize,je=512/Math.min(Ee,512)*(f.overscaledZ/S.transform.zoom)*.5;let Je=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(Je+=` => ${f.overscaledZ}`),function(at,ft){at.initDebugOverlayCanvas();const mt=at.debugOverlayCanvas,pt=at.context.gl,bt=at.debugOverlayCanvas.getContext("2d");bt.clearRect(0,0,mt.width,mt.height),bt.shadowColor="white",bt.shadowBlur=2,bt.lineWidth=1.5,bt.strokeStyle="white",bt.textBaseline="top",bt.font="bold 36px Open Sans, sans-serif",bt.fillText(ft,5,5),bt.strokeText(ft,5,5),at.debugOverlayTexture.update(mt),at.debugOverlayTexture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE)}(S,`${Je} ${de}kB`);const tt=S.transform.getProjectionData({overscaledTileID:f,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(y,w.TRIANGLES,I,O,_n.alphaBlended,Wi.disabled,Ga(s.bf.transparent,je),null,tt,se,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),T.draw(y,w.LINE_STRIP,I,O,V,Wi.disabled,Ga(s.bf.red),oe,tt,se,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function vh(S,o,f,y){const{isRenderingGlobe:w}=y,T=S.context,I=T.gl,O=S.transform,V=S.colorModeForRenderPass(),se=S.getDepthModeFor3D(),oe=S.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,S.width,S.height]);for(const ge of f){const de=o.getTerrainMesh(ge.tileID),Ee=S.renderToTexture.getTexture(ge),je=o.getTerrainData(ge.tileID);T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,Ee.texture);const Je=o.getMeshFrameDelta(O.zoom),tt=O.calculateFogMatrix(ge.tileID.toUnwrapped()),at=tl(Je,tt,S.style.sky,O.pitch,w),ft=O.getProjectionData({overscaledTileID:ge.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});oe.draw(T,I.TRIANGLES,se,bi.disabled,V,Wi.backCCW,at,je,ft,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}}function zu(S,o){if(!o.mesh){const f=new s.aL;f.emplaceBack(-1,-1),f.emplaceBack(1,-1),f.emplaceBack(1,1),f.emplaceBack(-1,1);const y=new s.aN;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),o.mesh=new Eu(S.createVertexBuffer(f,Aa.members),S.createIndexBuffer(y),s.aM.simpleSegment(0,0,f.length,y.length))}return o.mesh}class vA{constructor(o,f){this.context=new mh(o),this.transform=f,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Hr.maxUnderzooming+Hr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vc}resize(o,f,y){if(this.width=Math.floor(o*y),this.height=Math.floor(f*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const o=this.context,f=new s.aL;f.emplaceBack(0,0),f.emplaceBack(s.$,0),f.emplaceBack(0,s.$),f.emplaceBack(s.$,s.$),this.tileExtentBuffer=o.createVertexBuffer(f,Aa.members),this.tileExtentSegments=s.aM.simpleSegment(0,0,4,2);const y=new s.aL;y.emplaceBack(0,0),y.emplaceBack(s.$,0),y.emplaceBack(0,s.$),y.emplaceBack(s.$,s.$),this.debugBuffer=o.createVertexBuffer(y,Aa.members),this.debugSegments=s.aM.simpleSegment(0,0,4,5);const w=new s.c7;w.emplaceBack(0,0,0,0),w.emplaceBack(s.$,0,s.$,0),w.emplaceBack(0,s.$,0,s.$),w.emplaceBack(s.$,s.$,s.$,s.$),this.rasterBoundsBuffer=o.createVertexBuffer(w,Da.members),this.rasterBoundsSegments=s.aM.simpleSegment(0,0,4,2);const T=new s.aL;T.emplaceBack(0,0),T.emplaceBack(s.$,0),T.emplaceBack(0,s.$),T.emplaceBack(s.$,s.$),this.rasterBoundsBufferPosOnly=o.createVertexBuffer(T,Aa.members),this.rasterBoundsSegmentsPosOnly=s.aM.simpleSegment(0,0,4,5);const I=new s.aL;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(I,Aa.members),this.viewportSegments=s.aM.simpleSegment(0,0,4,2);const O=new s.c8;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(O);const V=new s.aN;V.emplaceBack(1,0,2),V.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(V);const se=this.context.gl;this.stencilClearMode=new bi({func:se.ALWAYS,mask:0},0,255,se.ZERO,se.ZERO,se.ZERO),this.tileExtentMesh=new Eu(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const o=this.context,f=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=s.L();s.bZ(y,0,this.width,this.height,0,0,1),s.N(y,y,[f.drawingBufferWidth,f.drawingBufferHeight,0]);const w={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(o,f.TRIANGLES,di.disabled,this.stencilClearMode,_n.disabled,Wi.disabled,null,null,w,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,f,y){if(this.currentStencilSource===o.source||!o.isTileClipped()||!f||!f.length)return;this.currentStencilSource=o.source,this.nextStencilID+f.length>256&&this.clearStencil();const w=this.context;w.setColorMode(_n.disabled),w.setDepthMode(di.disabled);const T={};for(const I of f)T[I.key]=this.nextStencilID++;this._renderTileMasks(T,f,y,!0),this._renderTileMasks(T,f,y,!1),this._tileClippingMaskIDs=T}_renderTileMasks(o,f,y,w){const T=this.context,I=T.gl,O=this.style.projection,V=this.transform,se=this.useProgram("clippingMask");for(const oe of f){const ge=o[oe.key],de=this.style.map.terrain&&this.style.map.terrain.getTerrainData(oe),Ee=O.getMeshFromTileID(this.context,oe.canonical,w,!0,"stencil"),je=V.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!y,applyTerrainMatrix:!0});se.draw(T,I.TRIANGLES,di.disabled,new bi({func:I.ALWAYS,mask:0},ge,255,I.KEEP,I.KEEP,I.REPLACE),_n.disabled,y?Wi.disabled:Wi.backCCW,null,de,je,"$clipping",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}}_renderTilesDepthBuffer(){const o=this.context,f=o.gl,y=this.style.projection,w=this.transform,T=this.useProgram("depth"),I=this.getDepthModeFor3D(),O=ei(w,{tileSize:w.tileSize});for(const V of O){const se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),oe=y.getMeshFromTileID(this.context,V.canonical,!0,!0,"raster"),ge=w.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(o,f.TRIANGLES,I,bi.disabled,_n.disabled,Wi.backCCW,null,se,ge,"$clipping",oe.vertexBuffer,oe.indexBuffer,oe.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,f=this.context.gl;return new bi({func:f.NOTEQUAL,mask:255},o,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(o){const f=this.context.gl;return new bi({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,f.KEEP,f.KEEP,f.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(o){const f=this.context.gl,y=o.sort((I,O)=>O.overscaledZ-I.overscaledZ),w=y[y.length-1].overscaledZ,T=y[0].overscaledZ-w+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const I={};for(let O=0;O<T;O++)I[O+w]=new bi({func:f.GEQUAL,mask:255},O+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=T,[I,y]}return[{[w]:bi.disabled},y]}stencilConfigForOverlapTwoPass(o){const f=this.context.gl,y=o.sort((I,O)=>O.overscaledZ-I.overscaledZ),w=y[y.length-1].overscaledZ,T=y[0].overscaledZ-w+1;if(this.clearStencil(),T>1){const I={},O={};for(let V=0;V<T;V++)I[V+w]=new bi({func:f.GREATER,mask:255},T+1+V,255,f.KEEP,f.KEEP,f.REPLACE),O[V+w]=new bi({func:f.GREATER,mask:255},1+V,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID=2*T+1,[I,O,y]}return this.nextStencilID=3,[{[w]:new bi({func:f.GREATER,mask:255},2,255,f.KEEP,f.KEEP,f.REPLACE)},{[w]:new bi({func:f.GREATER,mask:255},1,255,f.KEEP,f.KEEP,f.REPLACE)},y]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new _n([o.CONSTANT_COLOR,o.ONE],new s.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_n.unblended:_n.alphaBlended}getDepthModeForSublayer(o,f,y){if(!this.opaquePassEnabledForLayer())return di.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new di(y||this.context.gl.LEQUAL,f,[w,w])}getDepthModeFor3D(){return new di(this.context.gl.LEQUAL,di.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,f){var y,w;this.style=o,this.options=f,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(F.now()),this.imageManager.beginFrame();const T=this.style._order,I=this.style.sourceCaches,O={},V={},se={},oe={isRenderingToTexture:!1,isRenderingGlobe:((y=o.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const de in I){const Ee=I[de];Ee.used&&Ee.prepare(this.context),O[de]=Ee.getVisibleCoordinates(!1),V[de]=O[de].slice().reverse(),se[de]=Ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let de=0;de<T.length;de++)if(this.style._layers[T[de]].is3D()){this.opaquePassCutoff=de;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const de of T){const Ee=this.style._layers[de];if(!Ee.hasOffscreenPass()||Ee.isHidden(this.transform.zoom))continue;const je=V[Ee.source];(Ee.type==="custom"||je.length)&&this.renderLayer(this,I[Ee.source],Ee,je,oe)}if((w=this.style.projection)===null||w===void 0||w.updateGPUdependent({context:this.context,useProgram:de=>this.useProgram(de)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:f.showOverdrawInspector?s.bf.black:s.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(de,Ee){const je=de.context,Je=je.gl,tt=((St,gt,kt)=>{const tr=Math.cos(gt.rollInRadians),Vt=Math.sin(gt.rollInRadians),Wt=Rt(gt),Xt=gt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:St.properties.get("sky-color"),u_horizon_color:St.properties.get("horizon-color"),u_horizon:[(gt.width/2-Wt*Vt)*kt,(gt.height/2+Wt*tr)*kt],u_horizon_normal:[-Vt,tr],u_sky_horizon_blend:St.properties.get("sky-horizon-blend")*gt.height/2*kt,u_sky_blend:Xt}})(Ee,de.style.map.transform,de.pixelRatio),at=new di(Je.LEQUAL,di.ReadWrite,[0,1]),ft=bi.disabled,mt=de.colorModeForRenderPass(),pt=de.useProgram("sky"),bt=zu(je,Ee);pt.draw(je,Je.TRIANGLES,at,ft,mt,Wi.disabled,tt,null,void 0,"sky",bt.vertexBuffer,bt.indexBuffer,bt.segments)}(this,this.style.sky),this._showOverdrawInspector=f.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const de=this.style._layers[T[this.currentLayer]],Ee=I[de.source],je=O[de.source];this._renderTileClippingMasks(de,je,!1),this.renderLayer(this,Ee,de,je,oe)}this.renderPass="translucent";let ge=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const de=this.style._layers[T[this.currentLayer]],Ee=I[de.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(de,oe))continue;this.opaquePassEnabledForLayer()||ge||(ge=!0,oe.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const je=(de.type==="symbol"?se:V)[de.source];this._renderTileClippingMasks(de,O[de.source],!!this.renderToTexture),this.renderLayer(this,Ee,de,je,oe)}if(oe.isRenderingGlobe&&function(de,Ee,je){const Je=de.context,tt=Je.gl,at=de.useProgram("atmosphere"),ft=new di(tt.LEQUAL,di.ReadOnly,[0,1]),mt=de.transform,pt=function(Xt,Sr){const Er=Xt.properties.get("position"),gr=[-Er.x,-Er.y,-Er.z],Xr=s.ag(new Float64Array(16));return Xt.properties.get("anchor")==="map"&&(s.b6(Xr,Xr,Sr.rollInRadians),s.b7(Xr,Xr,-Sr.pitchInRadians),s.b6(Xr,Xr,Sr.bearingInRadians),s.b7(Xr,Xr,Sr.center.lat*Math.PI/180),s.bz(Xr,Xr,-Sr.center.lng*Math.PI/180)),s.c6(gr,gr,Xr),gr}(je,de.transform),bt=mt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),St=Ee.properties.get("atmosphere-blend")*bt.projectionTransition;if(St===0)return;const gt=yc(mt.worldSize,mt.center.lat),kt=mt.inverseProjectionMatrix,tr=new Float64Array(4);tr[3]=1,s.aw(tr,tr,mt.modelViewProjectionMatrix),tr[0]/=tr[3],tr[1]/=tr[3],tr[2]/=tr[3],tr[3]=1,s.aw(tr,tr,kt),tr[0]/=tr[3],tr[1]/=tr[3],tr[2]/=tr[3],tr[3]=1;const Vt=((Xt,Sr,Er,gr,Xr)=>({u_sun_pos:Xt,u_atmosphere_blend:Sr,u_globe_position:Er,u_globe_radius:gr,u_inv_proj_matrix:Xr}))(pt,St,[tr[0],tr[1],tr[2]],gt,kt),Wt=zu(Je,Ee);at.draw(Je,tt.TRIANGLES,ft,bi.disabled,_n.alphaBlended,Wi.disabled,Vt,null,null,"atmosphere",Wt.vertexBuffer,Wt.indexBuffer,Wt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const de=function(Ee,je){let Je=null;const tt=Object.values(Ee._layers).flatMap(pt=>pt.source&&!pt.isHidden(je)?[Ee.sourceCaches[pt.source]]:[]),at=tt.filter(pt=>pt.getSource().type==="vector"),ft=tt.filter(pt=>pt.getSource().type!=="vector"),mt=pt=>{(!Je||Je.getSource().maxzoom<pt.getSource().maxzoom)&&(Je=pt)};return at.forEach(pt=>mt(pt)),Je||ft.forEach(pt=>mt(pt)),Je}(this.style,this.transform.zoom);de&&function(Ee,je,Je){for(let tt=0;tt<Je.length;tt++)Ou(Ee,je,Je[tt])}(this,de,de.getVisibleCoordinates())}this.options.showPadding&&function(de){const Ee=de.transform.padding;nc(de,de.transform.height-(Ee.top||0),3,bn),nc(de,Ee.bottom||0,3,Uu),Mo(de,Ee.left||0,3,ja),Mo(de,de.transform.width-(Ee.right||0),3,Ll);const je=de.transform.centerPoint;(function(Je,tt,at,ft){po(Je,tt-1,at-10,2,20,ft),po(Je,tt-10,at-1,20,2,ft)})(de,je.x,de.transform.height-je.y,qs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;const f=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let w=this.terrainFacilitator.dirty;w||(w=o?!s.c9(f,y):!s.ca(f,y)),w||(w=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),w&&(s.cb(f,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,I){const O=T.context,V=O.gl,se=T.transform,oe=_n.unblended,ge=new di(V.LEQUAL,di.ReadWrite,[0,1]),de=I.sourceCache.getRenderableTiles(),Ee=T.useProgram("terrainDepth");O.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:s.bf.transparent,depth:1});for(const je of de){const Je=I.getTerrainMesh(je.tileID),tt=I.getTerrainData(je.tileID),at=se.getProjectionData({overscaledTileID:je.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ft={u_ele_delta:I.getMeshFrameDelta(se.zoom)};Ee.draw(O,V.TRIANGLES,ge,bi.disabled,oe,Wi.backCCW,ft,tt,at,"terrain",Je.vertexBuffer,Je.indexBuffer,Je.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,I){const O=T.context,V=O.gl,se=T.transform,oe=_n.unblended,ge=new di(V.LEQUAL,di.ReadWrite,[0,1]),de=I.getCoordsTexture(),Ee=I.sourceCache.getRenderableTiles(),je=T.useProgram("terrainCoords");O.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:s.bf.transparent,depth:1}),I.coordsIndex=[];for(const Je of Ee){const tt=I.getTerrainMesh(Je.tileID),at=I.getTerrainData(Je.tileID);O.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,de.texture);const ft={u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(se.zoom)},mt=se.getProjectionData({overscaledTileID:Je.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});je.draw(O,V.TRIANGLES,ge,bi.disabled,oe,Wi.backCCW,ft,at,mt,"terrain",tt.vertexBuffer,tt.indexBuffer,tt.segments),I.coordsIndex.push(Je.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(o,f,y,w,T){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(w||[]).length)&&(this.id=y.id,s.cc(y)?function(I,O,V,se,oe,ge){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:de}=ge,Ee=bi.disabled,je=I.colorModeForRenderPass();(V._unevaluatedLayout.hasValue("text-variable-anchor")||V._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Je,tt,at,ft,mt,pt,bt,St,gt){const kt=tt.transform,tr=tt.style.map.terrain,Vt=mt==="map",Wt=pt==="map";for(const Xt of Je){const Sr=ft.getTile(Xt),Er=Sr.getBucket(at);if(!Er||!Er.text||!Er.text.segments.get().length)continue;const gr=s.an(Er.textSizeData,kt.zoom),Xr=s.aC(Sr,1,tt.transform.zoom),Bi=mi(Vt,tt.transform,Xr),En=at.layout.get("icon-text-fit")!=="none"&&Er.hasIconData();if(gr){const Nn=Math.pow(2,kt.zoom-Sr.tileID.overscaledZ),Mn=tr?(ss,as)=>tr.getElevation(Xt,ss,as):null;du(Er,Vt,Wt,gt,kt,Bi,Nn,gr,En,s.aD(kt,Sr,bt,St),Xt.toUnwrapped(),Mn)}}}(se,I,V,O,V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),oe),V.paint.get("icon-opacity").constantOr(1)!==0&&Ao(I,O,V,se,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),Ee,je,de),V.paint.get("text-opacity").constantOr(1)!==0&&Ao(I,O,V,se,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),Ee,je,de),O.map.showCollisionBoxes&&(Lh(I,O,V,se,!0),Lh(I,O,V,se,!1))}(o,f,y,w,this.style.placement.variableOffsets,T):s.cd(y)?function(I,O,V,se,oe){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=oe,de=V.paint.get("circle-opacity"),Ee=V.paint.get("circle-stroke-width"),je=V.paint.get("circle-stroke-opacity"),Je=!V.layout.get("circle-sort-key").isConstant();if(de.constantOr(1)===0&&(Ee.constantOr(1)===0||je.constantOr(1)===0))return;const tt=I.context,at=tt.gl,ft=I.transform,mt=I.getDepthModeForSublayer(0,di.ReadOnly),pt=bi.disabled,bt=I.colorModeForRenderPass(),St=[],gt=ft.getCircleRadiusCorrection();for(let kt=0;kt<se.length;kt++){const tr=se[kt],Vt=O.getTile(tr),Wt=Vt.getBucket(V);if(!Wt)continue;const Xt=V.paint.get("circle-translate"),Sr=V.paint.get("circle-translate-anchor"),Er=s.aD(ft,Vt,Xt,Sr),gr=Wt.programConfigurations.get(V.id),Xr=I.useProgram("circle",gr),Bi=Wt.layoutVertexBuffer,En=Wt.indexBuffer,Nn=I.style.map.terrain&&I.style.map.terrain.getTerrainData(tr),Mn={programConfiguration:gr,program:Xr,layoutVertexBuffer:Bi,indexBuffer:En,uniformValues:ao(I,Vt,V,Er,gt),terrainData:Nn,projectionData:ft.getProjectionData({overscaledTileID:tr,applyGlobeMatrix:!ge,applyTerrainMatrix:!0})};if(Je){const ss=Wt.segments.get();for(const as of ss)St.push({segments:new s.aM([as]),sortKey:as.sortKey,state:Mn})}else St.push({segments:Wt.segments,sortKey:0,state:Mn})}Je&&St.sort((kt,tr)=>kt.sortKey-tr.sortKey);for(const kt of St){const{programConfiguration:tr,program:Vt,layoutVertexBuffer:Wt,indexBuffer:Xt,uniformValues:Sr,terrainData:Er,projectionData:gr}=kt.state;Vt.draw(tt,at.TRIANGLES,mt,pt,bt,Wi.backCCW,Sr,Er,gr,V.id,Wt,Xt,kt.segments,V.paint,I.transform.zoom,tr)}}(o,f,y,w,T):s.ce(y)?function(I,O,V,se,oe){if(V.paint.get("heatmap-opacity")===0)return;const ge=I.context,{isRenderingToTexture:de,isRenderingGlobe:Ee}=oe;if(I.style.map.terrain){for(const je of se){const Je=O.getTile(je);O.hasRenderableParent(je)||(I.renderPass==="offscreen"?Tc(I,Je,V,je,Ee):I.renderPass==="translucent"&&Fl(I,V,je,de,Ee))}ge.viewport.set([0,0,I.width,I.height])}else I.renderPass==="offscreen"?function(je,Je,tt,at){const ft=je.context,mt=ft.gl,pt=je.transform,bt=bi.disabled,St=new _n([mt.ONE,mt.ONE],s.bf.transparent,[!0,!0,!0,!0]);(function(gt,kt,tr){const Vt=gt.gl;gt.activeTexture.set(Vt.TEXTURE1),gt.viewport.set([0,0,kt.width/4,kt.height/4]);let Wt=tr.heatmapFbos.get(s.c3);Wt?(Vt.bindTexture(Vt.TEXTURE_2D,Wt.colorAttachment.get()),gt.bindFramebuffer.set(Wt.framebuffer)):(Wt=nl(gt,kt.width/4,kt.height/4),tr.heatmapFbos.set(s.c3,Wt))})(ft,je,tt),ft.clear({color:s.bf.transparent});for(let gt=0;gt<at.length;gt++){const kt=at[gt];if(Je.hasRenderableParent(kt))continue;const tr=Je.getTile(kt),Vt=tr.getBucket(tt);if(!Vt)continue;const Wt=Vt.programConfigurations.get(tt.id),Xt=je.useProgram("heatmap",Wt),Sr=pt.getProjectionData({overscaledTileID:kt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Er=pt.getCircleRadiusCorrection();Xt.draw(ft,mt.TRIANGLES,di.disabled,bt,St,Wi.backCCW,Cl(tr,pt.zoom,tt.paint.get("heatmap-intensity"),Er),null,Sr,tt.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,tt.paint,pt.zoom,Wt)}ft.viewport.set([0,0,je.width,je.height])}(I,O,V,se):I.renderPass==="translucent"&&function(je,Je){const tt=je.context,at=tt.gl;tt.setColorMode(je.colorModeForRenderPass());const ft=Je.heatmapFbos.get(s.c3);ft&&(tt.activeTexture.set(at.TEXTURE0),at.bindTexture(at.TEXTURE_2D,ft.colorAttachment.get()),tt.activeTexture.set(at.TEXTURE1),sl(tt,Je).bind(at.LINEAR,at.CLAMP_TO_EDGE),je.useProgram("heatmapTexture").draw(tt,at.TRIANGLES,di.disabled,bi.disabled,je.colorModeForRenderPass(),Wi.disabled,Nu(je,Je,0,1),null,null,Je.id,je.viewportBuffer,je.quadTriangleIndexBuffer,je.viewportSegments,Je.paint,je.transform.zoom))}(I,V)}(o,f,y,w,T):s.cf(y)?function(I,O,V,se,oe){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=oe,de=V.paint.get("line-opacity"),Ee=V.paint.get("line-width");if(de.constantOr(1)===0||Ee.constantOr(1)===0)return;const je=I.getDepthModeForSublayer(0,di.ReadOnly),Je=I.colorModeForRenderPass(),tt=V.paint.get("line-dasharray"),at=tt.constantOr(1),ft=V.paint.get("line-pattern"),mt=ft.constantOr(1),pt=V.paint.get("line-gradient"),bt=V.getCrossfadeParameters();let St;St=mt?"linePattern":at&&pt?"lineGradientSDF":at?"lineSDF":pt?"lineGradient":"line";const gt=I.context,kt=gt.gl,tr=I.transform;let Vt=!0;for(const Wt of se){const Xt=O.getTile(Wt);if(mt&&!Xt.patternsLoaded())continue;const Sr=Xt.getBucket(V);if(!Sr)continue;const Er=Sr.programConfigurations.get(V.id),gr=I.context.program.get(),Xr=I.useProgram(St,Er),Bi=Vt||Xr.program!==gr,En=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Wt),Nn=ft.constantOr(null),Mn=tt&&tt.constantOr(null);if(Nn&&Xt.imageAtlas){const Sa=Xt.imageAtlas,ia=Sa.patternPositions[Nn.to.toString()],na=Sa.patternPositions[Nn.from.toString()];ia&&na&&Er.setConstantPatternPositions(ia,na)}else if(Mn){const Sa=V.layout.get("line-cap")==="round",ia=I.lineAtlas.getDash(Mn.to,Sa),na=I.lineAtlas.getDash(Mn.from,Sa);Er.setConstantDashPositions(ia,na)}const ss=tr.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),as=tr.getPixelScale();let rn;mt?(rn=oo(I,Xt,V,as,bt),gA(gt,kt,Xt,Er,bt)):at&&pt?(rn=lo(I,Xt,V,as,bt,Sr.lineClipsArray.length),Bs(I,O,gt,kt,V,Sr,Wt,Er,bt)):at?(rn=qa(I,Xt,V,as,bt),fu(I,gt,kt,Er,Bi,bt)):pt?(rn=Cc(I,Xt,V,as,Sr.lineClipsArray.length),ma(I,O,gt,kt,V,Sr,Wt)):rn=wc(I,Xt,V,as);const us=I.stencilModeForClipping(Wt);Xr.draw(gt,kt.TRIANGLES,je,us,Je,Wi.disabled,rn,En,ss,V.id,Sr.layoutVertexBuffer,Sr.indexBuffer,Sr.segments,V.paint,I.transform.zoom,Er,Sr.layoutVertexBuffer2),Vt=!1}}(o,f,y,w,T):s.cg(y)?function(I,O,V,se,oe){const ge=V.paint.get("fill-color"),de=V.paint.get("fill-opacity");if(de.constantOr(1)===0)return;const{isRenderingToTexture:Ee}=oe,je=I.colorModeForRenderPass(),Je=V.paint.get("fill-pattern"),tt=I.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&ge.constantOr(s.bf.transparent).a===1&&de.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===tt){const at=I.getDepthModeForSublayer(1,I.renderPass==="opaque"?di.ReadWrite:di.ReadOnly);ic(I,O,V,se,at,je,!1,Ee)}if(I.renderPass==="translucent"&&V.paint.get("fill-antialias")){const at=I.getDepthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,di.ReadOnly);ic(I,O,V,se,at,je,!0,Ee)}}(o,f,y,w,T):s.ch(y)?function(I,O,V,se,oe){const ge=V.paint.get("fill-extrusion-opacity");if(ge===0)return;const{isRenderingToTexture:de}=oe;if(I.renderPass==="translucent"){const Ee=new di(I.context.gl.LEQUAL,di.ReadWrite,I.depthRangeFor3D);if(ge!==1||V.paint.get("fill-extrusion-pattern").constantOr(1))al(I,O,V,se,Ee,bi.disabled,_n.disabled,de),al(I,O,V,se,Ee,I.stencilModeFor3D(),I.colorModeForRenderPass(),de);else{const je=I.colorModeForRenderPass();al(I,O,V,se,Ee,bi.disabled,je,de)}}}(o,f,y,w,T):s.ci(y)?function(I,O,V,se,oe){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;const{isRenderingToTexture:ge}=oe,de=I.context,Ee=I.style.projection.useSubdivision,je=I.getDepthModeForSublayer(0,di.ReadOnly),Je=I.colorModeForRenderPass();if(I.renderPass==="offscreen")(function(tt,at,ft,mt,pt,bt,St){const gt=tt.context,kt=gt.gl;for(const tr of ft){const Vt=at.getTile(tr),Wt=Vt.dem;if(!Wt||!Wt.data||!Vt.needsHillshadePrepare)continue;const Xt=Wt.dim,Sr=Wt.stride,Er=Wt.getPixels();if(gt.activeTexture.set(kt.TEXTURE1),gt.pixelStoreUnpackPremultiplyAlpha.set(!1),Vt.demTexture=Vt.demTexture||tt.getTileTexture(Sr),Vt.demTexture){const Xr=Vt.demTexture;Xr.update(Er,{premultiply:!1}),Xr.bind(kt.NEAREST,kt.CLAMP_TO_EDGE)}else Vt.demTexture=new s.T(gt,Er,kt.RGBA,{premultiply:!1}),Vt.demTexture.bind(kt.NEAREST,kt.CLAMP_TO_EDGE);gt.activeTexture.set(kt.TEXTURE0);let gr=Vt.fbo;if(!gr){const Xr=new s.T(gt,{width:Xt,height:Xt,data:null},kt.RGBA);Xr.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),gr=Vt.fbo=gt.createFramebuffer(Xt,Xt,!0,!1),gr.colorAttachment.set(Xr.texture)}gt.bindFramebuffer.set(gr.framebuffer),gt.viewport.set([0,0,Xt,Xt]),tt.useProgram("hillshadePrepare").draw(gt,kt.TRIANGLES,pt,bt,St,Wi.disabled,Ca(Vt.tileID,Wt),null,null,mt.id,tt.rasterBoundsBuffer,tt.quadTriangleIndexBuffer,tt.rasterBoundsSegments),Vt.needsHillshadePrepare=!1}})(I,O,se,V,je,bi.disabled,Je),de.viewport.set([0,0,I.width,I.height]);else if(I.renderPass==="translucent")if(Ee){const[tt,at,ft]=I.stencilConfigForOverlapTwoPass(se);Mh(I,O,V,ft,tt,je,Je,!1,ge),Mh(I,O,V,ft,at,je,Je,!0,ge)}else{const[tt,at]=I.getStencilConfigForOverlapAndUpdateStencilID(se);Mh(I,O,V,at,tt,je,Je,!1,ge)}}(o,f,y,w,T):s.cj(y)?function(I,O,V,se,oe){if(I.renderPass!=="translucent"||!se.length)return;const{isRenderingToTexture:ge}=oe,de=I.style.projection.useSubdivision,Ee=I.getDepthModeForSublayer(0,di.ReadOnly),je=I.colorModeForRenderPass();if(de){const[Je,tt,at]=I.stencilConfigForOverlapTwoPass(se);Nl(I,O,V,at,Je,Ee,je,!1,ge),Nl(I,O,V,at,tt,Ee,je,!0,ge)}else{const[Je,tt]=I.getStencilConfigForOverlapAndUpdateStencilID(se);Nl(I,O,V,tt,Je,Ee,je,!1,ge)}}(o,f,y,w,T):s.bK(y)?function(I,O,V,se,oe){if(I.renderPass!=="translucent"||V.paint.get("raster-opacity")===0||!se.length)return;const{isRenderingToTexture:ge}=oe,de=O.getSource(),Ee=I.style.projection.useSubdivision;if(de instanceof ar)Il(I,O,V,se,null,!1,!1,de.tileCoords,de.flippedWindingOrder,ge);else if(Ee){const[je,Je,tt]=I.stencilConfigForOverlapTwoPass(se);Il(I,O,V,tt,je,!1,!0,Ph,!1,ge),Il(I,O,V,tt,Je,!0,!0,Ph,!1,ge)}else{const[je,Je]=I.getStencilConfigForOverlapAndUpdateStencilID(se);Il(I,O,V,Je,je,!1,!0,Ph,!1,ge)}}(o,f,y,w,T):s.ck(y)?function(I,O,V,se,oe){const ge=V.paint.get("background-color"),de=V.paint.get("background-opacity");if(de===0)return;const{isRenderingToTexture:Ee}=oe,je=I.context,Je=je.gl,tt=I.style.projection,at=I.transform,ft=at.tileSize,mt=V.paint.get("background-pattern");if(I.isPatternMissing(mt))return;const pt=!mt&&ge.a===1&&de===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==pt)return;const bt=bi.disabled,St=I.getDepthModeForSublayer(0,pt==="opaque"?di.ReadWrite:di.ReadOnly),gt=I.colorModeForRenderPass(),kt=I.useProgram(mt?"backgroundPattern":"background"),tr=se||ei(at,{tileSize:ft,terrain:I.style.map.terrain});mt&&(je.activeTexture.set(Je.TEXTURE0),I.imageManager.bind(I.context));const Vt=V.getCrossfadeParameters();for(const Wt of tr){const Xt=at.getProjectionData({overscaledTileID:Wt,applyGlobeMatrix:!Ee,applyTerrainMatrix:!0}),Sr=mt?Ka(de,I,mt,{tileID:Wt,tileSize:ft},Vt):ws(de,ge),Er=I.style.map.terrain&&I.style.map.terrain.getTerrainData(Wt),gr=tt.getMeshFromTileID(je,Wt.canonical,!1,!0,"raster");kt.draw(je,Je.TRIANGLES,St,bt,gt,Wi.backCCW,Sr,Er,Xt,V.id,gr.vertexBuffer,gr.indexBuffer,gr.segments)}}(o,0,y,w,T):s.cl(y)&&function(I,O,V,se){const{isRenderingGlobe:oe}=se,ge=I.context,de=V.implementation,Ee=I.style.projection,je=I.transform,Je=je.getProjectionDataForCustomLayer(oe),tt={farZ:je.farZ,nearZ:je.nearZ,fov:je.fov*Math.PI/180,modelViewProjectionMatrix:je.modelViewProjectionMatrix,projectionMatrix:je.projectionMatrix,shaderData:{variantName:Ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ee.shaderPreludeCode.vertexSource}`,define:Ee.shaderDefine},defaultProjectionData:Je},at=de.renderingMode?de.renderingMode:"2d";if(I.renderPass==="offscreen"){const ft=de.prerender;ft&&(I.setCustomLayerDefaults(),ge.setColorMode(I.colorModeForRenderPass()),ft.call(de,ge.gl,tt),ge.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),ge.setColorMode(I.colorModeForRenderPass()),ge.setStencilMode(bi.disabled);const ft=at==="3d"?I.getDepthModeFor3D():I.getDepthModeForSublayer(0,di.ReadOnly);ge.setDepthMode(ft),de.render(ge.gl,tt),ge.setDirty(),I.setBaseState(),ge.bindFramebuffer.set(null)}}(o,0,y,T))}saveTileTexture(o){const f=this._tileTextures[o.size[0]];f?f.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const f=this._tileTextures[o];return f&&f.length>0?f.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const f=this.imageManager.getPattern(o.from.toString()),y=this.imageManager.getPattern(o.to.toString());return!f||!y}useProgram(o,f,y=!1,w=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,I=this.style.projection,O=y?ya.projectionMercator:I.shaderPreludeCode,V=y?Jo:I.shaderDefine,se=o+(f?f.cacheKey:"")+`/${y?Ti:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(w?`/${w.join("/")}`:"");return this.cache[se]||(this.cache[se]=new wl(this.context,ya[o],f,lu[o],this._showOverdrawInspector,T,O,V,w)),this.cache[se]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:f}=this.context.gl;return this.width!==o||this.height!==f}}function Ml(S,o){let f,y=!1,w=null,T=null;const I=()=>{w=null,y&&(S.apply(T,f),w=setTimeout(I,o),y=!1)};return(...O)=>(y=!0,T=this,f=O,w||I(),w)}class Ks{constructor(o){this._getCurrentHash=()=>{const f=window.location.hash.replace("#","");if(this._hashName){let y;return f.split("&").map(w=>w.split("=")).forEach(w=>{w[0]===this._hashName&&(y=w)}),(y&&y[1]||"").split("/")}return f.split("/")},this._onHashChange=()=>{const f=this._getCurrentHash();if(!this._isValidHash(f))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(f[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:y,pitch:+(f[4]||0)}),!0},this._updateHashUnthrottled=()=>{const f=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,f)},this._removeHash=()=>{const f=this._getCurrentHash();if(f.length===0)return;const y=f.join("/");let w=y;w.split("&").length>0&&(w=w.split("&")[0]),this._hashName&&(w=`${this._hashName}=${y}`);let T=window.location.hash.replace(w,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let I=window.location.href.replace(/(#.+)?$/,T);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=Ml(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){const f=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,w=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,w),I=Math.round(f.lng*T)/T,O=Math.round(f.lat*T)/T,V=this._map.getBearing(),se=this._map.getPitch();let oe="";if(oe+=o?`/${I}/${O}/${y}`:`${y}/${O}/${I}`,(V||se)&&(oe+="/"+Math.round(10*V)/10),se&&(oe+=`/${Math.round(se)}`),this._hashName){const ge=this._hashName;let de=!1;const Ee=window.location.hash.slice(1).split("&").map(je=>{const Je=je.split("=")[0];return Je===ge?(de=!0,`${Je}=${oe}`):je}).filter(je=>je);return de||Ee.push(`${ge}=${oe}`),`#${Ee.join("&")}`}return`#${oe}`}_isValidHash(o){if(o.length<3||o.some(isNaN))return!1;try{new s.S(+o[2],+o[1])}catch{return!1}const f=+o[0],y=+(o[3]||0),w=+(o[4]||0);return f>=this._map.getMinZoom()&&f<=this._map.getMaxZoom()&&y>=-180&&y<=180&&w>=this._map.getMinPitch()&&w<=this._map.getMaxPitch()}}const ol={linearity:.3,easing:s.cm(0,0,.3,1)},kc=s.e({deceleration:2500,maxSpeed:1400},ol),Sf=s.e({deceleration:20,maxSpeed:1400},ol),Id=s.e({deceleration:1e3,maxSpeed:360},ol),Ef=s.e({deceleration:1e3,maxSpeed:90},ol),ta=s.e({deceleration:1e3,maxSpeed:360},ol);class YA{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:F.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,f=F.now();for(;o.length>0&&f-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)f.zoom+=T.zoomDelta||0,f.bearing+=T.bearingDelta||0,f.pitch+=T.pitchDelta||0,f.roll+=T.rollDelta||0,T.panDelta&&f.pan._add(T.panDelta),T.around&&(f.around=T.around),T.pinchAround&&(f.pinchAround=T.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(f.pan.mag()){const T=Nc(f.pan.mag(),y,s.e({},kc,o||{})),I=f.pan.mult(T.amount/f.pan.mag()),O=this._map.cameraHelper.handlePanInertia(I,this._map.transform);w.center=O.easingCenter,w.offset=O.easingOffset,Fc(w,T)}if(f.zoom){const T=Nc(f.zoom,y,Sf);w.zoom=this._map.transform.zoom+T.amount,Fc(w,T)}if(f.bearing){const T=Nc(f.bearing,y,Id);w.bearing=this._map.transform.bearing+s.ah(T.amount,-179,179),Fc(w,T)}if(f.pitch){const T=Nc(f.pitch,y,Ef);w.pitch=this._map.transform.pitch+T.amount,Fc(w,T)}if(f.roll){const T=Nc(f.roll,y,ta);w.roll=this._map.transform.roll+s.ah(T.amount,-179,179),Fc(w,T)}if(w.zoom||w.bearing){const T=f.pinchAround===void 0?f.around:f.pinchAround;w.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),s.e(w,{noMoveStart:!0})}}function Fc(S,o){(!S.duration||S.duration<o.duration)&&(S.duration=o.duration,S.easing=o.easing)}function Nc(S,o,f){const{maxSpeed:y,linearity:w,deceleration:T}=f,I=s.ah(S*w/(o/1e3),-y,y),O=Math.abs(I)/(T*w);return{easing:f.easing,duration:1e3*O,amount:I*(O/2)}}class Xa extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,y,w={}){y=y instanceof MouseEvent?y:new MouseEvent(o,y);const T=C.mousePos(f.getCanvas(),y),I=f.unproject(T);super(o,s.e({point:T,lngLat:I,originalEvent:y},w)),this._defaultPrevented=!1,this.target=f}}class Po extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,y){const w=o==="touchend"?y.changedTouches:y.touches,T=C.touchPos(f.getCanvasContainer(),w),I=T.map(V=>f.unproject(V)),O=T.reduce((V,se,oe,ge)=>V.add(se.div(ge.length)),new s.P(0,0));super(o,{points:T,point:O,lngLats:I,lngLat:f.unproject(O),originalEvent:y}),this._defaultPrevented=!1}}class sc extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,f,y){super(o,{originalEvent:y}),this._defaultPrevented=!1}}class Pl{constructor(o,f){this._map=o,this._clickTolerance=f.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new sc(o.type,this._map,o))}mousedown(o,f){return this._mousedownPos=f,this._firePreventable(new Xa(o.type,this._map,o))}mouseup(o){this._map.fire(new Xa(o.type,this._map,o))}click(o,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||this._map.fire(new Xa(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Xa(o.type,this._map,o))}mouseover(o){this._map.fire(new Xa(o.type,this._map,o))}mouseout(o){this._map.fire(new Xa(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Po(o.type,this._map,o))}touchmove(o){this._map.fire(new Po(o.type,this._map,o))}touchend(o){this._map.fire(new Po(o.type,this._map,o))}touchcancel(o){this._map.fire(new Po(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rl{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Xa(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Xa(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xh{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.screenPointToLocation(s.P.convert(o),this._map.terrain)}}class R{constructor(o,f){this._map=o,this._tr=new xh(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,f){this.isEnabled()&&o.shiftKey&&o.button===0&&(C.disableDrag(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(o,f){if(!this._active)return;const y=f;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=y,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const T=Math.min(w.x,y.x),I=Math.max(w.x,y.x),O=Math.min(w.y,y.y),V=Math.max(w.y,y.y);C.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=I-T+"px",this._box.style.height=V-O+"px"}mouseupWindow(o,f){if(!this._active||o.button!==0)return;const y=this._startPos,w=f;if(this.reset(),C.suppressClick(),y.x!==w.x||y.y!==w.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:o})),{cameraAnimation:T=>T.fitScreenCoordinates(y,w,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,f){return this._map.fire(new s.l(o,{originalEvent:f}))}}function Q(S,o){if(S.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${o.length}`);const f={};for(let y=0;y<S.length;y++)f[S[y].identifier]=o[y];return f}class ae{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,f,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=o.timeStamp),y.length===this.numTouches&&(this.centroid=function(w){const T=new s.P(0,0);for(const I of w)T._add(I);return T.div(w.length)}(f),this.touches=Q(y,f)))}touchmove(o,f,y){if(this.aborted||!this.centroid)return;const w=Q(y,f);for(const T in this.touches){const I=w[T];(!I||I.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(o,f,y){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class pe{constructor(o){this.singleTap=new ae(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,f,y){this.singleTap.touchstart(o,f,y)}touchmove(o,f,y){this.singleTap.touchmove(o,f,y)}touchend(o,f,y){const w=this.singleTap.touchend(o,f,y);if(w){const T=o.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(w)<30;if(T&&I||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class Pe{constructor(o){this._tr=new xh(o),this._zoomIn=new pe({numTouches:1,numTaps:2}),this._zoomOut=new pe({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,f,y){this._zoomIn.touchstart(o,f,y),this._zoomOut.touchstart(o,f,y)}touchmove(o,f,y){this._zoomIn.touchmove(o,f,y),this._zoomOut.touchmove(o,f,y)}touchend(o,f,y){const w=this._zoomIn.touchend(o,f,y),T=this._zoomOut.touchend(o,f,y),I=this._tr;return w?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(w)},{originalEvent:o})}):T?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(T)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oe{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const f=this._moveFunction(...o);if(f.bearingDelta||f.pitchDelta||f.rollDelta||f.around||f.panDelta)return this._active=!0,f}dragStart(o,f){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=Array.isArray(f)?f[0]:f,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,f){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const w=Array.isArray(f)?f[0]:f;return!this._moved&&w.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=w,this._move(y,w))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&C.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ke=0,Xe=2,rt={[Ke]:1,[Xe]:2};class qe{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const f=C.mouseButton(o);this._eventButton=f}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(f,y){const w=rt[y];return f.buttons===void 0||(f.buttons&w)!==w}(o,this._eventButton)}isValidEndEvent(o){return C.mouseButton(o)===this._eventButton}}class Ft{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return o.targetTouches.length===1}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}class Jt{constructor(o=new qe({checkCorrectEvent:()=>!0}),f=new Ft){this.mouseMoveStateManager=o,this.oneFingerTouchMoveStateManager=f}_executeRelevantHandler(o,f,y){return o instanceof MouseEvent?f(o):typeof TouchEvent<"u"&&o instanceof TouchEvent?y(o):void 0}startMove(o){this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.startMove(f),f=>this.oneFingerTouchMoveStateManager.startMove(f))}endMove(o){this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.endMove(f),f=>this.oneFingerTouchMoveStateManager.endMove(f))}isValidStartEvent(o){return this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.isValidStartEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidStartEvent(f))}isValidMoveEvent(o){return this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.isValidMoveEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(f))}isValidEndEvent(o){return this._executeRelevantHandler(o,f=>this.mouseMoveStateManager.isValidEndEvent(f),f=>this.oneFingerTouchMoveStateManager.isValidEndEvent(f))}}const ct=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=o=>{o.preventDefault()}};class Dt{constructor(o,f){this._clickTolerance=o.clickTolerance||1,this._map=f,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,f,y){return this._calculateTransform(o,f,y)}touchmove(o,f,y){if(this._active){if(!this._shouldBePrevented(y.length))return o.preventDefault(),this._calculateTransform(o,f,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,f,y){this._calculateTransform(o,f,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,f,y){y.length>0&&(this._active=!0);const w=Q(y,f),T=new s.P(0,0),I=new s.P(0,0);let O=0;for(const se in w){const oe=w[se],ge=this._touches[se];ge&&(T._add(oe),I._add(oe.sub(ge)),O++,w[se]=oe)}if(this._touches=w,this._shouldBePrevented(O)||!I.mag())return;const V=I.div(O);return this._sum._add(V),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:V}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,f,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([f[0],f[1]]))}touchmove(o,f,y){if(!this._firstTwoTouches)return;o.preventDefault();const[w,T]=this._firstTwoTouches,I=ur(y,f,w),O=ur(y,f,T);if(!I||!O)return;const V=this._aroundCenter?null:I.add(O).div(2);return this._move([I,O],V,o)}touchend(o,f,y){if(!this._firstTwoTouches)return;const[w,T]=this._firstTwoTouches,I=ur(y,f,w),O=ur(y,f,T);I&&O||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ur(S,o,f){for(let y=0;y<S.length;y++)if(S[y].identifier===f)return o[y]}function It(S,o){return Math.log(S/o)/Math.LN2}class fr extends Qt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,f){const y=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(It(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:It(this._distance,y),pinchAround:f}}}function mr(S,o){return 180*S.angleWith(o)/Math.PI}class Tr extends Qt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,f,y){const w=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:mr(this._vector,w),pinchAround:f}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const f=25/(Math.PI*this._minDiameter)*360,y=mr(o,this._startVector);return Math.abs(y)<f}}function wr(S){return Math.abs(S.y)>Math.abs(S.x)}class hi extends Qt{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,f,y){super.touchstart(o,f,y),this._currentTouchCount=y.length}_start(o){this._lastPoints=o,wr(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,f,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const w=o[0].sub(this._lastPoints[0]),T=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,T,y.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(w.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(o,f,y){if(this._valid!==void 0)return this._valid;const w=o.mag()>=2,T=f.mag()>=2;if(!w&&!T)return;if(!w||!T)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const I=o.y>0==f.y>0;return wr(o)&&wr(f)&&I}}const ti={panStep:100,bearingStep:15,pitchStep:10};class Ui{constructor(o){this._tr=new xh(o);const f=ti;this._panStep=f.panStep,this._bearingStep=f.bearingStep,this._pitchStep=f.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let f=0,y=0,w=0,T=0,I=0;switch(o.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:o.shiftKey?y=-1:(o.preventDefault(),T=-1);break;case 39:o.shiftKey?y=1:(o.preventDefault(),T=1);break;case 38:o.shiftKey?w=1:(o.preventDefault(),I=-1);break;case 40:o.shiftKey?w=-1:(o.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(y=0,w=0),{cameraAnimation:O=>{const V=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:ii,zoom:f?Math.round(V.zoom)+f*(o.shiftKey?2:1):V.zoom,bearing:V.bearing+y*this._bearingStep,pitch:V.pitch+w*this._pitchStep,offset:[-T*this._panStep,-I*this._panStep],center:V.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ii(S){return S*(2-S)}const cn=4.000244140625,Ws=1/450;class zi{constructor(o,f){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=o,this._tr=new xh(o),this._triggerRenderFrame=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ws}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let f=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const y=F.now(),w=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,f!==0&&f%cn==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(w*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),o.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=o,this._delta-=f,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=C.mousePos(this._map.getCanvas(),o),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(s.S.convert(y.center)):f,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=o.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>cn?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&V!==0&&(V=1/V);const se=typeof this._targetZoom!="number"?o.scale:s.af(this._targetZoom);this._targetZoom=o.getConstrained(o.getCameraLngLat(),s.ak(se*V)).zoom,this._type==="wheel"&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom!="number"?o.zoom:this._targetZoom,y=this._startZoom,w=this._easing;let T,I=!1;if(this._type==="wheel"&&y&&w){const O=F.now()-this._lastWheelEventTime,V=Math.min((O+5)/200,1),se=w(V);T=s.C.number(y,f,se),V<1?this._frameId||(this._frameId=!0):I=!0}else T=f,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!I,zoomDelta:T-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let f=s.co;if(this._prevEase){const y=this._prevEase,w=(F.now()-y.start)/y.duration,T=y.easing(w+.01)-y.easing(w),I=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-I*I);f=s.cm(I,O,.25,1)}return this._prevEase={start:F.now(),duration:o,easing:f},f}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ai{constructor(o,f){this._clickZoom=o,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vr{constructor(o){this._tr=new xh(o),this.reset()}reset(){this._active=!1}dblclick(o,f){return o.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(f)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Li{constructor(){this._tap=new pe({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,f,y){if(!this._swipePoint)if(this._tapTime){const w=f[0],T=o.timeStamp-this._tapTime<500,I=this._tapPoint.dist(w)<30;T&&I?y.length>0&&(this._swipePoint=w,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(o,f,y)}touchmove(o,f,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const w=f[0],T=w.y-this._swipePoint.y;return this._swipePoint=w,o.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(o,f,y)}touchend(o,f,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const w=this._tap.touchend(o,f,y);w&&(this._tapTime=o.timeStamp,this._tapPoint=w)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hi{constructor(o,f,y){this._el=o,this._mousePan=f,this._touchPan=y}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qi{constructor(o,f,y,w){this._pitchWithRotate=o.pitchWithRotate,this._rollEnabled=o.rollEnabled,this._mouseRotate=f,this._mousePitch=y,this._mouseRoll=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ni{constructor(o,f,y,w){this._el=o,this._touchZoom=f,this._touchRotate=y,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Vi{constructor(o,f){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=o,this._options=f,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",o);let f=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(f=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),w=document.createElement("div");w.className="maplibregl-desktop-message",w.textContent=f,this._container.appendChild(w);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=y,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,f){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:o,originalEvent:f})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const nn=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class is extends s.l{}function Ss(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class jn{constructor(o,f){this.handleWindowEvent=w=>{this.handleEvent(w,`${w.type}Window`)},this.handleEvent=(w,T)=>{if(w.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=w.type==="renderFrame"?void 0:w,O={needsRenderFrame:!1},V={},se={};for(const{handlerName:de,handler:Ee,allowed:je}of this._handlers){if(!Ee.isEnabled())continue;let Je;if(this._blockedByActive(se,je,de))Ee.reset();else if(Ee[T||w.type]){if(s.cp(w,T||w.type)){const tt=C.mousePos(this._map.getCanvas(),w);Je=Ee[T||w.type](w,tt)}else if(s.cq(w,T||w.type)){const tt=this._getMapTouches(w.touches),at=C.touchPos(this._map.getCanvas(),tt);Je=Ee[T||w.type](w,at,tt)}else s.cr(T||w.type)||(Je=Ee[T||w.type](w));this.mergeHandlerResult(O,V,Je,de,I),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()}(Je||Ee.isActive())&&(se[de]=Ee)}const oe={};for(const de in this._previousActiveHandlers)se[de]||(oe[de]=I);this._previousActiveHandlers=se,(Object.keys(oe).length||Ss(O))&&(this._changes.push([O,V,oe]),this._triggerRenderFrame()),(Object.keys(se).length||Ss(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ge}=O;ge&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ge(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new YA(o),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(f);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,T,I]of this._listeners)C.addEventListener(w,T,w===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[o,f,y]of this._listeners)C.removeEventListener(o,f,o===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(o){const f=this._map,y=f.getCanvasContainer();this._add("mapEvent",new Pl(f,o));const w=f.boxZoom=new R(f,o);this._add("boxZoom",w),o.interactive&&o.boxZoom&&w.enable();const T=f.cooperativeGestures=new Vi(f,o.cooperativeGestures);this._add("cooperativeGestures",T),o.cooperativeGestures&&T.enable();const I=new Pe(f),O=new Vr(f);f.doubleClickZoom=new ai(O,I),this._add("tapZoom",I),this._add("clickZoom",O),o.interactive&&o.doubleClickZoom&&f.doubleClickZoom.enable();const V=new Li;this._add("tapDragZoom",V);const se=f.touchPitch=new hi(f);this._add("touchPitch",se),o.interactive&&o.touchPitch&&f.touchPitch.enable(o.touchPitch);const oe=()=>f.project(f.getCenter()),ge=function({enable:pt,clickTolerance:bt,aroundCenter:St=!0,minPixelCenterThreshold:gt=100,rotateDegreesPerPixelMoved:kt=.8},tr){const Vt=new qe({checkCorrectEvent:Wt=>C.mouseButton(Wt)===0&&Wt.ctrlKey||C.mouseButton(Wt)===2&&!Wt.ctrlKey});return new Oe({clickTolerance:bt,move:(Wt,Xt)=>{const Sr=tr();if(St&&Math.abs(Sr.y-Wt.y)>gt)return{bearingDelta:s.cn(new s.P(Wt.x,Xt.y),Xt,Sr)};let Er=(Xt.x-Wt.x)*kt;return St&&Xt.y<Sr.y&&(Er=-Er),{bearingDelta:Er}},moveStateManager:Vt,enable:pt,assignEvents:ct})}(o,oe),de=function({enable:pt,clickTolerance:bt,pitchDegreesPerPixelMoved:St=-.5}){const gt=new qe({checkCorrectEvent:kt=>C.mouseButton(kt)===0&&kt.ctrlKey||C.mouseButton(kt)===2});return new Oe({clickTolerance:bt,move:(kt,tr)=>({pitchDelta:(tr.y-kt.y)*St}),moveStateManager:gt,enable:pt,assignEvents:ct})}(o),Ee=function({enable:pt,clickTolerance:bt,rollDegreesPerPixelMoved:St=.3},gt){const kt=new qe({checkCorrectEvent:tr=>C.mouseButton(tr)===2&&tr.ctrlKey});return new Oe({clickTolerance:bt,move:(tr,Vt)=>{const Wt=gt();let Xt=(Vt.x-tr.x)*St;return Vt.y<Wt.y&&(Xt=-Xt),{rollDelta:Xt}},moveStateManager:kt,enable:pt,assignEvents:ct})}(o,oe);f.dragRotate=new qi(o,ge,de,Ee),this._add("mouseRotate",ge,["mousePitch"]),this._add("mousePitch",de,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ee,["mousePitch"]),o.interactive&&o.dragRotate&&f.dragRotate.enable();const je=function({enable:pt,clickTolerance:bt}){const St=new qe({checkCorrectEvent:gt=>C.mouseButton(gt)===0&&!gt.ctrlKey});return new Oe({clickTolerance:bt,move:(gt,kt)=>({around:kt,panDelta:kt.sub(gt)}),activateOnStart:!0,moveStateManager:St,enable:pt,assignEvents:ct})}(o),Je=new Dt(o,f);f.dragPan=new Hi(y,je,Je),this._add("mousePan",je),this._add("touchPan",Je,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&f.dragPan.enable(o.dragPan);const tt=new Tr,at=new fr;f.touchZoomRotate=new ni(y,at,tt,V),this._add("touchRotate",tt,["touchPan","touchZoom"]),this._add("touchZoom",at,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&f.touchZoomRotate.enable(o.touchZoomRotate);const ft=f.scrollZoom=new zi(f,()=>this._triggerRenderFrame());this._add("scrollZoom",ft,["mousePan"]),o.interactive&&o.scrollZoom&&f.scrollZoom.enable(o.scrollZoom);const mt=f.keyboard=new Ui(f);this._add("keyboard",mt),o.interactive&&o.keyboard&&f.keyboard.enable(),this._add("blockableMapEvent",new Rl(f))}_add(o,f,y){this._handlers.push({handlerName:o,handler:f,allowed:y}),this._handlersById[o]=f}stop(o){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!nn(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,f,y){for(const w in o)if(w!==y&&(!f||f.indexOf(w)<0))return!0;return!1}_getMapTouches(o){const f=[];for(const y of o)this._el.contains(y.target)&&f.push(y);return f}mergeHandlerResult(o,f,y,w,T){if(!y)return;s.e(o,y);const I={handlerName:w,originalEvent:y.originalEvent||T};y.zoomDelta!==void 0&&(f.zoom=I),y.panDelta!==void 0&&(f.drag=I),y.rollDelta!==void 0&&(f.roll=I),y.pitchDelta!==void 0&&(f.pitch=I),y.bearingDelta!==void 0&&(f.rotate=I)}_applyChanges(){const o={},f={},y={};for(const[w,T,I]of this._changes)w.panDelta&&(o.panDelta=(o.panDelta||new s.P(0,0))._add(w.panDelta)),w.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+w.pitchDelta),w.rollDelta&&(o.rollDelta=(o.rollDelta||0)+w.rollDelta),w.around!==void 0&&(o.around=w.around),w.pinchAround!==void 0&&(o.pinchAround=w.pinchAround),w.noInertia&&(o.noInertia=w.noInertia),s.e(f,T),s.e(y,I);this._updateMapTransform(o,f,y),this._changes=[]}_updateMapTransform(o,f,y){const w=this._map,T=w._getTransformForUpdate(),I=w.terrain;if(!(Ss(o)||I&&this._terrainMovement))return this._fireEvents(f,y,!0);w._stop(!0);let{panDelta:O,zoomDelta:V,bearingDelta:se,pitchDelta:oe,rollDelta:ge,around:de,pinchAround:Ee}=o;Ee!==void 0&&(de=Ee),de=de||w.transform.centerPoint,I&&!T.isPointOnMapSurface(de)&&(de=T.centerPoint);const je={panDelta:O,zoomDelta:V,rollDelta:ge,pitchDelta:oe,bearingDelta:se,around:de};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(de)&&(de=T.centerPoint);const Je=de.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?de.sub(O):de);this._handleMapControls({terrain:I,tr:T,deltasForHelper:je,preZoomAroundLoc:Je,combinedEventsInProgress:f,panDelta:O}),w._applyUpdatedTransform(T),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(f,y,!0)}_handleMapControls({terrain:o,tr:f,deltasForHelper:y,preZoomAroundLoc:w,combinedEventsInProgress:T,panDelta:I}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(y,f),o)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(y,f,w)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&I?f.setCenter(f.screenPointToLocation(f.centerPoint.sub(I))):O.handleMapControlsPan(y,f,w)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(y,f,w));O.handleMapControlsPan(y,f,w)}_fireEvents(o,f,y){const w=nn(this._eventsInProgress),T=nn(o),I={};for(const ge in o){const{originalEvent:de}=o[ge];this._eventsInProgress[ge]||(I[`${ge}start`]=de),this._eventsInProgress[ge]=o[ge]}!w&&T&&this._fireEvent("movestart",T.originalEvent);for(const ge in I)this._fireEvent(ge,I[ge]);T&&this._fireEvent("move",T.originalEvent);for(const ge in o){const{originalEvent:de}=o[ge];this._fireEvent(ge,de)}const O={};let V;for(const ge in this._eventsInProgress){const{handlerName:de,originalEvent:Ee}=this._eventsInProgress[ge];this._handlersById[de].isActive()||(delete this._eventsInProgress[ge],V=f[de]||Ee,O[`${ge}end`]=V)}for(const ge in O)this._fireEvent(ge,O[ge]);const se=nn(this._eventsInProgress),oe=(w||T)&&!se;if(oe&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ge=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ge.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ge)}if(y&&oe){this._updatingCamera=!0;const ge=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=Ee=>Ee!==0&&-this._bearingSnap<Ee&&Ee<this._bearingSnap;!ge||!ge.essential&&F.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:V})),de(this._map.getBearing())&&this._map.resetNorth()):(de(ge.bearing||this._map.getBearing())&&(ge.bearing=0),ge.freezeElevation=!0,this._map.easeTo(ge,{originalEvent:V})),this._updatingCamera=!1}}_fireEvent(o,f){this._map.fire(new s.l(o,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new is("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ls extends s.E{constructor(o,f,y){super(),this._renderFrameCallback=()=>{const w=Math.min((F.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=y.bearingSnap,this.cameraHelper=f,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(o,f){o.apply(this.transform),this.transform=o,this.cameraHelper=f}getCenter(){return new s.S(this.transform.center.lng,this.transform.center.lat)}setCenter(o,f){return this.jumpTo({center:o},f)}getCenterElevation(){return this.transform.elevation}setCenterElevation(o,f){return this.jumpTo({elevation:o},f),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(o){this._centerClampedToGround=o}panBy(o,f,y){return o=s.P.convert(o).mult(-1),this.panTo(this.transform.center,s.e({offset:o},f),y)}panTo(o,f,y){return this.easeTo(s.e({center:o},f),y)}getZoom(){return this.transform.zoom}setZoom(o,f){return this.jumpTo({zoom:o},f),this}zoomTo(o,f,y){return this.easeTo(s.e({zoom:o},f),y)}zoomIn(o,f){return this.zoomTo(this.getZoom()+1,o,f),this}zoomOut(o,f){return this.zoomTo(this.getZoom()-1,o,f),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(o,f){return o!=this.transform.fov&&(this.transform.setFov(o),this.fire(new s.l("movestart",f)).fire(new s.l("move",f)).fire(new s.l("moveend",f))),this}getBearing(){return this.transform.bearing}setBearing(o,f){return this.jumpTo({bearing:o},f),this}getPadding(){return this.transform.padding}setPadding(o,f){return this.jumpTo({padding:o},f),this}rotateTo(o,f,y){return this.easeTo(s.e({bearing:o},f),y)}resetNorth(o,f){return this.rotateTo(0,s.e({duration:1e3},o),f),this}resetNorthPitch(o,f){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},o),f),this}snapToNorth(o,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,f):this}getPitch(){return this.transform.pitch}setPitch(o,f){return this.jumpTo({pitch:o},f),this}getRoll(){return this.transform.roll}setRoll(o,f){return this.jumpTo({roll:o},f),this}cameraForBounds(o,f){o=Ct.convert(o).adjustAntiMeridian();const y=f&&f.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),y,f)}_cameraForBoxAndBearing(o,f,y,w){const T={top:0,bottom:0,right:0,left:0};if(typeof(w=s.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const se=w.padding;w.padding={top:se,bottom:se,right:se,left:se}}const I=s.e(T,w.padding);w.padding=I;const O=this.transform,V=new Ct(o,f);return this.cameraHelper.cameraForBoxAndBearing(w,I,V,y,O)}fitBounds(o,f,y){return this._fitInternal(this.cameraForBounds(o,f),f,y)}fitScreenCoordinates(o,f,y,w,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(o)),this.transform.screenPointToLocation(s.P.convert(f)),y,w),w,T)}_fitInternal(o,f,y){return o?(delete(f=s.e(o,f)).padding,f.linear?this.easeTo(f,y):this.flyTo(f,y)):this}jumpTo(o,f){this.stop();const y=this._getTransformForUpdate();let w=!1,T=!1,I=!1;const O=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,o);const V=y.zoom!==O;return"elevation"in o&&y.elevation!==+o.elevation&&y.setElevation(+o.elevation),"bearing"in o&&y.bearing!==+o.bearing&&(w=!0,y.setBearing(+o.bearing)),"pitch"in o&&y.pitch!==+o.pitch&&(T=!0,y.setPitch(+o.pitch)),"roll"in o&&y.roll!==+o.roll&&(I=!0,y.setRoll(+o.roll)),o.padding==null||y.isPaddingEqual(o.padding)||y.setPadding(o.padding),this._applyUpdatedTransform(y),this.fire(new s.l("movestart",f)).fire(new s.l("move",f)),V&&this.fire(new s.l("zoomstart",f)).fire(new s.l("zoom",f)).fire(new s.l("zoomend",f)),w&&this.fire(new s.l("rotatestart",f)).fire(new s.l("rotate",f)).fire(new s.l("rotateend",f)),T&&this.fire(new s.l("pitchstart",f)).fire(new s.l("pitch",f)).fire(new s.l("pitchend",f)),I&&this.fire(new s.l("rollstart",f)).fire(new s.l("roll",f)).fire(new s.l("rollend",f)),this.fire(new s.l("moveend",f))}calculateCameraOptionsFromTo(o,f,y,w=0){const T=s.a1.fromLngLat(o,f),I=s.a1.fromLngLat(y,w),O=I.x-T.x,V=I.y-T.y,se=I.z-T.z,oe=Math.hypot(O,V,se);if(oe===0)throw new Error("Can't calculate camera options with same From and To");const ge=Math.hypot(O,V),de=s.ak(this.transform.cameraToCenterDistance/oe/this.transform.tileSize),Ee=180*Math.atan2(O,-V)/Math.PI;let je=180*Math.acos(ge/oe)/Math.PI;return je=se<0?90-je:90+je,{center:I.toLngLat(),elevation:w,zoom:de,pitch:je,bearing:Ee}}calculateCameraOptionsFromCameraLngLatAltRotation(o,f,y,w,T){const I=this.transform.calculateCenterFromCameraLngLatAlt(o,f,y,w);return{center:I.center,elevation:I.elevation,zoom:I.zoom,bearing:y,pitch:w,roll:T}}easeTo(o,f){this._stop(!1,o.easeId),((o=s.e({offset:[0,0],duration:500,easing:s.co},o)).animate===!1||!o.essential&&F.prefersReducedMotion)&&(o.duration=0);const y=this._getTransformForUpdate(),w=this.getBearing(),T=y.pitch,I=y.roll,O="bearing"in o?this._normalizeBearing(o.bearing,w):w,V="pitch"in o?+o.pitch:T,se="roll"in o?this._normalizeBearing(o.roll,I):I,oe="padding"in o?o.padding:y.padding,ge=s.P.convert(o.offset);let de,Ee;o.around&&(de=s.S.convert(o.around),Ee=y.locationToScreenPoint(de));const je={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Je=this.cameraHelper.handleEaseTo(y,{bearing:O,pitch:V,roll:se,padding:oe,around:de,aroundPoint:Ee,offsetAsPoint:ge,offset:o.offset,zoom:o.zoom,center:o.center});return this._rotating=this._rotating||w!==O,this._pitching=this._pitching||V!==T,this._rolling=this._rolling||se!==I,this._padding=!y.isPaddingEqual(oe),this._zooming=this._zooming||Je.isZooming,this._easeId=o.easeId,this._prepareEase(f,o.noMoveStart,je),this.terrain&&this._prepareElevation(Je.elevationCenter),this._ease(tt=>{Je.easeFunc(tt),this.terrain&&!o.freezeElevation&&this._updateElevation(tt),this._applyUpdatedTransform(y),this._fireMoveEvents(f)},tt=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(f,tt)},o),this}_prepareEase(o,f,y={}){this._moving=!0,f||y.moving||this.fire(new s.l("movestart",o)),this._zooming&&!y.zooming&&this.fire(new s.l("zoomstart",o)),this._rotating&&!y.rotating&&this.fire(new s.l("rotatestart",o)),this._pitching&&!y.pitching&&this.fire(new s.l("pitchstart",o)),this._rolling&&!y.rolling&&this.fire(new s.l("rollstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const f=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&f!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(y-(f-(y*o+this._elevationStart))/(1-o)),this._elevationTarget=f}this.transform.setElevation(s.C.number(this._elevationStart,this._elevationTarget,o))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){if(!this.terrain&&o.elevation>=0&&o.pitch<=90)return{};const f=o.getCameraLngLat(),y=o.getCameraAltitude(),w=this.terrain?this.terrain.getElevationForLngLatZoom(f,o.zoom):0;if(y<w){const T=this.calculateCameraOptionsFromTo(f,w,o.center,o.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(o){const f=[];if(f.push(w=>this._elevateCameraIfInsideTerrain(w)),this.transformCameraUpdate&&f.push(w=>this.transformCameraUpdate(w)),!f.length)return;const y=o.clone();for(const w of f){const T=y.clone(),{center:I,zoom:O,roll:V,pitch:se,bearing:oe,elevation:ge}=w(T);I&&T.setCenter(I),ge!==void 0&&T.setElevation(ge),O!==void 0&&T.setZoom(O),V!==void 0&&T.setRoll(V),se!==void 0&&T.setPitch(se),oe!==void 0&&T.setBearing(oe),y.apply(T)}this.transform.apply(y)}_fireMoveEvents(o){this.fire(new s.l("move",o)),this._zooming&&this.fire(new s.l("zoom",o)),this._rotating&&this.fire(new s.l("rotate",o)),this._pitching&&this.fire(new s.l("pitch",o)),this._rolling&&this.fire(new s.l("roll",o))}_afterEase(o,f){if(this._easeId&&f&&this._easeId===f)return;delete this._easeId;const y=this._zooming,w=this._rotating,T=this._pitching,I=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new s.l("zoomend",o)),w&&this.fire(new s.l("rotateend",o)),T&&this.fire(new s.l("pitchend",o)),I&&this.fire(new s.l("rollend",o)),this.fire(new s.l("moveend",o))}flyTo(o,f){if(!o.essential&&F.prefersReducedMotion){const Xt=s.Q(o,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Xt,f)}this.stop(),o=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.co},o);const y=this._getTransformForUpdate(),w=y.bearing,T=y.pitch,I=y.roll,O=y.padding,V="bearing"in o?this._normalizeBearing(o.bearing,w):w,se="pitch"in o?+o.pitch:T,oe="roll"in o?this._normalizeBearing(o.roll,I):I,ge="padding"in o?o.padding:y.padding,de=s.P.convert(o.offset);let Ee=y.centerPoint.add(de);const je=y.screenPointToLocation(Ee),Je=this.cameraHelper.handleFlyTo(y,{bearing:V,pitch:se,roll:oe,padding:ge,locationAtOffset:je,offsetAsPoint:de,center:o.center,minZoom:o.minZoom,zoom:o.zoom});let tt=o.curve;const at=Math.max(y.width,y.height),ft=at/Je.scaleOfZoom,mt=Je.pixelPathLength;typeof Je.scaleOfMinZoom=="number"&&(tt=Math.sqrt(at/Je.scaleOfMinZoom/mt*2));const pt=tt*tt;function bt(Xt){const Sr=(ft*ft-at*at+(Xt?-1:1)*pt*pt*mt*mt)/(2*(Xt?ft:at)*pt*mt);return Math.log(Math.sqrt(Sr*Sr+1)-Sr)}function St(Xt){return(Math.exp(Xt)-Math.exp(-Xt))/2}function gt(Xt){return(Math.exp(Xt)+Math.exp(-Xt))/2}const kt=bt(!1);let tr=function(Xt){return gt(kt)/gt(kt+tt*Xt)},Vt=function(Xt){return at*((gt(kt)*(St(Sr=kt+tt*Xt)/gt(Sr))-St(kt))/pt)/mt;var Sr},Wt=(bt(!0)-kt)/tt;if(Math.abs(mt)<2e-6||!isFinite(Wt)){if(Math.abs(at-ft)<1e-6)return this.easeTo(o,f);const Xt=ft<at?-1:1;Wt=Math.abs(Math.log(ft/at))/tt,Vt=()=>0,tr=Sr=>Math.exp(Xt*tt*Sr)}return o.duration="duration"in o?+o.duration:1e3*Wt/("screenSpeed"in o?+o.screenSpeed/tt:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=w!==V,this._pitching=se!==T,this._rolling=oe!==I,this._padding=!y.isPaddingEqual(ge),this._prepareEase(f,!1),this.terrain&&this._prepareElevation(Je.targetCenter),this._ease(Xt=>{const Sr=Xt*Wt,Er=1/tr(Sr),gr=Vt(Sr);this._rotating&&y.setBearing(s.C.number(w,V,Xt)),this._pitching&&y.setPitch(s.C.number(T,se,Xt)),this._rolling&&y.setRoll(s.C.number(I,oe,Xt)),this._padding&&(y.interpolatePadding(O,ge,Xt),Ee=y.centerPoint.add(de)),Je.easeFunc(Xt,Er,gr,Ee),this.terrain&&!o.freezeElevation&&this._updateElevation(Xt),this._applyUpdatedTransform(y),this._fireMoveEvents(f)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(f)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,f){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const w=this._onEaseEnd;delete this._onEaseEnd,w.call(this,f)}return o||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(o,f,y){y.animate===!1||y.duration===0?(o(1),f()):(this._easeStart=F.now(),this._easeOptions=y,this._onEaseFrame=o,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,f){o=s.aO(o,-180,180);const y=Math.abs(o-f);return Math.abs(o-360-f)<y&&(o-=360),Math.abs(o+360-f)<y&&(o+=360),o}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(s.S.convert(o),this.transform.tileZoom):null}}const kr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Or{constructor(o=kr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=f=>{!f||f.sourceDataType!=="metadata"&&f.sourceDataType!=="visibility"&&f.dataType!=="style"&&f.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,f){const y=this._map._getUIString(`AttributionControl.${f}`);o.title=y,o.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const f=this._map.style.sourceCaches;for(const w in f){const T=f[w];if(T.used||T.usedForTerrain){const I=T.getSource();I.attribution&&o.indexOf(I.attribution)<0&&o.push(I.attribution)}}o=o.filter(w=>String(w).trim()),o.sort((w,T)=>w.length-T.length),o=o.filter((w,T)=>{for(let I=T+1;I<o.length;I++)if(o[I].indexOf(w)>=0)return!1;return!0});const y=o.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,o.length?(this._innerContainer.innerHTML=C.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Jn{constructor(o={}){this._updateCompact=()=>{const f=this._container.children;if(f.length){const y=f[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");const f=C.create("a","maplibregl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://maplibre.org/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Mi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const f=++this._id;return this._queue.push({callback:o,id:f,cancelled:!1}),f}remove(o){const f=this._currentlyRunning,y=f?this._queue.concat(f):this._queue;for(const w of y)if(w.id===o)return void(w.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const f=this._currentlyRunning=this._queue;this._queue=[];for(const y of f)if(!y.cancelled&&(y.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ds=s.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class es extends s.E{constructor(o){super(),this._lastTilesetChange=F.now(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=o._source.tileSize*2**this.deltaZoom,o.usedForTerrain=!0,o.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,f){this.sourceCache.update(o,f),this._renderableTilesKeys=[];const y={};for(const w of ei(o,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:f,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))y[w.key]=!0,this._renderableTilesKeys.push(w.key),this._tiles[w.key]||(w.terrainRttPosMatrix32f=new Float64Array(16),s.bZ(w.terrainRttPosMatrix32f,0,s.$,s.$,0,0,1),this._tiles[w.key]=new ye(w,this.tileSize),this._lastTilesetChange=F.now());for(const w in this._tiles)y[w]||delete this._tiles[w]}freeRtt(o){for(const f in this._tiles){const y=this._tiles[f];(!o||y.tileID.equals(o)||y.tileID.isChildOf(o)||o.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o,f){return f?this._getTerrainCoordsForTileRanges(o,f):this._getTerrainCoordsForRegularTile(o)}_getTerrainCoordsForRegularTile(o){const f={};for(const y of this._renderableTilesKeys){const w=this._tiles[y].tileID,T=o.clone(),I=s.ba();if(w.canonical.equals(o.canonical))s.bZ(I,0,s.$,s.$,0,0,1);else if(w.canonical.isChildOf(o.canonical)){const O=w.canonical.z-o.canonical.z,V=w.canonical.x-(w.canonical.x>>O<<O),se=w.canonical.y-(w.canonical.y>>O<<O),oe=s.$>>O;s.bZ(I,0,oe,oe,0,0,1),s.M(I,I,[-V*oe,-se*oe,0])}else{if(!o.canonical.isChildOf(w.canonical))continue;{const O=o.canonical.z-w.canonical.z,V=o.canonical.x-(o.canonical.x>>O<<O),se=o.canonical.y-(o.canonical.y>>O<<O),oe=s.$>>O;s.bZ(I,0,s.$,s.$,0,0,1),s.M(I,I,[V*oe,se*oe,0]),s.N(I,I,[1/2**O,1/2**O,0])}}T.terrainRttPosMatrix32f=new Float32Array(I),f[y]=T}return f}_getTerrainCoordsForTileRanges(o,f){const y={};for(const w of this._renderableTilesKeys){const T=this._tiles[w].tileID;if(!this._isWithinTileRanges(T,f))continue;const I=o.clone(),O=s.ba();if(T.canonical.z===o.canonical.z){const V=o.canonical.x-T.canonical.x,se=o.canonical.y-T.canonical.y;s.bZ(O,0,s.$,s.$,0,0,1),s.M(O,O,[V*s.$,se*s.$,0])}else if(T.canonical.z>o.canonical.z){const V=T.canonical.z-o.canonical.z,se=T.canonical.x-(T.canonical.x>>V<<V),oe=T.canonical.y-(T.canonical.y>>V<<V),ge=o.canonical.x-(T.canonical.x>>V),de=o.canonical.y-(T.canonical.y>>V),Ee=s.$>>V;s.bZ(O,0,Ee,Ee,0,0,1),s.M(O,O,[-se*Ee+ge*s.$,-oe*Ee+de*s.$,0])}else{const V=o.canonical.z-T.canonical.z,se=o.canonical.x-(o.canonical.x>>V<<V),oe=o.canonical.y-(o.canonical.y>>V<<V),ge=(o.canonical.x>>V)-T.canonical.x,de=(o.canonical.y>>V)-T.canonical.y,Ee=s.$<<V;s.bZ(O,0,Ee,Ee,0,0,1),s.M(O,O,[se*s.$+ge*Ee,oe*s.$+de*Ee,0])}I.terrainRttPosMatrix32f=new Float32Array(O),y[w]=I}return y}getSourceTile(o,f){const y=this.sourceCache._source;let w=o.overscaledZ-this.deltaZoom;if(w>y.maxzoom&&(w=y.maxzoom),w<y.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(w).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!T||!T.dem)&&f)for(;w>=y.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(o.scaledTo(w--).key);return T}anyTilesAfterTime(o=Date.now()){return this._lastTilesetChange>=o}_isWithinTileRanges(o,f){return f[o.canonical.z]&&o.canonical.x>=f[o.canonical.z].minTileX&&o.canonical.x<=f[o.canonical.z].maxTileX&&o.canonical.y>=f[o.canonical.z].minTileY&&o.canonical.y<=f[o.canonical.z].maxTileY}}class Es{constructor(o,f,y){this._meshCache={},this.painter=o,this.sourceCache=new es(f),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,f,y,w=s.$){var T;if(!(f>=0&&f<w&&y>=0&&y<w))return 0;const I=this.getTerrainData(o),O=(T=I.tile)===null||T===void 0?void 0:T.dem;if(!O)return 0;const V=s.cs([],[f/w*s.$,y/w*s.$],I.u_terrain_matrix),se=[V[0]*O.dim,V[1]*O.dim],oe=Math.floor(se[0]),ge=Math.floor(se[1]),de=se[0]-oe,Ee=se[1]-ge;return O.get(oe,ge)*(1-de)*(1-Ee)+O.get(oe+1,ge)*de*(1-Ee)+O.get(oe,ge+1)*(1-de)*Ee+O.get(oe+1,ge+1)*de*Ee}getElevationForLngLatZoom(o,f){if(!s.ct(f,o.wrap()))return 0;const{tileID:y,mercatorX:w,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(o,f);return this.getElevation(y,w%s.$,T%s.$,s.$)}getElevation(o,f,y,w=s.$){return this.getDEMElevation(o,f,y,w)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const w=this.painter.context,T=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(w,T,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(w,new s.R({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ag([])}const f=this.sourceCache.getSourceTile(o,!0);if(f&&f.dem&&(!f.demTexture||f.needsTerrainPrepare)){const w=this.painter.context;f.demTexture=this.painter.getTileTexture(f.dem.stride),f.demTexture?f.demTexture.update(f.dem.getPixels(),{premultiply:!1}):f.demTexture=new s.T(w,f.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),f.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),f.needsTerrainPrepare=!1}const y=f&&f+f.tileID.key+o.key;if(y&&!this._demMatrixCache[y]){const w=this.sourceCache.sourceCache._source.maxzoom;let T=o.canonical.z-f.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=w?T=o.canonical.z-w:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=o.canonical.x-(o.canonical.x>>T<<T),O=o.canonical.y-(o.canonical.y>>T<<T),V=s.cu(new Float64Array(16),[1/(s.$<<T),1/(s.$<<T),0]);s.M(V,V,[I*s.$,O*s.$,0]),this._demMatrixCache[o.key]={matrix:V,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:f&&f.dem&&f.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:f&&f.dem&&f.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(f&&f.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:f}}getFramebuffer(o){const f=this.painter,y=f.width/devicePixelRatio,w=f.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(f.context,{width:y,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(f.context,{width:y,height:w,data:null},f.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(f.context.gl.NEAREST,f.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=f.context.createFramebuffer(y,w,!0,!1),this._fbo.depthAttachment.set(f.context.createRenderbuffer(f.context.gl.DEPTH_COMPONENT16,y,w))),this._fbo.colorAttachment.set(o==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const f=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,I=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,I+=4)f[I+0]=255&O,f[I+1]=255&T,f[I+2]=O>>8<<4|T>>8,f[I+3]=0;const y=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(f.buffer)),w=new s.T(o,y,o.gl.RGBA,{premultiply:!1});return w.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);const f=new Uint8Array(4),y=this.painter.context,w=y.gl,T=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),w.readPixels(T,O-I-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),y.bindFramebuffer.set(null);const V=f[0]+(f[2]>>4<<8),se=f[1]+((15&f[2])<<8),oe=this.coordsIndex[255-f[3]],ge=oe&&this.sourceCache.getTileByID(oe);if(!ge)return null;const de=this._coordsTextureSize,Ee=(1<<ge.tileID.canonical.z)*de;return new s.a1((ge.tileID.canonical.x*de+V)/Ee+ge.tileID.wrap,(ge.tileID.canonical.y*de+se)/Ee,this.getElevation(ge.tileID,V,se,de))}depthAtPoint(o){const f=new Uint8Array(4),y=this.painter.context,w=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),w.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,w.RGBA,w.UNSIGNED_BYTE,f),y.bindFramebuffer.set(null),(f[0]/16777216+f[1]/65536+f[2]/256+f[3])/256}getTerrainMesh(o){var f;const y=((f=this.painter.style.projection)===null||f===void 0?void 0:f.transitionState)>0,w=y&&o.canonical.y===0,T=y&&o.canonical.y===(1<<o.canonical.z)-1,I=`m_${w?"n":""}_${T?"s":""}`;if(this._meshCache[I])return this._meshCache[I];const O=this.painter.context,V=new s.cv,se=new s.aN,oe=this.meshSize,ge=s.$/oe,de=oe*oe;for(let gt=0;gt<=oe;gt++)for(let kt=0;kt<=oe;kt++)V.emplaceBack(kt*ge,gt*ge,0);for(let gt=0;gt<de;gt+=oe+1)for(let kt=0;kt<oe;kt++)se.emplaceBack(kt+gt,oe+kt+gt+1,oe+kt+gt+2),se.emplaceBack(kt+gt,oe+kt+gt+2,kt+gt+1);const Ee=V.length,je=Ee+(oe+1),Je=(oe+1)*oe,tt=w?s.bh:0,at=w?0:1,ft=T?s.bi:s.$,mt=T?0:1;for(let gt=0;gt<=oe;gt++)V.emplaceBack(gt*ge,tt,at);for(let gt=0;gt<=oe;gt++)V.emplaceBack(gt*ge,ft,mt);for(let gt=0;gt<oe;gt++)se.emplaceBack(Je+gt,je+gt,je+gt+1),se.emplaceBack(Je+gt,je+gt+1,Je+gt+1),se.emplaceBack(0+gt,Ee+gt+1,Ee+gt),se.emplaceBack(0+gt,0+gt+1,Ee+gt+1);const pt=V.length,bt=pt+2*(oe+1);for(const gt of[0,1])for(let kt=0;kt<=oe;kt++)for(const tr of[0,1])V.emplaceBack(gt*s.$,kt*ge,tr);for(let gt=0;gt<2*oe;gt+=2)se.emplaceBack(pt+gt,pt+gt+1,pt+gt+3),se.emplaceBack(pt+gt,pt+gt+3,pt+gt+2),se.emplaceBack(bt+gt,bt+gt+3,bt+gt+1),se.emplaceBack(bt+gt,bt+gt+2,bt+gt+3);const St=new Eu(O.createVertexBuffer(V,Ds.members),O.createIndexBuffer(se),s.aM.simpleSegment(0,0,V.length,se.length));return this._meshCache[I]=St,St}getMeshFrameDelta(o){return 2*Math.PI*s.bu/Math.pow(2,Math.max(o,0))/5}getMinTileElevationForLngLatZoom(o,f){var y;const{tileID:w}=this._getOverscaledTileIDFromLngLatZoom(o,f);return(y=this.getMinMaxElevation(w).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(o){const f=this.getTerrainData(o).tile,y={minElevation:null,maxElevation:null};return f&&f.dem&&(y.minElevation=f.dem.min*this.exaggeration,y.maxElevation=f.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(o,f){const y=s.a1.fromLngLat(o.wrap()),w=(1<<f)*s.$,T=y.x*w,I=y.y*w,O=Math.floor(T/s.$),V=Math.floor(I/s.$);return{tileID:new s.Z(f,0,f,O,V),mercatorX:T,mercatorY:I}}}class cs{constructor(o,f,y){this._context=o,this._size=f,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const f=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),f.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),f.colorAttachment.set(y.texture),{id:o,fbo:f,texture:y,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(f=>o.id!==f),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const f of this._recentlyUsed)if(!this._objects[f].inUse)return this._objects[f];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(o=>!o.inUse)===!1}}const Sn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class $s{constructor(o,f){this.painter=o,this.terrain=f,this.pool=new cs(o.context,30,f.sourceCache.tileSize*f.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,f){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(y=>!o._layers[y].isHidden(f)),this._coordsAscending={};for(const y in o.sourceCaches){this._coordsAscending[y]={};const w=o.sourceCaches[y].getVisibleCoordinates(),T=o.sourceCaches[y].getSource(),I=T instanceof ar?T.terrainTileRanges:null;for(const O of w){const V=this.terrain.sourceCache.getTerrainCoords(O,I);for(const se in V)this._coordsAscending[y][se]||(this._coordsAscending[y][se]=[]),this._coordsAscending[y][se].push(V[se])}}this._coordsAscendingStr={};for(const y of o._order){const w=o._layers[y],T=w.source;if(Sn[w.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(const I in this._coordsAscending[T])this._coordsAscendingStr[T][I]=this._coordsAscending[T][I].map(O=>O.key).sort().join()}}for(const y of this._renderableTiles)for(const w in this._coordsAscendingStr){const T=this._coordsAscendingStr[w][y.tileID.key];T&&T!==y.rttCoords[w]&&(y.rtt=[])}}renderLayer(o,f){if(o.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},f),{isRenderingToTexture:!0}),w=o.type,T=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Sn[w]&&(this._prevType&&Sn[this._prevType]||this._stacks.push([]),this._prevType=w,this._stacks[this._stacks.length-1].push(o.id),!I))return!0;if(Sn[this._prevType]||Sn[w]&&I){this._prevType=w;const O=this._stacks.length-1,V=this._stacks[O]||[];for(const se of this._renderableTiles){if(this.pool.isFull()&&(vh(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(se),se.rtt[O]){const ge=this.pool.getObjectForId(se.rtt[O].id);if(ge.stamp===se.rtt[O].stamp){this.pool.useObject(ge);continue}}const oe=this.pool.getOrCreateFreeObject();this.pool.useObject(oe),this.pool.stampObject(oe),se.rtt[O]={id:oe.id,stamp:oe.stamp},T.context.bindFramebuffer.set(oe.fbo.framebuffer),T.context.clear({color:s.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let ge=0;ge<V.length;ge++){const de=T.style._layers[V[ge]],Ee=de.source?this._coordsAscending[de.source][se.tileID.key]:[se.tileID];T.context.viewport.set([0,0,oe.fbo.width,oe.fbo.height]),T._renderTileClippingMasks(de,Ee,!0),T.renderLayer(T,T.style.sourceCaches[de.source],de,Ee,y),de.source&&(se.rttCoords[de.source]=this._coordsAscendingStr[de.source][se.tileID.key])}}return vh(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),Sn[w]}return!1}}const mo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ua=p,Ln={hash:!1,interactive:!0,bearingSnap:7,attributionControl:kr,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},vi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class un{constructor(o,f,y=!1){this.mousedown=T=>{this.startMove(T,C.mousePos(this.element,T)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,C.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=f;const w=new Jt;this._rotatePitchHandler=new Oe({clickTolerance:3,move:(T,I)=>{const O=f.getBoundingClientRect(),V=new s.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:s.cn(new s.P(T.x,I.y),I,V),pitchDelta:y?-.5*(I.y-T.y):void 0}},moveStateManager:w,enable:!0,assignEvents:()=>{}}),this.map=o,C.addEventListener(f,"mousedown",this.mousedown),C.addEventListener(f,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(f,"touchcancel",this.reset)}startMove(o,f){this._rotatePitchHandler.dragStart(o,f),C.disableDrag()}move(o,f){const y=this.map,{bearingDelta:w,pitchDelta:T}=this._rotatePitchHandler.dragMove(o,f)||{};w&&y.setBearing(y.getBearing()+w),T&&y.setPitch(y.getPitch()+T)}off(){const o=this.element;C.removeEventListener(o,"mousedown",this.mousedown),C.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let ps;function wn(S,o,f,y=!1){if(y||!f.getCoveringTilesDetailsProvider().allowWorldCopies())return S?.wrap();const w=new s.S(S.lng,S.lat);if(S=new s.S(S.lng,S.lat),o){const T=new s.S(S.lng-360,S.lat),I=new s.S(S.lng+360,S.lat),O=f.locationToScreenPoint(S).distSqr(o);f.locationToScreenPoint(T).distSqr(o)<O?S=T:f.locationToScreenPoint(I).distSqr(o)<O&&(S=I)}for(;Math.abs(S.lng-f.center.lng)>180;){const T=f.locationToScreenPoint(S);if(T.x>=0&&T.y>=0&&T.x<=f.width&&T.y<=f.height)break;S.lng>f.center.lng?S.lng-=360:S.lng+=360}return S.lng!==w.lng&&f.isPointOnMapSurface(f.locationToScreenPoint(S))?S:w}const ra={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function js(S,o,f){const y=S.classList;for(const w in ra)y.remove(`maplibregl-${f}-anchor-${w}`);y.add(`maplibregl-${f}-anchor-${o}`)}class Ro extends s.E{constructor(o){if(super(),this._onKeyPress=f=>{const y=f.code,w=f.charCode||f.keyCode;y!=="Space"&&y!=="Enter"&&w!==32&&w!==13||this.togglePopup()},this._onMapClick=f=>{const y=f.originalEvent.target,w=this._element;this._popup&&(y===w||w.contains(y))&&this.togglePopup()},this._update=f=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(f?.type==="terrain"||f?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=wn(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||f&&f.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${ra[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${w}`),F.frameAsync(new AbortController).then(()=>{this._updateOpacity(f&&f.type==="moveend")}).catch(()=>{})},this._onMove=f=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=f.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=f.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=f=>{this._element.contains(f.originalEvent.target)&&(f.preventDefault(),this._positionDelta=f.point.sub(this._pos).add(this._offset),this._pointerdownPos=f.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment!=="auto"?o.pitchAlignment:this._rotationAlignment,this.setOpacity(o?.opacity,o?.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=s.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");const f=C.createNS("http://www.w3.org/2000/svg","svg"),y=41,w=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${y}px`),f.setAttributeNS(null,"width",`${w}px`),f.setAttributeNS(null,"viewBox",`0 0 ${w} ${y}`);const T=C.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const I=C.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const O=C.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const at of V){const ft=C.createNS("http://www.w3.org/2000/svg","ellipse");ft.setAttributeNS(null,"opacity","0.04"),ft.setAttributeNS(null,"cx","10.5"),ft.setAttributeNS(null,"cy","5.80029008"),ft.setAttributeNS(null,"rx",at.rx),ft.setAttributeNS(null,"ry",at.ry),O.appendChild(ft)}const se=C.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const oe=C.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(oe);const ge=C.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"fill","#000000");const de=C.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ge.appendChild(de);const Ee=C.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ee.setAttributeNS(null,"fill","#FFFFFF");const je=C.createNS("http://www.w3.org/2000/svg","g");je.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Je=C.createNS("http://www.w3.org/2000/svg","circle");Je.setAttributeNS(null,"fill","#000000"),Je.setAttributeNS(null,"opacity","0.25"),Je.setAttributeNS(null,"cx","5.5"),Je.setAttributeNS(null,"cy","5.5"),Je.setAttributeNS(null,"r","5.4999962");const tt=C.createNS("http://www.w3.org/2000/svg","circle");tt.setAttributeNS(null,"fill","#FFFFFF"),tt.setAttributeNS(null,"cx","5.5"),tt.setAttributeNS(null,"cy","5.5"),tt.setAttributeNS(null,"r","5.4999962"),je.appendChild(Je),je.appendChild(tt),I.appendChild(O),I.appendChild(se),I.appendChild(ge),I.appendChild(Ee),I.appendChild(je),f.appendChild(I),f.setAttributeNS(null,"height",y*this._scale+"px"),f.setAttributeNS(null,"width",w*this._scale+"px"),this._element.appendChild(f),this._offset=s.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),js(this._element,this._anchor,"marker"),o&&o.className)for(const f of o.className.split(" "))this._element.classList.add(f);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),o.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=s.S.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const w=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var f,y;const w=(f=this._map)===null||f===void 0?void 0:f.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!w||T){const Ee=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ee&&(this._element.style.opacity=Ee))}if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const I=this._map,O=I.terrain.depthAtPoint(this._pos),V=I.terrain.getElevationForLngLatZoom(this._lngLat,I.transform.tileZoom);if(I.transform.lngLatToCameraDepth(this._lngLat,V)-O<.006)return void(this._element.style.opacity=this._opacity);const se=-this._offset.y/I.transform.pixelsPerMeter,oe=Math.sin(I.getPitch()*Math.PI/180)*se,ge=I.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),de=I.transform.lngLatToCameraDepth(this._lngLat,V+oe)-ge>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&de&&this._popup.remove(),this._element.style.opacity=de?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=s.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&o!=="auto"?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,f){return(this._opacity===void 0||o===void 0&&f===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),o!==void 0&&(this._opacity=o),f!==void 0&&(this._opacityWhenCovered=f),this._map&&this._updateOpacity(!0),this}}const ll={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ns=0,ac=!1;const Rh={maxWidth:100,unit:"metric"};function Qu(S,o,f){const y=f&&f.maxWidth||100,w=S._container.clientHeight/2,T=S._container.clientWidth/2,I=S.unproject([T-y/2,w]),O=S.unproject([T+y/2,w]),V=Math.round(S.project(O).x-S.project(I).x),se=Math.min(y,V,S._container.clientWidth),oe=I.distanceTo(O);if(f&&f.unit==="imperial"){const ge=3.2808*oe;ge>5280?Dl(o,se,ge/5280,S._getUIString("ScaleControl.Miles")):Dl(o,se,ge,S._getUIString("ScaleControl.Feet"))}else f&&f.unit==="nautical"?Dl(o,se,oe/1852,S._getUIString("ScaleControl.NauticalMiles")):oe>=1e3?Dl(o,se,oe/1e3,S._getUIString("ScaleControl.Kilometers")):Dl(o,se,oe,S._getUIString("ScaleControl.Meters"))}function Dl(S,o,f,y){const w=function(T){const I=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/I;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(V){const se=Math.pow(10,Math.ceil(-Math.log(V)/Math.LN10));return Math.round(V*se)/se}(O),I*O}(f);S.style.width=o*(w/f)+"px",S.innerHTML=`${w}&nbsp;${y}`}const JA={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ed=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hu(S){if(S){if(typeof S=="number"){const o=Math.round(Math.abs(S)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,S),"top-left":new s.P(o,o),"top-right":new s.P(-o,o),bottom:new s.P(0,-S),"bottom-left":new s.P(o,-o),"bottom-right":new s.P(-o,-o),left:new s.P(S,0),right:new s.P(-S,0)}}if(S instanceof s.P||Array.isArray(S)){const o=s.P.convert(S);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:s.P.convert(S.center||[0,0]),top:s.P.convert(S.top||[0,0]),"top-left":s.P.convert(S["top-left"]||[0,0]),"top-right":s.P.convert(S["top-right"]||[0,0]),bottom:s.P.convert(S.bottom||[0,0]),"bottom-left":s.P.convert(S["bottom-left"]||[0,0]),"bottom-right":s.P.convert(S["bottom-right"]||[0,0]),left:s.P.convert(S.left||[0,0]),right:s.P.convert(S.right||[0,0])}}return Hu(new s.P(0,0))}const oc=p;c.AJAXError=s.cz,c.Event=s.l,c.Evented=s.E,c.LngLat=s.S,c.MercatorCoordinate=s.a1,c.Point=s.P,c.addProtocol=s.cA,c.config=s.a,c.removeProtocol=s.cB,c.AttributionControl=Or,c.BoxZoomHandler=R,c.CanvasSource=Lr,c.CooperativeGesturesHandler=Vi,c.DoubleClickZoomHandler=ai,c.DragPanHandler=Hi,c.DragRotateHandler=qi,c.EdgeInsets=Ha,c.FullscreenControl=class extends s.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var o;let f=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((o=f?.shadowRoot)===null||o===void 0)&&o.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const S=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=jr,c.GeolocateControl=class extends s.E{constructor(S){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(o),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",o)),this._finish()}},this._updateCamera=o=>{const f=new s.S(o.coords.longitude,o.coords.latitude),y=o.coords.accuracy,w=this._map.getBearing(),T=s.e({bearing:w},this.options.fitBoundsOptions),I=Ct.fromLngLat(f,y);this._map.fitBounds(I,T,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const f=new s.S(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=o.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=o=>{if(this._map){if(o.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(o.code===3&&ac)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(o===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}else{const f=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ro({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ro({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",f=>{const y=f?.[0]instanceof ResizeObserverEntry;f.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},ll,S)}onAdd(S){return this._map=S,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(o=!1){if(ps!==void 0&&!o)return ps;if(window.navigator.permissions===void 0)return ps=!!window.navigator.geolocation,ps;try{ps=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ps=!!window.navigator.geolocation}return ps})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,ns=0,ac=!1}_isOutOfMapMaxBounds(S){const o=this._map.getMaxBounds(),f=S.coords;return o&&(f.longitude<o.getWest()||f.longitude>o.getEast()||f.latitude<o.getSouth()||f.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const S=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&S))return;const o=this._map.project(S),f=this._map.unproject([o.x+100,o.y]),y=S.distanceTo(f)/100,w=2*this._accuracy/y;this._circleElement.style.width=`${w.toFixed(2)}px`,this._circleElement.style.height=`${w.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ns--,ac=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ns++,ns>1?(S={maximumAge:6e5,timeout:0},ac=!0):(S=this.options.positionOptions,ac=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;const o=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(o!=="mercator"&&o?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=C.create("button","maplibregl-ctrl-globe",this._container),C.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=Ks,c.ImageSource=ar,c.KeyboardHandler=Ui,c.LngLatBounds=Ct,c.LogoControl=Jn,c.Map=class extends ls{constructor(S){var o,f;s.cw.mark(s.cx.create);const y=Object.assign(Object.assign(Object.assign({},Ln),S),{canvasContextAttributes:Object.assign(Object.assign({},Ln.canvasContextAttributes),S.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const w=new Va,T=new el;if(y.minZoom!==void 0&&w.setMinZoom(y.minZoom),y.maxZoom!==void 0&&w.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&w.setMinPitch(y.minPitch),y.maxPitch!==void 0&&w.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&w.setRenderWorldCopies(y.renderWorldCopies),super(w,T,{bearingSnap:y.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Mi,this._controls=[],this._mapId=s.a7(),this._contextLost=O=>{O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},mo),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ee.addThrottleControl(()=>this.isMoving()),this._requestManager=new G(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let O=!1;const V=Ml(se=>{this._trackResize&&!this._removed&&(this.resize(se),this.redraw())},50);this._resizeObserver=new ResizeObserver(se=>{O?V(se):O=!0}),this._resizeObserver.observe(this._container)}this.handlers=new jn(this,y),this._hash=y.hash&&new Ks(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,s.e({},y.fitBoundsOptions,{duration:0}))));const I=typeof y.style=="string"||((f=(o=y.style)===null||o===void 0?void 0:o.projection)===null||f===void 0?void 0:f.type)!=="globe";this.resize(null,I),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Or(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Jn,y.logoPosition),this.on("style.load",()=>{if(I||this._resizeTransform(),this.transform.unmodified){const O=s.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}}),this.on("data",O=>{this._update(O.dataType==="style"),this.fire(new s.l(`${O.dataType}data`,O))}),this.on("dataloading",O=>{this.fire(new s.l(`${O.dataType}dataloading`,O))}),this.on("dataabort",O=>{this.fire(new s.l("sourcedataabort",O))})}_getMapId(){return this._mapId}setGlobalStateProperty(S,o){return this.style.setGlobalStateProperty(S,o),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,o){if(o===void 0&&(o=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=S.onAdd(this);this._controls.push(S);const y=this._controlPositions[o];return o.indexOf("bottom")!==-1?y.insertBefore(f,y.firstChild):y.appendChild(f),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(S);return o>-1&&this._controls.splice(o,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}coveringTiles(S){return ei(this.transform,S)}calculateCameraOptionsFromTo(S,o,f,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLatZoom(f,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,o,f,y)}resize(S,o=!0){const[f,y]=this._containerDimensions(),w=this._getClampedPixelRatio(f,y);if(this._resizeCanvas(f,y,w),this.painter.resize(f,y,w),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const O=this._getClampedPixelRatio(f,y);this._resizeCanvas(f,y,O),this.painter.resize(f,y,O)}this._resizeTransform(o);const T=!this._moving;return T&&(this.stop(),this.fire(new s.l("movestart",S)).fire(new s.l("move",S))),this.fire(new s.l("resize",S)),T&&this.fire(new s.l("moveend",S)),this}_resizeTransform(S=!0){var o;const[f,y]=this._containerDimensions();this.transform.resize(f,y,S),(o=this._requestedCameraState)===null||o===void 0||o.resize(f,y,S)}_getClampedPixelRatio(S,o){const{0:f,1:y}=this._maxCanvasSize,w=this.getPixelRatio(),T=S*w,I=o*w;return Math.min(T>f?f/T:1,I>y?y/I:1)*w}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Ct.convert(S)),this._update()}setMinZoom(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.setMinZoom(S),this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S??22)>=this.transform.minZoom)return this.transform.setMaxZoom(S),this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}project(S){return this.transform.locationToScreenPoint(s.S.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(s.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,o,f){if(S==="mouseenter"||S==="mouseover"){let y=!1;return{layers:o,listener:f,delegates:{mousemove:T=>{const I=o.filter(V=>this.getLayer(V)),O=I.length!==0?this.queryRenderedFeatures(T.point,{layers:I}):[];O.length?y||(y=!0,f.call(this,new Xa(S,this,T.originalEvent,{features:O}))):y=!1},mouseout:()=>{y=!1}}}}if(S==="mouseleave"||S==="mouseout"){let y=!1;return{layers:o,listener:f,delegates:{mousemove:I=>{const O=o.filter(V=>this.getLayer(V));(O.length!==0?this.queryRenderedFeatures(I.point,{layers:O}):[]).length?y=!0:y&&(y=!1,f.call(this,new Xa(S,this,I.originalEvent)))},mouseout:I=>{y&&(y=!1,f.call(this,new Xa(S,this,I.originalEvent)))}}}}{const y=w=>{const T=o.filter(O=>this.getLayer(O)),I=T.length!==0?this.queryRenderedFeatures(w.point,{layers:T}):[];I.length&&(w.features=I,f.call(this,w),delete w.features)};return{layers:o,listener:f,delegates:{[S]:y}}}}_saveDelegatedListener(S,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(o)}_removeDelegatedListener(S,o,f){if(!this._delegatedListeners||!this._delegatedListeners[S])return;const y=this._delegatedListeners[S];for(let w=0;w<y.length;w++){const T=y[w];if(T.listener===f&&T.layers.length===o.length&&T.layers.every(I=>o.includes(I))){for(const I in T.delegates)this.off(I,T.delegates[I]);return void y.splice(w,1)}}}on(S,o,f){if(f===void 0)return super.on(S,o);const y=typeof o=="string"?[o]:o,w=this._createDelegatedListener(S,y,f);this._saveDelegatedListener(S,w);for(const T in w.delegates)this.on(T,w.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(S,y,f)}}}once(S,o,f){if(f===void 0)return super.once(S,o);const y=typeof o=="string"?[o]:o,w=this._createDelegatedListener(S,y,f);for(const T in w.delegates){const I=w.delegates[T];w.delegates[T]=(...O)=>{this._removeDelegatedListener(S,y,f),I(...O)}}this._saveDelegatedListener(S,w);for(const T in w.delegates)this.once(T,w.delegates[T]);return this}off(S,o,f){return f===void 0?super.off(S,o):(this._removeDelegatedListener(S,typeof o=="string"?[o]:o,f),this)}queryRenderedFeatures(S,o){if(!this.style)return[];let f;const y=S instanceof s.P||Array.isArray(S),w=y?S:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(y?{}:S)||{},w instanceof s.P||typeof w[0]=="number")f=[s.P.convert(w)];else{const T=s.P.convert(w[0]),I=s.P.convert(w[1]);f=[T,new s.P(I.x,T.y),I,new s.P(T.x,I.y),T]}return this.style.queryRenderedFeatures(f,o,this.transform)}querySourceFeatures(S,o){return this.style.querySourceFeatures(S,o)}setStyle(S,o){return(o=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(S,o))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){const o=this._locale[S];if(o==null)throw new Error(`Missing UI string '${S}'`);return o}_updateStyle(S,o){var f,y;if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(S,o));const w=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new Ms(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,o,w):this.style.loadJSON(S,o,w),this):((y=(f=this.style)===null||f===void 0?void 0:f.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ms(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,o){if(typeof S=="string"){const f=this._requestManager.transformRequest(S,"Style");s.j(f,new AbortController).then(y=>{this._updateDiff(y.data,o)}).catch(y=>{y&&this.fire(new s.k(y))})}else typeof S=="object"&&this._updateDiff(S,o)}_updateDiff(S,o){try{this.style.setState(S,o)&&this._update(!0)}catch(f){s.w(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(S,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(S,o){return this._lazyInitEmptyStyle(),this.style.addSource(S,o),this._update(!0)}isSourceLoaded(S){const o=this.style&&this.style.sourceCaches[S];if(o!==void 0)return o.loaded();this.fire(new s.k(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){const o=this.style.sourceCaches[S.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&o.reload();for(const f in this.style._layers){const y=this.style._layers[f];y.type==="hillshade"&&y.source===S.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===S.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Es(this.painter,o,S),this.painter.renderToTexture=new $s(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=f=>{var y;f.dataType==="style"?this.terrain.sourceCache.freeRtt():f.dataType==="source"&&f.tile&&(f.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=f.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(f.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:S})),this}getTerrain(){var S,o;return(o=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&o!==void 0?o:null}areTilesLoaded(){const S=this.style&&this.style.sourceCaches;for(const o in S){const f=S[o]._tiles;for(const y in f){const w=f[y];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,o,f){if(f){const y=this.getSource(f);if(!y)throw new Error(`There is no source with ID "${f}", cannot set LOD parameters`);y.calculateTileZoom=Mr(Math.max(1,S),Math.max(1,o))}else for(const y in this.style.sourceCaches)this.style.sourceCaches[y].getSource().calculateTileZoom=Mr(Math.max(1,S),Math.max(1,o));return this._update(!0),this}refreshTiles(S,o){const f=this.style.sourceCaches[S];if(!f)throw new Error(`There is no source cache with ID "${S}", cannot refresh tile`);o===void 0?f.reload(!0):f.refreshTiles(o.map(y=>new s.a4(y.z,y.x,y.y)))}addImage(S,o,f={}){const{pixelRatio:y=1,sdf:w=!1,stretchX:T,stretchY:I,content:O,textFitWidth:V,textFitHeight:se}=f;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||s.b(o))){if(o.width===void 0||o.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:oe,height:ge,data:de}=o,Ee=o;return this.style.addImage(S,{data:new s.R({width:oe,height:ge},new Uint8Array(de)),pixelRatio:y,stretchX:T,stretchY:I,content:O,textFitWidth:V,textFitHeight:se,sdf:w,version:0,userImage:Ee}),Ee.onAdd&&Ee.onAdd(this,S),this}}{const{width:oe,height:ge,data:de}=F.getImageData(o);this.style.addImage(S,{data:new s.R({width:oe,height:ge},de),pixelRatio:y,stretchX:T,stretchY:I,content:O,textFitWidth:V,textFitHeight:se,sdf:w,version:0})}}updateImage(S,o){const f=this.style.getImage(S);if(!f)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=o instanceof HTMLImageElement||s.b(o)?F.getImageData(o):o,{width:w,height:T,data:I}=y;if(w===void 0||T===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==f.data.width||T!==f.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(o instanceof HTMLImageElement||s.b(o));return f.data.replace(I,O),this.style.updateImage(S,f),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return ee.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,o){return this._lazyInitEmptyStyle(),this.style.addLayer(S,o),this._update(!0)}moveLayer(S,o){return this.style.moveLayer(S,o),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,o,f){return this.style.setLayerZoomRange(S,o,f),this._update(!0)}setFilter(S,o,f={}){return this.style.setFilter(S,o,f),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,o,f,y={}){return this.style.setPaintProperty(S,o,f,y),this._update(!0)}getPaintProperty(S,o){return this.style.getPaintProperty(S,o)}setLayoutProperty(S,o,f,y={}){return this.style.setLayoutProperty(S,o,f,y),this._update(!0)}getLayoutProperty(S,o){return this.style.getLayoutProperty(S,o)}setGlyphs(S,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,o,f={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,o,f,y=>{y||this._update(!0)}),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,o,f=>{f||this._update(!0)}),this}setLight(S,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,o={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,o),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,o){return this.style.setFeatureState(S,o),this._update()}removeFeatureState(S,o){return this.style.removeFeatureState(S,o),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,o=0;return this._container&&(S=this._container.clientWidth||400,o=this._container.clientHeight||300),[S,o]}_setupContainer(){const S=this._container;S.classList.add("maplibregl-map");const o=this._canvasContainer=C.create("div","maplibregl-canvas-container",S);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const f=this._containerDimensions(),y=this._getClampedPixelRatio(f[0],f[1]);this._resizeCanvas(f[0],f[1],y);const w=this._controlContainer=C.create("div","maplibregl-control-container",S),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{T[I]=C.create("div",`maplibregl-ctrl-${I} `,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,o,f){this._canvas.width=Math.floor(f*S),this._canvas.height=Math.floor(f*o),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let o=null;this._canvas.addEventListener("webglcontextcreationerror",y=>{o={requestedAttributes:S},y&&(o.statusMessage=y.statusMessage,o.type=y.type)},{once:!0});let f=null;if(f=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!f){const y="Failed to initialize WebGL";throw o?(o.message=y,new Error(JSON.stringify(o))):new Error(y)}this.painter=new vA(f,this.transform),L.testSupport(f)}migrateProjection(S,o){super.migrateProjection(S,o),this.painter.transform=S,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var o,f,y,w,T;const I=this._idleTriggered?this._fadeDuration:0,O=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let V=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ge=this.transform.zoom,de=F.now();this.style.zoomHistory.update(ge,de);const Ee=new s.F(ge,{now:de,fadeDuration:I,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),je=Ee.crossFadingFactor();je===1&&je===this._crossFadingFactor||(V=!0,this._crossFadingFactor=je),this.style.update(Ee)}const se=((f=this.style.projection)===null||f===void 0?void 0:f.transitionState)>0!==O;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((w=this.style.projection)===null||w===void 0?void 0:w.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||se)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,I,this._crossSourceCollisions,se),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cw.mark(s.cx.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||V)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const oe=this._sourcesDirty||this._styleDirty||this._placementDirty;return oe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||oe||(this._fullyLoaded=!0,s.cw.mark(s.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(const f of this._controls)f.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ee.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o?.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cw.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,F.frame(this._frameRequest,S=>{s.cw.frame(S),this._frameRequest=null;try{this._render(S)}catch(o){if(!s.cy(o)&&!function(f){return f.message===El}(o))throw o}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return Ua}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},c.MapMouseEvent=Xa,c.MapTouchEvent=Po,c.MapWheelEvent=sc,c.Marker=Ro,c.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{const o=this._map.getZoom(),f=o===this._map.getMaxZoom(),y=o===this._map.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(o,f)=>{const y=this._map._getUIString(`NavigationControl.${f}`);o.title=y,o.setAttribute("aria-label",y)},this.options=s.e({},vi,S),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new un(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,o){const f=C.create("button",S,this._container);return f.type="button",f.addEventListener("click",o),f}},c.Popup=class extends s.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=wn(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!o)return;const f=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const w=Hu(this.options.offset);if(!y){const I=this._container.offsetWidth,O=this._container.offsetHeight;let V;V=f.y+w.bottom.y<O?["top"]:f.y>this._map.transform.height-O?["bottom"]:[],f.x<I/2?V.push("left"):f.x>this._map.transform.width-I/2&&V.push("right"),y=V.length===0?"bottom":V.join("-")}let T=f.add(w[y]);this.options.subpixelPositioning||(T=T.round()),C.setTransform(this._container,`${ra[y]} translate(${T.x}px,${T.y}px)`),js(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(JA),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=s.S.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){const o=document.createDocumentFragment(),f=document.createElement("body");let y;for(f.innerHTML=S;y=f.firstChild,y;)o.appendChild(y);return this.setDOMContent(o)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const S=this._container.querySelector(ed);S&&S.focus()}},c.RasterDEMTileSource=ir,c.RasterTileSource=lr,c.ScaleControl=class{constructor(S){this._onMove=()=>{Qu(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,Qu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Rh),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=zi,c.Style=Ms,c.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=hi,c.TwoFingersTouchRotateHandler=Tr,c.TwoFingersTouchZoomHandler=fr,c.TwoFingersTouchZoomRotateHandler=ni,c.VectorTileSource=Ve,c.VideoSource=Wr,c.addSourceType=(S,o)=>s._(void 0,void 0,void 0,function*(){if(qr(S))throw new Error(`A source type called "${S}" already exists.`);((f,y)=>{Zr[f]=y})(S,o)}),c.clearPrewarmedResources=function(){const S=Ae;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(Te),Ae=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=xl,c.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return Ar().getRTLTextPluginStatus()},c.getVersion=function(){return oc},c.getWorkerCount=function(){return Ge.workerCount},c.getWorkerUrl=function(){return s.a.WORKER_URL},c.importScriptInWorkers=function(S){return ze().broadcast("IS",S)},c.prewarm=function(){be().acquire(Te)},c.setMaxParallelImageRequests=function(S){s.a.MAX_PARALLEL_IMAGE_REQUESTS=S},c.setRTLTextPlugin=function(S,o){return Ar().setRTLTextPlugin(S,o)},c.setWorkerCount=function(S){Ge.workerCount=S},c.setWorkerUrl=function(S){s.a.WORKER_URL=S}});var a=r;return a})}(y2)),y2.exports}var nle=ile();const tA=A4(nle),sle=e=>e?e.replace(/\d(?=\d{3})/g,"*"):"N/A",ale=e=>{if(!e||!e.includes("@"))return"N/A";const[t,r]=e.split("@");return`${t[0]+"*".repeat(Math.max(t.length-2,1))+t.slice(-1)}@${r}`},Zy=()=>{const{user:e,isAuthorized:t}=io(),[r,i]=xe.useState(!0),[n,a]=xe.useState(!0),[c,s]=xe.useState(!1),[p,g]=xe.useState({service:"",rate:"",description:""}),[v,B]=xe.useState(!1),[F,C]=xe.useState({}),[L,P]=xe.useState([]),[D,j]=xe.useState(""),[q,H]=xe.useState(!1),[ee,G]=xe.useState({name:"",phone:"",service:"",cost:0,date:"",address:""}),[ne,Z]=xe.useState([]),[le,J]=xe.useState(!1),[ce,te]=xe.useState(""),[K,me]=xe.useState(null),[we,Fe]=xe.useState(null),[he,Le]=xe.useState(null),[$e,Ne]=xe.useState([]),[Te,Ge]=xe.useState(!0),Y=xe.useRef(null),Ae=xe.useRef(null),fe=xe.useRef(null),be=xe.useRef({});xe.useEffect(()=>{(async()=>{try{if(!t||!e){console.log("MyService - User not authenticated or no user data"),i(!1);return}const Ct=await Nr.get("/user/service-profile");if(Ct.data.success){const Pt=Ct.data.data;g({service:Pt.service||"",rate:Pt.rate||"",description:Pt.description||""}),Pt.service?(j(Pt.service),console.log("MyService: Current service profile loaded:",{service:Pt.service,rate:Pt.rate,description:Pt.description})):console.log("MyService: No service name in profile"),a(Pt.isOnline!==!1)}}catch{a(!0)}finally{i(!1)}})()},[e,t]);const Me=(ve,Ct,Pt,Ve)=>{const ir=(Pt-ve)*Math.PI/180,jr=(Ve-Ct)*Math.PI/180,ar=Math.sin(ir/2)*Math.sin(ir/2)+Math.cos(ve*Math.PI/180)*Math.cos(Pt*Math.PI/180)*Math.sin(jr/2)*Math.sin(jr/2);return 6371*(2*Math.atan2(Math.sqrt(ar),Math.sqrt(1-ar)))};xe.useEffect(()=>{if(!t||!e||e.role!=="Service Provider")return;const ve=async()=>{J(!0);try{const Ct={showAll:!0};he&&(Ct.lat=he.lat,Ct.lng=he.lng);const Pt=await Nr.get("/user/service-requests",{params:Ct});let Ve=[];Pt.data.success&&(Ve=Pt.data.requests.filter(ir=>ir.requester?._id!==e._id));const lr=Ve.filter(ir=>{const jr=!ir.budget||!p.rate?!1:Math.abs(ir.budget-parseFloat(p.rate))<=200,ar=!e.skills||e.skills.length===0||!ir.typeOfWork?!1:e.skills.some(Lr=>ir.typeOfWork?.toLowerCase().includes(Lr.toLowerCase())||Lr.toLowerCase().includes(ir.typeOfWork?.toLowerCase())),Wr=!he||!ir.location||!ir.location.lat||!ir.location.lng?!1:Me(he.lat,he.lng,ir.location.lat,ir.location.lng)<=5;return jr||ar||Wr});Z(lr),te(lr.length===0?"No matching requests found.":"")}catch(Ct){console.error("Error loading data:",Ct),Z([]),Ct.response&&Ct.response.status===403?te("Access denied. You must be a Service Provider."):te("No matching requests found.")}finally{J(!1)}};return ve(),Gi.on("service-request-updated",Ct=>{console.log("Service request updated:",Ct),ve()}),()=>{Gi.off("service-request-updated")}},[e,t,he]),xe.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(ve=>{const{latitude:Ct,longitude:Pt}=ve.coords;Le({lat:Ct,lng:Pt}),Ge(!1)},ve=>{console.error("Error getting location:",ve);let Ct="Failed to get your location. Please try again.";ve.message.includes("unavailable")?Ct="Location services are unavailable. Please check your device settings and try again.":ve.message.includes("timeout")?Ct="Location request timed out. Please try again.":ve.message.includes("permission")&&(Ct="Location permission was denied. Please grant location access."),pi.error(Ct),Ge(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):Ge(!1)},[]),xe.useEffect(()=>{if(ne.length>0){const ve=[];for(const Ct of ne)Ct.location&&Ct.location.lat&&Ct.location.lng&&ve.push({requestId:Ct._id,coords:{lat:Ct.location.lat,lng:Ct.location.lng}});Ne(ve)}else Ne([])},[ne]),xe.useEffect(()=>{if(Y.current&&!Ae.current&&!Te)try{const ve=he?[he.lng,he.lat]:[121,14];Ae.current=new tA.Map({container:Y.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:ve,zoom:he?15:12,attributionControl:!0,failIfMajorPerformanceCaveat:!1}),he&&(fe.current=new tA.Marker({color:"#FF0000",title:"Your Location"}).setLngLat([he.lng,he.lat]).addTo(Ae.current));const Ct=()=>{Ae.current&&Ae.current.resize()};return window.addEventListener("resize",Ct),Ae.current.on("load",()=>{console.log("Map loaded successfully")}),Ae.current.on("error",Pt=>{console.error("Map error:",Pt)}),()=>{window.removeEventListener("resize",Ct),Ae.current&&(Ae.current.remove(),Ae.current=null),Object.values(be.current).forEach(Pt=>Pt.remove()),be.current={}}}catch(ve){console.error("Error initializing map:",ve),Ge(!1)}},[he,Te]),xe.useEffect(()=>{Ae.current&&he&&(fe.current?fe.current.setLngLat([he.lng,he.lat]):fe.current=new tA.Marker({color:"#FF0000"}).setLngLat([he.lng,he.lat]).addTo(Ae.current))},[he]),xe.useEffect(()=>{if(Ae.current&&(Object.values(be.current).forEach(ve=>ve.remove()),be.current={},$e.length>0)){const ve=new tA.LngLatBounds;he&&ve.extend([he.lng,he.lat]),$e.forEach(Ct=>{const Pt=ne.find(Ve=>Ve._id===Ct.requestId);if(Pt){const Ve=new tA.Marker({color:"#007bff",title:`${Pt.requester?.firstName} ${Pt.requester?.lastName} - ${Pt.typeOfWork}`}).setLngLat([Ct.coords.lng,Ct.coords.lat]).addTo(Ae.current);be.current[Ct.requestId]=Ve,ve.extend([Ct.coords.lng,Ct.coords.lat])}}),Ae.current.fitBounds(ve,{padding:50,maxZoom:15})}},[$e,he,ne]),xe.useEffect(()=>{(async()=>{if(!t||!e){console.log("MyService: Not authorized or no user, skipping service fetch");return}console.log("MyService: Fetching user services...");try{const Ct=await Nr.get("/user/services");if(console.log("MyService: User services response:",Ct.data),Ct.data.success&&Ct.data.services&&Array.isArray(Ct.data.services)){const Pt=Ct.data.services.filter(Ve=>Ve&&Ve.name);if(console.log("MyService: Filtered services:",Pt),console.log("MyService: Services count:",Pt.length),Pt.length>0)P(Pt),console.log("MyService: Set predefinedServices to user services");else{console.log("MyService: User has no services in array, fetching predefined services...");try{const Ve=await Nr.get("/user/predefined-services");if(Ve.data.success){const lr=Ve.data.services||[];P(lr),console.log("MyService: Set predefinedServices to fallback:",lr.length)}}catch(Ve){console.error("MyService: Error fetching fallback services:",Ve)}}}else{console.log("MyService: Invalid response structure, trying fallback...");try{const Pt=await Nr.get("/user/predefined-services");Pt.data.success&&(P(Pt.data.services||[]),console.log("MyService: Set predefinedServices from fallback"))}catch(Pt){console.error("MyService: Error fetching fallback services:",Pt)}}}catch(Ct){console.error("MyService: Error fetching user services:",Ct),console.error("MyService: Error details:",Ct.response?.data||Ct.message);try{const Pt=await Nr.get("/user/predefined-services");Pt.data.success&&(P(Pt.data.services||[]),console.log("MyService: Set predefinedServices from error fallback"))}catch(Pt){console.error("MyService: Error fetching fallback services:",Pt),pi.error("Failed to load services")}}})()},[e,t]);const ze=async ve=>{if(!ve){j("");return}console.log("MyService: Service selected:",ve),console.log("MyService: Available services:",L);const Ct=L.find(Pt=>Pt.name===ve);if(console.log("MyService: Found service:",Ct),Ct){H(!0);try{(await Nr.post("/user/service-profile",{service:ve,rate:Ct.rate||0,description:Ct.description||""})).data.success&&(g({service:ve,rate:Ct.rate||0,description:Ct.description||""}),j(ve),pi.success("Service profile updated successfully"),console.log("MyService: Service profile updated successfully"))}catch(Pt){console.error("MyService: Error updating service profile:",Pt),pi.error(Pt.response?.data?.message||"Failed to update service profile")}finally{H(!1)}}else console.warn("MyService: Selected service not found in predefined services:",ve),console.warn("MyService: Available service names:",L.map(Pt=>Pt.name)),pi.error("Selected service not found in your services list")},We=async()=>{if(c)return;const ve=!n;s(!0);try{(await Nr.put("/user/service-status",{isOnline:ve})).data.success&&(a(ve),pi.success(`Status updated to ${ve?"Online":"Offline"}`),ve&&e&&e.role==="Service Provider"?(async()=>{J(!0);try{const Ve={showAll:!0};he&&(Ve.lat=he.lat,Ve.lng=he.lng);const lr=await Nr.get("/user/service-requests",{params:Ve});let ir=[];lr.data.success&&(ir=lr.data.requests.filter(ar=>ar.requester?._id!==e._id));const jr=ir.filter(ar=>{const Wr=!ar.budget||!p.rate?!1:Math.abs(ar.budget-parseFloat(p.rate))<=200,Lr=!e.skills||e.skills.length===0||!ar.typeOfWork?!1:e.skills.some(qr=>ar.typeOfWork?.toLowerCase().includes(qr.toLowerCase())||qr.toLowerCase().includes(ar.typeOfWork?.toLowerCase())),Zr=!he||!ar.location||!ar.location.lat||!ar.location.lng?!1:Me(he.lat,he.lng,ar.location.lat,ar.location.lng)<=5;return Wr||Lr||Zr});Z(jr),te(jr.length===0?"No matching requests found.":"")}catch(Ve){console.error("Error loading data:",Ve),Z([]),te("No matching requests found.")}finally{J(!1)}})():ve||Z([]))}catch(Ct){console.error("Failed to update status:",Ct),pi.error(Ct.response?.data?.message||"Failed to update status")}finally{s(!1)}},ut=ve=>{const Ct=ne.find(Ve=>Ve._id===ve);if(!Ct)return;window.confirm(`Are you sure you want to accept ${Ct.requester?.firstName} ${Ct.requester?.lastName}'s request for ${Ct.typeOfWork}?`)&&dt(ve)},dt=async ve=>{if(K!==ve){me(ve);try{(await Nr.post(`/user/service-request/${ve}/accept`)).data.success&&(pi.success("Request accepted successfully!"),Z(Pt=>Pt.filter(Ve=>Ve._id!==ve)),be.current[ve]&&(be.current[ve].remove(),delete be.current[ve]),Ne(Pt=>Pt.filter(Ve=>Ve.requestId!==ve)))}catch(Ct){console.error("Failed to accept request:",Ct),pi.error(Ct.response?.data?.message||"Failed to accept request")}finally{me(null)}}},zt=async ve=>{Z(Ct=>Ct.filter(Pt=>Pt._id!==ve)),be.current[ve]&&(be.current[ve].remove(),delete be.current[ve]),Ne(Ct=>Ct.filter(Pt=>Pt.requestId!==ve)),pi.success("Request declined")};return!t||!e?d.jsx("div",{className:"my-service-container",children:d.jsxs("div",{className:"auth-required",children:[d.jsx("div",{className:"auth-icon",children:""}),d.jsx("h3",{children:"Authentication Required"}),d.jsx("p",{children:"Please log in to access your service statistics."}),d.jsx("button",{className:"btn-primary",onClick:()=>window.location.href="/login",children:"Go to Login"})]})}):e.role!=="Service Provider"?d.jsx("div",{className:"my-service-container",children:d.jsxs("div",{className:"auth-required",children:[d.jsx("div",{className:"auth-icon",children:""}),d.jsx("h3",{children:"Access Denied"}),d.jsx("p",{children:"You must be a Service Provider to access this page."}),d.jsx("button",{className:"btn-primary",onClick:()=>window.location.href="/user/manage-profile",children:"Go to Profile"})]})}):d.jsx("div",{className:"my-service-container",children:d.jsxs("div",{className:"main-layout",children:[d.jsxs("div",{className:"left-column",children:[d.jsxs("div",{className:"services-section",children:[d.jsx("h3",{children:"Your Services:"}),d.jsxs("div",{className:"service-controls",children:[d.jsxs("select",{value:D,onChange:ve=>ze(ve.target.value),className:"form-input",disabled:q,children:[d.jsx("option",{value:"",children:"Select a service"}),L&&L.length>0?L.map(ve=>{const Ct=ve.name||"",Pt=ve.rate||0;return d.jsxs("option",{value:Ct,children:[Ct," ",Pt?`(${Pt})`:""]},ve._id||Ct||Math.random())}):d.jsx("option",{value:"",disabled:!0,children:r?"Loading services...":"No services available"})]}),L&&L.length>0&&d.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:[L.length," service",L.length!==1?"s":""," available"]}),q&&d.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Updating..."}),d.jsxs("div",{className:"status-toggle",children:[d.jsx("span",{className:`status-text ${n?"online":"offline"}`,children:n?"Online":"Offline"}),d.jsxs("label",{className:"toggle-switch",children:[d.jsx("input",{type:"checkbox",checked:n,onChange:We,disabled:c}),d.jsx("span",{className:"toggle-slider"})]}),c&&d.jsx("span",{style:{fontSize:"12px",color:"#666",marginLeft:"8px"},children:"Updating..."})]})]}),d.jsxs("div",{className:"service-info",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Service:"})," ",p.service]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Rate:"})," ",p.rate]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Description:"})," ",p.description]})]})]}),d.jsxs("div",{className:"client-request-section",children:[le?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Loading matching requests..."})]}):n?ne.length>0?d.jsxs("div",{className:"requests-list",children:[d.jsxs("h4",{children:["All Available Requests (",ne.length,")"]}),ne.map(ve=>d.jsxs("div",{className:"request-card",children:[d.jsxs("div",{className:"request-header",children:[d.jsx("span",{children:"Client Request"}),d.jsx("span",{children:new Date(ve.time).toLocaleDateString()})]}),d.jsxs("div",{className:"request-details",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Name:"})," ",ve.requester?.firstName," ",ve.requester?.lastName]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Email:"})," ",ale(ve.requester?.email)]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Phone:"})," ",sle(ve.requester?.phone)]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Service Needed:"})," ",ve.typeOfWork]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Budget:"})," ",ve.budget]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Address:"})," ",ve.address]})]}),d.jsxs("div",{className:"request-actions",children:[d.jsx("button",{className:"btn-primary",onClick:()=>ut(ve._id),disabled:K===ve._id||we===ve._id,children:K===ve._id?"Accepting...":"Accept"}),d.jsx("button",{className:"btn-primary",onClick:()=>zt(ve._id),disabled:K===ve._id||we===ve._id,style:{background:"#dc3545"},children:we===ve._id?"Declining...":"Decline"})]})]},ve._id))]}):d.jsx("div",{className:"no-requests",children:d.jsx("p",{children:ce||"No matching requests found. Requests will appear here when a client's budget matches your service rate and they are within your service area."})}):d.jsx("div",{className:"offline-message",children:d.jsx("p",{children:"You are currently offline and cannot receive new requests. Please go online to start receiving requests."})}),d.jsx("div",{className:"orders-note",children:d.jsx("p",{children:"*Every order will show below the service provider info - Scrollable so you can see if there's a lot of booking*"})})]})]}),d.jsx("div",{className:"right-column",children:d.jsx("div",{className:"map-section",children:Te?d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Getting your current location..."})]}):d.jsx("div",{ref:Y,className:"map-container",children:!Ae.current&&!Te&&d.jsx("div",{className:"map-loading-overlay",children:d.jsxs("div",{className:"map-loading-content",children:[d.jsx("div",{children:""}),d.jsx("p",{children:"Map loading..."}),d.jsx("p",{children:"If map doesn't load, please refresh the page."})]})})})})})]})})},ole=()=>{const{isAuthorized:e,user:t}=io(),r=Wo(),[i,n]=xe.useState({name:t.firstName+" "+t.lastName,address:"",phone:t?.phone||"",typeOfWork:"",time:"",budget:"",notes:"",preferredDate:""}),[a,c]=xe.useState({lat:14.5995,lng:120.9842}),s=xe.useRef(null),[p,g]=xe.useState(null),v=xe.useRef(null),[B,F]=xe.useState(null),[C,L]=xe.useState(""),P=q=>n({...i,[q.target.name]:q.target.value}),D=async()=>{if(!navigator.geolocation){F("Geolocation is not supported by this browser.");return}F(null),navigator.geolocation.getCurrentPosition(async q=>{const{latitude:H,longitude:ee}=q.coords;c({lat:H,lng:ee}),p&&p.flyTo({center:[ee,H],zoom:15});try{const G=await Nr.get(`/user/reverse-geocode?lat=${H}&lon=${ee}`,{withCredentials:!0});if(G.data.success&&G.data.address)L(G.data.address),n(ne=>({...ne,address:G.data.address}));else throw new Error("No address found")}catch(G){console.error("Reverse geocoding failed:",G);const ne=`${H.toFixed(6)}, ${ee.toFixed(6)}`;L(ne),n(Z=>({...Z,address:ne}))}},q=>{switch(q.code){case q.PERMISSION_DENIED:F("Location access denied by user.");break;case q.POSITION_UNAVAILABLE:F("Location information is unavailable.");break;case q.TIMEOUT:F("Location request timed out.");break;default:F("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};xe.useEffect(()=>{if(s.current&&!p){const q=new tA.Map({container:s.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[a.lng,a.lat],zoom:15});q.on("load",()=>{g(q),v.current||(v.current=new tA.Marker({color:"#ff0000"}).setLngLat([a.lng,a.lat]).addTo(q))}),q.on("click",async H=>{const{lng:ee,lat:G}=H.lngLat;c({lat:G,lng:ee}),v.current?v.current.setLngLat([ee,G]):q&&(v.current=new tA.Marker({color:"#ff0000"}).setLngLat([ee,G]).addTo(q));try{const ne=await Nr.get(`/user/reverse-geocode?lat=${G}&lon=${ee}`,{withCredentials:!0});if(ne.data.success&&ne.data.address)L(ne.data.address),n(Z=>({...Z,address:ne.data.address}));else throw new Error("No address found")}catch(ne){console.error("Reverse geocoding failed:",ne);const Z=`${G.toFixed(6)}, ${ee.toFixed(6)}`;L(Z),n(le=>({...le,address:Z}))}})}return()=>{if(p&&typeof p.remove=="function"){try{p.remove()}catch(q){console.error("Error removing map:",q)}g(null)}if(v.current&&typeof v.current.remove=="function"){try{v.current.remove()}catch(q){console.error("Error removing marker:",q)}v.current=null}}},[]),xe.useEffect(()=>{v.current&&p?v.current.setLngLat([a.lng,a.lat]):p&&!v.current&&(v.current=new tA.Marker({color:"#ff0000"}).setLngLat([a.lng,a.lat]).addTo(p))},[a,p]);const j=async q=>{if(q.preventDefault(),!e)return pi.error("You must log in to submit a service request");try{const H={name:i.name,address:i.address,phone:i.phone,typeOfWork:i.typeOfWork,preferredDate:i.preferredDate,time:i.time,budget:i.budget,notes:i.notes,location:a},G={_id:(await Nr.post("/user/post-service-request",H,{withCredentials:!0})).data.request._id,name:i.name,address:i.address,phone:i.phone,typeOfWork:i.typeOfWork,preferredDate:i.preferredDate,time:i.time,budget:i.budget,notes:i.notes,location:a,status:"Available"};r("/user/waiting-for-worker",{state:{requestData:G}}),n({name:t.firstName+" "+t.lastName,address:"",phone:t?.phone,typeOfWork:"",preferredDate:"",time:"",budget:"",notes:""}),c({lat:14.5995,lng:120.9842}),v.current&&v.current.setLngLat([120.9842,14.5995])}catch(H){pi.error(H.response?.data?.message||"Failed to submit service request.")}};return d.jsxs("section",{className:"requestForm-container",children:[d.jsx("h2",{className:"requestForm-title",children:"Submit a Service Request"}),d.jsxs("div",{className:"request-form-layout",children:[d.jsx("div",{children:d.jsxs("form",{onSubmit:j,className:"requestForm-form",children:[d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Name"}),d.jsx("input",{type:"text",name:"name",value:i.name,disabled:!0,placeholder:"Your name",required:!0})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Type of work"}),d.jsxs("select",{name:"typeOfWork",value:i.typeOfWork,onChange:P,required:!0,children:[d.jsx("option",{value:"",children:"-- Select Type of Work --"}),d.jsx("option",{value:"Plumbing",children:"Plumbing"}),d.jsx("option",{value:"Electrical",children:"Electrical"}),d.jsx("option",{value:"Cleaning",children:"Cleaning"}),d.jsx("option",{value:"Carpentry",children:"Carpentry"}),d.jsx("option",{value:"Painting",children:"Painting"}),d.jsx("option",{value:"Appliance Repair",children:"Appliance Repair"}),d.jsx("option",{value:"Home Renovation",children:"Home Renovation"}),d.jsx("option",{value:"Pest Control",children:"Pest Control"}),d.jsx("option",{value:"Gardening & Landscaping",children:"Gardening & Landscaping"}),d.jsx("option",{value:"Air Conditioning & Ventilation",children:"Air Conditioning & Ventilation"}),d.jsx("option",{value:"Laundry / Labandera",children:"Laundry / Labandera"})]})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Notes to worker"}),d.jsx("textarea",{name:"notes",value:i.notes,onChange:P,rows:"3",placeholder:"Notes to worker...",required:!0})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Budget ()"}),d.jsx("input",{type:"number",name:"budget",value:i.budget,onChange:P,min:"0"})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Address"}),d.jsx("input",{type:"text",name:"address",value:i.address,onChange:P,placeholder:"Your address",required:!0})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Phone No."}),d.jsx("input",{type:"tel",name:"phone",value:i.phone,disabled:!0,placeholder:t?.phone?t.phone:"+63",required:!0})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Preferred Date"}),d.jsx("input",{type:"date",name:"preferredDate",value:i.preferredDate,onChange:P,required:!0})]}),d.jsxs("div",{className:"requestForm-group",children:[d.jsx("label",{children:"Time"}),d.jsx("input",{type:"time",name:"time",value:i.time,onChange:P,required:!0})]}),d.jsx("button",{type:"submit",className:"requestForm-submitBtn",children:"Post Request"})]})}),d.jsxs("div",{className:"map-section",children:[d.jsxs("div",{className:"location-controls",children:[d.jsx("button",{type:"button",onClick:D,className:"location-button",children:" Use My Location"}),B&&d.jsx("div",{className:"location-error",children:B}),C&&d.jsxs("div",{className:"address-detected",children:[d.jsx("strong",{children:"Detected Address:"})," ",C,d.jsx("button",{type:"button",onClick:()=>{n(q=>({...q,address:C})),L("")},className:"use-address-button",children:"Use This Address"})]})]}),d.jsx("div",{ref:s,className:"map-container"})]})]})]})},HL=xe.createContext(),VL=()=>{const e=xe.useContext(HL);if(!e)throw new Error("usePopup must be used within a PopupProvider");return e},lle=({children:e})=>{const[t,r]=xe.useState([]),i=(c,s="info",p=3e3,g="")=>{const v=Date.now()+Math.random(),B={id:v,message:c,type:s,title:g,duration:p};return r(F=>[...F,B]),p>0&&setTimeout(()=>{r(F=>F.filter(C=>C.id!==v))},p),v},n=(c,s="",p,g)=>{const v=prompt(c+(s?`
${s}`:""));v!==null?p&&p(v):g&&g()},a=c=>{r(s=>s.filter(p=>p.id!==c))};return d.jsx(HL.Provider,{value:{showNotification:i,showInput:n,removeNotification:a,notifications:t},children:e})},cle=({request:e,isOpen:t,onClose:r,onChat:i,onDelete:n,onAccept:a,onDecline:c})=>{if(!t||!e)return null;const s=v=>{switch(v){case"Available":case"Waiting":case"Open":return"status-open";case"Working":return"status-working";case"Complete":case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";default:return"status-default"}},p=v=>v?new Date(v).toLocaleDateString():"Not specified",g=v=>v||"Not specified";return d.jsx("div",{className:"popup-overlay",onClick:r,children:d.jsxs("div",{className:"popup-content",onClick:v=>v.stopPropagation(),children:[d.jsxs("div",{className:"popup-header",children:[d.jsx("h2",{children:"Request Details"}),d.jsx("button",{className:"close-button",onClick:r,children:""})]}),d.jsxs("div",{className:"popup-body",children:[d.jsxs("div",{className:"request-info-section",children:[d.jsxs("div",{className:"info-row",children:[d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Status:"}),d.jsx("span",{className:`status-badge ${s(e.status)}`,children:e.status==="Waiting"?"Available":e.status==="Completed"?"Complete":e.status==="Open"?"Available":e.status})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Date:"}),d.jsx("span",{children:p(e.createdAt)})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Time:"}),d.jsx("span",{children:g(e.time)})]})]}),d.jsxs("div",{className:"info-row",children:[d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Service Needed:"}),d.jsx("span",{className:"service-title",children:e.typeOfWork})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Budget:"}),d.jsxs("span",{className:"budget",children:["",e.budget||"0"]})]})]}),d.jsxs("div",{className:"info-row",children:[d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Client:"}),d.jsx("span",{children:e.requester?`${e.requester.firstName||""} ${e.requester.lastName||""}`.trim()||e.requester.username||"Unknown Client":"N/A"})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Phone:"}),d.jsx("span",{children:e.phone||"Not provided"})]})]}),e.serviceProvider&&d.jsxs("div",{className:"info-row",children:[d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Service Provider:"}),d.jsx("span",{children:e.serviceProvider.firstName&&e.serviceProvider.lastName?`${e.serviceProvider.firstName} ${e.serviceProvider.lastName}`:e.serviceProvider.username||"Unknown Provider"})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Contact:"}),d.jsx("span",{children:e.serviceProvider.phone||"Not provided"})]})]}),d.jsxs("div",{className:"info-row",children:[d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Address:"}),d.jsx("span",{children:e.address||"Not specified"})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Preferred Time:"}),d.jsx("span",{children:e.time||"Not specified"})]})]}),e.notes&&d.jsx("div",{className:"info-row",children:d.jsxs("div",{className:"info-group full-width",children:[d.jsx("label",{children:"Notes:"}),d.jsx("span",{className:"notes",children:e.notes})]})}),d.jsxs("div",{className:"info-row",children:[d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Estimated Service Cost:"}),d.jsxs("span",{children:["",e.budget||"0"]})]}),d.jsxs("div",{className:"info-group",children:[d.jsx("label",{children:"Matched Rate:"}),d.jsxs("span",{className:"match-rate",children:["",e.serviceProvider?.serviceRate||"Not set"]})]})]})]}),d.jsxs("div",{className:"popup-actions",children:[e.serviceRequest?e.serviceProvider&&d.jsx("button",{className:"modal-button",onClick:()=>i&&i(e),children:"Chat"}):e.status==="Available"||e.status==="Waiting"||e.status==="Open"?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"modal-button accept",onClick:v=>a&&a(e,v),children:"Accept"}),d.jsx("button",{className:"modal-button decline",onClick:v=>c&&c(e,v),children:"Decline"})]}):e.status==="Working"||e.status==="Complete"?d.jsx("button",{className:"modal-button",onClick:()=>i&&i(e),children:"Chat"}):e.status==="Cancelled"?d.jsx("span",{className:"modal-button cancelled",style:{backgroundColor:"#f0f0f0",color:"#999",cursor:"default"},children:"Cancelled"}):d.jsx("button",{className:"modal-button",onClick:()=>{},children:"Edit"}),!e.serviceRequest&&e.status!=="Cancelled"&&e.status!=="Complete"&&e.status!=="Available"&&e.status!=="Waiting"&&e.status!=="Open"&&d.jsx("button",{className:"modal-button",onClick:()=>n&&n(e),children:"Cancel"}),d.jsx("button",{className:"modal-button",onClick:r,children:"Close"})]})]})]})})},ule=({request:e,isOpen:t,onClose:r})=>{const[i,n]=xe.useState("Accepted"),[a,c]=xe.useState(null),[s,p]=xe.useState(null),[g,v]=xe.useState(!0),[B,F]=xe.useState(null),[C,L]=xe.useState(!1),[P,D]=xe.useState(null);xe.useEffect(()=>{if(!t||!e){v(!1);return}if((async()=>{if(v(!0),F(null),p(e),(e.status==="Working"||e.status==="Accepted")&&(n("Accepted"),e.serviceProvider||e.acceptedBy)){const le=e.serviceProvider||e.acceptedBy;c({name:`${le.firstName} ${le.lastName}`,skill:e.typeOfWork,phone:le.phone,image:gp(le.profilePic)||"/default-profile.png",eta:e.eta})}v(!1)})(),Gi&&e._id){Gi.emit("join-service-request",e._id);const le=async J=>{if(J?.requestId===e._id)try{const te=(await Nr.get(`/user/service-request/${e._id}`)).data?.request;if(te){p(te);const K=te.serviceProvider||te.acceptedBy;K&&c({name:`${K.firstName||""} ${K.lastName||""}`.trim(),skill:te.typeOfWork,phone:K.phone,image:gp(K.profilePic)||"/default-profile.png",eta:te.eta})}}catch(ce){console.error("Failed to update request via socket:",ce)}};return Gi.on("service-request-updated",le),()=>{Gi.off("service-request-updated",le),Gi.emit("leave-service-request",e._id)}}},[e,t]);const j=async()=>{if(s?._id&&window.confirm("Are you sure you want to cancel this order?"))try{(await Nr.delete(`/user/service-request/${s._id}/cancel`)).data.success?(alert("Order cancelled successfully"),r()):alert("Failed to cancel the order. Please try again.")}catch(Z){console.error("Error cancelling order:",Z),alert("Failed to cancel the order. Please try again.")}},q=async()=>{if(s.serviceProvider||s.acceptedBy)try{if(((await Nr.get("/user/bookings")).data.bookings||[]).find(ce=>ce.serviceRequest&&ce.serviceRequest._id===s._id)){const ce=s.serviceProvider||s.acceptedBy;alert(`Opening chat with ${ce.firstName}`)}else alert("No active booking found for this request.")}catch(Z){console.error("Error finding booking for chat:",Z),alert("Failed to open chat. Please try again.")}else alert("No service provider assigned for chat.")},H=async()=>{if(P){L(!0);try{const J=((await Nr.get("/user/bookings")).data.bookings||[]).find(te=>te.serviceRequest&&te.serviceRequest._id===s._id);if(!J){alert("No active booking found.");return}(await Nr.put(`/user/booking/${J._id}/status`,{status:"Complete"})).data.success?(alert("Work completed successfully"),r()):alert("Failed to complete work.")}catch(Z){console.error("Error completing work:",Z),alert("Failed to complete work.")}finally{L(!1)}}},ee=Z=>Z?new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",G=()=>i==="Accepted"?"status-found":s?.status==="No Longer Available"?"status-expired":"status-searching",ne=()=>i==="Accepted"?"Provider Assigned":s?.status==="No Longer Available"?"Expired":"Processing";return t?g?d.jsx("div",{className:"modal-overlay",children:d.jsx("div",{className:"modal-content",children:d.jsx("div",{className:"loading-container",children:d.jsxs("div",{className:"loading-content",children:[d.jsx("div",{className:"spinner"}),d.jsx("h3",{children:"Loading your order"}),d.jsx("p",{children:"Please wait a moment..."})]})})})}):B?d.jsx("div",{className:"modal-overlay",children:d.jsx("div",{className:"modal-content",children:d.jsxs("div",{className:"error-container",children:[d.jsx("h2",{children:" Error"}),d.jsx("p",{children:B}),d.jsx("button",{onClick:()=>window.location.reload(),children:" Refresh Page"}),d.jsx("button",{onClick:r,children:"Close"})]})})}):d.jsx("div",{className:"modal-overlay",onClick:r,children:d.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Service Order Details"}),d.jsx("button",{className:"close-button",onClick:r,children:""})]}),d.jsx("div",{className:"page-wrapper",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"grid-layout",children:[d.jsxs("div",{className:"main-content",children:[d.jsxs("div",{className:"card header-card",children:[d.jsxs("div",{className:"header-left",children:[d.jsx("h2",{children:"Service Order"}),d.jsxs("p",{children:["Order #",s?._id?.slice(-6)||"N/A"]})]}),d.jsx("div",{className:`status-badge ${G()}`,children:ne()})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"card-title",children:"Order Information"}),d.jsxs("div",{className:"details-grid",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Service Date"}),d.jsx("p",{children:ee(s?.createdAt)})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsxs("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Location"}),d.jsx("p",{children:s?.address||"N/A"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Service Type"}),d.jsx("p",{children:s?.typeOfWork||"N/A"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Budget"}),d.jsxs("p",{className:"budget",children:["",s?.budget||"N/A"]})]})]})]}),s?.notes&&d.jsxs("div",{className:"detail-row detail-notes",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Notes"}),d.jsx("p",{children:s.notes})]})]})]}),d.jsxs("div",{className:"actions-card",children:[d.jsxs("button",{className:"action-button action-chat",onClick:q,children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Chat with Provider"]}),d.jsxs("button",{className:"action-button action-cancel",onClick:j,children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Cancel Order"]})]})]}),d.jsxs("div",{className:"center-content",children:[a&&d.jsxs("div",{className:"card assigned-card",children:[d.jsxs("div",{className:"assigned-header",children:[d.jsx("div",{className:"assigned-icon",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),d.jsxs("div",{className:"assigned-info",children:[d.jsx("h3",{children:"Provider Assigned"}),d.jsx("p",{children:"Your service provider is assigned to this order"})]})]}),d.jsxs("div",{className:"assigned-body",children:[d.jsx("img",{src:a.image,alt:a.name,className:"assigned-image"}),d.jsxs("div",{className:"assigned-details",children:[d.jsx("h4",{children:a.name}),d.jsx("p",{children:a.skill}),d.jsx("p",{className:"phone",children:a.phone}),a.eta&&d.jsxs("p",{children:["ETA: ",new Date(a.eta).toLocaleTimeString()]})]})]})]}),s?.status==="Working"&&d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"card-title",children:"Complete Work"}),d.jsxs("div",{className:"work-completion-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Upload Work Proof Image"}),d.jsx("input",{type:"file",accept:"image/*",onChange:Z=>D(Z.target.files[0]),className:"file-input"})]}),d.jsx("button",{className:"action-button action-complete",onClick:H,disabled:C||!P,children:C?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"spinner-small"}),"Completing..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Confirm Work Done"]})})]})]}),d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"card-title",children:"Customer Details"}),d.jsxs("div",{className:"customer-details",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Full Name"}),d.jsx("p",{children:s?.name||"N/A"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Phone Number"}),d.jsx("p",{children:s?.phone||"N/A"})]})]})]})]})]}),d.jsx("div",{className:"sidebar",children:d.jsx("div",{className:"actions-card",children:a&&d.jsxs("button",{className:"action-button action-call",onClick:()=>window.open(`tel:${a.phone}`),children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call Provider"]})})})]})})})]})}):null},QC=({request:e,booking:t,isOpen:r,onClose:i})=>{if(!r||!e)return null;console.log("ReceiptModal - Request data:",e),console.log("ReceiptModal - Booking data:",t),console.log("ReceiptModal - Requester info:",e?.requester),console.log("ReceiptModal - ServiceProvider info:",e?.serviceProvider),console.log("ReceiptModal - Booking provider info:",t?.provider);const n=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",a=c=>c?new Date(c).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A";return d.jsx("div",{className:"receipt-modal-overlay",onClick:i,children:d.jsxs("div",{className:"receipt-modal-content",onClick:c=>c.stopPropagation(),children:[d.jsxs("div",{className:"receipt-modal-header",children:[d.jsx("h2",{children:"Service Receipt"}),d.jsx("button",{className:"receipt-close-button",onClick:i,children:""})]}),d.jsxs("div",{className:"receipt-body",children:[d.jsxs("div",{className:"receipt-header-section",children:[d.jsx("div",{className:"receipt-logo",children:d.jsx("img",{src:"/skillconnect.png",alt:"SkillConnect",className:"receipt-logo-img"})}),d.jsxs("div",{className:"receipt-title",children:[d.jsx("h3",{children:"Service Completion Receipt"}),d.jsxs("p",{children:["Order #",e._id?.slice(-8).toUpperCase()||"N/A"]})]})]}),d.jsxs("div",{className:"receipt-section",children:[d.jsx("h4",{children:"Service Details"}),d.jsxs("div",{className:"receipt-details-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Service Type:"}),d.jsx("span",{className:"detail-value",children:e.typeOfWork||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Date Requested:"}),d.jsx("span",{className:"detail-value",children:n(e.createdAt)})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Preferred Time:"}),d.jsx("span",{className:"detail-value",children:e.time||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Service Address:"}),d.jsx("span",{className:"detail-value",children:e.address||"N/A"})]})]})]}),d.jsxs("div",{className:"receipt-section",children:[d.jsx("h4",{children:"Client Information"}),d.jsxs("div",{className:"receipt-details-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Name:"}),d.jsxs("span",{className:"detail-value",children:[e?.requester?.firstName||e?.name||"N/A"," ",e?.requester?.lastName||""]})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Phone:"}),d.jsx("span",{className:"detail-value",children:e?.requester?.phone||e?.phone||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Email:"}),d.jsx("span",{className:"detail-value",children:e?.requester?.email||e?.email||"N/A"})]})]})]}),(t?.provider||e?.serviceProvider)&&d.jsxs("div",{className:"receipt-section",children:[d.jsx("h4",{children:"Service Provider"}),d.jsxs("div",{className:"receipt-details-grid",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Name:"}),d.jsxs("span",{className:"detail-value",children:[t?.provider?.firstName||e?.serviceProvider?.firstName," ",t?.provider?.lastName||e?.serviceProvider?.lastName]})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Phone:"}),d.jsx("span",{className:"detail-value",children:t?.provider?.phone||e?.serviceProvider?.phone||"N/A"})]}),t?.completedAt&&d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"detail-label",children:"Service Completed:"}),d.jsx("span",{className:"detail-value",children:n(t.completedAt)})]})]})]}),e.notes&&d.jsxs("div",{className:"receipt-section",children:[d.jsx("h4",{children:"Service Notes"}),d.jsx("p",{className:"service-notes",children:e.notes})]}),d.jsxs("div",{className:"receipt-section payment-summary",children:[d.jsx("h4",{children:"Payment Summary"}),d.jsxs("div",{className:"payment-details",children:[d.jsxs("div",{className:"payment-row",children:[d.jsx("span",{children:"Service Fee"}),d.jsxs("span",{children:["",e.budget?.toLocaleString()||"0"]})]}),d.jsxs("div",{className:"payment-row total",children:[d.jsx("span",{children:d.jsx("strong",{children:"Total Amount"})}),d.jsx("span",{children:d.jsxs("strong",{children:["",e.budget?.toLocaleString()||"0"]})})]})]})]}),t&&d.jsxs("div",{className:"receipt-section",children:[d.jsx("h4",{children:"Completion Details"}),d.jsxs("div",{className:"completion-details",children:[d.jsxs("div",{className:"completion-item",children:[d.jsx("i",{className:"fas fa-calendar-check"}),d.jsxs("span",{children:["Service completed on ",n(t.completedAt)," at ",a(t.completedAt)]})]}),t.completionNotes&&d.jsxs("div",{className:"completion-item",children:[d.jsx("i",{className:"fas fa-sticky-note"}),d.jsxs("span",{children:["Provider notes: ",t.completionNotes]})]})]})]}),d.jsxs("div",{className:"receipt-footer",children:[d.jsx("p",{children:"Thank you for using SkillConnect!"}),d.jsxs("p",{className:"receipt-date",children:["Receipt generated on ",n(new Date)]})]})]}),d.jsxs("div",{className:"receipt-modal-actions",children:[d.jsx("button",{className:"btn-secondary",onClick:i,children:"Close"}),d.jsxs("button",{className:"btn-primary",onClick:()=>{window.print()},children:[d.jsx("i",{className:"fas fa-print"}),"Print Receipt"]})]})]})})},hle=({searchTerm:e,filterStatus:t,filterServiceType:r,filterBudgetRange:i,handleRequestClick:n,getStatusClass:a})=>{const c=Wo(),[s,p]=xe.useState([]),[g,v]=xe.useState(!0),[B,F]=xe.useState(null),[C,L]=xe.useState(!1),[P,D]=xe.useState(null),j=async()=>{try{const{data:ne}=await Nr.get("/user/user-service-requests",{withCredentials:!0});p(ne.requests||[])}catch(ne){console.error("Error fetching my requests:",ne),F(ne.message)}finally{v(!1)}};xe.useEffect(()=>(j(),Gi.on("service-request-updated",()=>{j()}),()=>{Gi.off("service-request-updated")}),[]);const q=ne=>ne==="Waiting"?"Available":ne==="Completed"?"Complete":ne,H=ne=>ne?ne.toString().toLowerCase():"",ee=s.filter(ne=>{const Z=e?.toLowerCase()||"",le=H(ne.typeOfWork).includes(Z)||H(ne.name).includes(Z)||H(ne.budget).includes(Z)||H(ne.address).includes(Z)||H(ne.phone).includes(Z)||H(ne.notes).includes(Z),J=q(ne.status),ce=t==="All"||J===t,te=r==="All"||ne.typeOfWork===r,K=(!i.min||ne.budget>=parseFloat(i.min))&&(!i.max||ne.budget<=parseFloat(i.max));return le&&ce&&te&&K}),G=ne=>{console.log("MyRequests handleRowClick - Raw status:",ne.status);const Z=q(ne.status);console.log("MyRequests handleRowClick - Normalized status:",Z),Z==="Complete"?(console.log("MyRequests - Showing receipt modal for completed request"),D(ne),L(!0)):Z==="Available"?(console.log("MyRequests - Navigating to waiting-for-worker"),c("/user/waiting-for-worker",{state:{requestData:ne}})):Z==="Working"?(console.log("MyRequests - Navigating to accepted-order"),c("/user/accepted-order",{state:{requestData:ne}})):(console.log("MyRequests - Calling handleRequestClick (fallback)"),n(ne))};return g?d.jsx("div",{className:"records-loading",children:"Loading records..."}):B?d.jsx("div",{className:"records-error",children:B}):d.jsxs(d.Fragment,{children:[ee.length===0?d.jsxs("div",{className:"no-results",children:[d.jsx("img",{src:"/records.png",alt:"No results",style:{width:100,height:100,opacity:.5,marginBottom:10}}),d.jsx("p",{children:"No My Requests Found"})]}):d.jsxs("table",{className:"records-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Request Date"}),d.jsx("th",{children:"Service Needed"}),d.jsx("th",{children:"Budget"}),d.jsx("th",{children:"Preferred Time"}),d.jsx("th",{children:"Address"})]})}),d.jsx("tbody",{children:ee.map(ne=>d.jsxs("tr",{className:"request-row clickable-row",onClick:()=>G(ne),children:[d.jsx("td",{children:d.jsx("span",{className:`status-tag ${a(ne.status)}`,children:ne.status==="Waiting"?"Pending":ne.status==="Completed"?"Complete":ne.status==="Open"?"Pending":ne.status})}),d.jsx("td",{children:d.jsx("div",{className:"date",children:ne.createdAt?new Date(ne.createdAt).toLocaleDateString():"-"})}),d.jsx("td",{children:ne.typeOfWork}),d.jsxs("td",{children:["",ne.budget||"0"]}),d.jsx("td",{children:ne.time||"Not specified"}),d.jsx("td",{children:ne.address||"Not specified"})]},ne._id))})]}),C&&P&&d.jsx(QC,{request:P,isOpen:C,onClose:()=>{L(!1),D(null)}})]})},Ale=({searchTerm:e,filterStatus:t,filterServiceType:r,filterBudgetRange:i,handleRequestClick:n,handleAcceptRequest:a,handleDeclineRequest:c,getStatusClass:s})=>{const{user:p}=io(),[g,v]=xe.useState([]),[B,F]=xe.useState(!0),[C,L]=xe.useState(null),P=async()=>{try{console.log("AvailableRequests - Fetching available requests...");try{const{data:j}=await Nr.get("/user/matching-requests",{withCredentials:!0});if(j.success&&j.requests&&j.requests.length>0){console.log("AvailableRequests - Got requests from matching-requests:",j.requests.length),v(j.requests),F(!1);return}}catch{console.log("AvailableRequests - matching-requests endpoint not available, trying alternatives")}try{const{data:j}=await Nr.get("/settings/available-requests");if(j.success&&j.requests){console.log("AvailableRequests - Got requests from available-requests endpoint:",j.requests.length),v(j.requests),F(!1);return}}catch{console.log("AvailableRequests - available-requests endpoint not available either")}try{const{data:j}=await Nr.get("/user/all-service-requests");if(j.success&&j.requests){const q=j.requests.filter(H=>H.status==="Waiting"||H.status==="Open");console.log("AvailableRequests - Filtered available requests from all requests:",q.length),v(q),F(!1);return}}catch{console.log("AvailableRequests - all-service-requests endpoint not available")}console.log("AvailableRequests - No available requests found from any endpoint"),v([])}catch(j){console.error("Error fetching available requests:",j),L(j.message)}finally{F(!1)}};xe.useEffect(()=>(P(),Gi.on("service-request-updated",j=>{console.log("Service request updated:",j),P()}),()=>{Gi.off("service-request-updated")}),[]);const D=g.filter(j=>{if(!j)return console.warn("Invalid request structure:",j),!1;const q=j.status==="Waiting"||j.status==="Open";if(!q)return console.log("Excluding non-available request:",j._id,"Status:",j.status),!1;const H=j.requester?._id!==p._id&&j.requesterId!==p._id;if(!H)return console.log("Excluding own request:",j._id,"Requester:",j.requester?._id,"Current user:",p._id),!1;const ee=!j.serviceProvider||j.serviceProvider._id===p._id;if(!ee)return console.log("Excluding already assigned request:",j._id,"Provider:",j.serviceProvider?._id),!1;if(!j.typeOfWork||!j.budget)return console.log("Excluding incomplete request:",j._id,"Missing required fields"),!1;const G=e?.toLowerCase()||"",ne=j.typeOfWork?.toLowerCase().includes(G)||j.requester?.firstName?.toLowerCase().includes(G)||j.requester?.lastName?.toLowerCase().includes(G)||j.name?.toLowerCase().includes(G)||j.budget?.toString().includes(e)||j.address?.toLowerCase().includes(G)||j.phone?.toLowerCase().includes(G)||j.notes?.toLowerCase().includes(G),Z=j.status==="Waiting"||j.status==="Open"?"Available":j.status==="Completed"?"Complete":j.status,le=t==="All"||Z===t,J=r==="All"||j.typeOfWork===r,ce=(!i.min||j.budget>=parseFloat(i.min))&&(!i.max||j.budget<=parseFloat(i.max)),te=q&&H&&ee&&ne&&le&&J&&ce;return te&&console.log("Available request passed all filters:",j._id,"Status:",j.status,"Type:",j.typeOfWork,"Budget:",j.budget),te});return B?d.jsx("div",{className:"records-loading",children:"Loading records..."}):C?d.jsx("div",{className:"records-error",children:C}):d.jsx(d.Fragment,{children:D.length===0?d.jsxs("div",{className:"no-results",children:[d.jsx("img",{src:"/records.png",alt:"No results",style:{width:100,height:100,opacity:.5,marginBottom:10}}),d.jsx("p",{children:"No Available Requests Found"})]}):d.jsxs("table",{className:"records-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Request Date"}),d.jsx("th",{children:"Client"}),d.jsx("th",{children:"Service Needed"}),d.jsx("th",{children:"Budget"}),d.jsx("th",{children:"Preferred Time"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:D.map(j=>d.jsxs("tr",{onClick:()=>n(j),style:{cursor:"pointer"},children:[d.jsx("td",{children:d.jsx("span",{className:`status-tag ${s(j.status)}`,children:j.status==="Waiting"?"Available":j.status==="Completed"?"Complete":j.status==="Open"?"Available":j.status})}),d.jsx("td",{children:d.jsx("div",{className:"date",children:j.createdAt?new Date(j.createdAt).toLocaleDateString():"-"})}),d.jsx("td",{children:j.requester?`${j.requester.firstName||""} ${j.requester.lastName||""}`.trim()||j.requester.username||"Unknown Client":"N/A"}),d.jsx("td",{children:j.typeOfWork}),d.jsxs("td",{children:["",j.budget||"0"]}),d.jsx("td",{children:j.time||"Not specified"}),d.jsx("td",{children:d.jsxs("div",{className:"request-actions",children:[d.jsx("button",{className:"action-btn accept",onClick:q=>{q.stopPropagation(),a(j,q)},children:"Accept"}),d.jsx("button",{className:"action-btn decline",onClick:q=>{q.stopPropagation(),c(j,q)},children:"Decline"})]})})]},j._id))})]})})},dle=({searchTerm:e,filterStatus:t,filterServiceType:r,filterBudgetRange:i,handleRequestClick:n,getStatusClass:a})=>{const{user:c}=io(),[s,p]=xe.useState([]),[g,v]=xe.useState(!0),[B,F]=xe.useState(null),[C,L]=xe.useState(!1),[P,D]=xe.useState(null),j=async()=>{try{v(!0);const{data:H}=await Nr.get("/user/bookings");p(H.bookings||[])}catch(H){console.error("Error fetching records:",H),F(H.message)}finally{v(!1)}};xe.useEffect(()=>(j(),Gi.on("service-request-updated",H=>{console.log("Service request updated:",H),j()}),()=>{Gi.off("service-request-updated")}),[]);const q=s.filter(H=>{if(!H)return console.warn("Null record found"),!1;if(!H.serviceRequest)return console.log("Skipping record without serviceRequest:",H._id,"Status:",H.status),!1;if(!(H.provider?._id===c._id))return console.log("Skipping record where user is not service provider:",H._id,"Provider:",H.provider?._id,"Current user:",c._id),!1;const G=e.toLowerCase(),ne=H.serviceRequest?.typeOfWork?.toLowerCase().includes(G)||H.requester?.firstName?.toLowerCase().includes(G)||H.requester?.lastName?.toLowerCase().includes(G)||H.serviceRequest?.budget?.toString().includes(e)||H.serviceRequest?.address?.toLowerCase().includes(G)||H.serviceRequest?.time?.toLowerCase().includes(G),Z=H.status==="Waiting"?"Available":H.status==="Completed"?"Complete":H.status,le=t==="All"||Z===t,J=r==="All"||H.serviceRequest?.typeOfWork===r,ce=(!i.min||H.serviceRequest?.budget>=parseFloat(i.min))&&(!i.max||H.serviceRequest?.budget<=parseFloat(i.max)),te=ne&&le&&J&&ce;return te&&console.log("Work record passed all filters:",H._id,"Status:",H.status,"Service:",H.serviceRequest?.typeOfWork),te});return g?d.jsx("div",{className:"records-loading",children:"Loading records..."}):B?d.jsx("div",{className:"records-error",children:B}):d.jsxs(d.Fragment,{children:[q.length===0?d.jsxs("div",{className:"no-results",children:[d.jsx("img",{src:"/records.png",alt:"No results",style:{width:100,height:100,opacity:.5,marginBottom:10}}),d.jsx("p",{children:"No Work Records Found"})]}):d.jsxs("table",{className:"records-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Work Time"}),d.jsx("th",{children:"Order Address"}),d.jsx("th",{children:"Client"}),d.jsx("th",{children:"Service Needed"}),d.jsx("th",{children:"Amount"})]})}),d.jsx("tbody",{children:q.map(H=>d.jsxs("tr",{onClick:()=>{console.log("WorkRecords handleRowClick - Raw status:",H.status);const ee=H.status==="Waiting"?"Available":H.status==="Completed"?"Complete":H.status;console.log("WorkRecords handleRowClick - Normalized status:",ee),ee==="Complete"?(console.log("WorkRecords - Showing receipt modal for completed record"),D(H),L(!0)):(console.log("WorkRecords - Calling handleRequestClick (fallback)"),n(H))},style:{cursor:"pointer"},className:"clickable-row",children:[d.jsx("td",{children:d.jsx("span",{className:`status-tag ${a(H.status)}`,children:H.status==="Waiting"?"Available":H.status==="Completed"?"Complete":H.status==="Open"?"Available":H.status})}),d.jsxs("td",{children:[d.jsx("div",{children:H.serviceRequest?.time||"-"}),d.jsx("div",{className:"date",children:H.createdAt?new Date(H.createdAt).toLocaleDateString():"-"})]}),d.jsx("td",{children:H.serviceRequest?.address||"N/A"}),d.jsx("td",{children:H.requester?`${H.requester.firstName} ${H.requester.lastName}`:"N/A"}),d.jsx("td",{children:H.serviceRequest?.typeOfWork||"N/A"}),d.jsxs("td",{children:["",(H.serviceRequest?.budget??0).toLocaleString()]})]},H._id))})]}),C&&P&&d.jsx(QC,{request:P.serviceRequest,booking:P,isOpen:C,onClose:()=>{L(!1),D(null)}})]})},fle=()=>{const e=Wo(),{user:t,openChat:r}=io(),{showNotification:i}=VL(),[n,a]=xe.useState(""),[c,s]=xe.useState("All"),[p,g]=xe.useState("All"),[v,B]=xe.useState({min:"",max:""}),[F,C]=xe.useState(!1),[L,P]=xe.useState("my-requests"),[D,j]=xe.useState(!1),[q,H]=xe.useState(null),[ee,G]=xe.useState(!1),[ne,Z]=xe.useState(null),[le,J]=xe.useState(!1),[ce,te]=xe.useState(null),[K,me]=xe.useState([]),we=async()=>{try{const{data:ze}=await Nr.get("/user/user-service-requests",{withCredentials:!0});me(ze.requests||[])}catch(ze){console.error("Error fetching my requests:",ze)}};xe.useEffect(()=>{we()},[]);const Fe=ze=>{switch(ze){case"Available":case"Waiting":case"Open":return"status-open";case"Working":return"status-working";case"Complete":case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";default:return"status-default"}},he=ze=>{if(ze.serviceRequest)e("/user/client-accepted",{state:{requestId:ze.serviceRequest._id}});else{const We=K.find(ut=>ut._id===ze._id);if(We&&ze.status==="Working")Z(ze),G(!0);else if(We&&ze.status==="Completed"){const ut={worker:ze.acceptedBy?`${ze.acceptedBy.firstName} ${ze.acceptedBy.lastName}`:"Not assigned",type:ze.typeOfWork,status:ze.status,date:ze.createdAt?new Date(ze.createdAt).toLocaleDateString():"",address:ze.address,id:ze._id,price:`${ze.budget}`,isOwnOrder:!0};e("/order-details",{state:{order:ut}})}else We&&ze.status!=="Completed"&&ze.status!=="Working"&&ze.status!=="Cancelled"?e("/waiting-for-worker",{state:{orderData:ze}}):(H(ze),j(!0))}},Le=()=>{j(!1),H(null)},$e=ze=>{ze.acceptedBy?(r(ze._id),i(`Opening chat with ${ze.acceptedBy.firstName||ze.acceptedBy.username}`,"success",2e3,"Success")):i("No service provider assigned for chat.","info",3e3,"Info"),Le()},Ne=async(ze,We)=>{if(We.stopPropagation(),console.log("Chat button clicked for request:",ze._id,"Provider:",ze.serviceProvider),ze.serviceProvider)try{const zt=((await Nr.get("/user/service-requests")).data.serviceRequests||[]).find(ve=>ve.serviceRequest&&ve.serviceRequest._id===ze._id);zt?(r(zt._id),i(`Opening chat with ${ze.serviceProvider.firstName||ze.serviceProvider.username}`,"success",2e3,"Success")):i("No active service request found for this request.","error",3e3,"Error")}catch(ut){console.error("Error finding service request for chat:",ut),i("Failed to open chat. Please try again.","error",4e3,"Error")}else i("No service provider assigned for chat.","info",3e3,"Info")},Te=async(ze,We)=>{We.stopPropagation(),te(ze),J(!0)},Ge=async(ze,We)=>{We.stopPropagation();const ut=window.prompt("Please provide a reason for cancelling this request:");if(ut!==null){if(!ut.trim()){i("Cancellation reason is required.","error",3e3,"Error");return}try{console.log("Cancelling request:",ze._id);const dt=await Nr.delete(`/user/service-request/${ze._id}/cancel`,{data:{cancellationReason:ut.trim()}});console.log("Cancel request response:",dt.data),dt.data.success?(i("Request cancelled successfully!","success",3e3,"Success"),we()):i("Failed to cancel request. Please try again.","error",4e3,"Error")}catch(dt){console.error("Error cancelling request:",dt),i("Failed to cancel request. Please try again.","error",4e3,"Error")}}},Y=async(ze,We)=>{if(We.stopPropagation(),t.role!=="Service Provider"){i("You must complete your service provider application and get approved by an admin before accepting service requests.","error",5e3,"Application Required");return}try{(await Nr.post(`/user/service-request/${ze._id}/accept`)).data.success&&(i("Request accepted successfully!","success",3e3,"Success"),Le())}catch(ut){console.error(ut),i("Failed to accept request. Please try again.","error",4e3,"Error")}},Ae=async ze=>{ze.stopPropagation(),i("Request declined.","info",3e3,"Info"),Le()},fe=()=>{J(!1),te(null)},be=async()=>{try{const ze={name:ce.name?.trim(),address:ce.address?.trim(),phone:ce.phone?.trim(),typeOfWork:ce.typeOfWork?.trim(),time:ce.time?.trim(),budget:ce.budget?parseFloat(ce.budget):0,notes:ce.notes?.trim()||"",location:ce.location||null};if(!ze.name||!ze.address||!ze.phone||!ze.typeOfWork||!ze.time){i("Please fill in all required fields.","error",4e3,"Validation Error");return}(await Nr.put(`/user/service-request/${ce._id}/update`,ze)).data.success&&(i("Request updated successfully!","success",3e3,"Success"),we(),fe())}catch(ze){console.error(ze);let We="Failed to update request. Please try again.";ze.response?.status===400?ze.response.data?.message?.includes("Cannot edit request that is in progress")?(We="This request has been accepted by a service provider and can no longer be edited.",we(),fe()):We=ze.response.data?.message||We:ze.response?.status===403?We="You don't have permission to edit this request.":ze.response?.status===404?(We="Request not found. It may have been deleted.",we(),fe()):We=ze.response?.data?.message||We,i(We,"error",4e3,"Error")}},Me=async()=>{i("Request declined.","info",3e3,"Info"),Le()};return d.jsxs("div",{className:"records-page",children:[d.jsxs("div",{className:"records-header",children:[d.jsx("h2",{children:"Records & Requests"}),d.jsxs("div",{className:"records-controls",children:[d.jsx("input",{type:"text",placeholder:"Search by service, client, budget, address, phone...",value:n,onChange:ze=>a(ze.target.value),className:"records-search"}),d.jsx("button",{className:`records-filter-btn ${F?"active":""}`,onClick:()=>C(!F),children:F?"Hide Filters":"Show Filters"})]}),F&&d.jsx("div",{className:"records-filters",children:d.jsxs("div",{className:"filter-row",children:[d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{children:"Status:"}),d.jsxs("select",{value:c,onChange:ze=>s(ze.target.value),className:"filter-select",children:[d.jsx("option",{value:"All",children:"All Status"}),d.jsx("option",{value:"Available",children:"Available"}),d.jsx("option",{value:"Working",children:"Working"}),d.jsx("option",{value:"Complete",children:"Complete"}),d.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{children:"Min Budget ():"}),d.jsx("input",{type:"number",placeholder:"0",value:v.min,onChange:ze=>B(We=>({...We,min:ze.target.value})),className:"filter-input",min:"0"})]}),d.jsxs("div",{className:"filter-group",children:[d.jsx("label",{children:"Max Budget ():"}),d.jsx("input",{type:"number",placeholder:"No limit",value:v.max,onChange:ze=>B(We=>({...We,max:ze.target.value})),className:"filter-input",min:"0"})]}),d.jsx("div",{className:"filter-group",children:d.jsx("button",{className:"clear-filters-btn",onClick:()=>{s("All"),g("All"),B({min:"",max:""}),a("")},children:"Clear All"})})]})})]}),d.jsxs("div",{className:"records-tabs",children:[d.jsx("button",{className:`tab-button ${L==="my-requests"?"active":""}`,onClick:()=>P("my-requests"),children:"My Requests"}),d.jsx("button",{className:`tab-button ${L==="available-requests"?"active":""} ${t.role!=="Service Provider"?"disabled":""}`,onClick:t.role==="Service Provider"?()=>P("available-requests"):void 0,disabled:t.role!=="Service Provider",children:"Available Requests"}),d.jsx("button",{className:`tab-button ${L==="work-records"?"active":""} ${t.role!=="Service Provider"?"disabled":""}`,onClick:t.role==="Service Provider"?()=>P("work-records"):void 0,disabled:t.role!=="Service Provider",children:"Work Records"})]}),d.jsxs("div",{className:"records-content",children:[L==="my-requests"&&d.jsx(hle,{searchTerm:n,filterStatus:c,filterServiceType:p,filterBudgetRange:v,handleRequestClick:he,handleChatRequest:Ne,handleEditRequest:Te,handleCancelRequest:Ge,getStatusClass:Fe}),L==="available-requests"&&d.jsx(Ale,{searchTerm:n,filterStatus:c,filterServiceType:p,filterBudgetRange:v,handleRequestClick:he,handleAcceptRequest:Y,handleDeclineRequest:Ae,getStatusClass:Fe}),L==="work-records"&&d.jsx(dle,{searchTerm:n,filterStatus:c,filterServiceType:p,filterBudgetRange:v,handleRequestClick:he,getStatusClass:Fe})]}),d.jsx(cle,{request:q,isOpen:D,onClose:Le,onChat:$e,onDelete:Me,onAccept:Y,onDecline:Ae}),d.jsx(ule,{request:ne,isOpen:ee,onClose:()=>{G(!1),Z(null)}}),le&&d.jsx("div",{className:"edit-modal",children:d.jsxs("div",{className:"edit-modal-content",children:[d.jsx("h3",{children:"Edit Request"}),d.jsxs("form",{onSubmit:ze=>{ze.preventDefault(),be()},children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Name:"}),d.jsx("input",{type:"text",value:ce.name,onChange:ze=>te({...ce,name:ze.target.value}),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Address:"}),d.jsx("input",{type:"text",value:ce.address,onChange:ze=>te({...ce,address:ze.target.value}),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Phone:"}),d.jsx("input",{type:"text",value:ce.phone,onChange:ze=>te({...ce,phone:ze.target.value}),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Service Type:"}),d.jsx("input",{type:"text",value:ce.typeOfWork,onChange:ze=>te({...ce,typeOfWork:ze.target.value}),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Preferred Time:"}),d.jsx("input",{type:"text",value:ce.time,onChange:ze=>te({...ce,time:ze.target.value}),required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Budget ():"}),d.jsx("input",{type:"number",value:ce.budget,onChange:ze=>te({...ce,budget:ze.target.value}),min:"0"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Notes:"}),d.jsx("textarea",{value:ce.notes,onChange:ze=>te({...ce,notes:ze.target.value})})]}),d.jsxs("div",{className:"modal-actions",children:[d.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),d.jsx("button",{type:"button",className:"cancel-btn",onClick:fe,children:"Cancel"})]})]})]})})]})},ple=({isOpen:e,onClose:t,title:r="Success!",message:i="Operation completed successfully.",confirmText:n="OK"})=>{if(!e)return null;const a=c=>{c.target===c.currentTarget&&t()};return d.jsx("div",{className:"popup-overlay",onClick:a,children:d.jsxs("div",{className:"popup-content success-popup",children:[d.jsxs("div",{className:"popup-header",children:[d.jsx("div",{className:"success-icon",children:""}),d.jsx("h3",{children:r})]}),d.jsx("div",{className:"popup-body",children:d.jsx("p",{children:i})}),d.jsx("div",{className:"popup-footer",children:d.jsx("button",{className:"popup-button confirm-button",onClick:t,children:n})})]})})},mle=()=>{const{isAuthorized:e,user:t}=io(),r=Wo(),{showNotification:i}=VL(),[n,a]=xe.useState([]),[c,s]=xe.useState(!1),p=xe.useRef(null),[g,v]=xe.useState(null),[B,F]=xe.useState(null),[C,L]=xe.useState(!1),[P,D]=xe.useState(null),[j,q]=xe.useState(null),[H,ee]=xe.useState(""),G=xe.useCallback(async()=>{if(e)try{console.log("Fetching service requests...");const J=await Nr.get("/user/service-requests",{withCredentials:!0}),{data:ce}=J;console.log("API Response:",ce),console.log("Requests received:",ce.requests?.length||0),ce.requests&&ce.requests.length>0&&(console.log("Sample request:",ce.requests[0]),console.log("Sample requester data:",ce.requests[0].requester),console.log("Requester firstName:",ce.requests[0].requester?.firstName),console.log("Requester lastName:",ce.requests[0].requester?.lastName),console.log("Requester username:",ce.requests[0].requester?.username)),ce.debug&&console.log("Debug info:",ce.debug),a(ce.requests||[])}catch(J){console.error("API Error:",J),console.error("Error response:",J.response?.data)}},[e]);xe.useEffect(()=>{e&&t&&G()},[e,t,G]),xe.useEffect(()=>{if(p.current&&!g){const J=new tA.Map({container:p.current,style:{version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]},center:[121,14],zoom:10});J.on("load",()=>{v(J)}),J.on("click",async ce=>{const{lng:te,lat:K}=ce.lngLat;F({lat:K,lng:te}),new tA.Marker({color:"#ff0000",scale:.8}).setLngLat([te,K]).addTo(J);try{const we=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${K}&lon=${te}&addressdetails=1`,{headers:{"User-Agent":"SkillConnect/1.0"}})).json();we&&we.display_name&&ee(we.display_name)}catch(me){console.error("Reverse geocoding failed:",me)}})}return()=>{g&&(g.remove(),v(null))}},[g]);const ne=J=>{a(ce=>ce.filter(te=>te._id!==J))},Z=async()=>{if(!navigator.geolocation){q("Geolocation is not supported by this browser.");return}q(null),navigator.geolocation.getCurrentPosition(async J=>{const{latitude:ce,longitude:te}=J.coords;F({lat:ce,lng:te}),g&&(g.flyTo({center:[te,ce],zoom:15}),new tA.Marker({color:"#ff0000",scale:.8}).setLngLat([te,ce]).addTo(g));try{const me=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${ce}&lon=${te}&addressdetails=1`,{headers:{"User-Agent":"SkillConnect/1.0"}})).json();me&&me.display_name&&ee(me.display_name)}catch(K){console.error("Reverse geocoding failed:",K)}},J=>{switch(J.code){case J.PERMISSION_DENIED:q("Location access denied by user.");break;case J.POSITION_UNAVAILABLE:q("Location information is unavailable.");break;case J.TIMEOUT:q("Location request timed out.");break;default:q("An unknown error occurred.");break}},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},le=async()=>{if(!B||!P){i("Please select a location on the map.","error",4e3,"Error");return}try{(await Nr.post("/user/post-service-request",{...P,address:H||P.address,latitude:B.lat,longitude:B.lng})).data.success?(s(!0),L(!1),D(null),F(null),ee("")):i("Failed to submit service request.","error",4e3,"Error")}catch(J){i(J.response?.data?.message||"Failed to submit service request.","error",4e3,"Error")}};return d.jsxs("div",{className:"clients-container",children:[d.jsx("h2",{className:"clients-title",children:"Clients"}),n.length===0?d.jsxs("div",{className:"no-requests",children:[d.jsx("i",{className:"fas fa-users no-requests-icon"}),d.jsx("h3",{className:"no-requests-title",children:"No Client Requests"}),d.jsx("p",{className:"no-requests-text",children:"No client requests available at the moment."})]}):d.jsx("div",{children:n.map(J=>d.jsxs("div",{className:"client-card",children:[d.jsxs("div",{className:"client-header",children:[d.jsx("div",{className:"client-avatar",children:d.jsx("i",{className:"fas fa-user"})}),d.jsxs("div",{className:"client-info",children:[d.jsx("h3",{children:J.requester&&J.requester.firstName&&J.requester.lastName?`${J.requester.firstName} ${J.requester.lastName}`:J.requester&&J.requester.username?J.requester.username:"Unknown Client"}),d.jsx("p",{className:"client-email",children:J.requester?.email||"email@example.com"}),d.jsx("p",{className:"client-phone",children:J.requester?.phone||"No phone"})]})]}),d.jsxs("div",{className:"service-needed",children:["Service Needed: ",J.typeOfWork]}),d.jsxs("div",{className:"service-details",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-wallet detail-icon"}),d.jsxs("div",{className:"detail-content",children:[d.jsx("span",{className:"detail-label",children:"Budget:"}),d.jsxs("span",{className:"detail-value",children:["",J.budget||"0"]})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-calendar detail-icon"}),d.jsxs("div",{className:"detail-content",children:[d.jsx("span",{className:"detail-label",children:"Date Required:"}),d.jsx("span",{className:"detail-value",children:J.preferredDate?new Date(J.preferredDate).toLocaleDateString():"Not specified"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-clock detail-icon"}),d.jsxs("div",{className:"detail-content",children:[d.jsx("span",{className:"detail-label",children:"Preferred Time:"}),d.jsx("span",{className:"detail-value",children:J.time||"Not specified"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-map-marker-alt detail-icon"}),d.jsxs("div",{className:"detail-content",children:[d.jsx("span",{className:"detail-label",children:"Location:"}),d.jsx("span",{className:"detail-value",children:J.location?`${J.location.lat}, ${J.location.lng}`:"Not specified"})]})]})]}),J.notes&&d.jsxs("div",{className:"service-note",children:[d.jsx("strong",{children:"Note:"})," ",J.notes]}),d.jsxs("div",{className:"client-actions",children:[d.jsx("button",{className:"accept-button",onClick:()=>r("/user/accepted-request",{state:{requestId:J._id}}),children:" Accept"}),d.jsx("button",{className:"decline-button",onClick:()=>ne(J._id),children:" Decline"})]})]},J._id))}),d.jsx(ple,{isOpen:c,onClose:()=>s(!1),title:"Request Sent!",message:"Service request sent successfully! The provider will be notified.",confirmText:"Great!"}),C&&d.jsx("div",{className:"map-modal-overlay",children:d.jsxs("div",{className:"map-modal",children:[d.jsx("h3",{children:"Select Location on Map"}),d.jsxs("div",{className:"location-controls",children:[d.jsx("button",{type:"button",onClick:Z,className:"location-button",children:" Use My Location"}),j&&d.jsx("div",{className:"location-error",children:j}),H&&d.jsxs("div",{className:"address-detected",children:[d.jsx("strong",{children:"Detected Address:"})," ",H,d.jsx("button",{type:"button",onClick:()=>{D(J=>({...J,address:H})),ee("")},className:"use-address-button",children:"Use This Address"})]})]}),d.jsx("div",{ref:p,className:"map-container"}),d.jsxs("div",{className:"map-modal-actions",children:[d.jsx("button",{className:"cancel-modal-button",onClick:()=>{L(!1),D(null),F(null)},children:"Cancel"}),d.jsx("button",{className:"confirm-modal-button",onClick:()=>{B?le():i("Please select a location on the map.","error",4e3,"Error")},children:"Confirm Location"})]})]})})]})},gle=()=>{const[e,t]=xe.useState(null),[r,i]=xe.useState(!0),[n,a]=xe.useState(""),[c,s]=xe.useState([]),[p,g]=xe.useState(!0),[v,B]=xe.useState({averageRating:0,totalReviews:0}),[F,C]=xe.useState([]),[L,P]=xe.useState(!1),D=Wo();xe.useEffect(()=>{j()},[]),xe.useEffect(()=>{e?._id&&(q(e._id),e.role==="Service Provider"&&H())},[e?._id,e?.role]);const j=async()=>{try{i(!0);const K=await Nr.get("/user/me");K.data.success&&t(K.data.user)}catch(K){a("Failed to fetch profile data"),console.error("Error fetching profile:",K)}finally{i(!1)}},q=async K=>{try{g(!0);const[me,we]=await Promise.all([Nr.get(`/review/user/${K}`),Nr.get(`/review/stats/${K}`)]);me.data.success&&s(me.data.reviews||[]),we.data.success&&B(we.data.stats||{averageRating:0,totalReviews:0})}catch(me){console.error("Error fetching review insights:",me)}finally{g(!1)}},H=async()=>{try{P(!0);const K=await Nr.get("/settings/my-completed-jobs");K.data.success&&C(K.data.jobs||[])}catch(K){console.error("Error fetching completed jobs:",K)}finally{P(!1)}},ee=K=>{if(!K)return"";const[me,we]=K.split("@");return we?`${me.slice(0,2)}${"*".repeat(Math.max(me.length-2,3))}@${we}`:K},G=K=>K?K.replace(/.(?=.{4})/g,"*"):"",ne=(K="")=>{const[me,we]=K.split(",");return we?`${me.trim()}, ${we.trim()}`:K},Z=K=>K?new Date(K).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",le=xe.useMemo(()=>!e?.skills||e.skills.length===0?"No skills added yet":e.skills.map(K=>K.charAt(0).toUpperCase()+K.slice(1)).join("  "),[e?.skills]),J=(K=0)=>Array.from({length:5},(me,we)=>{const Fe=we+1;return d.jsx("span",{className:"star-icon","aria-hidden":"true",children:K>=Fe?d.jsx(l5,{}):d.jsx(nO,{})},Fe)}),ce=["","",""];if(r)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2"})});if(!e)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Profile Not Found"}),d.jsx("p",{className:"text-gray-600",children:"Unable to load your profile data."})]})});const te=e.serviceDescription||"Reliable and detail-oriented worker.";return d.jsx("div",{className:"main-content manage-profile-shell",children:d.jsx("div",{className:"profile-wrapper profile-overview",children:d.jsxs("div",{className:"profile-layout-grid",children:[d.jsxs("aside",{className:"profile-summary-card",children:[d.jsx("div",{className:"summary-avatar",children:e.profilePic?d.jsx("img",{src:gp(e.profilePic),alt:"Profile"}):d.jsx("div",{className:"avatar-placeholder-large",children:e.firstName?.charAt(0)||e.lastName?.charAt(0)||"S"})}),d.jsxs("div",{className:"summary-details",children:[d.jsx("h2",{children:`${e.firstName||""} ${e.lastName||""}`.trim()}),d.jsx("p",{className:"summary-role",children:e.occupation||"Independent Specialist"}),d.jsx("p",{className:"summary-location",children:ne(e.address)})]}),d.jsxs("div",{className:"summary-rating-row",children:[d.jsxs("div",{children:[d.jsx("span",{className:"rating-value",children:v.averageRating?v.averageRating.toFixed(1):"0.0"}),d.jsx("span",{className:"rating-label",children:"/ 5 rating"})]}),d.jsxs("div",{className:"rating-meta",children:[d.jsxs("span",{children:[v.totalReviews||0," Reviews"]}),d.jsxs("span",{children:[e.bookings?.length||0," Jobs"]})]})]}),d.jsxs("div",{className:"summary-info-grid",children:[d.jsxs("div",{className:"info-line",children:[d.jsx("span",{children:"Email"}),d.jsx("strong",{children:ee(e.email)})]}),d.jsxs("div",{className:"info-line",children:[d.jsx("span",{children:"Phone"}),d.jsx("strong",{children:G(e.phone)})]}),d.jsxs("div",{className:"info-line",children:[d.jsx("span",{children:"Skills"}),d.jsx("strong",{children:le})]}),d.jsxs("div",{className:"info-line",children:[d.jsx("span",{children:"Services"}),d.jsx("strong",{children:e.services?.length?`${e.services.length} Listed`:"Not set"})]})]}),d.jsx("blockquote",{className:"profile-quote",children:te}),d.jsxs("p",{className:"privacy-note",children:["*If the individual user views the skilled user their email and phone number will be hidden",d.jsx("br",{}),"ex: ju****@gmail.com, 09*****65"]}),d.jsx("button",{type:"button",className:"btn-outline profile-edit-btn",onClick:()=>D("/user/general-settings"),children:"Edit Profile"})]}),d.jsxs("section",{className:"profile-reviews-panel",children:[d.jsxs("div",{className:"reviews-header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"eyebrow-text",children:"Performance Snapshot"}),d.jsx("h1",{className:"page-title",children:"All Reviews"})]}),d.jsxs("div",{className:"reviews-header-meta",children:[d.jsxs("span",{children:[v.averageRating?v.averageRating.toFixed(1):"0.0"," "]}),d.jsxs("span",{children:[v.totalReviews||0," total reviews"]})]})]}),n&&d.jsx("div",{className:"error-message",children:n}),p?d.jsx("div",{className:"reviews-loading",children:"Loading feedback"}):c.length===0?d.jsxs("div",{className:"reviews-empty",children:[d.jsx("p",{children:"No reviews yet"}),d.jsx("small",{children:"Completed jobs will automatically appear here when clients leave feedback."})]}):d.jsx("div",{className:"reviews-stack",children:c.map(K=>d.jsxs("article",{className:"review-card",children:[d.jsxs("header",{className:"review-card-header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"review-type",children:"Client Review"}),d.jsx("h3",{children:K.clientName||"Anonymous Client"}),d.jsxs("p",{className:"review-service-label",children:["Service Needed:",d.jsx("span",{children:K.service||"Service Request"})]})]}),d.jsx("span",{className:"review-date",children:Z(K.createdAt)})]}),d.jsxs("div",{className:"review-comment",children:[d.jsx("span",{children:"Comment:"})," ",K.comment||"No comment was provided."]}),d.jsxs("div",{className:"review-proof",children:[d.jsx("span",{children:"Proof Work:"}),d.jsx("div",{className:"proof-grid",children:(K.images?.length?K.images:ce).map((me,we)=>me?d.jsx("img",{src:gp(me),alt:`Proof ${we+1}`},we):d.jsx("div",{className:"proof-placeholder","aria-hidden":"true"},we))})]}),d.jsxs("div",{className:"review-rating-row",children:[d.jsx("span",{children:"Rating:"}),d.jsxs("div",{className:"stars-row",children:[J(K.rating),d.jsx("strong",{children:K.rating?.toFixed(1)||"0.0"})]})]})]},K.id))}),e.role==="Service Provider"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"reviews-header",style:{marginTop:"2rem"},children:[d.jsxs("div",{children:[d.jsx("p",{className:"eyebrow-text",children:"Work History"}),d.jsx("h1",{className:"page-title",children:"Completed Jobs"})]}),d.jsx("div",{className:"reviews-header-meta",children:d.jsxs("span",{children:[F.length," completed jobs"]})})]}),L?d.jsx("div",{className:"reviews-loading",children:"Loading completed jobs"}):F.length===0?d.jsxs("div",{className:"reviews-empty",children:[d.jsx("p",{children:"No completed jobs yet"}),d.jsx("small",{children:"Jobs you complete will appear here."})]}):d.jsx("div",{className:"reviews-stack",children:F.map(K=>d.jsxs("article",{className:"review-card",children:[d.jsxs("header",{className:"review-card-header",children:[d.jsxs("div",{children:[d.jsx("p",{className:"review-type",children:"Completed Job"}),d.jsxs("h3",{children:[K.requester?.firstName||"Unknown"," ",K.requester?.lastName||"Client"]}),d.jsxs("p",{className:"review-service-label",children:["Service:",d.jsx("span",{children:K.typeOfWork||"Service Request"})]})]}),d.jsx("span",{className:"review-date",children:Z(K.updatedAt)})]}),d.jsxs("div",{className:"review-comment",children:[d.jsx("span",{children:"Budget:"})," ",K.budget||0]}),K.completionNotes&&d.jsxs("div",{className:"review-comment",children:[d.jsx("span",{children:"Completion Notes:"})," ",K.completionNotes]}),K.proofOfWork&&K.proofOfWork.length>0&&d.jsxs("div",{className:"review-proof",children:[d.jsx("span",{children:"Proof of Work:"}),d.jsx("div",{className:"proof-grid",children:K.proofOfWork.map((me,we)=>d.jsx("img",{src:gp(me),alt:`Proof ${we+1}`},we))})]}),d.jsxs("div",{className:"review-rating-row",children:[d.jsx("span",{children:"Status:"}),d.jsx("span",{className:"status-completed",children:"Completed"})]})]},K._id))})]})]})]})})})},vle=({requestData:e})=>{const t=sh();e||t.state?.requestData;const[r,i]=xe.useState("Searching"),[n,a]=xe.useState(null),[c,s]=xe.useState(null),[p,g]=xe.useState([]),[v,B]=xe.useState({}),[F,C]=xe.useState({}),[L,P]=xe.useState(null),[D,j]=xe.useState(null),[q,H]=xe.useState(!0),[ee,G]=xe.useState(null),ne=async()=>{try{console.log("WaitingForWorkerPage - Fetching current provider profile");const J=await Nr.get("/user/profile");if(J.data?.user){const ce=J.data.user;return console.log("WaitingForWorkerPage - Current provider:",ce),j(ce),ce}}catch(J){console.error("WaitingForWorkerPage - Failed to fetch provider profile:",J)}return null},Z=async J=>{if(J)try{console.log("WaitingForWorkerPage - Fetching all available requests");let ce=[];try{const K=await Nr.get("/user/all-service-requests");K.data?.success&&K.data.requests&&(ce=K.data.requests,console.log("WaitingForWorkerPage - Got requests from all-service-requests:",ce.length))}catch{console.log("WaitingForWorkerPage - Primary endpoint failed, trying alternatives")}if(ce.length===0)try{const K=await Nr.get("/settings/available-requests");K.data?.success&&K.data.requests&&(ce=K.data.requests,console.log("WaitingForWorkerPage - Got requests from available-requests:",ce.length))}catch{console.log("WaitingForWorkerPage - Fallback endpoint also failed")}const te=ce.filter(K=>{if(!(K.status==="Waiting"||K.status==="Open")||!(K.requester?._id!==J._id)||!(!K.serviceProvider||K.serviceProvider._id===J._id))return!1;const he=J.skills?.some(Ne=>Ne.toLowerCase().includes(K.typeOfWork?.toLowerCase())||K.typeOfWork?.toLowerCase().includes(Ne.toLowerCase())),Le=K.budget&&J.serviceRate&&Math.abs(K.budget-J.serviceRate)/J.serviceRate<=.5,$e=he||Le;return $e&&console.log("WaitingForWorkerPage - Request matches provider:",{requestId:K._id,typeOfWork:K.typeOfWork,budget:K.budget,skillsMatch:he,budgetMatches:Le,providerSkills:J.skills,providerRate:J.serviceRate}),$e});console.log("WaitingForWorkerPage - Found",te.length,"matched requests for provider"),g(te)}catch(ce){console.error("WaitingForWorkerPage - Failed to fetch available requests:",ce),g([])}},le=async J=>{if(!J||!D)return alert("Unable to process application.");P(J);try{(await Nr.post("/user/apply-to-request",{requestId:J,providerId:D._id})).data.success?(alert("Application submitted successfully! The client will be notified."),await Z(D)):alert("Failed to submit application.")}catch(ce){const te=ce.response?.data?.message||ce.message||"Failed to apply";alert(`${te}. Please try again.`)}finally{P(null)}};return xe.useEffect(()=>{if((async()=>{H(!0),G(null);const ce=await ne();ce?await Z(ce):G("Unable to load provider profile"),H(!1)})(),Gi){const ce=te=>{console.log("WaitingForWorkerPage - Real-time request update:",te),D&&Z(D)};return Gi.on("service-request-updated",ce),Gi.on("new-service-request",ce),()=>{Gi.off("service-request-updated",ce),Gi.off("new-service-request",ce)}}},[]),q?d.jsx("div",{className:"loading-container",children:d.jsxs("div",{className:"loading-content",children:[d.jsx("div",{className:"spinner"}),d.jsx("h3",{children:"Loading your request"}),d.jsx("p",{children:"Please wait a moment..."})]})}):ee?d.jsxs("div",{className:"error-container",children:[d.jsx("h2",{children:" Error"}),d.jsx("p",{children:ee}),d.jsx("button",{onClick:()=>window.location.reload(),children:" Refresh Page"})]}):d.jsx("div",{className:"page-wrapper",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"grid-layout",children:[d.jsxs("div",{className:"main-content",children:[d.jsxs("div",{className:"card header-card",children:[d.jsxs("div",{className:"header-left",children:[d.jsx("h2",{children:"Available Jobs"}),d.jsx("p",{children:"Matching your skills"})]}),d.jsxs("div",{className:"status-badge status-found",children:[p.length," Jobs Found"]})]}),D&&d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"card-title",children:"Your Profile"}),d.jsxs("div",{className:"details-grid",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Name"}),d.jsxs("p",{children:[D.firstName," ",D.lastName]})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Service Rate"}),d.jsxs("p",{children:["",D.serviceRate||"Not set"]})]})]})]}),d.jsxs("div",{className:"detail-row detail-notes",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Your Skills"}),d.jsx("p",{children:D.skills?.join(", ")||"No skills listed"})]})]})]})]}),d.jsx("div",{className:"center-content",children:d.jsxs("div",{className:"card",children:[d.jsx("h3",{className:"card-title",children:"Jobs Matching Your Skills & Rate"}),p.length>0?d.jsx("div",{className:"providers-list",children:p.map(J=>{const ce=J.requester?`${J.requester.firstName||""} ${J.requester.lastName||""}`.trim()||J.requester.username||"Unknown Client":"N/A";return d.jsxs("div",{className:"provider-item",children:[d.jsxs("div",{className:"provider-summary",children:[d.jsx("img",{src:J.requester?.profilePic||"/default-profile.png",alt:ce,className:"provider-image"}),d.jsxs("div",{className:"provider-info",children:[d.jsx("h4",{children:ce}),d.jsx("div",{className:"provider-rating",children:d.jsx("span",{children:J.typeOfWork||"General Service"})}),d.jsxs("div",{className:"provider-stats",children:[d.jsxs("span",{className:"provider-price",children:["",J.budget||"0"]}),d.jsx("span",{className:"provider-status online",children:" Available"})]})]}),d.jsx("button",{onClick:()=>le(J._id),disabled:L===J._id,className:"provider-button",children:L===J._id?"Applying...":"Apply"})]}),d.jsxs("div",{className:"provider-details",children:[d.jsxs("div",{className:"detail-section",children:[d.jsx("div",{className:"section-label",children:"Service Needed"}),d.jsx("div",{className:"section-text",children:J.typeOfWork||"General Service"})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("div",{className:"section-label",children:"Location"}),d.jsx("div",{className:"section-text",children:J.address||"Not specified"})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("div",{className:"section-label",children:"Preferred Time"}),d.jsx("div",{className:"section-text",children:J.time||"Flexible"})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("div",{className:"section-label",children:"Budget"}),d.jsxs("div",{className:"section-text",children:["",J.budget||"0"]})]}),J.notes&&d.jsxs("div",{className:"detail-section",children:[d.jsx("div",{className:"section-label",children:"Notes"}),d.jsx("div",{className:"section-text",children:J.notes})]}),d.jsxs("div",{className:"detail-section",children:[d.jsx("div",{className:"section-label",children:"Posted"}),d.jsx("div",{className:"section-text",children:J.createdAt?new Date(J.createdAt).toLocaleDateString():"Unknown"})]})]})]},J._id)})}):d.jsxs("div",{className:"empty-state",children:[d.jsx("div",{className:"empty-icon",children:d.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),d.jsx("h4",{className:"empty-title",children:"No matching jobs found"}),d.jsx("p",{className:"empty-text",children:"Jobs matching your skills and rate will appear here"})]})]})}),d.jsx("div",{className:"sidebar",children:d.jsxs("div",{className:"actions-card",children:[d.jsxs("div",{className:"info-card",children:[d.jsx("h4",{children:"How Matching Works"}),d.jsx("p",{children:"You see jobs that match:"}),d.jsxs("ul",{style:{paddingLeft:20,margin:0},children:[d.jsx("li",{children:"Your listed skills"}),d.jsx("li",{children:"Jobs within 50% of your rate"}),d.jsx("li",{children:"Available requests only"})]})]}),D&&d.jsxs("div",{className:"info-card",style:{marginTop:20},children:[d.jsx("h4",{children:"Your Stats"}),d.jsxs("p",{children:["Skills: ",D.skills?.length||0]}),d.jsxs("p",{children:["Rate: ",D.serviceRate||"Not set"]})]})]})})]})})})},xle=()=>{const e=Wo(),r=sh().state?.requestId,{isAuthorized:i,user:n}=io(),[a,c]=xe.useState(null),[s,p]=xe.useState(!1),[g,v]=xe.useState(!1);xe.useEffect(()=>{if(i&&n){if(!r){pi.error("No request ID found."),e("/user/users-request");return}(async()=>{try{const D=(await Nr.get("/user/service-requests",{withCredentials:!0})).data.requests.find(j=>j._id===r);D?c(D):(pi.error("Request not found."),e("/user/users-request"))}catch(L){console.error("Error fetching request:",L),pi.error("Failed to fetch request details."),e("/user/users-request")}})()}},[i,n,r,e]);const B=async()=>{if(a){v(!0);try{await Nr.post(`/user/service-request/${a._id}/accept`,{},{withCredentials:!0}),pi.success("Request accepted successfully!"),e("/user/dashboard")}catch{pi.error("Failed to accept request.")}finally{v(!1)}}},F=async()=>{if(a){p(!0);try{await Nr.put(`/user/service-request/${a._id}/cancel`,{},{withCredentials:!0}),pi.success("Request cancelled successfully."),e("/user/service-requests")}catch{pi.error("Failed to cancel request.")}finally{p(!1)}}};return a?d.jsxs("div",{className:"accepted-request-container",children:[d.jsxs("div",{className:"header",children:[d.jsx("button",{className:"back-button",onClick:()=>e(-1),children:""}),d.jsx("h1",{children:"Client"})]}),d.jsxs("div",{className:"profile-section",children:[d.jsx("div",{className:"profile-avatar",children:d.jsx("div",{className:"avatar-placeholder"})}),d.jsxs("div",{className:"profile-info",children:[d.jsx("h2",{children:a.name}),d.jsxs("p",{children:[" ",a.requester?.email||"N/A"]}),d.jsxs("p",{children:[" ",a.phone]})]})]}),d.jsxs("div",{className:"details-section",children:[d.jsx("h3",{children:"Client Details"}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"icon",children:""}),d.jsx("span",{className:"label",children:"Name:"}),d.jsx("span",{className:"value",children:a.name})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"icon",children:""}),d.jsx("span",{className:"label",children:"Email:"}),d.jsx("span",{className:"value",children:a.requester?.email||"N/A"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("span",{className:"icon",children:""}),d.jsx("span",{className:"label",children:"Phone:"}),d.jsx("span",{className:"value",children:a.phone})]})]}),d.jsxs("div",{className:"service-details",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Service Needed:"}),d.jsx("span",{className:"value",children:a.typeOfWork})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Budget:"}),d.jsxs("span",{className:"value",children:["P",a.budget]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Date Required:"}),d.jsx("span",{className:"value",children:"10-18-2025"})," "]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Preferred Time:"}),d.jsx("span",{className:"value",children:"9:00AM - 12:00PM"})," "]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Location:"}),d.jsx("span",{className:"value",children:a.address})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Estimated Service Cost:"}),d.jsxs("span",{className:"value",children:["P",a.budget]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("span",{className:"label",children:"Match Rate:"}),d.jsxs("span",{className:"value",children:["P",a.budget]})," "]})]}),d.jsxs("div",{className:"note-section",children:[d.jsx("h3",{children:"Note:"}),d.jsx("p",{children:a.notes})]}),d.jsxs("div",{className:"button-group",children:[d.jsx("button",{className:"accept-button",onClick:B,disabled:g,children:g?"Accepting...":"Accept"}),d.jsx("button",{className:"cancel-button",onClick:F,disabled:s,children:s?"Cancelling...":"Cancel"})]})]}):d.jsx("div",{children:"Loading..."})},yle=({requestId:e})=>{const{user:t,openChat:r}=io(),i=sh(),[n,a]=xe.useState(null),[c,s]=xe.useState(!0),[p,g]=xe.useState(!1),[v,B]=xe.useState(""),[F,C]=xe.useState([]),[L,P]=xe.useState(null),D=e||i.state?.requestId,j=i.state?.request,q=xe.useCallback(async me=>{try{console.log("Skipping requester stats fetch - endpoint not available"),P(null)}catch(we){console.error("Error fetching requester stats:",we),P(null)}},[]),H=xe.useCallback(async()=>{try{s(!0),console.log("ClientAccepted - Fetching request data for ID:",D);try{const we=await Nr.get(`/user/service-request/${D}`);if(we.data.success){console.log("ClientAccepted - Got detailed request data:",we.data.request),a(we.data.request),we.data.request.requester?._id&&q(we.data.request.requester._id),s(!1);return}}catch{console.log("ClientAccepted - Detailed request endpoint not available, trying accepted requests endpoint")}const me=await Nr.get("/settings/my-accepted-requests");if(me.data.success){const we=me.data.requests.find(Fe=>Fe._id===D);we?(console.log("ClientAccepted - Found request in accepted requests:",we),a(we),we.requester?._id&&q(we.requester._id)):(console.error("ClientAccepted - Request not found in accepted requests"),alert("Request not found"),window.history.back())}else console.error("ClientAccepted - Failed to fetch accepted requests"),alert("Failed to load request data"),window.history.back()}catch(me){console.error("ClientAccepted - Error fetching request:",me),alert("Failed to load request data"),window.history.back()}finally{s(!1)}},[D,q]),ee=xe.useCallback(async()=>{try{s(!0);const me=await Nr.get("/settings/my-accepted-requests");if(me.data.success&&me.data.requests.length>0){const we=me.data.requests[0];a(we),we.requester?._id&&q(we.requester._id)}else alert("No active accepted requests found."),window.history.back()}catch(me){console.error("Error fetching accepted requests:",me),alert("Failed to load request data"),window.history.back()}finally{s(!1)}},[q]);xe.useEffect(()=>{console.log("ClientAccepted useEffect - Checking request status:",j?.status),j?(a(j),j.requester?._id&&q(j.requester._id),s(!1)):D?H():ee()},[D,j,q,H,ee]);const G=n?.serviceProvider?._id===t._id,ne=n?.requester?._id===t._id,Z=n?.status==="Completed",le=async()=>{if(window.confirm("Are you sure you want to cancel this service request?"))try{g(!0),(await Nr.delete(`/user-flow/service-request/${n._id}/cancel`)).data.success?(alert("Service request cancelled successfully!"),window.history.back()):alert("Failed to cancel the request. Please try again.")}catch(me){console.error("Error cancelling request:",me),alert("Failed to cancel the request. Please try again.")}finally{g(!1)}},J=()=>{const me=n?.requester?.phone||t?.phone||"09123456789";window.open(`tel:${me}`,"_self")},ce=()=>{r(n._id)},te=()=>{const me=document.createElement("input");me.type="file",me.multiple=!0,me.accept="image/*,video/*",me.onchange=we=>{const he=Array.from(we.target.files).map(Le=>({uri:URL.createObjectURL(Le),name:Le.name,type:Le.type,file:Le}));C(Le=>[...Le,...he])},me.click()},K=async()=>{if(F.length===0){alert("Please upload proof of work before completing the job.");return}try{g(!0),console.log("Simulating service completion - endpoint not available"),alert("Proof of work submitted and job completed successfully!"),window.location.reload()}catch(me){console.error("Error completing service request:",me),alert("Failed to submit proof. Please try again.")}finally{g(!1)}};return c?d.jsxs("div",{className:"client-accepted-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Loading request details..."})]}):n?Z?d.jsx(QC,{request:n,isOpen:!0,onClose:()=>window.history.back()}):d.jsx("div",{className:"client-accepted-container",children:d.jsxs("div",{className:"layout-grid",children:[d.jsx("div",{className:"left-column",children:d.jsxs("div",{className:"job-summary-card",children:[d.jsx("h2",{className:"summary-title",children:"Job Summary"}),d.jsxs("div",{className:"job-details",children:[d.jsxs("div",{className:"detail-group",children:[d.jsx("label",{className:"detail-label",children:"Service"}),d.jsx("p",{className:"detail-value",children:n?.typeOfWork||"Not specified"})]}),d.jsxs("div",{className:"detail-group",children:[d.jsx("label",{className:"detail-label",children:"Budget"}),d.jsxs("p",{className:"detail-value",children:["",n?.budget||0]})]}),d.jsxs("div",{className:"detail-group",children:[d.jsx("label",{className:"detail-label",children:"Date created"}),d.jsx("p",{className:"detail-value",children:n?.createdAt?new Date(n.createdAt).toLocaleDateString():"Not specified"})]}),d.jsxs("div",{className:"detail-group",children:[d.jsx("label",{className:"detail-label",children:"Preferred time"}),d.jsx("p",{className:"detail-value",children:n?.time||"Not specified"})]})]}),d.jsxs("div",{className:"status-section",children:[d.jsx("label",{className:"status-label",children:"Status"}),d.jsx("p",{className:"status-value",children:n?.status||"Working"})]}),n?.notes&&d.jsxs("div",{className:"notes-section",children:[d.jsx("h4",{children:"Client Notes"}),d.jsx("p",{children:n.notes})]})]})}),d.jsx("div",{className:"middle-column",children:G?d.jsxs("div",{className:"proof-section-card",children:[d.jsx("h2",{className:"section-title",children:"Proof of Work"}),d.jsx("label",{className:"media-label",children:"Upload photos or videos of your completed work"}),d.jsx("div",{className:"media-section",children:d.jsxs("button",{className:`btn-upload ${p?"disabled":""}`,onClick:te,disabled:p,children:[d.jsx("i",{className:"fas fa-cloud-upload-alt"}),d.jsx("span",{children:"Click to upload"})]})}),F.length>0&&d.jsxs("div",{className:"media-container",children:[d.jsxs("div",{className:"media-count",children:["Uploaded (",F.length,")"]}),d.jsx("div",{className:"media-preview",children:F.map((me,we)=>d.jsxs("div",{className:"media-thumbnail",children:[d.jsx("img",{src:me.uri,alt:`Proof ${we+1}`,className:"media-item"}),d.jsx("button",{className:"remove-media",onClick:()=>C(Fe=>Fe.filter((he,Le)=>Le!==we)),title:"Remove",children:d.jsx("i",{className:"fas fa-times"})})]},we))})]}),d.jsxs("div",{className:"notes-input-section",children:[d.jsx("label",{className:"notes-label",children:"Completion Notes (Optional)"}),d.jsx("textarea",{className:"comment-input",value:v,onChange:me=>B(me.target.value),placeholder:"Add any notes about the completed work...",disabled:p,maxLength:500}),d.jsxs("p",{className:"input-hint",children:[v.length,"/500 characters"]})]}),d.jsx("div",{className:"completion-buttons",children:d.jsxs("button",{className:`btn-complete ${p?"disabled":""}`,onClick:K,disabled:p,children:[d.jsx("i",{className:"fas fa-check"}),p?"Submitting...":"Complete Job"]})})]}):ne?d.jsxs("div",{className:"review-section-card",children:[d.jsx("h2",{className:"section-title",children:"Service Completed"}),d.jsxs("div",{className:"review-content",children:[d.jsx("div",{className:"review-icon",children:d.jsx("i",{className:"fas fa-check-circle"})}),d.jsx("p",{className:"review-message",children:"Your service request has been completed. How was your experience?"}),d.jsxs("button",{className:"btn-give-review",onClick:()=>{alert("Navigate to give review page")},children:[d.jsx("i",{className:"fas fa-star"}),"Give Review"]})]})]}):d.jsxs("div",{className:"info-section-card",children:[d.jsx("h2",{className:"section-title",children:"Service Status"}),d.jsx("p",{children:"Loading service information..."})]})}),d.jsx("div",{className:"right-column",children:G?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"client-card",children:[d.jsx("h3",{className:"section-title",children:"Requestor"}),d.jsxs("div",{className:"client-profile",children:[d.jsx("img",{src:n?.requester?.profilePic||"/default-profile.png",alt:`${n?.requester?.firstName} ${n?.requester?.lastName}`,className:"profile-avatar-small"}),d.jsxs("div",{className:"client-info",children:[d.jsxs("h4",{className:"client-name",children:[n?.requester?.firstName||"Unknown"," ",n?.requester?.lastName||""]}),d.jsx("p",{className:"client-email",children:n?.requester?.email||"No email"}),n?.requester?.phone&&d.jsx("p",{className:"client-phone",children:n?.requester?.phone})]})]}),d.jsxs("div",{className:"client-actions",children:[d.jsxs("button",{className:"btn-call-sm",onClick:J,disabled:!n?.requester?.phone,children:[d.jsx("i",{className:"fas fa-phone"}),"Call"]}),d.jsxs("button",{className:"btn-chat-sm",onClick:ce,children:[d.jsx("i",{className:"fas fa-comments"}),"Chat"]})]}),d.jsxs("div",{className:"about-section",children:[d.jsx("h4",{children:"About Requestor"}),d.jsx("div",{className:"requester-stats",children:L?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Completed Jobs:"}),d.jsx("span",{className:"stat-value",children:L.completedRequests||0})]}),d.jsxs("div",{className:"stat-item",children:[d.jsx("span",{className:"stat-label",children:"Rating:"}),d.jsx("span",{className:"stat-value",children:L.averageRating?`${L.averageRating.toFixed(1)} `:"Not rated"})]}),L.verified&&d.jsxs("div",{className:"stat-item verified",children:[d.jsx("i",{className:"fas fa-check-circle"}),d.jsx("span",{children:"Verified Account"})]})]}):d.jsx("p",{className:"about-text",children:n?.requester?.verified?" Verified client":"Client account"})}),n?.requester?.bio&&d.jsx("p",{className:"about-text",children:n?.requester?.bio})]})]}),d.jsxs("button",{className:`btn-cancel-full ${p?"disabled":""}`,onClick:le,disabled:p,children:[d.jsx("i",{className:"fas fa-times"}),"Cancel Request"]})]}):ne?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"client-card",children:[d.jsx("h3",{className:"section-title",children:"Service Provider"}),d.jsxs("div",{className:"client-profile",children:[d.jsx("img",{src:n?.serviceProvider?.profilePic||"/default-profile.png",alt:`${n?.serviceProvider?.firstName} ${n?.serviceProvider?.lastName}`,className:"profile-avatar-small"}),d.jsxs("div",{className:"client-info",children:[d.jsxs("h4",{className:"client-name",children:[n?.serviceProvider?.firstName||"Unknown"," ",n?.serviceProvider?.lastName||""]}),d.jsx("p",{className:"client-email",children:n?.serviceProvider?.email||"No email"}),n?.serviceProvider?.phone&&d.jsx("p",{className:"client-phone",children:n?.serviceProvider?.phone})]})]}),d.jsxs("div",{className:"client-actions",children:[d.jsxs("button",{className:"btn-call-sm",onClick:()=>{const me=n?.serviceProvider?.phone||"09123456789";window.open(`tel:${me}`,"_self")},disabled:!n?.serviceProvider?.phone,children:[d.jsx("i",{className:"fas fa-phone"}),"Call"]}),d.jsxs("button",{className:"btn-chat-sm",onClick:ce,children:[d.jsx("i",{className:"fas fa-comments"}),"Chat"]})]}),d.jsxs("div",{className:"about-section",children:[d.jsx("h4",{children:"About Provider"}),d.jsx("p",{className:"about-text",children:n?.serviceProvider?.verified?" Verified provider":"Service provider"}),n?.serviceProvider?.bio&&d.jsx("p",{className:"about-text",children:n?.serviceProvider?.bio})]})]}),d.jsxs("button",{className:"btn-give-review-full",onClick:()=>{alert("Navigate to give review page")},children:[d.jsx("i",{className:"fas fa-star"}),"Give Review"]})]}):d.jsxs("div",{className:"info-card",children:[d.jsx("h3",{className:"section-title",children:"Profile Information"}),d.jsx("p",{children:"Loading profile details..."})]})})]})}):d.jsx("div",{className:"client-accepted-error",children:d.jsx("p",{children:"No request data available"})})},_le=({requestData:e})=>{const t=sh(),r=e||t.state?.requestData,[i,n]=xe.useState("Accepted"),[a,c]=xe.useState(null),[s,p]=xe.useState(null),[g,v]=xe.useState(!0),[B,F]=xe.useState(null),[C,L]=xe.useState(!1),[P,D]=xe.useState(null);xe.useEffect(()=>{if(!r){F("No request data available"),v(!1);return}if((async()=>{v(!0),F(null),p(r),(r.status==="Working"||r.status==="Accepted")&&(n("Accepted"),r.serviceProvider&&c({name:`${r.serviceProvider.firstName} ${r.serviceProvider.lastName}`,skill:r.typeOfWork,phone:r.serviceProvider.phone,image:gp(r.serviceProvider.profilePic)||"/default-profile.png",eta:r.eta})),v(!1)})(),Gi&&r._id){Gi.emit("join-service-request",r._id);const le=async J=>{if(J?.requestId===r._id)try{const te=(await Nr.get(`/user/service-request/${r._id}`)).data?.request;te&&(p(te),te.serviceProvider&&c({name:`${te.serviceProvider.firstName||""} ${te.serviceProvider.lastName||""}`.trim(),skill:te.typeOfWork,phone:te.serviceProvider.phone,image:gp(te.serviceProvider.profilePic)||"/default-profile.png",eta:te.eta}))}catch(ce){console.error("Failed to update request via socket:",ce)}};return Gi.on("service-request-updated",le),()=>{Gi.off("service-request-updated",le),Gi.emit("leave-service-request",r._id)}}},[r]);const j=async()=>{if(s?._id&&window.confirm("Are you sure you want to cancel this order?"))try{(await Nr.delete(`/user/service-request/${s._id}/cancel`)).data.success?(alert("Order cancelled successfully"),window.history.back()):alert("Failed to cancel the order. Please try again.")}catch(Z){console.error("Error cancelling order:",Z),alert("Failed to cancel the order. Please try again.")}},q=async()=>{if(s.serviceProvider)try{const J=((await Nr.get("/user/bookings")).data.bookings||[]).find(ce=>ce.serviceRequest&&ce.serviceRequest._id===s._id);alert(J?`Opening chat with ${s.serviceProvider.firstName}`:"No active booking found for this request.")}catch(Z){console.error("Error finding booking for chat:",Z),alert("Failed to open chat. Please try again.")}else alert("No service provider assigned for chat.")},H=async()=>{if(P){L(!0);try{const J=((await Nr.get("/user/bookings")).data.bookings||[]).find(te=>te.serviceRequest&&te.serviceRequest._id===s._id);if(!J){alert("No active booking found.");return}(await Nr.put(`/user/booking/${J._id}/status`,{status:"Complete"})).data.success?(alert("Work completed successfully"),window.history.back()):alert("Failed to complete work.")}catch(Z){console.error("Error completing work:",Z),alert("Failed to complete work.")}finally{L(!1)}}},ee=Z=>Z?new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",G=()=>i==="Accepted"?"status-found":s?.status==="No Longer Available"?"status-expired":"status-searching",ne=()=>i==="Accepted"?"Provider Assigned":s?.status==="No Longer Available"?"Expired":"Processing";return g?d.jsx("div",{className:"loading-container",children:d.jsxs("div",{className:"loading-content",children:[d.jsx("div",{className:"spinner"}),d.jsx("h3",{children:"Loading your order"}),d.jsx("p",{children:"Please wait a moment..."})]})}):B?d.jsxs("div",{className:"error-container",children:[d.jsx("h2",{children:" Error"}),d.jsx("p",{children:B}),d.jsx("button",{onClick:()=>window.location.reload(),children:" Refresh Page"})]}):d.jsx("div",{className:"page-wrapper",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"grid-layout",children:[d.jsxs("div",{className:"main-content",children:[d.jsxs("div",{className:"card header-card",style:{width:"610px",margin:"auto"},children:[d.jsxs("div",{className:"header-left",children:[d.jsx("h2",{children:"Service Order"}),d.jsxs("p",{children:["Order #",s?._id?.slice(-6)||"N/A"]})]}),d.jsx("div",{className:`status-badge ${G()}`,children:ne()})]}),d.jsxs("div",{className:"card",style:{width:"610px"},children:[d.jsx("h3",{className:"card-title",children:"Order Information"}),d.jsxs("div",{className:"details-grid",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Service Date"}),d.jsx("p",{children:ee(s?.createdAt)})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsxs("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Location"}),d.jsx("p",{children:s?.address||"N/A"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Service Type"}),d.jsx("p",{children:s?.typeOfWork||"N/A"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Budget"}),d.jsxs("p",{className:"budget",children:["",s?.budget||"N/A"]})]})]})]}),s?.notes&&d.jsxs("div",{className:"detail-row detail-notes",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Notes"}),d.jsx("p",{children:s.notes})]})]})]})]}),d.jsxs("div",{className:"center-content",children:[a&&d.jsxs("div",{className:"card assigned-card",style:{width:"610px"},children:[d.jsxs("div",{className:"assigned-body",children:[d.jsx("img",{src:a.image,alt:a.name,className:"assigned-image"}),d.jsxs("div",{className:"assigned-details",children:[d.jsx("h4",{children:a.name}),d.jsx("p",{children:a.skill}),d.jsx("p",{className:"phone",children:a.phone}),a.eta&&d.jsxs("p",{children:["ETA: ",new Date(a.eta).toLocaleTimeString()]})]})]}),d.jsxs("div",{className:"assigned-actions",children:[d.jsxs("button",{className:"action-button action-chat",onClick:q,children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Chat with Provider"]}),d.jsxs("button",{className:"action-button action-cancel",onClick:j,children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Cancel Order"]}),d.jsxs("button",{className:"action-button action-call",onClick:()=>window.open(`tel:${a.phone}`),children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),"Call Provider"]})]})]}),s?.status==="Working"&&d.jsxs("div",{className:"card",style:{width:"610px"},children:[d.jsx("h3",{className:"card-title",children:"Complete Work"}),d.jsxs("div",{className:"work-completion-form",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Upload Work Proof Image"}),d.jsx("input",{type:"file",accept:"image/*",onChange:Z=>D(Z.target.files[0]),className:"file-input"})]}),d.jsx("button",{className:"action-button action-complete",onClick:H,disabled:C||!P,children:C?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"spinner-small"}),"Completing..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Confirm Work Done"]})})]})]}),d.jsxs("div",{className:"card",style:{width:"610px"},children:[d.jsx("h3",{className:"card-title",children:"Customer Details"}),d.jsxs("div",{className:"customer-details",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Full Name"}),d.jsx("p",{children:s?.name||"N/A"})]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("svg",{className:"detail-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),d.jsxs("div",{className:"detail-content",children:[d.jsx("p",{children:"Phone Number"}),d.jsx("p",{children:s?.phone||"N/A"})]})]})]})]})]}),d.jsx("div",{className:"sidebar"})]})})})},ble=()=>{const[e,t]=xe.useState([]),[r,i]=xe.useState(!0),[n,a]=xe.useState(null);xe.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const v=await Nr.get("/settings/service-requests");v.data.success&&t(v.data.requests)}catch(v){console.error("Error fetching service requests:",v),alert("Failed to load service requests")}finally{i(!1)}},s=async v=>{try{a(v._id),(await Nr.put(`/settings/service-requests/${v._id}/accept`)).data.success?(alert(`You accepted ${v.fullName}'s request.`),c()):alert("Failed to accept the request. Please try again.")}catch(B){console.error("Error accepting service request:",B),alert("Failed to accept the request. Please try again.")}finally{a(null)}},p=async v=>{try{a(v._id),(await Nr.put(`/settings/service-requests/${v._id}/ignore`)).data.success?(alert(`You declined ${v.fullName}'s request.`),c()):alert("Failed to decline the request. Please try again.")}catch(B){console.error("Error declining service request:",B),alert("Failed to decline the request. Please try again.")}finally{a(null)}},g=v=>d.jsxs("div",{className:"client-card",children:[d.jsxs("div",{className:"client-header",children:[d.jsx("img",{src:v.requester?.profilePic||"/default-profile.png",alt:"Client profile",className:"client-avatar"}),d.jsxs("div",{className:"client-info",children:[d.jsx("h3",{className:"client-name",children:v.fullName||`${v.requester?.firstName} ${v.requester?.lastName}`}),d.jsx("p",{className:"client-email",children:v.requester?.email}),d.jsx("p",{className:"client-phone",children:v.requester?.phone||"Phone not provided"})]})]}),d.jsx("div",{className:"divider"}),d.jsxs("div",{className:"service-details",children:[d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-briefcase detail-icon"}),d.jsx("span",{className:"detail-label",children:"Service Needed:"}),d.jsx("span",{className:"detail-value",children:v.typeOfWork||"Not specified"})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-money-bill-wave detail-icon"}),d.jsx("span",{className:"detail-label",children:"Budget:"}),d.jsxs("span",{className:"detail-value",children:["",v.budget||0]})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-calendar-alt detail-icon"}),d.jsx("span",{className:"detail-label",children:"Date Created:"}),d.jsx("span",{className:"detail-value",children:v.createdAt?new Date(v.createdAt).toLocaleDateString():"Not specified"})]}),d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-clock detail-icon"}),d.jsx("span",{className:"detail-label",children:"Preferred Time:"}),d.jsx("span",{className:"detail-value",children:v.time||"Not specified"})]}),v.notes&&d.jsxs("div",{className:"detail-row",children:[d.jsx("i",{className:"fas fa-sticky-note detail-icon"}),d.jsx("span",{className:"detail-label",children:"Notes:"}),d.jsx("span",{className:"detail-value",children:v.notes})]})]}),d.jsxs("div",{className:"action-buttons",children:[d.jsx("button",{className:`btn-accept ${n===v._id?"loading":""}`,onClick:()=>s(v),disabled:n===v._id,children:n===v._id?d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-spinner fa-spin"}),"Accepting..."]}):d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-check-circle"}),"Accept"]})}),d.jsx("button",{className:`btn-decline ${n===v._id?"loading":""}`,onClick:()=>p(v),disabled:n===v._id,children:n===v._id?d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-spinner fa-spin"}),"Declining..."]}):d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-times-circle"}),"Decline"]})})]})]},v._id);return r?d.jsxs("div",{className:"clients-loading",children:[d.jsx("div",{className:"loading-spinner"}),d.jsx("p",{children:"Loading service requests..."})]}):d.jsxs("div",{className:"clients-container",children:[d.jsxs("div",{className:"clients-header",children:[d.jsx("h2",{children:"Service Requests"}),d.jsx("p",{children:"View and respond to incoming service requests"})]}),e.length===0?d.jsxs("div",{className:"no-requests",children:[d.jsx("i",{className:"fas fa-inbox fa-3x"}),d.jsx("h3",{children:"No Service Requests"}),d.jsx("p",{children:"You don't have any pending service requests at the moment."})]}):d.jsx("div",{className:"clients-grid",children:e.map(g)})]})},wle=()=>{const{setUser:e,logout:t}=io(),[r,i]=xe.useState(!0),[n,a]=xe.useState(!1),[c,s]=xe.useState(""),[p,g]=xe.useState(""),[v,B]=xe.useState(0),[F,C]=xe.useState(!1),[L,P]=xe.useState(""),[D,j]=xe.useState(null),[q,H]=xe.useState(""),[ee,G]=xe.useState("profile"),[ne,Z]=xe.useState({username:"",firstName:"",lastName:"",email:"",phone:""}),[le,J]=xe.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0}),ce=xe.useRef(null),te=Wo(),K=xe.useCallback(async()=>{try{i(!0);const We=await Nr.get("/user/me");if(We.data.success){const ut=We.data.user;e(ut),Z({username:ut.username||"",firstName:ut.firstName||"",lastName:ut.lastName||"",email:ut.email||"",phone:ut.phone||""})}}catch(We){s("Failed to fetch profile data"),console.error("Error fetching profile:",We)}finally{i(!1)}},[e]),me=xe.useCallback(async()=>{try{const We=await Nr.get("/user/me/password");We.data.success&&B(We.data.length)}catch(We){console.error("Failed to fetch password length:",We)}},[]),we=xe.useCallback(async()=>{try{const We=await Nr.get("/user/notification-preferences");if(We.data.success){const ut=We.data.preferences;J({emailNotifications:ut.emailNotifications,smsNotifications:ut.smsNotifications,pushNotifications:ut.pushNotifications})}}catch(We){console.error("Failed to fetch notification preferences:",We)}},[]);xe.useEffect(()=>{K(),me(),we()},[K,me,we]);const Fe=(We="")=>We?We.replace(/.(?=.{4})/g,"*"):"",he=(We="")=>{if(!We.includes("@"))return We;const[ut,dt]=We.split("@");return ut?`${ut.slice(0,2)}${ut.length>2?"***":""}@${dt}`:We},Le=We=>{j(We),H(ne[We]||""),s(""),g("")},$e=()=>{j(null),H("")},Ne=async()=>{if(D){if(!q.trim()){s("Value cannot be empty.");return}try{a(!0),s(""),g("");const We={[D]:q.trim()},ut=await Nr.put("/user/update-profile",We);ut.data.success?(e(ut.data.user),Z(dt=>({...dt,[D]:q.trim()})),g(`${D==="phone"?"Phone number":"Email"} updated successfully.`),$e()):s("Failed to update profile")}catch(We){console.error("Error updating profile:",We),s("Failed to update profile")}finally{a(!1)}}},Te=async()=>{try{(await Nr.put("/user/password/update",{newPassword:L})).data.success?(g("Password updated successfully"),C(!1),B(L.length),P("")):s("Failed to update password")}catch(We){console.error("Error updating password:",We),s("Error updating password")}},Ge=We=>"*".repeat(We||0),Y=()=>{ce.current?.click()},Ae=async We=>{const ut=We.target.files?.[0];if(ut)try{a(!0),s(""),g("");const dt=new FormData;dt.append("profilePic",ut);const zt=await Nr.put("/user/update-profile",dt,{headers:{"Content-Type":"multipart/form-data"}});zt.data.success?(e(zt.data.user),g("Profile picture updated.")):s("Failed to update profile picture")}catch(dt){console.error("Profile picture update failed:",dt),s("Failed to update profile picture")}finally{a(!1)}},fe=async()=>{try{a(!0),s(""),g(""),(await Nr.put("/user/notification-preferences",le)).data.success?g("Notification preferences updated successfully."):s("Failed to update notification preferences")}catch(We){console.error("Error updating notification preferences:",We),s("Failed to update notification preferences")}finally{a(!1)}},be=async()=>{try{await t(),te("/login")}catch(We){console.error("Logout failed:",We)}};if(r)return d.jsx("p",{children:"Loading..."});const Me=[{label:"Profile",icon:"",key:"profile"},{label:"Notification",icon:"",key:"notifications"}],ze=[{label:"Terms & Policies",icon:"",key:"terms"},{label:"About us",icon:"",key:"about"}];return d.jsxs("div",{className:"settings-shell",children:[d.jsxs("aside",{className:"settings-shell__sidebar",children:[d.jsxs("div",{className:"settings-shell__group",children:[d.jsx("p",{className:"settings-shell__title",children:"Account"}),Me.map(We=>d.jsxs("button",{className:`settings-shell__link ${ee===We.key?"is-active":""}`,onClick:()=>G(We.key),type:"button",children:[d.jsx("span",{children:We.icon}),We.label]},We.key))]}),d.jsxs("div",{className:"settings-shell__group",children:[d.jsx("p",{className:"settings-shell__title",children:"About"}),ze.map(We=>d.jsxs("button",{className:`settings-shell__link ${ee===We.key?"is-active":""}`,onClick:()=>G(We.key),type:"button",children:[d.jsx("span",{children:We.icon}),We.label]},We.key))]}),d.jsx("button",{className:"settings-shell__logout",type:"button",onClick:be,children:"Log Out "})]}),d.jsxs("main",{className:"settings-shell__content",children:[d.jsx("header",{className:"settings-profile-header",children:d.jsx("h1",{children:ee==="profile"?"Profile":ee==="notifications"?"Notifications":ee==="terms"?"Terms & Policies":"About SkillConnect"})}),c&&d.jsx("p",{className:"error-text",children:c}),p&&d.jsx("p",{className:"success-text",children:p}),ee==="profile"&&d.jsxs("section",{className:"settings-profile-card",children:[d.jsxs("div",{className:"profile-row",children:[d.jsx("div",{className:"profile-label",children:"First Name"}),d.jsx("div",{className:"profile-value",children:ne.firstName})]}),d.jsxs("div",{className:"profile-row",children:[d.jsx("div",{className:"profile-label",children:"Last Name"}),d.jsx("div",{className:"profile-value",children:ne.lastName})]}),d.jsxs("div",{className:"profile-row editable",children:[d.jsx("div",{className:"profile-label",children:"Phone"}),D==="phone"?d.jsxs("div",{className:"profile-inline-editor",children:[d.jsx("input",{type:"tel",value:q,onChange:We=>H(We.target.value),placeholder:"+63 900 000 0000"}),d.jsxs("div",{className:"profile-inline-actions",children:[d.jsx("button",{type:"button",onClick:Ne,disabled:n,children:"Save"}),d.jsx("button",{type:"button",onClick:$e,disabled:n,children:"Cancel"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"profile-value",children:Fe(ne.phone)}),d.jsx("button",{type:"button",className:"profile-action",onClick:()=>Le("phone"),children:"Change"})]})]}),d.jsxs("div",{className:"profile-row editable",children:[d.jsx("div",{className:"profile-label",children:"Email"}),D==="email"?d.jsxs("div",{className:"profile-inline-editor",children:[d.jsx("input",{type:"email",value:q,onChange:We=>H(We.target.value),placeholder:"name@email.com"}),d.jsxs("div",{className:"profile-inline-actions",children:[d.jsx("button",{type:"button",onClick:Ne,disabled:n,children:"Save"}),d.jsx("button",{type:"button",onClick:$e,disabled:n,children:"Cancel"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"profile-value",children:he(ne.email)}),d.jsx("button",{type:"button",className:"profile-action",onClick:()=>Le("email"),children:"Change"})]})]}),d.jsxs("div",{className:"profile-row editable",children:[d.jsx("div",{className:"profile-label",children:"Password"}),d.jsx("div",{className:"profile-value",children:Ge(v)}),d.jsx("button",{type:"button",className:"profile-action",onClick:()=>C(!0),children:"Change"})]}),d.jsxs("div",{className:"profile-row editable",children:[d.jsx("div",{className:"profile-label",children:"Profile picture"}),d.jsx("div",{className:"profile-value",children:"profilepicture.jpg"}),d.jsx("button",{type:"button",className:"profile-action",onClick:Y,children:"Update"}),d.jsx("input",{type:"file",ref:ce,accept:"image/*",style:{display:"none"},onChange:Ae})]}),d.jsxs("div",{className:"profile-row accent",children:[d.jsx("div",{className:"profile-label",children:"Account"}),d.jsx("button",{type:"button",className:"profile-action delete",children:"Delete Account"})]})]}),ee==="notifications"&&d.jsxs("section",{className:"settings-card",children:[d.jsx("h2",{children:"Notification Preferences"}),d.jsx("p",{children:"Manage how we keep you updated about service requests and account activity."}),d.jsxs("div",{className:"toggle-row",children:[d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:le.emailNotifications,onChange:We=>J(ut=>({...ut,emailNotifications:We.target.checked}))}),"Email reminders"]}),d.jsx("p",{className:"option-description",children:"Receive service request confirmations, updates, and important account notifications via email."})]}),d.jsxs("div",{className:"toggle-row",children:[d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:le.smsNotifications,onChange:We=>J(ut=>({...ut,smsNotifications:We.target.checked}))}),"SMS alerts"]}),d.jsx("p",{className:"option-description",children:"Get urgent notifications about service request changes and service updates via text message."})]}),d.jsxs("div",{className:"toggle-row",children:[d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:le.pushNotifications,onChange:We=>J(ut=>({...ut,pushNotifications:We.target.checked}))}),"Push notifications"]}),d.jsx("p",{className:"option-description",children:"Receive instant notifications on your device for new messages, service requests, and updates."})]}),d.jsx("button",{className:"primary-btn",type:"button",onClick:fe,disabled:n,children:n?"Saving...":"Save Preferences"})]}),ee==="terms"&&d.jsxs("section",{className:"settings-card",children:[d.jsx("h2",{children:"Terms & Policies"}),d.jsx("p",{children:"Please review our latest terms of service and privacy practices."}),d.jsx("button",{className:"primary-btn",type:"button",onClick:()=>te("/terms"),children:"View Terms & Policies"})]}),ee==="about"&&d.jsxs("section",{className:"settings-card",children:[d.jsx("h2",{children:"About SkillConnect"}),d.jsx("p",{children:"Learn how we connect trusted service providers with the community."}),d.jsx("button",{className:"primary-btn",type:"button",onClick:()=>te("/about"),children:"Visit About Page"})]}),F&&d.jsx("div",{className:"settings-password-modal",children:d.jsxs("div",{className:"password-modal__card",children:[d.jsx("h3",{children:"Update Password"}),d.jsx("input",{type:"password",placeholder:"Enter new password",value:L,onChange:We=>P(We.target.value)}),d.jsxs("div",{className:"password-modal__actions",children:[d.jsx("button",{type:"button",onClick:()=>{C(!1),P("")},children:"Cancel"}),d.jsx("button",{type:"button",disabled:!L,onClick:Te,children:"Save"})]})]})})]})]})},Cle=()=>{const{user:e,logout:t}=io(),r=async()=>{await t()};return d.jsx("div",{className:"verification-pending-container",children:d.jsxs("div",{className:"verification-pending-card",children:[d.jsx("div",{className:"verification-icon",children:d.jsx("i",{className:"fas fa-clock"})}),d.jsx("h1",{children:"Account Verification Pending"}),d.jsxs("div",{className:"verification-message",children:[d.jsxs("p",{children:["Hello ",d.jsxs("strong",{children:[e?.firstName," ",e?.lastName]}),","]}),d.jsx("p",{children:"Your account is currently under review by our administrators."}),d.jsx("p",{children:"You will receive access to the platform once your account has been verified."})]}),d.jsxs("div",{className:"verification-details",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("i",{className:"fas fa-envelope"}),d.jsx("span",{children:"Check your email for verification updates"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("i",{className:"fas fa-user-shield"}),d.jsx("span",{children:"Verification typically takes 1-3 business days"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("i",{className:"fas fa-phone"}),d.jsx("span",{children:"Contact support if you have questions"})]})]}),d.jsx("div",{className:"verification-actions",children:d.jsxs("button",{className:"logout-btn",onClick:r,children:[d.jsx("i",{className:"fas fa-sign-out-alt"}),"Logout"]})}),d.jsx("div",{className:"verification-footer",children:d.jsx("p",{children:"Thank you for your patience!"})})]})})},Ble=()=>{const{user:e,logout:t}=io(),r=async()=>{await t()};return d.jsx("div",{className:"account-banned-container",children:d.jsxs("div",{className:"account-banned-card",children:[d.jsx("div",{className:"banned-icon",children:d.jsx("i",{className:"fas fa-ban"})}),d.jsx("h1",{children:"Account Suspended"}),d.jsxs("div",{className:"banned-message",children:[d.jsxs("p",{children:["Hello ",d.jsxs("strong",{children:[e?.firstName," ",e?.lastName]}),","]}),d.jsx("p",{children:"Your account has been suspended due to violation of our community guidelines."}),d.jsx("p",{children:"If you believe this suspension was made in error, please contact our support team for assistance."})]}),d.jsxs("div",{className:"banned-details",children:[d.jsxs("div",{className:"detail-item",children:[d.jsx("i",{className:"fas fa-envelope"}),d.jsx("span",{children:"Contact support for account reinstatement"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("i",{className:"fas fa-shield-alt"}),d.jsx("span",{children:"Review our community guidelines"})]}),d.jsxs("div",{className:"detail-item",children:[d.jsx("i",{className:"fas fa-question-circle"}),d.jsx("span",{children:"Need help? Reach out to our support team"})]})]}),d.jsx("div",{className:"banned-actions",children:d.jsxs("button",{className:"logout-btn",onClick:r,children:[d.jsx("i",{className:"fas fa-sign-out-alt"}),"Logout"]})}),d.jsx("div",{className:"banned-footer",children:d.jsx("p",{children:"We appreciate your understanding."})})]})})};class Sle extends zn.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleGoHome=()=>{window.location.href="/home"};render(){return this.state.hasError?d.jsxs("div",{className:"error-boundary",children:[d.jsx(WU,{className:"error-boundary-icon"}),d.jsx("h2",{children:"Oops! Something went wrong"}),d.jsx("p",{children:"We're sorry, but something unexpected happened. Don't worry, our team has been notified."}),d.jsxs("div",{className:"error-boundary-buttons",children:[d.jsxs("button",{className:"error-boundary-button",onClick:this.handleRetry,"aria-label":"Try loading the page again",children:[d.jsx(JU,{}),"Try Again"]}),d.jsxs("button",{className:"error-boundary-button error-boundary-button-secondary",onClick:this.handleGoHome,"aria-label":"Go back to home page",children:[d.jsx(X6,{}),"Go Home"]})]}),!1,d.jsxs("div",{className:"error-boundary-help",children:[d.jsx("p",{children:"If the problem persists, please try:"}),d.jsxs("ul",{children:[d.jsx("li",{children:"Refreshing the page"}),d.jsx("li",{children:"Clearing your browser cache"}),d.jsx("li",{children:"Contacting support if the issue continues"})]})]})]}):this.props.children}}const rf=({allowedRoles:e,children:t,fallback:r=null})=>{const{user:i}=io(),n=i?.role;return!e||e.length===0||e.includes(n)?t:r||d.jsx(F1,{to:"/user/service-request"})},Ele=({children:e})=>{const{user:t}=io();return t?.banned?d.jsx(Ble,{}):t?.verified?e:d.jsx(Cle,{})},Tle=()=>{const{isAuthorized:e,tokenType:t,authLoaded:r,user:i,admin:n,navigationLoading:a,setNavigationLoading:c}=io(),s=sh();Wo();const p=Kj(),g=e&&t==="admin",v=e&&t==="user",B=xe.useRef(s.pathname),F=i?.role;return xe.useEffect(()=>{B.current!==s.pathname&&(c(!0),setTimeout(()=>{c(!1)},100),B.current=s.pathname)},[s.pathname,c]),xe.useEffect(()=>{v&&s.pathname.startsWith("/user/")&&s.pathname!=="/user/login"&&localStorage.setItem("userLastPath",s.pathname)},[s.pathname,v]),xe.useEffect(()=>{if(!r)return;const C=s.pathname==="/login"||s.pathname==="/register"||s.pathname==="/admin/login"||s.pathname==="/forgot-password"||s.pathname==="/verify-email"||s.pathname==="/reset-password";if(e&&!C){if(g&&!s.pathname.startsWith("/admin")){const L=localStorage.getItem("adminLastPath");L&&L.startsWith("/admin/")?p(L,{replace:!0}):p("/admin/analytics",{replace:!0})}else if(v&&(s.pathname==="/"||s.pathname==="/home")){const L=localStorage.getItem("userLastPath");L&&L.startsWith("/user/")?p(L,{replace:!0}):F==="Service Provider"?(p("/user/my-service",{replace:!0}),localStorage.setItem("userLastPath","/user/my-service")):(p("/user/service-request",{replace:!0}),localStorage.setItem("userLastPath","/user/service-request"))}}else!e&&!C&&s.pathname.startsWith("/user/")?p("/login",{replace:!0}):!e&&!C&&s.pathname.startsWith("/admin/")&&p("/admin/login",{replace:!0})},[e,s.pathname,p,g,v,r,F]),a?d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:d.jsx(FU,{})}):d.jsxs(d.Fragment,{children:[d.jsx(fO,{}),d.jsxs(iP,{children:[d.jsx(Rn,{path:"/",element:d.jsx(RB,{})}),d.jsx(Rn,{path:"/home",element:d.jsx(RB,{})}),d.jsx(Rn,{path:"/login",element:d.jsx(UO,{})}),d.jsx(Rn,{path:"/register",element:d.jsx(OO,{})}),d.jsx(Rn,{path:"/forgot-password",element:d.jsx(e7,{})}),d.jsx(Rn,{path:"/verify-email",element:d.jsx(t7,{})}),d.jsx(Rn,{path:"/reset-password",element:d.jsx(r7,{})}),d.jsx(Rn,{path:"/admin/login",element:d.jsx(i7,{})}),d.jsxs(Rn,{path:"/user/*",element:v?d.jsx(Ele,{children:d.jsx(Qk,{})}):d.jsx(F1,{to:"/login"}),children:[d.jsx(Rn,{index:!0,element:d.jsx(Zy,{})}),d.jsx(Rn,{path:"dashboard",element:d.jsx(Zy,{})}),d.jsx(Rn,{path:"my-service",element:d.jsx(rf,{allowedRoles:["Service Provider"],children:d.jsx(Zy,{})})}),d.jsx(Rn,{path:"my-service",element:d.jsx(Zy,{})}),d.jsx(Rn,{path:"manage-profile",element:d.jsx(gle,{})}),d.jsx(Rn,{path:"general-settings",element:d.jsx(wle,{})}),d.jsx(Rn,{path:"service-request",element:d.jsx(rf,{allowedRoles:["Community Member","Service Provider"],children:d.jsx(ole,{})})}),d.jsx(Rn,{path:"records",element:d.jsx(rf,{allowedRoles:["Community Member","Service Provider"],children:d.jsx(fle,{})})}),d.jsx(Rn,{path:"waiting-for-worker",element:d.jsx(rf,{allowedRoles:["Community Member","Service Provider"],children:d.jsx(vle,{})})}),d.jsx(Rn,{path:"accepted-order",element:d.jsx(rf,{allowedRoles:["Community Member","Service Provider"],children:d.jsx(_le,{})})}),d.jsx(Rn,{path:"users-request",element:d.jsx(rf,{allowedRoles:["Service Provider"],children:d.jsx(mle,{})})}),d.jsx(Rn,{path:"accepted-request",element:d.jsx(rf,{allowedRoles:["Service Provider"],children:d.jsx(xle,{})})}),d.jsx(Rn,{path:"client-accepted",element:d.jsx(rf,{allowedRoles:["Service Provider"],children:d.jsx(yle,{})})}),d.jsx(Rn,{path:"clients",element:d.jsx(rf,{allowedRoles:["Service Provider"],children:d.jsx(ble,{})})})]}),d.jsxs(Rn,{path:"/admin/*",element:g?d.jsx(n7,{}):d.jsx(F1,{to:"/admin/login"}),children:[d.jsx(Rn,{index:!0,element:d.jsx(F1,{to:"/admin/analytics"})}),d.jsx(Rn,{path:"analytics",element:d.jsx(WY,{})}),d.jsx(Rn,{path:"recommendations",element:d.jsx($Y,{})}),d.jsx(Rn,{path:"service-providers",element:d.jsx(s7,{})}),d.jsx(Rn,{path:"jobfairs",element:d.jsx(a7,{})}),d.jsx(Rn,{path:"service-requests",element:d.jsx(o7,{})}),d.jsx(Rn,{path:"users",element:d.jsx(u7,{})}),d.jsx(Rn,{path:"admin-register",element:d.jsx(YY,{})}),d.jsx(Rn,{path:"admin-settings",element:d.jsx(ZY,{})}),d.jsx(Rn,{path:"skill-category",element:d.jsx(XY,{})}),d.jsx(Rn,{path:"residents",element:d.jsx(tle,{})})]}),d.jsx(Rn,{path:"*",element:d.jsx(F1,{to:"/"})})]}),!g&&!v&&d.jsx(mO,{}),d.jsx(kU,{user:v?i:n})]})},kle=()=>d.jsx(Sle,{children:d.jsx(lle,{children:d.jsxs(SP,{children:[d.jsx(Tle,{}),d.jsx(TU,{})]})})});xg.register(eC,tC,$4,yg,Y4,J4,Z4,X4,W4,GF);hM.createRoot(document.getElementById("root")).render(d.jsx(zn.StrictMode,{children:d.jsx(qj,{children:d.jsx(kle,{})})}));export{Ns as _,Fle as c,A4 as g};
